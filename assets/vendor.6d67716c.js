function vH(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(i){if(i!=="default"&&!(i in e)){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Uc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},vi={exports:{}},Yt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var OM=Object.getOwnPropertySymbols,yH=Object.prototype.hasOwnProperty,xH=Object.prototype.propertyIsEnumerable;function wH(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function bH(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var iO=bH()?Object.assign:function(e,t){for(var r,i=wH(e),n,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var a in r)yH.call(r,a)&&(i[a]=r[a]);if(OM){n=OM(r);for(var o=0;o<n.length;o++)xH.call(r,n[o])&&(i[n[o]]=r[n[o]])}}return i};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw=iO,ic=60103,nO=60106;Yt.Fragment=60107;Yt.StrictMode=60108;Yt.Profiler=60114;var sO=60109,aO=60110,oO=60112;Yt.Suspense=60113;var lO=60115,uO=60116;if(typeof Symbol=="function"&&Symbol.for){var As=Symbol.for;ic=As("react.element"),nO=As("react.portal"),Yt.Fragment=As("react.fragment"),Yt.StrictMode=As("react.strict_mode"),Yt.Profiler=As("react.profiler"),sO=As("react.provider"),aO=As("react.context"),oO=As("react.forward_ref"),Yt.Suspense=As("react.suspense"),lO=As("react.memo"),uO=As("react.lazy")}var PM=typeof Symbol=="function"&&Symbol.iterator;function _H(e){return e===null||typeof e!="object"?null:(e=PM&&e[PM]||e["@@iterator"],typeof e=="function"?e:null)}function Op(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cO={};function nc(e,t,r){this.props=e,this.context=t,this.refs=cO,this.updater=r||hO}nc.prototype.isReactComponent={};nc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Op(85));this.updater.enqueueSetState(this,e,t,"setState")};nc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dO(){}dO.prototype=nc.prototype;function qw(e,t,r){this.props=e,this.context=t,this.refs=cO,this.updater=r||hO}var Qw=qw.prototype=new dO;Qw.constructor=qw;Xw(Qw,nc.prototype);Qw.isPureReactComponent=!0;var Kw={current:null},pO=Object.prototype.hasOwnProperty,fO={key:!0,ref:!0,__self:!0,__source:!0};function mO(e,t,r){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)pO.call(t,i)&&!fO.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var l=Array(o),h=0;h<o;h++)l[h]=arguments[h+2];n.children=l}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:ic,type:e,key:s,ref:a,props:n,_owner:Kw.current}}function SH(e,t){return{$$typeof:ic,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zw(e){return typeof e=="object"&&e!==null&&e.$$typeof===ic}function AH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var DM=/\/+/g;function _y(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AH(""+e.key):t.toString(36)}function rg(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ic:case nO:a=!0}}if(a)return a=e,n=n(a),e=i===""?"."+_y(a,0):i,Array.isArray(n)?(r="",e!=null&&(r=e.replace(DM,"$&/")+"/"),rg(n,t,r,"",function(h){return h})):n!=null&&(Zw(n)&&(n=SH(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(DM,"$&/")+"/")+e)),t.push(n)),1;if(a=0,i=i===""?".":i+":",Array.isArray(e))for(var o=0;o<e.length;o++){s=e[o];var l=i+_y(s,o);a+=rg(s,t,r,l,n)}else if(l=_H(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=i+_y(s,o++),a+=rg(s,t,r,l,n);else if(s==="object")throw t=""+e,Error(Op(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function jf(e,t,r){if(e==null)return e;var i=[],n=0;return rg(e,i,"","",function(s){return t.call(r,s,n++)}),i}function MH(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var gO={current:null};function uo(){var e=gO.current;if(e===null)throw Error(Op(321));return e}var EH={ReactCurrentDispatcher:gO,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Kw,IsSomeRendererActing:{current:!1},assign:Xw};Yt.Children={map:jf,forEach:function(e,t,r){jf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return jf(e,function(){t++}),t},toArray:function(e){return jf(e,function(t){return t})||[]},only:function(e){if(!Zw(e))throw Error(Op(143));return e}};Yt.Component=nc;Yt.PureComponent=qw;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EH;Yt.cloneElement=function(e,t,r){if(e==null)throw Error(Op(267,e));var i=Xw({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Kw.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)pO.call(t,l)&&!fO.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){o=Array(l);for(var h=0;h<l;h++)o[h]=arguments[h+2];i.children=o}return{$$typeof:ic,type:e.type,key:n,ref:s,props:i,_owner:a}};Yt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:aO,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:sO,_context:e},e.Consumer=e};Yt.createElement=mO;Yt.createFactory=function(e){var t=mO.bind(null,e);return t.type=e,t};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(e){return{$$typeof:oO,render:e}};Yt.isValidElement=Zw;Yt.lazy=function(e){return{$$typeof:uO,_payload:{_status:-1,_result:e},_init:MH}};Yt.memo=function(e,t){return{$$typeof:lO,type:e,compare:t===void 0?null:t}};Yt.useCallback=function(e,t){return uo().useCallback(e,t)};Yt.useContext=function(e,t){return uo().useContext(e,t)};Yt.useDebugValue=function(){};Yt.useEffect=function(e,t){return uo().useEffect(e,t)};Yt.useImperativeHandle=function(e,t,r){return uo().useImperativeHandle(e,t,r)};Yt.useLayoutEffect=function(e,t){return uo().useLayoutEffect(e,t)};Yt.useMemo=function(e,t){return uo().useMemo(e,t)};Yt.useReducer=function(e,t,r){return uo().useReducer(e,t,r)};Yt.useRef=function(e){return uo().useRef(e)};Yt.useState=function(e){return uo().useState(e)};Yt.version="17.0.2";vi.exports=Yt;var vO=vi.exports,_g=vH({__proto__:null,default:vO},[vi.exports]),yO={exports:{}},ms={},xO={exports:{}},wO={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,i,n;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,h=null,d=function(){if(l!==null)try{var H=e.unstable_now();l(!0,H),l=null}catch(X){throw setTimeout(d,0),X}};t=function(H){l!==null?setTimeout(t,0,H):(l=H,setTimeout(d,0))},r=function(H,X){h=setTimeout(H,X)},i=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},n=e.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,f=window.clearTimeout;if(typeof console!="undefined"){var m=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof m!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,b=null,x=-1,v=5,g=0;e.unstable_shouldYield=function(){return e.unstable_now()>=g},n=function(){},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<H?Math.floor(1e3/H):5};var _=new MessageChannel,S=_.port2;_.port1.onmessage=function(){if(b!==null){var H=e.unstable_now();g=H+v;try{b(!0,H)?S.postMessage(null):(y=!1,b=null)}catch(X){throw S.postMessage(null),X}}else y=!1},t=function(H){b=H,y||(y=!0,S.postMessage(null))},r=function(H,X){x=p(function(){H(e.unstable_now())},X)},i=function(){f(x),x=-1}}function T(H,X){var J=H.length;H.push(X);e:for(;;){var se=J-1>>>1,ge=H[se];if(ge!==void 0&&0<O(ge,X))H[se]=X,H[J]=ge,J=se;else break e}}function A(H){return H=H[0],H===void 0?null:H}function M(H){var X=H[0];if(X!==void 0){var J=H.pop();if(J!==X){H[0]=J;e:for(var se=0,ge=H.length;se<ge;){var Y=2*(se+1)-1,be=H[Y],fe=Y+1,ee=H[fe];if(be!==void 0&&0>O(be,J))ee!==void 0&&0>O(ee,be)?(H[se]=ee,H[fe]=J,se=fe):(H[se]=be,H[Y]=J,se=Y);else if(ee!==void 0&&0>O(ee,J))H[se]=ee,H[fe]=J,se=fe;else break e}}return X}return null}function O(H,X){var J=H.sortIndex-X.sortIndex;return J!==0?J:H.id-X.id}var P=[],C=[],N=1,U=null,V=3,k=!1,G=!1,Z=!1;function W(H){for(var X=A(C);X!==null;){if(X.callback===null)M(C);else if(X.startTime<=H)M(C),X.sortIndex=X.expirationTime,T(P,X);else break;X=A(C)}}function $(H){if(Z=!1,W(H),!G)if(A(P)!==null)G=!0,t(ae);else{var X=A(C);X!==null&&r($,X.startTime-H)}}function ae(H,X){G=!1,Z&&(Z=!1,i()),k=!0;var J=V;try{for(W(X),U=A(P);U!==null&&(!(U.expirationTime>X)||H&&!e.unstable_shouldYield());){var se=U.callback;if(typeof se=="function"){U.callback=null,V=U.priorityLevel;var ge=se(U.expirationTime<=X);X=e.unstable_now(),typeof ge=="function"?U.callback=ge:U===A(P)&&M(P),W(X)}else M(P);U=A(P)}if(U!==null)var Y=!0;else{var be=A(C);be!==null&&r($,be.startTime-X),Y=!1}return Y}finally{U=null,V=J,k=!1}}var te=n;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){G||k||(G=!0,t(ae))},e.unstable_getCurrentPriorityLevel=function(){return V},e.unstable_getFirstCallbackNode=function(){return A(P)},e.unstable_next=function(H){switch(V){case 1:case 2:case 3:var X=3;break;default:X=V}var J=V;V=X;try{return H()}finally{V=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=te,e.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=V;V=H;try{return X()}finally{V=J}},e.unstable_scheduleCallback=function(H,X,J){var se=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?se+J:se):J=se,H){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=J+ge,H={id:N++,callback:X,priorityLevel:H,startTime:J,expirationTime:ge,sortIndex:-1},J>se?(H.sortIndex=J,T(C,H),A(P)===null&&H===A(C)&&(Z?i():Z=!0,r($,J-se))):(H.sortIndex=ge,T(P,H),G||k||(G=!0,t(ae))),H},e.unstable_wrapCallback=function(H){var X=V;return function(){var J=V;V=X;try{return H.apply(this,arguments)}finally{V=J}}}})(wO);xO.exports=wO;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv=vi.exports,Tr=iO,bi=xO.exports;function Ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!bv)throw Error(Ne(227));var bO=new Set,Zd={};function eu(e,t){kh(e,t),kh(e+"Capture",t)}function kh(e,t){for(Zd[e]=t,e=0;e<t.length;e++)bO.add(t[e])}var so=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),TH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RM=Object.prototype.hasOwnProperty,NM={},IM={};function CH(e){return RM.call(IM,e)?!0:RM.call(NM,e)?!1:TH.test(e)?IM[e]=!0:(NM[e]=!0,!1)}function LH(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OH(e,t,r,i){if(t===null||typeof t=="undefined"||LH(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,r,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ni[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ni[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ni[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ni[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ni[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ni[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ni[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ni[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ni[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var $w=/[\-:]([a-z])/g;function eb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($w,eb);Ni[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($w,eb);Ni[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($w,eb);Ni[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ni[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});Ni.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ni[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function tb(e,t,r,i){var n=Ni.hasOwnProperty(t)?Ni[t]:null,s=n!==null?n.type===0:i?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");s||(OH(t,r,n,i)&&(r=null),i||n===null?CH(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var tu=bv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vd=60103,Bl=60106,Io=60107,rb=60108,Ld=60114,ib=60109,nb=60110,_v=60112,Od=60113,Sg=60120,Sv=60115,sb=60116,ab=60121,ob=60128,_O=60129,lb=60130,a1=60131;if(typeof Symbol=="function"&&Symbol.for){var fi=Symbol.for;vd=fi("react.element"),Bl=fi("react.portal"),Io=fi("react.fragment"),rb=fi("react.strict_mode"),Ld=fi("react.profiler"),ib=fi("react.provider"),nb=fi("react.context"),_v=fi("react.forward_ref"),Od=fi("react.suspense"),Sg=fi("react.suspense_list"),Sv=fi("react.memo"),sb=fi("react.lazy"),ab=fi("react.block"),fi("react.scope"),ob=fi("react.opaque.id"),_O=fi("react.debug_trace_mode"),lb=fi("react.offscreen"),a1=fi("react.legacy_hidden")}var BM=typeof Symbol=="function"&&Symbol.iterator;function kc(e){return e===null||typeof e!="object"?null:(e=BM&&e[BM]||e["@@iterator"],typeof e=="function"?e:null)}var Sy;function yd(e){if(Sy===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sy=t&&t[1]||""}return`
`+Sy+e}var Ay=!1;function Wf(e,t){if(!e||Ay)return"";Ay=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var i=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){i=l}e.call(t.prototype)}else{try{throw Error()}catch(l){i=l}e()}}catch(l){if(l&&i&&typeof l.stack=="string"){for(var n=l.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o])return`
`+n[a].replace(" at new "," at ");while(1<=a&&0<=o);break}}}finally{Ay=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yd(e):""}function PH(e){switch(e.tag){case 5:return yd(e.type);case 16:return yd("Lazy");case 13:return yd("Suspense");case 19:return yd("SuspenseList");case 0:case 2:case 15:return e=Wf(e.type,!1),e;case 11:return e=Wf(e.type.render,!1),e;case 22:return e=Wf(e.type._render,!1),e;case 1:return e=Wf(e.type,!0),e;default:return""}}function wh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Io:return"Fragment";case Bl:return"Portal";case Ld:return"Profiler";case rb:return"StrictMode";case Od:return"Suspense";case Sg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nb:return(e.displayName||"Context")+".Consumer";case ib:return(e._context.displayName||"Context")+".Provider";case _v:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Sv:return wh(e.type);case ab:return wh(e._render);case sb:t=e._payload,e=e._init;try{return wh(e(t))}catch{}}return null}function el(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function SO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DH(e){var t=SO(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jf(e){e._valueTracker||(e._valueTracker=DH(e))}function AO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=SO(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Ag(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function o1(e,t){var r=t.checked;return Tr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function zM(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=el(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MO(e,t){t=t.checked,t!=null&&tb(e,"checked",t,!1)}function l1(e,t){MO(e,t);var r=el(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?u1(e,t.type,r):t.hasOwnProperty("defaultValue")&&u1(e,t.type,el(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function FM(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function u1(e,t,r){(t!=="number"||Ag(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function RH(e){var t="";return bv.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function h1(e,t){return e=Tr({children:void 0},t),(t=RH(t.children))&&(e.children=t),e}function bh(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+el(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function c1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Tr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function UM(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ne(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:el(r)}}function EO(e,t){var r=el(t.value),i=el(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function kM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var d1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function TO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?TO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yf,CO=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!==d1.svg||"innerHTML"in e)e.innerHTML=t;else{for(Yf=Yf||document.createElement("div"),Yf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $d(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NH=["Webkit","ms","Moz","O"];Object.keys(Pd).forEach(function(e){NH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pd[t]=Pd[e]})});function LO(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pd.hasOwnProperty(e)&&Pd[e]?(""+t).trim():t+"px"}function OO(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=LO(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var IH=Tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f1(e,t){if(t){if(IH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ne(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ne(62))}}function m1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ub(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var g1=null,_h=null,Sh=null;function HM(e){if(e=Dp(e)){if(typeof g1!="function")throw Error(Ne(280));var t=e.stateNode;t&&(t=Lv(t),g1(e.stateNode,e.type,t))}}function PO(e){_h?Sh?Sh.push(e):Sh=[e]:_h=e}function DO(){if(_h){var e=_h,t=Sh;if(Sh=_h=null,HM(e),t)for(e=0;e<t.length;e++)HM(t[e])}}function hb(e,t){return e(t)}function RO(e,t,r,i,n){return e(t,r,i,n)}function cb(){}var NO=hb,zl=!1,My=!1;function db(){(_h!==null||Sh!==null)&&(cb(),DO())}function BH(e,t,r){if(My)return e(t,r);My=!0;try{return NO(e,t,r)}finally{My=!1,db()}}function ep(e,t){var r=e.stateNode;if(r===null)return null;var i=Lv(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ne(231,t,typeof r));return r}var v1=!1;if(so)try{var Hc={};Object.defineProperty(Hc,"passive",{get:function(){v1=!0}}),window.addEventListener("test",Hc,Hc),window.removeEventListener("test",Hc,Hc)}catch{v1=!1}function zH(e,t,r,i,n,s,a,o,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(d){this.onError(d)}}var Dd=!1,Mg=null,Eg=!1,y1=null,FH={onError:function(e){Dd=!0,Mg=e}};function UH(e,t,r,i,n,s,a,o,l){Dd=!1,Mg=null,zH.apply(FH,arguments)}function kH(e,t,r,i,n,s,a,o,l){if(UH.apply(this,arguments),Dd){if(Dd){var h=Mg;Dd=!1,Mg=null}else throw Error(Ne(198));Eg||(Eg=!0,y1=h)}}function ru(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function IO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function GM(e){if(ru(e)!==e)throw Error(Ne(188))}function HH(e){var t=e.alternate;if(!t){if(t=ru(e),t===null)throw Error(Ne(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return GM(n),e;if(s===i)return GM(n),t;s=s.sibling}throw Error(Ne(188))}if(r.return!==i.return)r=n,i=s;else{for(var a=!1,o=n.child;o;){if(o===r){a=!0,r=n,i=s;break}if(o===i){a=!0,i=n,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,i=n;break}if(o===i){a=!0,i=s,r=n;break}o=o.sibling}if(!a)throw Error(Ne(189))}}if(r.alternate!==i)throw Error(Ne(190))}if(r.tag!==3)throw Error(Ne(188));return r.stateNode.current===r?e:t}function BO(e){if(e=HH(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function VM(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var zO,pb,FO,UO,x1=!1,ma=[],Go=null,Vo=null,jo=null,tp=new Map,rp=new Map,Gc=[],jM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w1(e,t,r,i,n){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:n,targetContainers:[i]}}function WM(e,t){switch(e){case"focusin":case"focusout":Go=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":tp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rp.delete(t.pointerId)}}function Vc(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e=w1(t,r,i,n,s),t!==null&&(t=Dp(t),t!==null&&pb(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function GH(e,t,r,i,n){switch(t){case"focusin":return Go=Vc(Go,e,t,r,i,n),!0;case"dragenter":return Vo=Vc(Vo,e,t,r,i,n),!0;case"mouseover":return jo=Vc(jo,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return tp.set(s,Vc(tp.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,rp.set(s,Vc(rp.get(s)||null,e,t,r,i,n)),!0}return!1}function VH(e){var t=Fl(e.target);if(t!==null){var r=ru(t);if(r!==null){if(t=r.tag,t===13){if(t=IO(r),t!==null){e.blockedOn=t,UO(e.lanePriority,function(){bi.unstable_runWithPriority(e.priority,function(){FO(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ig(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=Dp(r),t!==null&&pb(t),e.blockedOn=r,!1;t.shift()}return!0}function JM(e,t,r){ig(e)&&r.delete(t)}function jH(){for(x1=!1;0<ma.length;){var e=ma[0];if(e.blockedOn!==null){e=Dp(e.blockedOn),e!==null&&zO(e);break}for(var t=e.targetContainers;0<t.length;){var r=vb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&ma.shift()}Go!==null&&ig(Go)&&(Go=null),Vo!==null&&ig(Vo)&&(Vo=null),jo!==null&&ig(jo)&&(jo=null),tp.forEach(JM),rp.forEach(JM)}function jc(e,t){e.blockedOn===t&&(e.blockedOn=null,x1||(x1=!0,bi.unstable_scheduleCallback(bi.unstable_NormalPriority,jH)))}function kO(e){function t(n){return jc(n,e)}if(0<ma.length){jc(ma[0],e);for(var r=1;r<ma.length;r++){var i=ma[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Go!==null&&jc(Go,e),Vo!==null&&jc(Vo,e),jo!==null&&jc(jo,e),tp.forEach(t),rp.forEach(t),r=0;r<Gc.length;r++)i=Gc[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Gc.length&&(r=Gc[0],r.blockedOn===null);)VH(r),r.blockedOn===null&&Gc.shift()}function Xf(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var oh={animationend:Xf("Animation","AnimationEnd"),animationiteration:Xf("Animation","AnimationIteration"),animationstart:Xf("Animation","AnimationStart"),transitionend:Xf("Transition","TransitionEnd")},Ey={},HO={};so&&(HO=document.createElement("div").style,"AnimationEvent"in window||(delete oh.animationend.animation,delete oh.animationiteration.animation,delete oh.animationstart.animation),"TransitionEvent"in window||delete oh.transitionend.transition);function Av(e){if(Ey[e])return Ey[e];if(!oh[e])return e;var t=oh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in HO)return Ey[e]=t[r];return e}var GO=Av("animationend"),VO=Av("animationiteration"),jO=Av("animationstart"),WO=Av("transitionend"),JO=new Map,fb=new Map,WH=["abort","abort",GO,"animationEnd",VO,"animationIteration",jO,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",WO,"transitionEnd","waiting","waiting"];function mb(e,t){for(var r=0;r<e.length;r+=2){var i=e[r],n=e[r+1];n="on"+(n[0].toUpperCase()+n.slice(1)),fb.set(i,t),JO.set(i,n),eu(n,[i])}}var JH=bi.unstable_now;JH();var gr=8;function Zu(e){if((1&e)!==0)return gr=15,1;if((2&e)!==0)return gr=14,2;if((4&e)!==0)return gr=13,4;var t=24&e;return t!==0?(gr=12,t):(e&32)!==0?(gr=11,32):(t=192&e,t!==0?(gr=10,t):(e&256)!==0?(gr=9,256):(t=3584&e,t!==0?(gr=8,t):(e&4096)!==0?(gr=7,4096):(t=4186112&e,t!==0?(gr=6,t):(t=62914560&e,t!==0?(gr=5,t):e&67108864?(gr=4,67108864):(e&134217728)!==0?(gr=3,134217728):(t=805306368&e,t!==0?(gr=2,t):(1073741824&e)!==0?(gr=1,1073741824):(gr=8,e))))))}function YH(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function XH(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ne(358,e))}}function ip(e,t){var r=e.pendingLanes;if(r===0)return gr=0;var i=0,n=0,s=e.expiredLanes,a=e.suspendedLanes,o=e.pingedLanes;if(s!==0)i=s,n=gr=15;else if(s=r&134217727,s!==0){var l=s&~a;l!==0?(i=Zu(l),n=gr):(o&=s,o!==0&&(i=Zu(o),n=gr))}else s=r&~a,s!==0?(i=Zu(s),n=gr):o!==0&&(i=Zu(o),n=gr);if(i===0)return 0;if(i=31-tl(i),i=r&((0>i?0:1<<i)<<1)-1,t!==0&&t!==i&&(t&a)===0){if(Zu(t),n<=gr)return t;gr=n}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-tl(t),n=1<<r,i|=e[r],t&=~n;return i}function YO(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tg(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=$u(24&~t),e===0?Tg(10,t):e;case 10:return e=$u(192&~t),e===0?Tg(8,t):e;case 8:return e=$u(3584&~t),e===0&&(e=$u(4186112&~t),e===0&&(e=512)),e;case 2:return t=$u(805306368&~t),t===0&&(t=268435456),t}throw Error(Ne(358,e))}function $u(e){return e&-e}function Ty(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Mv(e,t,r){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,e=e.eventTimes,t=31-tl(t),e[t]=r}var tl=Math.clz32?Math.clz32:KH,qH=Math.log,QH=Math.LN2;function KH(e){return e===0?32:31-(qH(e)/QH|0)|0}var ZH=bi.unstable_UserBlockingPriority,$H=bi.unstable_runWithPriority,ng=!0;function eG(e,t,r,i){zl||cb();var n=gb,s=zl;zl=!0;try{RO(n,e,t,r,i)}finally{(zl=s)||db()}}function tG(e,t,r,i){$H(ZH,gb.bind(null,e,t,r,i))}function gb(e,t,r,i){if(ng){var n;if((n=(t&4)===0)&&0<ma.length&&-1<jM.indexOf(e))e=w1(null,e,t,r,i),ma.push(e);else{var s=vb(e,t,r,i);if(s===null)n&&WM(e,i);else{if(n){if(-1<jM.indexOf(e)){e=w1(s,e,t,r,i),ma.push(e);return}if(GH(s,e,t,r,i))return;WM(e,i)}a3(e,t,i,null,r)}}}}function vb(e,t,r,i){var n=ub(i);if(n=Fl(n),n!==null){var s=ru(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=IO(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return a3(e,t,i,n,r),null}var Bo=null,yb=null,sg=null;function XO(){if(sg)return sg;var e,t=yb,r=t.length,i,n="value"in Bo?Bo.value:Bo.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(i=1;i<=a&&t[r-i]===n[s-i];i++);return sg=n.slice(e,1<i?1-i:void 0)}function ag(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qf(){return!0}function YM(){return!1}function Hn(e){function t(r,i,n,s,a){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qf:YM,this.isPropagationStopped=YM,this}return Tr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qf)},persist:function(){},isPersistent:qf}),t}var sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xb=Hn(sc),Pp=Tr({},sc,{view:0,detail:0}),rG=Hn(Pp),Cy,Ly,Wc,Ev=Tr({},Pp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wc&&(Wc&&e.type==="mousemove"?(Cy=e.screenX-Wc.screenX,Ly=e.screenY-Wc.screenY):Ly=Cy=0,Wc=e),Cy)},movementY:function(e){return"movementY"in e?e.movementY:Ly}}),XM=Hn(Ev),iG=Tr({},Ev,{dataTransfer:0}),nG=Hn(iG),sG=Tr({},Pp,{relatedTarget:0}),Oy=Hn(sG),aG=Tr({},sc,{animationName:0,elapsedTime:0,pseudoElement:0}),oG=Hn(aG),lG=Tr({},sc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uG=Hn(lG),hG=Tr({},sc,{data:0}),qM=Hn(hG),cG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fG(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pG[e])?!!t[e]:!1}function wb(){return fG}var mG=Tr({},Pp,{key:function(e){if(e.key){var t=cG[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ag(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dG[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wb,charCode:function(e){return e.type==="keypress"?ag(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ag(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gG=Hn(mG),vG=Tr({},Ev,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QM=Hn(vG),yG=Tr({},Pp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wb}),xG=Hn(yG),wG=Tr({},sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),bG=Hn(wG),_G=Tr({},Ev,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SG=Hn(_G),AG=[9,13,27,32],bb=so&&"CompositionEvent"in window,Rd=null;so&&"documentMode"in document&&(Rd=document.documentMode);var MG=so&&"TextEvent"in window&&!Rd,qO=so&&(!bb||Rd&&8<Rd&&11>=Rd),KM=String.fromCharCode(32),ZM=!1;function QO(e,t){switch(e){case"keyup":return AG.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lh=!1;function EG(e,t){switch(e){case"compositionend":return KO(t);case"keypress":return t.which!==32?null:(ZM=!0,KM);case"textInput":return e=t.data,e===KM&&ZM?null:e;default:return null}}function TG(e,t){if(lh)return e==="compositionend"||!bb&&QO(e,t)?(e=XO(),sg=yb=Bo=null,lh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qO&&t.locale!=="ko"?null:t.data;default:return null}}var CG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $M(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!CG[e.type]:t==="textarea"}function ZO(e,t,r,i){PO(i),t=Cg(t,"onChange"),0<t.length&&(r=new xb("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Nd=null,np=null;function LG(e){i3(e,0)}function Tv(e){var t=hh(e);if(AO(t))return e}function OG(e,t){if(e==="change")return t}var $O=!1;if(so){var Py;if(so){var Dy="oninput"in document;if(!Dy){var eE=document.createElement("div");eE.setAttribute("oninput","return;"),Dy=typeof eE.oninput=="function"}Py=Dy}else Py=!1;$O=Py&&(!document.documentMode||9<document.documentMode)}function tE(){Nd&&(Nd.detachEvent("onpropertychange",e3),np=Nd=null)}function e3(e){if(e.propertyName==="value"&&Tv(np)){var t=[];if(ZO(t,np,e,ub(e)),e=LG,zl)e(t);else{zl=!0;try{hb(e,t)}finally{zl=!1,db()}}}}function PG(e,t,r){e==="focusin"?(tE(),Nd=t,np=r,Nd.attachEvent("onpropertychange",e3)):e==="focusout"&&tE()}function DG(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tv(np)}function RG(e,t){if(e==="click")return Tv(t)}function NG(e,t){if(e==="input"||e==="change")return Tv(t)}function IG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ls=typeof Object.is=="function"?Object.is:IG,BG=Object.prototype.hasOwnProperty;function sp(e,t){if(ls(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++)if(!BG.call(t,r[i])||!ls(e[r[i]],t[r[i]]))return!1;return!0}function rE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iE(e,t){var r=rE(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rE(r)}}function t3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?t3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nE(){for(var e=window,t=Ag();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ag(e.document)}return t}function b1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var zG=so&&"documentMode"in document&&11>=document.documentMode,uh=null,_1=null,Id=null,S1=!1;function sE(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;S1||uh==null||uh!==Ag(i)||(i=uh,"selectionStart"in i&&b1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Id&&sp(Id,i)||(Id=i,i=Cg(_1,"onSelect"),0<i.length&&(t=new xb("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=uh)))}mb("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);mb("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);mb(WH,2);for(var aE="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ry=0;Ry<aE.length;Ry++)fb.set(aE[Ry],0);kh("onMouseEnter",["mouseout","mouseover"]);kh("onMouseLeave",["mouseout","mouseover"]);kh("onPointerEnter",["pointerout","pointerover"]);kh("onPointerLeave",["pointerout","pointerover"]);eu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eu("onBeforeInput",["compositionend","keypress","textInput","paste"]);eu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r3=new Set("cancel close invalid load scroll toggle".split(" ").concat(xd));function oE(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,kH(i,t,void 0,e),e.currentTarget=null}function i3(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==s&&n.isPropagationStopped())break e;oE(n,o,h),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,h=o.currentTarget,o=o.listener,l!==s&&n.isPropagationStopped())break e;oE(n,o,h),s=l}}}if(Eg)throw e=y1,Eg=!1,y1=null,e}function xr(e,t){var r=l3(t),i=e+"__bubble";r.has(i)||(s3(t,e,2,!1),r.add(i))}var lE="_reactListening"+Math.random().toString(36).slice(2);function n3(e){e[lE]||(e[lE]=!0,bO.forEach(function(t){r3.has(t)||uE(t,!1,e,null),uE(t,!0,e,null)}))}function uE(e,t,r,i){var n=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=r;if(e==="selectionchange"&&r.nodeType!==9&&(s=r.ownerDocument),i!==null&&!t&&r3.has(e)){if(e!=="scroll")return;n|=2,s=i}var a=l3(s),o=e+"__"+(t?"capture":"bubble");a.has(o)||(t&&(n|=4),s3(s,e,n,t),a.add(o))}function s3(e,t,r,i){var n=fb.get(t);switch(n===void 0?2:n){case 0:n=eG;break;case 1:n=tG;break;default:n=gb}r=n.bind(null,t,r,e),n=void 0,!v1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function a3(e,t,r,i,n){var s=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;a=a.return}for(;o!==null;){if(a=Fl(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}BH(function(){var h=s,d=ub(r),p=[];e:{var f=JO.get(e);if(f!==void 0){var m=xb,y=e;switch(e){case"keypress":if(ag(r)===0)break e;case"keydown":case"keyup":m=gG;break;case"focusin":y="focus",m=Oy;break;case"focusout":y="blur",m=Oy;break;case"beforeblur":case"afterblur":m=Oy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=XM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=nG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=xG;break;case GO:case VO:case jO:m=oG;break;case WO:m=bG;break;case"scroll":m=rG;break;case"wheel":m=SG;break;case"copy":case"cut":case"paste":m=uG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=QM}var b=(t&4)!==0,x=!b&&e==="scroll",v=b?f!==null?f+"Capture":null:f;b=[];for(var g=h,_;g!==null;){_=g;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,v!==null&&(S=ep(g,v),S!=null&&b.push(ap(g,S,_)))),x)break;g=g.return}0<b.length&&(f=new m(f,y,null,r,d),p.push({event:f,listeners:b}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&(t&16)===0&&(y=r.relatedTarget||r.fromElement)&&(Fl(y)||y[ac]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=h,y=y?Fl(y):null,y!==null&&(x=ru(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=h),m!==y)){if(b=XM,S="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=QM,S="onPointerLeave",v="onPointerEnter",g="pointer"),x=m==null?f:hh(m),_=y==null?f:hh(y),f=new b(S,g+"leave",m,r,d),f.target=x,f.relatedTarget=_,S=null,Fl(d)===h&&(b=new b(v,g+"enter",y,r,d),b.target=_,b.relatedTarget=x,S=b),x=S,m&&y)t:{for(b=m,v=y,g=0,_=b;_;_=Mu(_))g++;for(_=0,S=v;S;S=Mu(S))_++;for(;0<g-_;)b=Mu(b),g--;for(;0<_-g;)v=Mu(v),_--;for(;g--;){if(b===v||v!==null&&b===v.alternate)break t;b=Mu(b),v=Mu(v)}b=null}else b=null;m!==null&&hE(p,f,m,b,!1),y!==null&&x!==null&&hE(p,x,y,b,!0)}}e:{if(f=h?hh(h):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var T=OG;else if($M(f))if($O)T=NG;else{T=DG;var A=PG}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=RG);if(T&&(T=T(e,h))){ZO(p,T,r,d);break e}A&&A(e,f,h),e==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&u1(f,"number",f.value)}switch(A=h?hh(h):window,e){case"focusin":($M(A)||A.contentEditable==="true")&&(uh=A,_1=h,Id=null);break;case"focusout":Id=_1=uh=null;break;case"mousedown":S1=!0;break;case"contextmenu":case"mouseup":case"dragend":S1=!1,sE(p,r,d);break;case"selectionchange":if(zG)break;case"keydown":case"keyup":sE(p,r,d)}var M;if(bb)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else lh?QO(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(qO&&r.locale!=="ko"&&(lh||O!=="onCompositionStart"?O==="onCompositionEnd"&&lh&&(M=XO()):(Bo=d,yb="value"in Bo?Bo.value:Bo.textContent,lh=!0)),A=Cg(h,O),0<A.length&&(O=new qM(O,e,null,r,d),p.push({event:O,listeners:A}),M?O.data=M:(M=KO(r),M!==null&&(O.data=M)))),(M=MG?EG(e,r):TG(e,r))&&(h=Cg(h,"onBeforeInput"),0<h.length&&(d=new qM("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:h}),d.data=M))}i3(p,t)})}function ap(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Cg(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=ep(e,r),s!=null&&i.unshift(ap(e,s,n)),s=ep(e,t),s!=null&&i.push(ap(e,s,n))),e=e.return}return i}function Mu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hE(e,t,r,i,n){for(var s=t._reactName,a=[];r!==null&&r!==i;){var o=r,l=o.alternate,h=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&h!==null&&(o=h,n?(l=ep(r,s),l!=null&&a.unshift(ap(r,l,o))):n||(l=ep(r,s),l!=null&&a.push(ap(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}function Lg(){}var Ny=null,Iy=null;function o3(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function A1(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cE=typeof setTimeout=="function"?setTimeout:void 0,FG=typeof clearTimeout=="function"?clearTimeout:void 0;function _b(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Ah(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function dE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var By=0;function UG(e){return{$$typeof:ob,toString:e,valueOf:e}}var Cv=Math.random().toString(36).slice(2),zo="__reactFiber$"+Cv,Og="__reactProps$"+Cv,ac="__reactContainer$"+Cv,pE="__reactEvents$"+Cv;function Fl(e){var t=e[zo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ac]||r[zo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=dE(e);e!==null;){if(r=e[zo])return r;e=dE(e)}return t}e=r,r=e.parentNode}return null}function Dp(e){return e=e[zo]||e[ac],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ne(33))}function Lv(e){return e[Og]||null}function l3(e){var t=e[pE];return t===void 0&&(t=e[pE]=new Set),t}var M1=[],ch=-1;function pl(e){return{current:e}}function br(e){0>ch||(e.current=M1[ch],M1[ch]=null,ch--)}function Fr(e,t){ch++,M1[ch]=e.current,e.current=t}var rl={},Ki=pl(rl),wn=pl(!1),Xl=rl;function Hh(e,t){var r=e.type.contextTypes;if(!r)return rl;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function bn(e){return e=e.childContextTypes,e!=null}function Pg(){br(wn),br(Ki)}function fE(e,t,r){if(Ki.current!==rl)throw Error(Ne(168));Fr(Ki,t),Fr(wn,r)}function u3(e,t,r){var i=e.stateNode;if(e=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in e))throw Error(Ne(108,wh(t)||"Unknown",n));return Tr({},r,i)}function og(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rl,Xl=Ki.current,Fr(Ki,e),Fr(wn,wn.current),!0}function mE(e,t,r){var i=e.stateNode;if(!i)throw Error(Ne(169));r?(e=u3(e,t,Xl),i.__reactInternalMemoizedMergedChildContext=e,br(wn),br(Ki),Fr(Ki,e)):br(wn),Fr(wn,r)}var Sb=null,Gl=null,kG=bi.unstable_runWithPriority,Ab=bi.unstable_scheduleCallback,E1=bi.unstable_cancelCallback,HG=bi.unstable_shouldYield,gE=bi.unstable_requestPaint,T1=bi.unstable_now,GG=bi.unstable_getCurrentPriorityLevel,Ov=bi.unstable_ImmediatePriority,h3=bi.unstable_UserBlockingPriority,c3=bi.unstable_NormalPriority,d3=bi.unstable_LowPriority,p3=bi.unstable_IdlePriority,zy={},VG=gE!==void 0?gE:function(){},Qa=null,lg=null,Fy=!1,vE=T1(),Yi=1e4>vE?T1:function(){return T1()-vE};function Gh(){switch(GG()){case Ov:return 99;case h3:return 98;case c3:return 97;case d3:return 96;case p3:return 95;default:throw Error(Ne(332))}}function f3(e){switch(e){case 99:return Ov;case 98:return h3;case 97:return c3;case 96:return d3;case 95:return p3;default:throw Error(Ne(332))}}function ql(e,t){return e=f3(e),kG(e,t)}function op(e,t,r){return e=f3(e),Ab(e,t,r)}function La(){if(lg!==null){var e=lg;lg=null,E1(e)}m3()}function m3(){if(!Fy&&Qa!==null){Fy=!0;var e=0;try{var t=Qa;ql(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Qa=null}catch(r){throw Qa!==null&&(Qa=Qa.slice(e+1)),Ab(Ov,La),r}finally{Fy=!1}}}var jG=tu.ReactCurrentBatchConfig;function Ps(e,t){if(e&&e.defaultProps){t=Tr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Dg=pl(null),Rg=null,dh=null,Ng=null;function Mb(){Ng=dh=Rg=null}function Eb(e){var t=Dg.current;br(Dg),e.type._context._currentValue=t}function g3(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Mh(e,t){Rg=e,Ng=dh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(zs=!0),e.firstContext=null)}function cs(e,t){if(Ng!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Ng=e,t=1073741823),t={context:e,observedBits:t,next:null},dh===null){if(Rg===null)throw Error(Ne(308));dh=t,Rg.dependencies={lanes:0,firstContext:t,responders:null}}else dh=dh.next=t;return e._currentValue}var No=!1;function Tb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function v3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jo(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function yE(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function lp(e,t,r,i){var n=e.updateQueue;No=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,h=l.next;l.next=null,a===null?s=h:a.next=h,a=l;var d=e.alternate;if(d!==null){d=d.updateQueue;var p=d.lastBaseUpdate;p!==a&&(p===null?d.firstBaseUpdate=h:p.next=h,d.lastBaseUpdate=l)}}if(s!==null){p=n.baseState,a=0,d=h=l=null;do{o=s.lane;var f=s.eventTime;if((i&o)===o){d!==null&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,y=s;switch(o=t,f=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){p=m.call(f,p,o);break e}p=m;break e;case 3:m.flags=m.flags&-4097|64;case 0:if(m=y.payload,o=typeof m=="function"?m.call(f,p,o):m,o==null)break e;p=Tr({},p,o);break e;case 2:No=!0}}s.callback!==null&&(e.flags|=32,o=n.effects,o===null?n.effects=[s]:o.push(s))}else f={eventTime:f,lane:o,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(h=d=f,l=p):d=d.next=f,a|=o;if(s=s.next,s===null){if(o=n.shared.pending,o===null)break;s=o.next,o.next=null,n.lastBaseUpdate=o,n.shared.pending=null}}while(1);d===null&&(l=p),n.baseState=l,n.firstBaseUpdate=h,n.lastBaseUpdate=d,Np|=a,e.lanes=a,e.memoizedState=p}}function xE(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Ne(191,n));n.call(i)}}}var y3=new bv.Component().refs;function Ig(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Tr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Pv={isMounted:function(e){return(e=e._reactInternals)?ru(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Un(),n=Yo(e),s=Wo(i,n);s.payload=t,r!=null&&(s.callback=r),Jo(e,s),Xo(e,n,i)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Un(),n=Yo(e),s=Wo(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),Jo(e,s),Xo(e,n,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Un(),i=Yo(e),n=Wo(r,i);n.tag=2,t!=null&&(n.callback=t),Jo(e,n),Xo(e,i,r)}};function wE(e,t,r,i,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!sp(r,i)||!sp(n,s):!0}function x3(e,t,r){var i=!1,n=rl,s=t.contextType;return typeof s=="object"&&s!==null?s=cs(s):(n=bn(t)?Xl:Ki.current,i=t.contextTypes,s=(i=i!=null)?Hh(e,n):rl),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pv,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function bE(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Pv.enqueueReplaceState(t,t.state,null)}function C1(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=y3,Tb(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=cs(s):(s=bn(t)?Xl:Ki.current,n.context=Hh(e,s)),lp(e,r,n,i),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ig(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Pv.enqueueReplaceState(n,n.state,null),lp(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4)}var Qf=Array.isArray;function Jc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ne(309));var i=r.stateNode}if(!i)throw Error(Ne(147,e));var n=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===n?t.ref:(t=function(s){var a=i.refs;a===y3&&(a=i.refs={}),s===null?delete a[n]:a[n]=s},t._stringRef=n,t)}if(typeof e!="string")throw Error(Ne(284));if(!r._owner)throw Error(Ne(290,e))}return e}function Kf(e,t){if(e.type!=="textarea")throw Error(Ne(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function w3(e){function t(x,v){if(e){var g=x.lastEffect;g!==null?(g.nextEffect=v,x.lastEffect=v):x.firstEffect=x.lastEffect=v,v.nextEffect=null,v.flags=8}}function r(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function i(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function n(x,v){return x=nl(x,v),x.index=0,x.sibling=null,x}function s(x,v,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<v?(x.flags=2,v):g):(x.flags=2,v)):v}function a(x){return e&&x.alternate===null&&(x.flags=2),x}function o(x,v,g,_){return v===null||v.tag!==6?(v=Vy(g,x.mode,_),v.return=x,v):(v=n(v,g),v.return=x,v)}function l(x,v,g,_){return v!==null&&v.elementType===g.type?(_=n(v,g.props),_.ref=Jc(x,v,g),_.return=x,_):(_=dg(g.type,g.key,g.props,null,x.mode,_),_.ref=Jc(x,v,g),_.return=x,_)}function h(x,v,g,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==g.containerInfo||v.stateNode.implementation!==g.implementation?(v=jy(g,x.mode,_),v.return=x,v):(v=n(v,g.children||[]),v.return=x,v)}function d(x,v,g,_,S){return v===null||v.tag!==7?(v=Lh(g,x.mode,_,S),v.return=x,v):(v=n(v,g),v.return=x,v)}function p(x,v,g){if(typeof v=="string"||typeof v=="number")return v=Vy(""+v,x.mode,g),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vd:return g=dg(v.type,v.key,v.props,null,x.mode,g),g.ref=Jc(x,null,v),g.return=x,g;case Bl:return v=jy(v,x.mode,g),v.return=x,v}if(Qf(v)||kc(v))return v=Lh(v,x.mode,g,null),v.return=x,v;Kf(x,v)}return null}function f(x,v,g,_){var S=v!==null?v.key:null;if(typeof g=="string"||typeof g=="number")return S!==null?null:o(x,v,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case vd:return g.key===S?g.type===Io?d(x,v,g.props.children,_,S):l(x,v,g,_):null;case Bl:return g.key===S?h(x,v,g,_):null}if(Qf(g)||kc(g))return S!==null?null:d(x,v,g,_,null);Kf(x,g)}return null}function m(x,v,g,_,S){if(typeof _=="string"||typeof _=="number")return x=x.get(g)||null,o(v,x,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vd:return x=x.get(_.key===null?g:_.key)||null,_.type===Io?d(v,x,_.props.children,S,_.key):l(v,x,_,S);case Bl:return x=x.get(_.key===null?g:_.key)||null,h(v,x,_,S)}if(Qf(_)||kc(_))return x=x.get(g)||null,d(v,x,_,S,null);Kf(v,_)}return null}function y(x,v,g,_){for(var S=null,T=null,A=v,M=v=0,O=null;A!==null&&M<g.length;M++){A.index>M?(O=A,A=null):O=A.sibling;var P=f(x,A,g[M],_);if(P===null){A===null&&(A=O);break}e&&A&&P.alternate===null&&t(x,A),v=s(P,v,M),T===null?S=P:T.sibling=P,T=P,A=O}if(M===g.length)return r(x,A),S;if(A===null){for(;M<g.length;M++)A=p(x,g[M],_),A!==null&&(v=s(A,v,M),T===null?S=A:T.sibling=A,T=A);return S}for(A=i(x,A);M<g.length;M++)O=m(A,x,M,g[M],_),O!==null&&(e&&O.alternate!==null&&A.delete(O.key===null?M:O.key),v=s(O,v,M),T===null?S=O:T.sibling=O,T=O);return e&&A.forEach(function(C){return t(x,C)}),S}function b(x,v,g,_){var S=kc(g);if(typeof S!="function")throw Error(Ne(150));if(g=S.call(g),g==null)throw Error(Ne(151));for(var T=S=null,A=v,M=v=0,O=null,P=g.next();A!==null&&!P.done;M++,P=g.next()){A.index>M?(O=A,A=null):O=A.sibling;var C=f(x,A,P.value,_);if(C===null){A===null&&(A=O);break}e&&A&&C.alternate===null&&t(x,A),v=s(C,v,M),T===null?S=C:T.sibling=C,T=C,A=O}if(P.done)return r(x,A),S;if(A===null){for(;!P.done;M++,P=g.next())P=p(x,P.value,_),P!==null&&(v=s(P,v,M),T===null?S=P:T.sibling=P,T=P);return S}for(A=i(x,A);!P.done;M++,P=g.next())P=m(A,x,M,P.value,_),P!==null&&(e&&P.alternate!==null&&A.delete(P.key===null?M:P.key),v=s(P,v,M),T===null?S=P:T.sibling=P,T=P);return e&&A.forEach(function(N){return t(x,N)}),S}return function(x,v,g,_){var S=typeof g=="object"&&g!==null&&g.type===Io&&g.key===null;S&&(g=g.props.children);var T=typeof g=="object"&&g!==null;if(T)switch(g.$$typeof){case vd:e:{for(T=g.key,S=v;S!==null;){if(S.key===T){switch(S.tag){case 7:if(g.type===Io){r(x,S.sibling),v=n(S,g.props.children),v.return=x,x=v;break e}break;default:if(S.elementType===g.type){r(x,S.sibling),v=n(S,g.props),v.ref=Jc(x,S,g),v.return=x,x=v;break e}}r(x,S);break}else t(x,S);S=S.sibling}g.type===Io?(v=Lh(g.props.children,x.mode,_,g.key),v.return=x,x=v):(_=dg(g.type,g.key,g.props,null,x.mode,_),_.ref=Jc(x,v,g),_.return=x,x=_)}return a(x);case Bl:e:{for(S=g.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===g.containerInfo&&v.stateNode.implementation===g.implementation){r(x,v.sibling),v=n(v,g.children||[]),v.return=x,x=v;break e}else{r(x,v);break}else t(x,v);v=v.sibling}v=jy(g,x.mode,_),v.return=x,x=v}return a(x)}if(typeof g=="string"||typeof g=="number")return g=""+g,v!==null&&v.tag===6?(r(x,v.sibling),v=n(v,g),v.return=x,x=v):(r(x,v),v=Vy(g,x.mode,_),v.return=x,x=v),a(x);if(Qf(g))return y(x,v,g,_);if(kc(g))return b(x,v,g,_);if(T&&Kf(x,g),typeof g=="undefined"&&!S)switch(x.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ne(152,wh(x.type)||"Component"))}return r(x,v)}}var Bg=w3(!0),b3=w3(!1),Rp={},_a=pl(Rp),up=pl(Rp),hp=pl(Rp);function Ul(e){if(e===Rp)throw Error(Ne(174));return e}function L1(e,t){switch(Fr(hp,t),Fr(up,e),Fr(_a,Rp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:p1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=p1(t,e)}br(_a),Fr(_a,t)}function Vh(){br(_a),br(up),br(hp)}function _E(e){Ul(hp.current);var t=Ul(_a.current),r=p1(t,e.type);t!==r&&(Fr(up,e),Fr(_a,r))}function Cb(e){up.current===e&&(br(_a),br(up))}var Br=pl(0);function zg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $a=null,Fo=null,Sa=!1;function _3(e,t){var r=us(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function SE(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function O1(e){if(Sa){var t=Fo;if(t){var r=t;if(!SE(e,t)){if(t=Ah(r.nextSibling),!t||!SE(e,t)){e.flags=e.flags&-1025|2,Sa=!1,$a=e;return}_3($a,r)}$a=e,Fo=Ah(t.firstChild)}else e.flags=e.flags&-1025|2,Sa=!1,$a=e}}function AE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$a=e}function Zf(e){if(e!==$a)return!1;if(!Sa)return AE(e),Sa=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!A1(t,e.memoizedProps))for(t=Fo;t;)_3(e,t),t=Ah(t.nextSibling);if(AE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Fo=Ah(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Fo=null}}else Fo=$a?Ah(e.stateNode.nextSibling):null;return!0}function Uy(){Fo=$a=null,Sa=!1}var Eh=[];function Lb(){for(var e=0;e<Eh.length;e++)Eh[e]._workInProgressVersionPrimary=null;Eh.length=0}var Bd=tu.ReactCurrentDispatcher,hs=tu.ReactCurrentBatchConfig,cp=0,Qr=null,Ji=null,Ci=null,Fg=!1,zd=!1;function dn(){throw Error(Ne(321))}function Ob(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ls(e[r],t[r]))return!1;return!0}function Pb(e,t,r,i,n,s){if(cp=s,Qr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Bd.current=e===null||e.memoizedState===null?JG:YG,e=r(i,n),zd){s=0;do{if(zd=!1,!(25>s))throw Error(Ne(301));s+=1,Ci=Ji=null,t.updateQueue=null,Bd.current=XG,e=r(i,n)}while(zd)}if(Bd.current=Gg,t=Ji!==null&&Ji.next!==null,cp=0,Ci=Ji=Qr=null,Fg=!1,t)throw Error(Ne(300));return e}function kl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Qr.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function iu(){if(Ji===null){var e=Qr.alternate;e=e!==null?e.memoizedState:null}else e=Ji.next;var t=Ci===null?Qr.memoizedState:Ci.next;if(t!==null)Ci=t,Ji=e;else{if(e===null)throw Error(Ne(310));Ji=e,e={memoizedState:Ji.memoizedState,baseState:Ji.baseState,baseQueue:Ji.baseQueue,queue:Ji.queue,next:null},Ci===null?Qr.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function ga(e,t){return typeof t=="function"?t(e):t}function Yc(e){var t=iu(),r=t.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=e;var i=Ji,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,r.pending=null}if(n!==null){n=n.next,i=i.baseState;var o=a=s=null,l=n;do{var h=l.lane;if((cp&h)===h)o!==null&&(o=o.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),i=l.eagerReducer===e?l.eagerState:e(i,l.action);else{var d={lane:h,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};o===null?(a=o=d,s=i):o=o.next=d,Qr.lanes|=h,Np|=h}l=l.next}while(l!==null&&l!==n);o===null?s=i:o.next=a,ls(i,t.memoizedState)||(zs=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=o,r.lastRenderedState=i}return[t.memoizedState,r.dispatch]}function Xc(e){var t=iu(),r=t.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);ls(s,t.memoizedState)||(zs=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function ME(e,t,r){var i=t._getVersion;i=i(t._source);var n=t._workInProgressVersionPrimary;if(n!==null?e=n===i:(e=e.mutableReadLanes,(e=(cp&e)===e)&&(t._workInProgressVersionPrimary=i,Eh.push(t))),e)return r(t._source);throw Eh.push(t),Error(Ne(350))}function S3(e,t,r,i){var n=nn;if(n===null)throw Error(Ne(349));var s=t._getVersion,a=s(t._source),o=Bd.current,l=o.useState(function(){return ME(n,t,r)}),h=l[1],d=l[0];l=Ci;var p=e.memoizedState,f=p.refs,m=f.getSnapshot,y=p.source;p=p.subscribe;var b=Qr;return e.memoizedState={refs:f,source:t,subscribe:i},o.useEffect(function(){f.getSnapshot=r,f.setSnapshot=h;var x=s(t._source);if(!ls(a,x)){x=r(t._source),ls(d,x)||(h(x),x=Yo(b),n.mutableReadLanes|=x&n.pendingLanes),x=n.mutableReadLanes,n.entangledLanes|=x;for(var v=n.entanglements,g=x;0<g;){var _=31-tl(g),S=1<<_;v[_]|=x,g&=~S}}},[r,t,i]),o.useEffect(function(){return i(t._source,function(){var x=f.getSnapshot,v=f.setSnapshot;try{v(x(t._source));var g=Yo(b);n.mutableReadLanes|=g&n.pendingLanes}catch(_){v(function(){throw _})}})},[t,i]),ls(m,r)&&ls(y,t)&&ls(p,i)||(e={pending:null,dispatch:null,lastRenderedReducer:ga,lastRenderedState:d},e.dispatch=h=Nb.bind(null,Qr,e),l.queue=e,l.baseQueue=null,d=ME(n,t,r),l.memoizedState=l.baseState=d),d}function A3(e,t,r){var i=iu();return S3(i,e,t,r)}function qc(e){var t=kl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ga,lastRenderedState:e},e=e.dispatch=Nb.bind(null,Qr,e),[t.memoizedState,e]}function Ug(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Qr.updateQueue,t===null?(t={lastEffect:null},Qr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function EE(e){var t=kl();return e={current:e},t.memoizedState=e}function kg(){return iu().memoizedState}function P1(e,t,r,i){var n=kl();Qr.flags|=e,n.memoizedState=Ug(1|t,r,void 0,i===void 0?null:i)}function Db(e,t,r,i){var n=iu();i=i===void 0?null:i;var s=void 0;if(Ji!==null){var a=Ji.memoizedState;if(s=a.destroy,i!==null&&Ob(i,a.deps)){Ug(t,r,s,i);return}}Qr.flags|=e,n.memoizedState=Ug(1|t,r,s,i)}function TE(e,t){return P1(516,4,e,t)}function Hg(e,t){return Db(516,4,e,t)}function M3(e,t){return Db(4,2,e,t)}function E3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function T3(e,t,r){return r=r!=null?r.concat([e]):null,Db(4,2,E3.bind(null,t,e),r)}function Rb(){}function C3(e,t){var r=iu();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Ob(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function L3(e,t){var r=iu();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Ob(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function WG(e,t){var r=Gh();ql(98>r?98:r,function(){e(!0)}),ql(97<r?97:r,function(){var i=hs.transition;hs.transition=1;try{e(!1),t()}finally{hs.transition=i}})}function Nb(e,t,r){var i=Un(),n=Yo(e),s={lane:n,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s,a=e.alternate,e===Qr||a!==null&&a===Qr)zd=Fg=!0;else{if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.eagerReducer=a,s.eagerState=l,ls(l,o))return}catch{}finally{}Xo(e,n,i)}}var Gg={readContext:cs,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useOpaqueIdentifier:dn,unstable_isNewReconciler:!1},JG={readContext:cs,useCallback:function(e,t){return kl().memoizedState=[e,t===void 0?null:t],e},useContext:cs,useEffect:TE,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,P1(4,2,E3.bind(null,t,e),r)},useLayoutEffect:function(e,t){return P1(4,2,e,t)},useMemo:function(e,t){var r=kl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=kl();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Nb.bind(null,Qr,e),[i.memoizedState,e]},useRef:EE,useState:qc,useDebugValue:Rb,useDeferredValue:function(e){var t=qc(e),r=t[0],i=t[1];return TE(function(){var n=hs.transition;hs.transition=1;try{i(e)}finally{hs.transition=n}},[e]),r},useTransition:function(){var e=qc(!1),t=e[0];return e=WG.bind(null,e[1]),EE(e),[e,t]},useMutableSource:function(e,t,r){var i=kl();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},S3(i,e,t,r)},useOpaqueIdentifier:function(){if(Sa){var e=!1,t=UG(function(){throw e||(e=!0,r("r:"+(By++).toString(36))),Error(Ne(355))}),r=qc(t)[1];return(Qr.mode&2)===0&&(Qr.flags|=516,Ug(5,function(){r("r:"+(By++).toString(36))},void 0,null)),t}return t="r:"+(By++).toString(36),qc(t),t},unstable_isNewReconciler:!1},YG={readContext:cs,useCallback:C3,useContext:cs,useEffect:Hg,useImperativeHandle:T3,useLayoutEffect:M3,useMemo:L3,useReducer:Yc,useRef:kg,useState:function(){return Yc(ga)},useDebugValue:Rb,useDeferredValue:function(e){var t=Yc(ga),r=t[0],i=t[1];return Hg(function(){var n=hs.transition;hs.transition=1;try{i(e)}finally{hs.transition=n}},[e]),r},useTransition:function(){var e=Yc(ga)[0];return[kg().current,e]},useMutableSource:A3,useOpaqueIdentifier:function(){return Yc(ga)[0]},unstable_isNewReconciler:!1},XG={readContext:cs,useCallback:C3,useContext:cs,useEffect:Hg,useImperativeHandle:T3,useLayoutEffect:M3,useMemo:L3,useReducer:Xc,useRef:kg,useState:function(){return Xc(ga)},useDebugValue:Rb,useDeferredValue:function(e){var t=Xc(ga),r=t[0],i=t[1];return Hg(function(){var n=hs.transition;hs.transition=1;try{i(e)}finally{hs.transition=n}},[e]),r},useTransition:function(){var e=Xc(ga)[0];return[kg().current,e]},useMutableSource:A3,useOpaqueIdentifier:function(){return Xc(ga)[0]},unstable_isNewReconciler:!1},qG=tu.ReactCurrentOwner,zs=!1;function fn(e,t,r,i){t.child=e===null?b3(t,null,r,i):Bg(t,e.child,r,i)}function CE(e,t,r,i,n){r=r.render;var s=t.ref;return Mh(t,n),i=Pb(e,t,r,i,s,n),e!==null&&!zs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,eo(e,t,n)):(t.flags|=1,fn(e,t,i,n),t.child)}function LE(e,t,r,i,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!kb(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,O3(e,t,a,i,n,s)):(e=dg(r.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,(n&s)===0&&(n=a.memoizedProps,r=r.compare,r=r!==null?r:sp,r(n,i)&&e.ref===t.ref)?eo(e,t,s):(t.flags|=1,e=nl(a,i),e.ref=t.ref,e.return=t,t.child=e)}function O3(e,t,r,i,n,s){if(e!==null&&sp(e.memoizedProps,i)&&e.ref===t.ref)if(zs=!1,(s&n)!==0)(e.flags&16384)!==0&&(zs=!0);else return t.lanes=e.lanes,eo(e,t,s);return D1(e,t,r,i,s)}function ky(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"||i.mode==="unstable-defer-without-hiding")if((t.mode&4)===0)t.memoizedState={baseLanes:0},em(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},em(t,s!==null?s.baseLanes:r);else return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},em(t,e),null;else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,em(t,i);return fn(e,t,n,r),t.child}function P3(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function D1(e,t,r,i,n){var s=bn(r)?Xl:Ki.current;return s=Hh(t,s),Mh(t,n),r=Pb(e,t,r,i,s,n),e!==null&&!zs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,eo(e,t,n)):(t.flags|=1,fn(e,t,r,n),t.child)}function OE(e,t,r,i,n){if(bn(r)){var s=!0;og(t)}else s=!1;if(Mh(t,n),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),x3(t,r,i),C1(t,r,i,n),i=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=cs(h):(h=bn(r)?Xl:Ki.current,h=Hh(t,h));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==h)&&bE(t,a,i,h),No=!1;var f=t.memoizedState;a.state=f,lp(t,i,a,n),l=t.memoizedState,o!==i||f!==l||wn.current||No?(typeof d=="function"&&(Ig(t,r,d,i),l=t.memoizedState),(o=No||wE(t,r,o,i,f,l,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4)):(typeof a.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=h,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4),i=!1)}else{a=t.stateNode,v3(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Ps(t.type,o),a.props=h,p=t.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=cs(l):(l=bn(r)?Xl:Ki.current,l=Hh(t,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||f!==l)&&bE(t,a,i,l),No=!1,f=t.memoizedState,a.state=f,lp(t,i,a,n);var y=t.memoizedState;o!==p||f!==y||wn.current||No?(typeof m=="function"&&(Ig(t,r,m,i),y=t.memoizedState),(h=No||wE(t,r,h,i,f,y,l))?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,y,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=y),a.props=i,a.state=y,a.context=l,i=h):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),i=!1)}return R1(e,t,r,i,s,n)}function R1(e,t,r,i,n,s){P3(e,t);var a=(t.flags&64)!==0;if(!i&&!a)return n&&mE(t,r,!1),eo(e,t,s);i=t.stateNode,qG.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=Bg(t,e.child,null,s),t.child=Bg(t,null,o,s)):fn(e,t,o,s),t.memoizedState=i.state,n&&mE(t,r,!0),t.child}function PE(e){var t=e.stateNode;t.pendingContext?fE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fE(e,t.context,!1),L1(e,t.containerInfo)}var $f={dehydrated:null,retryLane:0};function DE(e,t,r){var i=t.pendingProps,n=Br.current,s=!1,a;return(a=(t.flags&64)!==0)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-65):e!==null&&e.memoizedState===null||i.fallback===void 0||i.unstable_avoidThisFallback===!0||(n|=1),Fr(Br,n&1),e===null?(i.fallback!==void 0&&O1(t),e=i.children,n=i.fallback,s?(e=RE(t,e,n,r),t.child.memoizedState={baseLanes:r},t.memoizedState=$f,e):typeof i.unstable_expectedLoadTime=="number"?(e=RE(t,e,n,r),t.child.memoizedState={baseLanes:r},t.memoizedState=$f,t.lanes=33554432,e):(r=Hb({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?s?(i=IE(e,t,i.children,i.fallback,r),s=t.child,n=e.child.memoizedState,s.memoizedState=n===null?{baseLanes:r}:{baseLanes:n.baseLanes|r},s.childLanes=e.childLanes&~r,t.memoizedState=$f,i):(r=NE(e,t,i.children,r),t.memoizedState=null,r):s?(i=IE(e,t,i.children,i.fallback,r),s=t.child,n=e.child.memoizedState,s.memoizedState=n===null?{baseLanes:r}:{baseLanes:n.baseLanes|r},s.childLanes=e.childLanes&~r,t.memoizedState=$f,i):(r=NE(e,t,i.children,r),t.memoizedState=null,r)}function RE(e,t,r,i){var n=e.mode,s=e.child;return t={mode:"hidden",children:t},(n&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=t):s=Hb(t,n,0,null),r=Lh(r,n,i,null),s.return=e,r.return=e,s.sibling=r,e.child=s,r}function NE(e,t,r,i){var n=e.child;return e=n.sibling,r=nl(n,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function IE(e,t,r,i,n){var s=t.mode,a=e.child;e=a.sibling;var o={mode:"hidden",children:r};return(s&2)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=o,a=r.lastEffect,a!==null?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=nl(a,o),e!==null?i=nl(e,i):(i=Lh(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,i}function BE(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),g3(e.return,t)}function Hy(e,t,r,i,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n,lastEffect:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=n,a.lastEffect=s)}function zE(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(fn(e,t,i.children,r),i=Br.current,(i&2)!==0)i=i&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BE(e,r);else if(e.tag===19)BE(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Fr(Br,i),(t.mode&2)===0)t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&zg(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Hy(t,!1,n,r,s,t.lastEffect);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&zg(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Hy(t,!0,r,null,s,t.lastEffect);break;case"together":Hy(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function eo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Np|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(Ne(153));if(t.child!==null){for(e=t.child,r=nl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=nl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var D3,N1,R3,N3;D3=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};N1=function(){};R3=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Ul(_a.current);var s=null;switch(r){case"input":n=o1(e,n),i=o1(e,i),s=[];break;case"option":n=h1(e,n),i=h1(e,i),s=[];break;case"select":n=Tr({},n,{value:void 0}),i=Tr({},i,{value:void 0}),s=[];break;case"textarea":n=c1(e,n),i=c1(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Lg)}f1(r,i);var a;r=null;for(h in n)if(!i.hasOwnProperty(h)&&n.hasOwnProperty(h)&&n[h]!=null)if(h==="style"){var o=n[h];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Zd.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var l=i[h];if(o=n!=null?n[h]:void 0,i.hasOwnProperty(h)&&l!==o&&(l!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(h,r)),r=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Zd.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&xr("scroll",e),s||o===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===ob?l.toString():(s=s||[]).push(h,l))}r&&(s=s||[]).push("style",r);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};N3=function(e,t,r,i){r!==i&&(t.flags|=4)};function Qc(e,t){if(!Sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function QG(e,t,r){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return bn(t.type)&&Pg(),null;case 3:return Vh(),br(wn),br(Ki),Lb(),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Zf(t)?t.flags|=4:i.hydrate||(t.flags|=256)),N1(t),null;case 5:Cb(t);var n=Ul(hp.current);if(r=t.type,e!==null&&t.stateNode!=null)R3(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(t.stateNode===null)throw Error(Ne(166));return null}if(e=Ul(_a.current),Zf(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[zo]=t,i[Og]=s,r){case"dialog":xr("cancel",i),xr("close",i);break;case"iframe":case"object":case"embed":xr("load",i);break;case"video":case"audio":for(e=0;e<xd.length;e++)xr(xd[e],i);break;case"source":xr("error",i);break;case"img":case"image":case"link":xr("error",i),xr("load",i);break;case"details":xr("toggle",i);break;case"input":zM(i,s),xr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},xr("invalid",i);break;case"textarea":UM(i,s),xr("invalid",i)}f1(r,s),e=null;for(var a in s)s.hasOwnProperty(a)&&(n=s[a],a==="children"?typeof n=="string"?i.textContent!==n&&(e=["children",n]):typeof n=="number"&&i.textContent!==""+n&&(e=["children",""+n]):Zd.hasOwnProperty(a)&&n!=null&&a==="onScroll"&&xr("scroll",i));switch(r){case"input":Jf(i),FM(i,s,!0);break;case"textarea":Jf(i),kM(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Lg)}i=e,t.updateQueue=i,i!==null&&(t.flags|=4)}else{switch(a=n.nodeType===9?n:n.ownerDocument,e===d1.html&&(e=TO(r)),e===d1.html?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(r,{is:i.is}):(e=a.createElement(r),r==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,r),e[zo]=t,e[Og]=i,D3(e,t,!1,!1),t.stateNode=e,a=m1(r,i),r){case"dialog":xr("cancel",e),xr("close",e),n=i;break;case"iframe":case"object":case"embed":xr("load",e),n=i;break;case"video":case"audio":for(n=0;n<xd.length;n++)xr(xd[n],e);n=i;break;case"source":xr("error",e),n=i;break;case"img":case"image":case"link":xr("error",e),xr("load",e),n=i;break;case"details":xr("toggle",e),n=i;break;case"input":zM(e,i),n=o1(e,i),xr("invalid",e);break;case"option":n=h1(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Tr({},i,{value:void 0}),xr("invalid",e);break;case"textarea":UM(e,i),n=c1(e,i),xr("invalid",e);break;default:n=i}f1(r,n);var o=n;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?OO(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CO(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&$d(e,l):typeof l=="number"&&$d(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xr("scroll",e):l!=null&&tb(e,s,l,a))}switch(r){case"input":Jf(e),FM(e,i,!1);break;case"textarea":Jf(e),kM(e);break;case"option":i.value!=null&&e.setAttribute("value",""+el(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?bh(e,!!i.multiple,s,!1):i.defaultValue!=null&&bh(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Lg)}o3(r,i)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)N3(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ne(166));r=Ul(hp.current),Ul(_a.current),Zf(t)?(i=t.stateNode,r=t.memoizedProps,i[zo]=t,i.nodeValue!==r&&(t.flags|=4)):(i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[zo]=t,t.stateNode=i)}return null;case 13:return br(Br),i=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(i=i!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Zf(t):r=e.memoizedState!==null,i&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Br.current&1)!==0?Li===0&&(Li=3):((Li===0||Li===3)&&(Li=4),nn===null||(Np&134217727)===0&&(lc&134217727)===0||Th(nn,qi))),(i||r)&&(t.flags|=4),null);case 4:return Vh(),N1(t),e===null&&n3(t.stateNode.containerInfo),null;case 10:return Eb(t),null;case 17:return bn(t.type)&&Pg(),null;case 19:if(br(Br),i=t.memoizedState,i===null)return null;if(s=(t.flags&64)!==0,a=i.rendering,a===null)if(s)Qc(i,!1);else{if(Li!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(a=zg(e),a!==null){for(t.flags|=64,Qc(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),i.lastEffect===null&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Fr(Br,Br.current&1|2),t.child}e=e.sibling}i.tail!==null&&Yi()>k1&&(t.flags|=64,s=!0,Qc(i,!1),t.lanes=33554432)}else{if(!s)if(e=zg(a),e!==null){if(t.flags|=64,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Sa)return t=t.lastEffect=i.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Yi()-i.renderingStartTime>k1&&r!==1073741824&&(t.flags|=64,s=!0,Qc(i,!1),t.lanes=33554432);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(r=i.tail,i.rendering=r,i.tail=r.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Yi(),r.sibling=null,t=Br.current,Fr(Br,s?t&1|2:t&1),r):null;case 23:case 24:return Ub(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&i.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(Ne(156,t.tag))}function KG(e){switch(e.tag){case 1:bn(e.type)&&Pg();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Vh(),br(wn),br(Ki),Lb(),t=e.flags,(t&64)!==0)throw Error(Ne(285));return e.flags=t&-4097|64,e;case 5:return Cb(e),null;case 13:return br(Br),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return br(Br),null;case 4:return Vh(),null;case 10:return Eb(e),null;case 23:case 24:return Ub(),null;default:return null}}function Ib(e,t){try{var r="",i=t;do r+=PH(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n}}function I1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ZG=typeof WeakMap=="function"?WeakMap:Map;function I3(e,t,r){r=Wo(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){jg||(jg=!0,H1=i),I1(e,t)},r}function B3(e,t,r){r=Wo(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return I1(e,t),i(n)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){typeof i!="function"&&(va===null?va=new Set([this]):va.add(this),I1(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}var $G=typeof WeakSet=="function"?WeakSet:Set;function FE(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){qo(e,r)}else t.current=null}function e5(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,i=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Ps(t.type,r),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&_b(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Ne(163))}function t5(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var n=e;i=n.next,n=n.tag,(n&4)!==0&&(n&1)!==0&&(W3(r,e),u5(r,e)),e=i}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(i=r.elementType===r.type?t.memoizedProps:Ps(r.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&xE(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}xE(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&o3(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&kO(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ne(163))}function UE(e,t){for(var r=e;;){if(r.tag===5){var i=r.stateNode;if(t)i=i.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{i=r.stateNode;var n=r.memoizedProps.style;n=n!=null&&n.hasOwnProperty("display")?n.display:null,i.style.display=LO("display",n)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function kE(e,t){if(Gl&&typeof Gl.onCommitFiberUnmount=="function")try{Gl.onCommitFiberUnmount(Sb,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var i=r,n=i.destroy;if(i=i.tag,n!==void 0)if((i&4)!==0)W3(t,r);else{i=t;try{n()}catch(s){qo(i,s)}}r=r.next}while(r!==e)}break;case 1:if(FE(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){qo(t,s)}break;case 5:FE(t);break;case 4:z3(e,t)}}function HE(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function GE(e){return e.tag===5||e.tag===3||e.tag===4}function VE(e){e:{for(var t=e.return;t!==null;){if(GE(t))break e;t=t.return}throw Error(Ne(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var i=!1;break;case 3:t=t.containerInfo,i=!0;break;case 4:t=t.containerInfo,i=!0;break;default:throw Error(Ne(161))}r.flags&16&&($d(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||GE(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}i?B1(e,r,t):z1(e,r,t)}function B1(e,t,r){var i=e.tag,n=i===5||i===6;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lg));else if(i!==4&&(e=e.child,e!==null))for(B1(e,t,r),e=e.sibling;e!==null;)B1(e,t,r),e=e.sibling}function z1(e,t,r){var i=e.tag,n=i===5||i===6;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(z1(e,t,r),e=e.sibling;e!==null;)z1(e,t,r),e=e.sibling}function z3(e,t){for(var r=t,i=!1,n,s;;){if(!i){i=r.return;e:for(;;){if(i===null)throw Error(Ne(160));switch(n=i.stateNode,i.tag){case 5:s=!1;break e;case 3:n=n.containerInfo,s=!0;break e;case 4:n=n.containerInfo,s=!0;break e}i=i.return}i=!0}if(r.tag===5||r.tag===6){e:for(var a=e,o=r,l=o;;)if(kE(a,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(a=n,o=r.stateNode,a.nodeType===8?a.parentNode.removeChild(o):a.removeChild(o)):n.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){n=r.stateNode.containerInfo,s=!0,r.child.return=r,r=r.child;continue}}else if(kE(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(i=!1)}r.sibling.return=r.return,r=r.sibling}}function Gy(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do(i.tag&3)===3&&(e=i.destroy,i.destroy=void 0,e!==void 0&&e()),i=i.next;while(i!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){i=t.memoizedProps;var n=e!==null?e.memoizedProps:i;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(r[Og]=i,e==="input"&&i.type==="radio"&&i.name!=null&&MO(r,i),m1(e,n),t=m1(e,i),n=0;n<s.length;n+=2){var a=s[n],o=s[n+1];a==="style"?OO(r,o):a==="dangerouslySetInnerHTML"?CO(r,o):a==="children"?$d(r,o):tb(r,a,o,t)}switch(e){case"input":l1(r,i);break;case"textarea":EO(r,i);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!i.multiple,s=i.value,s!=null?bh(r,!!i.multiple,s,!1):e!==!!i.multiple&&(i.defaultValue!=null?bh(r,!!i.multiple,i.defaultValue,!0):bh(r,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(Ne(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,kO(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(Fb=Yi(),UE(t.child,!0)),jE(t);return;case 19:jE(t);return;case 17:return;case 23:case 24:UE(t,t.memoizedState!==null);return}throw Error(Ne(163))}function jE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new $G),t.forEach(function(i){var n=d5.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function r5(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var i5=Math.ceil,Vg=tu.ReactCurrentDispatcher,Bb=tu.ReactCurrentOwner,yt=0,nn=null,hi=null,qi=0,Ql=0,F1=pl(0),Li=0,Dv=null,oc=0,Np=0,lc=0,zb=0,U1=null,Fb=0,k1=1/0;function uc(){k1=Yi()+500}var Xe=null,jg=!1,H1=null,va=null,il=!1,Fd=null,wd=90,G1=[],V1=[],to=null,Ud=0,j1=null,ug=-1,Za=0,hg=0,kd=null,cg=!1;function Un(){return(yt&48)!==0?Yi():ug!==-1?ug:ug=Yi()}function Yo(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Gh()===99?1:2;if(Za===0&&(Za=oc),jG.transition!==0){hg!==0&&(hg=U1!==null?U1.pendingLanes:0),e=Za;var t=4186112&~hg;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Gh(),(yt&4)!==0&&e===98?e=Tg(12,Za):(e=YH(e),e=Tg(e,Za)),e}function Xo(e,t,r){if(50<Ud)throw Ud=0,j1=null,Error(Ne(185));if(e=Rv(e,t),e===null)return null;Mv(e,t,r),e===nn&&(lc|=t,Li===4&&Th(e,qi));var i=Gh();t===1?(yt&8)!==0&&(yt&48)===0?W1(e):(ds(e,r),yt===0&&(uc(),La())):((yt&4)===0||i!==98&&i!==99||(to===null?to=new Set([e]):to.add(e)),ds(e,r)),U1=e}function Rv(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function ds(e,t){for(var r=e.callbackNode,i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-tl(a),l=1<<o,h=s[o];if(h===-1){if((l&i)===0||(l&n)!==0){h=t,Zu(l);var d=gr;s[o]=10<=d?h+250:6<=d?h+5e3:-1}}else h<=t&&(e.expiredLanes|=l);a&=~l}if(i=ip(e,e===nn?qi:0),t=gr,i===0)r!==null&&(r!==zy&&E1(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==zy&&E1(r)}t===15?(r=W1.bind(null,e),Qa===null?(Qa=[r],lg=Ab(Ov,m3)):Qa.push(r),r=zy):t===14?r=op(99,W1.bind(null,e)):(r=XH(t),r=op(r,F3.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function F3(e){if(ug=-1,hg=Za=0,(yt&48)!==0)throw Error(Ne(327));var t=e.callbackNode;if(fl()&&e.callbackNode!==t)return null;var r=ip(e,e===nn?qi:0);if(r===0)return null;var i=r,n=yt;yt|=16;var s=G3();(nn!==e||qi!==i)&&(uc(),Ch(e,i));do try{a5();break}catch(o){H3(e,o)}while(1);if(Mb(),Vg.current=s,yt=n,hi!==null?i=0:(nn=null,qi=0,i=Li),(oc&lc)!==0)Ch(e,0);else if(i!==0){if(i===2&&(yt|=64,e.hydrate&&(e.hydrate=!1,_b(e.containerInfo)),r=YO(e),r!==0&&(i=bd(e,r))),i===1)throw t=Dv,Ch(e,0),Th(e,r),ds(e,Yi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,i){case 0:case 1:throw Error(Ne(345));case 2:Ol(e);break;case 3:if(Th(e,r),(r&62914560)===r&&(i=Fb+500-Yi(),10<i)){if(ip(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){Un(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=cE(Ol.bind(null,e),i);break}Ol(e);break;case 4:if(Th(e,r),(r&4186112)===r)break;for(i=e.eventTimes,n=-1;0<r;){var a=31-tl(r);s=1<<a,a=i[a],a>n&&(n=a),r&=~s}if(r=n,r=Yi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i5(r/1960))-r,10<r){e.timeoutHandle=cE(Ol.bind(null,e),r);break}Ol(e);break;case 5:Ol(e);break;default:throw Error(Ne(329))}}return ds(e,Yi()),e.callbackNode===t?F3.bind(null,e):null}function Th(e,t){for(t&=~zb,t&=~lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tl(t),i=1<<r;e[r]=-1,t&=~i}}function W1(e){if((yt&48)!==0)throw Error(Ne(327));if(fl(),e===nn&&(e.expiredLanes&qi)!==0){var t=qi,r=bd(e,t);(oc&lc)!==0&&(t=ip(e,t),r=bd(e,t))}else t=ip(e,0),r=bd(e,t);if(e.tag!==0&&r===2&&(yt|=64,e.hydrate&&(e.hydrate=!1,_b(e.containerInfo)),t=YO(e),t!==0&&(r=bd(e,t))),r===1)throw r=Dv,Ch(e,0),Th(e,t),ds(e,Yi()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ol(e),ds(e,Yi()),null}function n5(){if(to!==null){var e=to;to=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,ds(t,Yi())})}La()}function U3(e,t){var r=yt;yt|=1;try{return e(t)}finally{yt=r,yt===0&&(uc(),La())}}function k3(e,t){var r=yt;yt&=-2,yt|=8;try{return e(t)}finally{yt=r,yt===0&&(uc(),La())}}function em(e,t){Fr(F1,Ql),Ql|=t,oc|=t}function Ub(){Ql=F1.current,br(F1)}function Ch(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,FG(r)),hi!==null)for(r=hi.return;r!==null;){var i=r;switch(i.tag){case 1:i=i.type.childContextTypes,i!=null&&Pg();break;case 3:Vh(),br(wn),br(Ki),Lb();break;case 5:Cb(i);break;case 4:Vh();break;case 13:br(Br);break;case 19:br(Br);break;case 10:Eb(i);break;case 23:case 24:Ub()}r=r.return}nn=e,hi=nl(e.current,null),qi=Ql=oc=t,Li=0,Dv=null,zb=lc=Np=0}function H3(e,t){do{var r=hi;try{if(Mb(),Bd.current=Gg,Fg){for(var i=Qr.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Fg=!1}if(cp=0,Ci=Ji=Qr=null,zd=!1,Bb.current=null,r===null||r.return===null){Li=1,Dv=t,hi=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=qi,o.flags|=2048,o.firstEffect=o.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l;if((o.mode&2)===0){var d=o.alternate;d?(o.updateQueue=d.updateQueue,o.memoizedState=d.memoizedState,o.lanes=d.lanes):(o.updateQueue=null,o.memoizedState=null)}var p=(Br.current&1)!==0,f=a;do{var m;if(m=f.tag===13){var y=f.memoizedState;if(y!==null)m=y.dehydrated!==null;else{var b=f.memoizedProps;m=b.fallback===void 0?!1:b.unstable_avoidThisFallback!==!0?!0:!p}}if(m){var x=f.updateQueue;if(x===null){var v=new Set;v.add(h),f.updateQueue=v}else x.add(h);if((f.mode&2)===0){if(f.flags|=64,o.flags|=16384,o.flags&=-2981,o.tag===1)if(o.alternate===null)o.tag=17;else{var g=Wo(-1,1);g.tag=2,Jo(o,g)}o.lanes|=1;break e}l=void 0,o=t;var _=s.pingCache;if(_===null?(_=s.pingCache=new ZG,l=new Set,_.set(h,l)):(l=_.get(h),l===void 0&&(l=new Set,_.set(h,l))),!l.has(o)){l.add(o);var S=c5.bind(null,s,h,o);h.then(S,S)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(f!==null);l=Error((wh(o.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Li!==5&&(Li=2),l=Ib(l,o),f=a;do{switch(f.tag){case 3:s=l,f.flags|=4096,t&=-t,f.lanes|=t;var T=I3(f,s,t);yE(f,T);break e;case 1:s=l;var A=f.type,M=f.stateNode;if((f.flags&64)===0&&(typeof A.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(va===null||!va.has(M)))){f.flags|=4096,t&=-t,f.lanes|=t;var O=B3(f,s,t);yE(f,O);break e}}f=f.return}while(f!==null)}j3(r)}catch(P){t=P,hi===r&&r!==null&&(hi=r=r.return);continue}break}while(1)}function G3(){var e=Vg.current;return Vg.current=Gg,e===null?Gg:e}function bd(e,t){var r=yt;yt|=16;var i=G3();nn===e&&qi===t||Ch(e,t);do try{s5();break}catch(n){H3(e,n)}while(1);if(Mb(),yt=r,Vg.current=i,hi!==null)throw Error(Ne(261));return nn=null,qi=0,Li}function s5(){for(;hi!==null;)V3(hi)}function a5(){for(;hi!==null&&!HG();)V3(hi)}function V3(e){var t=J3(e.alternate,e,Ql);e.memoizedProps=e.pendingProps,t===null?j3(e):hi=t,Bb.current=null}function j3(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=QG(r,t,Ql),r!==null){hi=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(Ql&1073741824)!==0||(r.mode&4)===0){for(var i=0,n=r.child;n!==null;)i|=n.lanes|n.childLanes,n=n.sibling;r.childLanes=i}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=KG(t),r!==null){r.flags&=2047,hi=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){hi=t;return}hi=t=e}while(t!==null);Li===0&&(Li=5)}function Ol(e){var t=Gh();return ql(99,o5.bind(null,e,t)),null}function o5(e,t){do fl();while(Fd!==null);if((yt&48)!==0)throw Error(Ne(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ne(177));e.callbackNode=null;var i=r.lanes|r.childLanes,n=i,s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;for(var a=e.eventTimes,o=e.expirationTimes;0<s;){var l=31-tl(s),h=1<<l;n[l]=0,a[l]=-1,o[l]=-1,s&=~h}if(to!==null&&(i&24)===0&&to.has(e)&&to.delete(e),e===nn&&(hi=nn=null,qi=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,i!==null){if(n=yt,yt|=32,Bb.current=null,Ny=ng,a=nE(),b1(a)){if("selectionStart"in a)o={start:a.selectionStart,end:a.selectionEnd};else e:if(o=(o=a.ownerDocument)&&o.defaultView||window,(h=o.getSelection&&o.getSelection())&&h.rangeCount!==0){o=h.anchorNode,s=h.anchorOffset,l=h.focusNode,h=h.focusOffset;try{o.nodeType,l.nodeType}catch{o=null;break e}var d=0,p=-1,f=-1,m=0,y=0,b=a,x=null;t:for(;;){for(var v;b!==o||s!==0&&b.nodeType!==3||(p=d+s),b!==l||h!==0&&b.nodeType!==3||(f=d+h),b.nodeType===3&&(d+=b.nodeValue.length),(v=b.firstChild)!==null;)x=b,b=v;for(;;){if(b===a)break t;if(x===o&&++m===s&&(p=d),x===l&&++y===h&&(f=d),(v=b.nextSibling)!==null)break;b=x,x=b.parentNode}b=v}o=p===-1||f===-1?null:{start:p,end:f}}else o=null;o=o||{start:0,end:0}}else o=null;Iy={focusedElem:a,selectionRange:o},ng=!1,kd=null,cg=!1,Xe=i;do try{l5()}catch(P){if(Xe===null)throw Error(Ne(330));qo(Xe,P),Xe=Xe.nextEffect}while(Xe!==null);kd=null,Xe=i;do try{for(a=e;Xe!==null;){var g=Xe.flags;if(g&16&&$d(Xe.stateNode,""),g&128){var _=Xe.alternate;if(_!==null){var S=_.ref;S!==null&&(typeof S=="function"?S(null):S.current=null)}}switch(g&1038){case 2:VE(Xe),Xe.flags&=-3;break;case 6:VE(Xe),Xe.flags&=-3,Gy(Xe.alternate,Xe);break;case 1024:Xe.flags&=-1025;break;case 1028:Xe.flags&=-1025,Gy(Xe.alternate,Xe);break;case 4:Gy(Xe.alternate,Xe);break;case 8:o=Xe,z3(a,o);var T=o.alternate;HE(o),T!==null&&HE(T)}Xe=Xe.nextEffect}}catch(P){if(Xe===null)throw Error(Ne(330));qo(Xe,P),Xe=Xe.nextEffect}while(Xe!==null);if(S=Iy,_=nE(),g=S.focusedElem,a=S.selectionRange,_!==g&&g&&g.ownerDocument&&t3(g.ownerDocument.documentElement,g)){for(a!==null&&b1(g)&&(_=a.start,S=a.end,S===void 0&&(S=_),"selectionStart"in g?(g.selectionStart=_,g.selectionEnd=Math.min(S,g.value.length)):(S=(_=g.ownerDocument||document)&&_.defaultView||window,S.getSelection&&(S=S.getSelection(),o=g.textContent.length,T=Math.min(a.start,o),a=a.end===void 0?T:Math.min(a.end,o),!S.extend&&T>a&&(o=a,a=T,T=o),o=iE(g,T),s=iE(g,a),o&&s&&(S.rangeCount!==1||S.anchorNode!==o.node||S.anchorOffset!==o.offset||S.focusNode!==s.node||S.focusOffset!==s.offset)&&(_=_.createRange(),_.setStart(o.node,o.offset),S.removeAllRanges(),T>a?(S.addRange(_),S.extend(s.node,s.offset)):(_.setEnd(s.node,s.offset),S.addRange(_)))))),_=[],S=g;S=S.parentNode;)S.nodeType===1&&_.push({element:S,left:S.scrollLeft,top:S.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<_.length;g++)S=_[g],S.element.scrollLeft=S.left,S.element.scrollTop=S.top}ng=!!Ny,Iy=Ny=null,e.current=r,Xe=i;do try{for(g=e;Xe!==null;){var A=Xe.flags;if(A&36&&t5(g,Xe.alternate,Xe),A&128){_=void 0;var M=Xe.ref;if(M!==null){var O=Xe.stateNode;switch(Xe.tag){case 5:_=O;break;default:_=O}typeof M=="function"?M(_):M.current=_}}Xe=Xe.nextEffect}}catch(P){if(Xe===null)throw Error(Ne(330));qo(Xe,P),Xe=Xe.nextEffect}while(Xe!==null);Xe=null,VG(),yt=n}else e.current=r;if(il)il=!1,Fd=e,wd=t;else for(Xe=i;Xe!==null;)t=Xe.nextEffect,Xe.nextEffect=null,Xe.flags&8&&(A=Xe,A.sibling=null,A.stateNode=null),Xe=t;if(i=e.pendingLanes,i===0&&(va=null),i===1?e===j1?Ud++:(Ud=0,j1=e):Ud=0,r=r.stateNode,Gl&&typeof Gl.onCommitFiberRoot=="function")try{Gl.onCommitFiberRoot(Sb,r,void 0,(r.current.flags&64)===64)}catch{}if(ds(e,Yi()),jg)throw jg=!1,e=H1,H1=null,e;return(yt&8)!==0||La(),null}function l5(){for(;Xe!==null;){var e=Xe.alternate;cg||kd===null||((Xe.flags&8)!==0?VM(Xe,kd)&&(cg=!0):Xe.tag===13&&r5(e,Xe)&&VM(Xe,kd)&&(cg=!0));var t=Xe.flags;(t&256)!==0&&e5(e,Xe),(t&512)===0||il||(il=!0,op(97,function(){return fl(),null})),Xe=Xe.nextEffect}}function fl(){if(wd!==90){var e=97<wd?97:wd;return wd=90,ql(e,h5)}return!1}function u5(e,t){G1.push(t,e),il||(il=!0,op(97,function(){return fl(),null}))}function W3(e,t){V1.push(t,e),il||(il=!0,op(97,function(){return fl(),null}))}function h5(){if(Fd===null)return!1;var e=Fd;if(Fd=null,(yt&48)!==0)throw Error(Ne(331));var t=yt;yt|=32;var r=V1;V1=[];for(var i=0;i<r.length;i+=2){var n=r[i],s=r[i+1],a=n.destroy;if(n.destroy=void 0,typeof a=="function")try{a()}catch(l){if(s===null)throw Error(Ne(330));qo(s,l)}}for(r=G1,G1=[],i=0;i<r.length;i+=2){n=r[i],s=r[i+1];try{var o=n.create;n.destroy=o()}catch(l){if(s===null)throw Error(Ne(330));qo(s,l)}}for(o=e.current.firstEffect;o!==null;)e=o.nextEffect,o.nextEffect=null,o.flags&8&&(o.sibling=null,o.stateNode=null),o=e;return yt=t,La(),!0}function WE(e,t,r){t=Ib(r,t),t=I3(e,t,1),Jo(e,t),t=Un(),e=Rv(e,1),e!==null&&(Mv(e,1,t),ds(e,t))}function qo(e,t){if(e.tag===3)WE(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){WE(r,e,t);break}else if(r.tag===1){var i=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(va===null||!va.has(i))){e=Ib(t,e);var n=B3(r,e,1);if(Jo(r,n),n=Un(),r=Rv(r,1),r!==null)Mv(r,1,n),ds(r,n);else if(typeof i.componentDidCatch=="function"&&(va===null||!va.has(i)))try{i.componentDidCatch(t,e)}catch{}break}}r=r.return}}function c5(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Un(),e.pingedLanes|=e.suspendedLanes&r,nn===e&&(qi&r)===r&&(Li===4||Li===3&&(qi&62914560)===qi&&500>Yi()-Fb?Ch(e,0):zb|=r),ds(e,t)}function d5(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=Gh()===99?1:2:(Za===0&&(Za=oc),t=$u(62914560&~Za),t===0&&(t=4194304))),r=Un(),e=Rv(e,t),e!==null&&(Mv(e,t,r),ds(e,r))}var J3;J3=function(e,t,r){var i=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||wn.current)zs=!0;else if((r&i)!==0)zs=(e.flags&16384)!==0;else{switch(zs=!1,t.tag){case 3:PE(t),Uy();break;case 5:_E(t);break;case 1:bn(t.type)&&og(t);break;case 4:L1(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var n=t.type._context;Fr(Dg,n._currentValue),n._currentValue=i;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?DE(e,t,r):(Fr(Br,Br.current&1),t=eo(e,t,r),t!==null?t.sibling:null);Fr(Br,Br.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&64)!==0){if(i)return zE(e,t,r);t.flags|=64}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Fr(Br,Br.current),i)break;return null;case 23:case 24:return t.lanes=0,ky(e,t,r)}return eo(e,t,r)}else zs=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=Hh(t,Ki.current),Mh(t,r),n=Pb(null,t,i,e,n,r),t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,bn(i)){var s=!0;og(t)}else s=!1;t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Tb(t);var a=i.getDerivedStateFromProps;typeof a=="function"&&Ig(t,i,a,e),n.updater=Pv,t.stateNode=n,n._reactInternals=t,C1(t,i,e,r),t=R1(null,t,i,!0,s,r)}else t.tag=0,fn(null,t,n,r),t=t.child;return t;case 16:n=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=f5(n),e=Ps(n,e),s){case 0:t=D1(null,t,n,e,r);break e;case 1:t=OE(null,t,n,e,r);break e;case 11:t=CE(null,t,n,e,r);break e;case 14:t=LE(null,t,n,Ps(n.type,e),i,r);break e}throw Error(Ne(306,n,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ps(i,n),D1(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ps(i,n),OE(e,t,i,n,r);case 3:if(PE(t),i=t.updateQueue,e===null||i===null)throw Error(Ne(282));if(i=t.pendingProps,n=t.memoizedState,n=n!==null?n.element:null,v3(e,t),lp(t,i,null,r),i=t.memoizedState.element,i===n)Uy(),t=eo(e,t,r);else{if(n=t.stateNode,(s=n.hydrate)&&(Fo=Ah(t.stateNode.containerInfo.firstChild),$a=t,s=Sa=!0),s){if(e=n.mutableSourceEagerHydrationData,e!=null)for(n=0;n<e.length;n+=2)s=e[n],s._workInProgressVersionPrimary=e[n+1],Eh.push(s);for(r=b3(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else fn(e,t,i,r),Uy();t=t.child}return t;case 5:return _E(t),e===null&&O1(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,A1(i,n)?a=null:s!==null&&A1(i,s)&&(t.flags|=16),P3(e,t),fn(e,t,a,r),t.child;case 6:return e===null&&O1(t),null;case 13:return DE(e,t,r);case 4:return L1(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Bg(t,null,i,r):fn(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ps(i,n),CE(e,t,i,n,r);case 7:return fn(e,t,t.pendingProps,r),t.child;case 8:return fn(e,t,t.pendingProps.children,r),t.child;case 12:return fn(e,t,t.pendingProps.children,r),t.child;case 10:e:{i=t.type._context,n=t.pendingProps,a=t.memoizedProps,s=n.value;var o=t.type._context;if(Fr(Dg,o._currentValue),o._currentValue=s,a!==null)if(o=a.value,s=ls(o,s)?0:(typeof i._calculateChangedBits=="function"?i._calculateChangedBits(o,s):1073741823)|0,s===0){if(a.children===n.children&&!wn.current){t=eo(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var h=l.firstContext;h!==null;){if(h.context===i&&(h.observedBits&s)!==0){o.tag===1&&(h=Wo(-1,r&-r),h.tag=2,Jo(o,h)),o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),g3(o.return,r),l.lanes|=r;break}h=h.next}}else a=o.tag===10&&o.type===t.type?null:o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}fn(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps,i=s.children,Mh(t,r),n=cs(n,s.unstable_observedBits),i=i(n),t.flags|=1,fn(e,t,i,r),t.child;case 14:return n=t.type,s=Ps(n,t.pendingProps),s=Ps(n.type,s),LE(e,t,n,s,i,r);case 15:return O3(e,t,t.type,t.pendingProps,i,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ps(i,n),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,bn(i)?(e=!0,og(t)):e=!1,Mh(t,r),x3(t,i,n),C1(t,i,n,r),R1(null,t,i,!0,e,r);case 19:return zE(e,t,r);case 23:return ky(e,t,r);case 24:return ky(e,t,r)}throw Error(Ne(156,t.tag))};function p5(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function us(e,t,r,i){return new p5(e,t,r,i)}function kb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function f5(e){if(typeof e=="function")return kb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_v)return 11;if(e===Sv)return 14}return 2}function nl(e,t){var r=e.alternate;return r===null?(r=us(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function dg(e,t,r,i,n,s){var a=2;if(i=e,typeof e=="function")kb(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Io:return Lh(r.children,n,s,t);case _O:a=8,n|=16;break;case rb:a=8,n|=1;break;case Ld:return e=us(12,r,t,n|8),e.elementType=Ld,e.type=Ld,e.lanes=s,e;case Od:return e=us(13,r,t,n),e.type=Od,e.elementType=Od,e.lanes=s,e;case Sg:return e=us(19,r,t,n),e.elementType=Sg,e.lanes=s,e;case lb:return Hb(r,n,s,t);case a1:return e=us(24,r,t,n),e.elementType=a1,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ib:a=10;break e;case nb:a=9;break e;case _v:a=11;break e;case Sv:a=14;break e;case sb:a=16,i=null;break e;case ab:a=22;break e}throw Error(Ne(130,e==null?e:typeof e,""))}return t=us(a,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function Lh(e,t,r,i){return e=us(7,e,i,t),e.lanes=r,e}function Hb(e,t,r,i){return e=us(23,e,i,t),e.elementType=lb,e.lanes=r,e}function Vy(e,t,r){return e=us(6,e,null,t),e.lanes=r,e}function jy(e,t,r){return t=us(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function m5(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ty(0),this.expirationTimes=Ty(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ty(0),this.mutableSourceEagerHydrationData=null}function g5(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bl,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Wg(e,t,r,i){var n=t.current,s=Un(),a=Yo(n);e:if(r){r=r._reactInternals;t:{if(ru(r)!==r||r.tag!==1)throw Error(Ne(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(bn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(Ne(171))}if(r.tag===1){var l=r.type;if(bn(l)){r=u3(r,l,o);break e}}r=o}else r=rl;return t.context===null?t.context=r:t.pendingContext=r,t=Wo(s,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),Jo(n,t),Xo(n,a,s),a}function Wy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function JE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Gb(e,t){JE(e,t),(e=e.alternate)&&JE(e,t)}function v5(){return null}function Vb(e,t,r){var i=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new m5(e,t,r!=null&&r.hydrate===!0),t=us(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,Tb(t),e[ac]=r.current,n3(e.nodeType===8?e.parentNode:e),i)for(e=0;e<i.length;e++){t=i[e];var n=t._getVersion;n=n(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,n]:r.mutableSourceEagerHydrationData.push(t,n)}this._internalRoot=r}Vb.prototype.render=function(e){Wg(e,this._internalRoot,null,null)};Vb.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Wg(null,e,null,function(){t[ac]=null})};function Ip(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function y5(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new Vb(e,0,t?{hydrate:!0}:void 0)}function Nv(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s._internalRoot;if(typeof n=="function"){var o=n;n=function(){var h=Wy(a);o.call(h)}}Wg(t,a,e,n)}else{if(s=r._reactRootContainer=y5(r,i),a=s._internalRoot,typeof n=="function"){var l=n;n=function(){var h=Wy(a);l.call(h)}}k3(function(){Wg(t,a,e,n)})}return Wy(a)}zO=function(e){if(e.tag===13){var t=Un();Xo(e,4,t),Gb(e,4)}};pb=function(e){if(e.tag===13){var t=Un();Xo(e,67108864,t),Gb(e,67108864)}};FO=function(e){if(e.tag===13){var t=Un(),r=Yo(e);Xo(e,r,t),Gb(e,r)}};UO=function(e,t){return t()};g1=function(e,t,r){switch(t){case"input":if(l1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=Lv(i);if(!n)throw Error(Ne(90));AO(i),l1(i,n)}}}break;case"textarea":EO(e,r);break;case"select":t=r.value,t!=null&&bh(e,!!r.multiple,t,!1)}};hb=U3;RO=function(e,t,r,i,n){var s=yt;yt|=4;try{return ql(98,e.bind(null,t,r,i,n))}finally{yt=s,yt===0&&(uc(),La())}};cb=function(){(yt&49)===0&&(n5(),fl())};NO=function(e,t){var r=yt;yt|=2;try{return e(t)}finally{yt=r,yt===0&&(uc(),La())}};function Y3(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ip(t))throw Error(Ne(200));return g5(e,t,null,r)}var x5={Events:[Dp,hh,Lv,PO,DO,fl,{current:!1}]},Kc={findFiberByHostInstance:Fl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},w5={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=BO(e),e===null?null:e.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||v5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{Sb=tm.inject(w5),Gl=tm}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x5;ms.createPortal=Y3;ms.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ne(188)):Error(Ne(268,Object.keys(e)));return e=BO(t),e=e===null?null:e.stateNode,e};ms.flushSync=function(e,t){var r=yt;if((r&48)!==0)return e(t);yt|=1;try{if(e)return ql(99,e.bind(null,t))}finally{yt=r,La()}};ms.hydrate=function(e,t,r){if(!Ip(t))throw Error(Ne(200));return Nv(null,e,t,!0,r)};ms.render=function(e,t,r){if(!Ip(t))throw Error(Ne(200));return Nv(null,e,t,!1,r)};ms.unmountComponentAtNode=function(e){if(!Ip(e))throw Error(Ne(40));return e._reactRootContainer?(k3(function(){Nv(null,null,e,!1,function(){e._reactRootContainer=null,e[ac]=null})}),!0):!1};ms.unstable_batchedUpdates=U3;ms.unstable_createPortal=function(e,t){return Y3(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};ms.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Ip(r))throw Error(Ne(200));if(e==null||e._reactInternals===void 0)throw Error(Ne(38));return Nv(e,t,r,!1,i)};ms.version="17.0.2";function X3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X3)}catch(e){console.error(e)}}X3(),yO.exports=ms;var Bae=yO.exports;function J1(){return J1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},J1.apply(this,arguments)}function q3(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var b5=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,_5=q3(function(e){return b5.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function S5(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function A5(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var M5=function(){function e(r){var i=this;this._insertTag=function(n){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(n,s),i.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(A5(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=S5(n);try{s.insertRule(i,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),ji="-ms-",Jg="-moz-",Zt="-webkit-",Q3="comm",jb="rule",Wb="decl",E5="@import",K3="@keyframes",T5=Math.abs,Iv=String.fromCharCode,C5=Object.assign;function L5(e,t){return(((t<<2^mn(e,0))<<2^mn(e,1))<<2^mn(e,2))<<2^mn(e,3)}function Z3(e){return e.trim()}function O5(e,t){return(e=t.exec(e))?e[0]:e}function ir(e,t,r){return e.replace(t,r)}function Y1(e,t){return e.indexOf(t)}function mn(e,t){return e.charCodeAt(t)|0}function dp(e,t,r){return e.slice(t,r)}function la(e){return e.length}function Jb(e){return e.length}function rm(e,t){return t.push(e),e}function P5(e,t){return e.map(t).join("")}var Bv=1,jh=1,$3=0,Sn=0,ri=0,hc="";function zv(e,t,r,i,n,s,a){return{value:e,root:t,parent:r,type:i,props:n,children:s,line:Bv,column:jh,length:a,return:""}}function Zc(e,t){return C5(zv("",null,null,"",null,null,0),e,{length:-e.length},t)}function D5(){return ri}function R5(){return ri=Sn>0?mn(hc,--Sn):0,jh--,ri===10&&(jh=1,Bv--),ri}function kn(){return ri=Sn<$3?mn(hc,Sn++):0,jh++,ri===10&&(jh=1,Bv++),ri}function Aa(){return mn(hc,Sn)}function pg(){return Sn}function Bp(e,t){return dp(hc,e,t)}function pp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eP(e){return Bv=jh=1,$3=la(hc=e),Sn=0,[]}function tP(e){return hc="",e}function fg(e){return Z3(Bp(Sn-1,X1(e===91?e+2:e===40?e+1:e)))}function N5(e){for(;(ri=Aa())&&ri<33;)kn();return pp(e)>2||pp(ri)>3?"":" "}function I5(e,t){for(;--t&&kn()&&!(ri<48||ri>102||ri>57&&ri<65||ri>70&&ri<97););return Bp(e,pg()+(t<6&&Aa()==32&&kn()==32))}function X1(e){for(;kn();)switch(ri){case e:return Sn;case 34:case 39:e!==34&&e!==39&&X1(ri);break;case 40:e===41&&X1(e);break;case 92:kn();break}return Sn}function B5(e,t){for(;kn()&&e+ri!==47+10;)if(e+ri===42+42&&Aa()===47)break;return"/*"+Bp(t,Sn-1)+"*"+Iv(e===47?e:kn())}function z5(e){for(;!pp(Aa());)kn();return Bp(e,Sn)}function F5(e){return tP(mg("",null,null,null,[""],e=eP(e),0,[0],e))}function mg(e,t,r,i,n,s,a,o,l){for(var h=0,d=0,p=a,f=0,m=0,y=0,b=1,x=1,v=1,g=0,_="",S=n,T=s,A=i,M=_;x;)switch(y=g,g=kn()){case 40:if(y!=108&&M.charCodeAt(p-1)==58){Y1(M+=ir(fg(g),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:M+=fg(g);break;case 9:case 10:case 13:case 32:M+=N5(y);break;case 92:M+=I5(pg()-1,7);continue;case 47:switch(Aa()){case 42:case 47:rm(U5(B5(kn(),pg()),t,r),l);break;default:M+="/"}break;case 123*b:o[h++]=la(M)*v;case 125*b:case 59:case 0:switch(g){case 0:case 125:x=0;case 59+d:m>0&&la(M)-p&&rm(m>32?XE(M+";",i,r,p-1):XE(ir(M," ","")+";",i,r,p-2),l);break;case 59:M+=";";default:if(rm(A=YE(M,t,r,h,d,n,o,_,S=[],T=[],p),s),g===123)if(d===0)mg(M,t,A,A,S,s,p,o,T);else switch(f){case 100:case 109:case 115:mg(e,A,A,i&&rm(YE(e,A,A,0,0,n,o,_,n,S=[],p),T),n,T,p,o,i?S:T);break;default:mg(M,A,A,A,[""],T,0,o,T)}}h=d=m=0,b=v=1,_=M="",p=a;break;case 58:p=1+la(M),m=y;default:if(b<1){if(g==123)--b;else if(g==125&&b++==0&&R5()==125)continue}switch(M+=Iv(g),g*b){case 38:v=d>0?1:(M+="\f",-1);break;case 44:o[h++]=(la(M)-1)*v,v=1;break;case 64:Aa()===45&&(M+=fg(kn())),f=Aa(),d=p=la(_=M+=z5(pg())),g++;break;case 45:y===45&&la(M)==2&&(b=0)}}return s}function YE(e,t,r,i,n,s,a,o,l,h,d){for(var p=n-1,f=n===0?s:[""],m=Jb(f),y=0,b=0,x=0;y<i;++y)for(var v=0,g=dp(e,p+1,p=T5(b=a[y])),_=e;v<m;++v)(_=Z3(b>0?f[v]+" "+g:ir(g,/&\f/g,f[v])))&&(l[x++]=_);return zv(e,t,r,n===0?jb:o,l,h,d)}function U5(e,t,r){return zv(e,t,r,Q3,Iv(D5()),dp(e,2,-2),0)}function XE(e,t,r,i){return zv(e,t,r,Wb,dp(e,0,i),dp(e,i+1,-1),i)}function rP(e,t){switch(L5(e,t)){case 5103:return Zt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zt+e+Jg+e+ji+e+e;case 6828:case 4268:return Zt+e+ji+e+e;case 6165:return Zt+e+ji+"flex-"+e+e;case 5187:return Zt+e+ir(e,/(\w+).+(:[^]+)/,Zt+"box-$1$2"+ji+"flex-$1$2")+e;case 5443:return Zt+e+ji+"flex-item-"+ir(e,/flex-|-self/,"")+e;case 4675:return Zt+e+ji+"flex-line-pack"+ir(e,/align-content|flex-|-self/,"")+e;case 5548:return Zt+e+ji+ir(e,"shrink","negative")+e;case 5292:return Zt+e+ji+ir(e,"basis","preferred-size")+e;case 6060:return Zt+"box-"+ir(e,"-grow","")+Zt+e+ji+ir(e,"grow","positive")+e;case 4554:return Zt+ir(e,/([^-])(transform)/g,"$1"+Zt+"$2")+e;case 6187:return ir(ir(ir(e,/(zoom-|grab)/,Zt+"$1"),/(image-set)/,Zt+"$1"),e,"")+e;case 5495:case 3959:return ir(e,/(image-set\([^]*)/,Zt+"$1$`$1");case 4968:return ir(ir(e,/(.+:)(flex-)?(.*)/,Zt+"box-pack:$3"+ji+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zt+e+e;case 4095:case 3583:case 4068:case 2532:return ir(e,/(.+)-inline(.+)/,Zt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(la(e)-1-t>6)switch(mn(e,t+1)){case 109:if(mn(e,t+4)!==45)break;case 102:return ir(e,/(.+:)(.+)-([^]+)/,"$1"+Zt+"$2-$3$1"+Jg+(mn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Y1(e,"stretch")?rP(ir(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(mn(e,t+1)!==115)break;case 6444:switch(mn(e,la(e)-3-(~Y1(e,"!important")&&10))){case 107:return ir(e,":",":"+Zt)+e;case 101:return ir(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zt+(mn(e,14)===45?"inline-":"")+"box$3$1"+Zt+"$2$3$1"+ji+"$2box$3")+e}break;case 5936:switch(mn(e,t+11)){case 114:return Zt+e+ji+ir(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zt+e+ji+ir(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zt+e+ji+ir(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zt+e+ji+e+e}return e}function Oh(e,t){for(var r="",i=Jb(e),n=0;n<i;n++)r+=t(e[n],n,e,t)||"";return r}function k5(e,t,r,i){switch(e.type){case E5:case Wb:return e.return=e.return||e.value;case Q3:return"";case K3:return e.return=e.value+"{"+Oh(e.children,i)+"}";case jb:e.value=e.props.join(",")}return la(r=Oh(e.children,i))?e.return=e.value+"{"+r+"}":""}function H5(e){var t=Jb(e);return function(r,i,n,s){for(var a="",o=0;o<t;o++)a+=e[o](r,i,n,s)||"";return a}}function G5(e){return function(t){t.root||(t=t.return)&&e(t)}}function V5(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case Wb:e.return=rP(e.value,e.length);break;case K3:return Oh([Zc(e,{value:ir(e.value,"@","@"+Zt)})],i);case jb:if(e.length)return P5(e.props,function(n){switch(O5(n,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Oh([Zc(e,{props:[ir(n,/:(read-\w+)/,":"+Jg+"$1")]})],i);case"::placeholder":return Oh([Zc(e,{props:[ir(n,/:(plac\w+)/,":"+Zt+"input-$1")]}),Zc(e,{props:[ir(n,/:(plac\w+)/,":"+Jg+"$1")]}),Zc(e,{props:[ir(n,/:(plac\w+)/,ji+"input-$1")]})],i)}return""})}}var j5=function(t,r,i){for(var n=0,s=0;n=s,s=Aa(),n===38&&s===12&&(r[i]=1),!pp(s);)kn();return Bp(t,Sn)},W5=function(t,r){var i=-1,n=44;do switch(pp(n)){case 0:n===38&&Aa()===12&&(r[i]=1),t[i]+=j5(Sn-1,r,i);break;case 2:t[i]+=fg(n);break;case 4:if(n===44){t[++i]=Aa()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=Iv(n)}while(n=kn());return t},J5=function(t,r){return tP(W5(eP(t),r))},qE=new WeakMap,Y5=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,n=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!qE.get(i))&&!n){qE.set(t,!0);for(var s=[],a=J5(r,s),o=i.props,l=0,h=0;l<a.length;l++)for(var d=0;d<o.length;d++,h++)t.props[h]=s[l]?a[l].replace(/&\f/g,o[d]):o[d]+" "+a[l]}}},X5=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}},q5=[V5],Q5=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(b){var x=b.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var n=t.stylisPlugins||q5,s={},a,o=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(b){for(var x=b.getAttribute("data-emotion").split(" "),v=1;v<x.length;v++)s[x[v]]=!0;o.push(b)});var l,h=[Y5,X5];{var d,p=[k5,G5(function(b){d.insert(b)})],f=H5(h.concat(n,p)),m=function(x){return Oh(F5(x),f)};l=function(x,v,g,_){d=g,m(x?x+"{"+v.styles+"}":v.styles),_&&(y.inserted[v.name]=!0)}}var y={key:r,sheet:new M5({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return y.sheet.hydrate(o),y},K5=!0;function Z5(e,t,r){var i="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):i+=n+" "}),i}var iP=function(t,r,i){var n=t.key+"-"+r.name;(i===!1||K5===!1)&&t.registered[n]===void 0&&(t.registered[n]=r.styles)},$5=function(t,r,i){iP(t,r,i);var n=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+n:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function eV(e){for(var t=0,r,i=0,n=e.length;n>=4;++i,n-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var tV={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rV=/[A-Z]|^ms/g,iV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,nP=function(t){return t.charCodeAt(1)===45},QE=function(t){return t!=null&&typeof t!="boolean"},Jy=q3(function(e){return nP(e)?e:e.replace(rV,"-$&").toLowerCase()}),KE=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(iV,function(i,n,s){return ua={name:n,styles:s,next:ua},n})}return tV[t]!==1&&!nP(t)&&typeof r=="number"&&r!==0?r+"px":r};function fp(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return ua={name:r.name,styles:r.styles,next:ua},r.name;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)ua={name:i.name,styles:i.styles,next:ua},i=i.next;var n=r.styles+";";return n}return nV(e,t,r)}case"function":{if(e!==void 0){var s=ua,a=r(e);return ua=s,fp(e,t,a)}break}}if(t==null)return r;var o=t[r];return o!==void 0?o:r}function nV(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=fp(e,t,r[n])+";";else for(var s in r){var a=r[s];if(typeof a!="object")t!=null&&t[a]!==void 0?i+=s+"{"+t[a]+"}":QE(a)&&(i+=Jy(s)+":"+KE(s,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var o=0;o<a.length;o++)QE(a[o])&&(i+=Jy(s)+":"+KE(s,a[o])+";");else{var l=fp(e,t,a);switch(s){case"animation":case"animationName":{i+=Jy(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var ZE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ua,sV=function(t,r,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,s="";ua=void 0;var a=t[0];a==null||a.raw===void 0?(n=!1,s+=fp(i,r,a)):s+=a[0];for(var o=1;o<t.length;o++)s+=fp(i,r,t[o]),n&&(s+=a[o]);ZE.lastIndex=0;for(var l="",h;(h=ZE.exec(s))!==null;)l+="-"+h[1];var d=eV(s)+l;return{name:d,styles:s,next:ua}},sP=vi.exports.createContext(typeof HTMLElement!="undefined"?Q5({key:"css"}):null);sP.Provider;var aV=function(t){return vi.exports.forwardRef(function(r,i){var n=vi.exports.useContext(sP);return t(r,n,i)})},oV=vi.exports.createContext({});_g["useInsertionEffect"]&&_g["useInsertionEffect"];var lV=_5,uV=function(t){return t!=="theme"},$E=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?lV:uV},eT=function(t,r,i){var n;if(r){var s=r.shouldForwardProp;n=t.__emotion_forwardProp&&s?function(a){return t.__emotion_forwardProp(a)&&s(a)}:s}return typeof n!="function"&&i&&(n=t.__emotion_forwardProp),n},hV=_g["useInsertionEffect"]?_g["useInsertionEffect"]:function(t){t()};function cV(e){hV(e)}var dV=function(t){var r=t.cache,i=t.serialized,n=t.isStringTag;return iP(r,i,n),cV(function(){return $5(r,i,n)}),null},pV=function e(t,r){var i=t.__emotion_real===t,n=i&&t.__emotion_base||t,s,a;r!==void 0&&(s=r.label,a=r.target);var o=eT(t,r,i),l=o||$E(n),h=!l("as");return function(){var d=arguments,p=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&p.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)p.push.apply(p,d);else{p.push(d[0][0]);for(var f=d.length,m=1;m<f;m++)p.push(d[m],d[0][m])}var y=aV(function(b,x,v){var g=h&&b.as||n,_="",S=[],T=b;if(b.theme==null){T={};for(var A in b)T[A]=b[A];T.theme=vi.exports.useContext(oV)}typeof b.className=="string"?_=Z5(x.registered,S,b.className):b.className!=null&&(_=b.className+" ");var M=sV(p.concat(S),x.registered,T);_+=x.key+"-"+M.name,a!==void 0&&(_+=" "+a);var O=h&&o===void 0?$E(g):l,P={};for(var C in b)h&&C==="as"||O(C)&&(P[C]=b[C]);return P.className=_,P.ref=v,vi.exports.createElement(vi.exports.Fragment,null,vi.exports.createElement(dV,{cache:x,serialized:M,isStringTag:typeof g=="string"}),vi.exports.createElement(g,P))});return y.displayName=s!==void 0?s:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=n,y.__emotion_styles=p,y.__emotion_forwardProp=o,Object.defineProperty(y,"toString",{value:function(){return"."+a}}),y.withComponent=function(b,x){return e(b,J1({},r,x,{shouldForwardProp:eT(y,x,!0)})).apply(void 0,p)},y}},fV=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],tT=pV.bind();fV.forEach(function(e){tT[e]=tT(e)});var mV={exports:{}},zp={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gV=vi.exports,aP=60103;zp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var rT=Symbol.for;aP=rT("react.element"),zp.Fragment=rT("react.fragment")}var vV=gV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yV=Object.prototype.hasOwnProperty,xV={key:!0,ref:!0,__self:!0,__source:!0};function oP(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)yV.call(t,i)&&!xV.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:aP,type:e,key:s,ref:a,props:n,_owner:vV.current}}zp.jsx=oP;zp.jsxs=oP;mV.exports=zp;var iT={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,i="4.17.21",n=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",p=1,f=2,m=4,y=1,b=2,x=1,v=2,g=4,_=8,S=16,T=32,A=64,M=128,O=256,P=512,C=30,N="...",U=800,V=16,k=1,G=2,Z=3,W=1/0,$=9007199254740991,ae=17976931348623157e292,te=0/0,H=4294967295,X=H-1,J=H>>>1,se=[["ary",M],["bind",x],["bindKey",v],["curry",_],["curryRight",S],["flip",P],["partial",T],["partialRight",A],["rearg",O]],ge="[object Arguments]",Y="[object Array]",be="[object AsyncFunction]",fe="[object Boolean]",ee="[object Date]",Q="[object DOMException]",ie="[object Error]",oe="[object Function]",me="[object GeneratorFunction]",pe="[object Map]",we="[object Number]",Ae="[object Null]",F="[object Object]",B="[object Promise]",de="[object Proxy]",Oe="[object RegExp]",Ce="[object Set]",Re="[object String]",ze="[object Symbol]",Ke="[object Undefined]",je="[object WeakMap]",Ye="[object WeakSet]",re="[object ArrayBuffer]",Ie="[object DataView]",Me="[object Float32Array]",Ve="[object Float64Array]",Be="[object Int8Array]",at="[object Int16Array]",kt="[object Int32Array]",vr="[object Uint8Array]",Si="[object Uint8ClampedArray]",$t="[object Uint16Array]",di="[object Uint32Array]",Fi=/\b__p \+= '';/g,qs=/\b(__p \+=) '' \+/g,Ui=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ys=/&(?:amp|lt|gt|quot|#39);/g,Cr=/[&<>"']/g,ki=RegExp(ys.source),Kr=RegExp(Cr.source),ht=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dt=/^\w*$/,Xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,er=RegExp(Ht.source),z=/^\s+/,he=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Pe=/,? & /,Ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qe=/[()=,{}\[\]\/\s]/,mt=/\\(\\)?/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,or=/\w*$/,At=/^[-+]0x[0-9a-f]+$/i,Rt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,xs=/^0o[0-7]+$/i,Vn=/^(?:0|[1-9]\d*)$/,Qs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hi=/($^)/,Da=/['\n\r\u2028\u2029\\]/g,An="\\ud800-\\udfff",Zr="\\u0300-\\u036f",jn="\\ufe20-\\ufe2f",ai="\\u20d0-\\u20ff",sS=Zr+jn+ai,aS="\\u2700-\\u27bf",oS="a-z\\xdf-\\xf6\\xf8-\\xff",pI="\\xac\\xb1\\xd7\\xf7",fI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mI="\\u2000-\\u206f",gI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lS="A-Z\\xc0-\\xd6\\xd8-\\xde",uS="\\ufe0e\\ufe0f",hS=pI+fI+mI+gI,d0="['\u2019]",vI="["+An+"]",cS="["+hS+"]",nf="["+sS+"]",dS="\\d+",yI="["+aS+"]",pS="["+oS+"]",fS="[^"+An+hS+dS+aS+oS+lS+"]",p0="\\ud83c[\\udffb-\\udfff]",xI="(?:"+nf+"|"+p0+")",mS="[^"+An+"]",f0="(?:\\ud83c[\\udde6-\\uddff]){2}",m0="[\\ud800-\\udbff][\\udc00-\\udfff]",cu="["+lS+"]",gS="\\u200d",vS="(?:"+pS+"|"+fS+")",wI="(?:"+cu+"|"+fS+")",yS="(?:"+d0+"(?:d|ll|m|re|s|t|ve))?",xS="(?:"+d0+"(?:D|LL|M|RE|S|T|VE))?",wS=xI+"?",bS="["+uS+"]?",bI="(?:"+gS+"(?:"+[mS,f0,m0].join("|")+")"+bS+wS+")*",_I="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",SI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_S=bS+wS+bI,AI="(?:"+[yI,f0,m0].join("|")+")"+_S,MI="(?:"+[mS+nf+"?",nf,f0,m0,vI].join("|")+")",EI=RegExp(d0,"g"),TI=RegExp(nf,"g"),g0=RegExp(p0+"(?="+p0+")|"+MI+_S,"g"),CI=RegExp([cu+"?"+pS+"+"+yS+"(?="+[cS,cu,"$"].join("|")+")",wI+"+"+xS+"(?="+[cS,cu+vS,"$"].join("|")+")",cu+"?"+vS+"+"+yS,cu+"+"+xS,SI,_I,dS,AI].join("|"),"g"),LI=RegExp("["+gS+An+sS+uS+"]"),OI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,PI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],DI=-1,yr={};yr[Me]=yr[Ve]=yr[Be]=yr[at]=yr[kt]=yr[vr]=yr[Si]=yr[$t]=yr[di]=!0,yr[ge]=yr[Y]=yr[re]=yr[fe]=yr[Ie]=yr[ee]=yr[ie]=yr[oe]=yr[pe]=yr[we]=yr[F]=yr[Oe]=yr[Ce]=yr[Re]=yr[je]=!1;var pr={};pr[ge]=pr[Y]=pr[re]=pr[Ie]=pr[fe]=pr[ee]=pr[Me]=pr[Ve]=pr[Be]=pr[at]=pr[kt]=pr[pe]=pr[we]=pr[F]=pr[Oe]=pr[Ce]=pr[Re]=pr[ze]=pr[vr]=pr[Si]=pr[$t]=pr[di]=!0,pr[ie]=pr[oe]=pr[je]=!1;var RI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},NI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},II={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},BI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zI=parseFloat,FI=parseInt,SS=typeof Uc=="object"&&Uc&&Uc.Object===Object&&Uc,UI=typeof self=="object"&&self&&self.Object===Object&&self,Ai=SS||UI||Function("return this")(),v0=t&&!t.nodeType&&t,yl=v0&&!0&&e&&!e.nodeType&&e,AS=yl&&yl.exports===v0,y0=AS&&SS.process,Wn=function(){try{var ne=yl&&yl.require&&yl.require("util").types;return ne||y0&&y0.binding&&y0.binding("util")}catch{}}(),MS=Wn&&Wn.isArrayBuffer,ES=Wn&&Wn.isDate,TS=Wn&&Wn.isMap,CS=Wn&&Wn.isRegExp,LS=Wn&&Wn.isSet,OS=Wn&&Wn.isTypedArray;function Mn(ne,_e,xe){switch(xe.length){case 0:return ne.call(_e);case 1:return ne.call(_e,xe[0]);case 2:return ne.call(_e,xe[0],xe[1]);case 3:return ne.call(_e,xe[0],xe[1],xe[2])}return ne.apply(_e,xe)}function kI(ne,_e,xe,Je){for(var bt=-1,Kt=ne==null?0:ne.length;++bt<Kt;){var oi=ne[bt];_e(Je,oi,xe(oi),ne)}return Je}function Jn(ne,_e){for(var xe=-1,Je=ne==null?0:ne.length;++xe<Je&&_e(ne[xe],xe,ne)!==!1;);return ne}function HI(ne,_e){for(var xe=ne==null?0:ne.length;xe--&&_e(ne[xe],xe,ne)!==!1;);return ne}function PS(ne,_e){for(var xe=-1,Je=ne==null?0:ne.length;++xe<Je;)if(!_e(ne[xe],xe,ne))return!1;return!0}function po(ne,_e){for(var xe=-1,Je=ne==null?0:ne.length,bt=0,Kt=[];++xe<Je;){var oi=ne[xe];_e(oi,xe,ne)&&(Kt[bt++]=oi)}return Kt}function sf(ne,_e){var xe=ne==null?0:ne.length;return!!xe&&du(ne,_e,0)>-1}function x0(ne,_e,xe){for(var Je=-1,bt=ne==null?0:ne.length;++Je<bt;)if(xe(_e,ne[Je]))return!0;return!1}function Sr(ne,_e){for(var xe=-1,Je=ne==null?0:ne.length,bt=Array(Je);++xe<Je;)bt[xe]=_e(ne[xe],xe,ne);return bt}function fo(ne,_e){for(var xe=-1,Je=_e.length,bt=ne.length;++xe<Je;)ne[bt+xe]=_e[xe];return ne}function w0(ne,_e,xe,Je){var bt=-1,Kt=ne==null?0:ne.length;for(Je&&Kt&&(xe=ne[++bt]);++bt<Kt;)xe=_e(xe,ne[bt],bt,ne);return xe}function GI(ne,_e,xe,Je){var bt=ne==null?0:ne.length;for(Je&&bt&&(xe=ne[--bt]);bt--;)xe=_e(xe,ne[bt],bt,ne);return xe}function b0(ne,_e){for(var xe=-1,Je=ne==null?0:ne.length;++xe<Je;)if(_e(ne[xe],xe,ne))return!0;return!1}var VI=_0("length");function jI(ne){return ne.split("")}function WI(ne){return ne.match(Ze)||[]}function DS(ne,_e,xe){var Je;return xe(ne,function(bt,Kt,oi){if(_e(bt,Kt,oi))return Je=Kt,!1}),Je}function af(ne,_e,xe,Je){for(var bt=ne.length,Kt=xe+(Je?1:-1);Je?Kt--:++Kt<bt;)if(_e(ne[Kt],Kt,ne))return Kt;return-1}function du(ne,_e,xe){return _e===_e?iB(ne,_e,xe):af(ne,RS,xe)}function JI(ne,_e,xe,Je){for(var bt=xe-1,Kt=ne.length;++bt<Kt;)if(Je(ne[bt],_e))return bt;return-1}function RS(ne){return ne!==ne}function NS(ne,_e){var xe=ne==null?0:ne.length;return xe?A0(ne,_e)/xe:te}function _0(ne){return function(_e){return _e==null?r:_e[ne]}}function S0(ne){return function(_e){return ne==null?r:ne[_e]}}function IS(ne,_e,xe,Je,bt){return bt(ne,function(Kt,oi,dr){xe=Je?(Je=!1,Kt):_e(xe,Kt,oi,dr)}),xe}function YI(ne,_e){var xe=ne.length;for(ne.sort(_e);xe--;)ne[xe]=ne[xe].value;return ne}function A0(ne,_e){for(var xe,Je=-1,bt=ne.length;++Je<bt;){var Kt=_e(ne[Je]);Kt!==r&&(xe=xe===r?Kt:xe+Kt)}return xe}function M0(ne,_e){for(var xe=-1,Je=Array(ne);++xe<ne;)Je[xe]=_e(xe);return Je}function XI(ne,_e){return Sr(_e,function(xe){return[xe,ne[xe]]})}function BS(ne){return ne&&ne.slice(0,kS(ne)+1).replace(z,"")}function En(ne){return function(_e){return ne(_e)}}function E0(ne,_e){return Sr(_e,function(xe){return ne[xe]})}function Ac(ne,_e){return ne.has(_e)}function zS(ne,_e){for(var xe=-1,Je=ne.length;++xe<Je&&du(_e,ne[xe],0)>-1;);return xe}function FS(ne,_e){for(var xe=ne.length;xe--&&du(_e,ne[xe],0)>-1;);return xe}function qI(ne,_e){for(var xe=ne.length,Je=0;xe--;)ne[xe]===_e&&++Je;return Je}var QI=S0(RI),KI=S0(NI);function ZI(ne){return"\\"+BI[ne]}function $I(ne,_e){return ne==null?r:ne[_e]}function pu(ne){return LI.test(ne)}function eB(ne){return OI.test(ne)}function tB(ne){for(var _e,xe=[];!(_e=ne.next()).done;)xe.push(_e.value);return xe}function T0(ne){var _e=-1,xe=Array(ne.size);return ne.forEach(function(Je,bt){xe[++_e]=[bt,Je]}),xe}function US(ne,_e){return function(xe){return ne(_e(xe))}}function mo(ne,_e){for(var xe=-1,Je=ne.length,bt=0,Kt=[];++xe<Je;){var oi=ne[xe];(oi===_e||oi===d)&&(ne[xe]=d,Kt[bt++]=xe)}return Kt}function of(ne){var _e=-1,xe=Array(ne.size);return ne.forEach(function(Je){xe[++_e]=Je}),xe}function rB(ne){var _e=-1,xe=Array(ne.size);return ne.forEach(function(Je){xe[++_e]=[Je,Je]}),xe}function iB(ne,_e,xe){for(var Je=xe-1,bt=ne.length;++Je<bt;)if(ne[Je]===_e)return Je;return-1}function nB(ne,_e,xe){for(var Je=xe+1;Je--;)if(ne[Je]===_e)return Je;return Je}function fu(ne){return pu(ne)?aB(ne):VI(ne)}function ws(ne){return pu(ne)?oB(ne):jI(ne)}function kS(ne){for(var _e=ne.length;_e--&&he.test(ne.charAt(_e)););return _e}var sB=S0(II);function aB(ne){for(var _e=g0.lastIndex=0;g0.test(ne);)++_e;return _e}function oB(ne){return ne.match(g0)||[]}function lB(ne){return ne.match(CI)||[]}var uB=function ne(_e){_e=_e==null?Ai:mu.defaults(Ai.Object(),_e,mu.pick(Ai,PI));var xe=_e.Array,Je=_e.Date,bt=_e.Error,Kt=_e.Function,oi=_e.Math,dr=_e.Object,C0=_e.RegExp,hB=_e.String,Yn=_e.TypeError,lf=xe.prototype,cB=Kt.prototype,gu=dr.prototype,uf=_e["__core-js_shared__"],hf=cB.toString,lr=gu.hasOwnProperty,dB=0,HS=function(){var u=/[^.]+$/.exec(uf&&uf.keys&&uf.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),cf=gu.toString,pB=hf.call(dr),fB=Ai._,mB=C0("^"+hf.call(lr).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),df=AS?_e.Buffer:r,go=_e.Symbol,pf=_e.Uint8Array,GS=df?df.allocUnsafe:r,ff=US(dr.getPrototypeOf,dr),VS=dr.create,jS=gu.propertyIsEnumerable,mf=lf.splice,WS=go?go.isConcatSpreadable:r,Mc=go?go.iterator:r,xl=go?go.toStringTag:r,gf=function(){try{var u=Al(dr,"defineProperty");return u({},"",{}),u}catch{}}(),gB=_e.clearTimeout!==Ai.clearTimeout&&_e.clearTimeout,vB=Je&&Je.now!==Ai.Date.now&&Je.now,yB=_e.setTimeout!==Ai.setTimeout&&_e.setTimeout,vf=oi.ceil,yf=oi.floor,L0=dr.getOwnPropertySymbols,xB=df?df.isBuffer:r,JS=_e.isFinite,wB=lf.join,bB=US(dr.keys,dr),li=oi.max,Gi=oi.min,_B=Je.now,SB=_e.parseInt,YS=oi.random,AB=lf.reverse,O0=Al(_e,"DataView"),Ec=Al(_e,"Map"),P0=Al(_e,"Promise"),vu=Al(_e,"Set"),Tc=Al(_e,"WeakMap"),Cc=Al(dr,"create"),xf=Tc&&new Tc,yu={},MB=Ml(O0),EB=Ml(Ec),TB=Ml(P0),CB=Ml(vu),LB=Ml(Tc),wf=go?go.prototype:r,Lc=wf?wf.valueOf:r,XS=wf?wf.toString:r;function R(u){if(Nr(u)&&!St(u)&&!(u instanceof zt)){if(u instanceof Xn)return u;if(lr.call(u,"__wrapped__"))return qA(u)}return new Xn(u)}var xu=function(){function u(){}return function(c){if(!Lr(c))return{};if(VS)return VS(c);u.prototype=c;var w=new u;return u.prototype=r,w}}();function bf(){}function Xn(u,c){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=r}R.templateSettings={escape:ht,evaluate:xt,interpolate:wt,variable:"",imports:{_:R}},R.prototype=bf.prototype,R.prototype.constructor=R,Xn.prototype=xu(bf.prototype),Xn.prototype.constructor=Xn;function zt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function OB(){var u=new zt(this.__wrapped__);return u.__actions__=ln(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=ln(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=ln(this.__views__),u}function PB(){if(this.__filtered__){var u=new zt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function DB(){var u=this.__wrapped__.value(),c=this.__dir__,w=St(u),E=c<0,D=w?u.length:0,I=jz(0,D,this.__views__),j=I.start,K=I.end,ue=K-j,Ee=E?K:j-1,Te=this.__iteratees__,De=Te.length,ke=0,et=Gi(ue,this.__takeCount__);if(!w||!E&&D==ue&&et==ue)return yA(u,this.__actions__);var pt=[];e:for(;ue--&&ke<et;){Ee+=c;for(var Lt=-1,ft=u[Ee];++Lt<De;){var It=Te[Lt],Ut=It.iteratee,Ln=It.type,rn=Ut(ft);if(Ln==G)ft=rn;else if(!rn){if(Ln==k)continue e;break e}}pt[ke++]=ft}return pt}zt.prototype=xu(bf.prototype),zt.prototype.constructor=zt;function wl(u){var c=-1,w=u==null?0:u.length;for(this.clear();++c<w;){var E=u[c];this.set(E[0],E[1])}}function RB(){this.__data__=Cc?Cc(null):{},this.size=0}function NB(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}function IB(u){var c=this.__data__;if(Cc){var w=c[u];return w===l?r:w}return lr.call(c,u)?c[u]:r}function BB(u){var c=this.__data__;return Cc?c[u]!==r:lr.call(c,u)}function zB(u,c){var w=this.__data__;return this.size+=this.has(u)?0:1,w[u]=Cc&&c===r?l:c,this}wl.prototype.clear=RB,wl.prototype.delete=NB,wl.prototype.get=IB,wl.prototype.has=BB,wl.prototype.set=zB;function Ra(u){var c=-1,w=u==null?0:u.length;for(this.clear();++c<w;){var E=u[c];this.set(E[0],E[1])}}function FB(){this.__data__=[],this.size=0}function UB(u){var c=this.__data__,w=_f(c,u);if(w<0)return!1;var E=c.length-1;return w==E?c.pop():mf.call(c,w,1),--this.size,!0}function kB(u){var c=this.__data__,w=_f(c,u);return w<0?r:c[w][1]}function HB(u){return _f(this.__data__,u)>-1}function GB(u,c){var w=this.__data__,E=_f(w,u);return E<0?(++this.size,w.push([u,c])):w[E][1]=c,this}Ra.prototype.clear=FB,Ra.prototype.delete=UB,Ra.prototype.get=kB,Ra.prototype.has=HB,Ra.prototype.set=GB;function Na(u){var c=-1,w=u==null?0:u.length;for(this.clear();++c<w;){var E=u[c];this.set(E[0],E[1])}}function VB(){this.size=0,this.__data__={hash:new wl,map:new(Ec||Ra),string:new wl}}function jB(u){var c=Nf(this,u).delete(u);return this.size-=c?1:0,c}function WB(u){return Nf(this,u).get(u)}function JB(u){return Nf(this,u).has(u)}function YB(u,c){var w=Nf(this,u),E=w.size;return w.set(u,c),this.size+=w.size==E?0:1,this}Na.prototype.clear=VB,Na.prototype.delete=jB,Na.prototype.get=WB,Na.prototype.has=JB,Na.prototype.set=YB;function bl(u){var c=-1,w=u==null?0:u.length;for(this.__data__=new Na;++c<w;)this.add(u[c])}function XB(u){return this.__data__.set(u,l),this}function qB(u){return this.__data__.has(u)}bl.prototype.add=bl.prototype.push=XB,bl.prototype.has=qB;function bs(u){var c=this.__data__=new Ra(u);this.size=c.size}function QB(){this.__data__=new Ra,this.size=0}function KB(u){var c=this.__data__,w=c.delete(u);return this.size=c.size,w}function ZB(u){return this.__data__.get(u)}function $B(u){return this.__data__.has(u)}function ez(u,c){var w=this.__data__;if(w instanceof Ra){var E=w.__data__;if(!Ec||E.length<n-1)return E.push([u,c]),this.size=++w.size,this;w=this.__data__=new Na(E)}return w.set(u,c),this.size=w.size,this}bs.prototype.clear=QB,bs.prototype.delete=KB,bs.prototype.get=ZB,bs.prototype.has=$B,bs.prototype.set=ez;function qS(u,c){var w=St(u),E=!w&&El(u),D=!w&&!E&&bo(u),I=!w&&!E&&!D&&Su(u),j=w||E||D||I,K=j?M0(u.length,hB):[],ue=K.length;for(var Ee in u)(c||lr.call(u,Ee))&&!(j&&(Ee=="length"||D&&(Ee=="offset"||Ee=="parent")||I&&(Ee=="buffer"||Ee=="byteLength"||Ee=="byteOffset")||Fa(Ee,ue)))&&K.push(Ee);return K}function QS(u){var c=u.length;return c?u[G0(0,c-1)]:r}function tz(u,c){return If(ln(u),_l(c,0,u.length))}function rz(u){return If(ln(u))}function D0(u,c,w){(w!==r&&!_s(u[c],w)||w===r&&!(c in u))&&Ia(u,c,w)}function Oc(u,c,w){var E=u[c];(!(lr.call(u,c)&&_s(E,w))||w===r&&!(c in u))&&Ia(u,c,w)}function _f(u,c){for(var w=u.length;w--;)if(_s(u[w][0],c))return w;return-1}function iz(u,c,w,E){return vo(u,function(D,I,j){c(E,D,w(D),j)}),E}function KS(u,c){return u&&Zs(c,pi(c),u)}function nz(u,c){return u&&Zs(c,hn(c),u)}function Ia(u,c,w){c=="__proto__"&&gf?gf(u,c,{configurable:!0,enumerable:!0,value:w,writable:!0}):u[c]=w}function R0(u,c){for(var w=-1,E=c.length,D=xe(E),I=u==null;++w<E;)D[w]=I?r:py(u,c[w]);return D}function _l(u,c,w){return u===u&&(w!==r&&(u=u<=w?u:w),c!==r&&(u=u>=c?u:c)),u}function qn(u,c,w,E,D,I){var j,K=c&p,ue=c&f,Ee=c&m;if(w&&(j=D?w(u,E,D,I):w(u)),j!==r)return j;if(!Lr(u))return u;var Te=St(u);if(Te){if(j=Jz(u),!K)return ln(u,j)}else{var De=Vi(u),ke=De==oe||De==me;if(bo(u))return bA(u,K);if(De==F||De==ge||ke&&!D){if(j=ue||ke?{}:kA(u),!K)return ue?Iz(u,nz(j,u)):Nz(u,KS(j,u))}else{if(!pr[De])return D?u:{};j=Yz(u,De,K)}}I||(I=new bs);var et=I.get(u);if(et)return et;I.set(u,j),mM(u)?u.forEach(function(ft){j.add(qn(ft,c,w,ft,u,I))}):pM(u)&&u.forEach(function(ft,It){j.set(It,qn(ft,c,w,It,u,I))});var pt=Ee?ue?$0:Z0:ue?hn:pi,Lt=Te?r:pt(u);return Jn(Lt||u,function(ft,It){Lt&&(It=ft,ft=u[It]),Oc(j,It,qn(ft,c,w,It,u,I))}),j}function sz(u){var c=pi(u);return function(w){return ZS(w,u,c)}}function ZS(u,c,w){var E=w.length;if(u==null)return!E;for(u=dr(u);E--;){var D=w[E],I=c[D],j=u[D];if(j===r&&!(D in u)||!I(j))return!1}return!0}function $S(u,c,w){if(typeof u!="function")throw new Yn(a);return zc(function(){u.apply(r,w)},c)}function Pc(u,c,w,E){var D=-1,I=sf,j=!0,K=u.length,ue=[],Ee=c.length;if(!K)return ue;w&&(c=Sr(c,En(w))),E?(I=x0,j=!1):c.length>=n&&(I=Ac,j=!1,c=new bl(c));e:for(;++D<K;){var Te=u[D],De=w==null?Te:w(Te);if(Te=E||Te!==0?Te:0,j&&De===De){for(var ke=Ee;ke--;)if(c[ke]===De)continue e;ue.push(Te)}else I(c,De,E)||ue.push(Te)}return ue}var vo=EA(Ks),eA=EA(I0,!0);function az(u,c){var w=!0;return vo(u,function(E,D,I){return w=!!c(E,D,I),w}),w}function Sf(u,c,w){for(var E=-1,D=u.length;++E<D;){var I=u[E],j=c(I);if(j!=null&&(K===r?j===j&&!Cn(j):w(j,K)))var K=j,ue=I}return ue}function oz(u,c,w,E){var D=u.length;for(w=Mt(w),w<0&&(w=-w>D?0:D+w),E=E===r||E>D?D:Mt(E),E<0&&(E+=D),E=w>E?0:vM(E);w<E;)u[w++]=c;return u}function tA(u,c){var w=[];return vo(u,function(E,D,I){c(E,D,I)&&w.push(E)}),w}function Mi(u,c,w,E,D){var I=-1,j=u.length;for(w||(w=qz),D||(D=[]);++I<j;){var K=u[I];c>0&&w(K)?c>1?Mi(K,c-1,w,E,D):fo(D,K):E||(D[D.length]=K)}return D}var N0=TA(),rA=TA(!0);function Ks(u,c){return u&&N0(u,c,pi)}function I0(u,c){return u&&rA(u,c,pi)}function Af(u,c){return po(c,function(w){return Ua(u[w])})}function Sl(u,c){c=xo(c,u);for(var w=0,E=c.length;u!=null&&w<E;)u=u[$s(c[w++])];return w&&w==E?u:r}function iA(u,c,w){var E=c(u);return St(u)?E:fo(E,w(u))}function en(u){return u==null?u===r?Ke:Ae:xl&&xl in dr(u)?Vz(u):rF(u)}function B0(u,c){return u>c}function lz(u,c){return u!=null&&lr.call(u,c)}function uz(u,c){return u!=null&&c in dr(u)}function hz(u,c,w){return u>=Gi(c,w)&&u<li(c,w)}function z0(u,c,w){for(var E=w?x0:sf,D=u[0].length,I=u.length,j=I,K=xe(I),ue=1/0,Ee=[];j--;){var Te=u[j];j&&c&&(Te=Sr(Te,En(c))),ue=Gi(Te.length,ue),K[j]=!w&&(c||D>=120&&Te.length>=120)?new bl(j&&Te):r}Te=u[0];var De=-1,ke=K[0];e:for(;++De<D&&Ee.length<ue;){var et=Te[De],pt=c?c(et):et;if(et=w||et!==0?et:0,!(ke?Ac(ke,pt):E(Ee,pt,w))){for(j=I;--j;){var Lt=K[j];if(!(Lt?Ac(Lt,pt):E(u[j],pt,w)))continue e}ke&&ke.push(pt),Ee.push(et)}}return Ee}function cz(u,c,w,E){return Ks(u,function(D,I,j){c(E,w(D),I,j)}),E}function Dc(u,c,w){c=xo(c,u),u=jA(u,c);var E=u==null?u:u[$s(Kn(c))];return E==null?r:Mn(E,u,w)}function nA(u){return Nr(u)&&en(u)==ge}function dz(u){return Nr(u)&&en(u)==re}function pz(u){return Nr(u)&&en(u)==ee}function Rc(u,c,w,E,D){return u===c?!0:u==null||c==null||!Nr(u)&&!Nr(c)?u!==u&&c!==c:fz(u,c,w,E,Rc,D)}function fz(u,c,w,E,D,I){var j=St(u),K=St(c),ue=j?Y:Vi(u),Ee=K?Y:Vi(c);ue=ue==ge?F:ue,Ee=Ee==ge?F:Ee;var Te=ue==F,De=Ee==F,ke=ue==Ee;if(ke&&bo(u)){if(!bo(c))return!1;j=!0,Te=!1}if(ke&&!Te)return I||(I=new bs),j||Su(u)?zA(u,c,w,E,D,I):Hz(u,c,ue,w,E,D,I);if(!(w&y)){var et=Te&&lr.call(u,"__wrapped__"),pt=De&&lr.call(c,"__wrapped__");if(et||pt){var Lt=et?u.value():u,ft=pt?c.value():c;return I||(I=new bs),D(Lt,ft,w,E,I)}}return ke?(I||(I=new bs),Gz(u,c,w,E,D,I)):!1}function mz(u){return Nr(u)&&Vi(u)==pe}function F0(u,c,w,E){var D=w.length,I=D,j=!E;if(u==null)return!I;for(u=dr(u);D--;){var K=w[D];if(j&&K[2]?K[1]!==u[K[0]]:!(K[0]in u))return!1}for(;++D<I;){K=w[D];var ue=K[0],Ee=u[ue],Te=K[1];if(j&&K[2]){if(Ee===r&&!(ue in u))return!1}else{var De=new bs;if(E)var ke=E(Ee,Te,ue,u,c,De);if(!(ke===r?Rc(Te,Ee,y|b,E,De):ke))return!1}}return!0}function sA(u){if(!Lr(u)||Kz(u))return!1;var c=Ua(u)?mB:gt;return c.test(Ml(u))}function gz(u){return Nr(u)&&en(u)==Oe}function vz(u){return Nr(u)&&Vi(u)==Ce}function yz(u){return Nr(u)&&Hf(u.length)&&!!yr[en(u)]}function aA(u){return typeof u=="function"?u:u==null?cn:typeof u=="object"?St(u)?uA(u[0],u[1]):lA(u):CM(u)}function U0(u){if(!Bc(u))return bB(u);var c=[];for(var w in dr(u))lr.call(u,w)&&w!="constructor"&&c.push(w);return c}function xz(u){if(!Lr(u))return tF(u);var c=Bc(u),w=[];for(var E in u)E=="constructor"&&(c||!lr.call(u,E))||w.push(E);return w}function k0(u,c){return u<c}function oA(u,c){var w=-1,E=un(u)?xe(u.length):[];return vo(u,function(D,I,j){E[++w]=c(D,I,j)}),E}function lA(u){var c=ty(u);return c.length==1&&c[0][2]?GA(c[0][0],c[0][1]):function(w){return w===u||F0(w,u,c)}}function uA(u,c){return iy(u)&&HA(c)?GA($s(u),c):function(w){var E=py(w,u);return E===r&&E===c?fy(w,u):Rc(c,E,y|b)}}function Mf(u,c,w,E,D){u!==c&&N0(c,function(I,j){if(D||(D=new bs),Lr(I))wz(u,c,j,w,Mf,E,D);else{var K=E?E(sy(u,j),I,j+"",u,c,D):r;K===r&&(K=I),D0(u,j,K)}},hn)}function wz(u,c,w,E,D,I,j){var K=sy(u,w),ue=sy(c,w),Ee=j.get(ue);if(Ee){D0(u,w,Ee);return}var Te=I?I(K,ue,w+"",u,c,j):r,De=Te===r;if(De){var ke=St(ue),et=!ke&&bo(ue),pt=!ke&&!et&&Su(ue);Te=ue,ke||et||pt?St(K)?Te=K:Gr(K)?Te=ln(K):et?(De=!1,Te=bA(ue,!0)):pt?(De=!1,Te=_A(ue,!0)):Te=[]:Fc(ue)||El(ue)?(Te=K,El(K)?Te=yM(K):(!Lr(K)||Ua(K))&&(Te=kA(ue))):De=!1}De&&(j.set(ue,Te),D(Te,ue,E,I,j),j.delete(ue)),D0(u,w,Te)}function hA(u,c){var w=u.length;if(!!w)return c+=c<0?w:0,Fa(c,w)?u[c]:r}function cA(u,c,w){c.length?c=Sr(c,function(I){return St(I)?function(j){return Sl(j,I.length===1?I[0]:I)}:I}):c=[cn];var E=-1;c=Sr(c,En(ct()));var D=oA(u,function(I,j,K){var ue=Sr(c,function(Ee){return Ee(I)});return{criteria:ue,index:++E,value:I}});return YI(D,function(I,j){return Rz(I,j,w)})}function bz(u,c){return dA(u,c,function(w,E){return fy(u,E)})}function dA(u,c,w){for(var E=-1,D=c.length,I={};++E<D;){var j=c[E],K=Sl(u,j);w(K,j)&&Nc(I,xo(j,u),K)}return I}function _z(u){return function(c){return Sl(c,u)}}function H0(u,c,w,E){var D=E?JI:du,I=-1,j=c.length,K=u;for(u===c&&(c=ln(c)),w&&(K=Sr(u,En(w)));++I<j;)for(var ue=0,Ee=c[I],Te=w?w(Ee):Ee;(ue=D(K,Te,ue,E))>-1;)K!==u&&mf.call(K,ue,1),mf.call(u,ue,1);return u}function pA(u,c){for(var w=u?c.length:0,E=w-1;w--;){var D=c[w];if(w==E||D!==I){var I=D;Fa(D)?mf.call(u,D,1):W0(u,D)}}return u}function G0(u,c){return u+yf(YS()*(c-u+1))}function Sz(u,c,w,E){for(var D=-1,I=li(vf((c-u)/(w||1)),0),j=xe(I);I--;)j[E?I:++D]=u,u+=w;return j}function V0(u,c){var w="";if(!u||c<1||c>$)return w;do c%2&&(w+=u),c=yf(c/2),c&&(u+=u);while(c);return w}function Pt(u,c){return ay(VA(u,c,cn),u+"")}function Az(u){return QS(Au(u))}function Mz(u,c){var w=Au(u);return If(w,_l(c,0,w.length))}function Nc(u,c,w,E){if(!Lr(u))return u;c=xo(c,u);for(var D=-1,I=c.length,j=I-1,K=u;K!=null&&++D<I;){var ue=$s(c[D]),Ee=w;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return u;if(D!=j){var Te=K[ue];Ee=E?E(Te,ue,K):r,Ee===r&&(Ee=Lr(Te)?Te:Fa(c[D+1])?[]:{})}Oc(K,ue,Ee),K=K[ue]}return u}var fA=xf?function(u,c){return xf.set(u,c),u}:cn,Ez=gf?function(u,c){return gf(u,"toString",{configurable:!0,enumerable:!1,value:gy(c),writable:!0})}:cn;function Tz(u){return If(Au(u))}function Qn(u,c,w){var E=-1,D=u.length;c<0&&(c=-c>D?0:D+c),w=w>D?D:w,w<0&&(w+=D),D=c>w?0:w-c>>>0,c>>>=0;for(var I=xe(D);++E<D;)I[E]=u[E+c];return I}function Cz(u,c){var w;return vo(u,function(E,D,I){return w=c(E,D,I),!w}),!!w}function Ef(u,c,w){var E=0,D=u==null?E:u.length;if(typeof c=="number"&&c===c&&D<=J){for(;E<D;){var I=E+D>>>1,j=u[I];j!==null&&!Cn(j)&&(w?j<=c:j<c)?E=I+1:D=I}return D}return j0(u,c,cn,w)}function j0(u,c,w,E){var D=0,I=u==null?0:u.length;if(I===0)return 0;c=w(c);for(var j=c!==c,K=c===null,ue=Cn(c),Ee=c===r;D<I;){var Te=yf((D+I)/2),De=w(u[Te]),ke=De!==r,et=De===null,pt=De===De,Lt=Cn(De);if(j)var ft=E||pt;else Ee?ft=pt&&(E||ke):K?ft=pt&&ke&&(E||!et):ue?ft=pt&&ke&&!et&&(E||!Lt):et||Lt?ft=!1:ft=E?De<=c:De<c;ft?D=Te+1:I=Te}return Gi(I,X)}function mA(u,c){for(var w=-1,E=u.length,D=0,I=[];++w<E;){var j=u[w],K=c?c(j):j;if(!w||!_s(K,ue)){var ue=K;I[D++]=j===0?0:j}}return I}function gA(u){return typeof u=="number"?u:Cn(u)?te:+u}function Tn(u){if(typeof u=="string")return u;if(St(u))return Sr(u,Tn)+"";if(Cn(u))return XS?XS.call(u):"";var c=u+"";return c=="0"&&1/u==-W?"-0":c}function yo(u,c,w){var E=-1,D=sf,I=u.length,j=!0,K=[],ue=K;if(w)j=!1,D=x0;else if(I>=n){var Ee=c?null:Uz(u);if(Ee)return of(Ee);j=!1,D=Ac,ue=new bl}else ue=c?[]:K;e:for(;++E<I;){var Te=u[E],De=c?c(Te):Te;if(Te=w||Te!==0?Te:0,j&&De===De){for(var ke=ue.length;ke--;)if(ue[ke]===De)continue e;c&&ue.push(De),K.push(Te)}else D(ue,De,w)||(ue!==K&&ue.push(De),K.push(Te))}return K}function W0(u,c){return c=xo(c,u),u=jA(u,c),u==null||delete u[$s(Kn(c))]}function vA(u,c,w,E){return Nc(u,c,w(Sl(u,c)),E)}function Tf(u,c,w,E){for(var D=u.length,I=E?D:-1;(E?I--:++I<D)&&c(u[I],I,u););return w?Qn(u,E?0:I,E?I+1:D):Qn(u,E?I+1:0,E?D:I)}function yA(u,c){var w=u;return w instanceof zt&&(w=w.value()),w0(c,function(E,D){return D.func.apply(D.thisArg,fo([E],D.args))},w)}function J0(u,c,w){var E=u.length;if(E<2)return E?yo(u[0]):[];for(var D=-1,I=xe(E);++D<E;)for(var j=u[D],K=-1;++K<E;)K!=D&&(I[D]=Pc(I[D]||j,u[K],c,w));return yo(Mi(I,1),c,w)}function xA(u,c,w){for(var E=-1,D=u.length,I=c.length,j={};++E<D;){var K=E<I?c[E]:r;w(j,u[E],K)}return j}function Y0(u){return Gr(u)?u:[]}function X0(u){return typeof u=="function"?u:cn}function xo(u,c){return St(u)?u:iy(u,c)?[u]:XA(tr(u))}var Lz=Pt;function wo(u,c,w){var E=u.length;return w=w===r?E:w,!c&&w>=E?u:Qn(u,c,w)}var wA=gB||function(u){return Ai.clearTimeout(u)};function bA(u,c){if(c)return u.slice();var w=u.length,E=GS?GS(w):new u.constructor(w);return u.copy(E),E}function q0(u){var c=new u.constructor(u.byteLength);return new pf(c).set(new pf(u)),c}function Oz(u,c){var w=c?q0(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.byteLength)}function Pz(u){var c=new u.constructor(u.source,or.exec(u));return c.lastIndex=u.lastIndex,c}function Dz(u){return Lc?dr(Lc.call(u)):{}}function _A(u,c){var w=c?q0(u.buffer):u.buffer;return new u.constructor(w,u.byteOffset,u.length)}function SA(u,c){if(u!==c){var w=u!==r,E=u===null,D=u===u,I=Cn(u),j=c!==r,K=c===null,ue=c===c,Ee=Cn(c);if(!K&&!Ee&&!I&&u>c||I&&j&&ue&&!K&&!Ee||E&&j&&ue||!w&&ue||!D)return 1;if(!E&&!I&&!Ee&&u<c||Ee&&w&&D&&!E&&!I||K&&w&&D||!j&&D||!ue)return-1}return 0}function Rz(u,c,w){for(var E=-1,D=u.criteria,I=c.criteria,j=D.length,K=w.length;++E<j;){var ue=SA(D[E],I[E]);if(ue){if(E>=K)return ue;var Ee=w[E];return ue*(Ee=="desc"?-1:1)}}return u.index-c.index}function AA(u,c,w,E){for(var D=-1,I=u.length,j=w.length,K=-1,ue=c.length,Ee=li(I-j,0),Te=xe(ue+Ee),De=!E;++K<ue;)Te[K]=c[K];for(;++D<j;)(De||D<I)&&(Te[w[D]]=u[D]);for(;Ee--;)Te[K++]=u[D++];return Te}function MA(u,c,w,E){for(var D=-1,I=u.length,j=-1,K=w.length,ue=-1,Ee=c.length,Te=li(I-K,0),De=xe(Te+Ee),ke=!E;++D<Te;)De[D]=u[D];for(var et=D;++ue<Ee;)De[et+ue]=c[ue];for(;++j<K;)(ke||D<I)&&(De[et+w[j]]=u[D++]);return De}function ln(u,c){var w=-1,E=u.length;for(c||(c=xe(E));++w<E;)c[w]=u[w];return c}function Zs(u,c,w,E){var D=!w;w||(w={});for(var I=-1,j=c.length;++I<j;){var K=c[I],ue=E?E(w[K],u[K],K,w,u):r;ue===r&&(ue=u[K]),D?Ia(w,K,ue):Oc(w,K,ue)}return w}function Nz(u,c){return Zs(u,ry(u),c)}function Iz(u,c){return Zs(u,FA(u),c)}function Cf(u,c){return function(w,E){var D=St(w)?kI:iz,I=c?c():{};return D(w,u,ct(E,2),I)}}function wu(u){return Pt(function(c,w){var E=-1,D=w.length,I=D>1?w[D-1]:r,j=D>2?w[2]:r;for(I=u.length>3&&typeof I=="function"?(D--,I):r,j&&tn(w[0],w[1],j)&&(I=D<3?r:I,D=1),c=dr(c);++E<D;){var K=w[E];K&&u(c,K,E,I)}return c})}function EA(u,c){return function(w,E){if(w==null)return w;if(!un(w))return u(w,E);for(var D=w.length,I=c?D:-1,j=dr(w);(c?I--:++I<D)&&E(j[I],I,j)!==!1;);return w}}function TA(u){return function(c,w,E){for(var D=-1,I=dr(c),j=E(c),K=j.length;K--;){var ue=j[u?K:++D];if(w(I[ue],ue,I)===!1)break}return c}}function Bz(u,c,w){var E=c&x,D=Ic(u);function I(){var j=this&&this!==Ai&&this instanceof I?D:u;return j.apply(E?w:this,arguments)}return I}function CA(u){return function(c){c=tr(c);var w=pu(c)?ws(c):r,E=w?w[0]:c.charAt(0),D=w?wo(w,1).join(""):c.slice(1);return E[u]()+D}}function bu(u){return function(c){return w0(EM(MM(c).replace(EI,"")),u,"")}}function Ic(u){return function(){var c=arguments;switch(c.length){case 0:return new u;case 1:return new u(c[0]);case 2:return new u(c[0],c[1]);case 3:return new u(c[0],c[1],c[2]);case 4:return new u(c[0],c[1],c[2],c[3]);case 5:return new u(c[0],c[1],c[2],c[3],c[4]);case 6:return new u(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new u(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var w=xu(u.prototype),E=u.apply(w,c);return Lr(E)?E:w}}function zz(u,c,w){var E=Ic(u);function D(){for(var I=arguments.length,j=xe(I),K=I,ue=_u(D);K--;)j[K]=arguments[K];var Ee=I<3&&j[0]!==ue&&j[I-1]!==ue?[]:mo(j,ue);if(I-=Ee.length,I<w)return RA(u,c,Lf,D.placeholder,r,j,Ee,r,r,w-I);var Te=this&&this!==Ai&&this instanceof D?E:u;return Mn(Te,this,j)}return D}function LA(u){return function(c,w,E){var D=dr(c);if(!un(c)){var I=ct(w,3);c=pi(c),w=function(K){return I(D[K],K,D)}}var j=u(c,w,E);return j>-1?D[I?c[j]:j]:r}}function OA(u){return za(function(c){var w=c.length,E=w,D=Xn.prototype.thru;for(u&&c.reverse();E--;){var I=c[E];if(typeof I!="function")throw new Yn(a);if(D&&!j&&Rf(I)=="wrapper")var j=new Xn([],!0)}for(E=j?E:w;++E<w;){I=c[E];var K=Rf(I),ue=K=="wrapper"?ey(I):r;ue&&ny(ue[0])&&ue[1]==(M|_|T|O)&&!ue[4].length&&ue[9]==1?j=j[Rf(ue[0])].apply(j,ue[3]):j=I.length==1&&ny(I)?j[K]():j.thru(I)}return function(){var Ee=arguments,Te=Ee[0];if(j&&Ee.length==1&&St(Te))return j.plant(Te).value();for(var De=0,ke=w?c[De].apply(this,Ee):Te;++De<w;)ke=c[De].call(this,ke);return ke}})}function Lf(u,c,w,E,D,I,j,K,ue,Ee){var Te=c&M,De=c&x,ke=c&v,et=c&(_|S),pt=c&P,Lt=ke?r:Ic(u);function ft(){for(var It=arguments.length,Ut=xe(It),Ln=It;Ln--;)Ut[Ln]=arguments[Ln];if(et)var rn=_u(ft),On=qI(Ut,rn);if(E&&(Ut=AA(Ut,E,D,et)),I&&(Ut=MA(Ut,I,j,et)),It-=On,et&&It<Ee){var Vr=mo(Ut,rn);return RA(u,c,Lf,ft.placeholder,w,Ut,Vr,K,ue,Ee-It)}var Ss=De?w:this,Ha=ke?Ss[u]:u;return It=Ut.length,K?Ut=iF(Ut,K):pt&&It>1&&Ut.reverse(),Te&&ue<It&&(Ut.length=ue),this&&this!==Ai&&this instanceof ft&&(Ha=Lt||Ic(Ha)),Ha.apply(Ss,Ut)}return ft}function PA(u,c){return function(w,E){return cz(w,u,c(E),{})}}function Of(u,c){return function(w,E){var D;if(w===r&&E===r)return c;if(w!==r&&(D=w),E!==r){if(D===r)return E;typeof w=="string"||typeof E=="string"?(w=Tn(w),E=Tn(E)):(w=gA(w),E=gA(E)),D=u(w,E)}return D}}function Q0(u){return za(function(c){return c=Sr(c,En(ct())),Pt(function(w){var E=this;return u(c,function(D){return Mn(D,E,w)})})})}function Pf(u,c){c=c===r?" ":Tn(c);var w=c.length;if(w<2)return w?V0(c,u):c;var E=V0(c,vf(u/fu(c)));return pu(c)?wo(ws(E),0,u).join(""):E.slice(0,u)}function Fz(u,c,w,E){var D=c&x,I=Ic(u);function j(){for(var K=-1,ue=arguments.length,Ee=-1,Te=E.length,De=xe(Te+ue),ke=this&&this!==Ai&&this instanceof j?I:u;++Ee<Te;)De[Ee]=E[Ee];for(;ue--;)De[Ee++]=arguments[++K];return Mn(ke,D?w:this,De)}return j}function DA(u){return function(c,w,E){return E&&typeof E!="number"&&tn(c,w,E)&&(w=E=r),c=ka(c),w===r?(w=c,c=0):w=ka(w),E=E===r?c<w?1:-1:ka(E),Sz(c,w,E,u)}}function Df(u){return function(c,w){return typeof c=="string"&&typeof w=="string"||(c=Zn(c),w=Zn(w)),u(c,w)}}function RA(u,c,w,E,D,I,j,K,ue,Ee){var Te=c&_,De=Te?j:r,ke=Te?r:j,et=Te?I:r,pt=Te?r:I;c|=Te?T:A,c&=~(Te?A:T),c&g||(c&=~(x|v));var Lt=[u,c,D,et,De,pt,ke,K,ue,Ee],ft=w.apply(r,Lt);return ny(u)&&WA(ft,Lt),ft.placeholder=E,JA(ft,u,c)}function K0(u){var c=oi[u];return function(w,E){if(w=Zn(w),E=E==null?0:Gi(Mt(E),292),E&&JS(w)){var D=(tr(w)+"e").split("e"),I=c(D[0]+"e"+(+D[1]+E));return D=(tr(I)+"e").split("e"),+(D[0]+"e"+(+D[1]-E))}return c(w)}}var Uz=vu&&1/of(new vu([,-0]))[1]==W?function(u){return new vu(u)}:xy;function NA(u){return function(c){var w=Vi(c);return w==pe?T0(c):w==Ce?rB(c):XI(c,u(c))}}function Ba(u,c,w,E,D,I,j,K){var ue=c&v;if(!ue&&typeof u!="function")throw new Yn(a);var Ee=E?E.length:0;if(Ee||(c&=~(T|A),E=D=r),j=j===r?j:li(Mt(j),0),K=K===r?K:Mt(K),Ee-=D?D.length:0,c&A){var Te=E,De=D;E=D=r}var ke=ue?r:ey(u),et=[u,c,w,E,D,Te,De,I,j,K];if(ke&&eF(et,ke),u=et[0],c=et[1],w=et[2],E=et[3],D=et[4],K=et[9]=et[9]===r?ue?0:u.length:li(et[9]-Ee,0),!K&&c&(_|S)&&(c&=~(_|S)),!c||c==x)var pt=Bz(u,c,w);else c==_||c==S?pt=zz(u,c,K):(c==T||c==(x|T))&&!D.length?pt=Fz(u,c,w,E):pt=Lf.apply(r,et);var Lt=ke?fA:WA;return JA(Lt(pt,et),u,c)}function IA(u,c,w,E){return u===r||_s(u,gu[w])&&!lr.call(E,w)?c:u}function BA(u,c,w,E,D,I){return Lr(u)&&Lr(c)&&(I.set(c,u),Mf(u,c,r,BA,I),I.delete(c)),u}function kz(u){return Fc(u)?r:u}function zA(u,c,w,E,D,I){var j=w&y,K=u.length,ue=c.length;if(K!=ue&&!(j&&ue>K))return!1;var Ee=I.get(u),Te=I.get(c);if(Ee&&Te)return Ee==c&&Te==u;var De=-1,ke=!0,et=w&b?new bl:r;for(I.set(u,c),I.set(c,u);++De<K;){var pt=u[De],Lt=c[De];if(E)var ft=j?E(Lt,pt,De,c,u,I):E(pt,Lt,De,u,c,I);if(ft!==r){if(ft)continue;ke=!1;break}if(et){if(!b0(c,function(It,Ut){if(!Ac(et,Ut)&&(pt===It||D(pt,It,w,E,I)))return et.push(Ut)})){ke=!1;break}}else if(!(pt===Lt||D(pt,Lt,w,E,I))){ke=!1;break}}return I.delete(u),I.delete(c),ke}function Hz(u,c,w,E,D,I,j){switch(w){case Ie:if(u.byteLength!=c.byteLength||u.byteOffset!=c.byteOffset)return!1;u=u.buffer,c=c.buffer;case re:return!(u.byteLength!=c.byteLength||!I(new pf(u),new pf(c)));case fe:case ee:case we:return _s(+u,+c);case ie:return u.name==c.name&&u.message==c.message;case Oe:case Re:return u==c+"";case pe:var K=T0;case Ce:var ue=E&y;if(K||(K=of),u.size!=c.size&&!ue)return!1;var Ee=j.get(u);if(Ee)return Ee==c;E|=b,j.set(u,c);var Te=zA(K(u),K(c),E,D,I,j);return j.delete(u),Te;case ze:if(Lc)return Lc.call(u)==Lc.call(c)}return!1}function Gz(u,c,w,E,D,I){var j=w&y,K=Z0(u),ue=K.length,Ee=Z0(c),Te=Ee.length;if(ue!=Te&&!j)return!1;for(var De=ue;De--;){var ke=K[De];if(!(j?ke in c:lr.call(c,ke)))return!1}var et=I.get(u),pt=I.get(c);if(et&&pt)return et==c&&pt==u;var Lt=!0;I.set(u,c),I.set(c,u);for(var ft=j;++De<ue;){ke=K[De];var It=u[ke],Ut=c[ke];if(E)var Ln=j?E(Ut,It,ke,c,u,I):E(It,Ut,ke,u,c,I);if(!(Ln===r?It===Ut||D(It,Ut,w,E,I):Ln)){Lt=!1;break}ft||(ft=ke=="constructor")}if(Lt&&!ft){var rn=u.constructor,On=c.constructor;rn!=On&&"constructor"in u&&"constructor"in c&&!(typeof rn=="function"&&rn instanceof rn&&typeof On=="function"&&On instanceof On)&&(Lt=!1)}return I.delete(u),I.delete(c),Lt}function za(u){return ay(VA(u,r,ZA),u+"")}function Z0(u){return iA(u,pi,ry)}function $0(u){return iA(u,hn,FA)}var ey=xf?function(u){return xf.get(u)}:xy;function Rf(u){for(var c=u.name+"",w=yu[c],E=lr.call(yu,c)?w.length:0;E--;){var D=w[E],I=D.func;if(I==null||I==u)return D.name}return c}function _u(u){var c=lr.call(R,"placeholder")?R:u;return c.placeholder}function ct(){var u=R.iteratee||vy;return u=u===vy?aA:u,arguments.length?u(arguments[0],arguments[1]):u}function Nf(u,c){var w=u.__data__;return Qz(c)?w[typeof c=="string"?"string":"hash"]:w.map}function ty(u){for(var c=pi(u),w=c.length;w--;){var E=c[w],D=u[E];c[w]=[E,D,HA(D)]}return c}function Al(u,c){var w=$I(u,c);return sA(w)?w:r}function Vz(u){var c=lr.call(u,xl),w=u[xl];try{u[xl]=r;var E=!0}catch{}var D=cf.call(u);return E&&(c?u[xl]=w:delete u[xl]),D}var ry=L0?function(u){return u==null?[]:(u=dr(u),po(L0(u),function(c){return jS.call(u,c)}))}:wy,FA=L0?function(u){for(var c=[];u;)fo(c,ry(u)),u=ff(u);return c}:wy,Vi=en;(O0&&Vi(new O0(new ArrayBuffer(1)))!=Ie||Ec&&Vi(new Ec)!=pe||P0&&Vi(P0.resolve())!=B||vu&&Vi(new vu)!=Ce||Tc&&Vi(new Tc)!=je)&&(Vi=function(u){var c=en(u),w=c==F?u.constructor:r,E=w?Ml(w):"";if(E)switch(E){case MB:return Ie;case EB:return pe;case TB:return B;case CB:return Ce;case LB:return je}return c});function jz(u,c,w){for(var E=-1,D=w.length;++E<D;){var I=w[E],j=I.size;switch(I.type){case"drop":u+=j;break;case"dropRight":c-=j;break;case"take":c=Gi(c,u+j);break;case"takeRight":u=li(u,c-j);break}}return{start:u,end:c}}function Wz(u){var c=u.match(ye);return c?c[1].split(Pe):[]}function UA(u,c,w){c=xo(c,u);for(var E=-1,D=c.length,I=!1;++E<D;){var j=$s(c[E]);if(!(I=u!=null&&w(u,j)))break;u=u[j]}return I||++E!=D?I:(D=u==null?0:u.length,!!D&&Hf(D)&&Fa(j,D)&&(St(u)||El(u)))}function Jz(u){var c=u.length,w=new u.constructor(c);return c&&typeof u[0]=="string"&&lr.call(u,"index")&&(w.index=u.index,w.input=u.input),w}function kA(u){return typeof u.constructor=="function"&&!Bc(u)?xu(ff(u)):{}}function Yz(u,c,w){var E=u.constructor;switch(c){case re:return q0(u);case fe:case ee:return new E(+u);case Ie:return Oz(u,w);case Me:case Ve:case Be:case at:case kt:case vr:case Si:case $t:case di:return _A(u,w);case pe:return new E;case we:case Re:return new E(u);case Oe:return Pz(u);case Ce:return new E;case ze:return Dz(u)}}function Xz(u,c){var w=c.length;if(!w)return u;var E=w-1;return c[E]=(w>1?"& ":"")+c[E],c=c.join(w>2?", ":" "),u.replace(le,`{
/* [wrapped with `+c+`] */
`)}function qz(u){return St(u)||El(u)||!!(WS&&u&&u[WS])}function Fa(u,c){var w=typeof u;return c=c==null?$:c,!!c&&(w=="number"||w!="symbol"&&Vn.test(u))&&u>-1&&u%1==0&&u<c}function tn(u,c,w){if(!Lr(w))return!1;var E=typeof c;return(E=="number"?un(w)&&Fa(c,w.length):E=="string"&&c in w)?_s(w[c],u):!1}function iy(u,c){if(St(u))return!1;var w=typeof u;return w=="number"||w=="symbol"||w=="boolean"||u==null||Cn(u)?!0:Dt.test(u)||!_t.test(u)||c!=null&&u in dr(c)}function Qz(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}function ny(u){var c=Rf(u),w=R[c];if(typeof w!="function"||!(c in zt.prototype))return!1;if(u===w)return!0;var E=ey(w);return!!E&&u===E[0]}function Kz(u){return!!HS&&HS in u}var Zz=uf?Ua:by;function Bc(u){var c=u&&u.constructor,w=typeof c=="function"&&c.prototype||gu;return u===w}function HA(u){return u===u&&!Lr(u)}function GA(u,c){return function(w){return w==null?!1:w[u]===c&&(c!==r||u in dr(w))}}function $z(u){var c=Uf(u,function(E){return w.size===h&&w.clear(),E}),w=c.cache;return c}function eF(u,c){var w=u[1],E=c[1],D=w|E,I=D<(x|v|M),j=E==M&&w==_||E==M&&w==O&&u[7].length<=c[8]||E==(M|O)&&c[7].length<=c[8]&&w==_;if(!(I||j))return u;E&x&&(u[2]=c[2],D|=w&x?0:g);var K=c[3];if(K){var ue=u[3];u[3]=ue?AA(ue,K,c[4]):K,u[4]=ue?mo(u[3],d):c[4]}return K=c[5],K&&(ue=u[5],u[5]=ue?MA(ue,K,c[6]):K,u[6]=ue?mo(u[5],d):c[6]),K=c[7],K&&(u[7]=K),E&M&&(u[8]=u[8]==null?c[8]:Gi(u[8],c[8])),u[9]==null&&(u[9]=c[9]),u[0]=c[0],u[1]=D,u}function tF(u){var c=[];if(u!=null)for(var w in dr(u))c.push(w);return c}function rF(u){return cf.call(u)}function VA(u,c,w){return c=li(c===r?u.length-1:c,0),function(){for(var E=arguments,D=-1,I=li(E.length-c,0),j=xe(I);++D<I;)j[D]=E[c+D];D=-1;for(var K=xe(c+1);++D<c;)K[D]=E[D];return K[c]=w(j),Mn(u,this,K)}}function jA(u,c){return c.length<2?u:Sl(u,Qn(c,0,-1))}function iF(u,c){for(var w=u.length,E=Gi(c.length,w),D=ln(u);E--;){var I=c[E];u[E]=Fa(I,w)?D[I]:r}return u}function sy(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}var WA=YA(fA),zc=yB||function(u,c){return Ai.setTimeout(u,c)},ay=YA(Ez);function JA(u,c,w){var E=c+"";return ay(u,Xz(E,nF(Wz(E),w)))}function YA(u){var c=0,w=0;return function(){var E=_B(),D=V-(E-w);if(w=E,D>0){if(++c>=U)return arguments[0]}else c=0;return u.apply(r,arguments)}}function If(u,c){var w=-1,E=u.length,D=E-1;for(c=c===r?E:c;++w<c;){var I=G0(w,D),j=u[I];u[I]=u[w],u[w]=j}return u.length=c,u}var XA=$z(function(u){var c=[];return u.charCodeAt(0)===46&&c.push(""),u.replace(Xt,function(w,E,D,I){c.push(D?I.replace(mt,"$1"):E||w)}),c});function $s(u){if(typeof u=="string"||Cn(u))return u;var c=u+"";return c=="0"&&1/u==-W?"-0":c}function Ml(u){if(u!=null){try{return hf.call(u)}catch{}try{return u+""}catch{}}return""}function nF(u,c){return Jn(se,function(w){var E="_."+w[0];c&w[1]&&!sf(u,E)&&u.push(E)}),u.sort()}function qA(u){if(u instanceof zt)return u.clone();var c=new Xn(u.__wrapped__,u.__chain__);return c.__actions__=ln(u.__actions__),c.__index__=u.__index__,c.__values__=u.__values__,c}function sF(u,c,w){(w?tn(u,c,w):c===r)?c=1:c=li(Mt(c),0);var E=u==null?0:u.length;if(!E||c<1)return[];for(var D=0,I=0,j=xe(vf(E/c));D<E;)j[I++]=Qn(u,D,D+=c);return j}function aF(u){for(var c=-1,w=u==null?0:u.length,E=0,D=[];++c<w;){var I=u[c];I&&(D[E++]=I)}return D}function oF(){var u=arguments.length;if(!u)return[];for(var c=xe(u-1),w=arguments[0],E=u;E--;)c[E-1]=arguments[E];return fo(St(w)?ln(w):[w],Mi(c,1))}var lF=Pt(function(u,c){return Gr(u)?Pc(u,Mi(c,1,Gr,!0)):[]}),uF=Pt(function(u,c){var w=Kn(c);return Gr(w)&&(w=r),Gr(u)?Pc(u,Mi(c,1,Gr,!0),ct(w,2)):[]}),hF=Pt(function(u,c){var w=Kn(c);return Gr(w)&&(w=r),Gr(u)?Pc(u,Mi(c,1,Gr,!0),r,w):[]});function cF(u,c,w){var E=u==null?0:u.length;return E?(c=w||c===r?1:Mt(c),Qn(u,c<0?0:c,E)):[]}function dF(u,c,w){var E=u==null?0:u.length;return E?(c=w||c===r?1:Mt(c),c=E-c,Qn(u,0,c<0?0:c)):[]}function pF(u,c){return u&&u.length?Tf(u,ct(c,3),!0,!0):[]}function fF(u,c){return u&&u.length?Tf(u,ct(c,3),!0):[]}function mF(u,c,w,E){var D=u==null?0:u.length;return D?(w&&typeof w!="number"&&tn(u,c,w)&&(w=0,E=D),oz(u,c,w,E)):[]}function QA(u,c,w){var E=u==null?0:u.length;if(!E)return-1;var D=w==null?0:Mt(w);return D<0&&(D=li(E+D,0)),af(u,ct(c,3),D)}function KA(u,c,w){var E=u==null?0:u.length;if(!E)return-1;var D=E-1;return w!==r&&(D=Mt(w),D=w<0?li(E+D,0):Gi(D,E-1)),af(u,ct(c,3),D,!0)}function ZA(u){var c=u==null?0:u.length;return c?Mi(u,1):[]}function gF(u){var c=u==null?0:u.length;return c?Mi(u,W):[]}function vF(u,c){var w=u==null?0:u.length;return w?(c=c===r?1:Mt(c),Mi(u,c)):[]}function yF(u){for(var c=-1,w=u==null?0:u.length,E={};++c<w;){var D=u[c];E[D[0]]=D[1]}return E}function $A(u){return u&&u.length?u[0]:r}function xF(u,c,w){var E=u==null?0:u.length;if(!E)return-1;var D=w==null?0:Mt(w);return D<0&&(D=li(E+D,0)),du(u,c,D)}function wF(u){var c=u==null?0:u.length;return c?Qn(u,0,-1):[]}var bF=Pt(function(u){var c=Sr(u,Y0);return c.length&&c[0]===u[0]?z0(c):[]}),_F=Pt(function(u){var c=Kn(u),w=Sr(u,Y0);return c===Kn(w)?c=r:w.pop(),w.length&&w[0]===u[0]?z0(w,ct(c,2)):[]}),SF=Pt(function(u){var c=Kn(u),w=Sr(u,Y0);return c=typeof c=="function"?c:r,c&&w.pop(),w.length&&w[0]===u[0]?z0(w,r,c):[]});function AF(u,c){return u==null?"":wB.call(u,c)}function Kn(u){var c=u==null?0:u.length;return c?u[c-1]:r}function MF(u,c,w){var E=u==null?0:u.length;if(!E)return-1;var D=E;return w!==r&&(D=Mt(w),D=D<0?li(E+D,0):Gi(D,E-1)),c===c?nB(u,c,D):af(u,RS,D,!0)}function EF(u,c){return u&&u.length?hA(u,Mt(c)):r}var TF=Pt(eM);function eM(u,c){return u&&u.length&&c&&c.length?H0(u,c):u}function CF(u,c,w){return u&&u.length&&c&&c.length?H0(u,c,ct(w,2)):u}function LF(u,c,w){return u&&u.length&&c&&c.length?H0(u,c,r,w):u}var OF=za(function(u,c){var w=u==null?0:u.length,E=R0(u,c);return pA(u,Sr(c,function(D){return Fa(D,w)?+D:D}).sort(SA)),E});function PF(u,c){var w=[];if(!(u&&u.length))return w;var E=-1,D=[],I=u.length;for(c=ct(c,3);++E<I;){var j=u[E];c(j,E,u)&&(w.push(j),D.push(E))}return pA(u,D),w}function oy(u){return u==null?u:AB.call(u)}function DF(u,c,w){var E=u==null?0:u.length;return E?(w&&typeof w!="number"&&tn(u,c,w)?(c=0,w=E):(c=c==null?0:Mt(c),w=w===r?E:Mt(w)),Qn(u,c,w)):[]}function RF(u,c){return Ef(u,c)}function NF(u,c,w){return j0(u,c,ct(w,2))}function IF(u,c){var w=u==null?0:u.length;if(w){var E=Ef(u,c);if(E<w&&_s(u[E],c))return E}return-1}function BF(u,c){return Ef(u,c,!0)}function zF(u,c,w){return j0(u,c,ct(w,2),!0)}function FF(u,c){var w=u==null?0:u.length;if(w){var E=Ef(u,c,!0)-1;if(_s(u[E],c))return E}return-1}function UF(u){return u&&u.length?mA(u):[]}function kF(u,c){return u&&u.length?mA(u,ct(c,2)):[]}function HF(u){var c=u==null?0:u.length;return c?Qn(u,1,c):[]}function GF(u,c,w){return u&&u.length?(c=w||c===r?1:Mt(c),Qn(u,0,c<0?0:c)):[]}function VF(u,c,w){var E=u==null?0:u.length;return E?(c=w||c===r?1:Mt(c),c=E-c,Qn(u,c<0?0:c,E)):[]}function jF(u,c){return u&&u.length?Tf(u,ct(c,3),!1,!0):[]}function WF(u,c){return u&&u.length?Tf(u,ct(c,3)):[]}var JF=Pt(function(u){return yo(Mi(u,1,Gr,!0))}),YF=Pt(function(u){var c=Kn(u);return Gr(c)&&(c=r),yo(Mi(u,1,Gr,!0),ct(c,2))}),XF=Pt(function(u){var c=Kn(u);return c=typeof c=="function"?c:r,yo(Mi(u,1,Gr,!0),r,c)});function qF(u){return u&&u.length?yo(u):[]}function QF(u,c){return u&&u.length?yo(u,ct(c,2)):[]}function KF(u,c){return c=typeof c=="function"?c:r,u&&u.length?yo(u,r,c):[]}function ly(u){if(!(u&&u.length))return[];var c=0;return u=po(u,function(w){if(Gr(w))return c=li(w.length,c),!0}),M0(c,function(w){return Sr(u,_0(w))})}function tM(u,c){if(!(u&&u.length))return[];var w=ly(u);return c==null?w:Sr(w,function(E){return Mn(c,r,E)})}var ZF=Pt(function(u,c){return Gr(u)?Pc(u,c):[]}),$F=Pt(function(u){return J0(po(u,Gr))}),e4=Pt(function(u){var c=Kn(u);return Gr(c)&&(c=r),J0(po(u,Gr),ct(c,2))}),t4=Pt(function(u){var c=Kn(u);return c=typeof c=="function"?c:r,J0(po(u,Gr),r,c)}),r4=Pt(ly);function i4(u,c){return xA(u||[],c||[],Oc)}function n4(u,c){return xA(u||[],c||[],Nc)}var s4=Pt(function(u){var c=u.length,w=c>1?u[c-1]:r;return w=typeof w=="function"?(u.pop(),w):r,tM(u,w)});function rM(u){var c=R(u);return c.__chain__=!0,c}function a4(u,c){return c(u),u}function Bf(u,c){return c(u)}var o4=za(function(u){var c=u.length,w=c?u[0]:0,E=this.__wrapped__,D=function(I){return R0(I,u)};return c>1||this.__actions__.length||!(E instanceof zt)||!Fa(w)?this.thru(D):(E=E.slice(w,+w+(c?1:0)),E.__actions__.push({func:Bf,args:[D],thisArg:r}),new Xn(E,this.__chain__).thru(function(I){return c&&!I.length&&I.push(r),I}))});function l4(){return rM(this)}function u4(){return new Xn(this.value(),this.__chain__)}function h4(){this.__values__===r&&(this.__values__=gM(this.value()));var u=this.__index__>=this.__values__.length,c=u?r:this.__values__[this.__index__++];return{done:u,value:c}}function c4(){return this}function d4(u){for(var c,w=this;w instanceof bf;){var E=qA(w);E.__index__=0,E.__values__=r,c?D.__wrapped__=E:c=E;var D=E;w=w.__wrapped__}return D.__wrapped__=u,c}function p4(){var u=this.__wrapped__;if(u instanceof zt){var c=u;return this.__actions__.length&&(c=new zt(this)),c=c.reverse(),c.__actions__.push({func:Bf,args:[oy],thisArg:r}),new Xn(c,this.__chain__)}return this.thru(oy)}function f4(){return yA(this.__wrapped__,this.__actions__)}var m4=Cf(function(u,c,w){lr.call(u,w)?++u[w]:Ia(u,w,1)});function g4(u,c,w){var E=St(u)?PS:az;return w&&tn(u,c,w)&&(c=r),E(u,ct(c,3))}function v4(u,c){var w=St(u)?po:tA;return w(u,ct(c,3))}var y4=LA(QA),x4=LA(KA);function w4(u,c){return Mi(zf(u,c),1)}function b4(u,c){return Mi(zf(u,c),W)}function _4(u,c,w){return w=w===r?1:Mt(w),Mi(zf(u,c),w)}function iM(u,c){var w=St(u)?Jn:vo;return w(u,ct(c,3))}function nM(u,c){var w=St(u)?HI:eA;return w(u,ct(c,3))}var S4=Cf(function(u,c,w){lr.call(u,w)?u[w].push(c):Ia(u,w,[c])});function A4(u,c,w,E){u=un(u)?u:Au(u),w=w&&!E?Mt(w):0;var D=u.length;return w<0&&(w=li(D+w,0)),Gf(u)?w<=D&&u.indexOf(c,w)>-1:!!D&&du(u,c,w)>-1}var M4=Pt(function(u,c,w){var E=-1,D=typeof c=="function",I=un(u)?xe(u.length):[];return vo(u,function(j){I[++E]=D?Mn(c,j,w):Dc(j,c,w)}),I}),E4=Cf(function(u,c,w){Ia(u,w,c)});function zf(u,c){var w=St(u)?Sr:oA;return w(u,ct(c,3))}function T4(u,c,w,E){return u==null?[]:(St(c)||(c=c==null?[]:[c]),w=E?r:w,St(w)||(w=w==null?[]:[w]),cA(u,c,w))}var C4=Cf(function(u,c,w){u[w?0:1].push(c)},function(){return[[],[]]});function L4(u,c,w){var E=St(u)?w0:IS,D=arguments.length<3;return E(u,ct(c,4),w,D,vo)}function O4(u,c,w){var E=St(u)?GI:IS,D=arguments.length<3;return E(u,ct(c,4),w,D,eA)}function P4(u,c){var w=St(u)?po:tA;return w(u,kf(ct(c,3)))}function D4(u){var c=St(u)?QS:Az;return c(u)}function R4(u,c,w){(w?tn(u,c,w):c===r)?c=1:c=Mt(c);var E=St(u)?tz:Mz;return E(u,c)}function N4(u){var c=St(u)?rz:Tz;return c(u)}function I4(u){if(u==null)return 0;if(un(u))return Gf(u)?fu(u):u.length;var c=Vi(u);return c==pe||c==Ce?u.size:U0(u).length}function B4(u,c,w){var E=St(u)?b0:Cz;return w&&tn(u,c,w)&&(c=r),E(u,ct(c,3))}var z4=Pt(function(u,c){if(u==null)return[];var w=c.length;return w>1&&tn(u,c[0],c[1])?c=[]:w>2&&tn(c[0],c[1],c[2])&&(c=[c[0]]),cA(u,Mi(c,1),[])}),Ff=vB||function(){return Ai.Date.now()};function F4(u,c){if(typeof c!="function")throw new Yn(a);return u=Mt(u),function(){if(--u<1)return c.apply(this,arguments)}}function sM(u,c,w){return c=w?r:c,c=u&&c==null?u.length:c,Ba(u,M,r,r,r,r,c)}function aM(u,c){var w;if(typeof c!="function")throw new Yn(a);return u=Mt(u),function(){return--u>0&&(w=c.apply(this,arguments)),u<=1&&(c=r),w}}var uy=Pt(function(u,c,w){var E=x;if(w.length){var D=mo(w,_u(uy));E|=T}return Ba(u,E,c,w,D)}),oM=Pt(function(u,c,w){var E=x|v;if(w.length){var D=mo(w,_u(oM));E|=T}return Ba(c,E,u,w,D)});function lM(u,c,w){c=w?r:c;var E=Ba(u,_,r,r,r,r,r,c);return E.placeholder=lM.placeholder,E}function uM(u,c,w){c=w?r:c;var E=Ba(u,S,r,r,r,r,r,c);return E.placeholder=uM.placeholder,E}function hM(u,c,w){var E,D,I,j,K,ue,Ee=0,Te=!1,De=!1,ke=!0;if(typeof u!="function")throw new Yn(a);c=Zn(c)||0,Lr(w)&&(Te=!!w.leading,De="maxWait"in w,I=De?li(Zn(w.maxWait)||0,c):I,ke="trailing"in w?!!w.trailing:ke);function et(Vr){var Ss=E,Ha=D;return E=D=r,Ee=Vr,j=u.apply(Ha,Ss),j}function pt(Vr){return Ee=Vr,K=zc(It,c),Te?et(Vr):j}function Lt(Vr){var Ss=Vr-ue,Ha=Vr-Ee,LM=c-Ss;return De?Gi(LM,I-Ha):LM}function ft(Vr){var Ss=Vr-ue,Ha=Vr-Ee;return ue===r||Ss>=c||Ss<0||De&&Ha>=I}function It(){var Vr=Ff();if(ft(Vr))return Ut(Vr);K=zc(It,Lt(Vr))}function Ut(Vr){return K=r,ke&&E?et(Vr):(E=D=r,j)}function Ln(){K!==r&&wA(K),Ee=0,E=ue=D=K=r}function rn(){return K===r?j:Ut(Ff())}function On(){var Vr=Ff(),Ss=ft(Vr);if(E=arguments,D=this,ue=Vr,Ss){if(K===r)return pt(ue);if(De)return wA(K),K=zc(It,c),et(ue)}return K===r&&(K=zc(It,c)),j}return On.cancel=Ln,On.flush=rn,On}var U4=Pt(function(u,c){return $S(u,1,c)}),k4=Pt(function(u,c,w){return $S(u,Zn(c)||0,w)});function H4(u){return Ba(u,P)}function Uf(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new Yn(a);var w=function(){var E=arguments,D=c?c.apply(this,E):E[0],I=w.cache;if(I.has(D))return I.get(D);var j=u.apply(this,E);return w.cache=I.set(D,j)||I,j};return w.cache=new(Uf.Cache||Na),w}Uf.Cache=Na;function kf(u){if(typeof u!="function")throw new Yn(a);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}function G4(u){return aM(2,u)}var V4=Lz(function(u,c){c=c.length==1&&St(c[0])?Sr(c[0],En(ct())):Sr(Mi(c,1),En(ct()));var w=c.length;return Pt(function(E){for(var D=-1,I=Gi(E.length,w);++D<I;)E[D]=c[D].call(this,E[D]);return Mn(u,this,E)})}),hy=Pt(function(u,c){var w=mo(c,_u(hy));return Ba(u,T,r,c,w)}),cM=Pt(function(u,c){var w=mo(c,_u(cM));return Ba(u,A,r,c,w)}),j4=za(function(u,c){return Ba(u,O,r,r,r,c)});function W4(u,c){if(typeof u!="function")throw new Yn(a);return c=c===r?c:Mt(c),Pt(u,c)}function J4(u,c){if(typeof u!="function")throw new Yn(a);return c=c==null?0:li(Mt(c),0),Pt(function(w){var E=w[c],D=wo(w,0,c);return E&&fo(D,E),Mn(u,this,D)})}function Y4(u,c,w){var E=!0,D=!0;if(typeof u!="function")throw new Yn(a);return Lr(w)&&(E="leading"in w?!!w.leading:E,D="trailing"in w?!!w.trailing:D),hM(u,c,{leading:E,maxWait:c,trailing:D})}function X4(u){return sM(u,1)}function q4(u,c){return hy(X0(c),u)}function Q4(){if(!arguments.length)return[];var u=arguments[0];return St(u)?u:[u]}function K4(u){return qn(u,m)}function Z4(u,c){return c=typeof c=="function"?c:r,qn(u,m,c)}function $4(u){return qn(u,p|m)}function eU(u,c){return c=typeof c=="function"?c:r,qn(u,p|m,c)}function tU(u,c){return c==null||ZS(u,c,pi(c))}function _s(u,c){return u===c||u!==u&&c!==c}var rU=Df(B0),iU=Df(function(u,c){return u>=c}),El=nA(function(){return arguments}())?nA:function(u){return Nr(u)&&lr.call(u,"callee")&&!jS.call(u,"callee")},St=xe.isArray,nU=MS?En(MS):dz;function un(u){return u!=null&&Hf(u.length)&&!Ua(u)}function Gr(u){return Nr(u)&&un(u)}function sU(u){return u===!0||u===!1||Nr(u)&&en(u)==fe}var bo=xB||by,aU=ES?En(ES):pz;function oU(u){return Nr(u)&&u.nodeType===1&&!Fc(u)}function lU(u){if(u==null)return!0;if(un(u)&&(St(u)||typeof u=="string"||typeof u.splice=="function"||bo(u)||Su(u)||El(u)))return!u.length;var c=Vi(u);if(c==pe||c==Ce)return!u.size;if(Bc(u))return!U0(u).length;for(var w in u)if(lr.call(u,w))return!1;return!0}function uU(u,c){return Rc(u,c)}function hU(u,c,w){w=typeof w=="function"?w:r;var E=w?w(u,c):r;return E===r?Rc(u,c,r,w):!!E}function cy(u){if(!Nr(u))return!1;var c=en(u);return c==ie||c==Q||typeof u.message=="string"&&typeof u.name=="string"&&!Fc(u)}function cU(u){return typeof u=="number"&&JS(u)}function Ua(u){if(!Lr(u))return!1;var c=en(u);return c==oe||c==me||c==be||c==de}function dM(u){return typeof u=="number"&&u==Mt(u)}function Hf(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=$}function Lr(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}function Nr(u){return u!=null&&typeof u=="object"}var pM=TS?En(TS):mz;function dU(u,c){return u===c||F0(u,c,ty(c))}function pU(u,c,w){return w=typeof w=="function"?w:r,F0(u,c,ty(c),w)}function fU(u){return fM(u)&&u!=+u}function mU(u){if(Zz(u))throw new bt(s);return sA(u)}function gU(u){return u===null}function vU(u){return u==null}function fM(u){return typeof u=="number"||Nr(u)&&en(u)==we}function Fc(u){if(!Nr(u)||en(u)!=F)return!1;var c=ff(u);if(c===null)return!0;var w=lr.call(c,"constructor")&&c.constructor;return typeof w=="function"&&w instanceof w&&hf.call(w)==pB}var dy=CS?En(CS):gz;function yU(u){return dM(u)&&u>=-$&&u<=$}var mM=LS?En(LS):vz;function Gf(u){return typeof u=="string"||!St(u)&&Nr(u)&&en(u)==Re}function Cn(u){return typeof u=="symbol"||Nr(u)&&en(u)==ze}var Su=OS?En(OS):yz;function xU(u){return u===r}function wU(u){return Nr(u)&&Vi(u)==je}function bU(u){return Nr(u)&&en(u)==Ye}var _U=Df(k0),SU=Df(function(u,c){return u<=c});function gM(u){if(!u)return[];if(un(u))return Gf(u)?ws(u):ln(u);if(Mc&&u[Mc])return tB(u[Mc]());var c=Vi(u),w=c==pe?T0:c==Ce?of:Au;return w(u)}function ka(u){if(!u)return u===0?u:0;if(u=Zn(u),u===W||u===-W){var c=u<0?-1:1;return c*ae}return u===u?u:0}function Mt(u){var c=ka(u),w=c%1;return c===c?w?c-w:c:0}function vM(u){return u?_l(Mt(u),0,H):0}function Zn(u){if(typeof u=="number")return u;if(Cn(u))return te;if(Lr(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=Lr(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=BS(u);var w=Rt.test(u);return w||xs.test(u)?FI(u.slice(2),w?2:8):At.test(u)?te:+u}function yM(u){return Zs(u,hn(u))}function AU(u){return u?_l(Mt(u),-$,$):u===0?u:0}function tr(u){return u==null?"":Tn(u)}var MU=wu(function(u,c){if(Bc(c)||un(c)){Zs(c,pi(c),u);return}for(var w in c)lr.call(c,w)&&Oc(u,w,c[w])}),xM=wu(function(u,c){Zs(c,hn(c),u)}),Vf=wu(function(u,c,w,E){Zs(c,hn(c),u,E)}),EU=wu(function(u,c,w,E){Zs(c,pi(c),u,E)}),TU=za(R0);function CU(u,c){var w=xu(u);return c==null?w:KS(w,c)}var LU=Pt(function(u,c){u=dr(u);var w=-1,E=c.length,D=E>2?c[2]:r;for(D&&tn(c[0],c[1],D)&&(E=1);++w<E;)for(var I=c[w],j=hn(I),K=-1,ue=j.length;++K<ue;){var Ee=j[K],Te=u[Ee];(Te===r||_s(Te,gu[Ee])&&!lr.call(u,Ee))&&(u[Ee]=I[Ee])}return u}),OU=Pt(function(u){return u.push(r,BA),Mn(wM,r,u)});function PU(u,c){return DS(u,ct(c,3),Ks)}function DU(u,c){return DS(u,ct(c,3),I0)}function RU(u,c){return u==null?u:N0(u,ct(c,3),hn)}function NU(u,c){return u==null?u:rA(u,ct(c,3),hn)}function IU(u,c){return u&&Ks(u,ct(c,3))}function BU(u,c){return u&&I0(u,ct(c,3))}function zU(u){return u==null?[]:Af(u,pi(u))}function FU(u){return u==null?[]:Af(u,hn(u))}function py(u,c,w){var E=u==null?r:Sl(u,c);return E===r?w:E}function UU(u,c){return u!=null&&UA(u,c,lz)}function fy(u,c){return u!=null&&UA(u,c,uz)}var kU=PA(function(u,c,w){c!=null&&typeof c.toString!="function"&&(c=cf.call(c)),u[c]=w},gy(cn)),HU=PA(function(u,c,w){c!=null&&typeof c.toString!="function"&&(c=cf.call(c)),lr.call(u,c)?u[c].push(w):u[c]=[w]},ct),GU=Pt(Dc);function pi(u){return un(u)?qS(u):U0(u)}function hn(u){return un(u)?qS(u,!0):xz(u)}function VU(u,c){var w={};return c=ct(c,3),Ks(u,function(E,D,I){Ia(w,c(E,D,I),E)}),w}function jU(u,c){var w={};return c=ct(c,3),Ks(u,function(E,D,I){Ia(w,D,c(E,D,I))}),w}var WU=wu(function(u,c,w){Mf(u,c,w)}),wM=wu(function(u,c,w,E){Mf(u,c,w,E)}),JU=za(function(u,c){var w={};if(u==null)return w;var E=!1;c=Sr(c,function(I){return I=xo(I,u),E||(E=I.length>1),I}),Zs(u,$0(u),w),E&&(w=qn(w,p|f|m,kz));for(var D=c.length;D--;)W0(w,c[D]);return w});function YU(u,c){return bM(u,kf(ct(c)))}var XU=za(function(u,c){return u==null?{}:bz(u,c)});function bM(u,c){if(u==null)return{};var w=Sr($0(u),function(E){return[E]});return c=ct(c),dA(u,w,function(E,D){return c(E,D[0])})}function qU(u,c,w){c=xo(c,u);var E=-1,D=c.length;for(D||(D=1,u=r);++E<D;){var I=u==null?r:u[$s(c[E])];I===r&&(E=D,I=w),u=Ua(I)?I.call(u):I}return u}function QU(u,c,w){return u==null?u:Nc(u,c,w)}function KU(u,c,w,E){return E=typeof E=="function"?E:r,u==null?u:Nc(u,c,w,E)}var _M=NA(pi),SM=NA(hn);function ZU(u,c,w){var E=St(u),D=E||bo(u)||Su(u);if(c=ct(c,4),w==null){var I=u&&u.constructor;D?w=E?new I:[]:Lr(u)?w=Ua(I)?xu(ff(u)):{}:w={}}return(D?Jn:Ks)(u,function(j,K,ue){return c(w,j,K,ue)}),w}function $U(u,c){return u==null?!0:W0(u,c)}function ek(u,c,w){return u==null?u:vA(u,c,X0(w))}function tk(u,c,w,E){return E=typeof E=="function"?E:r,u==null?u:vA(u,c,X0(w),E)}function Au(u){return u==null?[]:E0(u,pi(u))}function rk(u){return u==null?[]:E0(u,hn(u))}function ik(u,c,w){return w===r&&(w=c,c=r),w!==r&&(w=Zn(w),w=w===w?w:0),c!==r&&(c=Zn(c),c=c===c?c:0),_l(Zn(u),c,w)}function nk(u,c,w){return c=ka(c),w===r?(w=c,c=0):w=ka(w),u=Zn(u),hz(u,c,w)}function sk(u,c,w){if(w&&typeof w!="boolean"&&tn(u,c,w)&&(c=w=r),w===r&&(typeof c=="boolean"?(w=c,c=r):typeof u=="boolean"&&(w=u,u=r)),u===r&&c===r?(u=0,c=1):(u=ka(u),c===r?(c=u,u=0):c=ka(c)),u>c){var E=u;u=c,c=E}if(w||u%1||c%1){var D=YS();return Gi(u+D*(c-u+zI("1e-"+((D+"").length-1))),c)}return G0(u,c)}var ak=bu(function(u,c,w){return c=c.toLowerCase(),u+(w?AM(c):c)});function AM(u){return my(tr(u).toLowerCase())}function MM(u){return u=tr(u),u&&u.replace(Qs,QI).replace(TI,"")}function ok(u,c,w){u=tr(u),c=Tn(c);var E=u.length;w=w===r?E:_l(Mt(w),0,E);var D=w;return w-=c.length,w>=0&&u.slice(w,D)==c}function lk(u){return u=tr(u),u&&Kr.test(u)?u.replace(Cr,KI):u}function uk(u){return u=tr(u),u&&er.test(u)?u.replace(Ht,"\\$&"):u}var hk=bu(function(u,c,w){return u+(w?"-":"")+c.toLowerCase()}),ck=bu(function(u,c,w){return u+(w?" ":"")+c.toLowerCase()}),dk=CA("toLowerCase");function pk(u,c,w){u=tr(u),c=Mt(c);var E=c?fu(u):0;if(!c||E>=c)return u;var D=(c-E)/2;return Pf(yf(D),w)+u+Pf(vf(D),w)}function fk(u,c,w){u=tr(u),c=Mt(c);var E=c?fu(u):0;return c&&E<c?u+Pf(c-E,w):u}function mk(u,c,w){u=tr(u),c=Mt(c);var E=c?fu(u):0;return c&&E<c?Pf(c-E,w)+u:u}function gk(u,c,w){return w||c==null?c=0:c&&(c=+c),SB(tr(u).replace(z,""),c||0)}function vk(u,c,w){return(w?tn(u,c,w):c===r)?c=1:c=Mt(c),V0(tr(u),c)}function yk(){var u=arguments,c=tr(u[0]);return u.length<3?c:c.replace(u[1],u[2])}var xk=bu(function(u,c,w){return u+(w?"_":"")+c.toLowerCase()});function wk(u,c,w){return w&&typeof w!="number"&&tn(u,c,w)&&(c=w=r),w=w===r?H:w>>>0,w?(u=tr(u),u&&(typeof c=="string"||c!=null&&!dy(c))&&(c=Tn(c),!c&&pu(u))?wo(ws(u),0,w):u.split(c,w)):[]}var bk=bu(function(u,c,w){return u+(w?" ":"")+my(c)});function _k(u,c,w){return u=tr(u),w=w==null?0:_l(Mt(w),0,u.length),c=Tn(c),u.slice(w,w+c.length)==c}function Sk(u,c,w){var E=R.templateSettings;w&&tn(u,c,w)&&(c=r),u=tr(u),c=Vf({},c,E,IA);var D=Vf({},c.imports,E.imports,IA),I=pi(D),j=E0(D,I),K,ue,Ee=0,Te=c.interpolate||Hi,De="__p += '",ke=C0((c.escape||Hi).source+"|"+Te.source+"|"+(Te===wt?Ct:Hi).source+"|"+(c.evaluate||Hi).source+"|$","g"),et="//# sourceURL="+(lr.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++DI+"]")+`
`;u.replace(ke,function(ft,It,Ut,Ln,rn,On){return Ut||(Ut=Ln),De+=u.slice(Ee,On).replace(Da,ZI),It&&(K=!0,De+=`' +
__e(`+It+`) +
'`),rn&&(ue=!0,De+=`';
`+rn+`;
__p += '`),Ut&&(De+=`' +
((__t = (`+Ut+`)) == null ? '' : __t) +
'`),Ee=On+ft.length,ft}),De+=`';
`;var pt=lr.call(c,"variable")&&c.variable;if(!pt)De=`with (obj) {
`+De+`
}
`;else if(qe.test(pt))throw new bt(o);De=(ue?De.replace(Fi,""):De).replace(qs,"$1").replace(Ui,"$1;"),De="function("+(pt||"obj")+`) {
`+(pt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var Lt=TM(function(){return Kt(I,et+"return "+De).apply(r,j)});if(Lt.source=De,cy(Lt))throw Lt;return Lt}function Ak(u){return tr(u).toLowerCase()}function Mk(u){return tr(u).toUpperCase()}function Ek(u,c,w){if(u=tr(u),u&&(w||c===r))return BS(u);if(!u||!(c=Tn(c)))return u;var E=ws(u),D=ws(c),I=zS(E,D),j=FS(E,D)+1;return wo(E,I,j).join("")}function Tk(u,c,w){if(u=tr(u),u&&(w||c===r))return u.slice(0,kS(u)+1);if(!u||!(c=Tn(c)))return u;var E=ws(u),D=FS(E,ws(c))+1;return wo(E,0,D).join("")}function Ck(u,c,w){if(u=tr(u),u&&(w||c===r))return u.replace(z,"");if(!u||!(c=Tn(c)))return u;var E=ws(u),D=zS(E,ws(c));return wo(E,D).join("")}function Lk(u,c){var w=C,E=N;if(Lr(c)){var D="separator"in c?c.separator:D;w="length"in c?Mt(c.length):w,E="omission"in c?Tn(c.omission):E}u=tr(u);var I=u.length;if(pu(u)){var j=ws(u);I=j.length}if(w>=I)return u;var K=w-fu(E);if(K<1)return E;var ue=j?wo(j,0,K).join(""):u.slice(0,K);if(D===r)return ue+E;if(j&&(K+=ue.length-K),dy(D)){if(u.slice(K).search(D)){var Ee,Te=ue;for(D.global||(D=C0(D.source,tr(or.exec(D))+"g")),D.lastIndex=0;Ee=D.exec(Te);)var De=Ee.index;ue=ue.slice(0,De===r?K:De)}}else if(u.indexOf(Tn(D),K)!=K){var ke=ue.lastIndexOf(D);ke>-1&&(ue=ue.slice(0,ke))}return ue+E}function Ok(u){return u=tr(u),u&&ki.test(u)?u.replace(ys,sB):u}var Pk=bu(function(u,c,w){return u+(w?" ":"")+c.toUpperCase()}),my=CA("toUpperCase");function EM(u,c,w){return u=tr(u),c=w?r:c,c===r?eB(u)?lB(u):WI(u):u.match(c)||[]}var TM=Pt(function(u,c){try{return Mn(u,r,c)}catch(w){return cy(w)?w:new bt(w)}}),Dk=za(function(u,c){return Jn(c,function(w){w=$s(w),Ia(u,w,uy(u[w],u))}),u});function Rk(u){var c=u==null?0:u.length,w=ct();return u=c?Sr(u,function(E){if(typeof E[1]!="function")throw new Yn(a);return[w(E[0]),E[1]]}):[],Pt(function(E){for(var D=-1;++D<c;){var I=u[D];if(Mn(I[0],this,E))return Mn(I[1],this,E)}})}function Nk(u){return sz(qn(u,p))}function gy(u){return function(){return u}}function Ik(u,c){return u==null||u!==u?c:u}var Bk=OA(),zk=OA(!0);function cn(u){return u}function vy(u){return aA(typeof u=="function"?u:qn(u,p))}function Fk(u){return lA(qn(u,p))}function Uk(u,c){return uA(u,qn(c,p))}var kk=Pt(function(u,c){return function(w){return Dc(w,u,c)}}),Hk=Pt(function(u,c){return function(w){return Dc(u,w,c)}});function yy(u,c,w){var E=pi(c),D=Af(c,E);w==null&&!(Lr(c)&&(D.length||!E.length))&&(w=c,c=u,u=this,D=Af(c,pi(c)));var I=!(Lr(w)&&"chain"in w)||!!w.chain,j=Ua(u);return Jn(D,function(K){var ue=c[K];u[K]=ue,j&&(u.prototype[K]=function(){var Ee=this.__chain__;if(I||Ee){var Te=u(this.__wrapped__),De=Te.__actions__=ln(this.__actions__);return De.push({func:ue,args:arguments,thisArg:u}),Te.__chain__=Ee,Te}return ue.apply(u,fo([this.value()],arguments))})}),u}function Gk(){return Ai._===this&&(Ai._=fB),this}function xy(){}function Vk(u){return u=Mt(u),Pt(function(c){return hA(c,u)})}var jk=Q0(Sr),Wk=Q0(PS),Jk=Q0(b0);function CM(u){return iy(u)?_0($s(u)):_z(u)}function Yk(u){return function(c){return u==null?r:Sl(u,c)}}var Xk=DA(),qk=DA(!0);function wy(){return[]}function by(){return!1}function Qk(){return{}}function Kk(){return""}function Zk(){return!0}function $k(u,c){if(u=Mt(u),u<1||u>$)return[];var w=H,E=Gi(u,H);c=ct(c),u-=H;for(var D=M0(E,c);++w<u;)c(w);return D}function eH(u){return St(u)?Sr(u,$s):Cn(u)?[u]:ln(XA(tr(u)))}function tH(u){var c=++dB;return tr(u)+c}var rH=Of(function(u,c){return u+c},0),iH=K0("ceil"),nH=Of(function(u,c){return u/c},1),sH=K0("floor");function aH(u){return u&&u.length?Sf(u,cn,B0):r}function oH(u,c){return u&&u.length?Sf(u,ct(c,2),B0):r}function lH(u){return NS(u,cn)}function uH(u,c){return NS(u,ct(c,2))}function hH(u){return u&&u.length?Sf(u,cn,k0):r}function cH(u,c){return u&&u.length?Sf(u,ct(c,2),k0):r}var dH=Of(function(u,c){return u*c},1),pH=K0("round"),fH=Of(function(u,c){return u-c},0);function mH(u){return u&&u.length?A0(u,cn):0}function gH(u,c){return u&&u.length?A0(u,ct(c,2)):0}return R.after=F4,R.ary=sM,R.assign=MU,R.assignIn=xM,R.assignInWith=Vf,R.assignWith=EU,R.at=TU,R.before=aM,R.bind=uy,R.bindAll=Dk,R.bindKey=oM,R.castArray=Q4,R.chain=rM,R.chunk=sF,R.compact=aF,R.concat=oF,R.cond=Rk,R.conforms=Nk,R.constant=gy,R.countBy=m4,R.create=CU,R.curry=lM,R.curryRight=uM,R.debounce=hM,R.defaults=LU,R.defaultsDeep=OU,R.defer=U4,R.delay=k4,R.difference=lF,R.differenceBy=uF,R.differenceWith=hF,R.drop=cF,R.dropRight=dF,R.dropRightWhile=pF,R.dropWhile=fF,R.fill=mF,R.filter=v4,R.flatMap=w4,R.flatMapDeep=b4,R.flatMapDepth=_4,R.flatten=ZA,R.flattenDeep=gF,R.flattenDepth=vF,R.flip=H4,R.flow=Bk,R.flowRight=zk,R.fromPairs=yF,R.functions=zU,R.functionsIn=FU,R.groupBy=S4,R.initial=wF,R.intersection=bF,R.intersectionBy=_F,R.intersectionWith=SF,R.invert=kU,R.invertBy=HU,R.invokeMap=M4,R.iteratee=vy,R.keyBy=E4,R.keys=pi,R.keysIn=hn,R.map=zf,R.mapKeys=VU,R.mapValues=jU,R.matches=Fk,R.matchesProperty=Uk,R.memoize=Uf,R.merge=WU,R.mergeWith=wM,R.method=kk,R.methodOf=Hk,R.mixin=yy,R.negate=kf,R.nthArg=Vk,R.omit=JU,R.omitBy=YU,R.once=G4,R.orderBy=T4,R.over=jk,R.overArgs=V4,R.overEvery=Wk,R.overSome=Jk,R.partial=hy,R.partialRight=cM,R.partition=C4,R.pick=XU,R.pickBy=bM,R.property=CM,R.propertyOf=Yk,R.pull=TF,R.pullAll=eM,R.pullAllBy=CF,R.pullAllWith=LF,R.pullAt=OF,R.range=Xk,R.rangeRight=qk,R.rearg=j4,R.reject=P4,R.remove=PF,R.rest=W4,R.reverse=oy,R.sampleSize=R4,R.set=QU,R.setWith=KU,R.shuffle=N4,R.slice=DF,R.sortBy=z4,R.sortedUniq=UF,R.sortedUniqBy=kF,R.split=wk,R.spread=J4,R.tail=HF,R.take=GF,R.takeRight=VF,R.takeRightWhile=jF,R.takeWhile=WF,R.tap=a4,R.throttle=Y4,R.thru=Bf,R.toArray=gM,R.toPairs=_M,R.toPairsIn=SM,R.toPath=eH,R.toPlainObject=yM,R.transform=ZU,R.unary=X4,R.union=JF,R.unionBy=YF,R.unionWith=XF,R.uniq=qF,R.uniqBy=QF,R.uniqWith=KF,R.unset=$U,R.unzip=ly,R.unzipWith=tM,R.update=ek,R.updateWith=tk,R.values=Au,R.valuesIn=rk,R.without=ZF,R.words=EM,R.wrap=q4,R.xor=$F,R.xorBy=e4,R.xorWith=t4,R.zip=r4,R.zipObject=i4,R.zipObjectDeep=n4,R.zipWith=s4,R.entries=_M,R.entriesIn=SM,R.extend=xM,R.extendWith=Vf,yy(R,R),R.add=rH,R.attempt=TM,R.camelCase=ak,R.capitalize=AM,R.ceil=iH,R.clamp=ik,R.clone=K4,R.cloneDeep=$4,R.cloneDeepWith=eU,R.cloneWith=Z4,R.conformsTo=tU,R.deburr=MM,R.defaultTo=Ik,R.divide=nH,R.endsWith=ok,R.eq=_s,R.escape=lk,R.escapeRegExp=uk,R.every=g4,R.find=y4,R.findIndex=QA,R.findKey=PU,R.findLast=x4,R.findLastIndex=KA,R.findLastKey=DU,R.floor=sH,R.forEach=iM,R.forEachRight=nM,R.forIn=RU,R.forInRight=NU,R.forOwn=IU,R.forOwnRight=BU,R.get=py,R.gt=rU,R.gte=iU,R.has=UU,R.hasIn=fy,R.head=$A,R.identity=cn,R.includes=A4,R.indexOf=xF,R.inRange=nk,R.invoke=GU,R.isArguments=El,R.isArray=St,R.isArrayBuffer=nU,R.isArrayLike=un,R.isArrayLikeObject=Gr,R.isBoolean=sU,R.isBuffer=bo,R.isDate=aU,R.isElement=oU,R.isEmpty=lU,R.isEqual=uU,R.isEqualWith=hU,R.isError=cy,R.isFinite=cU,R.isFunction=Ua,R.isInteger=dM,R.isLength=Hf,R.isMap=pM,R.isMatch=dU,R.isMatchWith=pU,R.isNaN=fU,R.isNative=mU,R.isNil=vU,R.isNull=gU,R.isNumber=fM,R.isObject=Lr,R.isObjectLike=Nr,R.isPlainObject=Fc,R.isRegExp=dy,R.isSafeInteger=yU,R.isSet=mM,R.isString=Gf,R.isSymbol=Cn,R.isTypedArray=Su,R.isUndefined=xU,R.isWeakMap=wU,R.isWeakSet=bU,R.join=AF,R.kebabCase=hk,R.last=Kn,R.lastIndexOf=MF,R.lowerCase=ck,R.lowerFirst=dk,R.lt=_U,R.lte=SU,R.max=aH,R.maxBy=oH,R.mean=lH,R.meanBy=uH,R.min=hH,R.minBy=cH,R.stubArray=wy,R.stubFalse=by,R.stubObject=Qk,R.stubString=Kk,R.stubTrue=Zk,R.multiply=dH,R.nth=EF,R.noConflict=Gk,R.noop=xy,R.now=Ff,R.pad=pk,R.padEnd=fk,R.padStart=mk,R.parseInt=gk,R.random=sk,R.reduce=L4,R.reduceRight=O4,R.repeat=vk,R.replace=yk,R.result=qU,R.round=pH,R.runInContext=ne,R.sample=D4,R.size=I4,R.snakeCase=xk,R.some=B4,R.sortedIndex=RF,R.sortedIndexBy=NF,R.sortedIndexOf=IF,R.sortedLastIndex=BF,R.sortedLastIndexBy=zF,R.sortedLastIndexOf=FF,R.startCase=bk,R.startsWith=_k,R.subtract=fH,R.sum=mH,R.sumBy=gH,R.template=Sk,R.times=$k,R.toFinite=ka,R.toInteger=Mt,R.toLength=vM,R.toLower=Ak,R.toNumber=Zn,R.toSafeInteger=AU,R.toString=tr,R.toUpper=Mk,R.trim=Ek,R.trimEnd=Tk,R.trimStart=Ck,R.truncate=Lk,R.unescape=Ok,R.uniqueId=tH,R.upperCase=Pk,R.upperFirst=my,R.each=iM,R.eachRight=nM,R.first=$A,yy(R,function(){var u={};return Ks(R,function(c,w){lr.call(R.prototype,w)||(u[w]=c)}),u}(),{chain:!1}),R.VERSION=i,Jn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){R[u].placeholder=R}),Jn(["drop","take"],function(u,c){zt.prototype[u]=function(w){w=w===r?1:li(Mt(w),0);var E=this.__filtered__&&!c?new zt(this):this.clone();return E.__filtered__?E.__takeCount__=Gi(w,E.__takeCount__):E.__views__.push({size:Gi(w,H),type:u+(E.__dir__<0?"Right":"")}),E},zt.prototype[u+"Right"]=function(w){return this.reverse()[u](w).reverse()}}),Jn(["filter","map","takeWhile"],function(u,c){var w=c+1,E=w==k||w==Z;zt.prototype[u]=function(D){var I=this.clone();return I.__iteratees__.push({iteratee:ct(D,3),type:w}),I.__filtered__=I.__filtered__||E,I}}),Jn(["head","last"],function(u,c){var w="take"+(c?"Right":"");zt.prototype[u]=function(){return this[w](1).value()[0]}}),Jn(["initial","tail"],function(u,c){var w="drop"+(c?"":"Right");zt.prototype[u]=function(){return this.__filtered__?new zt(this):this[w](1)}}),zt.prototype.compact=function(){return this.filter(cn)},zt.prototype.find=function(u){return this.filter(u).head()},zt.prototype.findLast=function(u){return this.reverse().find(u)},zt.prototype.invokeMap=Pt(function(u,c){return typeof u=="function"?new zt(this):this.map(function(w){return Dc(w,u,c)})}),zt.prototype.reject=function(u){return this.filter(kf(ct(u)))},zt.prototype.slice=function(u,c){u=Mt(u);var w=this;return w.__filtered__&&(u>0||c<0)?new zt(w):(u<0?w=w.takeRight(-u):u&&(w=w.drop(u)),c!==r&&(c=Mt(c),w=c<0?w.dropRight(-c):w.take(c-u)),w)},zt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},zt.prototype.toArray=function(){return this.take(H)},Ks(zt.prototype,function(u,c){var w=/^(?:filter|find|map|reject)|While$/.test(c),E=/^(?:head|last)$/.test(c),D=R[E?"take"+(c=="last"?"Right":""):c],I=E||/^find/.test(c);!D||(R.prototype[c]=function(){var j=this.__wrapped__,K=E?[1]:arguments,ue=j instanceof zt,Ee=K[0],Te=ue||St(j),De=function(It){var Ut=D.apply(R,fo([It],K));return E&&ke?Ut[0]:Ut};Te&&w&&typeof Ee=="function"&&Ee.length!=1&&(ue=Te=!1);var ke=this.__chain__,et=!!this.__actions__.length,pt=I&&!ke,Lt=ue&&!et;if(!I&&Te){j=Lt?j:new zt(this);var ft=u.apply(j,K);return ft.__actions__.push({func:Bf,args:[De],thisArg:r}),new Xn(ft,ke)}return pt&&Lt?u.apply(this,K):(ft=this.thru(De),pt?E?ft.value()[0]:ft.value():ft)})}),Jn(["pop","push","shift","sort","splice","unshift"],function(u){var c=lf[u],w=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);R.prototype[u]=function(){var D=arguments;if(E&&!this.__chain__){var I=this.value();return c.apply(St(I)?I:[],D)}return this[w](function(j){return c.apply(St(j)?j:[],D)})}}),Ks(zt.prototype,function(u,c){var w=R[c];if(w){var E=w.name+"";lr.call(yu,E)||(yu[E]=[]),yu[E].push({name:c,func:w})}}),yu[Lf(r,v).name]=[{name:"wrapper",func:r}],zt.prototype.clone=OB,zt.prototype.reverse=PB,zt.prototype.value=DB,R.prototype.at=o4,R.prototype.chain=l4,R.prototype.commit=u4,R.prototype.next=h4,R.prototype.plant=d4,R.prototype.reverse=p4,R.prototype.toJSON=R.prototype.valueOf=R.prototype.value=f4,R.prototype.first=R.prototype.head,Mc&&(R.prototype[Mc]=c4),R},mu=uB();yl?((yl.exports=mu)._=mu,v0._=mu):Ai._=mu}).call(Uc)})(iT,iT.exports);var wV=Object.create,Fp=Object.defineProperty,bV=Object.defineProperties,_V=Object.getOwnPropertyDescriptor,SV=Object.getOwnPropertyDescriptors,AV=Object.getOwnPropertyNames,Yg=Object.getOwnPropertySymbols,MV=Object.getPrototypeOf,Yb=Object.prototype.hasOwnProperty,lP=Object.prototype.propertyIsEnumerable,nT=(e,t,r)=>t in e?Fp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Le=(e,t)=>{for(var r in t||(t={}))Yb.call(t,r)&&nT(e,r,t[r]);if(Yg)for(var r of Yg(t))lP.call(t,r)&&nT(e,r,t[r]);return e},tt=(e,t)=>bV(e,SV(t)),uP=e=>Fp(e,"__esModule",{value:!0}),EV=(e,t)=>{var r={};for(var i in e)Yb.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&Yg)for(var i of Yg(e))t.indexOf(i)<0&&lP.call(e,i)&&(r[i]=e[i]);return r},hP=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),TV=(e,t)=>{uP(e);for(var r in t)Fp(e,r,{get:t[r],enumerable:!0})},CV=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of AV(t))!Yb.call(e,i)&&i!=="default"&&Fp(e,i,{get:()=>t[i],enumerable:!(r=_V(t,i))||r.enumerable});return e},cP=e=>CV(uP(Fp(e!=null?wV(MV(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),LV=hP(e=>{e.byteLength=l,e.toByteArray=d,e.fromByteArray=m;var t=[],r=[],i=typeof Uint8Array!="undefined"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,a=n.length;s<a;++s)t[s]=n[s],r[n.charCodeAt(s)]=s;var s,a;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=y.indexOf("=");x===-1&&(x=b);var v=x===b?0:4-x%4;return[x,v]}function l(y){var b=o(y),x=b[0],v=b[1];return(x+v)*3/4-v}function h(y,b,x){return(b+x)*3/4-x}function d(y){var b,x=o(y),v=x[0],g=x[1],_=new i(h(y,v,g)),S=0,T=g>0?v-4:v,A;for(A=0;A<T;A+=4)b=r[y.charCodeAt(A)]<<18|r[y.charCodeAt(A+1)]<<12|r[y.charCodeAt(A+2)]<<6|r[y.charCodeAt(A+3)],_[S++]=b>>16&255,_[S++]=b>>8&255,_[S++]=b&255;return g===2&&(b=r[y.charCodeAt(A)]<<2|r[y.charCodeAt(A+1)]>>4,_[S++]=b&255),g===1&&(b=r[y.charCodeAt(A)]<<10|r[y.charCodeAt(A+1)]<<4|r[y.charCodeAt(A+2)]>>2,_[S++]=b>>8&255,_[S++]=b&255),_}function p(y){return t[y>>18&63]+t[y>>12&63]+t[y>>6&63]+t[y&63]}function f(y,b,x){for(var v,g=[],_=b;_<x;_+=3)v=(y[_]<<16&16711680)+(y[_+1]<<8&65280)+(y[_+2]&255),g.push(p(v));return g.join("")}function m(y){for(var b,x=y.length,v=x%3,g=[],_=16383,S=0,T=x-v;S<T;S+=_)g.push(f(y,S,S+_>T?T:S+_));return v===1?(b=y[x-1],g.push(t[b>>2]+t[b<<4&63]+"==")):v===2&&(b=(y[x-2]<<8)+y[x-1],g.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),g.join("")}}),OV=hP((e,t)=>{(function(r,i){typeof e=="object"&&typeof t!="undefined"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis!="undefined"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,s,a,o){if(n=n===void 0||n,s=s===void 0||s,o=1e-64/(a=a||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,h,d,p,f,m,y,b,x,v,g,_,S=i[0].length,T=i.length;if(T<S)throw new TypeError("Invalid matrix: m < n");for(var A=[],M=[],O=[],P=n==="f"?T:S,C=v=y=0;C<T;C++)M[C]=new Array(P).fill(0);for(C=0;C<S;C++)O[C]=new Array(S).fill(0);var N,U=new Array(S).fill(0);for(C=0;C<T;C++)for(l=0;l<S;l++)M[C][l]=i[C][l];for(C=0;C<S;C++){for(A[C]=y,x=0,d=C+1,l=C;l<T;l++)x+=Math.pow(M[l][C],2);if(x<o)y=0;else for(b=(m=M[C][C])*(y=m<0?Math.sqrt(x):-Math.sqrt(x))-x,M[C][C]=m-y,l=d;l<S;l++){for(x=0,h=C;h<T;h++)x+=M[h][C]*M[h][l];for(m=x/b,h=C;h<T;h++)M[h][l]=M[h][l]+m*M[h][C]}for(U[C]=y,x=0,l=d;l<S;l++)x+=Math.pow(M[C][l],2);if(x<o)y=0;else{for(b=(m=M[C][C+1])*(y=m<0?Math.sqrt(x):-Math.sqrt(x))-x,M[C][C+1]=m-y,l=d;l<S;l++)A[l]=M[C][l]/b;for(l=d;l<T;l++){for(x=0,h=d;h<S;h++)x+=M[l][h]*M[C][h];for(h=d;h<S;h++)M[l][h]=M[l][h]+x*A[h]}}v<(g=Math.abs(U[C])+Math.abs(A[C]))&&(v=g)}if(s)for(C=S-1;0<=C;C--){if(y!==0){for(b=M[C][C+1]*y,l=d;l<S;l++)O[l][C]=M[C][l]/b;for(l=d;l<S;l++){for(x=0,h=d;h<S;h++)x+=M[C][h]*O[h][l];for(h=d;h<S;h++)O[h][l]=O[h][l]+x*O[h][C]}}for(l=d;l<S;l++)O[C][l]=0,O[l][C]=0;O[C][C]=1,y=A[C],d=C}if(n){if(n==="f")for(C=S;C<T;C++){for(l=S;l<T;l++)M[C][l]=0;M[C][C]=1}for(C=S-1;0<=C;C--){for(d=C+1,y=U[C],l=d;l<P;l++)M[C][l]=0;if(y!==0){for(b=M[C][C]*y,l=d;l<P;l++){for(x=0,h=d;h<T;h++)x+=M[h][C]*M[h][l];for(m=x/b,h=C;h<T;h++)M[h][l]=M[h][l]+m*M[h][C]}for(l=C;l<T;l++)M[l][C]=M[l][C]/y}else for(l=C;l<T;l++)M[l][C]=0;M[C][C]=M[C][C]+1}}for(a*=v,h=S-1;0<=h;h--)for(var V=0;V<50;V++){for(N=!1,d=h;0<=d;d--){if(Math.abs(A[d])<=a){N=!0;break}if(Math.abs(U[d-1])<=a)break}if(!N){for(f=0,p=d-(x=1),C=d;C<h+1&&(m=x*A[C],A[C]=f*A[C],!(Math.abs(m)<=a));C++)if(y=U[C],U[C]=Math.sqrt(m*m+y*y),f=y/(b=U[C]),x=-m/b,n)for(l=0;l<T;l++)g=M[l][p],_=M[l][C],M[l][p]=g*f+_*x,M[l][C]=-g*x+_*f}if(_=U[h],d===h){if(_<0&&(U[h]=-_,s))for(l=0;l<S;l++)O[l][h]=-O[l][h];break}for(v=U[d],m=(((g=U[h-1])-_)*(g+_)+((y=A[h-1])-(b=A[h]))*(y+b))/(2*b*g),y=Math.sqrt(m*m+1),m=((v-_)*(v+_)+b*(g/(m<0?m-y:m+y)-b))/v,C=d+(x=f=1);C<h+1;C++){if(y=A[C],g=U[C],b=x*y,y*=f,_=Math.sqrt(m*m+b*b),m=v*(f=m/(A[C-1]=_))+y*(x=b/_),y=-v*x+y*f,b=g*x,g*=f,s)for(l=0;l<S;l++)v=O[l][C-1],_=O[l][C],O[l][C-1]=v*f+_*x,O[l][C]=-v*x+_*f;if(_=Math.sqrt(m*m+b*b),m=(f=m/(U[C-1]=_))*y+(x=b/_)*g,v=-x*y+f*g,n)for(l=0;l<T;l++)g=M[l][C-1],_=M[l][C],M[l][C-1]=g*f+_*x,M[l][C]=-g*x+_*f}A[d]=0,A[h]=m,U[h]=v}for(C=0;C<S;C++)U[C]<a&&(U[C]=0);return{u:M,q:U,v:O}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),dP="131",$n={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},PV=0,sT=1,DV=2,pP=1,fP=2,_d=3,sl=0,Er=1,xi=2,mP=1,Ri=0,Ph=1,aT=2,oT=3,lT=4,RV=5,eh=100,NV=101,IV=102,uT=103,hT=104,BV=200,zV=201,FV=202,UV=203,gP=204,vP=205,kV=206,HV=207,GV=208,VV=209,jV=210,WV=0,JV=1,YV=2,q1=3,XV=4,qV=5,QV=6,KV=7,Fv=0,ZV=1,$V=2,Vl=0,e6=1,t6=2,r6=3,i6=4,n6=5,yP=300,Up=301,kp=302,Q1=303,K1=304,Hp=306,Uv=307,Wh=1e3,yi=1001,Xg=1002,qr=1003,Z1=1004,$1=1005,ar=1006,xP=1007,nu=1008,_i=1009,s6=1010,a6=1011,qg=1012,o6=1013,Hd=1014,Nl=1015,Dh=1016,l6=1017,u6=1018,h6=1019,Rh=1020,c6=1021,Qi=1022,ci=1023,wP=1024,d6=1025,p6=ci,Nh=1026,Jh=1027,f6=1028,m6=1029,g6=1030,v6=1031,y6=1032,x6=1033,cT=33776,dT=33777,pT=33778,fT=33779,mT=35840,gT=35841,vT=35842,yT=35843,w6=36196,xT=37492,wT=37496,b6=37808,_6=37809,S6=37810,A6=37811,M6=37812,E6=37813,T6=37814,C6=37815,L6=37816,O6=37817,P6=37818,D6=37819,R6=37820,N6=37821,I6=36492,B6=37840,z6=37841,F6=37842,U6=37843,k6=37844,H6=37845,G6=37846,V6=37847,j6=37848,W6=37849,J6=37850,Y6=37851,X6=37852,q6=37853,Q6=2200,K6=2201,Z6=2202,mp=2300,gp=2301,Yy=2302,ph=2400,fh=2401,Qg=2402,Xb=2500,bP=2501,_P=0,$6=1,bT=2,Ii=3e3,Gp=3001,Vp=3007,kv=3002,ej=3003,qb=3004,Qb=3005,Kb=3006,Hv=3200,tj=3201,cc=0,rj=1,Xy=7680,ij=519,vp=35044,Kg=35048,_T="300 es",Gn=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},Ei=[];for(let e=0;e<256;e++)Ei[e]=(e<16?"0":"")+e.toString(16);var im=1234567,Gd=Math.PI/180,yp=180/Math.PI;function Hs(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ei[e&255]+Ei[e>>8&255]+Ei[e>>16&255]+Ei[e>>24&255]+"-"+Ei[t&255]+Ei[t>>8&255]+"-"+Ei[t>>16&15|64]+Ei[t>>24&255]+"-"+Ei[r&63|128]+Ei[r>>8&255]+"-"+Ei[r>>16&255]+Ei[r>>24&255]+Ei[i&255]+Ei[i>>8&255]+Ei[i>>16&255]+Ei[i>>24&255]).toUpperCase()}function Oi(e,t,r){return Math.max(t,Math.min(r,e))}function Zb(e,t){return(e%t+t)%t}function nj(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function sj(e,t,r){return e!==t?(r-e)/(t-e):0}function Vd(e,t,r){return(1-r)*e+r*t}function aj(e,t,r,i){return Vd(e,t,1-Math.exp(-r*i))}function oj(e,t=1){return t-Math.abs(Zb(e,t*2)-t)}function lj(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function uj(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function hj(e,t){return e+Math.floor(Math.random()*(t-e+1))}function cj(e,t){return e+Math.random()*(t-e)}function dj(e){return e*(.5-Math.random())}function pj(e){return e!==void 0&&(im=e%2147483647),im=im*16807%2147483647,(im-1)/2147483646}function fj(e){return e*Gd}function mj(e){return e*yp}function ew(e){return(e&e-1)==0&&e!==0}function gj(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function SP(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function vj(e,t,r,i,n){let s=Math.cos,a=Math.sin,o=s(r/2),l=a(r/2),h=s((t+i)/2),d=a((t+i)/2),p=s((t-i)/2),f=a((t-i)/2),m=s((i-t)/2),y=a((i-t)/2);switch(n){case"XYX":e.set(o*d,l*p,l*f,o*h);break;case"YZY":e.set(l*f,o*d,l*p,o*h);break;case"ZXZ":e.set(l*p,l*f,o*d,o*h);break;case"XZX":e.set(o*d,l*y,l*m,o*h);break;case"YXY":e.set(l*m,o*d,l*y,o*h);break;case"ZYZ":e.set(l*y,l*m,o*d,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}var sr=Object.freeze({__proto__:null,DEG2RAD:Gd,RAD2DEG:yp,generateUUID:Hs,clamp:Oi,euclideanModulo:Zb,mapLinear:nj,inverseLerp:sj,lerp:Vd,damp:aj,pingpong:oj,smoothstep:lj,smootherstep:uj,randInt:hj,randFloat:cj,randFloatSpread:dj,seededRandom:pj,degToRad:fj,radToDeg:mj,isPowerOfTwo:ew,ceilPowerOfTwo:gj,floorPowerOfTwo:SP,setQuaternionFromProperEuler:vj}),q=class{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*r-s*i+e.x,this.y=n*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}};q.prototype.isVector2=!0;var Dr=class{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,n,s,a,o,l){let h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=n,h[5]=o,h[6]=r,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],h=r[4],d=r[7],p=r[2],f=r[5],m=r[8],y=i[0],b=i[3],x=i[6],v=i[1],g=i[4],_=i[7],S=i[2],T=i[5],A=i[8];return n[0]=s*y+a*v+o*S,n[3]=s*b+a*g+o*T,n[6]=s*x+a*_+o*A,n[1]=l*y+h*v+d*S,n[4]=l*b+h*g+d*T,n[7]=l*x+h*_+d*A,n[2]=p*y+f*v+m*S,n[5]=p*b+f*g+m*T,n[8]=p*x+f*_+m*A,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8];return t*s*h-t*a*l-r*n*h+r*a*o+i*n*l-i*s*o}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],d=h*s-a*l,p=a*o-h*n,f=l*n-s*o,m=t*d+r*p+i*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let y=1/m;return e[0]=d*y,e[1]=(i*l-h*r)*y,e[2]=(a*r-i*s)*y,e[3]=p*y,e[4]=(h*t-i*o)*y,e[5]=(i*n-a*t)*y,e[6]=f*y,e[7]=(r*o-l*t)*y,e[8]=(s*t-r*n)*y,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,s,a){let o=Math.cos(n),l=Math.sin(n);return this.set(r*o,r*l,-r*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){let r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){let t=Math.cos(e),r=Math.sin(e),i=this.elements,n=i[0],s=i[3],a=i[6],o=i[1],l=i[4],h=i[7];return i[0]=t*n+r*o,i[3]=t*s+r*l,i[6]=t*a+r*h,i[1]=-r*n+t*o,i[4]=-r*s+t*l,i[7]=-r*a+t*h,this}translate(e,t){let r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};Dr.prototype.isMatrix3=!0;var Eu,dc=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Eu===void 0&&(Eu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Eu.width=e.width,Eu.height=e.height;let r=Eu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Eu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},yj=0,Rr=class extends Gn{constructor(e=Rr.DEFAULT_IMAGE,t=Rr.DEFAULT_MAPPING,r=yi,i=yi,n=ar,s=nu,a=ci,o=_i,l=1,h=Ii){super();Object.defineProperty(this,"id",{value:yj++}),this.uuid=Hs(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new q(0,0),this.repeat=new q(1,1),this.center=new q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){let i=this.image;if(i.uuid===void 0&&(i.uuid=Hs()),!t&&e.images[i.uuid]===void 0){let n;if(Array.isArray(i)){n=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?n.push(qy(i[s].image)):n.push(qy(i[s]))}else n=qy(i);e.images[i.uuid]={uuid:i.uuid,url:n}}r.image=i.uuid}return t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==yP)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Wh:e.x=e.x-Math.floor(e.x);break;case yi:e.x=e.x<0?0:1;break;case Xg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Wh:e.y=e.y-Math.floor(e.y);break;case yi:e.y=e.y<0?0:1;break;case Xg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}};Rr.DEFAULT_IMAGE=void 0;Rr.DEFAULT_MAPPING=yP;Rr.prototype.isTexture=!0;function qy(e){return typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?dc.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Tt=class{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*n,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*n,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*n,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,s=.01,a=.1,o=e.elements,l=o[0],h=o[4],d=o[8],p=o[1],f=o[5],m=o[9],y=o[2],b=o[6],x=o[10];if(Math.abs(h-p)<s&&Math.abs(d-y)<s&&Math.abs(m-b)<s){if(Math.abs(h+p)<a&&Math.abs(d+y)<a&&Math.abs(m+b)<a&&Math.abs(l+f+x-3)<a)return this.set(1,0,0,0),this;t=Math.PI;let g=(l+1)/2,_=(f+1)/2,S=(x+1)/2,T=(h+p)/4,A=(d+y)/4,M=(m+b)/4;return g>_&&g>S?g<s?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=T/r,n=A/r):_>S?_<s?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(_),r=T/i,n=M/i):S<s?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(S),r=A/n,i=M/n),this.set(r,i,n,t),this}let v=Math.sqrt((b-m)*(b-m)+(d-y)*(d-y)+(p-h)*(p-h));return Math.abs(v)<.001&&(v=1),this.x=(b-m)/v,this.y=(d-y)/v,this.z=(p-h)/v,this.w=Math.acos((l+f+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}};Tt.prototype.isVector4=!0;var ni=class extends Gn{constructor(e,t,r={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new Tt(0,0,e,t),this.scissorTest=!1,this.viewport=new Tt(0,0,e,t),this.texture=new Rr(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ar,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Le({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}};ni.prototype.isWebGLRenderTarget=!0;var xj=class extends ni{constructor(e,t,r){super(e,t);let i=this.texture;this.texture=[];for(let n=0;n<r;n++)this.texture[n]=i.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.texture.length;i<n;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}};xj.prototype.isWebGLMultipleRenderTargets=!0;var xp=class extends ni{constructor(e,t,r){super(e,t,r);this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}};xp.prototype.isWebGLMultisampleRenderTarget=!0;var Hr=class{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,n,s,a){let o=r[i+0],l=r[i+1],h=r[i+2],d=r[i+3],p=n[s+0],f=n[s+1],m=n[s+2],y=n[s+3];if(a===0){e[t+0]=o,e[t+1]=l,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=f,e[t+2]=m,e[t+3]=y;return}if(d!==y||o!==p||l!==f||h!==m){let b=1-a,x=o*p+l*f+h*m+d*y,v=x>=0?1:-1,g=1-x*x;if(g>Number.EPSILON){let S=Math.sqrt(g),T=Math.atan2(S,x*v);b=Math.sin(b*T)/S,a=Math.sin(a*T)/S}let _=a*v;if(o=o*b+p*_,l=l*b+f*_,h=h*b+m*_,d=d*b+y*_,b===1-a){let S=1/Math.sqrt(o*o+l*l+h*h+d*d);o*=S,l*=S,h*=S,d*=S}}e[t]=o,e[t+1]=l,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,n,s){let a=r[i],o=r[i+1],l=r[i+2],h=r[i+3],d=n[s],p=n[s+1],f=n[s+2],m=n[s+3];return e[t]=a*m+h*d+o*f-l*p,e[t+1]=o*m+h*p+l*d-a*f,e[t+2]=l*m+h*f+a*p-o*d,e[t+3]=h*m-a*d-o*p-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let r=e._x,i=e._y,n=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(r/2),h=a(i/2),d=a(n/2),p=o(r/2),f=o(i/2),m=o(n/2);switch(s){case"XYZ":this._x=p*h*d+l*f*m,this._y=l*f*d-p*h*m,this._z=l*h*m+p*f*d,this._w=l*h*d-p*f*m;break;case"YXZ":this._x=p*h*d+l*f*m,this._y=l*f*d-p*h*m,this._z=l*h*m-p*f*d,this._w=l*h*d+p*f*m;break;case"ZXY":this._x=p*h*d-l*f*m,this._y=l*f*d+p*h*m,this._z=l*h*m+p*f*d,this._w=l*h*d-p*f*m;break;case"ZYX":this._x=p*h*d-l*f*m,this._y=l*f*d+p*h*m,this._z=l*h*m-p*f*d,this._w=l*h*d+p*f*m;break;case"YZX":this._x=p*h*d+l*f*m,this._y=l*f*d+p*h*m,this._z=l*h*m-p*f*d,this._w=l*h*d-p*f*m;break;case"XZY":this._x=p*h*d-l*f*m,this._y=l*f*d-p*h*m,this._z=l*h*m+p*f*d,this._w=l*h*d+p*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],s=t[1],a=t[5],o=t[9],l=t[2],h=t[6],d=t[10],p=r+a+d;if(p>0){let f=.5/Math.sqrt(p+1);this._w=.25/f,this._x=(h-o)*f,this._y=(n-l)*f,this._z=(s-i)*f}else if(r>a&&r>d){let f=2*Math.sqrt(1+r-a-d);this._w=(h-o)/f,this._x=.25*f,this._y=(i+s)/f,this._z=(n+l)/f}else if(a>d){let f=2*Math.sqrt(1+a-r-d);this._w=(n-l)/f,this._x=(i+s)/f,this._y=.25*f,this._z=(o+h)/f}else{let f=2*Math.sqrt(1+d-r-a);this._w=(s-i)/f,this._x=(n+l)/f,this._y=(o+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oi(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,s=e._w,a=t._x,o=t._y,l=t._z,h=t._w;return this._x=r*h+s*a+i*l-n*o,this._y=i*h+s*o+n*a-r*l,this._z=n*h+s*l+r*o-i*a,this._w=s*h-r*a-i*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,s=this._w,a=s*e._w+r*e._x+i*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=n,this;let o=1-a*a;if(o<=Number.EPSILON){let f=1-t;return this._w=f*s+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),h=Math.atan2(l,a),d=Math.sin((1-t)*h)/l,p=Math.sin(t*h)/l;return this._w=s*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=n*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){this.copy(e).slerp(t,r)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};Hr.prototype.isQuaternion=!0;var L=class{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ST.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ST.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,s=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*s,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*s,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*s,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*r,h=o*r+a*t-n*i,d=o*i+n*r-s*t,p=-n*t-s*r-a*i;return this.x=l*o+p*-n+h*-a-d*-s,this.y=h*o+p*-s+d*-n-l*-a,this.z=d*o+p*-a+l*-s-h*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-n*a,this.y=n*s-r*o,this.z=r*a-i*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Qy.copy(this).projectOnVector(e),this.sub(Qy)}reflect(e){return this.sub(Qy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Oi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}};L.prototype.isVector3=!0;var Qy=new L,ST=new Hr,zi=class{constructor(e=new L(1/0,1/0,1/0),t=new L(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){let h=e[o],d=e[o+1],p=e[o+2];h<t&&(t=h),d<r&&(r=d),p<i&&(i=p),h>n&&(n=h),d>s&&(s=d),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){let h=e.getX(o),d=e.getY(o),p=e.getZ(o);h<t&&(t=h),d<r&&(r=d),p<i&&(i=p),h>n&&(n=h),d>s&&(s=d),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=$c.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);let t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Ky.copy(t.boundingBox),Ky.applyMatrix4(e.matrixWorld),this.union(Ky));let r=e.children;for(let i=0,n=r.length;i<n;i++)this.expandByObject(r[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$c),$c.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ed),nm.subVectors(this.max,ed),Tu.subVectors(e.a,ed),Cu.subVectors(e.b,ed),Lu.subVectors(e.c,ed),_o.subVectors(Cu,Tu),So.subVectors(Lu,Cu),Tl.subVectors(Tu,Lu);let t=[0,-_o.z,_o.y,0,-So.z,So.y,0,-Tl.z,Tl.y,_o.z,0,-_o.x,So.z,0,-So.x,Tl.z,0,-Tl.x,-_o.y,_o.x,0,-So.y,So.x,0,-Tl.y,Tl.x,0];return!Zy(t,Tu,Cu,Lu,nm)||(t=[1,0,0,0,1,0,0,0,1],!Zy(t,Tu,Cu,Lu,nm))?!1:(sm.crossVectors(_o,So),t=[sm.x,sm.y,sm.z],Zy(t,Tu,Cu,Lu,nm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return $c.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize($c).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ga[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ga[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ga[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ga[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ga[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ga[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ga[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ga[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ga),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};zi.prototype.isBox3=!0;var Ga=[new L,new L,new L,new L,new L,new L,new L,new L],$c=new L,Ky=new zi,Tu=new L,Cu=new L,Lu=new L,_o=new L,So=new L,Tl=new L,ed=new L,nm=new L,sm=new L,Cl=new L;function Zy(e,t,r,i,n){for(let s=0,a=e.length-3;s<=a;s+=3){Cl.fromArray(e,s);let o=n.x*Math.abs(Cl.x)+n.y*Math.abs(Cl.y)+n.z*Math.abs(Cl.z),l=t.dot(Cl),h=r.dot(Cl),d=i.dot(Cl);if(Math.max(-Math.max(l,h,d),Math.min(l,h,d))>o)return!1}return!0}var wj=new zi,AT=new L,$y=new L,ex=new L,Vs=class{constructor(e=new L,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):wj.setFromPoints(e).getCenter(r);let i=0;for(let n=0,s=e.length;n<s;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ex.subVectors(e,this.center);let t=ex.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(ex.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return $y.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(AT.copy(e.center).add($y)),this.expandByPoint(AT.copy(e.center).sub($y)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Va=new L,tx=new L,am=new L,Ao=new L,rx=new L,om=new L,ix=new L,ml=class{constructor(e=new L,t=new L(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Va)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Va.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Va.copy(this.direction).multiplyScalar(t).add(this.origin),Va.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){tx.copy(e).add(t).multiplyScalar(.5),am.copy(t).sub(e).normalize(),Ao.copy(this.origin).sub(tx);let n=e.distanceTo(t)*.5,s=-this.direction.dot(am),a=Ao.dot(this.direction),o=-Ao.dot(am),l=Ao.lengthSq(),h=Math.abs(1-s*s),d,p,f,m;if(h>0)if(d=s*o-a,p=s*a-o,m=n*h,d>=0)if(p>=-m)if(p<=m){let y=1/h;d*=y,p*=y,f=d*(d+s*p+2*a)+p*(s*d+p+2*o)+l}else p=n,d=Math.max(0,-(s*p+a)),f=-d*d+p*(p+2*o)+l;else p=-n,d=Math.max(0,-(s*p+a)),f=-d*d+p*(p+2*o)+l;else p<=-m?(d=Math.max(0,-(-s*n+a)),p=d>0?-n:Math.min(Math.max(-n,-o),n),f=-d*d+p*(p+2*o)+l):p<=m?(d=0,p=Math.min(Math.max(-n,-o),n),f=p*(p+2*o)+l):(d=Math.max(0,-(s*n+a)),p=d>0?n:Math.min(Math.max(-n,-o),n),f=-d*d+p*(p+2*o)+l);else p=s>0?-n:n,d=Math.max(0,-(s*p+a)),f=-d*d+p*(p+2*o)+l;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(am).multiplyScalar(p).add(tx),f}intersectSphere(e,t){Va.subVectors(e.center,this.origin);let r=Va.dot(this.direction),i=Va.dot(Va)-r*r,n=e.radius*e.radius;if(i>n)return null;let s=Math.sqrt(n-i),a=r-s,o=r+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,s,a,o,l=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return l>=0?(r=(e.min.x-p.x)*l,i=(e.max.x-p.x)*l):(r=(e.max.x-p.x)*l,i=(e.min.x-p.x)*l),h>=0?(n=(e.min.y-p.y)*h,s=(e.max.y-p.y)*h):(n=(e.max.y-p.y)*h,s=(e.min.y-p.y)*h),r>s||n>i||((n>r||r!==r)&&(r=n),(s<i||i!==i)&&(i=s),d>=0?(a=(e.min.z-p.z)*d,o=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,o=(e.min.z-p.z)*d),r>o||a>i)||((a>r||r!==r)&&(r=a),(o<i||i!==i)&&(i=o),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Va)!==null}intersectTriangle(e,t,r,i,n){rx.subVectors(t,e),om.subVectors(r,e),ix.crossVectors(rx,om);let s=this.direction.dot(ix),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Ao.subVectors(this.origin,e);let o=a*this.direction.dot(om.crossVectors(Ao,om));if(o<0)return null;let l=a*this.direction.dot(rx.cross(Ao));if(l<0||o+l>s)return null;let h=-a*Ao.dot(ix);return h<0?null:this.at(h/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},He=class{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,n,s,a,o,l,h,d,p,f,m,y,b){let x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=n,x[5]=s,x[9]=a,x[13]=o,x[2]=l,x[6]=h,x[10]=d,x[14]=p,x[3]=f,x[7]=m,x[11]=y,x[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new He().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/Ou.setFromMatrixColumn(e,0).length(),n=1/Ou.setFromMatrixColumn(e,1).length(),s=1/Ou.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,r=e.x,i=e.y,n=e.z,s=Math.cos(r),a=Math.sin(r),o=Math.cos(i),l=Math.sin(i),h=Math.cos(n),d=Math.sin(n);if(e.order==="XYZ"){let p=s*h,f=s*d,m=a*h,y=a*d;t[0]=o*h,t[4]=-o*d,t[8]=l,t[1]=f+m*l,t[5]=p-y*l,t[9]=-a*o,t[2]=y-p*l,t[6]=m+f*l,t[10]=s*o}else if(e.order==="YXZ"){let p=o*h,f=o*d,m=l*h,y=l*d;t[0]=p+y*a,t[4]=m*a-f,t[8]=s*l,t[1]=s*d,t[5]=s*h,t[9]=-a,t[2]=f*a-m,t[6]=y+p*a,t[10]=s*o}else if(e.order==="ZXY"){let p=o*h,f=o*d,m=l*h,y=l*d;t[0]=p-y*a,t[4]=-s*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=s*h,t[9]=y-p*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if(e.order==="ZYX"){let p=s*h,f=s*d,m=a*h,y=a*d;t[0]=o*h,t[4]=m*l-f,t[8]=p*l+y,t[1]=o*d,t[5]=y*l+p,t[9]=f*l-m,t[2]=-l,t[6]=a*o,t[10]=s*o}else if(e.order==="YZX"){let p=s*o,f=s*l,m=a*o,y=a*l;t[0]=o*h,t[4]=y-p*d,t[8]=m*d+f,t[1]=d,t[5]=s*h,t[9]=-a*h,t[2]=-l*h,t[6]=f*d+m,t[10]=p-y*d}else if(e.order==="XZY"){let p=s*o,f=s*l,m=a*o,y=a*l;t[0]=o*h,t[4]=-d,t[8]=l*h,t[1]=p*d+y,t[5]=s*h,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*h,t[10]=y*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bj,e,_j)}lookAt(e,t,r){let i=this.elements;return Pn.subVectors(e,t),Pn.lengthSq()===0&&(Pn.z=1),Pn.normalize(),Mo.crossVectors(r,Pn),Mo.lengthSq()===0&&(Math.abs(r.z)===1?Pn.x+=1e-4:Pn.z+=1e-4,Pn.normalize(),Mo.crossVectors(r,Pn)),Mo.normalize(),lm.crossVectors(Pn,Mo),i[0]=Mo.x,i[4]=lm.x,i[8]=Pn.x,i[1]=Mo.y,i[5]=lm.y,i[9]=Pn.y,i[2]=Mo.z,i[6]=lm.z,i[10]=Pn.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[4],o=r[8],l=r[12],h=r[1],d=r[5],p=r[9],f=r[13],m=r[2],y=r[6],b=r[10],x=r[14],v=r[3],g=r[7],_=r[11],S=r[15],T=i[0],A=i[4],M=i[8],O=i[12],P=i[1],C=i[5],N=i[9],U=i[13],V=i[2],k=i[6],G=i[10],Z=i[14],W=i[3],$=i[7],ae=i[11],te=i[15];return n[0]=s*T+a*P+o*V+l*W,n[4]=s*A+a*C+o*k+l*$,n[8]=s*M+a*N+o*G+l*ae,n[12]=s*O+a*U+o*Z+l*te,n[1]=h*T+d*P+p*V+f*W,n[5]=h*A+d*C+p*k+f*$,n[9]=h*M+d*N+p*G+f*ae,n[13]=h*O+d*U+p*Z+f*te,n[2]=m*T+y*P+b*V+x*W,n[6]=m*A+y*C+b*k+x*$,n[10]=m*M+y*N+b*G+x*ae,n[14]=m*O+y*U+b*Z+x*te,n[3]=v*T+g*P+_*V+S*W,n[7]=v*A+g*C+_*k+S*$,n[11]=v*M+g*N+_*G+S*ae,n[15]=v*O+g*U+_*Z+S*te,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],s=e[1],a=e[5],o=e[9],l=e[13],h=e[2],d=e[6],p=e[10],f=e[14],m=e[3],y=e[7],b=e[11],x=e[15];return m*(+n*o*d-i*l*d-n*a*p+r*l*p+i*a*f-r*o*f)+y*(+t*o*f-t*l*p+n*s*p-i*s*f+i*l*h-n*o*h)+b*(+t*l*d-t*a*f-n*s*d+r*s*f+n*a*h-r*l*h)+x*(-i*a*h-t*o*d+t*a*p+i*s*d-r*s*p+r*o*h)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],y=e[13],b=e[14],x=e[15],v=d*b*l-y*p*l+y*o*f-a*b*f-d*o*x+a*p*x,g=m*p*l-h*b*l-m*o*f+s*b*f+h*o*x-s*p*x,_=h*y*l-m*d*l+m*a*f-s*y*f-h*a*x+s*d*x,S=m*d*o-h*y*o-m*a*p+s*y*p+h*a*b-s*d*b,T=t*v+r*g+i*_+n*S;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let A=1/T;return e[0]=v*A,e[1]=(y*p*n-d*b*n-y*i*f+r*b*f+d*i*x-r*p*x)*A,e[2]=(a*b*n-y*o*n+y*i*l-r*b*l-a*i*x+r*o*x)*A,e[3]=(d*o*n-a*p*n-d*i*l+r*p*l+a*i*f-r*o*f)*A,e[4]=g*A,e[5]=(h*b*n-m*p*n+m*i*f-t*b*f-h*i*x+t*p*x)*A,e[6]=(m*o*n-s*b*n-m*i*l+t*b*l+s*i*x-t*o*x)*A,e[7]=(s*p*n-h*o*n+h*i*l-t*p*l-s*i*f+t*o*f)*A,e[8]=_*A,e[9]=(m*d*n-h*y*n-m*r*f+t*y*f+h*r*x-t*d*x)*A,e[10]=(s*y*n-m*a*n+m*r*l-t*y*l-s*r*x+t*a*x)*A,e[11]=(h*a*n-s*d*n-h*r*l+t*d*l+s*r*f-t*a*f)*A,e[12]=S*A,e[13]=(h*y*i-m*d*i+m*r*p-t*y*p-h*r*b+t*d*b)*A,e[14]=(m*a*i-s*y*i-m*r*o+t*y*o+s*r*b-t*a*b)*A,e[15]=(s*d*i-h*a*i+h*r*o-t*d*o-s*r*p+t*a*p)*A,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,s=e.x,a=e.y,o=e.z,l=n*s,h=n*a;return this.set(l*s+r,l*a-i*o,l*o+i*a,0,l*a+i*o,h*a+r,h*o-i*s,0,l*o-i*a,h*o+i*s,n*o*o+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,s){return this.set(1,r,n,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,s=t._y,a=t._z,o=t._w,l=n+n,h=s+s,d=a+a,p=n*l,f=n*h,m=n*d,y=s*h,b=s*d,x=a*d,v=o*l,g=o*h,_=o*d,S=r.x,T=r.y,A=r.z;return i[0]=(1-(y+x))*S,i[1]=(f+_)*S,i[2]=(m-g)*S,i[3]=0,i[4]=(f-_)*T,i[5]=(1-(p+x))*T,i[6]=(b+v)*T,i[7]=0,i[8]=(m+g)*A,i[9]=(b-v)*A,i[10]=(1-(p+y))*A,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=Ou.set(i[0],i[1],i[2]).length(),s=Ou.set(i[4],i[5],i[6]).length(),a=Ou.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],Ms.copy(this);let o=1/n,l=1/s,h=1/a;return Ms.elements[0]*=o,Ms.elements[1]*=o,Ms.elements[2]*=o,Ms.elements[4]*=l,Ms.elements[5]*=l,Ms.elements[6]*=l,Ms.elements[8]*=h,Ms.elements[9]*=h,Ms.elements[10]*=h,t.setFromRotationMatrix(Ms),r.x=n,r.y=s,r.z=a,this}makePerspective(e,t,r,i,n,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let a=this.elements,o=2*n/(t-e),l=2*n/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i),p=-(s+n)/(s-n),f=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,n,s){let a=this.elements,o=1/(t-e),l=1/(r-i),h=1/(s-n),d=(t+e)*o,p=(r+i)*l,f=(s+n)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};He.prototype.isMatrix4=!0;var Ou=new L,Ms=new He,bj=new L(0,0,0),_j=new L(1,1,1),Mo=new L,lm=new L,Pn=new L,MT=new He,ET=new Hr,al=class{constructor(e=0,t=0,r=0,i=al.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],s=i[4],a=i[8],o=i[1],l=i[5],h=i[9],d=i[2],p=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(p,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Oi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-d,n),this._z=0);break;case"ZXY":this._x=Math.asin(Oi(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Oi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,f),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Oi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-d,n)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Oi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return MT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(MT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ET.setFromEuler(this),this.setFromQuaternion(ET,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new L(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};al.prototype.isEuler=!0;al.DefaultOrder="XYZ";al.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var AP=class{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}},Sj=0,TT=new L,Pu=new Hr,ja=new He,um=new L,td=new L,Aj=new L,Mj=new Hr,CT=new L(1,0,0),LT=new L(0,1,0),OT=new L(0,0,1),Ej={type:"added"},PT={type:"removed"},Nt=class extends Gn{constructor(){super();Object.defineProperty(this,"id",{value:Sj++}),this.uuid=Hs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Nt.DefaultUp.clone();let e=new L,t=new al,r=new Hr,i=new L(1,1,1);function n(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new He},normalMatrix:{value:new Dr}}),this.matrix=new He,this.matrixWorld=new He,this.matrixAutoUpdate=Nt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new AP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Pu.setFromAxisAngle(e,t),this.quaternion.multiply(Pu),this}rotateOnWorldAxis(e,t){return Pu.setFromAxisAngle(e,t),this.quaternion.premultiply(Pu),this}rotateX(e){return this.rotateOnAxis(CT,e)}rotateY(e){return this.rotateOnAxis(LT,e)}rotateZ(e){return this.rotateOnAxis(OT,e)}translateOnAxis(e,t){return TT.copy(e).applyQuaternion(this.quaternion),this.position.add(TT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(CT,e)}translateY(e){return this.translateOnAxis(LT,e)}translateZ(e){return this.translateOnAxis(OT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ja.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?um.copy(e):um.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),td.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ja.lookAt(td,um,this.up):ja.lookAt(um,td,this.up),this.quaternion.setFromRotationMatrix(ja),i&&(ja.extractRotation(i.matrixWorld),Pu.setFromRotationMatrix(ja),this.quaternion.premultiply(Pu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ej)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(PT)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(PT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ja.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ja.multiply(e.parent.matrixWorld)),e.applyMatrix4(ja),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(td,e,Aj),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(td,Mj,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,s=i.length;n<s;n++)i[n].updateWorldMatrix(!1,!0)}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(a,o){return a[o.uuid]===void 0&&(a[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let o=a.shapes;if(Array.isArray(o))for(let l=0,h=o.length;l<h;l++){let d=o[l];n(e.shapes,d)}else n(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let o=0,l=this.material.length;o<l;o++)a.push(n(e.materials,this.material[o]));i.material=a}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){let o=this.animations[a];i.animations.push(n(e.animations,o))}}if(t){let a=s(e.geometries),o=s(e.materials),l=s(e.textures),h=s(e.images),d=s(e.shapes),p=s(e.skeletons),f=s(e.animations);a.length>0&&(r.geometries=a),o.length>0&&(r.materials=o),l.length>0&&(r.textures=l),h.length>0&&(r.images=h),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),f.length>0&&(r.animations=f)}return r.object=i,r;function s(a){let o=[];for(let l in a){let h=a[l];delete h.metadata,o.push(h)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};Nt.DefaultUp=new L(0,1,0);Nt.DefaultMatrixAutoUpdate=!0;Nt.prototype.isObject3D=!0;var Es=new L,Wa=new L,nx=new L,Ja=new L,Du=new L,Ru=new L,DT=new L,sx=new L,ax=new L,ox=new L,ii=class{constructor(e=new L,t=new L,r=new L){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Es.subVectors(e,t),i.cross(Es);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){Es.subVectors(i,t),Wa.subVectors(r,t),nx.subVectors(e,t);let s=Es.dot(Es),a=Es.dot(Wa),o=Es.dot(nx),l=Wa.dot(Wa),h=Wa.dot(nx),d=s*l-a*a;if(d===0)return n.set(-2,-1,-1);let p=1/d,f=(l*o-a*h)*p,m=(s*h-a*o)*p;return n.set(1-f-m,m,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ja),Ja.x>=0&&Ja.y>=0&&Ja.x+Ja.y<=1}static getUV(e,t,r,i,n,s,a,o){return this.getBarycoord(e,t,r,i,Ja),o.set(0,0),o.addScaledVector(n,Ja.x),o.addScaledVector(s,Ja.y),o.addScaledVector(a,Ja.z),o}static isFrontFacing(e,t,r,i){return Es.subVectors(r,t),Wa.subVectors(e,t),Es.cross(Wa).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Es.subVectors(this.c,this.b),Wa.subVectors(this.a,this.b),Es.cross(Wa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ii.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ii.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return ii.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return ii.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ii.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,s,a;Du.subVectors(i,r),Ru.subVectors(n,r),sx.subVectors(e,r);let o=Du.dot(sx),l=Ru.dot(sx);if(o<=0&&l<=0)return t.copy(r);ax.subVectors(e,i);let h=Du.dot(ax),d=Ru.dot(ax);if(h>=0&&d<=h)return t.copy(i);let p=o*d-h*l;if(p<=0&&o>=0&&h<=0)return s=o/(o-h),t.copy(r).addScaledVector(Du,s);ox.subVectors(e,n);let f=Du.dot(ox),m=Ru.dot(ox);if(m>=0&&f<=m)return t.copy(n);let y=f*l-o*m;if(y<=0&&l>=0&&m<=0)return a=l/(l-m),t.copy(r).addScaledVector(Ru,a);let b=h*m-f*d;if(b<=0&&d-h>=0&&f-m>=0)return DT.subVectors(n,i),a=(d-h)/(d-h+(f-m)),t.copy(i).addScaledVector(DT,a);let x=1/(b+y+p);return s=y*x,a=p*x,t.copy(r).addScaledVector(Du,s).addScaledVector(Ru,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Tj=0,$i=class extends Gn{constructor(){super();Object.defineProperty(this,"id",{value:Tj++}),this.uuid=Hs(),this.name="",this.type="Material",this.fog=!0,this.blending=Ph,this.side=sl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=gP,this.blendDst=vP,this.blendEquation=eh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=q1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ij,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xy,this.stencilZFail=Xy,this.stencilZPass=Xy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===mP;continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(r.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(r.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(r.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ph&&(r.blending=this.blending),this.side!==sl&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(n){let s=[];for(let a in n){let o=n[a];delete o.metadata,s.push(o)}return s}if(t){let n=i(e.textures),s=i(e.images);n.length>0&&(r.textures=n),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};$i.prototype.isMaterial=!0;var MP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ts={h:0,s:0,l:0},hm={h:0,s:0,l:0};function lx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function ux(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function hx(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var Ue=class{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=Zb(e,1),t=Oi(t,0,1),r=Oi(r,0,1),t===0)this.r=this.g=this.b=r;else{let i=r<=.5?r*(1+t):r+t-r*t,n=2*r-i;this.r=lx(n,i,e+1/3),this.g=lx(n,i,e),this.b=lx(n,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i,n=r[1],s=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let a=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(a,o,l)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let i=r[1],n=i.length;if(n===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(n===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){let t=MP[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){let r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=ux(e.r),this.g=ux(e.g),this.b=ux(e.b),this}copyLinearToSRGB(e){return this.r=hx(e.r),this.g=hx(e.g),this.b=hx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){let t=this.r,r=this.g,i=this.b,n=Math.max(t,r,i),s=Math.min(t,r,i),a,o,l=(s+n)/2;if(s===n)a=0,o=0;else{let h=n-s;switch(o=l<=.5?h/(n+s):h/(2-n-s),n){case t:a=(r-i)/h+(r<i?6:0);break;case r:a=(i-t)/h+2;break;case i:a=(t-r)/h+4;break}a/=6}return e.h=a,e.s=o,e.l=l,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(Ts),Ts.h+=e,Ts.s+=t,Ts.l+=r,this.setHSL(Ts.h,Ts.s,Ts.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ts),e.getHSL(hm);let r=Vd(Ts.h,hm.h,t),i=Vd(Ts.s,hm.s,t),n=Vd(Ts.l,hm.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}};Ue.NAMES=MP;Ue.prototype.isColor=!0;Ue.prototype.r=1;Ue.prototype.g=1;Ue.prototype.b=1;var Kl=class extends $i{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};Kl.prototype.isMeshBasicMaterial=!0;var fr=new L,cm=new q,dt=class{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=vp,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Ue),t[r++]=s.r,t[r++]=s.g,t[r++]=s.b}return this}copyVector2sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new q),t[r++]=s.x,t[r++]=s.y}return this}copyVector3sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new L),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this}copyVector4sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Tt),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z,t[r++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)cm.fromBufferAttribute(this,t),cm.applyMatrix3(e),this.setXY(t,cm.x,cm.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)fr.fromBufferAttribute(this,t),fr.applyMatrix3(e),this.setXYZ(t,fr.x,fr.y,fr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)fr.x=this.getX(t),fr.y=this.getY(t),fr.z=this.getZ(t),fr.applyMatrix4(e),this.setXYZ(t,fr.x,fr.y,fr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)fr.x=this.getX(t),fr.y=this.getY(t),fr.z=this.getZ(t),fr.applyNormalMatrix(e),this.setXYZ(t,fr.x,fr.y,fr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)fr.x=this.getX(t),fr.y=this.getY(t),fr.z=this.getZ(t),fr.transformDirection(e),this.setXYZ(t,fr.x,fr.y,fr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==vp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}};dt.prototype.isBufferAttribute=!0;var EP=class extends dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}},jd=class extends dt{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Cj=class extends dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}};Cj.prototype.isFloat16BufferAttribute=!0;var We=class extends dt{constructor(e,t,r){super(new Float32Array(e),t,r)}};function TP(e){if(e.length===0)return-1/0;let t=e[0];for(let r=1,i=e.length;r<i;++r)e[r]>t&&(t=e[r]);return t}var Lj={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function dm(e,t){return new Lj[e](t)}var Oj=0,es=new He,cx=new Nt,Nu=new L,Dn=new zi,rd=new zi,mi=new L,st=class extends Gn{constructor(){super();Object.defineProperty(this,"id",{value:Oj++}),this.uuid=Hs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(TP(e)>65535?jd:EP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new Dr().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return es.makeRotationFromQuaternion(e),this.applyMatrix4(es),this}rotateX(e){return es.makeRotationX(e),this.applyMatrix4(es),this}rotateY(e){return es.makeRotationY(e),this.applyMatrix4(es),this}rotateZ(e){return es.makeRotationZ(e),this.applyMatrix4(es),this}translate(e,t,r){return es.makeTranslation(e,t,r),this.applyMatrix4(es),this}scale(e,t,r){return es.makeScale(e,t,r),this.applyMatrix4(es),this}lookAt(e){return cx.lookAt(e),cx.updateMatrix(),this.applyMatrix4(cx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nu).negate(),this.translate(Nu.x,Nu.y,Nu.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new We(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zi);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new L(-1/0,-1/0,-1/0),new L(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Dn.setFromBufferAttribute(n),this.morphTargetsRelative?(mi.addVectors(this.boundingBox.min,Dn.min),this.boundingBox.expandByPoint(mi),mi.addVectors(this.boundingBox.max,Dn.max),this.boundingBox.expandByPoint(mi)):(this.boundingBox.expandByPoint(Dn.min),this.boundingBox.expandByPoint(Dn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vs);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new L,1/0);return}if(e){let r=this.boundingSphere.center;if(Dn.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let a=t[n];rd.setFromBufferAttribute(a),this.morphTargetsRelative?(mi.addVectors(Dn.min,rd.min),Dn.expandByPoint(mi),mi.addVectors(Dn.max,rd.max),Dn.expandByPoint(mi)):(Dn.expandByPoint(rd.min),Dn.expandByPoint(rd.max))}Dn.getCenter(r);let i=0;for(let n=0,s=e.count;n<s;n++)mi.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(mi));if(t)for(let n=0,s=t.length;n<s;n++){let a=t[n],o=this.morphTargetsRelative;for(let l=0,h=a.count;l<h;l++)mi.fromBufferAttribute(a,l),o&&(Nu.fromBufferAttribute(e,l),mi.add(Nu)),i=Math.max(i,r.distanceToSquared(mi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,s=t.uv.array,a=i.length/3;t.tangent===void 0&&this.setAttribute("tangent",new dt(new Float32Array(4*a),4));let o=t.tangent.array,l=[],h=[];for(let P=0;P<a;P++)l[P]=new L,h[P]=new L;let d=new L,p=new L,f=new L,m=new q,y=new q,b=new q,x=new L,v=new L;function g(P,C,N){d.fromArray(i,P*3),p.fromArray(i,C*3),f.fromArray(i,N*3),m.fromArray(s,P*2),y.fromArray(s,C*2),b.fromArray(s,N*2),p.sub(d),f.sub(d),y.sub(m),b.sub(m);let U=1/(y.x*b.y-b.x*y.y);!isFinite(U)||(x.copy(p).multiplyScalar(b.y).addScaledVector(f,-y.y).multiplyScalar(U),v.copy(f).multiplyScalar(y.x).addScaledVector(p,-b.x).multiplyScalar(U),l[P].add(x),l[C].add(x),l[N].add(x),h[P].add(v),h[C].add(v),h[N].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:r.length}]);for(let P=0,C=_.length;P<C;++P){let N=_[P],U=N.start,V=N.count;for(let k=U,G=U+V;k<G;k+=3)g(r[k+0],r[k+1],r[k+2])}let S=new L,T=new L,A=new L,M=new L;function O(P){A.fromArray(n,P*3),M.copy(A);let C=l[P];S.copy(C),S.sub(A.multiplyScalar(A.dot(C))).normalize(),T.crossVectors(M,C);let N=T.dot(h[P])<0?-1:1;o[P*4]=S.x,o[P*4+1]=S.y,o[P*4+2]=S.z,o[P*4+3]=N}for(let P=0,C=_.length;P<C;++P){let N=_[P],U=N.start,V=N.count;for(let k=U,G=U+V;k<G;k+=3)O(r[k+0]),O(r[k+1]),O(r[k+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new dt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,f=r.count;p<f;p++)r.setXYZ(p,0,0,0);let i=new L,n=new L,s=new L,a=new L,o=new L,l=new L,h=new L,d=new L;if(e)for(let p=0,f=e.count;p<f;p+=3){let m=e.getX(p+0),y=e.getX(p+1),b=e.getX(p+2);i.fromBufferAttribute(t,m),n.fromBufferAttribute(t,y),s.fromBufferAttribute(t,b),h.subVectors(s,n),d.subVectors(i,n),h.cross(d),a.fromBufferAttribute(r,m),o.fromBufferAttribute(r,y),l.fromBufferAttribute(r,b),a.add(h),o.add(h),l.add(h),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(y,o.x,o.y,o.z),r.setXYZ(b,l.x,l.y,l.z)}else for(let p=0,f=t.count;p<f;p+=3)i.fromBufferAttribute(t,p+0),n.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),h.subVectors(s,n),d.subVectors(i,n),h.cross(d),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let r=this.attributes;for(let i in r){if(e.attributes[i]===void 0)continue;let n=r[i].array,s=e.attributes[i],a=s.array,o=s.itemSize*t,l=Math.min(a.length,n.length-o);for(let h=0,d=o;h<l;h++,d++)n[d]=a[h]}return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)mi.fromBufferAttribute(e,t),mi.normalize(),e.setXYZ(t,mi.x,mi.y,mi.z)}toNonIndexed(){function e(a,o){let l=a.array,h=a.itemSize,d=a.normalized,p=new l.constructor(o.length*h),f=0,m=0;for(let y=0,b=o.length;y<b;y++){a.isInterleavedBufferAttribute?f=o[y]*a.data.stride+a.offset:f=o[y]*h;for(let x=0;x<h;x++)p[m++]=l[f++]}return new dt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new st,r=this.index.array,i=this.attributes;for(let a in i){let o=i[a],l=e(o,r);t.setAttribute(a,l)}let n=this.morphAttributes;for(let a in n){let o=[],l=n[a];for(let h=0,d=l.length;h<d;h++){let p=l[h],f=e(p,r);o.push(f)}t.morphAttributes[a]=o}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,o=s.length;a<o;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let o in r){let l=r[o];e.data.attributes[o]=l.toJSON(e.data)}let i={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],h=[];for(let d=0,p=l.length;d<p;d++){let f=l[d];h.push(f.toJSON(e.data))}h.length>0&&(i[o]=h,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new st().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let h=i[l];this.setAttribute(l,h.clone(t))}let n=e.morphAttributes;for(let l in n){let h=[],d=n[l];for(let p=0,f=d.length;p<f;p++)h.push(d[p].clone(t));this.morphAttributes[l]=h}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,h=s.length;l<h;l++){let d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};st.prototype.isBufferGeometry=!0;var RT=new He,Iu=new ml,dx=new Vs,Eo=new L,To=new L,Co=new L,px=new L,fx=new L,mx=new L,pm=new L,fm=new L,mm=new L,gm=new q,vm=new q,ym=new q,gx=new L,xm=new L,wi=class extends Nt{constructor(e=new st,t=new Kl){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){let a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}else{let t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),dx.copy(r.boundingSphere),dx.applyMatrix4(n),e.ray.intersectsSphere(dx)===!1)||(RT.copy(n).invert(),Iu.copy(e.ray).applyMatrix4(RT),r.boundingBox!==null&&Iu.intersectsBox(r.boundingBox)===!1))return;let s;if(r.isBufferGeometry){let a=r.index,o=r.attributes.position,l=r.morphAttributes.position,h=r.morphTargetsRelative,d=r.attributes.uv,p=r.attributes.uv2,f=r.groups,m=r.drawRange;if(a!==null)if(Array.isArray(i))for(let y=0,b=f.length;y<b;y++){let x=f[y],v=i[x.materialIndex],g=Math.max(x.start,m.start),_=Math.min(x.start+x.count,m.start+m.count);for(let S=g,T=_;S<T;S+=3){let A=a.getX(S),M=a.getX(S+1),O=a.getX(S+2);s=wm(this,v,e,Iu,o,l,h,d,p,A,M,O),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=x.materialIndex,t.push(s))}}else{let y=Math.max(0,m.start),b=Math.min(a.count,m.start+m.count);for(let x=y,v=b;x<v;x+=3){let g=a.getX(x),_=a.getX(x+1),S=a.getX(x+2);s=wm(this,i,e,Iu,o,l,h,d,p,g,_,S),s&&(s.faceIndex=Math.floor(x/3),t.push(s))}}else if(o!==void 0)if(Array.isArray(i))for(let y=0,b=f.length;y<b;y++){let x=f[y],v=i[x.materialIndex],g=Math.max(x.start,m.start),_=Math.min(x.start+x.count,m.start+m.count);for(let S=g,T=_;S<T;S+=3){let A=S,M=S+1,O=S+2;s=wm(this,v,e,Iu,o,l,h,d,p,A,M,O),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=x.materialIndex,t.push(s))}}else{let y=Math.max(0,m.start),b=Math.min(o.count,m.start+m.count);for(let x=y,v=b;x<v;x+=3){let g=x,_=x+1,S=x+2;s=wm(this,i,e,Iu,o,l,h,d,p,g,_,S),s&&(s.faceIndex=Math.floor(x/3),t.push(s))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}};wi.prototype.isMesh=!0;function Pj(e,t,r,i,n,s,a,o){let l;if(t.side===Er?l=i.intersectTriangle(a,s,n,!0,o):l=i.intersectTriangle(n,s,a,t.side!==xi,o),l===null)return null;xm.copy(o),xm.applyMatrix4(e.matrixWorld);let h=r.ray.origin.distanceTo(xm);return h<r.near||h>r.far?null:{distance:h,point:xm.clone(),object:e}}function wm(e,t,r,i,n,s,a,o,l,h,d,p){Eo.fromBufferAttribute(n,h),To.fromBufferAttribute(n,d),Co.fromBufferAttribute(n,p);let f=e.morphTargetInfluences;if(s&&f){pm.set(0,0,0),fm.set(0,0,0),mm.set(0,0,0);for(let y=0,b=s.length;y<b;y++){let x=f[y],v=s[y];x!==0&&(px.fromBufferAttribute(v,h),fx.fromBufferAttribute(v,d),mx.fromBufferAttribute(v,p),a?(pm.addScaledVector(px,x),fm.addScaledVector(fx,x),mm.addScaledVector(mx,x)):(pm.addScaledVector(px.sub(Eo),x),fm.addScaledVector(fx.sub(To),x),mm.addScaledVector(mx.sub(Co),x)))}Eo.add(pm),To.add(fm),Co.add(mm)}e.isSkinnedMesh&&(e.boneTransform(h,Eo),e.boneTransform(d,To),e.boneTransform(p,Co));let m=Pj(e,t,r,i,Eo,To,Co,gx);if(m){o&&(gm.fromBufferAttribute(o,h),vm.fromBufferAttribute(o,d),ym.fromBufferAttribute(o,p),m.uv=ii.getUV(gx,Eo,To,Co,gm,vm,ym,new q)),l&&(gm.fromBufferAttribute(l,h),vm.fromBufferAttribute(l,d),ym.fromBufferAttribute(l,p),m.uv2=ii.getUV(gx,Eo,To,Co,gm,vm,ym,new q));let y={a:h,b:d,c:p,normal:new L,materialIndex:0};ii.getNormal(Eo,To,Co,y.normal),m.face=y}return m}var ol=class extends st{constructor(e=1,t=1,r=1,i=1,n=1,s=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:s};let a=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s);let o=[],l=[],h=[],d=[],p=0,f=0;m("z","y","x",-1,-1,r,t,e,s,n,0),m("z","y","x",1,-1,r,t,-e,s,n,1),m("x","z","y",1,1,e,r,t,i,s,2),m("x","z","y",1,-1,e,r,-t,i,s,3),m("x","y","z",1,-1,e,t,r,i,n,4),m("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(o),this.setAttribute("position",new We(l,3)),this.setAttribute("normal",new We(h,3)),this.setAttribute("uv",new We(d,2));function m(y,b,x,v,g,_,S,T,A,M,O){let P=_/A,C=S/M,N=_/2,U=S/2,V=T/2,k=A+1,G=M+1,Z=0,W=0,$=new L;for(let ae=0;ae<G;ae++){let te=ae*C-U;for(let H=0;H<k;H++){let X=H*P-N;$[y]=X*v,$[b]=te*g,$[x]=V,l.push($.x,$.y,$.z),$[y]=0,$[b]=0,$[x]=T>0?1:-1,h.push($.x,$.y,$.z),d.push(H/A),d.push(1-ae/M),Z+=1}}for(let ae=0;ae<M;ae++)for(let te=0;te<A;te++){let H=p+te+k*ae,X=p+te+k*(ae+1),J=p+(te+1)+k*(ae+1),se=p+(te+1)+k*ae;o.push(H,X,se),o.push(X,J,se),W+=6}a.addGroup(f,W,O),f+=W,p+=Z}}static fromJSON(e){return new ol(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Yh(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function Wi(e){let t={};for(let r=0;r<e.length;r++){let i=Yh(e[r]);for(let n in i)t[n]=i[n]}return t}var pc={clone:Yh,merge:Wi},Dj=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Rj=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Bi=class extends $i{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Dj,this.fragmentShader=Rj,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Yh(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}};Bi.prototype.isShaderMaterial=!0;var su=class extends Nt{constructor(){super();this.type="Camera",this.matrixWorldInverse=new He,this.projectionMatrix=new He,this.projectionMatrixInverse=new He}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};su.prototype.isCamera=!0;var Pi=class extends su{constructor(e=50,t=1,r=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=yp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Gd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return yp*2*Math.atan(Math.tan(Gd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Gd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let o=s.fullWidth,l=s.fullHeight;n+=s.offsetX*i/o,t-=s.offsetY*r/l,i*=s.width/o,r*=s.height/l}let a=this.filmOffset;a!==0&&(n+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};Pi.prototype.isPerspectiveCamera=!0;var Bu=90,zu=1,$b=class extends Nt{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;let i=new Pi(Bu,zu,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new L(1,0,0)),this.add(i);let n=new Pi(Bu,zu,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new L(-1,0,0)),this.add(n);let s=new Pi(Bu,zu,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new L(0,1,0)),this.add(s);let a=new Pi(Bu,zu,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new L(0,-1,0)),this.add(a);let o=new Pi(Bu,zu,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new L(0,0,1)),this.add(o);let l=new Pi(Bu,zu,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new L(0,0,-1)),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,s,a,o,l]=this.children,h=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;let p=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,o),r.texture.generateMipmaps=p,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(d),e.xr.enabled=h}},jp=class extends Rr{constructor(e,t,r,i,n,s,a,o,l,h){e=e!==void 0?e:[],t=t!==void 0?t:Up,a=a!==void 0?a:Qi;super(e,t,r,i,n,s,a,o,l,h);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};jp.prototype.isCubeTexture=!0;var CP=class extends ni{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r);super(e,e,t);t=t||{},this.texture=new jp(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ar,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=ci,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ol(5,5,5),n=new Bi({name:"CubemapFromEquirect",uniforms:Yh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Er,blending:Ri});n.uniforms.tEquirect.value=t;let s=new wi(i,n),a=t.minFilter;return t.minFilter===nu&&(t.minFilter=ar),new $b(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(n)}};CP.prototype.isWebGLCubeRenderTarget=!0;var vx=new L,Nj=new L,Ij=new Dr,Ds=class{constructor(e=new L(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=vx.subVectors(r,t).cross(Nj.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(vx),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||Ij.getNormalMatrix(e),i=this.coplanarPoint(vx).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};Ds.prototype.isPlane=!0;var Fu=new Vs,bm=new L,Gv=class{constructor(e=new Ds,t=new Ds,r=new Ds,i=new Ds,n=new Ds,s=new Ds){this.planes=[e,t,r,i,n,s]}set(e,t,r,i,n,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(n),a[5].copy(s),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],l=r[5],h=r[6],d=r[7],p=r[8],f=r[9],m=r[10],y=r[11],b=r[12],x=r[13],v=r[14],g=r[15];return t[0].setComponents(a-i,d-o,y-p,g-b).normalize(),t[1].setComponents(a+i,d+o,y+p,g+b).normalize(),t[2].setComponents(a+n,d+l,y+f,g+x).normalize(),t[3].setComponents(a-n,d-l,y-f,g-x).normalize(),t[4].setComponents(a-s,d-h,y-m,g-v).normalize(),t[5].setComponents(a+s,d+h,y+m,g+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Fu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Fu)}intersectsSprite(e){return Fu.center.set(0,0,0),Fu.radius=.7071067811865476,Fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fu)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(bm.x=i.normal.x>0?e.max.x:e.min.x,bm.y=i.normal.y>0?e.max.y:e.min.y,bm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(bm)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function LP(){let e=null,t=!1,r=null,i=null;function n(s,a){r(s,a),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){r=s},setContext:function(s){e=s}}}function Bj(e,t){let r=t.isWebGL2,i=new WeakMap;function n(h,d){let p=h.array,f=h.usage,m=e.createBuffer();e.bindBuffer(d,m),e.bufferData(d,p,f),h.onUploadCallback();let y=5126;return p instanceof Float32Array?y=5126:p instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):p instanceof Uint16Array?h.isFloat16BufferAttribute?r?y=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):y=5123:p instanceof Int16Array?y=5122:p instanceof Uint32Array?y=5125:p instanceof Int32Array?y=5124:p instanceof Int8Array?y=5120:(p instanceof Uint8Array||p instanceof Uint8ClampedArray)&&(y=5121),{buffer:m,type:y,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version}}function s(h,d,p){let f=d.array,m=d.updateRange;e.bindBuffer(p,h),m.count===-1?e.bufferSubData(p,0,f):(r?e.bufferSubData(p,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):e.bufferSubData(p,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1)}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);let d=i.get(h);d&&(e.deleteBuffer(d.buffer),i.delete(h))}function l(h,d){if(h.isGLBufferAttribute){let f=i.get(h);(!f||f.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);let p=i.get(h);p===void 0?i.set(h,n(h,d)):p.version<h.version&&(s(p.buffer,h,d),p.version=h.version)}return{get:a,remove:o,update:l}}var Vv=class extends st{constructor(e=1,t=1,r=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,s=t/2,a=Math.floor(r),o=Math.floor(i),l=a+1,h=o+1,d=e/a,p=t/o,f=[],m=[],y=[],b=[];for(let x=0;x<h;x++){let v=x*p-s;for(let g=0;g<l;g++){let _=g*d-n;m.push(_,-v,0),y.push(0,0,1),b.push(g/a),b.push(1-x/o)}}for(let x=0;x<o;x++)for(let v=0;v<a;v++){let g=v+l*x,_=v+l*(x+1),S=v+1+l*(x+1),T=v+1+l*x;f.push(g,_,T),f.push(_,S,T)}this.setIndex(f),this.setAttribute("position",new We(m,3)),this.setAttribute("normal",new We(y,3)),this.setAttribute("uv",new We(b,2))}static fromJSON(e){return new Vv(e.width,e.height,e.widthSegments,e.heightSegments)}},zj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Fj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Uj=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,kj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,Hj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Gj="vec3 transformed = vec3( position );",Vj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jj=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {
	float fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );
	return ( f90 - f0 ) * fresnel + f0;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,Wj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Jj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Yj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Xj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Qj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Kj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Zj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,$j=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,e8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,t8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,r8=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,i8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,n8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,s8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,a8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,o8="gl_FragColor = linearToOutputTexel( gl_FragColor );",l8=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,u8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,h8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,c8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,d8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,p8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,f8=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,m8=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,g8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,v8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,y8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,x8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,w8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,b8=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,_8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,S8=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,A8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,M8=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,E8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,T8=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,C8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	#ifdef SPECULAR
		vec3 specularIntensityFactor = vec3( specularIntensity );
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );
	#else
		vec3 specularIntensityFactor = vec3( 1.0 );
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularColorF90 = vec3( 1.0 );
	#endif
	material.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
	material.specularColorF90 = vec3( 1.0 );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,L8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
	vec3 specularColorF90;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,O8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,P8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,D8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,R8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,N8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,I8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,B8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,z8=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,F8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,U8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,k8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,G8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,V8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,j8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,W8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,J8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Y8=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,X8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,q8=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Q8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,K8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Z8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,$8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,tW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,rW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,iW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,aW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,lW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,hW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,cW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gW=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vW=`#ifdef USE_TRANSMISSION
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition.xyz / vWorldPosition.w;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	float ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );
	vec3 transmission = transmissionFactor * getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );
#endif`,yW=`#ifdef USE_TRANSMISSION
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec4 vWorldPosition;
	vec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {
		vec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);
		vec3 modelScale;
		modelScale.x = length(vec3(modelMatrix[0].xyz));
		modelScale.y = length(vec3(modelMatrix[1].xyz));
		modelScale.z = length(vec3(modelMatrix[2].xyz));
		return normalize(refractionVector) * thickness * modelScale;
	}
	float applyIorToRoughness(float roughness, float ior) {
		return roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);
	}
	vec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {
		float framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);
		return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;
	}
	vec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {
		if (attenuationDistance == 0.0) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;
			vec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);			return transmittance * radiance;
		}
	}
	vec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance) {
		vec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);
		vec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);
		return (1.0 - specularColor) * attenuatedColor * baseColor;
	}
#endif`,xW=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,wW=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,bW=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,_W=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,SW=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,AW=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,MW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,EW=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,TW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,CW=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,LW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,OW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,PW=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,DW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,RW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,NW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,IW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,BW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,FW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UW=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,kW=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HW=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VW=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
		#ifdef USE_TANGENT
			vTangent = normalize( transformedTangent );
			vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
		#endif
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,jW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WW=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YW=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XW=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <transmission_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qW=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#ifdef USE_TRANSMISSION
	varying vec4 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition;
#endif
}`,QW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,KW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ZW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$W=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,e9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,t9=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,r9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,i9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Bt={alphamap_fragment:zj,alphamap_pars_fragment:Fj,alphatest_fragment:Uj,aomap_fragment:kj,aomap_pars_fragment:Hj,begin_vertex:Gj,beginnormal_vertex:Vj,bsdfs:jj,bumpmap_pars_fragment:Wj,clipping_planes_fragment:Jj,clipping_planes_pars_fragment:Yj,clipping_planes_pars_vertex:Xj,clipping_planes_vertex:qj,color_fragment:Qj,color_pars_fragment:Kj,color_pars_vertex:Zj,color_vertex:$j,common:e8,cube_uv_reflection_fragment:t8,defaultnormal_vertex:r8,displacementmap_pars_vertex:i8,displacementmap_vertex:n8,emissivemap_fragment:s8,emissivemap_pars_fragment:a8,encodings_fragment:o8,encodings_pars_fragment:l8,envmap_fragment:u8,envmap_common_pars_fragment:h8,envmap_pars_fragment:c8,envmap_pars_vertex:d8,envmap_physical_pars_fragment:S8,envmap_vertex:p8,fog_vertex:f8,fog_pars_vertex:m8,fog_fragment:g8,fog_pars_fragment:v8,gradientmap_pars_fragment:y8,lightmap_fragment:x8,lightmap_pars_fragment:w8,lights_lambert_vertex:b8,lights_pars_begin:_8,lights_toon_fragment:A8,lights_toon_pars_fragment:M8,lights_phong_fragment:E8,lights_phong_pars_fragment:T8,lights_physical_fragment:C8,lights_physical_pars_fragment:L8,lights_fragment_begin:O8,lights_fragment_maps:P8,lights_fragment_end:D8,logdepthbuf_fragment:R8,logdepthbuf_pars_fragment:N8,logdepthbuf_pars_vertex:I8,logdepthbuf_vertex:B8,map_fragment:z8,map_pars_fragment:F8,map_particle_fragment:U8,map_particle_pars_fragment:k8,metalnessmap_fragment:H8,metalnessmap_pars_fragment:G8,morphnormal_vertex:V8,morphtarget_pars_vertex:j8,morphtarget_vertex:W8,normal_fragment_begin:J8,normal_fragment_maps:Y8,normalmap_pars_fragment:X8,clearcoat_normal_fragment_begin:q8,clearcoat_normal_fragment_maps:Q8,clearcoat_pars_fragment:K8,packing:Z8,premultiplied_alpha_fragment:$8,project_vertex:eW,dithering_fragment:tW,dithering_pars_fragment:rW,roughnessmap_fragment:iW,roughnessmap_pars_fragment:nW,shadowmap_pars_fragment:sW,shadowmap_pars_vertex:aW,shadowmap_vertex:oW,shadowmask_pars_fragment:lW,skinbase_vertex:uW,skinning_pars_vertex:hW,skinning_vertex:cW,skinnormal_vertex:dW,specularmap_fragment:pW,specularmap_pars_fragment:fW,tonemapping_fragment:mW,tonemapping_pars_fragment:gW,transmission_fragment:vW,transmission_pars_fragment:yW,uv_pars_fragment:xW,uv_pars_vertex:wW,uv_vertex:bW,uv2_pars_fragment:_W,uv2_pars_vertex:SW,uv2_vertex:AW,worldpos_vertex:MW,background_frag:EW,background_vert:TW,cube_frag:CW,cube_vert:LW,depth_frag:OW,depth_vert:PW,distanceRGBA_frag:DW,distanceRGBA_vert:RW,equirect_frag:NW,equirect_vert:IW,linedashed_frag:BW,linedashed_vert:zW,meshbasic_frag:FW,meshbasic_vert:UW,meshlambert_frag:kW,meshlambert_vert:HW,meshmatcap_frag:GW,meshmatcap_vert:VW,meshtoon_frag:jW,meshtoon_vert:WW,meshphong_frag:JW,meshphong_vert:YW,meshphysical_frag:XW,meshphysical_vert:qW,normal_frag:QW,normal_vert:KW,points_frag:ZW,points_vert:$W,shadow_frag:e9,shadow_vert:t9,sprite_frag:r9,sprite_vert:i9},Fe={common:{diffuse:{value:new Ue(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Dr},uv2Transform:{value:new Dr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ue(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ue(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Dr}},sprite:{diffuse:{value:new Ue(16777215)},opacity:{value:1},center:{value:new q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Dr}}},ha={basic:{uniforms:Wi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:Wi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:Wi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)},specular:{value:new Ue(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:Wi([Fe.common,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.roughnessmap,Fe.metalnessmap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:Wi([Fe.common,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.gradientmap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:Wi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:Wi([Fe.points,Fe.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:Wi([Fe.common,Fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:Wi([Fe.common,Fe.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:Wi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.normal_vert,fragmentShader:Bt.normal_frag},sprite:{uniforms:Wi([Fe.sprite,Fe.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new Dr},t2D:{value:null}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},cube:{uniforms:Wi([Fe.envmap,{opacity:{value:1}}]),vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:Wi([Fe.common,Fe.displacementmap,{referencePosition:{value:new L},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:Wi([Fe.lights,Fe.fog,{color:{value:new Ue(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};ha.physical={uniforms:Wi([ha.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new q(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ue(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Ue(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Ue(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};function n9(e,t,r,i,n){let s=new Ue(0),a=0,o,l,h=null,d=0,p=null;function f(y,b){let x=!1,v=b.isScene===!0?b.background:null;v&&v.isTexture&&(v=t.get(v));let g=e.xr,_=g.getSession&&g.getSession();_&&_.environmentBlendMode==="additive"&&(v=null),v===null?m(s,a):v&&v.isColor&&(m(v,1),x=!0),(e.autoClear||x)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Hp)?(l===void 0&&(l=new wi(new ol(1,1,1),new Bi({name:"BackgroundCubeMaterial",uniforms:Yh(ha.cube.uniforms),vertexShader:ha.cube.vertexShader,fragmentShader:ha.cube.fragmentShader,side:Er,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(S,T,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,(h!==v||d!==v.version||p!==e.toneMapping)&&(l.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),y.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(o===void 0&&(o=new wi(new Vv(2,2),new Bi({name:"BackgroundMaterial",uniforms:Yh(ha.background.uniforms),vertexShader:ha.background.vertexShader,fragmentShader:ha.background.fragmentShader,side:sl,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=v,v.matrixAutoUpdate===!0&&v.updateMatrix(),o.material.uniforms.uvTransform.value.copy(v.matrix),(h!==v||d!==v.version||p!==e.toneMapping)&&(o.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),y.unshift(o,o.geometry,o.material,0,0,null))}function m(y,b){r.buffers.color.setClear(y.r,y.g,y.b,b,n)}return{getClearColor:function(){return s},setClearColor:function(y,b=1){s.set(y),a=b,m(s,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,m(s,a)},render:f}}function s9(e,t,r,i){let n=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=b(null),h=l;function d(V,k,G,Z,W){let $=!1;if(a){let ae=y(Z,G,k);h!==ae&&(h=ae,f(h.object)),$=x(Z,W),$&&v(Z,W)}else{let ae=k.wireframe===!0;(h.geometry!==Z.id||h.program!==G.id||h.wireframe!==ae)&&(h.geometry=Z.id,h.program=G.id,h.wireframe=ae,$=!0)}V.isInstancedMesh===!0&&($=!0),W!==null&&r.update(W,34963),$&&(M(V,k,G,Z),W!==null&&e.bindBuffer(34963,r.get(W).buffer))}function p(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function f(V){return i.isWebGL2?e.bindVertexArray(V):s.bindVertexArrayOES(V)}function m(V){return i.isWebGL2?e.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function y(V,k,G){let Z=G.wireframe===!0,W=o[V.id];W===void 0&&(W={},o[V.id]=W);let $=W[k.id];$===void 0&&($={},W[k.id]=$);let ae=$[Z];return ae===void 0&&(ae=b(p()),$[Z]=ae),ae}function b(V){let k=[],G=[],Z=[];for(let W=0;W<n;W++)k[W]=0,G[W]=0,Z[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:G,attributeDivisors:Z,object:V,attributes:{},index:null}}function x(V,k){let G=h.attributes,Z=V.attributes,W=0;for(let $ in Z){let ae=G[$],te=Z[$];if(ae===void 0||ae.attribute!==te||ae.data!==te.data)return!0;W++}return h.attributesNum!==W||h.index!==k}function v(V,k){let G={},Z=V.attributes,W=0;for(let $ in Z){let ae=Z[$],te={};te.attribute=ae,ae.data&&(te.data=ae.data),G[$]=te,W++}h.attributes=G,h.attributesNum=W,h.index=k}function g(){let V=h.newAttributes;for(let k=0,G=V.length;k<G;k++)V[k]=0}function _(V){S(V,0)}function S(V,k){let G=h.newAttributes,Z=h.enabledAttributes,W=h.attributeDivisors;G[V]=1,Z[V]===0&&(e.enableVertexAttribArray(V),Z[V]=1),W[V]!==k&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,k),W[V]=k)}function T(){let V=h.newAttributes,k=h.enabledAttributes;for(let G=0,Z=k.length;G<Z;G++)k[G]!==V[G]&&(e.disableVertexAttribArray(G),k[G]=0)}function A(V,k,G,Z,W,$){i.isWebGL2===!0&&(G===5124||G===5125)?e.vertexAttribIPointer(V,k,G,W,$):e.vertexAttribPointer(V,k,G,Z,W,$)}function M(V,k,G,Z){if(i.isWebGL2===!1&&(V.isInstancedMesh||Z.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;g();let W=Z.attributes,$=G.getAttributes(),ae=k.defaultAttributeValues;for(let te in $){let H=$[te];if(H>=0){let X=W[te];if(X!==void 0){let J=X.normalized,se=X.itemSize,ge=r.get(X);if(ge===void 0)continue;let Y=ge.buffer,be=ge.type,fe=ge.bytesPerElement;if(X.isInterleavedBufferAttribute){let ee=X.data,Q=ee.stride,ie=X.offset;ee&&ee.isInstancedInterleavedBuffer?(S(H,ee.meshPerAttribute),Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=ee.meshPerAttribute*ee.count)):_(H),e.bindBuffer(34962,Y),A(H,se,be,J,Q*fe,ie*fe)}else X.isInstancedBufferAttribute?(S(H,X.meshPerAttribute),Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=X.meshPerAttribute*X.count)):_(H),e.bindBuffer(34962,Y),A(H,se,be,J,0,0)}else if(te==="instanceMatrix"){let J=r.get(V.instanceMatrix);if(J===void 0)continue;let se=J.buffer,ge=J.type;S(H+0,1),S(H+1,1),S(H+2,1),S(H+3,1),e.bindBuffer(34962,se),e.vertexAttribPointer(H+0,4,ge,!1,64,0),e.vertexAttribPointer(H+1,4,ge,!1,64,16),e.vertexAttribPointer(H+2,4,ge,!1,64,32),e.vertexAttribPointer(H+3,4,ge,!1,64,48)}else if(te==="instanceColor"){let J=r.get(V.instanceColor);if(J===void 0)continue;let se=J.buffer,ge=J.type;S(H,1),e.bindBuffer(34962,se),e.vertexAttribPointer(H,3,ge,!1,12,0)}else if(ae!==void 0){let J=ae[te];if(J!==void 0)switch(J.length){case 2:e.vertexAttrib2fv(H,J);break;case 3:e.vertexAttrib3fv(H,J);break;case 4:e.vertexAttrib4fv(H,J);break;default:e.vertexAttrib1fv(H,J)}}}}T()}function O(){N();for(let V in o){let k=o[V];for(let G in k){let Z=k[G];for(let W in Z)m(Z[W].object),delete Z[W];delete k[G]}delete o[V]}}function P(V){if(o[V.id]===void 0)return;let k=o[V.id];for(let G in k){let Z=k[G];for(let W in Z)m(Z[W].object),delete Z[W];delete k[G]}delete o[V.id]}function C(V){for(let k in o){let G=o[k];if(G[V.id]===void 0)continue;let Z=G[V.id];for(let W in Z)m(Z[W].object),delete Z[W];delete G[V.id]}}function N(){U(),h!==l&&(h=l,f(h.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:N,resetDefaultState:U,dispose:O,releaseStatesOfGeometry:P,releaseStatesOfProgram:C,initAttributes:g,enableAttribute:_,disableUnusedAttributes:T}}function a9(e,t,r,i){let n=i.isWebGL2,s;function a(h){s=h}function o(h,d){e.drawArrays(s,h,d),r.update(d,s,1)}function l(h,d,p){if(p===0)return;let f,m;if(n)f=e,m="drawArraysInstanced";else if(f=t.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](s,h,d,p),r.update(d,s,p)}this.setMode=a,this.render=o,this.renderInstances=l}function o9(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let M=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(M){if(M==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";M="mediump"}return M==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&e instanceof WebGL2ComputeRenderingContext,o=r.precision!==void 0?r.precision:"highp",l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let h=a||t.has("WEBGL_draw_buffers"),d=r.logarithmicDepthBuffer===!0,p=e.getParameter(34930),f=e.getParameter(35660),m=e.getParameter(3379),y=e.getParameter(34076),b=e.getParameter(34921),x=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),_=f>0,S=a||t.has("OES_texture_float"),T=_&&S,A=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:n,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:y,maxAttributes:b,maxVertexUniforms:x,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:_,floatFragmentTextures:S,floatVertexTextures:T,maxSamples:A}}function l9(e){let t=this,r=null,i=0,n=!1,s=!1,a=new Ds,o=new Dr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,f,m){let y=p.length!==0||f||i!==0||n;return n=f,r=d(p,m,0),i=p.length,y},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,h()},this.setState=function(p,f,m){let y=p.clippingPlanes,b=p.clipIntersection,x=p.clipShadows,v=e.get(p);if(!n||y===null||y.length===0||s&&!x)s?d(null):h();else{let g=s?0:i,_=g*4,S=v.clippingState||null;l.value=S,S=d(y,f,_,m);for(let T=0;T!==_;++T)S[T]=r[T];v.clippingState=S,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=g}};function h(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function d(p,f,m,y){let b=p!==null?p.length:0,x=null;if(b!==0){if(x=l.value,y!==!0||x===null){let v=m+b*4,g=f.matrixWorldInverse;o.getNormalMatrix(g),(x===null||x.length<v)&&(x=new Float32Array(v));for(let _=0,S=m;_!==b;++_,S+=4)a.copy(p[_]).applyMatrix4(g,o),a.normal.toArray(x,S),x[S+3]=a.constant}l.value=x,l.needsUpdate=!0}return t.numPlanes=b,t.numIntersection=0,x}}function u9(e){let t=new WeakMap;function r(a,o){return o===Q1?a.mapping=Up:o===K1&&(a.mapping=kp),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===Q1||o===K1)if(t.has(a)){let l=t.get(a).texture;return r(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let h=e.getRenderTarget(),d=new CP(l.height/2);return d.fromEquirectangularTexture(e,a),t.set(a,d),e.setRenderTarget(h),a.addEventListener("dispose",n),r(d.texture,a.mapping)}else return null}}return a}function n(a){let o=a.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var jv=class extends su{constructor(e=-1,t=1,r=1,i=-1,n=.1,s=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,s=r+e,a=i+t,o=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,a-=h*this.view.offsetY,o=a-h*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};jv.prototype.isOrthographicCamera=!0;var Wv=class extends Bi{constructor(e){super(e);this.type="RawShaderMaterial"}};Wv.prototype.isRawShaderMaterial=!0;var Ih=4,Qo=8,sa=Math.pow(2,Qo),OP=[.125,.215,.35,.446,.526,.582],PP=Qo-Ih+1+OP.length,Uu=20,ya={[Ii]:0,[Gp]:1,[kv]:2,[qb]:3,[Qb]:4,[Kb]:5,[Vp]:6},Pl=new Kl({side:Er,depthWrite:!1,depthTest:!1}),h9=new wi(new ol,Pl),yx=new jv,{_lodPlanes:id,_sizeLods:NT,_sigmas:_m}=p9(),IT=new Ue,xx=null,Dl=(1+Math.sqrt(5))/2,ku=1/Dl,BT=[new L(1,1,1),new L(-1,1,1),new L(1,1,-1),new L(-1,1,-1),new L(0,Dl,ku),new L(0,Dl,-ku),new L(ku,0,Dl),new L(-ku,0,Dl),new L(Dl,ku,0),new L(-Dl,ku,0)];function zT(e){let t=Math.max(e.r,e.g,e.b),r=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return e.multiplyScalar(Math.pow(2,-r)),(r+128)/255}var c9=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=f9(Uu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){xx=this._renderer.getRenderTarget();let n=this._allocateTargets();return this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=kT(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=UT(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<id.length;e++)id[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(xx),e.scissorTest=!1,Sm(e,0,0,e.width,e.height)}_fromTexture(e){xx=this._renderer.getRenderTarget();let t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){let t={magFilter:qr,minFilter:qr,generateMipmaps:!1,type:_i,format:p6,encoding:d9(e)?e.encoding:kv,depthBuffer:!1},r=FT(t);return r.depthBuffer=!e,this._pingPongRenderTarget=FT(t),r}_compileMaterial(e){let t=new wi(id[0],e);this._renderer.compile(t,yx)}_sceneToCubeUV(e,t,r,i){let n=90,s=1,a=new Pi(n,s,t,r),o=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.outputEncoding,f=h.toneMapping;h.getClearColor(IT),h.toneMapping=Vl,h.outputEncoding=Ii,h.autoClear=!1;let m=!1,y=e.background;if(y){if(y.isColor){Pl.color.copy(y).convertSRGBToLinear(),e.background=null;let b=zT(Pl.color);Pl.opacity=b,m=!0}}else{Pl.color.copy(IT).convertSRGBToLinear();let b=zT(Pl.color);Pl.opacity=b,m=!0}for(let b=0;b<6;b++){let x=b%3;x==0?(a.up.set(0,o[b],0),a.lookAt(l[b],0,0)):x==1?(a.up.set(0,0,o[b]),a.lookAt(0,l[b],0)):(a.up.set(0,o[b],0),a.lookAt(0,0,l[b])),Sm(i,x*sa,b>2?sa:0,sa,sa),h.setRenderTarget(i),m&&h.render(h9,a),h.render(e,a)}h.toneMapping=f,h.outputEncoding=p,h.autoClear=d}_textureToCubeUV(e,t){let r=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=kT()):this._equirectShader==null&&(this._equirectShader=UT());let i=e.isCubeTexture?this._cubemapShader:this._equirectShader,n=new wi(id[0],i),s=i.uniforms;s.envMap.value=e,e.isCubeTexture||s.texelSize.value.set(1/e.image.width,1/e.image.height),s.inputEncoding.value=ya[e.encoding],s.outputEncoding.value=ya[t.texture.encoding],Sm(t,0,0,3*sa,2*sa),r.setRenderTarget(t),r.render(n,yx)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<PP;i++){let n=Math.sqrt(_m[i]*_m[i]-_m[i-1]*_m[i-1]),s=BT[(i-1)%BT.length];this._blur(e,i-1,i,n,s)}t.autoClear=r}_blur(e,t,r,i,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",n),this._halfBlur(s,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,s,a){let o=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let h=3,d=new wi(id[i],l),p=l.uniforms,f=NT[r]-1,m=isFinite(n)?Math.PI/(2*f):2*Math.PI/(2*Uu-1),y=n/m,b=isFinite(n)?1+Math.floor(h*y):Uu;b>Uu&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Uu}`);let x=[],v=0;for(let T=0;T<Uu;++T){let A=T/y,M=Math.exp(-A*A/2);x.push(M),T==0?v+=M:T<b&&(v+=2*M)}for(let T=0;T<x.length;T++)x[T]=x[T]/v;p.envMap.value=e.texture,p.samples.value=b,p.weights.value=x,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a),p.dTheta.value=m,p.mipInt.value=Qo-r,p.inputEncoding.value=ya[e.texture.encoding],p.outputEncoding.value=ya[e.texture.encoding];let g=NT[i],_=3*Math.max(0,sa-2*g),S=(i===0?0:2*sa)+2*g*(i>Qo-Ih?i-Qo+Ih:0);Sm(t,_,S,3*g,2*g),o.setRenderTarget(t),o.render(d,yx)}};function d9(e){return e===void 0||e.type!==_i?!1:e.encoding===Ii||e.encoding===Gp||e.encoding===Vp}function p9(){let e=[],t=[],r=[],i=Qo;for(let n=0;n<PP;n++){let s=Math.pow(2,i);t.push(s);let a=1/s;n>Qo-Ih?a=OP[n-Qo+Ih-1]:n==0&&(a=0),r.push(a);let o=1/(s-1),l=-o/2,h=1+o/2,d=[l,l,h,l,h,h,l,l,h,h,l,h],p=6,f=6,m=3,y=2,b=1,x=new Float32Array(m*f*p),v=new Float32Array(y*f*p),g=new Float32Array(b*f*p);for(let S=0;S<p;S++){let T=S%3*2/3-1,A=S>2?0:-1,M=[T,A,0,T+2/3,A,0,T+2/3,A+1,0,T,A,0,T+2/3,A+1,0,T,A+1,0];x.set(M,m*f*S),v.set(d,y*f*S);let O=[S,S,S,S,S,S];g.set(O,b*f*S)}let _=new st;_.setAttribute("position",new dt(x,m)),_.setAttribute("uv",new dt(v,y)),_.setAttribute("faceIndex",new dt(g,b)),e.push(_),i>Ih&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:r}}function FT(e){let t=new ni(3*sa,3*sa,e);return t.texture.mapping=Hp,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Sm(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function f9(e){let t=new Float32Array(e),r=new L(0,1,0);return new Wv({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:ya[Ii]},outputEncoding:{value:ya[Ii]}},vertexShader:e_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${t_()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ri,depthTest:!1,depthWrite:!1})}function UT(){let e=new q(1,1);return new Wv({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:ya[Ii]},outputEncoding:{value:ya[Ii]}},vertexShader:e_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${t_()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ri,depthTest:!1,depthWrite:!1})}function kT(){return new Wv({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ya[Ii]},outputEncoding:{value:ya[Ii]}},vertexShader:e_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${t_()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ri,depthTest:!1,depthWrite:!1})}function e_(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function t_(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function m9(e){let t=new WeakMap,r=null;function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let l=o.mapping,h=l===Q1||l===K1,d=l===Up||l===kp;if(h||d){if(t.has(o))return t.get(o).texture;{let p=o.image;if(h&&p&&p.height>0||d&&p&&n(p)){let f=e.getRenderTarget();r===null&&(r=new c9(e));let m=h?r.fromEquirectangular(o):r.fromCubemap(o);return t.set(o,m),e.setRenderTarget(f),o.addEventListener("dispose",s),m.texture}else return null}}}return o}function n(o){let l=0,h=6;for(let d=0;d<h;d++)o[d]!==void 0&&l++;return l===h}function s(o){let l=o.target;l.removeEventListener("dispose",s);let h=t.get(l);h!==void 0&&(h.delete(l),h.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:a}}function g9(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function v9(e,t,r,i){let n={},s=new WeakMap;function a(p){let f=p.target;f.index!==null&&t.remove(f.index);for(let y in f.attributes)t.remove(f.attributes[y]);f.removeEventListener("dispose",a),delete n[f.id];let m=s.get(f);m&&(t.remove(m),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,r.memory.geometries--}function o(p,f){return n[f.id]===!0||(f.addEventListener("dispose",a),n[f.id]=!0,r.memory.geometries++),f}function l(p){let f=p.attributes;for(let y in f)t.update(f[y],34962);let m=p.morphAttributes;for(let y in m){let b=m[y];for(let x=0,v=b.length;x<v;x++)t.update(b[x],34962)}}function h(p){let f=[],m=p.index,y=p.attributes.position,b=0;if(m!==null){let g=m.array;b=m.version;for(let _=0,S=g.length;_<S;_+=3){let T=g[_+0],A=g[_+1],M=g[_+2];f.push(T,A,A,M,M,T)}}else{let g=y.array;b=y.version;for(let _=0,S=g.length/3-1;_<S;_+=3){let T=_+0,A=_+1,M=_+2;f.push(T,A,A,M,M,T)}}let x=new(TP(f)>65535?jd:EP)(f,1);x.version=b;let v=s.get(p);v&&t.remove(v),s.set(p,x)}function d(p){let f=s.get(p);if(f){let m=p.index;m!==null&&f.version<m.version&&h(p)}else h(p);return s.get(p)}return{get:o,update:l,getWireframeAttribute:d}}function y9(e,t,r,i){let n=i.isWebGL2,s;function a(f){s=f}let o,l;function h(f){o=f.type,l=f.bytesPerElement}function d(f,m){e.drawElements(s,m,o,f*l),r.update(m,s,1)}function p(f,m,y){if(y===0)return;let b,x;if(n)b=e,x="drawElementsInstanced";else if(b=t.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",b===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[x](s,m,o,f*l,y),r.update(m,s,y)}this.setMode=a,this.setIndex=h,this.render=d,this.renderInstances=p}function x9(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(r.calls++,a){case 4:r.triangles+=o*(s/3);break;case 1:r.lines+=o*(s/2);break;case 3:r.lines+=o*(s-1);break;case 2:r.lines+=o*s;break;case 0:r.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function w9(e,t){return e[0]-t[0]}function b9(e,t){return Math.abs(t[1])-Math.abs(e[1])}function _9(e){let t={},r=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function n(s,a,o,l){let h=s.morphTargetInfluences,d=h===void 0?0:h.length,p=t[a.id];if(p===void 0||p.length!==d){p=[];for(let x=0;x<d;x++)p[x]=[x,0];t[a.id]=p}for(let x=0;x<d;x++){let v=p[x];v[0]=x,v[1]=h[x]}p.sort(b9);for(let x=0;x<8;x++)x<d&&p[x][1]?(i[x][0]=p[x][0],i[x][1]=p[x][1]):(i[x][0]=Number.MAX_SAFE_INTEGER,i[x][1]=0);i.sort(w9);let f=a.morphAttributes.position,m=a.morphAttributes.normal,y=0;for(let x=0;x<8;x++){let v=i[x],g=v[0],_=v[1];g!==Number.MAX_SAFE_INTEGER&&_?(f&&a.getAttribute("morphTarget"+x)!==f[g]&&a.setAttribute("morphTarget"+x,f[g]),m&&a.getAttribute("morphNormal"+x)!==m[g]&&a.setAttribute("morphNormal"+x,m[g]),r[x]=_,y+=_):(f&&a.hasAttribute("morphTarget"+x)===!0&&a.deleteAttribute("morphTarget"+x),m&&a.hasAttribute("morphNormal"+x)===!0&&a.deleteAttribute("morphNormal"+x),r[x]=0)}let b=a.morphTargetsRelative?1:1-y;l.getUniforms().setValue(e,"morphTargetBaseInfluence",b),l.getUniforms().setValue(e,"morphTargetInfluences",r)}return{update:n}}function S9(e,t,r,i){let n=new WeakMap;function s(l){let h=i.render.frame,d=l.geometry,p=t.get(l,d);return n.get(p)!==h&&(t.update(p),n.set(p,h)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),p}function a(){n=new WeakMap}function o(l){let h=l.target;h.removeEventListener("dispose",o),r.remove(h.instanceMatrix),h.instanceColor!==null&&r.remove(h.instanceColor)}return{update:s,dispose:a}}var DP=class extends Rr{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=qr,this.minFilter=qr,this.wrapR=yi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}};DP.prototype.isDataTexture2DArray=!0;var RP=class extends Rr{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=qr,this.minFilter=qr,this.wrapR=yi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}};RP.prototype.isDataTexture3D=!0;var NP=new Rr,A9=new DP,M9=new RP,IP=new jp,HT=[],GT=[],VT=new Float32Array(16),jT=new Float32Array(9),WT=new Float32Array(4);function fc(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,s=HT[n];if(s===void 0&&(s=new Float32Array(n),HT[n]=s),t!==0){i.toArray(s,0);for(let a=1,o=0;a!==t;++a)o+=r,e[a].toArray(s,o)}return s}function sn(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function Zi(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function BP(e,t){let r=GT[t];r===void 0&&(r=new Int32Array(t),GT[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function E9(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function T9(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(sn(r,t))return;e.uniform2fv(this.addr,t),Zi(r,t)}}function C9(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(sn(r,t))return;e.uniform3fv(this.addr,t),Zi(r,t)}}function L9(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(sn(r,t))return;e.uniform4fv(this.addr,t),Zi(r,t)}}function O9(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(sn(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),Zi(r,t)}else{if(sn(r,i))return;WT.set(i),e.uniformMatrix2fv(this.addr,!1,WT),Zi(r,i)}}function P9(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(sn(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),Zi(r,t)}else{if(sn(r,i))return;jT.set(i),e.uniformMatrix3fv(this.addr,!1,jT),Zi(r,i)}}function D9(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(sn(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),Zi(r,t)}else{if(sn(r,i))return;VT.set(i),e.uniformMatrix4fv(this.addr,!1,VT),Zi(r,i)}}function R9(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function N9(e,t){let r=this.cache;sn(r,t)||(e.uniform2iv(this.addr,t),Zi(r,t))}function I9(e,t){let r=this.cache;sn(r,t)||(e.uniform3iv(this.addr,t),Zi(r,t))}function B9(e,t){let r=this.cache;sn(r,t)||(e.uniform4iv(this.addr,t),Zi(r,t))}function z9(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function F9(e,t){let r=this.cache;sn(r,t)||(e.uniform2uiv(this.addr,t),Zi(r,t))}function U9(e,t){let r=this.cache;sn(r,t)||(e.uniform3uiv(this.addr,t),Zi(r,t))}function k9(e,t){let r=this.cache;sn(r,t)||(e.uniform4uiv(this.addr,t),Zi(r,t))}function H9(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.safeSetTexture2D(t||NP,n)}function G9(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||M9,n)}function V9(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.safeSetTextureCube(t||IP,n)}function j9(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||A9,n)}function W9(e){switch(e){case 5126:return E9;case 35664:return T9;case 35665:return C9;case 35666:return L9;case 35674:return O9;case 35675:return P9;case 35676:return D9;case 5124:case 35670:return R9;case 35667:case 35671:return N9;case 35668:case 35672:return I9;case 35669:case 35673:return B9;case 5125:return z9;case 36294:return F9;case 36295:return U9;case 36296:return k9;case 35678:case 36198:case 36298:case 36306:case 35682:return H9;case 35679:case 36299:case 36307:return G9;case 35680:case 36300:case 36308:case 36293:return V9;case 36289:case 36303:case 36311:case 36292:return j9}}function J9(e,t){e.uniform1fv(this.addr,t)}function Y9(e,t){let r=fc(t,this.size,2);e.uniform2fv(this.addr,r)}function X9(e,t){let r=fc(t,this.size,3);e.uniform3fv(this.addr,r)}function q9(e,t){let r=fc(t,this.size,4);e.uniform4fv(this.addr,r)}function Q9(e,t){let r=fc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function K9(e,t){let r=fc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function Z9(e,t){let r=fc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function $9(e,t){e.uniform1iv(this.addr,t)}function e7(e,t){e.uniform2iv(this.addr,t)}function t7(e,t){e.uniform3iv(this.addr,t)}function r7(e,t){e.uniform4iv(this.addr,t)}function i7(e,t){e.uniform1uiv(this.addr,t)}function n7(e,t){e.uniform2uiv(this.addr,t)}function s7(e,t){e.uniform3uiv(this.addr,t)}function a7(e,t){e.uniform4uiv(this.addr,t)}function o7(e,t,r){let i=t.length,n=BP(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.safeSetTexture2D(t[s]||NP,n[s])}function l7(e,t,r){let i=t.length,n=BP(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.safeSetTextureCube(t[s]||IP,n[s])}function u7(e){switch(e){case 5126:return J9;case 35664:return Y9;case 35665:return X9;case 35666:return q9;case 35674:return Q9;case 35675:return K9;case 35676:return Z9;case 5124:case 35670:return $9;case 35667:case 35671:return e7;case 35668:case 35672:return t7;case 35669:case 35673:return r7;case 5125:return i7;case 36294:return n7;case 36295:return s7;case 36296:return a7;case 35678:case 36198:case 36298:case 36306:case 35682:return o7;case 35680:case 36300:case 36308:case 36293:return l7}}function h7(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=W9(t.type)}function zP(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=u7(t.type)}zP.prototype.updateCache=function(e){let t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Zi(t,e)};function FP(e){this.id=e,this.seq=[],this.map={}}FP.prototype.setValue=function(e,t,r){let i=this.seq;for(let n=0,s=i.length;n!==s;++n){let a=i[n];a.setValue(e,t[a.id],r)}};var wx=/(\w+)(\])?(\[|\.)?/g;function JT(e,t){e.seq.push(t),e.map[t.id]=t}function c7(e,t,r){let i=e.name,n=i.length;for(wx.lastIndex=0;;){let s=wx.exec(i),a=wx.lastIndex,o=s[1],l=s[2]==="]",h=s[3];if(l&&(o=o|0),h===void 0||h==="["&&a+2===n){JT(r,h===void 0?new h7(o,e,t):new zP(o,e,t));break}else{let d=r.map[o];d===void 0&&(d=new FP(o),JT(r,d)),r=d}}}function Ko(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),s=e.getUniformLocation(t,n.name);c7(n,s,this)}}Ko.prototype.setValue=function(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)};Ko.prototype.setOptional=function(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)};Ko.upload=function(e,t,r,i){for(let n=0,s=t.length;n!==s;++n){let a=t[n],o=r[a.id];o.needsUpdate!==!1&&a.setValue(e,o.value,i)}};Ko.seqWithValue=function(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let s=e[i];s.id in t&&r.push(s)}return r};function YT(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var d7=0;function p7(e){let t=e.split(`
`);for(let r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join(`
`)}function UP(e){switch(e){case Ii:return["Linear","( value )"];case Gp:return["sRGB","( value )"];case kv:return["RGBE","( value )"];case qb:return["RGBM","( value, 7.0 )"];case Qb:return["RGBM","( value, 16.0 )"];case Kb:return["RGBD","( value, 256.0 )"];case Vp:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case ej:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function XT(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let s=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+r+`
`+n+p7(s)}function Hu(e,t){let r=UP(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function f7(e,t){let r=UP(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function m7(e,t){let r;switch(t){case e6:r="Linear";break;case t6:r="Reinhard";break;case r6:r="OptimizedCineon";break;case i6:r="ACESFilmic";break;case n6:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function g7(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Sd).join(`
`)}function v7(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function y7(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let s=e.getActiveAttrib(t,n).name;r[s]=e.getAttribLocation(t,s)}return r}function Sd(e){return e!==""}function qT(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function QT(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var x7=/^[ \t]*#include +<([\w\d./]+)>/gm;function tw(e){return e.replace(x7,w7)}function w7(e,t){let r=Bt[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return tw(r)}var b7=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,_7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function KT(e){return e.replace(_7,kP).replace(b7,S7)}function S7(e,t,r,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),kP(e,t,r,i)}function kP(e,t,r,i){let n="";for(let s=parseInt(t);s<parseInt(r);s++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function ZT(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function A7(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===pP?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===fP?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===_d&&(t="SHADOWMAP_TYPE_VSM"),t}function M7(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Up:case kp:t="ENVMAP_TYPE_CUBE";break;case Hp:case Uv:t="ENVMAP_TYPE_CUBE_UV";break}return t}function E7(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case kp:case Uv:t="ENVMAP_MODE_REFRACTION";break}return t}function T7(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Fv:t="ENVMAP_BLENDING_MULTIPLY";break;case ZV:t="ENVMAP_BLENDING_MIX";break;case $V:t="ENVMAP_BLENDING_ADD";break}return t}function C7(e,t,r,i){let n=e.getContext(),s=r.defines,a=r.vertexShader,o=r.fragmentShader,l=A7(r),h=M7(r),d=E7(r),p=T7(r),f=e.gammaFactor>0?e.gammaFactor:1,m=r.isWebGL2?"":g7(r),y=v7(s),b=n.createProgram(),x,v,g=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(x=[y].filter(Sd).join(`
`),x.length>0&&(x+=`
`),v=[m,y].filter(Sd).join(`
`),v.length>0&&(v+=`
`)):(x=[ZT(r),"#define SHADER_NAME "+r.shaderName,y,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularTintMap?"#define USE_SPECULARTINTMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sd).join(`
`),v=[m,ZT(r),"#define SHADER_NAME "+r.shaderName,y,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+d:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularTintMap?"#define USE_SPECULARTINTMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Vl?"#define TONE_MAPPING":"",r.toneMapping!==Vl?Bt.tonemapping_pars_fragment:"",r.toneMapping!==Vl?m7("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",Bt.encodings_pars_fragment,r.map?Hu("mapTexelToLinear",r.mapEncoding):"",r.matcap?Hu("matcapTexelToLinear",r.matcapEncoding):"",r.envMap?Hu("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMap?Hu("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.specularTintMap?Hu("specularTintMapTexelToLinear",r.specularTintMapEncoding):"",r.lightMap?Hu("lightMapTexelToLinear",r.lightMapEncoding):"",f7("linearToOutputTexel",r.outputEncoding),r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Sd).join(`
`)),a=tw(a),a=qT(a,r),a=QT(a,r),o=tw(o),o=qT(o,r),o=QT(o,r),a=KT(a),o=KT(o),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,x=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,v=["#define varying in",r.glslVersion===_T?"":"out highp vec4 pc_fragColor;",r.glslVersion===_T?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let _=g+x+a,S=g+v+o,T=YT(n,35633,_),A=YT(n,35632,S);if(n.attachShader(b,T),n.attachShader(b,A),r.index0AttributeName!==void 0?n.bindAttribLocation(b,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(b,0,"position"),n.linkProgram(b),e.debug.checkShaderErrors){let P=n.getProgramInfoLog(b).trim(),C=n.getShaderInfoLog(T).trim(),N=n.getShaderInfoLog(A).trim(),U=!0,V=!0;if(n.getProgramParameter(b,35714)===!1){U=!1;let k=XT(n,T,"vertex"),G=XT(n,A,"fragment");console.error("THREE.WebGLProgram: shader error: ",n.getError(),"35715",n.getProgramParameter(b,35715),"gl.getProgramInfoLog",P,k,G)}else P!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):(C===""||N==="")&&(V=!1);V&&(this.diagnostics={runnable:U,programLog:P,vertexShader:{log:C,prefix:x},fragmentShader:{log:N,prefix:v}})}n.deleteShader(T),n.deleteShader(A);let M;this.getUniforms=function(){return M===void 0&&(M=new Ko(n,b)),M};let O;return this.getAttributes=function(){return O===void 0&&(O=y7(n,b)),O},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(b),this.program=void 0},this.name=r.shaderName,this.id=d7++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=T,this.fragmentShader=A,this}function L7(e,t,r,i,n,s,a){let o=[],l=n.isWebGL2,h=n.logarithmicDepthBuffer,d=n.floatVertexTextures,p=n.maxVertexUniforms,f=n.vertexTextures,m=n.precision,y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},b=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function x(M){let O=M.skeleton.bones;if(d)return 1024;{let P=Math.floor((p-20)/4),C=Math.min(P,O.length);return C<O.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+O.length+" bones. This GPU supports "+C+"."),0):C}}function v(M){let O;return M&&M.isTexture?O=M.encoding:M&&M.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),O=M.texture.encoding):O=Ii,O}function g(M,O,P,C,N){let U=C.fog,V=M.isMeshStandardMaterial?C.environment:null,k=(M.isMeshStandardMaterial?r:t).get(M.envMap||V),G=y[M.type],Z=N.isSkinnedMesh?x(N):0;M.precision!==null&&(m=n.getMaxPrecision(M.precision),m!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",m,"instead."));let W,$;if(G){let te=ha[G];W=te.vertexShader,$=te.fragmentShader}else W=M.vertexShader,$=M.fragmentShader;let ae=e.getRenderTarget();return{isWebGL2:l,shaderID:G,shaderName:M.type,vertexShader:W,fragmentShader:$,defines:M.defines,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:m,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:f,outputEncoding:ae!==null?v(ae.texture):e.outputEncoding,map:!!M.map,mapEncoding:v(M.map),matcap:!!M.matcap,matcapEncoding:v(M.matcap),envMap:!!k,envMapMode:k&&k.mapping,envMapEncoding:v(k),envMapCubeUV:!!k&&(k.mapping===Hp||k.mapping===Uv),lightMap:!!M.lightMap,lightMapEncoding:v(M.lightMap),aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,emissiveMapEncoding:v(M.emissiveMap),bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===rj,tangentSpaceNormalMap:M.normalMapType===cc,clearcoatMap:!!M.clearcoatMap,clearcoatRoughnessMap:!!M.clearcoatRoughnessMap,clearcoatNormalMap:!!M.clearcoatNormalMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularTintMap:!!M.specularTintMap,specularTintMapEncoding:v(M.specularTintMap),alphaMap:!!M.alphaMap,gradientMap:!!M.gradientMap,sheen:!!M.sheen,transmission:!!M.transmission,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!N.geometry&&!!N.geometry.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!N.geometry&&!!N.geometry.attributes.color&&N.geometry.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularTintMap,uvsVertexOnly:!(!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatNormalMap||!!M.transmission||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularTintMap)&&!!M.displacementMap,fog:!!U,useFog:M.fog,fogExp2:U&&U.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:h,skinning:N.isSkinnedMesh===!0&&Z>0,maxBones:Z,useVertexTexture:d,morphTargets:!!N.geometry&&!!N.geometry.morphAttributes.position,morphNormals:!!N.geometry&&!!N.geometry.morphAttributes.normal,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:e.shadowMap.enabled&&P.length>0,shadowMapType:e.shadowMap.type,toneMapping:M.toneMapped?e.toneMapping:Vl,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,alphaTest:M.alphaTest,doubleSided:M.side===xi,flipSided:M.side===Er,depthPacking:M.depthPacking!==void 0?M.depthPacking:!1,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function _(M){let O=[];if(M.shaderID?O.push(M.shaderID):(O.push(M.fragmentShader),O.push(M.vertexShader)),M.defines!==void 0)for(let P in M.defines)O.push(P),O.push(M.defines[P]);if(M.isRawShaderMaterial===!1){for(let P=0;P<b.length;P++)O.push(M[b[P]]);O.push(e.outputEncoding),O.push(e.gammaFactor)}return O.push(M.customProgramCacheKey),O.join()}function S(M){let O=y[M.type],P;if(O){let C=ha[O];P=pc.clone(C.uniforms)}else P=M.uniforms;return P}function T(M,O){let P;for(let C=0,N=o.length;C<N;C++){let U=o[C];if(U.cacheKey===O){P=U,++P.usedTimes;break}}return P===void 0&&(P=new C7(e,O,M,s),o.push(P)),P}function A(M){if(--M.usedTimes==0){let O=o.indexOf(M);o[O]=o[o.length-1],o.pop(),M.destroy()}}return{getParameters:g,getProgramCacheKey:_,getUniforms:S,acquireProgram:T,releaseProgram:A,programs:o}}function O7(){let e=new WeakMap;function t(s){let a=e.get(s);return a===void 0&&(a={},e.set(s,a)),a}function r(s){e.delete(s)}function i(s,a,o){e.get(s)[a]=o}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function P7(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $T(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function eC(e){let t=[],r=0,i=[],n=[],s=[],a={id:-1};function o(){r=0,i.length=0,n.length=0,s.length=0}function l(m,y,b,x,v,g){let _=t[r],S=e.get(b);return _===void 0?(_={id:m.id,object:m,geometry:y,material:b,program:S.program||a,groupOrder:x,renderOrder:m.renderOrder,z:v,group:g},t[r]=_):(_.id=m.id,_.object=m,_.geometry=y,_.material=b,_.program=S.program||a,_.groupOrder=x,_.renderOrder=m.renderOrder,_.z=v,_.group=g),r++,_}function h(m,y,b,x,v,g){let _=l(m,y,b,x,v,g);b.transmission>0?n.push(_):b.transparent===!0?s.push(_):i.push(_)}function d(m,y,b,x,v,g){let _=l(m,y,b,x,v,g);b.transmission>0?n.unshift(_):b.transparent===!0?s.unshift(_):i.unshift(_)}function p(m,y){i.length>1&&i.sort(m||P7),n.length>1&&n.sort(y||$T),s.length>1&&s.sort(y||$T)}function f(){for(let m=r,y=t.length;m<y;m++){let b=t[m];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.program=null,b.group=null}}return{opaque:i,transmissive:n,transparent:s,init:o,push:h,unshift:d,finish:f,sort:p}}function D7(e){let t=new WeakMap;function r(n,s){let a;return t.has(n)===!1?(a=new eC(e),t.set(n,[a])):s>=t.get(n).length?(a=new eC(e),t.get(n).push(a)):a=t.get(n)[s],a}function i(){t=new WeakMap}return{get:r,dispose:i}}function R7(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new L,color:new Ue};break;case"SpotLight":r={position:new L,direction:new L,color:new Ue,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new L,color:new Ue,distance:0,decay:0};break;case"HemisphereLight":r={direction:new L,skyColor:new Ue,groundColor:new Ue};break;case"RectAreaLight":r={color:new Ue,position:new L,halfWidth:new L,halfHeight:new L};break}return e[t.id]=r,r}}}function N7(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var I7=0;function B7(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function z7(e,t){let r=new R7,i=N7(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)n.probe.push(new L);let s=new L,a=new He,o=new He;function l(d){let p=0,f=0,m=0;for(let M=0;M<9;M++)n.probe[M].set(0,0,0);let y=0,b=0,x=0,v=0,g=0,_=0,S=0,T=0;d.sort(B7);for(let M=0,O=d.length;M<O;M++){let P=d[M],C=P.color,N=P.intensity,U=P.distance,V=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)p+=C.r*N,f+=C.g*N,m+=C.b*N;else if(P.isLightProbe)for(let k=0;k<9;k++)n.probe[k].addScaledVector(P.sh.coefficients[k],N);else if(P.isDirectionalLight){let k=r.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){let G=P.shadow,Z=i.get(P);Z.shadowBias=G.bias,Z.shadowNormalBias=G.normalBias,Z.shadowRadius=G.radius,Z.shadowMapSize=G.mapSize,n.directionalShadow[y]=Z,n.directionalShadowMap[y]=V,n.directionalShadowMatrix[y]=P.shadow.matrix,_++}n.directional[y]=k,y++}else if(P.isSpotLight){let k=r.get(P);if(k.position.setFromMatrixPosition(P.matrixWorld),k.color.copy(C).multiplyScalar(N),k.distance=U,k.coneCos=Math.cos(P.angle),k.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),k.decay=P.decay,P.castShadow){let G=P.shadow,Z=i.get(P);Z.shadowBias=G.bias,Z.shadowNormalBias=G.normalBias,Z.shadowRadius=G.radius,Z.shadowMapSize=G.mapSize,n.spotShadow[x]=Z,n.spotShadowMap[x]=V,n.spotShadowMatrix[x]=P.shadow.matrix,T++}n.spot[x]=k,x++}else if(P.isRectAreaLight){let k=r.get(P);k.color.copy(C).multiplyScalar(N),k.halfWidth.set(P.width*.5,0,0),k.halfHeight.set(0,P.height*.5,0),n.rectArea[v]=k,v++}else if(P.isPointLight){let k=r.get(P);if(k.color.copy(P.color).multiplyScalar(P.intensity),k.distance=P.distance,k.decay=P.decay,P.castShadow){let G=P.shadow,Z=i.get(P);Z.shadowBias=G.bias,Z.shadowNormalBias=G.normalBias,Z.shadowRadius=G.radius,Z.shadowMapSize=G.mapSize,Z.shadowCameraNear=G.camera.near,Z.shadowCameraFar=G.camera.far,n.pointShadow[b]=Z,n.pointShadowMap[b]=V,n.pointShadowMatrix[b]=P.shadow.matrix,S++}n.point[b]=k,b++}else if(P.isHemisphereLight){let k=r.get(P);k.skyColor.copy(P.color).multiplyScalar(N),k.groundColor.copy(P.groundColor).multiplyScalar(N),n.hemi[g]=k,g++}}v>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Fe.LTC_FLOAT_1,n.rectAreaLTC2=Fe.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Fe.LTC_HALF_1,n.rectAreaLTC2=Fe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=p,n.ambient[1]=f,n.ambient[2]=m;let A=n.hash;(A.directionalLength!==y||A.pointLength!==b||A.spotLength!==x||A.rectAreaLength!==v||A.hemiLength!==g||A.numDirectionalShadows!==_||A.numPointShadows!==S||A.numSpotShadows!==T)&&(n.directional.length=y,n.spot.length=x,n.rectArea.length=v,n.point.length=b,n.hemi.length=g,n.directionalShadow.length=_,n.directionalShadowMap.length=_,n.pointShadow.length=S,n.pointShadowMap.length=S,n.spotShadow.length=T,n.spotShadowMap.length=T,n.directionalShadowMatrix.length=_,n.pointShadowMatrix.length=S,n.spotShadowMatrix.length=T,A.directionalLength=y,A.pointLength=b,A.spotLength=x,A.rectAreaLength=v,A.hemiLength=g,A.numDirectionalShadows=_,A.numPointShadows=S,A.numSpotShadows=T,n.version=I7++)}function h(d,p){let f=0,m=0,y=0,b=0,x=0,v=p.matrixWorldInverse;for(let g=0,_=d.length;g<_;g++){let S=d[g];if(S.isDirectionalLight){let T=n.directional[f];T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),f++}else if(S.isSpotLight){let T=n.spot[y];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(v),T.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),y++}else if(S.isRectAreaLight){let T=n.rectArea[b];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(v),o.identity(),a.copy(S.matrixWorld),a.premultiply(v),o.extractRotation(a),T.halfWidth.set(S.width*.5,0,0),T.halfHeight.set(0,S.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),b++}else if(S.isPointLight){let T=n.point[m];T.position.setFromMatrixPosition(S.matrixWorld),T.position.applyMatrix4(v),m++}else if(S.isHemisphereLight){let T=n.hemi[x];T.direction.setFromMatrixPosition(S.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),x++}}}return{setup:l,setupView:h,state:n}}function tC(e,t){let r=new z7(e,t),i=[],n=[];function s(){i.length=0,n.length=0}function a(d){i.push(d)}function o(d){n.push(d)}function l(){r.setup(i)}function h(d){r.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:h,pushLight:a,pushShadow:o}}function F7(e,t){let r=new WeakMap;function i(s,a=0){let o;return r.has(s)===!1?(o=new tC(e,t),r.set(s,[o])):a>=r.get(s).length?(o=new tC(e,t),r.get(s).push(o)):o=r.get(s)[a],o}function n(){r=new WeakMap}return{get:i,dispose:n}}var HP=class extends $i{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=Hv,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}};HP.prototype.isMeshDepthMaterial=!0;var GP=class extends $i{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new L,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};GP.prototype.isMeshDistanceMaterial=!0;var U7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,k7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function VP(e,t,r){let i=new Gv,n=new q,s=new q,a=new Tt,o=new HP({depthPacking:tj}),l=new GP,h={},d=r.maxTextureSize,p={0:Er,1:sl,2:xi},f=new Bi({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new q},radius:{value:4}},vertexShader:k7,fragmentShader:U7}),m=f.clone();m.defines.HORIZONTAL_PASS=1;let y=new st;y.setAttribute("position",new dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new wi(y,f),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pP,this.render=function(S,T,A){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||S.length===0)return;let M=e.getRenderTarget(),O=e.getActiveCubeFace(),P=e.getActiveMipmapLevel(),C=e.state;C.setBlending(Ri),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);for(let N=0,U=S.length;N<U;N++){let V=S[N],k=V.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;n.copy(k.mapSize);let G=k.getFrameExtents();if(n.multiply(G),s.copy(k.mapSize),(n.x>d||n.y>d)&&(n.x>d&&(s.x=Math.floor(d/G.x),n.x=s.x*G.x,k.mapSize.x=s.x),n.y>d&&(s.y=Math.floor(d/G.y),n.y=s.y*G.y,k.mapSize.y=s.y)),k.map===null&&!k.isPointLightShadow&&this.type===_d){let W={minFilter:ar,magFilter:ar,format:ci};k.map=new ni(n.x,n.y,W),k.map.texture.name=V.name+".shadowMap",k.mapPass=new ni(n.x,n.y,W),k.camera.updateProjectionMatrix()}if(k.map===null){let W={minFilter:qr,magFilter:qr,format:ci};k.map=new ni(n.x,n.y,W),k.map.texture.name=V.name+".shadowMap",k.camera.updateProjectionMatrix()}e.setRenderTarget(k.map),e.clear();let Z=k.getViewportCount();for(let W=0;W<Z;W++){let $=k.getViewport(W);a.set(s.x*$.x,s.y*$.y,s.x*$.z,s.y*$.w),C.viewport(a),k.updateMatrices(V,W),i=k.getFrustum(),_(T,A,k.camera,V,this.type)}!k.isPointLightShadow&&this.type===_d&&v(k,A),k.needsUpdate=!1}x.needsUpdate=!1,e.setRenderTarget(M,O,P)};function v(S,T){let A=t.update(b);f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,e.setRenderTarget(S.mapPass),e.clear(),e.renderBufferDirect(T,null,A,f,b,null),m.uniforms.shadow_pass.value=S.mapPass.texture,m.uniforms.resolution.value=S.mapSize,m.uniforms.radius.value=S.radius,e.setRenderTarget(S.map),e.clear(),e.renderBufferDirect(T,null,A,m,b,null)}function g(S,T,A,M,O,P,C){let N=null,U=M.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(U!==void 0?N=U:N=M.isPointLight===!0?l:o,e.localClippingEnabled&&A.clipShadows===!0&&A.clippingPlanes.length!==0){let V=N.uuid,k=A.uuid,G=h[V];G===void 0&&(G={},h[V]=G);let Z=G[k];Z===void 0&&(Z=N.clone(),G[k]=Z),N=Z}return N.visible=A.visible,N.wireframe=A.wireframe,C===_d?N.side=A.shadowSide!==null?A.shadowSide:A.side:N.side=A.shadowSide!==null?A.shadowSide:p[A.side],N.clipShadows=A.clipShadows,N.clippingPlanes=A.clippingPlanes,N.clipIntersection=A.clipIntersection,N.wireframeLinewidth=A.wireframeLinewidth,N.linewidth=A.linewidth,M.isPointLight===!0&&N.isMeshDistanceMaterial===!0&&(N.referencePosition.setFromMatrixPosition(M.matrixWorld),N.nearDistance=O,N.farDistance=P),N}function _(S,T,A,M,O){if(S.visible===!1)return;if(S.layers.test(T.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&O===_d)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,S.matrixWorld);let C=t.update(S),N=S.material;if(Array.isArray(N)){let U=C.groups;for(let V=0,k=U.length;V<k;V++){let G=U[V],Z=N[G.materialIndex];if(Z&&Z.visible){let W=g(S,C,Z,M,A.near,A.far,O);e.renderBufferDirect(A,null,C,W,S,G)}}}else if(N.visible){let U=g(S,C,N,M,A.near,A.far,O);e.renderBufferDirect(A,null,C,U,S,null)}}let P=S.children;for(let C=0,N=P.length;C<N;C++)_(P[C],T,A,M,O)}}function H7(e,t,r){let i=r.isWebGL2;function n(){let re=!1,Ie=new Tt,Me=null,Ve=new Tt(0,0,0,0);return{setMask:function(Be){Me!==Be&&!re&&(e.colorMask(Be,Be,Be,Be),Me=Be)},setLocked:function(Be){re=Be},setClear:function(Be,at,kt,vr,Si){Si===!0&&(Be*=vr,at*=vr,kt*=vr),Ie.set(Be,at,kt,vr),Ve.equals(Ie)===!1&&(e.clearColor(Be,at,kt,vr),Ve.copy(Ie))},reset:function(){re=!1,Me=null,Ve.set(-1,0,0,0)}}}function s(){let re=!1,Ie=null,Me=null,Ve=null;return{setTest:function(Be){Be?se(2929):ge(2929)},setMask:function(Be){Ie!==Be&&!re&&(e.depthMask(Be),Ie=Be)},setFunc:function(Be){if(Me!==Be){if(Be)switch(Be){case WV:e.depthFunc(512);break;case JV:e.depthFunc(519);break;case YV:e.depthFunc(513);break;case q1:e.depthFunc(515);break;case XV:e.depthFunc(514);break;case qV:e.depthFunc(518);break;case QV:e.depthFunc(516);break;case KV:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);Me=Be}},setLocked:function(Be){re=Be},setClear:function(Be){Ve!==Be&&(e.clearDepth(Be),Ve=Be)},reset:function(){re=!1,Ie=null,Me=null,Ve=null}}}function a(){let re=!1,Ie=null,Me=null,Ve=null,Be=null,at=null,kt=null,vr=null,Si=null;return{setTest:function($t){re||($t?se(2960):ge(2960))},setMask:function($t){Ie!==$t&&!re&&(e.stencilMask($t),Ie=$t)},setFunc:function($t,di,Fi){(Me!==$t||Ve!==di||Be!==Fi)&&(e.stencilFunc($t,di,Fi),Me=$t,Ve=di,Be=Fi)},setOp:function($t,di,Fi){(at!==$t||kt!==di||vr!==Fi)&&(e.stencilOp($t,di,Fi),at=$t,kt=di,vr=Fi)},setLocked:function($t){re=$t},setClear:function($t){Si!==$t&&(e.clearStencil($t),Si=$t)},reset:function(){re=!1,Ie=null,Me=null,Ve=null,Be=null,at=null,kt=null,vr=null,Si=null}}}let o=new n,l=new s,h=new a,d={},p=null,f={},m=null,y=!1,b=null,x=null,v=null,g=null,_=null,S=null,T=null,A=!1,M=null,O=null,P=null,C=null,N=null,U=e.getParameter(35661),V=!1,k=0,G=e.getParameter(7938);G.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(G)[1]),V=k>=1):G.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),V=k>=2);let Z=null,W={},$=e.getParameter(3088),ae=e.getParameter(2978),te=new Tt().fromArray($),H=new Tt().fromArray(ae);function X(re,Ie,Me){let Ve=new Uint8Array(4),Be=e.createTexture();e.bindTexture(re,Be),e.texParameteri(re,10241,9728),e.texParameteri(re,10240,9728);for(let at=0;at<Me;at++)e.texImage2D(Ie+at,0,6408,1,1,0,6408,5121,Ve);return Be}let J={};J[3553]=X(3553,3553,1),J[34067]=X(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),h.setClear(0),se(2929),l.setFunc(q1),me(!1),pe(sT),se(2884),ie(Ri);function se(re){d[re]!==!0&&(e.enable(re),d[re]=!0)}function ge(re){d[re]!==!1&&(e.disable(re),d[re]=!1)}function Y(re){re!==p&&(e.bindFramebuffer(36160,re),p=re)}function be(re,Ie){return Ie===null&&p!==null&&(Ie=p),f[re]!==Ie?(e.bindFramebuffer(re,Ie),f[re]=Ie,i&&(re===36009&&(f[36160]=Ie),re===36160&&(f[36009]=Ie)),!0):!1}function fe(re){return m!==re?(e.useProgram(re),m=re,!0):!1}let ee={[eh]:32774,[NV]:32778,[IV]:32779};if(i)ee[uT]=32775,ee[hT]=32776;else{let re=t.get("EXT_blend_minmax");re!==null&&(ee[uT]=re.MIN_EXT,ee[hT]=re.MAX_EXT)}let Q={[BV]:0,[zV]:1,[FV]:768,[gP]:770,[jV]:776,[GV]:774,[kV]:772,[UV]:769,[vP]:771,[VV]:775,[HV]:773};function ie(re,Ie,Me,Ve,Be,at,kt,vr){if(re===Ri){y===!0&&(ge(3042),y=!1);return}if(y===!1&&(se(3042),y=!0),re!==RV){if(re!==b||vr!==A){if((x!==eh||_!==eh)&&(e.blendEquation(32774),x=eh,_=eh),vr)switch(re){case Ph:e.blendFuncSeparate(1,771,1,771);break;case aT:e.blendFunc(1,1);break;case oT:e.blendFuncSeparate(0,0,769,771);break;case lT:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case Ph:e.blendFuncSeparate(770,771,1,771);break;case aT:e.blendFunc(770,1);break;case oT:e.blendFunc(0,769);break;case lT:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}v=null,g=null,S=null,T=null,b=re,A=vr}return}Be=Be||Ie,at=at||Me,kt=kt||Ve,(Ie!==x||Be!==_)&&(e.blendEquationSeparate(ee[Ie],ee[Be]),x=Ie,_=Be),(Me!==v||Ve!==g||at!==S||kt!==T)&&(e.blendFuncSeparate(Q[Me],Q[Ve],Q[at],Q[kt]),v=Me,g=Ve,S=at,T=kt),b=re,A=null}function oe(re,Ie){re.side===xi?ge(2884):se(2884);let Me=re.side===Er;Ie&&(Me=!Me),me(Me),re.blending===Ph&&re.transparent===!1?ie(Ri):ie(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.premultipliedAlpha),l.setFunc(re.depthFunc),l.setTest(re.depthTest),l.setMask(re.depthWrite),o.setMask(re.colorWrite);let Ve=re.stencilWrite;h.setTest(Ve),Ve&&(h.setMask(re.stencilWriteMask),h.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),h.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),Ae(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?se(32926):ge(32926)}function me(re){M!==re&&(re?e.frontFace(2304):e.frontFace(2305),M=re)}function pe(re){re!==PV?(se(2884),re!==O&&(re===sT?e.cullFace(1029):re===DV?e.cullFace(1028):e.cullFace(1032))):ge(2884),O=re}function we(re){re!==P&&(V&&e.lineWidth(re),P=re)}function Ae(re,Ie,Me){re?(se(32823),(C!==Ie||N!==Me)&&(e.polygonOffset(Ie,Me),C=Ie,N=Me)):ge(32823)}function F(re){re?se(3089):ge(3089)}function B(re){re===void 0&&(re=33984+U-1),Z!==re&&(e.activeTexture(re),Z=re)}function de(re,Ie){Z===null&&B();let Me=W[Z];Me===void 0&&(Me={type:void 0,texture:void 0},W[Z]=Me),(Me.type!==re||Me.texture!==Ie)&&(e.bindTexture(re,Ie||J[re]),Me.type=re,Me.texture=Ie)}function Oe(){let re=W[Z];re!==void 0&&re.type!==void 0&&(e.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function Ce(){try{e.compressedTexImage2D.apply(e,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Re(){try{e.texImage2D.apply(e,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ze(){try{e.texImage3D.apply(e,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ke(re){te.equals(re)===!1&&(e.scissor(re.x,re.y,re.z,re.w),te.copy(re))}function je(re){H.equals(re)===!1&&(e.viewport(re.x,re.y,re.z,re.w),H.copy(re))}function Ye(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},Z=null,W={},p=null,f={},m=null,y=!1,b=null,x=null,v=null,g=null,_=null,S=null,T=null,A=!1,M=null,O=null,P=null,C=null,N=null,te.set(0,0,e.canvas.width,e.canvas.height),H.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),h.reset()}return{buffers:{color:o,depth:l,stencil:h},enable:se,disable:ge,bindFramebuffer:be,bindXRFramebuffer:Y,useProgram:fe,setBlending:ie,setMaterial:oe,setFlipSided:me,setCullFace:pe,setLineWidth:we,setPolygonOffset:Ae,setScissorTest:F,activeTexture:B,bindTexture:de,unbindTexture:Oe,compressedTexImage2D:Ce,texImage2D:Re,texImage3D:ze,scissor:Ke,viewport:je,reset:Ye}}function G7(e,t,r,i,n,s,a){let o=n.isWebGL2,l=n.maxTextures,h=n.maxCubemapSize,d=n.maxTextureSize,p=n.maxSamples,f=new WeakMap,m,y=!1;try{y=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(F,B){return y?new OffscreenCanvas(F,B):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function x(F,B,de,Oe){let Ce=1;if((F.width>Oe||F.height>Oe)&&(Ce=Oe/Math.max(F.width,F.height)),Ce<1||B===!0)if(typeof HTMLImageElement!="undefined"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&F instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&F instanceof ImageBitmap){let Re=B?SP:Math.floor,ze=Re(Ce*F.width),Ke=Re(Ce*F.height);m===void 0&&(m=b(ze,Ke));let je=de?b(ze,Ke):m;return je.width=ze,je.height=Ke,je.getContext("2d").drawImage(F,0,0,ze,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+ze+"x"+Ke+")."),je}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function v(F){return ew(F.width)&&ew(F.height)}function g(F){return o?!1:F.wrapS!==yi||F.wrapT!==yi||F.minFilter!==qr&&F.minFilter!==ar}function _(F,B){return F.generateMipmaps&&B&&F.minFilter!==qr&&F.minFilter!==ar}function S(F,B,de,Oe,Ce=1){e.generateMipmap(F);let Re=i.get(B);Re.__maxMipLevel=Math.log2(Math.max(de,Oe,Ce))}function T(F,B,de){if(o===!1)return B;if(F!==null){if(e[F]!==void 0)return e[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Oe=B;return B===6403&&(de===5126&&(Oe=33326),de===5131&&(Oe=33325),de===5121&&(Oe=33321)),B===6407&&(de===5126&&(Oe=34837),de===5131&&(Oe=34843),de===5121&&(Oe=32849)),B===6408&&(de===5126&&(Oe=34836),de===5131&&(Oe=34842),de===5121&&(Oe=32856)),(Oe===33325||Oe===33326||Oe===34842||Oe===34836)&&t.get("EXT_color_buffer_float"),Oe}function A(F){return F===qr||F===Z1||F===$1?9728:9729}function M(F){let B=F.target;B.removeEventListener("dispose",M),P(B),B.isVideoTexture&&f.delete(B),a.memory.textures--}function O(F){let B=F.target;B.removeEventListener("dispose",O),C(B)}function P(F){let B=i.get(F);B.__webglInit!==void 0&&(e.deleteTexture(B.__webglTexture),i.remove(F))}function C(F){let B=F.texture,de=i.get(F),Oe=i.get(B);if(F){if(Oe.__webglTexture!==void 0&&(e.deleteTexture(Oe.__webglTexture),a.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)e.deleteFramebuffer(de.__webglFramebuffer[Ce]),de.__webglDepthbuffer&&e.deleteRenderbuffer(de.__webglDepthbuffer[Ce]);else e.deleteFramebuffer(de.__webglFramebuffer),de.__webglDepthbuffer&&e.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&e.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer&&e.deleteRenderbuffer(de.__webglColorRenderbuffer),de.__webglDepthRenderbuffer&&e.deleteRenderbuffer(de.__webglDepthRenderbuffer);if(F.isWebGLMultipleRenderTargets)for(let Ce=0,Re=B.length;Ce<Re;Ce++){let ze=i.get(B[Ce]);ze.__webglTexture&&(e.deleteTexture(ze.__webglTexture),a.memory.textures--),i.remove(B[Ce])}i.remove(B),i.remove(F)}}let N=0;function U(){N=0}function V(){let F=N;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),N+=1,F}function k(F,B){let de=i.get(F);if(F.isVideoTexture&&oe(F),F.version>0&&de.__version!==F.version){let Oe=F.image;if(Oe===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{X(de,F,B);return}}r.activeTexture(33984+B),r.bindTexture(3553,de.__webglTexture)}function G(F,B){let de=i.get(F);if(F.version>0&&de.__version!==F.version){X(de,F,B);return}r.activeTexture(33984+B),r.bindTexture(35866,de.__webglTexture)}function Z(F,B){let de=i.get(F);if(F.version>0&&de.__version!==F.version){X(de,F,B);return}r.activeTexture(33984+B),r.bindTexture(32879,de.__webglTexture)}function W(F,B){let de=i.get(F);if(F.version>0&&de.__version!==F.version){J(de,F,B);return}r.activeTexture(33984+B),r.bindTexture(34067,de.__webglTexture)}let $={[Wh]:10497,[yi]:33071,[Xg]:33648},ae={[qr]:9728,[Z1]:9984,[$1]:9986,[ar]:9729,[xP]:9985,[nu]:9987};function te(F,B,de){if(de?(e.texParameteri(F,10242,$[B.wrapS]),e.texParameteri(F,10243,$[B.wrapT]),(F===32879||F===35866)&&e.texParameteri(F,32882,$[B.wrapR]),e.texParameteri(F,10240,ae[B.magFilter]),e.texParameteri(F,10241,ae[B.minFilter])):(e.texParameteri(F,10242,33071),e.texParameteri(F,10243,33071),(F===32879||F===35866)&&e.texParameteri(F,32882,33071),(B.wrapS!==yi||B.wrapT!==yi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(F,10240,A(B.magFilter)),e.texParameteri(F,10241,A(B.minFilter)),B.minFilter!==qr&&B.minFilter!==ar&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Oe=t.get("EXT_texture_filter_anisotropic");if(B.type===Nl&&t.has("OES_texture_float_linear")===!1||o===!1&&B.type===Dh&&t.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(e.texParameterf(F,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,n.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function H(F,B){F.__webglInit===void 0&&(F.__webglInit=!0,B.addEventListener("dispose",M),F.__webglTexture=e.createTexture(),a.memory.textures++)}function X(F,B,de){let Oe=3553;B.isDataTexture2DArray&&(Oe=35866),B.isDataTexture3D&&(Oe=32879),H(F,B),r.activeTexture(33984+de),r.bindTexture(Oe,F.__webglTexture),e.pixelStorei(37440,B.flipY),e.pixelStorei(37441,B.premultiplyAlpha),e.pixelStorei(3317,B.unpackAlignment),e.pixelStorei(37443,0);let Ce=g(B)&&v(B.image)===!1,Re=x(B.image,Ce,!1,d),ze=v(Re)||o,Ke=s.convert(B.format),je=s.convert(B.type),Ye=T(B.internalFormat,Ke,je);te(Oe,B,ze);let re,Ie=B.mipmaps;if(B.isDepthTexture)Ye=6402,o?B.type===Nl?Ye=36012:B.type===Hd?Ye=33190:B.type===Rh?Ye=35056:Ye=33189:B.type===Nl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Nh&&Ye===6402&&B.type!==qg&&B.type!==Hd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=qg,je=s.convert(B.type)),B.format===Jh&&Ye===6402&&(Ye=34041,B.type!==Rh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Rh,je=s.convert(B.type))),r.texImage2D(3553,0,Ye,Re.width,Re.height,0,Ke,je,null);else if(B.isDataTexture)if(Ie.length>0&&ze){for(let Me=0,Ve=Ie.length;Me<Ve;Me++)re=Ie[Me],r.texImage2D(3553,Me,Ye,re.width,re.height,0,Ke,je,re.data);B.generateMipmaps=!1,F.__maxMipLevel=Ie.length-1}else r.texImage2D(3553,0,Ye,Re.width,Re.height,0,Ke,je,Re.data),F.__maxMipLevel=0;else if(B.isCompressedTexture){for(let Me=0,Ve=Ie.length;Me<Ve;Me++)re=Ie[Me],B.format!==ci&&B.format!==Qi?Ke!==null?r.compressedTexImage2D(3553,Me,Ye,re.width,re.height,0,re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,Me,Ye,re.width,re.height,0,Ke,je,re.data);F.__maxMipLevel=Ie.length-1}else if(B.isDataTexture2DArray)r.texImage3D(35866,0,Ye,Re.width,Re.height,Re.depth,0,Ke,je,Re.data),F.__maxMipLevel=0;else if(B.isDataTexture3D)r.texImage3D(32879,0,Ye,Re.width,Re.height,Re.depth,0,Ke,je,Re.data),F.__maxMipLevel=0;else if(Ie.length>0&&ze){for(let Me=0,Ve=Ie.length;Me<Ve;Me++)re=Ie[Me],r.texImage2D(3553,Me,Ye,Ke,je,re);B.generateMipmaps=!1,F.__maxMipLevel=Ie.length-1}else r.texImage2D(3553,0,Ye,Ke,je,Re),F.__maxMipLevel=0;_(B,ze)&&S(Oe,B,Re.width,Re.height),F.__version=B.version,B.onUpdate&&B.onUpdate(B)}function J(F,B,de){if(B.image.length!==6)return;H(F,B),r.activeTexture(33984+de),r.bindTexture(34067,F.__webglTexture),e.pixelStorei(37440,B.flipY),e.pixelStorei(37441,B.premultiplyAlpha),e.pixelStorei(3317,B.unpackAlignment),e.pixelStorei(37443,0);let Oe=B&&(B.isCompressedTexture||B.image[0].isCompressedTexture),Ce=B.image[0]&&B.image[0].isDataTexture,Re=[];for(let Me=0;Me<6;Me++)!Oe&&!Ce?Re[Me]=x(B.image[Me],!1,!0,h):Re[Me]=Ce?B.image[Me].image:B.image[Me];let ze=Re[0],Ke=v(ze)||o,je=s.convert(B.format),Ye=s.convert(B.type),re=T(B.internalFormat,je,Ye);te(34067,B,Ke);let Ie;if(Oe){for(let Me=0;Me<6;Me++){Ie=Re[Me].mipmaps;for(let Ve=0;Ve<Ie.length;Ve++){let Be=Ie[Ve];B.format!==ci&&B.format!==Qi?je!==null?r.compressedTexImage2D(34069+Me,Ve,re,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+Me,Ve,re,Be.width,Be.height,0,je,Ye,Be.data)}}F.__maxMipLevel=Ie.length-1}else{Ie=B.mipmaps;for(let Me=0;Me<6;Me++)if(Ce){r.texImage2D(34069+Me,0,re,Re[Me].width,Re[Me].height,0,je,Ye,Re[Me].data);for(let Ve=0;Ve<Ie.length;Ve++){let Be=Ie[Ve].image[Me].image;r.texImage2D(34069+Me,Ve+1,re,Be.width,Be.height,0,je,Ye,Be.data)}}else{r.texImage2D(34069+Me,0,re,je,Ye,Re[Me]);for(let Ve=0;Ve<Ie.length;Ve++){let Be=Ie[Ve];r.texImage2D(34069+Me,Ve+1,re,je,Ye,Be.image[Me])}}F.__maxMipLevel=Ie.length}_(B,Ke)&&S(34067,B,ze.width,ze.height),F.__version=B.version,B.onUpdate&&B.onUpdate(B)}function se(F,B,de,Oe,Ce){let Re=s.convert(de.format),ze=s.convert(de.type),Ke=T(de.internalFormat,Re,ze);Ce===32879||Ce===35866?r.texImage3D(Ce,0,Ke,B.width,B.height,B.depth,0,Re,ze,null):r.texImage2D(Ce,0,Ke,B.width,B.height,0,Re,ze,null),r.bindFramebuffer(36160,F),e.framebufferTexture2D(36160,Oe,Ce,i.get(de).__webglTexture,0),r.bindFramebuffer(36160,null)}function ge(F,B,de){if(e.bindRenderbuffer(36161,F),B.depthBuffer&&!B.stencilBuffer){let Oe=33189;if(de){let Ce=B.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===Nl?Oe=36012:Ce.type===Hd&&(Oe=33190));let Re=ie(B);e.renderbufferStorageMultisample(36161,Re,Oe,B.width,B.height)}else e.renderbufferStorage(36161,Oe,B.width,B.height);e.framebufferRenderbuffer(36160,36096,36161,F)}else if(B.depthBuffer&&B.stencilBuffer){if(de){let Oe=ie(B);e.renderbufferStorageMultisample(36161,Oe,35056,B.width,B.height)}else e.renderbufferStorage(36161,34041,B.width,B.height);e.framebufferRenderbuffer(36160,33306,36161,F)}else{let Oe=B.isWebGLMultipleRenderTargets===!0?B.texture[0]:B.texture,Ce=s.convert(Oe.format),Re=s.convert(Oe.type),ze=T(Oe.internalFormat,Ce,Re);if(de){let Ke=ie(B);e.renderbufferStorageMultisample(36161,Ke,ze,B.width,B.height)}else e.renderbufferStorage(36161,ze,B.width,B.height)}e.bindRenderbuffer(36161,null)}function Y(F,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,F),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),k(B.depthTexture,0);let de=i.get(B.depthTexture).__webglTexture;if(B.depthTexture.format===Nh)e.framebufferTexture2D(36160,36096,3553,de,0);else if(B.depthTexture.format===Jh)e.framebufferTexture2D(36160,33306,3553,de,0);else throw new Error("Unknown depthTexture format")}function be(F){let B=i.get(F),de=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture){if(de)throw new Error("target.depthTexture not supported in Cube render targets");Y(B.__webglFramebuffer,F)}else if(de){B.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)r.bindFramebuffer(36160,B.__webglFramebuffer[Oe]),B.__webglDepthbuffer[Oe]=e.createRenderbuffer(),ge(B.__webglDepthbuffer[Oe],F,!1)}else r.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=e.createRenderbuffer(),ge(B.__webglDepthbuffer,F,!1);r.bindFramebuffer(36160,null)}function fe(F){let B=F.texture,de=i.get(F),Oe=i.get(B);F.addEventListener("dispose",O),F.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture=e.createTexture(),Oe.__version=B.version,a.memory.textures++);let Ce=F.isWebGLCubeRenderTarget===!0,Re=F.isWebGLMultipleRenderTargets===!0,ze=F.isWebGLMultisampleRenderTarget===!0,Ke=B.isDataTexture3D||B.isDataTexture2DArray,je=v(F)||o;if(o&&B.format===Qi&&(B.type===Nl||B.type===Dh)&&(B.format=ci,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ce){de.__webglFramebuffer=[];for(let Ye=0;Ye<6;Ye++)de.__webglFramebuffer[Ye]=e.createFramebuffer()}else if(de.__webglFramebuffer=e.createFramebuffer(),Re)if(n.drawBuffers){let Ye=F.texture;for(let re=0,Ie=Ye.length;re<Ie;re++){let Me=i.get(Ye[re]);Me.__webglTexture===void 0&&(Me.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(ze)if(o){de.__webglMultisampledFramebuffer=e.createFramebuffer(),de.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,de.__webglColorRenderbuffer);let Ye=s.convert(B.format),re=s.convert(B.type),Ie=T(B.internalFormat,Ye,re),Me=ie(F);e.renderbufferStorageMultisample(36161,Me,Ie,F.width,F.height),r.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,de.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),F.depthBuffer&&(de.__webglDepthRenderbuffer=e.createRenderbuffer(),ge(de.__webglDepthRenderbuffer,F,!0)),r.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ce){r.bindTexture(34067,Oe.__webglTexture),te(34067,B,je);for(let Ye=0;Ye<6;Ye++)se(de.__webglFramebuffer[Ye],F,B,36064,34069+Ye);_(B,je)&&S(34067,B,F.width,F.height),r.bindTexture(34067,null)}else if(Re){let Ye=F.texture;for(let re=0,Ie=Ye.length;re<Ie;re++){let Me=Ye[re],Ve=i.get(Me);r.bindTexture(3553,Ve.__webglTexture),te(3553,Me,je),se(de.__webglFramebuffer,F,Me,36064+re,3553),_(Me,je)&&S(3553,Me,F.width,F.height)}r.bindTexture(3553,null)}else{let Ye=3553;Ke&&(o?Ye=B.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),r.bindTexture(Ye,Oe.__webglTexture),te(Ye,B,je),se(de.__webglFramebuffer,F,B,36064,Ye),_(B,je)&&S(Ye,B,F.width,F.height,F.depth),r.bindTexture(Ye,null)}F.depthBuffer&&be(F)}function ee(F){let B=v(F)||o,de=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Oe=0,Ce=de.length;Oe<Ce;Oe++){let Re=de[Oe];if(_(Re,B)){let ze=F.isWebGLCubeRenderTarget?34067:3553,Ke=i.get(Re).__webglTexture;r.bindTexture(ze,Ke),S(ze,Re,F.width,F.height),r.bindTexture(ze,null)}}}function Q(F){if(F.isWebGLMultisampleRenderTarget)if(o){let B=F.width,de=F.height,Oe=16384;F.depthBuffer&&(Oe|=256),F.stencilBuffer&&(Oe|=1024);let Ce=i.get(F);r.bindFramebuffer(36008,Ce.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,Ce.__webglFramebuffer),e.blitFramebuffer(0,0,B,de,0,0,B,de,Oe,9728),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,Ce.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function ie(F){return o&&F.isWebGLMultisampleRenderTarget?Math.min(p,F.samples):0}function oe(F){let B=a.render.frame;f.get(F)!==B&&(f.set(F,B),F.update())}let me=!1,pe=!1;function we(F,B){F&&F.isWebGLRenderTarget&&(me===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),me=!0),F=F.texture),k(F,B)}function Ae(F,B){F&&F.isWebGLCubeRenderTarget&&(pe===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),pe=!0),F=F.texture),W(F,B)}this.allocateTextureUnit=V,this.resetTextureUnits=U,this.setTexture2D=k,this.setTexture2DArray=G,this.setTexture3D=Z,this.setTextureCube=W,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=ee,this.updateMultisampleRenderTarget=Q,this.safeSetTexture2D=we,this.safeSetTextureCube=Ae}function V7(e,t,r){let i=r.isWebGL2;function n(s){let a;if(s===_i)return 5121;if(s===l6)return 32819;if(s===u6)return 32820;if(s===h6)return 33635;if(s===s6)return 5120;if(s===a6)return 5122;if(s===qg)return 5123;if(s===o6)return 5124;if(s===Hd)return 5125;if(s===Nl)return 5126;if(s===Dh)return i?5131:(a=t.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===c6)return 6406;if(s===Qi)return 6407;if(s===ci)return 6408;if(s===wP)return 6409;if(s===d6)return 6410;if(s===Nh)return 6402;if(s===Jh)return 34041;if(s===f6)return 6403;if(s===m6)return 36244;if(s===g6)return 33319;if(s===v6)return 33320;if(s===y6)return 36248;if(s===x6)return 36249;if(s===cT||s===dT||s===pT||s===fT)if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===cT)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===dT)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===pT)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===fT)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===mT||s===gT||s===vT||s===yT)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===mT)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===gT)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===vT)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===yT)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===w6)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===xT||s===wT)&&(a=t.get("WEBGL_compressed_texture_etc"),a!==null)){if(s===xT)return a.COMPRESSED_RGB8_ETC2;if(s===wT)return a.COMPRESSED_RGBA8_ETC2_EAC}if(s===b6||s===_6||s===S6||s===A6||s===M6||s===E6||s===T6||s===C6||s===L6||s===O6||s===P6||s===D6||s===R6||s===N6||s===B6||s===z6||s===F6||s===U6||s===k6||s===H6||s===G6||s===V6||s===j6||s===W6||s===J6||s===Y6||s===X6||s===q6)return a=t.get("WEBGL_compressed_texture_astc"),a!==null?s:null;if(s===I6)return a=t.get("EXT_texture_compression_bptc"),a!==null?s:null;if(s===Rh)return i?34042:(a=t.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:n}}var jP=class extends Pi{constructor(e=[]){super();this.cameras=e}};jP.prototype.isArrayCamera=!0;var mh=class extends Nt{constructor(){super();this.type="Group"}};mh.prototype.isGroup=!0;var j7={type:"move"},bx=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new L,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new L),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new L,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new L),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(i=t.getPose(e.targetRaySpace,r),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(j7))),l&&e.hand){s=!0;for(let y of e.hand.values()){let b=t.getJointPose(y,r);if(l.joints[y.jointName]===void 0){let v=new mh;v.matrixAutoUpdate=!1,v.visible=!1,l.joints[y.jointName]=v,l.add(v)}let x=l.joints[y.jointName];b!==null&&(x.matrix.fromArray(b.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=b.radius),x.visible=b!==null}let h=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],p=h.position.distanceTo(d.position),f=.02,m=.005;l.inputState.pinching&&p>f+m?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&p<=f-m&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));return a!==null&&(a.visible=i!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=s!==null),this}},W7=class extends Gn{constructor(e,t){super();let r=this,i=e.state,n=null,s=1,a=null,o="local-floor",l=null,h=null,d=null,p=null,f=null,m=[],y=new Map,b=new Pi;b.layers.enable(1),b.viewport=new Tt;let x=new Pi;x.layers.enable(2),x.viewport=new Tt;let v=[b,x],g=new jP;g.layers.enable(1),g.layers.enable(2);let _=null,S=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let Z=m[G];return Z===void 0&&(Z=new bx,m[G]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(G){let Z=m[G];return Z===void 0&&(Z=new bx,m[G]=Z),Z.getGripSpace()},this.getHand=function(G){let Z=m[G];return Z===void 0&&(Z=new bx,m[G]=Z),Z.getHandSpace()};function T(G){let Z=y.get(G.inputSource);Z&&Z.dispatchEvent({type:G.type,data:G.inputSource})}function A(){y.forEach(function(G,Z){G.disconnect(Z)}),y.clear(),_=null,S=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),k.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){s=G,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){o=G,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return n},this.setSession=async function(G){if(n=G,n!==null){n.addEventListener("select",T),n.addEventListener("selectstart",T),n.addEventListener("selectend",T),n.addEventListener("squeeze",T),n.addEventListener("squeezestart",T),n.addEventListener("squeezeend",T),n.addEventListener("end",A),n.addEventListener("inputsourceschange",M);let Z=t.getContextAttributes();if(Z.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0){let W={antialias:Z.antialias,alpha:Z.alpha,depth:Z.depth,stencil:Z.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(n,t,W),n.updateRenderState({baseLayer:f})}else{let W=0;if(Z.antialias){let $={antialias:!0,alpha:Z.alpha,depth:Z.depth,stencil:Z.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(n,t,$),n.updateRenderState({layers:[f]})}else{Z.depth&&(W=Z.stencil?34041:6402);let $={colorFormat:Z.alpha?6408:6407,depthFormat:W,scaleFactor:s};h=new XRWebGLBinding(n,t),p=h.createProjectionLayer($),d=t.createFramebuffer(),n.updateRenderState({layers:[p]})}}a=await n.requestReferenceSpace(o),k.setContext(n),k.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function M(G){let Z=n.inputSources;for(let W=0;W<m.length;W++)y.set(Z[W],m[W]);for(let W=0;W<G.removed.length;W++){let $=G.removed[W],ae=y.get($);ae&&(ae.dispatchEvent({type:"disconnected",data:$}),y.delete($))}for(let W=0;W<G.added.length;W++){let $=G.added[W],ae=y.get($);ae&&ae.dispatchEvent({type:"connected",data:$})}}let O=new L,P=new L;function C(G,Z,W){O.setFromMatrixPosition(Z.matrixWorld),P.setFromMatrixPosition(W.matrixWorld);let $=O.distanceTo(P),ae=Z.projectionMatrix.elements,te=W.projectionMatrix.elements,H=ae[14]/(ae[10]-1),X=ae[14]/(ae[10]+1),J=(ae[9]+1)/ae[5],se=(ae[9]-1)/ae[5],ge=(ae[8]-1)/ae[0],Y=(te[8]+1)/te[0],be=H*ge,fe=H*Y,ee=$/(-ge+Y),Q=ee*-ge;Z.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(Q),G.translateZ(ee),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();let ie=H+ee,oe=X+ee,me=be-Q,pe=fe+($-Q),we=J*X/oe*ie,Ae=se*X/oe*ie;G.projectionMatrix.makePerspective(me,pe,we,Ae,ie,oe)}function N(G,Z){Z===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(Z.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(n===null)return;g.near=x.near=b.near=G.near,g.far=x.far=b.far=G.far,(_!==g.near||S!==g.far)&&(n.updateRenderState({depthNear:g.near,depthFar:g.far}),_=g.near,S=g.far);let Z=G.parent,W=g.cameras;N(g,Z);for(let ae=0;ae<W.length;ae++)N(W[ae],Z);g.matrixWorld.decompose(g.position,g.quaternion,g.scale),G.position.copy(g.position),G.quaternion.copy(g.quaternion),G.scale.copy(g.scale),G.matrix.copy(g.matrix),G.matrixWorld.copy(g.matrixWorld);let $=G.children;for(let ae=0,te=$.length;ae<te;ae++)$[ae].updateMatrixWorld(!0);W.length===2?C(g,b,x):g.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return g},this.getFoveation=function(){if(p!==null)return p.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(G){p!==null&&(p.fixedFoveation=G),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=G)};let U=null;function V(G,Z){if(l=Z.getViewerPose(a),l!==null){let $=l.views;f!==null&&i.bindXRFramebuffer(f.framebuffer);let ae=!1;$.length!==g.cameras.length&&(g.cameras.length=0,ae=!0);for(let te=0;te<$.length;te++){let H=$[te],X=null;if(f!==null)X=f.getViewport(H);else{let se=h.getViewSubImage(p,H);i.bindXRFramebuffer(d),se.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,36096,3553,se.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,se.colorTexture,0),X=se.viewport}let J=v[te];J.matrix.fromArray(H.transform.matrix),J.projectionMatrix.fromArray(H.projectionMatrix),J.viewport.set(X.x,X.y,X.width,X.height),te===0&&g.matrix.copy(J.matrix),ae===!0&&g.cameras.push(J)}}let W=n.inputSources;for(let $=0;$<m.length;$++){let ae=m[$],te=W[$];ae.update(te,Z,a)}U&&U(G,Z)}let k=new LP;k.setAnimationLoop(V),this.setAnimationLoop=function(G){U=G},this.dispose=function(){}}};function J7(e){function t(v,g){v.fogColor.value.copy(g.color),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function r(v,g,_,S,T){g.isMeshBasicMaterial?i(v,g):g.isMeshLambertMaterial?(i(v,g),l(v,g)):g.isMeshToonMaterial?(i(v,g),d(v,g)):g.isMeshPhongMaterial?(i(v,g),h(v,g)):g.isMeshStandardMaterial?(i(v,g),g.isMeshPhysicalMaterial?f(v,g,T):p(v,g)):g.isMeshMatcapMaterial?(i(v,g),m(v,g)):g.isMeshDepthMaterial?(i(v,g),y(v,g)):g.isMeshDistanceMaterial?(i(v,g),b(v,g)):g.isMeshNormalMaterial?(i(v,g),x(v,g)):g.isLineBasicMaterial?(n(v,g),g.isLineDashedMaterial&&s(v,g)):g.isPointsMaterial?a(v,g,_,S):g.isSpriteMaterial?o(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.specularMap&&(v.specularMap.value=g.specularMap);let _=e.get(g).envMap;if(_){v.envMap.value=_,v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.refractionRatio.value=g.refractionRatio;let A=e.get(_).__maxMipLevel;A!==void 0&&(v.maxMipLevel.value=A)}g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity);let S;g.map?S=g.map:g.specularMap?S=g.specularMap:g.displacementMap?S=g.displacementMap:g.normalMap?S=g.normalMap:g.bumpMap?S=g.bumpMap:g.roughnessMap?S=g.roughnessMap:g.metalnessMap?S=g.metalnessMap:g.alphaMap?S=g.alphaMap:g.emissiveMap?S=g.emissiveMap:g.clearcoatMap?S=g.clearcoatMap:g.clearcoatNormalMap?S=g.clearcoatNormalMap:g.clearcoatRoughnessMap?S=g.clearcoatRoughnessMap:g.specularIntensityMap?S=g.specularIntensityMap:g.specularTintMap&&(S=g.specularTintMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uvTransform.value.copy(S.matrix));let T;g.aoMap?T=g.aoMap:g.lightMap&&(T=g.lightMap),T!==void 0&&(T.isWebGLRenderTarget&&(T=T.texture),T.matrixAutoUpdate===!0&&T.updateMatrix(),v.uv2Transform.value.copy(T.matrix))}function n(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity}function s(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function a(v,g,_,S){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*_,v.scale.value=S*.5,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap);let T;g.map?T=g.map:g.alphaMap&&(T=g.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),v.uvTransform.value.copy(T.matrix))}function o(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap);let _;g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),v.uvTransform.value.copy(_.matrix))}function l(v,g){g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap)}function h(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Er&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Er&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Er&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Er&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function p(v,g){v.roughness.value=g.roughness,v.metalness.value=g.metalness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Er&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Er&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),e.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function f(v,g,_){p(v,g),v.reflectivity.value=g.reflectivity,v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.sheen&&v.sheen.value.copy(g.sheen),g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),v.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Er&&v.clearcoatNormalScale.value.negate()),v.transmission.value=g.transmission,g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap),g.transmission>0&&(v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap),v.attenuationDistance.value=g.attenuationDistance,v.attenuationTint.value.copy(g.attenuationTint),v.specularIntensity.value=g.specularIntensity,v.specularTint.value.copy(g.specularTint),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap),g.specularTintMap&&(v.specularTintMap.value=g.specularTintMap)}function m(v,g){g.matcap&&(v.matcap.value=g.matcap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Er&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Er&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function y(v,g){g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function b(v,g){g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),v.referencePosition.value.copy(g.referencePosition),v.nearDistance.value=g.nearDistance,v.farDistance.value=g.farDistance}function x(v,g){g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===Er&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===Er&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function Y7(){let e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function hr(e={}){let t=e.canvas!==void 0?e.canvas:Y7(),r=e.context!==void 0?e.context:null,i=e.alpha!==void 0?e.alpha:!1,n=e.depth!==void 0?e.depth:!0,s=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,o=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,h=e.powerPreference!==void 0?e.powerPreference:"default",d=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,p=null,f=null,m=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ii,this.physicallyCorrectLights=!1,this.toneMapping=Vl,this.toneMappingExposure=1;let b=this,x=!1,v=0,g=0,_=null,S=-1,T=null,A=new Tt,M=new Tt,O=null,P=t.width,C=t.height,N=1,U=null,V=null,k=new Tt(0,0,P,C),G=new Tt(0,0,P,C),Z=!1,W=[],$=new Gv,ae=!1,te=!1,H=null,X=new He,J=new L,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ge(){return _===null?N:1}let Y=r;function be(z,he){for(let le=0;le<z.length;le++){let ye=z[le],Pe=t.getContext(ye,he);if(Pe!==null)return Pe}return null}try{let z={alpha:i,depth:n,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:h,failIfMajorPerformanceCaveat:d};if(t.addEventListener("webglcontextlost",kt,!1),t.addEventListener("webglcontextrestored",vr,!1),Y===null){let he=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&he.shift(),Y=be(he,z),Y===null)throw be(he)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Y.getShaderPrecisionFormat===void 0&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let fe,ee,Q,ie,oe,me,pe,we,Ae,F,B,de,Oe,Ce,Re,ze,Ke,je,Ye,re,Ie,Me,Ve;function Be(){fe=new g9(Y),ee=new o9(Y,fe,e),fe.init(ee),Me=new V7(Y,fe,ee),Q=new H7(Y,fe,ee),W[0]=1029,ie=new x9(Y),oe=new O7,me=new G7(Y,fe,Q,oe,ee,Me,ie),pe=new u9(b),we=new m9(b),Ae=new Bj(Y,ee),Ve=new s9(Y,fe,Ae,ee),F=new v9(Y,Ae,ie,Ve),B=new S9(Y,F,Ae,ie),Ye=new _9(Y),ze=new l9(oe),de=new L7(b,pe,we,fe,ee,Ve,ze),Oe=new J7(oe),Ce=new D7(oe),Re=new F7(fe,ee),je=new n9(b,pe,Q,B,o),Ke=new VP(b,B,ee),re=new a9(Y,fe,ie,ee),Ie=new y9(Y,fe,ie,ee),ie.programs=de.programs,b.capabilities=ee,b.extensions=fe,b.properties=oe,b.renderLists=Ce,b.shadowMap=Ke,b.state=Q,b.info=ie}Be();let at=new W7(b,Y);this.xr=at,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){let z=fe.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){let z=fe.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(z){z!==void 0&&(N=z,this.setSize(P,C,!1))},this.getSize=function(z){return z.set(P,C)},this.setSize=function(z,he,le){if(at.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=z,C=he,t.width=Math.floor(z*N),t.height=Math.floor(he*N),le!==!1&&(t.style.width=z+"px",t.style.height=he+"px"),this.setViewport(0,0,z,he)},this.getDrawingBufferSize=function(z){return z.set(P*N,C*N).floor()},this.setDrawingBufferSize=function(z,he,le){P=z,C=he,N=le,t.width=Math.floor(z*le),t.height=Math.floor(he*le),this.setViewport(0,0,z,he)},this.getCurrentViewport=function(z){return z.copy(A)},this.getViewport=function(z){return z.copy(k)},this.setViewport=function(z,he,le,ye){z.isVector4?k.set(z.x,z.y,z.z,z.w):k.set(z,he,le,ye),Q.viewport(A.copy(k).multiplyScalar(N).floor())},this.getScissor=function(z){return z.copy(G)},this.setScissor=function(z,he,le,ye){z.isVector4?G.set(z.x,z.y,z.z,z.w):G.set(z,he,le,ye),Q.scissor(M.copy(G).multiplyScalar(N).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(z){Q.setScissorTest(Z=z)},this.setOpaqueSort=function(z){U=z},this.setTransparentSort=function(z){V=z},this.getClearColor=function(z){return z.copy(je.getClearColor())},this.setClearColor=function(){je.setClearColor.apply(je,arguments)},this.getClearAlpha=function(){return je.getClearAlpha()},this.setClearAlpha=function(){je.setClearAlpha.apply(je,arguments)},this.clear=function(z,he,le){let ye=0;(z===void 0||z)&&(ye|=16384),(he===void 0||he)&&(ye|=256),(le===void 0||le)&&(ye|=1024),Y.clear(ye)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",kt,!1),t.removeEventListener("webglcontextrestored",vr,!1),Ce.dispose(),Re.dispose(),oe.dispose(),pe.dispose(),we.dispose(),B.dispose(),Ve.dispose(),at.dispose(),at.removeEventListener("sessionstart",ys),at.removeEventListener("sessionend",Cr),H&&(H.dispose(),H=null),ki.stop()};function kt(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function vr(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;let z=ie.autoReset,he=Ke.enabled,le=Ke.autoUpdate,ye=Ke.needsUpdate,Pe=Ke.type;Be(),ie.autoReset=z,Ke.enabled=he,Ke.autoUpdate=le,Ke.needsUpdate=ye,Ke.type=Pe}function Si(z){let he=z.target;he.removeEventListener("dispose",Si),$t(he)}function $t(z){di(z),oe.remove(z)}function di(z){let he=oe.get(z).programs;he!==void 0&&he.forEach(function(le){de.releaseProgram(le)})}function Fi(z,he){z.render(function(le){b.renderBufferImmediate(le,he)})}this.renderBufferImmediate=function(z,he){Ve.initAttributes();let le=oe.get(z);z.hasPositions&&!le.position&&(le.position=Y.createBuffer()),z.hasNormals&&!le.normal&&(le.normal=Y.createBuffer()),z.hasUvs&&!le.uv&&(le.uv=Y.createBuffer()),z.hasColors&&!le.color&&(le.color=Y.createBuffer());let ye=he.getAttributes();z.hasPositions&&(Y.bindBuffer(34962,le.position),Y.bufferData(34962,z.positionArray,35048),Ve.enableAttribute(ye.position),Y.vertexAttribPointer(ye.position,3,5126,!1,0,0)),z.hasNormals&&(Y.bindBuffer(34962,le.normal),Y.bufferData(34962,z.normalArray,35048),Ve.enableAttribute(ye.normal),Y.vertexAttribPointer(ye.normal,3,5126,!1,0,0)),z.hasUvs&&(Y.bindBuffer(34962,le.uv),Y.bufferData(34962,z.uvArray,35048),Ve.enableAttribute(ye.uv),Y.vertexAttribPointer(ye.uv,2,5126,!1,0,0)),z.hasColors&&(Y.bindBuffer(34962,le.color),Y.bufferData(34962,z.colorArray,35048),Ve.enableAttribute(ye.color),Y.vertexAttribPointer(ye.color,3,5126,!1,0,0)),Ve.disableUnusedAttributes(),Y.drawArrays(4,0,z.count),z.count=0},this.renderBufferDirect=function(z,he,le,ye,Pe,Ze){he===null&&(he=se);let qe=Pe.isMesh&&Pe.matrixWorld.determinant()<0,mt=Xt(z,he,ye,Pe);Q.setMaterial(ye,qe);let Ct=le.index,or=le.attributes.position;if(Ct===null){if(or===void 0||or.count===0)return}else if(Ct.count===0)return;let At=1;ye.wireframe===!0&&(Ct=F.getWireframeAttribute(le),At=2),(le.morphAttributes.position!==void 0||le.morphAttributes.normal!==void 0)&&Ye.update(Pe,le,ye,mt),Ve.setup(Pe,ye,mt,le,Ct);let Rt,gt=re;Ct!==null&&(Rt=Ae.get(Ct),gt=Ie,gt.setIndex(Rt));let xs=Ct!==null?Ct.count:or.count,Vn=le.drawRange.start*At,Qs=le.drawRange.count*At,Hi=Ze!==null?Ze.start*At:0,Da=Ze!==null?Ze.count*At:1/0,An=Math.max(Vn,Hi),Zr=Math.min(xs,Vn+Qs,Hi+Da)-1,jn=Math.max(0,Zr-An+1);if(jn!==0){if(Pe.isMesh)ye.wireframe===!0?(Q.setLineWidth(ye.wireframeLinewidth*ge()),gt.setMode(1)):gt.setMode(4);else if(Pe.isLine){let ai=ye.linewidth;ai===void 0&&(ai=1),Q.setLineWidth(ai*ge()),Pe.isLineSegments?gt.setMode(1):Pe.isLineLoop?gt.setMode(2):gt.setMode(3)}else Pe.isPoints?gt.setMode(0):Pe.isSprite&&gt.setMode(4);if(Pe.isInstancedMesh)gt.renderInstances(An,jn,Pe.count);else if(le.isInstancedBufferGeometry){let ai=Math.min(le.instanceCount,le._maxInstanceCount);gt.renderInstances(An,jn,ai)}else gt.render(An,jn)}},this.compile=function(z,he){f=Re.get(z),f.init(),y.push(f),z.traverseVisible(function(le){le.isLight&&le.layers.test(he.layers)&&(f.pushLight(le),le.castShadow&&f.pushShadow(le))}),f.setupLights(),z.traverse(function(le){let ye=le.material;if(ye)if(Array.isArray(ye))for(let Pe=0;Pe<ye.length;Pe++){let Ze=ye[Pe];_t(Ze,z,le)}else _t(ye,z,le)}),y.pop(),f=null};let qs=null;function Ui(z){qs&&qs(z)}function ys(){ki.stop()}function Cr(){ki.start()}let ki=new LP;ki.setAnimationLoop(Ui),typeof window!="undefined"&&ki.setContext(window),this.setAnimationLoop=function(z){qs=z,at.setAnimationLoop(z),z===null?ki.stop():ki.start()},at.addEventListener("sessionstart",ys),at.addEventListener("sessionend",Cr),this.render=function(z,he){if(he!==void 0&&he.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;z.autoUpdate===!0&&z.updateMatrixWorld(),he.parent===null&&he.updateMatrixWorld(),at.enabled===!0&&at.isPresenting===!0&&(at.cameraAutoUpdate===!0&&at.updateCamera(he),he=at.getCamera()),z.isScene===!0&&z.onBeforeRender(b,z,he,_),f=Re.get(z,y.length),f.init(),y.push(f),X.multiplyMatrices(he.projectionMatrix,he.matrixWorldInverse),$.setFromProjectionMatrix(X),te=this.localClippingEnabled,ae=ze.init(this.clippingPlanes,te,he),p=Ce.get(z,m.length),p.init(),m.push(p),Kr(z,he,0,b.sortObjects),p.finish(),b.sortObjects===!0&&p.sort(U,V),ae===!0&&ze.beginShadows();let le=f.state.shadowsArray;Ke.render(le,z,he),f.setupLights(),f.setupLightsView(he),ae===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset(),je.render(p,z);let ye=p.opaque,Pe=p.transmissive,Ze=p.transparent;ye.length>0&&xt(ye,z,he),Pe.length>0&&ht(ye,Pe,z,he),Ze.length>0&&xt(Ze,z,he),_!==null&&(me.updateMultisampleRenderTarget(_),me.updateRenderTargetMipmap(_)),z.isScene===!0&&z.onAfterRender(b,z,he),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1),Ve.resetDefaultState(),S=-1,T=null,y.pop(),y.length>0?f=y[y.length-1]:f=null,m.pop(),m.length>0?p=m[m.length-1]:p=null};function Kr(z,he,le,ye){if(z.visible===!1)return;if(z.layers.test(he.layers)){if(z.isGroup)le=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(he);else if(z.isLight)f.pushLight(z),z.castShadow&&f.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||$.intersectsSprite(z)){ye&&J.setFromMatrixPosition(z.matrixWorld).applyMatrix4(X);let Ze=B.update(z),qe=z.material;qe.visible&&p.push(z,Ze,qe,le,J.z,null)}}else if(z.isImmediateRenderObject)ye&&J.setFromMatrixPosition(z.matrixWorld).applyMatrix4(X),p.push(z,null,z.material,le,J.z,null);else if((z.isMesh||z.isLine||z.isPoints)&&(z.isSkinnedMesh&&z.skeleton.frame!==ie.render.frame&&(z.skeleton.update(),z.skeleton.frame=ie.render.frame),!z.frustumCulled||$.intersectsObject(z))){ye&&J.setFromMatrixPosition(z.matrixWorld).applyMatrix4(X);let Ze=B.update(z),qe=z.material;if(Array.isArray(qe)){let mt=Ze.groups;for(let Ct=0,or=mt.length;Ct<or;Ct++){let At=mt[Ct],Rt=qe[At.materialIndex];Rt&&Rt.visible&&p.push(z,Ze,Rt,le,J.z,At)}}else qe.visible&&p.push(z,Ze,qe,le,J.z,null)}}let Pe=z.children;for(let Ze=0,qe=Pe.length;Ze<qe;Ze++)Kr(Pe[Ze],he,le,ye)}function ht(z,he,le,ye){if(H===null){let qe=a===!0&&ee.isWebGL2===!0?xp:ni;H=new qe(1024,1024,{generateMipmaps:!0,type:Me.convert(Dh)!==null?Dh:_i,minFilter:nu,magFilter:qr,wrapS:yi,wrapT:yi})}let Pe=b.getRenderTarget();b.setRenderTarget(H),b.clear();let Ze=b.toneMapping;b.toneMapping=Vl,xt(z,le,ye),b.toneMapping=Ze,me.updateMultisampleRenderTarget(H),me.updateRenderTargetMipmap(H),b.setRenderTarget(Pe),xt(he,le,ye)}function xt(z,he,le){let ye=he.isScene===!0?he.overrideMaterial:null;if(le.isArrayCamera){let Pe=le.cameras;for(let Ze=0,qe=Pe.length;Ze<qe;Ze++){let mt=Pe[Ze];Q.viewport(A.copy(mt.viewport)),f.setupLightsView(mt);for(let Ct=0,or=z.length;Ct<or;Ct++){let At=z[Ct],Rt=At.object,gt=At.geometry,xs=ye===null?At.material:ye,Vn=At.group;Rt.layers.test(mt.layers)&&wt(Rt,he,mt,gt,xs,Vn)}}}else for(let Pe=0,Ze=z.length;Pe<Ze;Pe++){let qe=z[Pe],mt=qe.object,Ct=qe.geometry,or=ye===null?qe.material:ye,At=qe.group;wt(mt,he,le,Ct,or,At)}}function wt(z,he,le,ye,Pe,Ze){if(z.onBeforeRender(b,he,le,ye,Pe,Ze),z.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),z.isImmediateRenderObject){let qe=Xt(le,he,Pe,z);Q.setMaterial(Pe),Ve.reset(),Fi(z,qe)}else Pe.transparent===!0&&Pe.side===xi?(Pe.side=Er,Pe.needsUpdate=!0,b.renderBufferDirect(le,he,ye,Pe,z,Ze),Pe.side=sl,Pe.needsUpdate=!0,b.renderBufferDirect(le,he,ye,Pe,z,Ze),Pe.side=xi):b.renderBufferDirect(le,he,ye,Pe,z,Ze);z.onAfterRender(b,he,le,ye,Pe,Ze)}function _t(z,he,le){he.isScene!==!0&&(he=se);let ye=oe.get(z),Pe=f.state.lights,Ze=f.state.shadowsArray,qe=Pe.state.version,mt=de.getParameters(z,Pe.state,Ze,he,le),Ct=de.getProgramCacheKey(mt),or=ye.programs;ye.environment=z.isMeshStandardMaterial?he.environment:null,ye.fog=he.fog,ye.envMap=(z.isMeshStandardMaterial?we:pe).get(z.envMap||ye.environment),or===void 0&&(z.addEventListener("dispose",Si),or=new Map,ye.programs=or);let At=or.get(Ct);if(At!==void 0){if(ye.currentProgram===At&&ye.lightsStateVersion===qe)return Dt(z,mt),At}else mt.uniforms=de.getUniforms(z),z.onBuild(mt,b),z.onBeforeCompile(mt,b),At=de.acquireProgram(mt,Ct),or.set(Ct,At),ye.uniforms=mt.uniforms;let Rt=ye.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(Rt.clippingPlanes=ze.uniform),Dt(z,mt),ye.needsLights=er(z),ye.lightsStateVersion=qe,ye.needsLights&&(Rt.ambientLightColor.value=Pe.state.ambient,Rt.lightProbe.value=Pe.state.probe,Rt.directionalLights.value=Pe.state.directional,Rt.directionalLightShadows.value=Pe.state.directionalShadow,Rt.spotLights.value=Pe.state.spot,Rt.spotLightShadows.value=Pe.state.spotShadow,Rt.rectAreaLights.value=Pe.state.rectArea,Rt.ltc_1.value=Pe.state.rectAreaLTC1,Rt.ltc_2.value=Pe.state.rectAreaLTC2,Rt.pointLights.value=Pe.state.point,Rt.pointLightShadows.value=Pe.state.pointShadow,Rt.hemisphereLights.value=Pe.state.hemi,Rt.directionalShadowMap.value=Pe.state.directionalShadowMap,Rt.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,Rt.spotShadowMap.value=Pe.state.spotShadowMap,Rt.spotShadowMatrix.value=Pe.state.spotShadowMatrix,Rt.pointShadowMap.value=Pe.state.pointShadowMap,Rt.pointShadowMatrix.value=Pe.state.pointShadowMatrix);let gt=At.getUniforms(),xs=Ko.seqWithValue(gt.seq,Rt);return ye.currentProgram=At,ye.uniformsList=xs,At}function Dt(z,he){let le=oe.get(z);le.outputEncoding=he.outputEncoding,le.instancing=he.instancing,le.skinning=he.skinning,le.morphTargets=he.morphTargets,le.morphNormals=he.morphNormals,le.numClippingPlanes=he.numClippingPlanes,le.numIntersection=he.numClipIntersection,le.vertexAlphas=he.vertexAlphas,le.vertexTangents=he.vertexTangents}function Xt(z,he,le,ye){he.isScene!==!0&&(he=se),me.resetTextureUnits();let Pe=he.fog,Ze=le.isMeshStandardMaterial?he.environment:null,qe=_===null?b.outputEncoding:_.texture.encoding,mt=(le.isMeshStandardMaterial?we:pe).get(le.envMap||Ze),Ct=le.vertexColors===!0&&!!ye.geometry&&!!ye.geometry.attributes.color&&ye.geometry.attributes.color.itemSize===4,or=!!ye.geometry&&!!ye.geometry.attributes.tangent,At=!!ye.geometry&&!!ye.geometry.morphAttributes.position,Rt=!!ye.geometry&&!!ye.geometry.morphAttributes.normal,gt=oe.get(le),xs=f.state.lights;if(ae===!0&&(te===!0||z!==T)){let ai=z===T&&le.id===S;ze.setState(le,z,ai)}let Vn=!1;le.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==xs.state.version||gt.outputEncoding!==qe||ye.isInstancedMesh&&gt.instancing===!1||!ye.isInstancedMesh&&gt.instancing===!0||ye.isSkinnedMesh&&gt.skinning===!1||!ye.isSkinnedMesh&&gt.skinning===!0||gt.envMap!==mt||le.fog&&gt.fog!==Pe||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==ze.numPlanes||gt.numIntersection!==ze.numIntersection)||gt.vertexAlphas!==Ct||gt.vertexTangents!==or||gt.morphTargets!==At||gt.morphNormals!==Rt)&&(Vn=!0):(Vn=!0,gt.__version=le.version);let Qs=gt.currentProgram;Vn===!0&&(Qs=_t(le,he,ye));let Hi=!1,Da=!1,An=!1,Zr=Qs.getUniforms(),jn=gt.uniforms;if(Q.useProgram(Qs.program)&&(Hi=!0,Da=!0,An=!0),le.id!==S&&(S=le.id,Da=!0),Hi||T!==z){if(Zr.setValue(Y,"projectionMatrix",z.projectionMatrix),ee.logarithmicDepthBuffer&&Zr.setValue(Y,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),T!==z&&(T=z,Da=!0,An=!0),le.isShaderMaterial||le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshStandardMaterial||le.envMap){let ai=Zr.map.cameraPosition;ai!==void 0&&ai.setValue(Y,J.setFromMatrixPosition(z.matrixWorld))}(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&Zr.setValue(Y,"isOrthographic",z.isOrthographicCamera===!0),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial||le.isShadowMaterial||ye.isSkinnedMesh)&&Zr.setValue(Y,"viewMatrix",z.matrixWorldInverse)}if(ye.isSkinnedMesh){Zr.setOptional(Y,ye,"bindMatrix"),Zr.setOptional(Y,ye,"bindMatrixInverse");let ai=ye.skeleton;ai&&(ee.floatVertexTextures?(ai.boneTexture===null&&ai.computeBoneTexture(),Zr.setValue(Y,"boneTexture",ai.boneTexture,me),Zr.setValue(Y,"boneTextureSize",ai.boneTextureSize)):Zr.setOptional(Y,ai,"boneMatrices"))}return(Da||gt.receiveShadow!==ye.receiveShadow)&&(gt.receiveShadow=ye.receiveShadow,Zr.setValue(Y,"receiveShadow",ye.receiveShadow)),Da&&(Zr.setValue(Y,"toneMappingExposure",b.toneMappingExposure),gt.needsLights&&Ht(jn,An),Pe&&le.fog&&Oe.refreshFogUniforms(jn,Pe),Oe.refreshMaterialUniforms(jn,le,N,C,H),Ko.upload(Y,gt.uniformsList,jn,me)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&(Ko.upload(Y,gt.uniformsList,jn,me),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&Zr.setValue(Y,"center",ye.center),Zr.setValue(Y,"modelViewMatrix",ye.modelViewMatrix),Zr.setValue(Y,"normalMatrix",ye.normalMatrix),Zr.setValue(Y,"modelMatrix",ye.matrixWorld),Qs}function Ht(z,he){z.ambientLightColor.needsUpdate=he,z.lightProbe.needsUpdate=he,z.directionalLights.needsUpdate=he,z.directionalLightShadows.needsUpdate=he,z.pointLights.needsUpdate=he,z.pointLightShadows.needsUpdate=he,z.spotLights.needsUpdate=he,z.spotLightShadows.needsUpdate=he,z.rectAreaLights.needsUpdate=he,z.hemisphereLights.needsUpdate=he}function er(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return _},this.setRenderTarget=function(z,he=0,le=0){_=z,v=he,g=le,z&&oe.get(z).__webglFramebuffer===void 0&&me.setupRenderTarget(z);let ye=null,Pe=!1,Ze=!1;if(z){let qe=z.texture;(qe.isDataTexture3D||qe.isDataTexture2DArray)&&(Ze=!0);let mt=oe.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(ye=mt[he],Pe=!0):z.isWebGLMultisampleRenderTarget?ye=oe.get(z).__webglMultisampledFramebuffer:ye=mt,A.copy(z.viewport),M.copy(z.scissor),O=z.scissorTest}else A.copy(k).multiplyScalar(N).floor(),M.copy(G).multiplyScalar(N).floor(),O=Z;if(Q.bindFramebuffer(36160,ye)&&ee.drawBuffers){let qe=!1;if(z)if(z.isWebGLMultipleRenderTargets){let mt=z.texture;if(W.length!==mt.length||W[0]!==36064){for(let Ct=0,or=mt.length;Ct<or;Ct++)W[Ct]=36064+Ct;W.length=mt.length,qe=!0}}else(W.length!==1||W[0]!==36064)&&(W[0]=36064,W.length=1,qe=!0);else(W.length!==1||W[0]!==1029)&&(W[0]=1029,W.length=1,qe=!0);qe&&(ee.isWebGL2?Y.drawBuffers(W):fe.get("WEBGL_draw_buffers").drawBuffersWEBGL(W))}if(Q.viewport(A),Q.scissor(M),Q.setScissorTest(O),Pe){let qe=oe.get(z.texture);Y.framebufferTexture2D(36160,36064,34069+he,qe.__webglTexture,le)}else if(Ze){let qe=oe.get(z.texture),mt=he||0;Y.framebufferTextureLayer(36160,36064,qe.__webglTexture,le||0,mt)}},this.readRenderTargetPixels=function(z,he,le,ye,Pe,Ze,qe){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mt=oe.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&qe!==void 0&&(mt=mt[qe]),mt){Q.bindFramebuffer(36160,mt);try{let Ct=z.texture,or=Ct.format,At=Ct.type;if(or!==ci&&Me.convert(or)!==Y.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Rt=At===Dh&&(fe.has("EXT_color_buffer_half_float")||ee.isWebGL2&&fe.has("EXT_color_buffer_float"));if(At!==_i&&Me.convert(At)!==Y.getParameter(35738)&&!(At===Nl&&(ee.isWebGL2||fe.has("OES_texture_float")||fe.has("WEBGL_color_buffer_float")))&&!Rt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Y.checkFramebufferStatus(36160)===36053?he>=0&&he<=z.width-ye&&le>=0&&le<=z.height-Pe&&Y.readPixels(he,le,ye,Pe,Me.convert(or),Me.convert(At),Ze):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{let Ct=_!==null?oe.get(_).__webglFramebuffer:null;Q.bindFramebuffer(36160,Ct)}}},this.copyFramebufferToTexture=function(z,he,le=0){let ye=Math.pow(2,-le),Pe=Math.floor(he.image.width*ye),Ze=Math.floor(he.image.height*ye),qe=Me.convert(he.format);ee.isWebGL2&&(qe===6407&&(qe=32849),qe===6408&&(qe=32856)),me.setTexture2D(he,0),Y.copyTexImage2D(3553,le,qe,z.x,z.y,Pe,Ze,0),Q.unbindTexture()},this.copyTextureToTexture=function(z,he,le,ye=0){let Pe=he.image.width,Ze=he.image.height,qe=Me.convert(le.format),mt=Me.convert(le.type);me.setTexture2D(le,0),Y.pixelStorei(37440,le.flipY),Y.pixelStorei(37441,le.premultiplyAlpha),Y.pixelStorei(3317,le.unpackAlignment),he.isDataTexture?Y.texSubImage2D(3553,ye,z.x,z.y,Pe,Ze,qe,mt,he.image.data):he.isCompressedTexture?Y.compressedTexSubImage2D(3553,ye,z.x,z.y,he.mipmaps[0].width,he.mipmaps[0].height,qe,he.mipmaps[0].data):Y.texSubImage2D(3553,ye,z.x,z.y,qe,mt,he.image),ye===0&&le.generateMipmaps&&Y.generateMipmap(3553),Q.unbindTexture()},this.copyTextureToTexture3D=function(z,he,le,ye,Pe=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Ze=z.max.x-z.min.x+1,qe=z.max.y-z.min.y+1,mt=z.max.z-z.min.z+1,Ct=Me.convert(ye.format),or=Me.convert(ye.type),At;if(ye.isDataTexture3D)me.setTexture3D(ye,0),At=32879;else if(ye.isDataTexture2DArray)me.setTexture2DArray(ye,0),At=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Y.pixelStorei(37440,ye.flipY),Y.pixelStorei(37441,ye.premultiplyAlpha),Y.pixelStorei(3317,ye.unpackAlignment);let Rt=Y.getParameter(3314),gt=Y.getParameter(32878),xs=Y.getParameter(3316),Vn=Y.getParameter(3315),Qs=Y.getParameter(32877),Hi=le.isCompressedTexture?le.mipmaps[0]:le.image;Y.pixelStorei(3314,Hi.width),Y.pixelStorei(32878,Hi.height),Y.pixelStorei(3316,z.min.x),Y.pixelStorei(3315,z.min.y),Y.pixelStorei(32877,z.min.z),le.isDataTexture||le.isDataTexture3D?Y.texSubImage3D(At,Pe,he.x,he.y,he.z,Ze,qe,mt,Ct,or,Hi.data):le.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Y.compressedTexSubImage3D(At,Pe,he.x,he.y,he.z,Ze,qe,mt,Ct,Hi.data)):Y.texSubImage3D(At,Pe,he.x,he.y,he.z,Ze,qe,mt,Ct,or,Hi),Y.pixelStorei(3314,Rt),Y.pixelStorei(32878,gt),Y.pixelStorei(3316,xs),Y.pixelStorei(3315,Vn),Y.pixelStorei(32877,Qs),Pe===0&&ye.generateMipmaps&&Y.generateMipmap(At),Q.unbindTexture()},this.initTexture=function(z){me.setTexture2D(z,0),Q.unbindTexture()},this.resetState=function(){v=0,g=0,_=null,Q.reset(),Ve.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var X7=class extends hr{};X7.prototype.isWebGL1Renderer=!0;var r_=class{constructor(e,t=1,r=1e3){this.name="",this.color=new Ue(e),this.near=t,this.far=r}clone(){return new r_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}};r_.prototype.isFog=!0;var Ma=class extends Nt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};Ma.prototype.isScene=!0;var au=class{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=vp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Hs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};au.prototype.isInterleavedBuffer=!0;var jr=new L,Zl=class{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)jr.x=this.getX(t),jr.y=this.getY(t),jr.z=this.getZ(t),jr.applyMatrix4(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)jr.x=this.getX(t),jr.y=this.getY(t),jr.z=this.getZ(t),jr.applyNormalMatrix(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)jr.x=this.getX(t),jr.y=this.getY(t),jr.z=this.getZ(t),jr.transformDirection(e),this.setXYZ(t,jr.x,jr.y,jr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new dt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Zl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};Zl.prototype.isInterleavedBufferAttribute=!0;var WP=class extends $i{constructor(e){super();this.type="SpriteMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}};WP.prototype.isSpriteMaterial=!0;var Gu,nd=new L,Vu=new L,ju=new L,Wu=new q,sd=new q,JP=new He,Am=new L,ad=new L,Mm=new L,rC=new q,_x=new q,iC=new q,q7=class extends Nt{constructor(e){super();if(this.type="Sprite",Gu===void 0){Gu=new st;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new au(t,5);Gu.setIndex([0,1,2,0,2,3]),Gu.setAttribute("position",new Zl(r,3,0,!1)),Gu.setAttribute("uv",new Zl(r,2,3,!1))}this.geometry=Gu,this.material=e!==void 0?e:new WP,this.center=new q(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vu.setFromMatrixScale(this.matrixWorld),JP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ju.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Vu.multiplyScalar(-ju.z);let r=this.material.rotation,i,n;r!==0&&(n=Math.cos(r),i=Math.sin(r));let s=this.center;Em(Am.set(-.5,-.5,0),ju,s,Vu,i,n),Em(ad.set(.5,-.5,0),ju,s,Vu,i,n),Em(Mm.set(.5,.5,0),ju,s,Vu,i,n),rC.set(0,0),_x.set(1,0),iC.set(1,1);let a=e.ray.intersectTriangle(Am,ad,Mm,!1,nd);if(a===null&&(Em(ad.set(-.5,.5,0),ju,s,Vu,i,n),_x.set(0,1),a=e.ray.intersectTriangle(Am,Mm,ad,!1,nd),a===null))return;let o=e.ray.origin.distanceTo(nd);o<e.near||o>e.far||t.push({distance:o,point:nd.clone(),uv:ii.getUV(nd,Am,ad,Mm,rC,_x,iC,new q),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};q7.prototype.isSprite=!0;function Em(e,t,r,i,n,s){Wu.subVectors(e,r).addScalar(.5).multiply(i),n!==void 0?(sd.x=s*Wu.x-n*Wu.y,sd.y=n*Wu.x+s*Wu.y):sd.copy(Wu),e.copy(t),e.x+=sd.x,e.y+=sd.y,e.applyMatrix4(JP)}var nC=new L,sC=new Tt,aC=new Tt,Q7=new L,oC=new He,YP=class extends wi{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new He,this.bindMatrixInverse=new He}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new Tt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);let n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){let r=this.skeleton,i=this.geometry;sC.fromBufferAttribute(i.attributes.skinIndex,e),aC.fromBufferAttribute(i.attributes.skinWeight,e),nC.fromBufferAttribute(i.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let s=aC.getComponent(n);if(s!==0){let a=sC.getComponent(n);oC.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Q7.copy(nC).applyMatrix4(oC),s)}}return t.applyMatrix4(this.bindMatrixInverse)}};YP.prototype.isSkinnedMesh=!0;var K7=class extends Nt{constructor(){super();this.type="Bone"}};K7.prototype.isBone=!0;var Z7=class extends Rr{constructor(e=null,t=1,r=1,i,n,s,a,o,l=qr,h=qr,d,p){super(null,s,a,o,l,h,i,n,d,p);this.image={data:e,width:t,height:r},this.magFilter=l,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}};Z7.prototype.isDataTexture=!0;var lC=new He,uC=new He,Tm=[],od=new wi,$7=class extends wi{constructor(e,t,r){super(e,t);this.instanceMatrix=new dt(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let r=this.matrixWorld,i=this.count;if(od.geometry=this.geometry,od.material=this.material,od.material!==void 0)for(let n=0;n<i;n++){this.getMatrixAt(n,lC),uC.multiplyMatrices(r,lC),od.matrixWorld=uC,od.raycast(e,Tm);for(let s=0,a=Tm.length;s<a;s++){let o=Tm[s];o.instanceId=n,o.object=this,t.push(o)}Tm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new dt(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}};$7.prototype.isInstancedMesh=!0;var gs=class extends $i{constructor(e){super();this.type="LineBasicMaterial",this.color=new Ue(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}};gs.prototype.isLineBasicMaterial=!0;var hC=new L,cC=new L,dC=new He,Sx=new ml,Cm=new Vs,Xh=class extends Nt{constructor(e=new st,t=new gs){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.isBufferGeometry)if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)hC.fromBufferAttribute(t,i-1),cC.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=hC.distanceTo(cC);e.setAttribute("lineDistance",new We(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Cm.copy(r.boundingSphere),Cm.applyMatrix4(i),Cm.radius+=n,e.ray.intersectsSphere(Cm)===!1)return;dC.copy(i).invert(),Sx.copy(e.ray).applyMatrix4(dC);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new L,h=new L,d=new L,p=new L,f=this.isLineSegments?2:1;if(r.isBufferGeometry){let m=r.index,y=r.attributes.position;if(m!==null){let b=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count);for(let v=b,g=x-1;v<g;v+=f){let _=m.getX(v),S=m.getX(v+1);if(l.fromBufferAttribute(y,_),h.fromBufferAttribute(y,S),Sx.distanceSqToSegment(l,h,p,d)>o)continue;p.applyMatrix4(this.matrixWorld);let T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let b=Math.max(0,s.start),x=Math.min(y.count,s.start+s.count);for(let v=b,g=x-1;v<g;v+=f){if(l.fromBufferAttribute(y,v),h.fromBufferAttribute(y,v+1),Sx.distanceSqToSegment(l,h,p,d)>o)continue;p.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(p);_<e.near||_>e.far||t.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){let a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}else{let t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}};Xh.prototype.isLine=!0;var pC=new L,fC=new L,gl=class extends Xh{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.isBufferGeometry)if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)pC.fromBufferAttribute(t,i),fC.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+pC.distanceTo(fC);e.setAttribute("lineDistance",new We(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}};gl.prototype.isLineSegments=!0;var eJ=class extends Xh{constructor(e,t){super(e,t);this.type="LineLoop"}};eJ.prototype.isLineLoop=!0;var XP=class extends $i{constructor(e){super();this.type="PointsMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}};XP.prototype.isPointsMaterial=!0;var mC=new He,rw=new ml,Lm=new Vs,Om=new L,tJ=class extends Nt{constructor(e=new st,t=new XP){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Lm.copy(r.boundingSphere),Lm.applyMatrix4(i),Lm.radius+=n,e.ray.intersectsSphere(Lm)===!1)return;mC.copy(i).invert(),rw.copy(e.ray).applyMatrix4(mC);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(r.isBufferGeometry){let l=r.index,h=r.attributes.position;if(l!==null){let d=Math.max(0,s.start),p=Math.min(l.count,s.start+s.count);for(let f=d,m=p;f<m;f++){let y=l.getX(f);Om.fromBufferAttribute(h,y),gC(Om,y,o,i,e,t,this)}}else{let d=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let f=d,m=p;f<m;f++)Om.fromBufferAttribute(h,f),gC(Om,f,o,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){let a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}else{let t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}};tJ.prototype.isPoints=!0;function gC(e,t,r,i,n,s,a){let o=rw.distanceSqToPoint(e);if(o<r){let l=new L;rw.closestPointToPoint(e,l),l.applyMatrix4(i);let h=n.ray.origin.distanceTo(l);if(h<n.near||h>n.far)return;s.push({distance:h,distanceToRay:Math.sqrt(o),point:l,index:t,face:null,object:a})}}var qP=class extends Rr{constructor(e,t,r,i,n,s,a,o,l){super(e,t,r,i,n,s,a,o,l);this.format=a!==void 0?a:Qi,this.minFilter=s!==void 0?s:ar,this.magFilter=n!==void 0?n:ar,this.generateMipmaps=!1;let h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};qP.prototype.isVideoTexture=!0;var rJ=class extends Rr{constructor(e,t,r,i,n,s,a,o,l,h,d,p){super(null,s,a,o,l,h,i,n,d,p);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}};rJ.prototype.isCompressedTexture=!0;var iJ=class extends Rr{constructor(e,t,r,i,n,s,a,o,l){super(e,t,r,i,n,s,a,o,l);this.needsUpdate=!0}};iJ.prototype.isCanvasTexture=!0;var Jv=class extends Rr{constructor(e,t,r,i,n,s,a,o,l,h){if(h=h!==void 0?h:Nh,h!==Nh&&h!==Jh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Nh&&(r=qg),r===void 0&&h===Jh&&(r=Rh);super(null,i,n,s,a,o,h,r,l);this.image={width:e,height:t},this.magFilter=a!==void 0?a:qr,this.minFilter=o!==void 0?o:qr,this.flipY=!1,this.generateMipmaps=!1}};Jv.prototype.isDepthTexture=!0;var i_=class extends st{constructor(e=1,t=1,r=1,i=8,n=1,s=!1,a=0,o=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:o};let l=this;i=Math.floor(i),n=Math.floor(n);let h=[],d=[],p=[],f=[],m=0,y=[],b=r/2,x=0;v(),s===!1&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(h),this.setAttribute("position",new We(d,3)),this.setAttribute("normal",new We(p,3)),this.setAttribute("uv",new We(f,2));function v(){let _=new L,S=new L,T=0,A=(t-e)/r;for(let M=0;M<=n;M++){let O=[],P=M/n,C=P*(t-e)+e;for(let N=0;N<=i;N++){let U=N/i,V=U*o+a,k=Math.sin(V),G=Math.cos(V);S.x=C*k,S.y=-P*r+b,S.z=C*G,d.push(S.x,S.y,S.z),_.set(k,A,G).normalize(),p.push(_.x,_.y,_.z),f.push(U,1-P),O.push(m++)}y.push(O)}for(let M=0;M<i;M++)for(let O=0;O<n;O++){let P=y[O][M],C=y[O+1][M],N=y[O+1][M+1],U=y[O][M+1];h.push(P,C,U),h.push(C,N,U),T+=6}l.addGroup(x,T,0),x+=T}function g(_){let S=m,T=new q,A=new L,M=0,O=_===!0?e:t,P=_===!0?1:-1;for(let N=1;N<=i;N++)d.push(0,b*P,0),p.push(0,P,0),f.push(.5,.5),m++;let C=m;for(let N=0;N<=i;N++){let U=N/i*o+a,V=Math.cos(U),k=Math.sin(U);A.x=O*k,A.y=b*P,A.z=O*V,d.push(A.x,A.y,A.z),p.push(0,P,0),T.x=V*.5+.5,T.y=k*.5*P+.5,f.push(T.x,T.y),m++}for(let N=0;N<i;N++){let U=S+N,V=C+N;_===!0?h.push(V,V+1,U):h.push(V+1,V,U),M+=3}l.addGroup(x,M,_===!0?1:2),x+=M}}static fromJSON(e){return new i_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},QP=class extends i_{constructor(e=1,t=1,r=8,i=1,n=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,n,s,a);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:s,thetaLength:a}}static fromJSON(e){return new QP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},n_=class extends st{constructor(e,t,r=1,i=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],s=[];a(i),l(r),h(),this.setAttribute("position",new We(n,3)),this.setAttribute("normal",new We(n.slice(),3)),this.setAttribute("uv",new We(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let g=new L,_=new L,S=new L;for(let T=0;T<t.length;T+=3)f(t[T+0],g),f(t[T+1],_),f(t[T+2],S),o(g,_,S,v)}function o(v,g,_,S){let T=S+1,A=[];for(let M=0;M<=T;M++){A[M]=[];let O=v.clone().lerp(_,M/T),P=g.clone().lerp(_,M/T),C=T-M;for(let N=0;N<=C;N++)N===0&&M===T?A[M][N]=O:A[M][N]=O.clone().lerp(P,N/C)}for(let M=0;M<T;M++)for(let O=0;O<2*(T-M)-1;O++){let P=Math.floor(O/2);O%2==0?(p(A[M][P+1]),p(A[M+1][P]),p(A[M][P])):(p(A[M][P+1]),p(A[M+1][P+1]),p(A[M+1][P]))}}function l(v){let g=new L;for(let _=0;_<n.length;_+=3)g.x=n[_+0],g.y=n[_+1],g.z=n[_+2],g.normalize().multiplyScalar(v),n[_+0]=g.x,n[_+1]=g.y,n[_+2]=g.z}function h(){let v=new L;for(let g=0;g<n.length;g+=3){v.x=n[g+0],v.y=n[g+1],v.z=n[g+2];let _=b(v)/2/Math.PI+.5,S=x(v)/Math.PI+.5;s.push(_,1-S)}m(),d()}function d(){for(let v=0;v<s.length;v+=6){let g=s[v+0],_=s[v+2],S=s[v+4],T=Math.max(g,_,S),A=Math.min(g,_,S);T>.9&&A<.1&&(g<.2&&(s[v+0]+=1),_<.2&&(s[v+2]+=1),S<.2&&(s[v+4]+=1))}}function p(v){n.push(v.x,v.y,v.z)}function f(v,g){let _=v*3;g.x=e[_+0],g.y=e[_+1],g.z=e[_+2]}function m(){let v=new L,g=new L,_=new L,S=new L,T=new q,A=new q,M=new q;for(let O=0,P=0;O<n.length;O+=9,P+=6){v.set(n[O+0],n[O+1],n[O+2]),g.set(n[O+3],n[O+4],n[O+5]),_.set(n[O+6],n[O+7],n[O+8]),T.set(s[P+0],s[P+1]),A.set(s[P+2],s[P+3]),M.set(s[P+4],s[P+5]),S.copy(v).add(g).add(_).divideScalar(3);let C=b(S);y(T,P+0,v,C),y(A,P+2,g,C),y(M,P+4,_,C)}}function y(v,g,_,S){S<0&&v.x===1&&(s[g]=v.x-1),_.x===0&&_.z===0&&(s[g]=S/2/Math.PI+.5)}function b(v){return Math.atan2(v.z,-v.x)}function x(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new n_(e.vertices,e.indices,e.radius,e.details)}},KP=class extends n_{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new KP(e.radius,e.detail)}};new L;new L;new L;new ii;var ps=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,s;t?s=t:s=e*r[n-1];let a=0,o=n-1,l;for(;a<=o;)if(i=Math.floor(a+(o-a)/2),l=r[i]-s,l<0)a=i+1;else if(l>0)o=i-1;else{o=i;break}if(i=o,r[i]===s)return i/(n-1);let h=r[i],d=r[i+1]-h,p=(s-h)/d;return(i+p)/(n-1)}getTangent(e,t){let r=1e-4,i=e-r,n=e+r;i<0&&(i=0),n>1&&(n=1);let s=this.getPoint(i),a=this.getPoint(n),o=t||(s.isVector2?new q:new L);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new L,i=[],n=[],s=[],a=new L,o=new He;for(let f=0;f<=e;f++){let m=f/e;i[f]=this.getTangentAt(m,new L),i[f].normalize()}n[0]=new L,s[0]=new L;let l=Number.MAX_VALUE,h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=l&&(l=h,r.set(1,0,0)),d<=l&&(l=d,r.set(0,1,0)),p<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],a),s[0].crossVectors(i[0],n[0]);for(let f=1;f<=e;f++){if(n[f]=n[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();let m=Math.acos(Oi(i[f-1].dot(i[f]),-1,1));n[f].applyMatrix4(o.makeRotationAxis(a,m))}s[f].crossVectors(i[f],n[f])}if(t===!0){let f=Math.acos(Oi(n[0].dot(n[e]),-1,1));f/=e,i[0].dot(a.crossVectors(n[0],n[e]))>0&&(f=-f);for(let m=1;m<=e;m++)n[m].applyMatrix4(o.makeRotationAxis(i[m],f*m)),s[m].crossVectors(i[m],n[m])}return{tangents:i,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Wp=class extends ps{constructor(e=0,t=0,r=1,i=1,n=0,s=Math.PI*2,a=!1,o=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){let r=t||new q,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(s?n=0:n=i),this.aClockwise===!0&&!s&&(n===i?n=-i:n=n-i);let a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=o-this.aX,f=l-this.aY;o=p*h-f*d+this.aX,l=p*d+f*h+this.aY}return r.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};Wp.prototype.isEllipseCurve=!0;var ZP=class extends Wp{constructor(e,t,r,i,n,s){super(e,t,r,r,i,n,s);this.type="ArcCurve"}};ZP.prototype.isArcCurve=!0;function s_(){let e=0,t=0,r=0,i=0;function n(s,a,o,l){e=s,t=o,r=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,h){n(a,o,h*(o-s),h*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,h,d,p){let f=(a-s)/h-(o-s)/(h+d)+(o-a)/d,m=(o-a)/d-(l-a)/(d+p)+(l-o)/p;f*=d,m*=d,n(a,o,f,m)},calc:function(s){let a=s*s,o=a*s;return e+t*s+r*a+i*o}}}var Pm=new L,Ax=new s_,Mx=new s_,Ex=new s_,$P=class extends ps{constructor(e=[],t=!1,r="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new L){let r=t,i=this.points,n=i.length,s=(n-(this.closed?0:1))*e,a=Math.floor(s),o=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:o===0&&a===n-1&&(a=n-2,o=1);let l,h;this.closed||a>0?l=i[(a-1)%n]:(Pm.subVectors(i[0],i[1]).add(i[0]),l=Pm);let d=i[a%n],p=i[(a+1)%n];if(this.closed||a+2<n?h=i[(a+2)%n]:(Pm.subVectors(i[n-1],i[n-2]).add(i[n-1]),h=Pm),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,m=Math.pow(l.distanceToSquared(d),f),y=Math.pow(d.distanceToSquared(p),f),b=Math.pow(p.distanceToSquared(h),f);y<1e-4&&(y=1),m<1e-4&&(m=y),b<1e-4&&(b=y),Ax.initNonuniformCatmullRom(l.x,d.x,p.x,h.x,m,y,b),Mx.initNonuniformCatmullRom(l.y,d.y,p.y,h.y,m,y,b),Ex.initNonuniformCatmullRom(l.z,d.z,p.z,h.z,m,y,b)}else this.curveType==="catmullrom"&&(Ax.initCatmullRom(l.x,d.x,p.x,h.x,this.tension),Mx.initCatmullRom(l.y,d.y,p.y,h.y,this.tension),Ex.initCatmullRom(l.z,d.z,p.z,h.z,this.tension));return r.set(Ax.calc(o),Mx.calc(o),Ex.calc(o)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new L().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};$P.prototype.isCatmullRomCurve3=!0;function vC(e,t,r,i,n){let s=(i-t)*.5,a=(n-r)*.5,o=e*e,l=e*o;return(2*r-2*i+s+a)*l+(-3*r+3*i-2*s-a)*o+s*e+r}function nJ(e,t){let r=1-e;return r*r*t}function sJ(e,t){return 2*(1-e)*e*t}function aJ(e,t){return e*e*t}function Wd(e,t,r,i){return nJ(e,t)+sJ(e,r)+aJ(e,i)}function oJ(e,t){let r=1-e;return r*r*r*t}function lJ(e,t){let r=1-e;return 3*r*r*e*t}function uJ(e,t){return 3*(1-e)*e*e*t}function hJ(e,t){return e*e*e*t}function Jd(e,t,r,i,n){return oJ(e,t)+lJ(e,r)+uJ(e,i)+hJ(e,n)}var Fs=class extends ps{constructor(e=new q,t=new q,r=new q,i=new q){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new q){let r=t,i=this.v0,n=this.v1,s=this.v2,a=this.v3;return r.set(Jd(e,i.x,n.x,s.x,a.x),Jd(e,i.y,n.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}};Fs.prototype.isCubicBezierCurve=!0;var eD=class extends ps{constructor(e=new L,t=new L,r=new L,i=new L){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new L){let r=t,i=this.v0,n=this.v1,s=this.v2,a=this.v3;return r.set(Jd(e,i.x,n.x,s.x,a.x),Jd(e,i.y,n.y,s.y,a.y),Jd(e,i.z,n.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}};eD.prototype.isCubicBezierCurve3=!0;var Gs=class extends ps{constructor(e=new q,t=new q){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new q){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new q;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};Gs.prototype.isLineCurve=!0;var tD=class extends ps{constructor(e=new L,t=new L){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new L){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ll=class extends ps{constructor(e=new q,t=new q,r=new q){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new q){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(Wd(e,i.x,n.x,s.x),Wd(e,i.y,n.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};ll.prototype.isQuadraticBezierCurve=!0;var rD=class extends ps{constructor(e=new L,t=new L,r=new L){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new L){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(Wd(e,i.x,n.x,s.x),Wd(e,i.y,n.y,s.y),Wd(e,i.z,n.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};rD.prototype.isQuadraticBezierCurve3=!0;var Yv=class extends ps{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new q){let r=t,i=this.points,n=(i.length-1)*e,s=Math.floor(n),a=n-s,o=i[s===0?s:s-1],l=i[s],h=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(vC(a,o.x,l.x,h.x,d.x),vC(a,o.y,l.y,h.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new q().fromArray(i))}return this}};Yv.prototype.isSplineCurve=!0;var iD=Object.freeze({__proto__:null,ArcCurve:ZP,CatmullRomCurve3:$P,CubicBezierCurve:Fs,CubicBezierCurve3:eD,EllipseCurve:Wp,LineCurve:Gs,LineCurve3:tD,QuadraticBezierCurve:ll,QuadraticBezierCurve3:rD,SplineCurve:Yv}),cJ={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,s=nD(e,0,n,r,!0),a=[];if(!s||s.next===s.prev)return a;let o,l,h,d,p,f,m;if(i&&(s=gJ(e,t,s,r)),e.length>80*r){o=h=e[0],l=d=e[1];for(let y=r;y<n;y+=r)p=e[y],f=e[y+1],p<o&&(o=p),f<l&&(l=f),p>h&&(h=p),f>d&&(d=f);m=Math.max(h-o,d-l),m=m!==0?1/m:0}return wp(s,a,r,o,l,m),a}};function nD(e,t,r,i,n){let s,a;if(n===TJ(e,t,r,i)>0)for(s=t;s<r;s+=i)a=yC(s,e[s],e[s+1],a);else for(s=r-i;s>=t;s-=i)a=yC(s,e[s],e[s+1],a);return a&&Xv(a,a.next)&&(_p(a),a=a.next),a}function ul(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(Xv(r,r.next)||Pr(r.prev,r,r.next)===0)){if(_p(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function wp(e,t,r,i,n,s,a){if(!e)return;!a&&s&&bJ(e,i,n,s);let o=e,l,h;for(;e.prev!==e.next;){if(l=e.prev,h=e.next,s?pJ(e,i,n,s):dJ(e)){t.push(l.i/r),t.push(e.i/r),t.push(h.i/r),_p(e),e=h.next,o=h.next;continue}if(e=h,e===o){a?a===1?(e=fJ(ul(e),t,r),wp(e,t,r,i,n,s,2)):a===2&&mJ(e,t,r,i,n,s):wp(ul(e),t,r,i,n,s,1);break}}}function dJ(e){let t=e.prev,r=e,i=e.next;if(Pr(t,r,i)>=0)return!1;let n=e.next.next;for(;n!==e.prev;){if(gh(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Pr(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function pJ(e,t,r,i){let n=e.prev,s=e,a=e.next;if(Pr(n,s,a)>=0)return!1;let o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,l=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,h=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,d=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,p=iw(o,l,t,r,i),f=iw(h,d,t,r,i),m=e.prevZ,y=e.nextZ;for(;m&&m.z>=p&&y&&y.z<=f;){if(m!==e.prev&&m!==e.next&&gh(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&Pr(m.prev,m,m.next)>=0||(m=m.prevZ,y!==e.prev&&y!==e.next&&gh(n.x,n.y,s.x,s.y,a.x,a.y,y.x,y.y)&&Pr(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;m&&m.z>=p;){if(m!==e.prev&&m!==e.next&&gh(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&Pr(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;y&&y.z<=f;){if(y!==e.prev&&y!==e.next&&gh(n.x,n.y,s.x,s.y,a.x,a.y,y.x,y.y)&&Pr(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function fJ(e,t,r){let i=e;do{let n=i.prev,s=i.next.next;!Xv(n,s)&&sD(n,i,i.next,s)&&bp(n,s)&&bp(s,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(s.i/r),_p(i),_p(i.next),i=e=s),i=i.next}while(i!==e);return ul(i)}function mJ(e,t,r,i,n,s){let a=e;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&AJ(a,o)){let l=aD(a,o);a=ul(a,a.next),l=ul(l,l.next),wp(a,t,r,i,n,s),wp(l,t,r,i,n,s);return}o=o.next}a=a.next}while(a!==e)}function gJ(e,t,r,i){let n=[],s,a,o,l,h;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,h=nD(e,o,l,i,!1),h===h.next&&(h.steiner=!0),n.push(SJ(h));for(n.sort(vJ),s=0;s<n.length;s++)yJ(n[s],r),r=ul(r,r.next);return r}function vJ(e,t){return e.x-t.x}function yJ(e,t){if(t=xJ(e,t),t){let r=aD(t,e);ul(t,t.next),ul(r,r.next)}}function xJ(e,t){let r=t,i=e.x,n=e.y,s=-1/0,a;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){let f=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(f<=i&&f>s){if(s=f,f===i){if(n===r.y)return r;if(n===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!a)return null;if(i===s)return a;let o=a,l=a.x,h=a.y,d=1/0,p;r=a;do i>=r.x&&r.x>=l&&i!==r.x&&gh(n<h?i:s,n,l,h,n<h?s:i,n,r.x,r.y)&&(p=Math.abs(n-r.y)/(i-r.x),bp(r,e)&&(p<d||p===d&&(r.x>a.x||r.x===a.x&&wJ(a,r)))&&(a=r,d=p)),r=r.next;while(r!==o);return a}function wJ(e,t){return Pr(e.prev,e,t.prev)<0&&Pr(t.next,e,e.next)<0}function bJ(e,t,r,i){let n=e;do n.z===null&&(n.z=iw(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,_J(n)}function _J(e){let t,r,i,n,s,a,o,l,h=1;do{for(r=e,e=null,s=null,a=0;r;){for(a++,i=r,o=0,t=0;t<h&&(o++,i=i.nextZ,!!i);t++);for(l=h;o>0||l>0&&i;)o!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,h*=2}while(a>1);return e}function iw(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function SJ(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function gh(e,t,r,i,n,s,a,o){return(n-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(i-o)-(r-a)*(t-o)>=0&&(r-a)*(s-o)-(n-a)*(i-o)>=0}function AJ(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!MJ(e,t)&&(bp(e,t)&&bp(t,e)&&EJ(e,t)&&(Pr(e.prev,e,t.prev)||Pr(e,t.prev,t))||Xv(e,t)&&Pr(e.prev,e,e.next)>0&&Pr(t.prev,t,t.next)>0)}function Pr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Xv(e,t){return e.x===t.x&&e.y===t.y}function sD(e,t,r,i){let n=Rm(Pr(e,t,r)),s=Rm(Pr(e,t,i)),a=Rm(Pr(r,i,e)),o=Rm(Pr(r,i,t));return!!(n!==s&&a!==o||n===0&&Dm(e,r,t)||s===0&&Dm(e,i,t)||a===0&&Dm(r,e,i)||o===0&&Dm(r,t,i))}function Dm(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Rm(e){return e>0?1:e<0?-1:0}function MJ(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&sD(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function bp(e,t){return Pr(e.prev,e,e.next)<0?Pr(e,t,e.next)>=0&&Pr(e,e.prev,t)>=0:Pr(e,t,e.prev)<0||Pr(e,e.next,t)<0}function EJ(e,t){let r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function aD(e,t){let r=new nw(e.i,e.x,e.y),i=new nw(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function yC(e,t,r,i){let n=new nw(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function _p(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function nw(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function TJ(e,t,r,i){let n=0;for(let s=t,a=r-i;s<r;s+=i)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}var Zo=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return Zo.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];xC(e),wC(r,e);let s=e.length;t.forEach(xC);for(let o=0;o<t.length;o++)i.push(s),s+=t[o].length,wC(r,t[o]);let a=cJ.triangulate(r,i);for(let o=0;o<a.length;o+=3)n.push(a.slice(o,o+3));return n}};function xC(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wC(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var Jp=class extends st{constructor(e,t){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let r=this,i=[],n=[];for(let a=0,o=e.length;a<o;a++){let l=e[a];s(l)}this.setAttribute("position",new We(i,3)),this.setAttribute("uv",new We(n,2)),this.computeVertexNormals();function s(a){let o=[],l=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:100,p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:6,m=t.bevelSize!==void 0?t.bevelSize:f-2,y=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3,x=t.extrudePath,v=t.UVGenerator!==void 0?t.UVGenerator:CJ;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let g,_=!1,S,T,A,M;x&&(g=x.getSpacedPoints(h),_=!0,p=!1,S=x.computeFrenetFrames(h,!1),T=new L,A=new L,M=new L),p||(b=0,f=0,m=0,y=0);let O=a.extractPoints(l),P=O.shape,C=O.holes;if(!Zo.isClockWise(P)){P=P.reverse();for(let Q=0,ie=C.length;Q<ie;Q++){let oe=C[Q];Zo.isClockWise(oe)&&(C[Q]=oe.reverse())}}let N=Zo.triangulateShape(P,C),U=P;for(let Q=0,ie=C.length;Q<ie;Q++){let oe=C[Q];P=P.concat(oe)}function V(Q,ie,oe){return ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),ie.clone().multiplyScalar(oe).add(Q)}let k=P.length,G=N.length;function Z(Q,ie,oe){let me,pe,we,Ae=Q.x-ie.x,F=Q.y-ie.y,B=oe.x-Q.x,de=oe.y-Q.y,Oe=Ae*Ae+F*F,Ce=Ae*de-F*B;if(Math.abs(Ce)>Number.EPSILON){let Re=Math.sqrt(Oe),ze=Math.sqrt(B*B+de*de),Ke=ie.x-F/Re,je=ie.y+Ae/Re,Ye=oe.x-de/ze,re=oe.y+B/ze,Ie=((Ye-Ke)*de-(re-je)*B)/(Ae*de-F*B);me=Ke+Ae*Ie-Q.x,pe=je+F*Ie-Q.y;let Me=me*me+pe*pe;if(Me<=2)return new q(me,pe);we=Math.sqrt(Me/2)}else{let Re=!1;Ae>Number.EPSILON?B>Number.EPSILON&&(Re=!0):Ae<-Number.EPSILON?B<-Number.EPSILON&&(Re=!0):Math.sign(F)===Math.sign(de)&&(Re=!0),Re?(me=-F,pe=Ae,we=Math.sqrt(Oe)):(me=Ae,pe=F,we=Math.sqrt(Oe/2))}return new q(me/we,pe/we)}let W=[];for(let Q=0,ie=U.length,oe=ie-1,me=Q+1;Q<ie;Q++,oe++,me++)oe===ie&&(oe=0),me===ie&&(me=0),W[Q]=Z(U[Q],U[oe],U[me]);let $=[],ae,te=W.concat();for(let Q=0,ie=C.length;Q<ie;Q++){let oe=C[Q];ae=[];for(let me=0,pe=oe.length,we=pe-1,Ae=me+1;me<pe;me++,we++,Ae++)we===pe&&(we=0),Ae===pe&&(Ae=0),ae[me]=Z(oe[me],oe[we],oe[Ae]);$.push(ae),te=te.concat(ae)}for(let Q=0;Q<b;Q++){let ie=Q/b,oe=f*Math.cos(ie*Math.PI/2),me=m*Math.sin(ie*Math.PI/2)+y;for(let pe=0,we=U.length;pe<we;pe++){let Ae=V(U[pe],W[pe],me);ge(Ae.x,Ae.y,-oe)}for(let pe=0,we=C.length;pe<we;pe++){let Ae=C[pe];ae=$[pe];for(let F=0,B=Ae.length;F<B;F++){let de=V(Ae[F],ae[F],me);ge(de.x,de.y,-oe)}}}let H=m+y;for(let Q=0;Q<k;Q++){let ie=p?V(P[Q],te[Q],H):P[Q];_?(A.copy(S.normals[0]).multiplyScalar(ie.x),T.copy(S.binormals[0]).multiplyScalar(ie.y),M.copy(g[0]).add(A).add(T),ge(M.x,M.y,M.z)):ge(ie.x,ie.y,0)}for(let Q=1;Q<=h;Q++)for(let ie=0;ie<k;ie++){let oe=p?V(P[ie],te[ie],H):P[ie];_?(A.copy(S.normals[Q]).multiplyScalar(oe.x),T.copy(S.binormals[Q]).multiplyScalar(oe.y),M.copy(g[Q]).add(A).add(T),ge(M.x,M.y,M.z)):ge(oe.x,oe.y,d/h*Q)}for(let Q=b-1;Q>=0;Q--){let ie=Q/b,oe=f*Math.cos(ie*Math.PI/2),me=m*Math.sin(ie*Math.PI/2)+y;for(let pe=0,we=U.length;pe<we;pe++){let Ae=V(U[pe],W[pe],me);ge(Ae.x,Ae.y,d+oe)}for(let pe=0,we=C.length;pe<we;pe++){let Ae=C[pe];ae=$[pe];for(let F=0,B=Ae.length;F<B;F++){let de=V(Ae[F],ae[F],me);_?ge(de.x,de.y+g[h-1].y,g[h-1].x+oe):ge(de.x,de.y,d+oe)}}}X(),J();function X(){let Q=i.length/3;if(p){let ie=0,oe=k*ie;for(let me=0;me<G;me++){let pe=N[me];Y(pe[2]+oe,pe[1]+oe,pe[0]+oe)}ie=h+b*2,oe=k*ie;for(let me=0;me<G;me++){let pe=N[me];Y(pe[0]+oe,pe[1]+oe,pe[2]+oe)}}else{for(let ie=0;ie<G;ie++){let oe=N[ie];Y(oe[2],oe[1],oe[0])}for(let ie=0;ie<G;ie++){let oe=N[ie];Y(oe[0]+k*h,oe[1]+k*h,oe[2]+k*h)}}r.addGroup(Q,i.length/3-Q,0)}function J(){let Q=i.length/3,ie=0;se(U,ie),ie+=U.length;for(let oe=0,me=C.length;oe<me;oe++){let pe=C[oe];se(pe,ie),ie+=pe.length}r.addGroup(Q,i.length/3-Q,1)}function se(Q,ie){let oe=Q.length;for(;--oe>=0;){let me=oe,pe=oe-1;pe<0&&(pe=Q.length-1);for(let we=0,Ae=h+b*2;we<Ae;we++){let F=k*we,B=k*(we+1),de=ie+me+F,Oe=ie+pe+F,Ce=ie+pe+B,Re=ie+me+B;be(de,Oe,Ce,Re)}}}function ge(Q,ie,oe){o.push(Q),o.push(ie),o.push(oe)}function Y(Q,ie,oe){fe(Q),fe(ie),fe(oe);let me=i.length/3,pe=v.generateTopUV(r,i,me-3,me-2,me-1);ee(pe[0]),ee(pe[1]),ee(pe[2])}function be(Q,ie,oe,me){fe(Q),fe(ie),fe(me),fe(ie),fe(oe),fe(me);let pe=i.length/3,we=v.generateSideWallUV(r,i,pe-6,pe-3,pe-2,pe-1);ee(we[0]),ee(we[1]),ee(we[3]),ee(we[1]),ee(we[2]),ee(we[3])}function fe(Q){i.push(o[Q*3+0]),i.push(o[Q*3+1]),i.push(o[Q*3+2])}function ee(Q){n.push(Q.x),n.push(Q.y)}}}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return LJ(t,r,e)}static fromJSON(e,t){let r=[];for(let n=0,s=e.shapes.length;n<s;n++){let a=t[e.shapes[n]];r.push(a)}let i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new iD[i.type]().fromJSON(i)),new Jp(r,e.options)}},CJ={generateTopUV:function(e,t,r,i,n){let s=t[r*3],a=t[r*3+1],o=t[i*3],l=t[i*3+1],h=t[n*3],d=t[n*3+1];return[new q(s,a),new q(o,l),new q(h,d)]},generateSideWallUV:function(e,t,r,i,n,s){let a=t[r*3],o=t[r*3+1],l=t[r*3+2],h=t[i*3],d=t[i*3+1],p=t[i*3+2],f=t[n*3],m=t[n*3+1],y=t[n*3+2],b=t[s*3],x=t[s*3+1],v=t[s*3+2];return Math.abs(o-d)<Math.abs(a-h)?[new q(a,1-l),new q(h,1-p),new q(f,1-y),new q(b,1-v)]:[new q(o,1-l),new q(d,1-p),new q(m,1-y),new q(x,1-v)]}};function LJ(e,t,r){if(r.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){let s=e[i];r.shapes.push(s.uuid)}else r.shapes.push(e.uuid);return t.extrudePath!==void 0&&(r.options.extrudePath=t.extrudePath.toJSON()),r}var oD=class extends n_{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oD(e.radius,e.detail)}},lD=class extends st{constructor(e,t=12,r=0,i=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Oi(i,0,Math.PI*2);let n=[],s=[],a=[],o=1/t,l=new L,h=new q;for(let d=0;d<=t;d++){let p=r+d*o*i,f=Math.sin(p),m=Math.cos(p);for(let y=0;y<=e.length-1;y++)l.x=e[y].x*f,l.y=e[y].y,l.z=e[y].x*m,s.push(l.x,l.y,l.z),h.x=d/t,h.y=y/(e.length-1),a.push(h.x,h.y)}for(let d=0;d<t;d++)for(let p=0;p<e.length-1;p++){let f=p+d*e.length,m=f,y=f+e.length,b=f+e.length+1,x=f+1;n.push(m,y,x),n.push(y,b,x)}if(this.setIndex(n),this.setAttribute("position",new We(s,3)),this.setAttribute("uv",new We(a,2)),this.computeVertexNormals(),i===Math.PI*2){let d=this.attributes.normal.array,p=new L,f=new L,m=new L,y=t*e.length*3;for(let b=0,x=0;b<e.length;b++,x+=3)p.x=d[x+0],p.y=d[x+1],p.z=d[x+2],f.x=d[y+x+0],f.y=d[y+x+1],f.z=d[y+x+2],m.addVectors(p,f).normalize(),d[x+0]=d[y+x+0]=m.x,d[x+1]=d[y+x+1]=m.y,d[x+2]=d[y+x+2]=m.z}}static fromJSON(e){return new lD(e.points,e.segments,e.phiStart,e.phiLength)}},a_=class extends st{constructor(e,t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let r=[],i=[],n=[],s=[],a=0,o=0;if(Array.isArray(e)===!1)l(e);else for(let h=0;h<e.length;h++)l(e[h]),this.addGroup(a,o,h),a+=o,o=0;this.setIndex(r),this.setAttribute("position",new We(i,3)),this.setAttribute("normal",new We(n,3)),this.setAttribute("uv",new We(s,2));function l(h){let d=i.length/3,p=h.extractPoints(t),f=p.shape,m=p.holes;Zo.isClockWise(f)===!1&&(f=f.reverse());for(let b=0,x=m.length;b<x;b++){let v=m[b];Zo.isClockWise(v)===!0&&(m[b]=v.reverse())}let y=Zo.triangulateShape(f,m);for(let b=0,x=m.length;b<x;b++){let v=m[b];f=f.concat(v)}for(let b=0,x=f.length;b<x;b++){let v=f[b];i.push(v.x,v.y,0),n.push(0,0,1),s.push(v.x,v.y)}for(let b=0,x=y.length;b<x;b++){let v=y[b],g=v[0]+d,_=v[1]+d,S=v[2]+d;r.push(g,_,S),o+=3}}}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return OJ(t,e)}static fromJSON(e,t){let r=[];for(let i=0,n=e.shapes.length;i<n;i++){let s=t[e.shapes[i]];r.push(s)}return new a_(r,e.curveSegments)}};function OJ(e,t){if(t.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){let n=e[r];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}var o_=class extends st{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,s=0,a=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let o=Math.min(s+a,Math.PI),l=0,h=[],d=new L,p=new L,f=[],m=[],y=[],b=[];for(let x=0;x<=r;x++){let v=[],g=x/r,_=0;x==0&&s==0?_=.5/t:x==r&&o==Math.PI&&(_=-.5/t);for(let S=0;S<=t;S++){let T=S/t;d.x=-e*Math.cos(i+T*n)*Math.sin(s+g*a),d.y=e*Math.cos(s+g*a),d.z=e*Math.sin(i+T*n)*Math.sin(s+g*a),m.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),b.push(T+_,1-g),v.push(l++)}h.push(v)}for(let x=0;x<r;x++)for(let v=0;v<t;v++){let g=h[x][v+1],_=h[x][v],S=h[x+1][v],T=h[x+1][v+1];(x!==0||s>0)&&f.push(g,_,T),(x!==r-1||o<Math.PI)&&f.push(_,S,T)}this.setIndex(f),this.setAttribute("position",new We(m,3)),this.setAttribute("normal",new We(y,3)),this.setAttribute("uv",new We(b,2))}static fromJSON(e){return new o_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},uD=class extends st{constructor(e=1,t=.4,r=64,i=8,n=2,s=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:s},r=Math.floor(r),i=Math.floor(i);let a=[],o=[],l=[],h=[],d=new L,p=new L,f=new L,m=new L,y=new L,b=new L,x=new L;for(let g=0;g<=r;++g){let _=g/r*n*Math.PI*2;v(_,n,s,e,f),v(_+.01,n,s,e,m),b.subVectors(m,f),x.addVectors(m,f),y.crossVectors(b,x),x.crossVectors(y,b),y.normalize(),x.normalize();for(let S=0;S<=i;++S){let T=S/i*Math.PI*2,A=-t*Math.cos(T),M=t*Math.sin(T);d.x=f.x+(A*x.x+M*y.x),d.y=f.y+(A*x.y+M*y.y),d.z=f.z+(A*x.z+M*y.z),o.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(g/r),h.push(S/i)}}for(let g=1;g<=r;g++)for(let _=1;_<=i;_++){let S=(i+1)*(g-1)+(_-1),T=(i+1)*g+(_-1),A=(i+1)*g+_,M=(i+1)*(g-1)+_;a.push(S,T,M),a.push(T,A,M)}this.setIndex(a),this.setAttribute("position",new We(o,3)),this.setAttribute("normal",new We(l,3)),this.setAttribute("uv",new We(h,2));function v(g,_,S,T,A){let M=Math.cos(g),O=Math.sin(g),P=S/_*g,C=Math.cos(P);A.x=T*(2+C)*.5*M,A.y=T*(2+C)*O*.5,A.z=T*Math.sin(P)*.5}}static fromJSON(e){return new uD(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},PJ=class extends $i{constructor(e){super();this.type="ShadowMaterial",this.color=new Ue(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}};PJ.prototype.isShadowMaterial=!0;var hD=class extends $i{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ue(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cc,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}};hD.prototype.isMeshStandardMaterial=!0;var DJ=class extends hD{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new q(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Oi(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Ue(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Ue(1,1,1),this.specularTintMap=null,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Ue).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}};DJ.prototype.isMeshPhysicalMaterial=!0;var RJ=class extends $i{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Ue(16777215),this.specular=new Ue(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cc,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}};RJ.prototype.isMeshPhongMaterial=!0;var NJ=class extends $i{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ue(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cc,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};NJ.prototype.isMeshToonMaterial=!0;var IJ=class extends $i{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cc,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}};IJ.prototype.isMeshNormalMaterial=!0;var BJ=class extends $i{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};BJ.prototype.isMeshLambertMaterial=!0;var zJ=class extends $i{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ue(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cc,this.normalScale=new q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}};zJ.prototype.isMeshMatcapMaterial=!0;var FJ=class extends gs{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};FJ.prototype.isLineDashedMaterial=!0;var Mr={arraySlice:function(e,t,r){return Mr.isTypedArray(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(n,s){return e[n]-e[s]}let r=e.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i},sortedArray:function(e,t,r){let i=e.length,n=new e.constructor(i);for(let s=0,a=0;a!==i;++s){let o=r[s]*t;for(let l=0;l!==t;++l)n[a++]=e[o+l]}return n},flattenJSON:function(e,t,r,i){let n=1,s=e[0];for(;s!==void 0&&s[i]===void 0;)s=e[n++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(t.push(s.time),r.push.apply(r,a)),s=e[n++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(t.push(s.time),a.toArray(r,r.length)),s=e[n++];while(s!==void 0);else do a=s[i],a!==void 0&&(t.push(s.time),r.push(a)),s=e[n++];while(s!==void 0)},subclip:function(e,t,r,i,n=30){let s=e.clone();s.name=t;let a=[];for(let l=0;l<s.tracks.length;++l){let h=s.tracks[l],d=h.getValueSize(),p=[],f=[];for(let m=0;m<h.times.length;++m){let y=h.times[m]*n;if(!(y<r||y>=i)){p.push(h.times[m]);for(let b=0;b<d;++b)f.push(h.values[m*d+b])}}p.length!==0&&(h.times=Mr.convertArray(p,h.times.constructor),h.values=Mr.convertArray(f,h.values.constructor),a.push(h))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,r=e,i=30){i<=0&&(i=30);let n=r.tracks.length,s=t/i;for(let a=0;a<n;++a){let o=r.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;let h=e.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(h===void 0)continue;let d=0,p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let f=0,m=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);let y=o.times.length-1,b;if(s<=o.times[0]){let v=d,g=p-d;b=Mr.arraySlice(o.values,v,g)}else if(s>=o.times[y]){let v=y*p+d,g=v+p-d;b=Mr.arraySlice(o.values,v,g)}else{let v=o.createInterpolant(),g=d,_=p-d;v.evaluate(s),b=Mr.arraySlice(v.resultBuffer,g,_)}l==="quaternion"&&new Hr().fromArray(b).normalize().conjugate().toArray(b);let x=h.times.length;for(let v=0;v<x;++v){let g=v*m+f;if(l==="quaternion")Hr.multiplyQuaternionsFlat(h.values,g,b,0,h.values,g);else{let _=m-f*2;for(let S=0;S<_;++S)h.values[g+S]-=b[S]}}}return e.blendMode=bP,e}},hl=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{let s;r:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,n)}if(r===a)break;if(n=i,i=t[++r],e<i)break t}s=t.length;break r}if(!(e>=n)){let a=t[1];e<a&&(r=2,n=a);for(let o=r-2;;){if(n===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===o)break;if(i=n,n=t[--r-1],e>=n)break t}s=r,r=0;break r}break e}for(;r<s;){let a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],n=t[r-1],n===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,n,e)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let s=0;s!==i;++s)t[s]=r[n+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}};hl.prototype.beforeStart_=hl.prototype.copySampleValue_;hl.prototype.afterEnd_=hl.prototype.copySampleValue_;var UJ=class extends hl{constructor(e,t,r,i){super(e,t,r,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ph,endingEnd:ph}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,s=e+1,a=i[n],o=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case fh:n=e,a=2*t-r;break;case Qg:n=i.length-2,a=t+i[n]-i[n+1];break;default:n=e,a=r}if(o===void 0)switch(this.getSettings_().endingEnd){case fh:s=e,o=2*r-t;break;case Qg:s=1,o=r+i[1]-i[0];break;default:s=e-1,o=t}let l=(r-t)*.5,h=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-r),this._offsetPrev=n*h,this._offsetNext=s*h}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,f=this._weightNext,m=(r-t)/(i-t),y=m*m,b=y*m,x=-p*b+2*p*y-p*m,v=(1+p)*b+(-1.5-2*p)*y+(-.5+p)*m+1,g=(-1-f)*b+(1.5+f)*y+.5*m,_=f*b-f*y;for(let S=0;S!==a;++S)n[S]=x*s[h+S]+v*s[l+S]+g*s[o+S]+_*s[d+S];return n}},cD=class extends hl{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=(r-t)/(i-t),d=1-h;for(let p=0;p!==a;++p)n[p]=s[l+p]*d+s[o+p]*h;return n}},kJ=class extends hl{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},Oa=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mr.convertArray(t,this.TimeBufferType),this.values=Mr.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Mr.convertArray(e.times,Array),values:Mr.convertArray(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new kJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new UJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case mp:t=this.InterpolantFactoryMethodDiscrete;break;case gp:t=this.InterpolantFactoryMethodLinear;break;case Yy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mp;case this.InterpolantFactoryMethodLinear:return gp;case this.InterpolantFactoryMethodSmooth:return Yy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,s=i-1;for(;n!==i&&r[n]<e;)++n;for(;s!==-1&&r[s]>t;)--s;if(++s,n!==0||s!==i){n>=s&&(s=Math.max(s,1),n=s-1);let a=this.getValueSize();this.times=Mr.arraySlice(r,n,s),this.values=Mr.arraySlice(this.values,n*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==n;a++){let o=r[a];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),e=!1;break}if(s!==null&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),e=!1;break}s=o}if(i!==void 0&&Mr.isTypedArray(i))for(let a=0,o=i.length;a!==o;++a){let l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=Mr.arraySlice(this.times),t=Mr.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===Yy,n=e.length-1,s=1;for(let a=1;a<n;++a){let o=!1,l=e[a],h=e[a+1];if(l!==h&&(a!==1||l!==e[0]))if(i)o=!0;else{let d=a*r,p=d-r,f=d+r;for(let m=0;m!==r;++m){let y=t[d+m];if(y!==t[p+m]||y!==t[f+m]){o=!0;break}}}if(o){if(a!==s){e[s]=e[a];let d=a*r,p=s*r;for(let f=0;f!==r;++f)t[p+f]=t[d+f]}++s}}if(n>0){e[s]=e[n];for(let a=n*r,o=s*r,l=0;l!==r;++l)t[o+l]=t[a+l];++s}return s!==e.length?(this.times=Mr.arraySlice(e,0,s),this.values=Mr.arraySlice(t,0,s*r)):(this.times=e,this.values=t),this}clone(){let e=Mr.arraySlice(this.times,0),t=Mr.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};Oa.prototype.TimeBufferType=Float32Array;Oa.prototype.ValueBufferType=Float32Array;Oa.prototype.DefaultInterpolation=gp;var mc=class extends Oa{};mc.prototype.ValueTypeName="bool";mc.prototype.ValueBufferType=Array;mc.prototype.DefaultInterpolation=mp;mc.prototype.InterpolantFactoryMethodLinear=void 0;mc.prototype.InterpolantFactoryMethodSmooth=void 0;var dD=class extends Oa{};dD.prototype.ValueTypeName="color";var Zg=class extends Oa{};Zg.prototype.ValueTypeName="number";var HJ=class extends hl{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(r-t)/(i-t),l=e*a;for(let h=l+a;l!==h;l+=4)Hr.slerpFlat(n,0,s,l-a,s,l,o);return n}},Yp=class extends Oa{InterpolantFactoryMethodLinear(e){return new HJ(this.times,this.values,this.getValueSize(),e)}};Yp.prototype.ValueTypeName="quaternion";Yp.prototype.DefaultInterpolation=gp;Yp.prototype.InterpolantFactoryMethodSmooth=void 0;var gc=class extends Oa{};gc.prototype.ValueTypeName="string";gc.prototype.ValueBufferType=Array;gc.prototype.DefaultInterpolation=mp;gc.prototype.InterpolantFactoryMethodLinear=void 0;gc.prototype.InterpolantFactoryMethodSmooth=void 0;var $g=class extends Oa{};$g.prototype.ValueTypeName="vector";var bC=class{constructor(e,t=-1,r,i=Xb){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Hs(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(VJ(r[s]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,s=r.length;n!==s;++n)t.push(Oa.toJSON(r[n]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,s=[];for(let a=0;a<n;a++){let o=[],l=[];o.push((a+n-1)%n,a,(a+1)%n),l.push(0,1,0);let h=Mr.getKeyframeOrder(o);o=Mr.sortedArray(o,1,h),l=Mr.sortedArray(l,1,h),!i&&o[0]===0&&(o.push(n),l.push(l[0])),s.push(new Zg(".morphTargetInfluences["+t[a].name+"]",o,l).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){let l=e[a],h=l.name.match(n);if(h&&h.length>1){let d=h[1],p=i[d];p||(i[d]=p=[]),p.push(l)}}let s=[];for(let a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(h,d,p,f,m){if(p.length!==0){let y=[],b=[];Mr.flattenJSON(p,y,b,f),y.length!==0&&m.push(new h(d,y,b))}},i=[],n=e.name||"default",s=e.fps||30,a=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let h=0;h<l.length;h++){let d=l[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){let p={},f;for(f=0;f<d.length;f++)if(d[f].morphTargets)for(let m=0;m<d[f].morphTargets.length;m++)p[d[f].morphTargets[m]]=-1;for(let m in p){let y=[],b=[];for(let x=0;x!==d[f].morphTargets.length;++x){let v=d[f];y.push(v.time),b.push(v.morphTarget===m?1:0)}i.push(new Zg(".morphTargetInfluence["+m+"]",y,b))}o=p.length*(s||1)}else{let p=".bones["+t[h].name+"]";r($g,p+".position",d,"pos",i),r(Yp,p+".quaternion",d,"rot",i),r($g,p+".scale",d,"scl",i)}}return i.length===0?null:new this(n,o,i,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function GJ(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Zg;case"vector":case"vector2":case"vector3":case"vector4":return $g;case"color":return dD;case"quaternion":return Yp;case"bool":case"boolean":return mc;case"string":return gc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function VJ(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=GJ(e.type);if(e.times===void 0){let r=[],i=[];Mr.flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var qh={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},l_=class{constructor(e,t,r){let i=this,n=!1,s=0,a=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,n===!1&&i.onStart!==void 0&&i.onStart(h,s,a),n=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,a),s===a&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return o?o(h):h},this.setURLModifier=function(h){return o=h,this},this.addHandler=function(h,d){return l.push(h,d),this},this.removeHandler=function(h){let d=l.indexOf(h);return d!==-1&&l.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=l.length;d<p;d+=2){let f=l[d],m=l[d+1];if(f.global&&(f.lastIndex=0),f.test(h))return m}return null}}},jJ=new l_,Js=class{constructor(e){this.manager=e!==void 0?e:jJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Cs={},u_=class extends Js{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,s=qh.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;if(Cs[e]!==void 0){Cs[e].push({onLoad:t,onProgress:r,onError:i});return}let a=/^data:(.*?)(;base64)?,(.*)$/,o=e.match(a),l;if(o){let h=o[1],d=!!o[2],p=o[3];p=decodeURIComponent(p),d&&(p=atob(p));try{let f,m=(this.responseType||"").toLowerCase();switch(m){case"arraybuffer":case"blob":let y=new Uint8Array(p.length);for(let b=0;b<p.length;b++)y[b]=p.charCodeAt(b);m==="blob"?f=new Blob([y.buffer],{type:h}):f=y.buffer;break;case"document":f=new DOMParser().parseFromString(p,h);break;case"json":f=JSON.parse(p);break;default:f=p;break}setTimeout(function(){t&&t(f),n.manager.itemEnd(e)},0)}catch(f){setTimeout(function(){i&&i(f),n.manager.itemError(e),n.manager.itemEnd(e)},0)}}else{Cs[e]=[],Cs[e].push({onLoad:t,onProgress:r,onError:i}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(h){let d=this.response,p=Cs[e];if(delete Cs[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),qh.add(e,d);for(let f=0,m=p.length;f<m;f++){let y=p[f];y.onLoad&&y.onLoad(d)}n.manager.itemEnd(e)}else{for(let f=0,m=p.length;f<m;f++){let y=p[f];y.onError&&y.onError(h)}n.manager.itemError(e),n.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(h){let d=Cs[e];for(let p=0,f=d.length;p<f;p++){let m=d[p];m.onProgress&&m.onProgress(h)}},!1),l.addEventListener("error",function(h){let d=Cs[e];delete Cs[e];for(let p=0,f=d.length;p<f;p++){let m=d[p];m.onError&&m.onError(h)}n.manager.itemError(e),n.manager.itemEnd(e)},!1),l.addEventListener("abort",function(h){let d=Cs[e];delete Cs[e];for(let p=0,f=d.length;p<f;p++){let m=d[p];m.onError&&m.onError(h)}n.manager.itemError(e),n.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(let h in this.requestHeader)l.setRequestHeader(h,this.requestHeader[h]);l.send(null)}return n.manager.itemStart(e),l}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},pD=class extends Js{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,s=qh.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;let a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),qh.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(h){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),i&&i(h),n.manager.itemError(e),n.manager.itemEnd(e)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(e),a.src=e,a}},WJ=class extends Js{constructor(e){super(e)}load(e,t,r,i){let n=new jp,s=new pD(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(l){s.load(e[l],function(h){n.images[l]=h,a++,a===6&&(n.needsUpdate=!0,t&&t(n))},void 0,i)}for(let l=0;l<e.length;++l)o(l);return n}},JJ=class extends Js{constructor(e){super(e)}load(e,t,r,i){let n=new Rr,s=new pD(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){n.image=a;let o=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;n.format=o?Qi:ci,n.needsUpdate=!0,t!==void 0&&t(n)},r,i),n}},YJ=class extends ps{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Gs(t,e))}getPoint(e){let t=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=t){let n=r[i]-t,s=this.curves[i],a=s.getLength(),o=a===0?0:1-n/a;return s.getPointAt(o)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let s=n[i],a=s&&s.isEllipseCurve?e*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let l=0;l<o.length;l++){let h=o[l];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new iD[i.type]().fromJSON(i))}return this}},ev=class extends YJ{constructor(e){super();this.type="Path",this.currentPoint=new q,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new Gs(this.currentPoint.clone(),new q(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new ll(this.currentPoint.clone(),new q(e,t),new q(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,s){let a=new Fs(this.currentPoint.clone(),new q(e,t),new q(r,i),new q(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new Yv(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,s){let a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,r,i,n,s),this}absarc(e,t,r,i,n,s){return this.absellipse(e,t,r,r,i,n,s),this}ellipse(e,t,r,i,n,s,a,o){let l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+l,t+h,r,i,n,s,a,o),this}absellipse(e,t,r,i,n,s,a,o){let l=new Wp(e,t,r,i,n,s,a,o);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},ro=class extends ev{constructor(e){super(e);this.uuid=Hs(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new ev().fromJSON(i))}return this}},js=class extends Nt{constructor(e,t=1){super();this.type="Light",this.color=new Ue(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};js.prototype.isLight=!0;var tv=class extends js{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(Nt.DefaultUp),this.updateMatrix(),this.groundColor=new Ue(t)}copy(e){return js.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}};tv.prototype.isHemisphereLight=!0;var _C=new He,SC=new L,AC=new L,h_=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new q(512,512),this.map=null,this.mapPass=null,this.matrix=new He,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gv,this._frameExtents=new q(1,1),this._viewportCount=1,this._viewports=[new Tt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;SC.setFromMatrixPosition(e.matrixWorld),t.position.copy(SC),AC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(AC),t.updateMatrixWorld(),_C.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_C),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},fD=class extends h_{constructor(){super(new Pi(50,1,.5,500));this.focus=1}updateMatrices(e){let t=this.camera,r=yp*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}};fD.prototype.isSpotLightShadow=!0;var mD=class extends js{constructor(e,t,r=0,i=Math.PI/3,n=0,s=1){super(e,t);this.type="SpotLight",this.position.copy(Nt.DefaultUp),this.updateMatrix(),this.target=new Nt,this.distance=r,this.angle=i,this.penumbra=n,this.decay=s,this.shadow=new fD}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};mD.prototype.isSpotLight=!0;var MC=new He,ld=new L,Tx=new L,gD=class extends h_{constructor(){super(new Pi(90,1,.5,500));this._frameExtents=new q(4,2),this._viewportCount=6,this._viewports=[new Tt(2,1,1,1),new Tt(0,1,1,1),new Tt(3,1,1,1),new Tt(1,1,1,1),new Tt(3,0,1,1),new Tt(1,0,1,1)],this._cubeDirections=[new L(1,0,0),new L(-1,0,0),new L(0,0,1),new L(0,0,-1),new L(0,1,0),new L(0,-1,0)],this._cubeUps=[new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,0,1),new L(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),ld.setFromMatrixPosition(e.matrixWorld),r.position.copy(ld),Tx.copy(r.position),Tx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Tx),r.updateMatrixWorld(),i.makeTranslation(-ld.x,-ld.y,-ld.z),MC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MC)}};gD.prototype.isPointLightShadow=!0;var vD=class extends js{constructor(e,t,r=0,i=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new gD}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}};vD.prototype.isPointLight=!0;var yD=class extends h_{constructor(){super(new jv(-5,5,5,-5,.5,500))}};yD.prototype.isDirectionalLightShadow=!0;var xD=class extends js{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(Nt.DefaultUp),this.updateMatrix(),this.target=new Nt,this.shadow=new yD}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};xD.prototype.isDirectionalLight=!0;var XJ=class extends js{constructor(e,t){super(e,t);this.type="AmbientLight"}};XJ.prototype.isAmbientLight=!0;var qJ=class extends js{constructor(e,t,r=10,i=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=i}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}};qJ.prototype.isRectAreaLight=!0;var wD=class{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new L)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let r=e.x,i=e.y,n=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*n),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*n)),t.addScaledVector(s[6],.315392*(3*n*n-1)),t.addScaledVector(s[7],1.092548*(r*n)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){let r=e.x,i=e.y,n=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*n),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*n),t.addScaledVector(s[6],.743125*n*n-.247708),t.addScaledVector(s[7],2*.429043*r*n),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){let r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){let r=e.x,i=e.y,n=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*n,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*n,t[6]=.315392*(3*n*n-1),t[7]=1.092548*r*n,t[8]=.546274*(r*r-i*i)}};wD.prototype.isSphericalHarmonics3=!0;var c_=class extends js{constructor(e=new wD,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}};c_.prototype.isLightProbe=!0;var QJ=class{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}},bD=class extends st{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){let e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};bD.prototype.isInstancedBufferGeometry=!0;var _D=class extends dt{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,r);this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};_D.prototype.isInstancedBufferAttribute=!0;var d_=class extends Js{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new u_(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(o){i?i(o):console.error(o),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(p,f){if(t[f]!==void 0)return t[f];let m=p.interleavedBuffers[f],y=n(p,m.buffer),b=dm(m.type,y),x=new au(b,m.stride);return x.uuid=m.uuid,t[f]=x,x}function n(p,f){if(r[f]!==void 0)return r[f];let m=p.arrayBuffers[f],y=new Uint32Array(m).buffer;return r[f]=y,y}let s=e.isInstancedBufferGeometry?new bD:new st,a=e.data.index;if(a!==void 0){let p=dm(a.type,a.array);s.setIndex(new dt(p,1))}let o=e.data.attributes;for(let p in o){let f=o[p],m;if(f.isInterleavedBufferAttribute){let y=i(e.data,f.data);m=new Zl(y,f.itemSize,f.offset,f.normalized)}else{let y=dm(f.type,f.array),b=f.isInstancedBufferAttribute?_D:dt;m=new b(y,f.itemSize,f.normalized)}f.name!==void 0&&(m.name=f.name),f.usage!==void 0&&m.setUsage(f.usage),f.updateRange!==void 0&&(m.updateRange.offset=f.updateRange.offset,m.updateRange.count=f.updateRange.count),s.setAttribute(p,m)}let l=e.data.morphAttributes;if(l)for(let p in l){let f=l[p],m=[];for(let y=0,b=f.length;y<b;y++){let x=f[y],v;if(x.isInterleavedBufferAttribute){let g=i(e.data,x.data);v=new Zl(g,x.itemSize,x.offset,x.normalized)}else{let g=dm(x.type,x.array);v=new dt(g,x.itemSize,x.normalized)}x.name!==void 0&&(v.name=x.name),m.push(v)}s.morphAttributes[p]=m}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let p=0,f=h.length;p!==f;++p){let m=h[p];s.addGroup(m.start,m.count,m.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let p=new L;d.center!==void 0&&p.fromArray(d.center),s.boundingSphere=new Vs(p,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},KJ=class extends Js{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,s=qh.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(o){return o.blob()}).then(function(o){return createImageBitmap(o,Object.assign(n.options,{colorSpaceConversion:"none"}))}).then(function(o){qh.add(e,o),t&&t(o),n.manager.itemEnd(e)}).catch(function(o){i&&i(o),n.manager.itemError(e),n.manager.itemEnd(e)}),n.manager.itemStart(e)}};KJ.prototype.isImageBitmapLoader=!0;var ZJ=class{constructor(){this.type="ShapePath",this.color=new Ue,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ev,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,s){return this.currentPath.bezierCurveTo(e,t,r,i,n,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(v){let g=[];for(let _=0,S=v.length;_<S;_++){let T=v[_],A=new ro;A.curves=T.curves,g.push(A)}return g}function i(v,g){let _=g.length,S=!1;for(let T=_-1,A=0;A<_;T=A++){let M=g[T],O=g[A],P=O.x-M.x,C=O.y-M.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(M=g[A],P=-P,O=g[T],C=-C),v.y<M.y||v.y>O.y)continue;if(v.y===M.y){if(v.x===M.x)return!0}else{let N=C*(v.x-M.x)-P*(v.y-M.y);if(N===0)return!0;if(N<0)continue;S=!S}}else{if(v.y!==M.y)continue;if(O.x<=v.x&&v.x<=M.x||M.x<=v.x&&v.x<=O.x)return!0}}return S}let n=Zo.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return r(s);let a,o,l,h=[];if(s.length===1)return o=s[0],l=new ro,l.curves=o.curves,h.push(l),h;let d=!n(s[0].getPoints());d=e?!d:d;let p=[],f=[],m=[],y=0,b;f[y]=void 0,m[y]=[];for(let v=0,g=s.length;v<g;v++)o=s[v],b=o.getPoints(),a=n(b),a=e?!a:a,a?(!d&&f[y]&&y++,f[y]={s:new ro,p:b},f[y].s.curves=o.curves,d&&y++,m[y]=[]):m[y].push({h:o,p:b[0]});if(!f[0])return r(s);if(f.length>1){let v=!1,g=[];for(let _=0,S=f.length;_<S;_++)p[_]=[];for(let _=0,S=f.length;_<S;_++){let T=m[_];for(let A=0;A<T.length;A++){let M=T[A],O=!0;for(let P=0;P<f.length;P++)i(M.p,f[P].p)&&(_!==P&&g.push({froms:_,tos:P,hole:A}),O?(O=!1,p[P].push(M)):v=!0);O&&p[_].push(M)}}g.length>0&&(v||(m=p))}let x;for(let v=0,g=f.length;v<g;v++){l=f[v].s,h.push(l),x=m[v];for(let _=0,S=x.length;_<S;_++)l.holes.push(x[_].h)}return h}},SD=class{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){let r=[],i=$J(e,t,this.data);for(let n=0,s=i.length;n<s;n++)Array.prototype.push.apply(r,i[n].toShapes());return r}};function $J(e,t,r){let i=Array.from(e),n=t/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n,a=[],o=0,l=0;for(let h=0;h<i.length;h++){let d=i[h];if(d===`
`)o=0,l-=s;else{let p=eY(d,n,o,l,r);o+=p.offsetX,a.push(p.path)}}return a}function eY(e,t,r,i,n){let s=n.glyphs[e]||n.glyphs["?"];if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+n.familyName+".");return}let a=new ZJ,o,l,h,d,p,f,m,y;if(s.o){let b=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let x=0,v=b.length;x<v;)switch(b[x++]){case"m":o=b[x++]*t+r,l=b[x++]*t+i,a.moveTo(o,l);break;case"l":o=b[x++]*t+r,l=b[x++]*t+i,a.lineTo(o,l);break;case"q":h=b[x++]*t+r,d=b[x++]*t+i,p=b[x++]*t+r,f=b[x++]*t+i,a.quadraticCurveTo(p,f,h,d);break;case"b":h=b[x++]*t+r,d=b[x++]*t+i,p=b[x++]*t+r,f=b[x++]*t+i,m=b[x++]*t+r,y=b[x++]*t+i,a.bezierCurveTo(p,f,m,y,h,d);break}}return{offsetX:s.ha*t,path:a}}SD.prototype.isFont=!0;var tY=class extends Js{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new u_(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){let o;try{o=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),o=JSON.parse(a.substring(65,a.length-2))}let l=n.parse(o);t&&t(l)},r,i)}parse(e){return new SD(e)}},Nm,rY={getContext:function(){return Nm===void 0&&(Nm=new(window.AudioContext||window.webkitAudioContext)),Nm},setContext:function(e){Nm=e}},iY=class extends Js{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new u_(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{let o=a.slice(0);rY.getContext().decodeAudioData(o,function(l){t(l)})}catch(o){i?i(o):console.error(o),n.manager.itemError(e)}},r,i)}},nY=class extends c_{constructor(e,t,r=1){super(void 0,r);let i=new Ue().set(e),n=new Ue().set(t),s=new L(i.r,i.g,i.b),a=new L(n.r,n.g,n.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(l)}};nY.prototype.isHemisphereLightProbe=!0;var sY=class extends c_{constructor(e,t=1){super(void 0,t);let r=new Ue().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}};sY.prototype.isAmbientLightProbe=!0;var aY=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=EC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=EC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function EC(){return(typeof performance=="undefined"?Date:performance).now()}var oY=class extends Nt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},lY=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,n,s;switch(t){case"quaternion":i=this._slerp,n=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,n=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[n+a]=r[a];s=t}else{s+=t;let a=t/s;this._mixBufferRegion(r,n,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let o=t*this._origIndex;this._mixBufferRegion(r,i,o,1-n,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(r[o]!==r[o+t]){a.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let n=r,s=i;n!==s;++n)t[n]=t[i+n%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let s=0;s!==n;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Hr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let s=this._workIndex*n;Hr.multiplyQuaternionsFlat(e,s,e,t,e,r),Hr.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,n){let s=1-i;for(let a=0;a!==n;++a){let o=t+a;e[o]=e[o]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,n){for(let s=0;s!==n;++s){let a=t+s;e[a]=e[a]+e[r+s]*i}}},p_="\\[\\]\\.:\\/",uY=new RegExp("["+p_+"]","g"),f_="[^"+p_+"]",hY="[^"+p_.replace("\\.","")+"]",cY=/((?:WC+[\/:])*)/.source.replace("WC",f_),dY=/(WCOD+)?/.source.replace("WCOD",hY),pY=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",f_),fY=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",f_),mY=new RegExp("^"+cY+dY+pY+fY+"$"),gY=["material","materials","bones"],vY=class{constructor(e,t,r){let i=r||qt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},qt=class{constructor(e,t,r){this.path=t,this.parsedPath=r||qt.parseTrackName(t),this.node=qt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new qt.Composite(e,t,r):new qt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uY,"")}static parseTrackName(e){let t=mY.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let n=r.nodeName.substring(i+1);gY.indexOf(n)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(n){for(let s=0;s<n.length;s++){let a=n[s];if(a.name===t||a.uuid===t)return a;let o=r(a.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=qt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===l){l=h;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let s=e[i];if(s===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(n!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else s.fromArray!==void 0&&s.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};qt.Composite=vY;qt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qt.prototype.GetterByBindingType=[qt.prototype._getValue_direct,qt.prototype._getValue_array,qt.prototype._getValue_arrayElement,qt.prototype._getValue_toArray];qt.prototype.SetterByBindingTypeAndVersioning=[[qt.prototype._setValue_direct,qt.prototype._setValue_direct_setNeedsUpdate,qt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_array,qt.prototype._setValue_array_setNeedsUpdate,qt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_arrayElement,qt.prototype._setValue_arrayElement_setNeedsUpdate,qt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qt.prototype._setValue_fromArray,qt.prototype._setValue_fromArray_setNeedsUpdate,qt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var yY=class{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;let n=t.tracks,s=n.length,a=new Array(s),o={endingStart:ph,endingEnd:ph};for(let l=0;l!==s;++l){let h=n[l].createInterpolant(null);a[l]=h,h.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=K6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let i=this._clip.duration,n=e._clip.duration,s=n/i,a=i/n;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);let o=a.parameterPositions,l=a.sampleValues;return o[0]=n,o[1]=n+r,l[0]=e/s,l[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let o=(e-n)*r;if(o<0||r===0)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);let s=this._updateTime(t),a=this._updateWeight(e);if(a>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case bP:for(let h=0,d=o.length;h!==d;++h)o[h].evaluate(s),l[h].accumulateAdditive(a);break;case Xb:default:for(let h=0,d=o.length;h!==d;++h)o[h].evaluate(s),l[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,s=r===Z6;if(e===0)return n===-1?i:s&&(n&1)==1?t-i:i;if(r===Q6){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){let a=Math.floor(i/t);i-=t*a,n+=Math.abs(a);let o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(n&1)==1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=fh,i.endingEnd=fh):(e?i.endingStart=this.zeroSlopeAtStart?fh:ph:i.endingStart=Qg,t?i.endingEnd=this.zeroSlopeAtEnd?fh:ph:i.endingEnd=Qg)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,o=s.sampleValues;return a[0]=n,o[0]=t,a[1]=n+e,o[1]=r,this}},xY=class extends Gn{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,s=e._propertyBindings,a=e._interpolants,o=r.uuid,l=this._bindingsByRootAndName,h=l[o];h===void 0&&(h={},l[o]=h);for(let d=0;d!==n;++d){let p=i[d],f=p.name,m=h[f];if(m!==void 0)s[d]=m;else{if(m=s[d],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,o,f));continue}let y=t&&t._propertyBindings[d].binding.parsedPath;m=new lY(qt.create(r,f,y),p.ValueTypeName,p.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,o,f),s[d]=m}a[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,r)}let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];n.useCount++==0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.useCount==0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,s=n[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,s=this._actionsByClip,a=s[n],o=a.knownActions,l=o[o.length-1],h=e._byClipCacheIndex;l._byClipCacheIndex=h,o[h]=l,o.pop(),e._byClipCacheIndex=null;let d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],o.length===0&&delete s[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.referenceCount==0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[n],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new cD(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,s=typeof e=="string"?bC.findByName(i,e):e,a=s!==null?s.uuid:e,o=this._actionsByClip[a],l=null;if(r===void 0&&(s!==null?r=s.blendMode:r=Xb),o!==void 0){let d=o.actionByRoot[n];if(d!==void 0&&d.blendMode===r)return d;l=o.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let h=new yY(this,s,t,r);return this._bindAction(h,l),this._addInactiveAction(h,a,n),h}existingAction(e,t){let r=t||this._root,i=r.uuid,n=typeof e=="string"?bC.findByName(r,e):e,s=n?n.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,n,s);let a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(n!==void 0){let s=n.knownActions;for(let a=0,o=s.length;a!==o;++a){let l=s[a];this._deactivateAction(l);let h=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let s in r){let a=r[s].actionByRoot,o=a[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let i=this._bindingsByRootAndName,n=i[t];if(n!==void 0)for(let s in n){let a=n[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}};xY.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var $e=class{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new $e(this.value.clone===void 0?this.value:this.value.clone())}},wY=class extends au{constructor(e,t,r=1){super(e,t);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}};wY.prototype.isInstancedInterleavedBuffer=!0;var bY=class{constructor(e,t,r=0,i=1/0){this.ray=new ml(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new AP,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!1,r=[]){return sw(e,this,r,t),r.sort(TC),r}intersectObjects(e,t=!1,r=[]){for(let i=0,n=e.length;i<n;i++)sw(e[i],this,r,t);return r.sort(TC),r}};function TC(e,t){return e.distance-t.distance}function sw(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let s=0,a=n.length;s<a;s++)sw(n[s],t,r,!0)}}var CC=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){let e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Oi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};new q;var LC=new L,Im=new L,Rn=class{constructor(e=new L,t=new L){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){LC.subVectors(e,this.start),Im.subVectors(this.end,this.start);let r=Im.dot(Im),i=Im.dot(LC)/r;return t&&(i=Oi(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},_Y=class extends Nt{constructor(e){super();this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}};_Y.prototype.isImmediateRenderObject=!0;var OC=new L,SY=class extends Nt{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let r=new st,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){let l=s/o*Math.PI*2,h=a/o*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new We(i,3));let n=new gs({fog:!1,toneMapped:!1});this.cone=new gl(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),OC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(OC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Lo=new L,Bm=new He,Cx=new He,AY=class extends gl{constructor(e){let t=AD(e),r=new st,i=[],n=[],s=new Ue(0,0,1),a=new Ue(0,1,0);for(let l=0;l<t.length;l++){let h=t[l];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(s.r,s.g,s.b),n.push(a.r,a.g,a.b))}r.setAttribute("position",new We(i,3)),r.setAttribute("color",new We(n,3));let o=new gs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,o);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,r=this.geometry,i=r.getAttribute("position");Cx.copy(this.root.matrixWorld).invert();for(let n=0,s=0;n<t.length;n++){let a=t[n];a.parent&&a.parent.isBone&&(Bm.multiplyMatrices(Cx,a.matrixWorld),Lo.setFromMatrixPosition(Bm),i.setXYZ(s,Lo.x,Lo.y,Lo.z),Bm.multiplyMatrices(Cx,a.parent.matrixWorld),Lo.setFromMatrixPosition(Bm),i.setXYZ(s+1,Lo.x,Lo.y,Lo.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}};function AD(e){let t=[];e&&e.isBone&&t.push(e);for(let r=0;r<e.children.length;r++)t.push.apply(t,AD(e.children[r]));return t}var MY=class extends wi{constructor(e,t,r){let i=new o_(t,4,2),n=new Kl({wireframe:!0,fog:!1,toneMapped:!1});super(i,n);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},EY=class extends gl{constructor(e=10,t=10,r=4473924,i=8947848){r=new Ue(r),i=new Ue(i);let n=t/2,s=e/t,a=e/2,o=[],l=[];for(let p=0,f=0,m=-a;p<=t;p++,m+=s){o.push(-a,0,m,a,0,m),o.push(m,0,-a,m,0,a);let y=p===n?r:i;y.toArray(l,f),f+=3,y.toArray(l,f),f+=3,y.toArray(l,f),f+=3,y.toArray(l,f),f+=3}let h=new st;h.setAttribute("position",new We(o,3)),h.setAttribute("color",new We(l,3));let d=new gs({vertexColors:!0,toneMapped:!1});super(h,d);this.type="GridHelper"}},PC=new L,zm=new L,DC=new L,TY=class extends Nt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new st;i.setAttribute("position",new We([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new gs({fog:!1,toneMapped:!1});this.lightPlane=new Xh(i,n),this.add(this.lightPlane),i=new st,i.setAttribute("position",new We([0,0,0,0,0,1],3)),this.targetLine=new Xh(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){PC.setFromMatrixPosition(this.light.matrixWorld),zm.setFromMatrixPosition(this.light.target.matrixWorld),DC.subVectors(zm,PC),this.lightPlane.lookAt(zm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(zm),this.targetLine.scale.z=DC.length()}},Fm=new L,Ir=new su,Uo=class extends gl{constructor(e){let t=new st,r=new gs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={},a=new Ue(16755200),o=new Ue(16711680),l=new Ue(43775),h=new Ue(16777215),d=new Ue(3355443);p("n1","n2",a),p("n2","n4",a),p("n4","n3",a),p("n3","n1",a),p("f1","f2",a),p("f2","f4",a),p("f4","f3",a),p("f3","f1",a),p("n1","f1",a),p("n2","f2",a),p("n3","f3",a),p("n4","f4",a),p("p","n1",o),p("p","n2",o),p("p","n3",o),p("p","n4",o),p("u1","u2",l),p("u2","u3",l),p("u3","u1",l),p("c","t",h),p("p","c",d),p("cn1","cn2",d),p("cn3","cn4",d),p("cf1","cf2",d),p("cf3","cf4",d);function p(m,y,b){f(m,b),f(y,b)}function f(m,y){i.push(0,0,0),n.push(y.r,y.g,y.b),s[m]===void 0&&(s[m]=[]),s[m].push(i.length/3-1)}t.setAttribute("position",new We(i,3)),t.setAttribute("color",new We(n,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;Ir.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wr("c",t,e,Ir,0,0,-1),Wr("t",t,e,Ir,0,0,1),Wr("n1",t,e,Ir,-r,-i,-1),Wr("n2",t,e,Ir,r,-i,-1),Wr("n3",t,e,Ir,-r,i,-1),Wr("n4",t,e,Ir,r,i,-1),Wr("f1",t,e,Ir,-r,-i,1),Wr("f2",t,e,Ir,r,-i,1),Wr("f3",t,e,Ir,-r,i,1),Wr("f4",t,e,Ir,r,i,1),Wr("u1",t,e,Ir,r*.7,i*1.1,-1),Wr("u2",t,e,Ir,-r*.7,i*1.1,-1),Wr("u3",t,e,Ir,0,i*2,-1),Wr("cf1",t,e,Ir,-r,0,1),Wr("cf2",t,e,Ir,r,0,1),Wr("cf3",t,e,Ir,0,-i,1),Wr("cf4",t,e,Ir,0,i,1),Wr("cn1",t,e,Ir,-r,0,-1),Wr("cn2",t,e,Ir,r,0,-1),Wr("cn3",t,e,Ir,0,-i,-1),Wr("cn4",t,e,Ir,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Wr(e,t,r,i,n,s,a){Fm.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let h=0,d=o.length;h<d;h++)l.setXYZ(o[h],Fm.x,Fm.y,Fm.z)}}var Um=class extends gl{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new st;n.setIndex(new dt(r,1)),n.setAttribute("position",new We(i,3));super(n,new gs({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},CY=class extends gl{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new st;i.setAttribute("position",new We(t,3)),i.setAttribute("color",new We(r,3));let n=new gs({vertexColors:!0,toneMapped:!1});super(i,n);this.type="AxesHelper"}setColors(e,t,r){let i=new Ue,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},LY=new Float32Array(1);new Int32Array(LY.buffer);ps.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(ps.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};ev.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)};EY.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};AY.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Js.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),QJ.extractUrlBase(e)};Js.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};zi.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)};zi.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};zi.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)};zi.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)};zi.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)};Vs.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Gv.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)};Rn.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Dr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)};Dr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)};Dr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Dr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)};Dr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Dr.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()};He.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)};He.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)};He.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new L().setFromMatrixColumn(this,3)};He.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)};He.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};He.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};He.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};He.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};He.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)};He.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};He.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};He.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};He.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};He.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};He.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};He.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};He.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};He.prototype.makeFrustum=function(e,t,r,i,n,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,r,n,s)};He.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()};Ds.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Hr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Hr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};ml.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)};ml.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)};ml.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)};ii.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};ii.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)};ii.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)};ii.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)};ii.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)};ii.barycoordFromPoint=function(e,t,r,i,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ii.getBarycoord(e,t,r,i,n)};ii.normal=function(e,t,r,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ii.getNormal(e,t,r,i)};ro.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)};ro.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Jp(this,e)};ro.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new a_(this,e)};q.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)};q.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)};q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};L.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};L.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};L.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)};L.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)};L.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)};L.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)};L.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)};L.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)};L.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Tt.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)};Tt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Nt.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)};Nt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Nt.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)};Nt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Nt.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)};Object.defineProperties(Nt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});wi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(wi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),_P},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});YP.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Pi.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(js.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(dt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Kg},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Kg)}}});dt.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?Kg:vp),this};dt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},dt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};st.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)};st.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new dt(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)};st.prototype.addDrawCall=function(e,t,r){r!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)};st.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};st.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};st.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)};st.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)};Object.defineProperties(st.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});au.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?Kg:vp),this};au.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Jp.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Jp.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Jp.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Ma.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};$e.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties($i.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ue}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===mP}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Bi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});hr.prototype.clearTarget=function(e,t,r,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,i)};hr.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)};hr.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};hr.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};hr.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};hr.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};hr.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};hr.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};hr.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};hr.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};hr.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};hr.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};hr.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};hr.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};hr.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)};hr.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};hr.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};hr.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};hr.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};hr.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};hr.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};hr.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};hr.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};hr.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};hr.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(hr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?Gp:Ii}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(VP.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(ni.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});oY.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");let t=this;return new iY().load(e,function(r){t.setBuffer(r)}),this};$b.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};$b.prototype.clear=function(e,t,r,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,r,i)};dc.crossOrigin=void 0;dc.loadTexture=function(e,t,r,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");let n=new JJ;n.setCrossOrigin(this.crossOrigin);let s=n.load(e,r,void 0,i);return t&&(s.mapping=t),s};dc.loadTextureCube=function(e,t,r,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");let n=new WJ;n.setCrossOrigin(this.crossOrigin);let s=n.load(e,r,void 0,i);return t&&(s.mapping=t),s};dc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};dc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:dP}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=dP);var OY=()=>typeof window=="undefined"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),PY=()=>typeof window=="undefined"?!1:window.navigator.platform.toUpperCase().includes("MAC"),DY=()=>typeof window=="undefined"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0;OY();var m_=PY(),RY=DY();function NY(e){return Array.isArray(e)?e:[e]}function km(e){return m_?e.metaKey:e.ctrlKey}var IY=typeof global=="object"&&global&&global.Object===Object&&global,MD=IY,BY=typeof self=="object"&&self&&self.Object===Object&&self,zY=MD||BY||Function("return this")(),Ys=zY,FY=Ys.Symbol,Ta=FY,ED=Object.prototype,UY=ED.hasOwnProperty,kY=ED.toString,ud=Ta?Ta.toStringTag:void 0;function HY(e){var t=UY.call(e,ud),r=e[ud];try{e[ud]=void 0;var i=!0}catch{}var n=kY.call(e);return i&&(t?e[ud]=r:delete e[ud]),n}var GY=HY,VY=Object.prototype,jY=VY.toString;function WY(e){return jY.call(e)}var JY=WY,YY="[object Null]",XY="[object Undefined]",RC=Ta?Ta.toStringTag:void 0;function qY(e){return e==null?e===void 0?XY:YY:RC&&RC in Object(e)?GY(e):JY(e)}var ou=qY;function QY(e){return e!=null&&typeof e=="object"}var vl=QY,KY="[object Symbol]";function ZY(e){return typeof e=="symbol"||vl(e)&&ou(e)==KY}var qv=ZY;function $Y(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var TD=$Y,eX=Array.isArray,ao=eX,tX=1/0,NC=Ta?Ta.prototype:void 0,IC=NC?NC.toString:void 0;function CD(e){if(typeof e=="string")return e;if(ao(e))return TD(e,CD)+"";if(qv(e))return IC?IC.call(e):"";var t=e+"";return t=="0"&&1/e==-tX?"-0":t}var rX=CD,iX=/\s/;function nX(e){for(var t=e.length;t--&&iX.test(e.charAt(t)););return t}var sX=nX,aX=/^\s+/;function oX(e){return e&&e.slice(0,sX(e)+1).replace(aX,"")}var lX=oX;function uX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ws=uX,BC=0/0,hX=/^[-+]0x[0-9a-f]+$/i,cX=/^0b[01]+$/i,dX=/^0o[0-7]+$/i,pX=parseInt;function fX(e){if(typeof e=="number")return e;if(qv(e))return BC;if(Ws(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ws(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=lX(e);var r=cX.test(e);return r||dX.test(e)?pX(e.slice(2),r?2:8):hX.test(e)?BC:+e}var zC=fX;function mX(e){return e}var LD=mX,gX="[object AsyncFunction]",vX="[object Function]",yX="[object GeneratorFunction]",xX="[object Proxy]";function wX(e){if(!Ws(e))return!1;var t=ou(e);return t==vX||t==yX||t==gX||t==xX}var g_=wX,bX=Ys["__core-js_shared__"],Lx=bX,FC=function(){var e=/[^.]+$/.exec(Lx&&Lx.keys&&Lx.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _X(e){return!!FC&&FC in e}var SX=_X,AX=Function.prototype,MX=AX.toString;function EX(e){if(e!=null){try{return MX.call(e)}catch{}try{return e+""}catch{}}return""}var lu=EX,TX=/[\\^$.*+?()[\]{}|]/g,CX=/^\[object .+?Constructor\]$/,LX=Function.prototype,OX=Object.prototype,PX=LX.toString,DX=OX.hasOwnProperty,RX=RegExp("^"+PX.call(DX).replace(TX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function NX(e){if(!Ws(e)||SX(e))return!1;var t=g_(e)?RX:CX;return t.test(lu(e))}var IX=NX;function BX(e,t){return e==null?void 0:e[t]}var zX=BX;function FX(e,t){var r=zX(e,t);return IX(r)?r:void 0}var uu=FX,UX=uu(Ys,"WeakMap"),aw=UX,UC=Object.create,kX=function(){function e(){}return function(t){if(!Ws(t))return{};if(UC)return UC(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),HX=kX;function GX(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var VX=GX;function jX(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var OD=jX,WX=800,JX=16,YX=Date.now;function XX(e){var t=0,r=0;return function(){var i=YX(),n=JX-(i-r);if(r=i,n>0){if(++t>=WX)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var qX=XX;function QX(e){return function(){return e}}var KX=QX,ZX=function(){try{var e=uu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),rv=ZX,$X=rv?function(e,t){return rv(e,"toString",{configurable:!0,enumerable:!1,value:KX(t),writable:!0})}:LD,eq=$X,tq=qX(eq),PD=tq;function rq(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var iq=rq,nq=9007199254740991,sq=/^(?:0|[1-9]\d*)$/;function aq(e,t){var r=typeof e;return t=t==null?nq:t,!!t&&(r=="number"||r!="symbol"&&sq.test(e))&&e>-1&&e%1==0&&e<t}var DD=aq;function oq(e,t,r){t=="__proto__"&&rv?rv(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var v_=oq;function lq(e,t){return e===t||e!==e&&t!==t}var Qv=lq,uq=Object.prototype,hq=uq.hasOwnProperty;function cq(e,t,r){var i=e[t];(!(hq.call(e,t)&&Qv(i,r))||r===void 0&&!(t in e))&&v_(e,t,r)}var RD=cq;function dq(e,t,r,i){var n=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=i?i(r[o],e[o],o,r,e):void 0;l===void 0&&(l=e[o]),n?v_(r,o,l):RD(r,o,l)}return r}var vc=dq,kC=Math.max;function pq(e,t,r){return t=kC(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=kC(i.length-t,0),a=Array(s);++n<s;)a[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(a),VX(e,this,o)}}var ND=pq;function fq(e,t){return PD(ND(e,t,LD),e+"")}var mq=fq,gq=9007199254740991;function vq(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=gq}var ID=vq;function yq(e){return e!=null&&ID(e.length)&&!g_(e)}var Kv=yq;function xq(e,t,r){if(!Ws(r))return!1;var i=typeof t;return(i=="number"?Kv(r)&&DD(t,r.length):i=="string"&&t in r)?Qv(r[t],e):!1}var wq=xq;function bq(e){return mq(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&wq(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}var _q=bq,Sq=Object.prototype;function Aq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Sq;return e===r}var y_=Aq;function Mq(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Eq=Mq,Tq="[object Arguments]";function Cq(e){return vl(e)&&ou(e)==Tq}var HC=Cq,BD=Object.prototype,Lq=BD.hasOwnProperty,Oq=BD.propertyIsEnumerable,Pq=HC(function(){return arguments}())?HC:function(e){return vl(e)&&Lq.call(e,"callee")&&!Oq.call(e,"callee")},iv=Pq;function Dq(){return!1}var Rq=Dq,zD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,GC=zD&&typeof module=="object"&&module&&!module.nodeType&&module,Nq=GC&&GC.exports===zD,VC=Nq?Ys.Buffer:void 0,Iq=VC?VC.isBuffer:void 0,Bq=Iq||Rq,x_=Bq,zq="[object Arguments]",Fq="[object Array]",Uq="[object Boolean]",kq="[object Date]",Hq="[object Error]",Gq="[object Function]",Vq="[object Map]",jq="[object Number]",Wq="[object Object]",Jq="[object RegExp]",Yq="[object Set]",Xq="[object String]",qq="[object WeakMap]",Qq="[object ArrayBuffer]",Kq="[object DataView]",Zq="[object Float32Array]",$q="[object Float64Array]",eQ="[object Int8Array]",tQ="[object Int16Array]",rQ="[object Int32Array]",iQ="[object Uint8Array]",nQ="[object Uint8ClampedArray]",sQ="[object Uint16Array]",aQ="[object Uint32Array]",wr={};wr[Zq]=wr[$q]=wr[eQ]=wr[tQ]=wr[rQ]=wr[iQ]=wr[nQ]=wr[sQ]=wr[aQ]=!0;wr[zq]=wr[Fq]=wr[Qq]=wr[Uq]=wr[Kq]=wr[kq]=wr[Hq]=wr[Gq]=wr[Vq]=wr[jq]=wr[Wq]=wr[Jq]=wr[Yq]=wr[Xq]=wr[qq]=!1;function oQ(e){return vl(e)&&ID(e.length)&&!!wr[ou(e)]}var lQ=oQ;function uQ(e){return function(t){return e(t)}}var w_=uQ,FD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yd=FD&&typeof module=="object"&&module&&!module.nodeType&&module,hQ=Yd&&Yd.exports===FD,Ox=hQ&&MD.process,cQ=function(){try{var e=Yd&&Yd.require&&Yd.require("util").types;return e||Ox&&Ox.binding&&Ox.binding("util")}catch{}}(),Qh=cQ,jC=Qh&&Qh.isTypedArray,dQ=jC?w_(jC):lQ,UD=dQ,pQ=Object.prototype,fQ=pQ.hasOwnProperty;function mQ(e,t){var r=ao(e),i=!r&&iv(e),n=!r&&!i&&x_(e),s=!r&&!i&&!n&&UD(e),a=r||i||n||s,o=a?Eq(e.length,String):[],l=o.length;for(var h in e)(t||fQ.call(e,h))&&!(a&&(h=="length"||n&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||DD(h,l)))&&o.push(h);return o}var kD=mQ;function gQ(e,t){return function(r){return e(t(r))}}var HD=gQ,vQ=HD(Object.keys,Object),yQ=vQ,xQ=Object.prototype,wQ=xQ.hasOwnProperty;function bQ(e){if(!y_(e))return yQ(e);var t=[];for(var r in Object(e))wQ.call(e,r)&&r!="constructor"&&t.push(r);return t}var _Q=bQ;function SQ(e){return Kv(e)?kD(e):_Q(e)}var b_=SQ;function AQ(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var MQ=AQ,EQ=Object.prototype,TQ=EQ.hasOwnProperty;function CQ(e){if(!Ws(e))return MQ(e);var t=y_(e),r=[];for(var i in e)i=="constructor"&&(t||!TQ.call(e,i))||r.push(i);return r}var LQ=CQ;function OQ(e){return Kv(e)?kD(e,!0):LQ(e)}var Xp=OQ,PQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,DQ=/^\w*$/;function RQ(e,t){if(ao(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||qv(e)?!0:DQ.test(e)||!PQ.test(e)||t!=null&&e in Object(t)}var NQ=RQ,IQ=uu(Object,"create"),Sp=IQ;function BQ(){this.__data__=Sp?Sp(null):{},this.size=0}var zQ=BQ;function FQ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var UQ=FQ,kQ="__lodash_hash_undefined__",HQ=Object.prototype,GQ=HQ.hasOwnProperty;function VQ(e){var t=this.__data__;if(Sp){var r=t[e];return r===kQ?void 0:r}return GQ.call(t,e)?t[e]:void 0}var jQ=VQ,WQ=Object.prototype,JQ=WQ.hasOwnProperty;function YQ(e){var t=this.__data__;return Sp?t[e]!==void 0:JQ.call(t,e)}var XQ=YQ,qQ="__lodash_hash_undefined__";function QQ(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sp&&t===void 0?qQ:t,this}var KQ=QQ;function yc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}yc.prototype.clear=zQ;yc.prototype.delete=UQ;yc.prototype.get=jQ;yc.prototype.has=XQ;yc.prototype.set=KQ;var WC=yc;function ZQ(){this.__data__=[],this.size=0}var $Q=ZQ;function eK(e,t){for(var r=e.length;r--;)if(Qv(e[r][0],t))return r;return-1}var Zv=eK,tK=Array.prototype,rK=tK.splice;function iK(e){var t=this.__data__,r=Zv(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():rK.call(t,r,1),--this.size,!0}var nK=iK;function sK(e){var t=this.__data__,r=Zv(t,e);return r<0?void 0:t[r][1]}var aK=sK;function oK(e){return Zv(this.__data__,e)>-1}var lK=oK;function uK(e,t){var r=this.__data__,i=Zv(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var hK=uK;function xc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}xc.prototype.clear=$Q;xc.prototype.delete=nK;xc.prototype.get=aK;xc.prototype.has=lK;xc.prototype.set=hK;var $v=xc,cK=uu(Ys,"Map"),Ap=cK;function dK(){this.size=0,this.__data__={hash:new WC,map:new(Ap||$v),string:new WC}}var pK=dK;function fK(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mK=fK;function gK(e,t){var r=e.__data__;return mK(t)?r[typeof t=="string"?"string":"hash"]:r.map}var e0=gK;function vK(e){var t=e0(this,e).delete(e);return this.size-=t?1:0,t}var yK=vK;function xK(e){return e0(this,e).get(e)}var wK=xK;function bK(e){return e0(this,e).has(e)}var _K=bK;function SK(e,t){var r=e0(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var AK=SK;function wc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}wc.prototype.clear=pK;wc.prototype.delete=yK;wc.prototype.get=wK;wc.prototype.has=_K;wc.prototype.set=AK;var __=wc,MK="Expected a function";function S_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(MK);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(S_.Cache||__),r}S_.Cache=__;var EK=S_,TK=500;function CK(e){var t=EK(e,function(i){return r.size===TK&&r.clear(),i}),r=t.cache;return t}var LK=CK,OK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,PK=/\\(\\)?/g,DK=LK(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(OK,function(r,i,n,s){t.push(n?s.replace(PK,"$1"):i||r)}),t}),RK=DK;function NK(e){return e==null?"":rX(e)}var IK=NK;function BK(e,t){return ao(e)?e:NQ(e,t)?[e]:RK(IK(e))}var A_=BK,zK=1/0;function FK(e){if(typeof e=="string"||qv(e))return e;var t=e+"";return t=="0"&&1/e==-zK?"-0":t}var GD=FK;function UK(e,t){t=A_(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[GD(t[r++])];return r&&r==i?e:void 0}var kK=UK;function HK(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var M_=HK,JC=Ta?Ta.isConcatSpreadable:void 0;function GK(e){return ao(e)||iv(e)||!!(JC&&e&&e[JC])}var VK=GK;function VD(e,t,r,i,n){var s=-1,a=e.length;for(r||(r=VK),n||(n=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?VD(o,t-1,r,i,n):M_(n,o):i||(n[n.length]=o)}return n}var jK=VD;function WK(e){var t=e==null?0:e.length;return t?jK(e,1):[]}var JK=WK;function YK(e){return PD(ND(e,void 0,JK),e+"")}var XK=YK,qK=HD(Object.getPrototypeOf,Object),E_=qK,QK="[object Object]",KK=Function.prototype,ZK=Object.prototype,jD=KK.toString,$K=ZK.hasOwnProperty,eZ=jD.call(Object);function tZ(e){if(!vl(e)||ou(e)!=QK)return!1;var t=E_(e);if(t===null)return!0;var r=$K.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&jD.call(r)==eZ}var WD=tZ;function rZ(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++i<n;)s[i]=e[i+t];return s}var iZ=rZ;function nZ(){this.__data__=new $v,this.size=0}var sZ=nZ;function aZ(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var oZ=aZ;function lZ(e){return this.__data__.get(e)}var uZ=lZ;function hZ(e){return this.__data__.has(e)}var cZ=hZ,dZ=200;function pZ(e,t){var r=this.__data__;if(r instanceof $v){var i=r.__data__;if(!Ap||i.length<dZ-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new __(i)}return r.set(e,t),this.size=r.size,this}var fZ=pZ;function bc(e){var t=this.__data__=new $v(e);this.size=t.size}bc.prototype.clear=sZ;bc.prototype.delete=oZ;bc.prototype.get=uZ;bc.prototype.has=cZ;bc.prototype.set=fZ;var JD=bc;function mZ(e,t){return e&&vc(t,b_(t),e)}var gZ=mZ;function vZ(e,t){return e&&vc(t,Xp(t),e)}var yZ=vZ,YD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,YC=YD&&typeof module=="object"&&module&&!module.nodeType&&module,xZ=YC&&YC.exports===YD,XC=xZ?Ys.Buffer:void 0,qC=XC?XC.allocUnsafe:void 0;function wZ(e,t){if(t)return e.slice();var r=e.length,i=qC?qC(r):new e.constructor(r);return e.copy(i),i}var XD=wZ;function bZ(e,t){for(var r=-1,i=e==null?0:e.length,n=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[n++]=a)}return s}var _Z=bZ;function SZ(){return[]}var qD=SZ,AZ=Object.prototype,MZ=AZ.propertyIsEnumerable,QC=Object.getOwnPropertySymbols,EZ=QC?function(e){return e==null?[]:(e=Object(e),_Z(QC(e),function(t){return MZ.call(e,t)}))}:qD,T_=EZ;function TZ(e,t){return vc(e,T_(e),t)}var CZ=TZ,LZ=Object.getOwnPropertySymbols,OZ=LZ?function(e){for(var t=[];e;)M_(t,T_(e)),e=E_(e);return t}:qD,QD=OZ;function PZ(e,t){return vc(e,QD(e),t)}var DZ=PZ;function RZ(e,t,r){var i=t(e);return ao(e)?i:M_(i,r(e))}var KD=RZ;function NZ(e){return KD(e,b_,T_)}var IZ=NZ;function BZ(e){return KD(e,Xp,QD)}var ZD=BZ,zZ=uu(Ys,"DataView"),ow=zZ,FZ=uu(Ys,"Promise"),lw=FZ,UZ=uu(Ys,"Set"),uw=UZ,KC="[object Map]",kZ="[object Object]",ZC="[object Promise]",$C="[object Set]",e2="[object WeakMap]",t2="[object DataView]",HZ=lu(ow),GZ=lu(Ap),VZ=lu(lw),jZ=lu(uw),WZ=lu(aw),Rl=ou;(ow&&Rl(new ow(new ArrayBuffer(1)))!=t2||Ap&&Rl(new Ap)!=KC||lw&&Rl(lw.resolve())!=ZC||uw&&Rl(new uw)!=$C||aw&&Rl(new aw)!=e2)&&(Rl=function(e){var t=ou(e),r=t==kZ?e.constructor:void 0,i=r?lu(r):"";if(i)switch(i){case HZ:return t2;case GZ:return KC;case VZ:return ZC;case jZ:return $C;case WZ:return e2}return t});var C_=Rl,JZ=Object.prototype,YZ=JZ.hasOwnProperty;function XZ(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&YZ.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var qZ=XZ,QZ=Ys.Uint8Array,r2=QZ;function KZ(e){var t=new e.constructor(e.byteLength);return new r2(t).set(new r2(e)),t}var L_=KZ;function ZZ(e,t){var r=t?L_(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var $Z=ZZ,e$=/\w*$/;function t$(e){var t=new e.constructor(e.source,e$.exec(e));return t.lastIndex=e.lastIndex,t}var r$=t$,i2=Ta?Ta.prototype:void 0,n2=i2?i2.valueOf:void 0;function i$(e){return n2?Object(n2.call(e)):{}}var n$=i$;function s$(e,t){var r=t?L_(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var $D=s$,a$="[object Boolean]",o$="[object Date]",l$="[object Map]",u$="[object Number]",h$="[object RegExp]",c$="[object Set]",d$="[object String]",p$="[object Symbol]",f$="[object ArrayBuffer]",m$="[object DataView]",g$="[object Float32Array]",v$="[object Float64Array]",y$="[object Int8Array]",x$="[object Int16Array]",w$="[object Int32Array]",b$="[object Uint8Array]",_$="[object Uint8ClampedArray]",S$="[object Uint16Array]",A$="[object Uint32Array]";function M$(e,t,r){var i=e.constructor;switch(t){case f$:return L_(e);case a$:case o$:return new i(+e);case m$:return $Z(e,r);case g$:case v$:case y$:case x$:case w$:case b$:case _$:case S$:case A$:return $D(e,r);case l$:return new i;case u$:case d$:return new i(e);case h$:return r$(e);case c$:return new i;case p$:return n$(e)}}var E$=M$;function T$(e){return typeof e.constructor=="function"&&!y_(e)?HX(E_(e)):{}}var eR=T$,C$="[object Map]";function L$(e){return vl(e)&&C_(e)==C$}var O$=L$,s2=Qh&&Qh.isMap,P$=s2?w_(s2):O$,D$=P$,R$="[object Set]";function N$(e){return vl(e)&&C_(e)==R$}var I$=N$,a2=Qh&&Qh.isSet,B$=a2?w_(a2):I$,z$=B$,F$=1,U$=2,k$=4,tR="[object Arguments]",H$="[object Array]",G$="[object Boolean]",V$="[object Date]",j$="[object Error]",rR="[object Function]",W$="[object GeneratorFunction]",J$="[object Map]",Y$="[object Number]",iR="[object Object]",X$="[object RegExp]",q$="[object Set]",Q$="[object String]",K$="[object Symbol]",Z$="[object WeakMap]",$$="[object ArrayBuffer]",eee="[object DataView]",tee="[object Float32Array]",ree="[object Float64Array]",iee="[object Int8Array]",nee="[object Int16Array]",see="[object Int32Array]",aee="[object Uint8Array]",oee="[object Uint8ClampedArray]",lee="[object Uint16Array]",uee="[object Uint32Array]",mr={};mr[tR]=mr[H$]=mr[$$]=mr[eee]=mr[G$]=mr[V$]=mr[tee]=mr[ree]=mr[iee]=mr[nee]=mr[see]=mr[J$]=mr[Y$]=mr[iR]=mr[X$]=mr[q$]=mr[Q$]=mr[K$]=mr[aee]=mr[oee]=mr[lee]=mr[uee]=!0;mr[j$]=mr[rR]=mr[Z$]=!1;function gg(e,t,r,i,n,s){var a,o=t&F$,l=t&U$,h=t&k$;if(r&&(a=n?r(e,i,n,s):r(e)),a!==void 0)return a;if(!Ws(e))return e;var d=ao(e);if(d){if(a=qZ(e),!o)return OD(e,a)}else{var p=C_(e),f=p==rR||p==W$;if(x_(e))return XD(e,o);if(p==iR||p==tR||f&&!n){if(a=l||f?{}:eR(e),!o)return l?DZ(e,yZ(a,e)):CZ(e,gZ(a,e))}else{if(!mr[p])return n?e:{};a=E$(e,p,o)}}s||(s=new JD);var m=s.get(e);if(m)return m;s.set(e,a),z$(e)?e.forEach(function(x){a.add(gg(x,t,r,x,e,s))}):D$(e)&&e.forEach(function(x,v){a.set(v,gg(x,t,r,v,e,s))});var y=h?l?ZD:IZ:l?Xp:b_,b=d?void 0:y(e);return iq(b||e,function(x,v){b&&(v=x,x=e[v]),RD(a,v,gg(x,t,r,v,e,s))}),a}var hee=gg;function cee(e){return function(t,r,i){for(var n=-1,s=Object(t),a=i(t),o=a.length;o--;){var l=a[e?o:++n];if(r(s[l],l,s)===!1)break}return t}}var dee=cee,pee=dee(),fee=pee,mee=function(){return Ys.Date.now()},Px=mee,gee="Expected a function",vee=Math.max,yee=Math.min;function xee(e,t,r){var i,n,s,a,o,l,h=0,d=!1,p=!1,f=!0;if(typeof e!="function")throw new TypeError(gee);t=zC(t)||0,Ws(r)&&(d=!!r.leading,p="maxWait"in r,s=p?vee(zC(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f);function m(A){var M=i,O=n;return i=n=void 0,h=A,a=e.apply(O,M),a}function y(A){return h=A,o=setTimeout(v,t),d?m(A):a}function b(A){var M=A-l,O=A-h,P=t-M;return p?yee(P,s-O):P}function x(A){var M=A-l,O=A-h;return l===void 0||M>=t||M<0||p&&O>=s}function v(){var A=Px();if(x(A))return g(A);o=setTimeout(v,b(A))}function g(A){return o=void 0,f&&i?m(A):(i=n=void 0,a)}function _(){o!==void 0&&clearTimeout(o),h=0,i=l=n=o=void 0}function S(){return o===void 0?a:g(Px())}function T(){var A=Px(),M=x(A);if(i=arguments,n=this,l=A,M){if(o===void 0)return y(l);if(p)return clearTimeout(o),o=setTimeout(v,t),m(l)}return o===void 0&&(o=setTimeout(v,t)),a}return T.cancel=_,T.flush=S,T}var nR=xee;function wee(e,t,r){(r!==void 0&&!Qv(e[t],r)||r===void 0&&!(t in e))&&v_(e,t,r)}var hw=wee;function bee(e){return vl(e)&&Kv(e)}var _ee=bee;function See(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var cw=See;function Aee(e){return vc(e,Xp(e))}var Mee=Aee;function Eee(e,t,r,i,n,s,a){var o=cw(e,r),l=cw(t,r),h=a.get(l);if(h){hw(e,r,h);return}var d=s?s(o,l,r+"",e,t,a):void 0,p=d===void 0;if(p){var f=ao(l),m=!f&&x_(l),y=!f&&!m&&UD(l);d=l,f||m||y?ao(o)?d=o:_ee(o)?d=OD(o):m?(p=!1,d=XD(l,!0)):y?(p=!1,d=$D(l,!0)):d=[]:WD(l)||iv(l)?(d=o,iv(o)?d=Mee(o):(!Ws(o)||g_(o))&&(d=eR(l))):p=!1}p&&(a.set(l,d),n(d,l,i,s,a),a.delete(l)),hw(e,r,d)}var Tee=Eee;function sR(e,t,r,i,n){e!==t&&fee(t,function(s,a){if(n||(n=new JD),Ws(s))Tee(e,t,a,r,sR,i,n);else{var o=i?i(cw(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),hw(e,a,o)}},Xp)}var Cee=sR;function Lee(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Oee=Lee;function Pee(e,t){return t.length<2?e:kK(e,iZ(t,0,-1))}var Dee=Pee,Ree=_q(function(e,t,r){Cee(e,t,r)}),nv=Ree;function Nee(e,t){return t=A_(t,e),e=Dee(e,t),e==null||delete e[GD(Oee(t))]}var Iee=Nee;function Bee(e){return WD(e)?void 0:e}var zee=Bee,Fee=1,Uee=2,kee=4,Hee=XK(function(e,t){var r={};if(e==null)return r;var i=!1;t=TD(t,function(s){return s=A_(s,e),i||(i=s.length>1),s}),vc(e,ZD(e),r),i&&(r=hee(r,Fee|Uee|kee,zee));for(var n=t.length;n--;)Iee(r,t[n]);return r}),dw=Hee,Mp;(function(e){e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(Mp||(Mp={}));var Ep;(function(e){e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:5e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-5e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(Ep||(Ep={}));var sv;(function(e){e.x="x",e.y="y",e.z="z"})(sv||(sv={}));var o2;(function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left",e.Center="center"})(o2||(o2={}));var Xd;(function(e){function t(n,s){return n[0]===s[0]&&n[1]===s[1]&&n[2]===s[2]}e.isEqual=t;function r(n,s){return[n[0]+s[0],n[1]+s[1],n[2]+s[2]]}e.add=r;function i(n,s){return[n[0]-s[0],n[1]-s[1],n[2]-s[2]]}e.sub=i})(Xd||(Xd={}));var Kh;(function(e){e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(s,a){for(let o=0;o<16;o++)if(s[o]!==a[o])return!1;return!0}e.isEqual=t;function r(s){return s!=null?s:e.identity}e.simplify=r;function i(s,a){let o=a.slice(0);for(var l=0,h=a.length;l<h;l+=3){let d=1/(s[3]*a[l]+s[7]*a[l+1]+s[11]*a[l+2]+s[15]);o[l]=(s[0]*a[l]+s[4]*a[l+1]+s[8]*a[l+2]+s[12])*d,o[l+1]=(s[1]*a[l]+s[5]*a[l+1]+s[9]*a[l+2]+s[13])*d,o[l+2]=(s[2]*a[l]+s[6]*a[l+1]+s[10]*a[l+2]+s[14])*d}return o}e.applyMatrix4=i;function n(s,a){let o=a.slice(0);for(var l=0,h=a.length;l<h;l+=3)o[l]=s[0]*a[l]+s[4]*a[l+1]+s[8]*a[l+2],o[l+1]=s[1]*a[l]+s[5]*a[l+1]+s[9]*a[l+2],o[l+2]=s[2]*a[l]+s[6]*a[l+1]+s[10]*a[l+2];return o}e.applyMatrix3Components=n})(Kh||(Kh={}));var Bn;(function(e){e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function t(s){return{r:Math.round(s.r*255),g:Math.round(s.g*255),b:Math.round(s.b*255),a:1}}e.toRgb255a1=t;function r(s){return{r:s.r,g:s.g,b:s.b}}e.clone=r;function i(s){return s=Math.floor(s),{r:(s>>16&255)/255,g:(s>>8&255)/255,b:(s&255)/255}}e.fromHex=i;function n(s,a){return s.r===a.r&&s.g===a.g&&s.b===a.b}e.equals=n})(Bn||(Bn={}));var jl;(function(e){e.white=tt(Le({},Bn.white),{a:1});function t(s){return{r:s[0],g:s[1],b:s[2],a:s[3]}}e.from0to1=t;function r(s,a){return tt(Le({},Bn.fromHex(s)),{a})}e.fromHexAndA=r;function i(s){return{r:Math.round(s.r*255),g:Math.round(s.g*255),b:Math.round(s.b*255),a:s.a}}e.toRgb255a1=i;function n(s,a){return Bn.equals(s,a)&&s.a===a.a}e.equals=n})(jl||(jl={}));var pw;(function(e){e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}})(pw||(pw={}));var l2;(function(e){e[e.SKIP=0]="SKIP",e[e.ADD=1]="ADD",e[e.ALPHA=2]="ALPHA",e[e.AVERAGE=3]="AVERAGE",e[e.COLOR_BURN=4]="COLOR_BURN",e[e.COLOR_DODGE=5]="COLOR_DODGE",e[e.DARKEN=6]="DARKEN",e[e.DIFFERENCE=7]="DIFFERENCE",e[e.EXCLUSION=8]="EXCLUSION",e[e.LIGHTEN=9]="LIGHTEN",e[e.MULTIPLY=10]="MULTIPLY",e[e.DIVIDE=11]="DIVIDE",e[e.NEGATION=12]="NEGATION",e[e.NORMAL=13]="NORMAL",e[e.OVERLAY=14]="OVERLAY",e[e.REFLECT=15]="REFLECT",e[e.SCREEN=16]="SCREEN",e[e.SOFT_LIGHT=17]="SOFT_LIGHT",e[e.SUBTRACT=18]="SUBTRACT"})(l2||(l2={}));var av;(function(e){e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING"})(av||(av={}));var u2;(function(e){e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}})(u2||(u2={}));var h2;(function(e){e.defaultData={control1:[.5,.05],control2:[.1,.3]}})(h2||(h2={}));var fw;(function(e){function t(r,i=.1){return{type:"radial",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:sv.y,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[0,0,0],rotation:[0,0,0],position:[r[0]+r[0]*i,0,0]},grid:{count:[2,2,2],size:r.map(n=>n*(1+i)),useCenter:!0}}}e.defaultData=t})(fw||(fw={}));var $l;(function(e){e[e.Update=0]="Update"})($l||($l={}));var ca;(function(e){e[e.Add=1]="Add",e[e.Delete=2]="Delete",e[e.Unlink=3]="Unlink"})(ca||(ca={}));var Rs;(function(e){e[e.Add=4]="Add",e[e.Delete=5]="Delete",e[e.Move=6]="Move"})(Rs||(Rs={}));var os;(function(e){e[e.Add=7]="Add",e[e.Delete=8]="Delete",e[e.Move=9]="Move"})(os||(os={}));var Wl=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i=tt(Le({},r),{[e]:t});return Object.setPrototypeOf(i,Wl.prototype),i}}add(e,t){var r;let i=this.runOp({type:ca.Add,id:e,data:t});return(r=i==null?void 0:i.data)!=null?r:this}runOp(e){let t=this;if(e.type===ca.Add){let r=t[e.id],i;r===void 0?i={type:ca.Delete,id:e.id}:i={type:ca.Add,id:e.id,data:r};let{id:n,data:s}=e,a=tt(Le({},t),{[n]:s});return Object.setPrototypeOf(a,Wl.prototype),{data:a,actual:e,reverse:i}}else if(e.type===ca.Delete){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n=Le({},t);return Object.setPrototypeOf(n,Wl.prototype),delete n[r],{data:n,actual:e,reverse:{type:ca.Add,id:r,data:i}}}}throw new Error("illegal arg")}};function O_(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&O_(i)}return Object.freeze(e)}function Gee(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var Vee=class extends Error{};function ko(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let i=[],n=1/(r+1);for(let s=0;s<r;s++){let a=e+(t-e)*(s+.75+Math.random()*.5)*n;i.push(a)}return i}function jee(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function Wee(){return typeof process!="undefined"}function aR(e,t){for(let r of e)t(r.id,r.data),aR(r.children,t)}function oR(e,t){t(e.id,e.data);for(let r of e.children)oR(r,t)}var Zh=class extends Array{constructor(...e){super(...e);Object.setPrototypeOf(this,Zh.prototype)}deepFreeze(){let e=0;for(;e<this.length;)O_(this[e]),e++}fillCaches0(e,t){var r;if((r=this.objCaches)!=null&&r.has(e.id))throw new Error("duplicated item");this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&oR(r,t)}}traverse(e){aR(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(a=>a.id===e);if(n<0)throw new Error("not expected");let s=i[n];return i=[...i],i[n]=tt(Le({},s),{data:t}),this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let s=i,a=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let o=i.findIndex(l=>l.id===a);if(o<0)throw new Error;i=[...i],i[o]=tt(Le({},i[o]),{children:s})}Object.setPrototypeOf(i,Zh.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case os.Add:return this.addOp(e);case os.Delete:return this.deleteOp(e);case os.Move:return this.moveOp(e)}}addOp(e){let{parent:t,fi:r,id:i,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.get(i)!==void 0)return null;{let a=t,o=this.childrenArray(a),l={fi:r,id:i,data:n,children:s};return o=[...o,l],o.sort((h,d)=>h.fi-d.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(a,o),actual:e,reverse:{type:os.Delete,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(a=>a.id===t);e.localIndex=n,i=[...i];let s=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:tt(Le({type:os.Add},s),{parent:r})}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:os.Delete,id:i});if(t!==null){let p=t;for(;p!==null;){if(p===void 0)throw new Error;if(p===i)throw new Vee("cyclic tree");p=this.parent(p)}}let n=this.parent(i);if(n===void 0)return null;let s=n,a=this.childrenArray(n),o=a.findIndex(p=>p.id===i);a=[...a];let l=a.splice(o,1)[0],h=this.modifyArrayBy(n,a);n=t,a=h.childrenArray(n);let d=l.fi;return l=tt(Le({},l),{fi:r}),a=[...a,l],a.sort((p,f)=>p.fi-f.fi),e.localIndex=a.indexOf(l),h=h.modifyArrayBy(n,a),{data:h,actual:e,reverse:{type:os.Move,parent:s,fi:d,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(Le(Le({},r),i))}t.sort((r,i)=>Gee(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return tt(Le({},n),{sortKey:r})}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return ko(0,r,r);{let n=i[0].fi;return ko(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=i.find(a=>a.fi>n.fi);if(s===void 0){let a=i[i.length-1].fi;return ko(a,a+r,r)}else return ko(n.fi,s.fi,r)}}},mw;(function(e){function t(r,i){if(Array.isArray(r)){let n=i.props,s={},a=[...r],o=!1;if(n)for(let l of Object.keys(n)){let h=parseInt(l);if(isNaN(h))throw new Error("wrong index");s[l]=a[h],a[h]=n[l],o=!0}return o?{data:a,actual:i,reverse:{type:$l.Update,props:s}}:null}else{let n=i.props,s={},a=Le({},r),o=!1;if(n)for(let l of Object.keys(n))s[l]=a[l],a[l]=n[l],o=!0;return o?{data:a,actual:i,reverse:{type:$l.Update,props:s}}:null}}e.runOp=t})(mw||(mw={}));var _n=class extends Array{constructor(...e){super(...e);Object.setPrototypeOf(this,_n.prototype)}deepFreeze(){let e=0;for(;e<this.length;)O_(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(s=>s.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]=tt(Le({},n),{data:t}),this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,_n.prototype);let t=e;return Wee()||t.fillCaches(),t}runOp(e){switch(e.type){case Rs.Add:return this.addOp(e);case Rs.Delete:return this.deleteOp(e);case Rs.Move:return this.moveOp(e)}}addOp(e){let{fi:t,id:r,data:i}=e,n=this,s={fi:t,id:r,data:i};return n=[...n,s],n.sort((a,o)=>a.fi-o.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:Rs.Delete,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(s=>s.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:Le({type:Rs.Add},n)}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(o=>o.id===r);if(n===-1)return null;let s=i[n].fi,a=tt(Le({},i[n]),{fi:t});return i[n]=a,i.sort((o,l)=>o.fi-l.fi),e.localIndex=i.indexOf(a),{data:this.modifyArrayBy(i),actual:e,reverse:{type:Rs.Move,fi:s,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return ko(0,t,t);{let i=r[0].fi;return ko(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(s=>s.fi>i.fi);if(n===void 0){let s=r[r.length-1].fi;return ko(s,s+t,t)}else return ko(i.fi,n.fi,t)}}},lR=Symbol(),t0=Symbol(),r0=class{reportOp(e,t){let r=this;if(t===null)return;r._current=t.data;let i=[];for(;!(r instanceof hR);){let n=r._path,s=r._current;if(n!==""&&i.splice(0,0,n),r=r._parent,r===null)return;r.update(n,s)}r.push(i,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[t0];r&&r(),delete this._children[e]}}}},Jee=class extends r0{constructor(e,t,r){super();this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current=tt(Le({},this._current),{[e]:t})}runOp(e){this.reportOp(e,mw.runOp(this._current,e))}},Yee=class extends r0{constructor(e,t,r){super();this._parent=e,this._path=t,this._current=r}update(e,t){this._current=tt(Le({},this._current),{[e]:t}),Object.setPrototypeOf(this._current,Wl.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},uR={get(e,t){if(t===t0)return()=>{e._parent=null};if(t===lR)return e._current;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let s=r[t],a=i0(e,t,s);return a!==s?(i===void 0&&(i={},e._children=i),i[t]=a,a):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},Xee=tt(Le({},uR),{set(e,t,r){var i;let n;if(r===void 0)throw new Error("set to undefined is not supported!");return n={type:$l.Update,props:{[t]:(i=Kee(r))!=null?i:r}},e.deleteChildren(t),e.runOp(n),!0},deleteProperty(e,t){throw new Error("set to undefined is not supported!")}}),qee=tt(Le({},uR),{set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:ca.Add,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:ca.Delete,id:t}),!0}}),P_=class extends r0{constructor(e,t,r){super();this._children={},this._parent=e,this._path=t,this._current=r,this[t0]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}data(e){var t;let{_current:r,_children:i}=this,n=i===void 0?void 0:i[e];if(n!==void 0)return n;let s=(t=r.get(e))==null?void 0:t.data,a=i0(this,e,s);return a!==s?(i===void 0&&(i={},this._children=i),i[e]=a,a):s}add(e,t,r,i,n){this.runOp({type:os.Add,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:os.Move,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:os.Delete,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},D_=class extends r0{constructor(e,t,r){super();this._children={},this._parent=e,this._path=t,this._current=r,this[t0]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;e(this.data(this._current[r].id),i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return tt(Le({},this._current.get(e)),{data:this.data(e)})}data(e){var t;let{_current:r,_children:i}=this,n=i===void 0?void 0:i[e];if(n!==void 0)return n;let s=(t=r.get(e))==null?void 0:t.data,a=i0(this,e,s);return a!==s?(i===void 0&&(i={},this._children=i),i[e]=a,a):s}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:Rs.Add,fi:e,id:t,data:r})}move(e,t){this.runOp({type:Rs.Move,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:Rs.Delete,id:e})}};function Dx(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===$l.Update&&t.type===$l.Update&&gw.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push(tt(Le({},t),{path:r}))}var hR=class{constructor(e){this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){Dx(this.ts,t,e),Dx(this.actual,r,e),Dx(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function i0(e,t,r){return r instanceof Zh?new P_(e,t,r):r instanceof _n?new D_(e,t,r):r instanceof Wl?new Proxy(new Yee(e,t,r),qee):r!==null&&typeof r=="object"?jee(r)?r:new Proxy(new Jee(e,t,r),Xee):r}function Qee(e){let t=new hR(e);return[i0(t,"",e),t]}function c2(e,t){let[r,i]=Qee(e);return t(r),i.result()}function Kee(e){return e instanceof P_||e instanceof D_?e._current:e!==null&&typeof e=="object"?e[lR]:e}var gw;(function(e){function t(n,s){if(s.length===n.length)for(var a=0;a<n.length;){if(n[a]!==s[a])return!1;a+=1}else return!1;return!0}e.equal=t;function r(n,s,a){let o=i(a,n);if(o!==void 0&&typeof o=="object"&&o!==null){let l=Le({},s);return Object.keys(o).forEach(h=>{delete l[h]}),l}else return s}e.removeOverridden=r;function i(n,s,a=0){if(s.length<=a)return n;if((n instanceof Zh||n instanceof P_)&&typeof s[a]=="string"||(n instanceof _n||n instanceof D_)&&typeof s[a]=="string")return i(n.data(s[a]),s,a+1);if(typeof s[a]=="number"&&Array.isArray(n)||typeof s[a]=="string"&&typeof n=="object")return i(n[s[a]],s,a+1)}e.zoom=i})(gw||(gw={}));var cR=class{},d2=class extends cR{constructor(e){super();this.id=e}},p2=class extends cR{constructor(e){super();this.data=e}},vw;try{vw=new TextDecoder}catch{}var Ge,$o,ce=0,dR=[],yw=dR,xw=0,gn={},Qt,Ho,ns=0,da=0,In,io,an=[],rr,f2={useRecords:!1,mapsAsObjects:!0},pR=class{},fR=new pR;fR.name="MessagePack 0xC1";var $h=!1,ov=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Ge)return wR(()=>(bw(),this?this.unpack(e,t):ov.prototype.unpack.call(f2,e,t)));$o=t>-1?t:e.length,ce=0,xw=0,da=0,Ho=null,yw=dR,In=null,Ge=e;try{rr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw Ge=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof ov){if(gn=this,this.structures)return Qt=this.structures,Hm();(!Qt||Qt.length>0)&&(Qt=[])}else gn=f2,(!Qt||Qt.length>0)&&(Qt=[]);return Hm()}unpackMultiple(e,t){let r,i=0;try{$h=!0;let n=e.length,s=this?this.unpack(e,n):s0.unpack(e,n);if(t){for(t(s);ce<n;)if(i=ce,t(Hm())===!1)return}else{for(r=[s];ce<n;)i=ce,r.push(Hm());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{$h=!1,bw()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Hm(){try{if(!gn.trusted&&!$h){let t=Qt.sharedLength||0;t<Qt.length&&(Qt.length=t)}let e=zr();if(ce==$o)Qt.restoreStructures&&m2(),Qt=null,Ge=null,io&&(io=null);else if(ce>$o){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!$h)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Qt.restoreStructures&&m2(),bw(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function m2(){for(let e in Qt.restoreStructures)Qt[e]=Qt.restoreStructures[e];Qt.restoreStructures=null}function zr(){let e=Ge[ce++];if(e<160)if(e<128){if(e<64)return e;{let t=Qt[e&63]||gn.getStructures&&mR()[e&63];return t?(t.read||(t.read=R_(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,gn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[vR()]=zr();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(zr(),zr());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=zr();return t}else if(e<192){let t=e-160;if(da>=ce)return Ho.slice(ce-ns,(ce+=t)-ns);if(da==0&&$o<140){let r=t<16?N_(t):gR(t);if(r!=null)return r}return ww(t)}else{let t;switch(e){case 192:return null;case 193:return In?(t=zr(),t>0?In[1].slice(In.position1,In.position1+=t):In[0].slice(In.position0,In.position0-=t)):fR;case 194:return!1;case 195:return!0;case 196:return Rx(Ge[ce++]);case 197:return t=rr.getUint16(ce),ce+=2,Rx(t);case 198:return t=rr.getUint32(ce),ce+=4,Rx(t);case 199:return Ll(Ge[ce++]);case 200:return t=rr.getUint16(ce),ce+=2,Ll(t);case 201:return t=rr.getUint32(ce),ce+=4,Ll(t);case 202:if(t=rr.getFloat32(ce),gn.useFloat32>2){let r=I_[(Ge[ce]&127)<<1|Ge[ce+1]>>7];return ce+=4,(r*t+(t>0?.5:-.5)>>0)/r}return ce+=4,t;case 203:return t=rr.getFloat64(ce),ce+=8,t;case 204:return Ge[ce++];case 205:return t=rr.getUint16(ce),ce+=2,t;case 206:return t=rr.getUint32(ce),ce+=4,t;case 207:return gn.int64AsNumber?(t=rr.getUint32(ce)*4294967296,t+=rr.getUint32(ce+4)):t=rr.getBigUint64(ce),ce+=8,t;case 208:return rr.getInt8(ce++);case 209:return t=rr.getInt16(ce),ce+=2,t;case 210:return t=rr.getInt32(ce),ce+=4,t;case 211:return gn.int64AsNumber?(t=rr.getInt32(ce)*4294967296,t+=rr.getUint32(ce+4)):t=rr.getBigInt64(ce),ce+=8,t;case 212:if(t=Ge[ce++],t==114)return w2(Ge[ce++]&63);{let r=an[t];if(r)return r.read?(ce++,r.read(zr())):r.noBuffer?(ce++,r()):r(Ge.subarray(ce,++ce));throw new Error("Unknown extension "+t)}case 213:return t=Ge[ce],t==114?(ce++,w2(Ge[ce++]&63,Ge[ce++])):Ll(2);case 214:return Ll(4);case 215:return Ll(8);case 216:return Ll(16);case 217:return t=Ge[ce++],da>=ce?Ho.slice(ce-ns,(ce+=t)-ns):$ee(t);case 218:return t=rr.getUint16(ce),ce+=2,da>=ce?Ho.slice(ce-ns,(ce+=t)-ns):ete(t);case 219:return t=rr.getUint32(ce),ce+=4,da>=ce?Ho.slice(ce-ns,(ce+=t)-ns):tte(t);case 220:return t=rr.getUint16(ce),ce+=2,v2(t);case 221:return t=rr.getUint32(ce),ce+=4,v2(t);case 222:return t=rr.getUint16(ce),ce+=2,y2(t);case 223:return t=rr.getUint32(ce),ce+=4,y2(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var Zee=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function R_(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>Zee.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(zr);return e.highByte===0&&(e.read=g2(t,e.read)),n()}let i={};for(let n=0,s=e.length;n<s;n++){let a=e[n];i[a]=zr()}return i}return r.count=0,e.highByte===0?g2(t,r):r}var g2=(e,t)=>function(){let r=Ge[ce++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=Qt[i]||mR()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=R_(n,e)),n.read()};function mR(){let e=wR(()=>(Ge=null,gn.getStructures()));return Qt=gn._mergeStructures(e,Qt)}var ww=n0,$ee=n0,ete=n0,tte=n0;function n0(e){let t;if(e<16&&(t=N_(e)))return t;if(e>64&&vw)return vw.decode(Ge.subarray(ce,ce+=e));let r=ce+e,i=[];for(t="";ce<r;){let n=Ge[ce++];if((n&128)==0)i.push(n);else if((n&224)==192){let s=Ge[ce++]&63;i.push((n&31)<<6|s)}else if((n&240)==224){let s=Ge[ce++]&63,a=Ge[ce++]&63;i.push((n&31)<<12|s<<6|a)}else if((n&248)==240){let s=Ge[ce++]&63,a=Ge[ce++]&63,o=Ge[ce++]&63,l=(n&7)<<18|s<<12|a<<6|o;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=gi.apply(String,i),i.length=0)}return i.length>0&&(t+=gi.apply(String,i)),t}function v2(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=zr();return t}function y2(e){if(gn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[vR()]=zr();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(zr(),zr());return t}}var gi=String.fromCharCode;function gR(e){let t=ce,r=new Array(e);for(let i=0;i<e;i++){let n=Ge[ce++];if((n&128)>0){ce=t;return}r[i]=n}return gi.apply(String,r)}function N_(e){if(e<4)if(e<2){if(e===0)return"";{let t=Ge[ce++];if((t&128)>1){ce-=1;return}return gi(t)}}else{let t=Ge[ce++],r=Ge[ce++];if((t&128)>0||(r&128)>0){ce-=2;return}if(e<3)return gi(t,r);let i=Ge[ce++];if((i&128)>0){ce-=3;return}return gi(t,r,i)}else{let t=Ge[ce++],r=Ge[ce++],i=Ge[ce++],n=Ge[ce++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){ce-=4;return}if(e<6){if(e===4)return gi(t,r,i,n);{let s=Ge[ce++];if((s&128)>0){ce-=5;return}return gi(t,r,i,n,s)}}else if(e<8){let s=Ge[ce++],a=Ge[ce++];if((s&128)>0||(a&128)>0){ce-=6;return}if(e<7)return gi(t,r,i,n,s,a);let o=Ge[ce++];if((o&128)>0){ce-=7;return}return gi(t,r,i,n,s,a,o)}else{let s=Ge[ce++],a=Ge[ce++],o=Ge[ce++],l=Ge[ce++];if((s&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){ce-=8;return}if(e<10){if(e===8)return gi(t,r,i,n,s,a,o,l);{let h=Ge[ce++];if((h&128)>0){ce-=9;return}return gi(t,r,i,n,s,a,o,l,h)}}else if(e<12){let h=Ge[ce++],d=Ge[ce++];if((h&128)>0||(d&128)>0){ce-=10;return}if(e<11)return gi(t,r,i,n,s,a,o,l,h,d);let p=Ge[ce++];if((p&128)>0){ce-=11;return}return gi(t,r,i,n,s,a,o,l,h,d,p)}else{let h=Ge[ce++],d=Ge[ce++],p=Ge[ce++],f=Ge[ce++];if((h&128)>0||(d&128)>0||(p&128)>0||(f&128)>0){ce-=12;return}if(e<14){if(e===12)return gi(t,r,i,n,s,a,o,l,h,d,p,f);{let m=Ge[ce++];if((m&128)>0){ce-=13;return}return gi(t,r,i,n,s,a,o,l,h,d,p,f,m)}}else{let m=Ge[ce++],y=Ge[ce++];if((m&128)>0||(y&128)>0){ce-=14;return}if(e<15)return gi(t,r,i,n,s,a,o,l,h,d,p,f,m,y);let b=Ge[ce++];if((b&128)>0){ce-=15;return}return gi(t,r,i,n,s,a,o,l,h,d,p,f,m,y,b)}}}}}function Rx(e){return gn.copyBuffers?Uint8Array.prototype.slice.call(Ge,ce,ce+=e):Ge.subarray(ce,ce+=e)}function Ll(e){let t=Ge[ce++];if(an[t])return an[t](Ge.subarray(ce,ce+=e));throw new Error("Unknown extension type "+t)}var x2=new Array(4096);function vR(){let e=Ge[ce++];if(e>=160&&e<192){if(e=e-160,da>=ce)return Ho.slice(ce-ns,(ce+=e)-ns);if(!(da==0&&$o<180))return ww(e)}else return ce--,zr();let t=(e<<5^(e>1?rr.getUint16(ce):e>0?Ge[ce]:0))&4095,r=x2[t],i=ce,n=ce+e-3,s,a=0;if(r&&r.bytes==e){for(;i<n;){if(s=rr.getUint32(i),s!=r[a++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(s=Ge[i++],s!=r[a++]){i=1879048192;break}if(i===n)return ce=i,r.string;n-=3,i=ce}for(r=[],x2[t]=r,r.bytes=e;i<n;)s=rr.getUint32(i),r.push(s),i+=4;for(n+=3;i<n;)s=Ge[i++],r.push(s);let o=e<16?N_(e):gR(e);return o!=null?r.string=o:r.string=ww(e)}var w2=(e,t)=>{var r=zr();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=Qt[e];return n&&n.isShared&&((Qt.restoreStructures||(Qt.restoreStructures=[]))[e]=n),Qt[e]=r,r.read=R_(r,i),r.read()},yR=typeof self=="object"?self:global;an[0]=()=>{};an[0].noBuffer=!0;an[101]=()=>{let e=zr();return(yR[e[0]]||Error)(e[1])};an[105]=e=>{let t=rr.getUint32(ce-4);io||(io=new Map);let r=Ge[ce],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};io.set(t,n);let s=zr();return n.used?Object.assign(i,s):(n.target=s,s)};an[112]=e=>{let t=rr.getUint32(ce-4),r=io.get(t);return r.used=!0,r.target};an[115]=()=>new Set(zr());var xR=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");an[116]=e=>{let t=e[0],r=xR[t];if(!r)throw new Error("Could not find typed array for code "+t);return new yR[r](Uint8Array.prototype.slice.call(e,1).buffer)};an[120]=()=>{let e=zr();return new RegExp(e[0],e[1])};an[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=ce;ce+=t-4,In=[zr(),zr()],In.position0=0,In.position1=0;let i=ce;ce=r;try{return zr()}finally{ce=i}};an[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function wR(e){let t=$o,r=ce,i=xw,n=ns,s=da,a=Ho,o=yw,l=io,h=In,d=new Uint8Array(Ge.slice(0,$o)),p=Qt,f=Qt.slice(0,Qt.length),m=gn,y=$h,b=e();return $o=t,ce=r,xw=i,ns=n,da=s,Ho=a,yw=o,io=l,In=h,Ge=d,$h=y,Qt=p,Qt.splice(0,Qt.length,...f),gn=m,rr=new DataView(Ge.buffer,Ge.byteOffset,Ge.byteLength),b}function bw(){Ge=null,io=null,Qt=null}function rte(e){e.unpack?an[e.type]=e.unpack:an[e.type]=e}var I_=new Array(147);for(let e=0;e<256;e++)I_[e]=+("1e"+Math.floor(45.15-e*.30103));var s0=new ov({useRecords:!1});s0.unpack;s0.unpackMultiple;s0.unpack;var ite=new Float32Array(1);new Uint8Array(ite.buffer,0,4);var vg;try{vg=new TextEncoder}catch{}var lv,B_,a0=typeof Buffer!="undefined",Nx=a0?Buffer.allocUnsafeSlow:Uint8Array,bR=a0?Buffer:Uint8Array,b2=a0?4294967296:2144337920,Se,Jr,ve=0,ea,ta=null,nte=/[\u0080-\uFFFF]/,hd=Symbol("record-id"),_R=class extends ov{constructor(e){super(e);this.offset=0;let t,r,i,n,s,a=0,o=bR.prototype.utf8Write?function(A,M,O){return Se.utf8Write(A,M,O)}:vg&&vg.encodeInto?function(A,M){return vg.encodeInto(A,Se.subarray(M)).written}:!1,l=this;e||(e={});let h=e&&e.sequential,d=e.structures||e.saveStructures,p=e.maxSharedStructures;if(p==null&&(p=d?32:0),p>8160)throw new Error("Maximum maxSharedStructure is 8160");let f=e.maxOwnStructures;f==null&&(f=d?32:64),h&&!e.saveStructures&&(this.structures=[]);let m=p>32||f+p>64,y=p+64,b=p+f+64;if(b>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let x=[],v=0,g=0;this.pack=this.encode=function(A,M){if(Se||(Se=new Nx(8192),Jr=new DataView(Se.buffer,0,8192),ve=0),ea=Se.length-10,ea-ve<2048?(Se=new Nx(Se.length),Jr=new DataView(Se.buffer,0,Se.length),ea=Se.length-10,ve=0):ve=ve+7&2147483640,t=ve,s=l.structuredClone?new Map:null,l.bundleStrings?(ta=["",""],Se[ve++]=214,Se[ve++]=98,ta.position=ve-t,ve+=4):ta=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let O=r.sharedLength||0;if(O>p)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let P=0;P<O;P++){let C=r[P];if(!C)continue;let N,U=r.transitions;for(let V=0,k=C.length;V<k;V++){let G=C[V];N=U[G],N||(N=U[G]=Object.create(null)),U=N}U[hd]=P+64}a=O}h||(r.nextId=O+64)}i&&(i=!1),n=r||[];try{if(_(A),ta){Jr.setUint32(ta.position+t,ve-ta.position-t);let O=ta;ta=null,_(O[0]),_(O[1])}if(l.offset=ve,s&&s.idsToInsert){ve+=s.idsToInsert.length*6,ve>ea&&T(ve),l.offset=ve;let O=ate(Se.subarray(t,ve),s.idsToInsert);return s=null,O}return M&ote?(Se.start=t,Se.end=ve,Se):Se.subarray(t,ve)}finally{if(r){if(g<10&&g++,v>1e4)r.transitions=null,g=0,v=0,x.length>0&&(x=[]);else if(x.length>0&&!h){for(let O=0,P=x.length;O<P;O++)x[O][hd]=0;x=[]}if(i&&l.saveStructures){let O=r.sharedLength||p;r.length>O&&(r=r.slice(0,O));let P=Se.subarray(t,ve);return l.saveStructures(r,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(A)):(a=O,P)}}M&lte&&(ve=t)}};let _=A=>{ve>ea&&(Se=T(ve));var M=typeof A,O;if(M==="string"){let P=A.length;if(ta&&P>=8&&P<4096){let U=nte.test(A);ta[U?0:1]+=A,Se[ve++]=193,_(U?-P:P);return}let C;P<32?C=1:P<256?C=2:P<65536?C=3:C=5;let N=P*3;if(ve+N>ea&&(Se=T(ve+N)),P<64||!o){let U,V,k,G=ve+C;for(U=0;U<P;U++)V=A.charCodeAt(U),V<128?Se[G++]=V:V<2048?(Se[G++]=V>>6|192,Se[G++]=V&63|128):(V&64512)==55296&&((k=A.charCodeAt(U+1))&64512)==56320?(V=65536+((V&1023)<<10)+(k&1023),U++,Se[G++]=V>>18|240,Se[G++]=V>>12&63|128,Se[G++]=V>>6&63|128,Se[G++]=V&63|128):(Se[G++]=V>>12|224,Se[G++]=V>>6&63|128,Se[G++]=V&63|128);O=G-ve-C}else O=o(A,ve+C,N);O<32?Se[ve++]=160|O:O<256?(C<2&&Se.copyWithin(ve+2,ve+1,ve+1+O),Se[ve++]=217,Se[ve++]=O):O<65536?(C<3&&Se.copyWithin(ve+3,ve+2,ve+2+O),Se[ve++]=218,Se[ve++]=O>>8,Se[ve++]=O&255):(C<5&&Se.copyWithin(ve+5,ve+3,ve+3+O),Se[ve++]=219,Jr.setUint32(ve,O),ve+=4),ve+=O}else if(M==="number")if(A>>>0===A)A<64?Se[ve++]=A:A<256?(Se[ve++]=204,Se[ve++]=A):A<65536?(Se[ve++]=205,Se[ve++]=A>>8,Se[ve++]=A&255):(Se[ve++]=206,Jr.setUint32(ve,A),ve+=4);else if(A>>0===A)A>=-32?Se[ve++]=256+A:A>=-128?(Se[ve++]=208,Se[ve++]=A+256):A>=-32768?(Se[ve++]=209,Jr.setInt16(ve,A),ve+=2):(Se[ve++]=210,Jr.setInt32(ve,A),ve+=4);else{let P;if((P=this.useFloat32)>0&&A<4294967296&&A>=-2147483648){Se[ve++]=202,Jr.setFloat32(ve,A);let C;if(P<4||(C=A*I_[(Se[ve]&127)<<1|Se[ve+1]>>7])>>0===C){ve+=4;return}else ve--}Se[ve++]=203,Jr.setFloat64(ve,A),ve+=8}else if(M==="object")if(!A)Se[ve++]=192;else{if(s){let C=s.get(A);if(C){if(!C.id){let N=s.idsToInsert||(s.idsToInsert=[]);C.id=N.push(C)}Se[ve++]=214,Se[ve++]=112,Jr.setUint32(ve,C.id),ve+=4;return}else s.set(A,{offset:ve-t})}let P=A.constructor;if(P===Object)S(A,!0);else if(P===Array){O=A.length,O<16?Se[ve++]=144|O:O<65536?(Se[ve++]=220,Se[ve++]=O>>8,Se[ve++]=O&255):(Se[ve++]=221,Jr.setUint32(ve,O),ve+=4);for(let C=0;C<O;C++)_(A[C])}else if(P===Map){O=A.size,O<16?Se[ve++]=128|O:O<65536?(Se[ve++]=222,Se[ve++]=O>>8,Se[ve++]=O&255):(Se[ve++]=223,Jr.setUint32(ve,O),ve+=4);for(let[C,N]of A)_(C),_(N)}else{for(let C=0,N=lv.length;C<N;C++){let U=B_[C];if(A instanceof U){let V=lv[C];if(V.write){V.type&&(Se[ve++]=212,Se[ve++]=V.type,Se[ve++]=0),_(V.write.call(this,A));return}let k=Se,G=Jr,Z=ve;Se=null;let W;try{W=V.pack.call(this,A,$=>(Se=k,k=null,ve+=$,ve>ea&&T(ve),{target:Se,targetView:Jr,position:ve-$}),_)}finally{k&&(Se=k,Jr=G,ve=Z,ea=Se.length-10)}W&&(W.length+ve>ea&&T(W.length+ve),ve=ste(W,Se,ve,V.type));return}}S(A,!A.hasOwnProperty)}}else if(M==="boolean")Se[ve++]=A?195:194;else if(M==="bigint"){if(A<BigInt(1)<<BigInt(63)&&A>=-(BigInt(1)<<BigInt(63)))Se[ve++]=211,Jr.setBigInt64(ve,A);else if(A<BigInt(1)<<BigInt(64)&&A>0)Se[ve++]=207,Jr.setBigUint64(ve,A);else if(this.largeBigIntToFloat)Se[ve++]=203,Jr.setFloat64(ve,Number(A));else throw new RangeError(A+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ve+=8}else if(M==="undefined")this.encodeUndefinedAsNil?Se[ve++]=192:(Se[ve++]=212,Se[ve++]=0,Se[ve++]=0);else if(M==="function")_(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+M)},S=this.useRecords===!1?this.variableMapSize?A=>{let M=Object.keys(A),O=M.length;O<16?Se[ve++]=128|O:O<65536?(Se[ve++]=222,Se[ve++]=O>>8,Se[ve++]=O&255):(Se[ve++]=223,Jr.setUint32(ve,O),ve+=4);let P;for(let C=0;C<O;C++)_(P=M[C]),_(A[P])}:(A,M)=>{Se[ve++]=222;let O=ve-t;ve+=2;let P=0;for(let C in A)(M||A.hasOwnProperty(C))&&(_(C),_(A[C]),P++);Se[O+++t]=P>>8,Se[O+t]=P&255}:A=>{let M=Object.keys(A),O,P=n.transitions||(n.transitions=Object.create(null)),C=0;for(let U=0,V=M.length;U<V;U++){let k=M[U];O=P[k],O||(O=P[k]=Object.create(null),C++),P=O}let N=P[hd];if(N)N>=96&&m?(Se[ve++]=((N-=96)&31)+96,Se[ve++]=N>>5):Se[ve++]=N;else{N=n.nextId,N||(N=64),N<y&&this.shouldShareStructure&&!this.shouldShareStructure(M)?(N=n.nextOwnId,N<b||(N=y),n.nextOwnId=N+1):(N>=b&&(N=y),n.nextId=N+1);let U=M.highByte=N>=96&&m?N-96>>5:-1;P[hd]=N,n[N-64]=M,N<y?(M.isShared=!0,n.sharedLength=N-63,i=!0,U>=0?(Se[ve++]=(N&31)+96,Se[ve++]=U):Se[ve++]=N):(U>=0?(Se[ve++]=213,Se[ve++]=114,Se[ve++]=(N&31)+96,Se[ve++]=U):(Se[ve++]=212,Se[ve++]=114,Se[ve++]=N),C&&(v+=g*C),x.length>=f&&(x.shift()[hd]=0),x.push(P),_(M))}for(let U=0,V=M.length;U<V;U++)_(A[M[U]])},T=A=>{let M;if(A>16777216){if(A-t>b2)throw new Error("Packed buffer would be larger than maximum buffer size");M=Math.min(b2,Math.round(Math.max((A-t)*(A>67108864?1.25:2),4194304)/4096)*4096)}else M=(Math.max(A-t<<2,Se.length-1)>>12)+1<<12;let O=new Nx(M);return Jr=new DataView(O.buffer,0,M),Se.copy?Se.copy(O,0,t,A):O.set(Se.slice(t,A)),ve-=t,t=0,ea=O.length-10,Se=O}}useBuffer(e){Se=e,Jr=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),ve=0}};B_=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,pR];lv=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:s,position:a}=t(6);n[a++]=214,n[a++]=255,s.setUint32(a,i)}else if(i>0&&i<17179869184){let{target:n,targetView:s,position:a}=t(10);n[a++]=215,n[a++]=255,s.setUint32(a,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(a+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:s,position:a}=t(3);n[a++]=212,n[a++]=255,n[a++]=255}else{let{target:n,targetView:s,position:a}=t(15);n[a++]=199,n[a++]=12,n[a++]=255,s.setUint32(a,e.getMilliseconds()*1e6),s.setBigInt64(a+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?_2(e,16,t):S2(a0?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==bR&&this.structuredClone?_2(e,xR.indexOf(r.name),t):S2(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function _2(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=r(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=r(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=r(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function S2(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:s}=t(r+5);i[n++]=198,s.setUint32(n,r),n+=4}i.set(e,n)}function ste(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function ate(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((s,a)=>s.offset>a.offset?1:-1);r=t.pop();){let s=r.offset,a=r.id;e.copyWithin(s+i,s,n),i-=6;let o=s+i;e[o++]=214,e[o++]=105,e[o++]=a>>24,e[o++]=a>>16&255,e[o++]=a>>8&255,e[o++]=a&255,n=s}return e}function qp(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");B_.unshift(e.Class),lv.unshift(e)}rte(e)}var SR=new _R({useRecords:!1});SR.pack;SR.pack;var ote=512,lte=1024,A2=new _R({structuredClone:!0});qp({Class:Wl.prototype.constructor,type:1,write(e){return Le({},e)},read(e){return Object.setPrototypeOf(e,Wl.prototype),e}});qp({Class:_n.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,_n.prototype),e}});qp({Class:Zh.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Zh.prototype),e}});qp({Class:d2.prototype.constructor,type:4,write(e){return e.id},read(e){return new d2(e)}});qp({Class:p2.prototype.constructor,type:5,write(e){return e.data},read(e){return new p2(e)}});function ute(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}var _w;(function(e){function t(n){return A2.pack(n)}e.serialize=t;function r(n){return A2.unpack(n)}e.deserialize=r;function i(n){return ute(t(n)).toString()}e.checksum=i})(_w||(_w={}));var uv;(function(e){e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(uv||(uv={}));var Sw;(function(e){function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:jl.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:2500,helper:!0};if(i==="SpotLight")return{type:i,color:jl.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:2500,helper:!0};if(i==="DirectionalLight")return{type:i,color:jl.white,intensity:1,shadows:!0,size:2500,depth:2500,helper:!0};throw new Error("not implemented")}})(Sw||(Sw={}));var hv;(function(e){e[e.Front=0]="Front",e[e.Back=1]="Back",e[e.Double=2]="Double"})(hv||(hv={}));var Aw;(function(e){e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(Aw||(Aw={}));var Mw;(function(e){e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(Mw||(Mw={}));var Ew;(function(e){e.defaultData=tt(Le(Le({},Mw.defaultData),Aw.defaultData),{cloner:null})})(Ew||(Ew={}));var rs;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Center=3]="Center",e[e.Justify=4]="Justify"})(rs||(rs={}));var Hl;(function(e){e[e.Top=1]="Top",e[e.Center=2]="Center",e[e.Bottom=3]="Bottom"})(Hl||(Hl={}));var Bh;(function(e){e[e.None=1]="None",e[e.Upper=2]="Upper",e[e.Lower=3]="Lower"})(Bh||(Bh={}));var Tw;(function(e){e.defaultData={width:100,height:100,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.5,letterSpacing:1,text:"",textTransform:1,color:jl.fromHexAndA(6974058,1),alpha:1,font:"roboto_regular"}})(Tw||(Tw={}));var Cw;(function(e){e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay"})(Cw||(Cw={}));var M2;(function(e){e[e.Linear=0]="Linear",e[e.Radial=1]="Radial",e[e.Polar=2]="Polar"})(M2||(M2={}));var E2;(function(e){e[e.RepeatWrapping=1e3]="RepeatWrapping",e[e.ClampToEdgeWrapping=1001]="ClampToEdgeWrapping",e[e.MirroredRepeatWrapping=1002]="MirroredRepeatWrapping"})(E2||(E2={}));var T2;(function(e){e[e.UV=0]="UV",e[e.Planar=1]="Planar",e[e.Spherical=2]="Spherical",e[e.Cylindrical=3]="Cylindrical"})(T2||(T2={}));var C2;(function(e){e[e.Simplex=0]="Simplex",e[e.SimplexFractal=1]="SimplexFractal",e[e.Ashima=2]="Ashima",e[e.Fbm=3]="Fbm",e[e.Perlin=4]="Perlin"})(C2||(C2={}));var vh;(function(e){function t(n,s){return n==="light"&&s?r(s):i(n)}e.defaultData=t;function r(n){switch(n){case"basic":return{type:"light",category:"basic",alpha:1,visible:!0,mode:0};case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:.2,g:.2,b:.2,a:1},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function i(n){switch(n){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:sv.x,type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Bn.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:tt(Le({},Bn.fromHex(6710886)),{a:1}),colorB:tt(Le({},Bn.fromHex(6710886)),{a:1}),colorC:tt(Le({},Bn.fromHex(16777215)),{a:1}),colorD:tt(Le({},Bn.fromHex(16777215)),{a:1}),distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:jl.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(vh||(vh={}));var cv;(function(e){function t(a){return!a.layers.some(o=>{if(o.data.type==="texture"&&o.data.projection!==0||o.data.type==="depth"&&!o.data.isWorldSpace||o.data.type==="noise"||o.data.type==="displace")return!0})}e.isMergable=t;function r(){return{layers:new _n}}e.defaultEmptyData=r;function i(a="layer1",o="layer2"){return n("phong",a,o)}e.defaultData=i;function n(a,o="layer1",l="layer2"){let h=new _n;return h.push({fi:0,data:vh.defaultData("light",a),id:o}),h.push({fi:1,data:vh.defaultData("color"),id:l}),{layers:h}}e.defaultTwoLayerData=n;function s(a,o="basic",l="layer1",h="layer2"){let d=vh.defaultData("texture");Object.assign(d.texture,{image:a});let p=new _n;return p.push({fi:0,data:d,id:l}),p.push({fi:1,data:vh.defaultData("light",o),id:h}),{layers:p}}e.defaultTwoLayerTextureData=s})(cv||(cv={}));var dv;(function(e){function t(){return{points:new _n,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t;function r(n,s){let{points:a}=s;if(a){for(let o of a)if(o.data.position[0]===n[0]&&o.data.position[1]===n[1])return!0}return!1}e.isOverlappingExistingPoint=r;function i(n,s){let a=n.controlNext,o=s.controlPrevious;return n.position[0]===a.position[0]&&n.position[1]===a.position[1]&&s.position[0]===o.position[0]&&s.position[1]===o.position[1]}e.isStraightLine=i})(dv||(dv={}));var Lw;(function(e){function t(r){return r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"}e.is2DParametricMesh=t})(Lw||(Lw={}));var Ow;(function(e){function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1};if(r==="VectorGeometry")return{width:100,height:100,type:r,subdivisions:12,shape:dv.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1};throw new Error("not implemented")}e.defaultData=t})(Ow||(Ow={}));var Tp;(function(e){e.identity=tt(Le({},pw.identity),{hiddenMatrix:Kh.identity});function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,s){return{position:Xd.isEqual(n.position,s.position)?null:s.position,rotation:Xd.isEqual(n.rotation,s.rotation)?null:s.rotation,scale:Xd.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:Kh.isEqual(n.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}e.diff=i})(Tp||(Tp={}));var cl;(function(e){e.defaultData=Le({states:new _n,events:new _n,visible:!0,raycastLock:!1},Tp.identity)})(cl||(cl={}));var L2;(function(e){e.defaultData=Le({type:"Empty"},cl.defaultData)})(L2||(L2={}));var Pw;(function(e){e.defaultData=Le(Le({type:"Mesh"},cl.defaultData),Ew.defaultData)})(Pw||(Pw={}));var O2;(function(e){e.defaultData=Le(Le({type:"TextFrame"},cl.defaultData),Tw.defaultData)})(O2||(O2={}));var Dw;(function(e){e.defaultData=Le(Le(Le({},cl.defaultData),Tp.identity),Ep.defaultData)})(Dw||(Dw={}));var P2;(function(e){function t(r){return Le(Le({},cl.defaultData),Sw.defaultData(r))}e.defaultData=t})(P2||(P2={}));var D2;(function(e){e.defaultCamera=Le({position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Kh.identity,name:"Play Camera",visible:!0,raycastLock:!1,states:new _n,events:new _n},Ep.defaultData),e.defaultMeshObject=tt(Le(Le({name:"Rectangle"},cl.defaultData),Pw.defaultData),{geometry:Ow.defaultData("RectangleGeometry"),material:cv.defaultTwoLayerData("basic","layer1","layer2")})})(D2||(D2={}));var pv;(function(e){function t(i,n){if(n===void 0)return i;let s=Le({},i);return"material"in s&&"material"in n&&n.material&&(s.material=c2(s.material,a=>{if(typeof a!="string")for(let[o,l]of Object.entries(n.material.layers)){let h=a.layers.data(o);h&&nv(h,l)}}).data),s.materials&&n.materials&&(s.materials=c2(s.materials,a=>{var o,l;for(let h=0;h<s.materials.length;h++){let d=n.materials[h];if(typeof d!="string")for(let[p,f]of Object.entries(d.layers)){let m=(l=(o=a[h])==null?void 0:o.layers)==null?void 0:l.data(p);m&&nv(m,f)}}}).data),s}e.patchMaterialState=t;function r(i,n){var s,a;if(n===void 0)return i;let o=Le({},i);if(Object.assign(o,Tp.merge(o,n)),Mp.is(i.type)){o.orthographic=Le({},o.orthographic),o.perspective=Le({},o.perspective);let l=n;((s=l.orthographic)==null?void 0:s.zoom)!==void 0&&(o.orthographic.zoom=l.orthographic.zoom),((a=l.perspective)==null?void 0:a.zoom)!==void 0&&(o.perspective.zoom=l.perspective.zoom)}else if(i.type==="Mesh")o.geometry=Le({},o.geometry),Object.assign(o.geometry,n.geometry),o=t(o,n);else if(uv.is(i.type)){let l=n;o.intensity!==void 0&&(o.intensity=l.intensity),l.color!==void 0&&(o.color=Bn.clone(l.color))}return o}e.patch=r})(pv||(pv={}));var pn;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.VERTICAL=1]="VERTICAL",e[e.HORIZONTAL=2]="HORIZONTAL",e[e.BOTH=3]="BOTH"})(pn||(pn={}));var aa;(function(e){e[e.OFF=0]="OFF",e[e.ROTATE=1]="ROTATE",e[e.PAN=2]="PAN"})(aa||(aa={}));var oa;(function(e){e[e.NONE=0]="NONE",e[e.EASE=1]="EASE",e[e.BOUNCE=2]="BOUNCE"})(oa||(oa={}));var R2;(function(e){e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,preventScroll:!1,isTouchZoom:!0,orbitTouches:2,panTouches:3}})(R2||(R2={}));var hte=class{static computeTangents(e){e.computeTangents(),console.warn("THREE.BufferGeometryUtils: .computeTangents() has been removed. Use BufferGeometry.computeTangents() instead.")}static mergeBufferGeometries(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},a={},o=e[0].morphTargetsRelative,l=new st,h=0;for(let d=0;d<e.length;++d){let p=e[d],f=0;if(r!==(p.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let m in p.attributes){if(!i.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;s[m]===void 0&&(s[m]=[]),s[m].push(p.attributes[m]),f++}if(f!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(o!==p.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let m in p.morphAttributes){if(!n.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;a[m]===void 0&&(a[m]=[]),a[m].push(p.morphAttributes[m])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(p.userData),t){let m;if(r)m=p.index.count;else if(p.attributes.position!==void 0)m=p.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(h,m,d),h+=m}}if(r){let d=0,p=[];for(let f=0;f<e.length;++f){let m=e[f].index;for(let y=0;y<m.count;++y)p.push(m.getX(y)+d);d+=e[f].attributes.position.count}l.setIndex(p)}for(let d in s){let p=this.mergeBufferAttributes(s[d]);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,p)}for(let d in a){let p=a[d][0].length;if(p===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let f=0;f<p;++f){let m=[];for(let b=0;b<a[d].length;++b)m.push(a[d][b][f]);let y=this.mergeBufferAttributes(m);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(y)}}return l}static mergeBufferAttributes(e){let t,r,i,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),a=0;for(let o=0;o<e.length;++o)s.set(e[o].array,a),a+=e[o].array.length;return new dt(s,r,i)}static interleaveAttributes(e){let t,r=0,i=0;for(let h=0,d=e.length;h<d;++h){let p=e[h];if(t===void 0&&(t=p.array.constructor),t!==p.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;r+=p.array.length,i+=p.itemSize}let n=new au(new t(r),i),s=0,a=[],o=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let h=0,d=e.length;h<d;h++){let p=e[h],f=p.itemSize,m=p.count,y=new Zl(n,f,s,p.normalized);a.push(y),s+=f;for(let b=0;b<m;b++)for(let x=0;x<f;x++)y[l[x]](b,p[o[x]](b))}return a}static estimateBytesUsed(e){let t=0;for(let i in e.attributes){let n=e.getAttribute(i);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}let r=e.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}static mergeVertices(e,t=1e-4){t=Math.max(t,Number.EPSILON);let r={},i=e.getIndex(),n=e.getAttribute("position"),s=i?i.count:n.count,a=0,o=Object.keys(e.attributes),l={},h={},d=[],p=["getX","getY","getZ","getW"];for(let b=0,x=o.length;b<x;b++){let v=o[b];l[v]=[];let g=e.morphAttributes[v];g&&(h[v]=new Array(g.length).fill().map(()=>[]))}let f=Math.log10(1/t),m=Math.pow(10,f);for(let b=0;b<s;b++){let x=i?i.getX(b):b,v="";for(let g=0,_=o.length;g<_;g++){let S=o[g],T=e.getAttribute(S),A=T.itemSize;for(let M=0;M<A;M++)v+=`${~~(T[p[M]](x)*m)},`}if(v in r)d.push(r[v]);else{for(let g=0,_=o.length;g<_;g++){let S=o[g],T=e.getAttribute(S),A=e.morphAttributes[S],M=T.itemSize,O=l[S],P=h[S];for(let C=0;C<M;C++){let N=p[C];if(O.push(T[N](x)),A)for(let U=0,V=A.length;U<V;U++)P[U].push(A[U][N](x))}}r[v]=a,d.push(a),a++}}let y=e.clone();for(let b=0,x=o.length;b<x;b++){let v=o[b],g=e.getAttribute(v),_=new g.array.constructor(l[v]),S=new dt(_,g.itemSize,g.normalized);if(y.setAttribute(v,S),v in h)for(let T=0;T<h[v].length;T++){let A=e.morphAttributes[v][T],M=new A.array.constructor(h[v][T]),O=new dt(M,A.itemSize,A.normalized);y.morphAttributes[v][T]=O}}return y.setIndex(d),y}static toTrianglesDrawMode(e,t){if(t===_P)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===bT||t===$6){let r=e.getIndex();if(r===null){let a=[],o=e.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);e.setIndex(a),r=e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e}let i=r.count-2,n=[];if(t===bT)for(let a=1;a<=i;a++)n.push(r.getX(0)),n.push(r.getX(a)),n.push(r.getX(a+1));else for(let a=0;a<i;a++)a%2==0?(n.push(r.getX(a)),n.push(r.getX(a+1)),n.push(r.getX(a+2))):(n.push(r.getX(a+2)),n.push(r.getX(a+1)),n.push(r.getX(a)));n.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=e.clone();return s.setIndex(n),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}static computeMorphedAttributes(e){if(e.geometry.isBufferGeometry!==!0)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;let t=new L,r=new L,i=new L,n=new L,s=new L,a=new L,o=new L,l=new L,h=new L;function d(te,H,X,J,se,ge,Y,be,fe){t.fromBufferAttribute(X,ge),r.fromBufferAttribute(X,Y),i.fromBufferAttribute(X,be);let ee=te.morphTargetInfluences;if(H.morphTargets&&J&&ee){o.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(let Q=0,ie=J.length;Q<ie;Q++){let oe=ee[Q],me=J[Q];oe!==0&&(n.fromBufferAttribute(me,ge),s.fromBufferAttribute(me,Y),a.fromBufferAttribute(me,be),se?(o.addScaledVector(n,oe),l.addScaledVector(s,oe),h.addScaledVector(a,oe)):(o.addScaledVector(n.sub(t),oe),l.addScaledVector(s.sub(r),oe),h.addScaledVector(a.sub(i),oe)))}t.add(o),r.add(l),i.add(h)}te.isSkinnedMesh&&(te.boneTransform(ge,t),te.boneTransform(Y,r),te.boneTransform(be,i)),fe[ge*3+0]=t.x,fe[ge*3+1]=t.y,fe[ge*3+2]=t.z,fe[Y*3+0]=r.x,fe[Y*3+1]=r.y,fe[Y*3+2]=r.z,fe[be*3+0]=i.x,fe[be*3+1]=i.y,fe[be*3+2]=i.z}let p=e.geometry,f=e.material,m,y,b,x=p.index,v=p.attributes.position,g=p.morphAttributes.position,_=p.morphTargetsRelative,S=p.attributes.normal,T=p.morphAttributes.position,A=p.groups,M=p.drawRange,O,P,C,N,U,V,k,G,Z=new Float32Array(v.count*v.itemSize),W=new Float32Array(S.count*S.itemSize);if(x!==null)if(Array.isArray(f))for(O=0,C=A.length;O<C;O++)for(U=A[O],V=f[U.materialIndex],k=Math.max(U.start,M.start),G=Math.min(U.start+U.count,M.start+M.count),P=k,N=G;P<N;P+=3)m=x.getX(P),y=x.getX(P+1),b=x.getX(P+2),d(e,V,v,g,_,m,y,b,Z),d(e,V,S,T,_,m,y,b,W);else for(k=Math.max(0,M.start),G=Math.min(x.count,M.start+M.count),O=k,C=G;O<C;O+=3)m=x.getX(O),y=x.getX(O+1),b=x.getX(O+2),d(e,f,v,g,_,m,y,b,Z),d(e,f,S,T,_,m,y,b,W);else if(v!==void 0)if(Array.isArray(f))for(O=0,C=A.length;O<C;O++)for(U=A[O],V=f[U.materialIndex],k=Math.max(U.start,M.start),G=Math.min(U.start+U.count,M.start+M.count),P=k,N=G;P<N;P+=3)m=P,y=P+1,b=P+2,d(e,V,v,g,_,m,y,b,Z),d(e,V,S,T,_,m,y,b,W);else for(k=Math.max(0,M.start),G=Math.min(v.count,M.start+M.count),O=k,C=G;O<C;O+=3)m=O,y=O+1,b=O+2,d(e,f,v,g,_,m,y,b,Z),d(e,f,S,T,_,m,y,b,W);let $=new We(Z,3),ae=new We(W,3);return{positionAttribute:v,normalAttribute:S,morphedPositionAttribute:$,morphedNormalAttribute:ae}}},Ix={type:"change"},N2={type:"changeZoom"},cte={type:"changePan"},Ju={type:"start"},cd={type:"end"},I2=/iPad|iPhone|iPod/.test(navigator.userAgent)||m_&&"ontouchend"in document,Bx=new Hr,dte=new q,pte=2*Math.PI,fte=1e-8,mte=.01,B2=2,zx=.125,z2=2,Fx=1,Ux=1,kx=.1,F2;(function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.ROTATE=3]="ROTATE",e[e.DOLLY=4]="DOLLY",e[e.PAN=5]="PAN"})(F2||(F2={}));var U2;(function(e){e[e.NONE=-1]="NONE",e[e.ROTATE=0]="ROTATE",e[e.DOLLY=1]="DOLLY",e[e.PAN=2]="PAN",e[e.TOUCH_ROTATE=3]="TOUCH_ROTATE",e[e.TOUCH_PAN=4]="TOUCH_PAN",e[e.TOUCH_DOLLY_PAN=5]="TOUCH_DOLLY_PAN",e[e.TOUCH_DOLLY_ROTATE=6]="TOUCH_DOLLY_ROTATE"})(U2||(U2={}));var gte=class extends Gn{constructor(e,t){super();this.object=e,this.domElement=t,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=pn.DEFAULT,this.panLimitsMode=pn.DEFAULT,this.rotationSoftLimit=oa.BOUNCE,this.panSoftLimit=oa.BOUNCE,this.hoverRotatePanMode=aa.OFF,this.zoomLimitsEnabled=!1,this.preventScroll=!0,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,$n.DOLLY_ROTATE,$n.PAN],this.offset=new L,this.eye=new L,this.lastPosition=new L,this.lastQuaternion=new Hr,this.current=new q,this.overShoot=new q,this.overRatio=new q,this.spherical=new CC,this.sphericalDelta=new CC,this.panOffset=new L,this.panLeftV=new L,this.panUpV=new L,this.panV=new L,this.rotateStart=new q,this.rotateEnd=new q,this.rotateDelta=new q,this.panStart=new q,this.panEnd=new q,this.panDelta=new q,this.dollyStart=new q,this.dollyEnd=new q,this.dollyDelta=new q,this.rotationRangeFactor=new q,this.panRangeFactor=new q,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isFirstHover=!0,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.update=()=>{let r=this.object.position;this.offset.copy(r).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==pn.DEFAULT&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==pn.HORIZONTAL&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==pn.VERTICAL||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==pn.DEFAULT&&(this.target.applyQuaternion(Bx.copy(this.object.quaternion).invert()),this.panOffset.applyQuaternion(Bx),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(this.object.quaternion),this.panOffset.applyQuaternion(this.object.quaternion)),this.panLimitsMode===pn.HORIZONTAL&&(this.panOffset.y=0),this.panLimitsMode===pn.VERTICAL&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-zx),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),r.copy(this.target).add(this.offset);let i=this.spherical.phi%pte;return this.eye.copy(this.offset).normalize(),this.object.up.copy(Nt.DefaultUp).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-zx,this.sphericalDelta.phi*=1-zx):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>mte||8*(1-this.lastQuaternion.dot(this.object.quaternion))>fte?(this.dispatchEvent(Ix),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=r=>{this.enabled!==!1&&(this.isPointerDown=!0,Vt.length===0&&(this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)),yte(r),r.pointerType==="touch"?this.onPointerDownTouch(r):this.onPointerDownMouse(r))},this.onPointerMove=r=>{this.enabled!==!1&&(r.pointerType==="touch"?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r))},this.onPointerUp=r=>{H2(r),this.isPointerDown=!1,Vt.length===0&&(this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)),this.dispatchEvent(cd),this.state=-1},this.onPointerCancel=r=>{H2(r)},this.onPointerDownMouse=r=>{let i;switch(this.useKeyEvents?i=this.mouseButtons[r.button]:i=this.mouseButtonsPlay[r.button],i){case 0:if(r.altKey===!0&&!r.shiftKey&&!km(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(km(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(km(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(Ju)},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}},this.onPointerDownTouch=r=>{switch(G2(r),this.touches[Vt.length-1]){case $n.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case $n.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case $n.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case $n.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(Ju)},this.onPointerMoveTouch=r=>{switch(G2(r),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=nR(()=>this.dispatchEvent(cd),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||((this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth||this.preventScroll)&&r.preventDefault(),this.dispatchEvent(Ju),this.handleMouseWheel(r),this.dispatchEndDebounced())},this.onGesture=r=>{if(this.enabled!==!1)if(r.preventDefault(),r.type==="gesturechange"){if(this.enableZoom===!1)return;this.dispatchEvent(Ju),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update()}else this.dispatchEvent(cd)},this.onContextMenu=r=>{this.enabled!==!1&&r.preventDefault()},this.onTouchMove=r=>{(r.touches.length>1||this.preventScroll)&&r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key)},this.onKeyUp=()=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&this.onPointerUp(Vt[0]))},this.onPointerHover=r=>{if(!(RY||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===aa.PAN&&this.isPanOverShoot||this.hoverRotatePanMode===aa.ROTATE&&this.isRotateOverShoot)){if(window.clearTimeout(this.timerHover),this.isPointerDown=!0,this.isFirstHover){let i={clientX:window.innerWidth/2,clientY:window.innerHeight/2};this.hoverRotatePanMode===aa.PAN?this.handleMouseDownPan(i):this.hoverRotatePanMode===aa.ROTATE&&this.handleMouseDownRotate(i),this.isFirstHover=!1}this.hoverRotatePanMode===aa.PAN?this.handleMouseMovePan(r,kx):this.hoverRotatePanMode===aa.ROTATE&&this.handleMouseMoveRotate(r,kx),this.timerHover=window.setTimeout(()=>{this.isPointerDown=!1},30)}},this.object=e,this.domElement=t,this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.connect(),this.update()}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Ix),this.isFirstHover=!0,this.update(),this.state=-1}resetTo(e,t,r){this.target.copy(e),this.object.position.copy(t),this.object.zoom=r,this.object.updateProjectionMatrix(),this.dispatchEvent(Ix),this.update(),this.state=-1}fromJSON(e){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.isFirstHover=!0,this.hoverRotatePanMode!==aa.OFF&&this.domElement.addEventListener("pointermove",this.onPointerHover),kx=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,B2=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let t=this.object.getTarget().applyQuaternion(Bx.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+t.y,this.maxV=e.panVerticalOffset.max+t.y,this.minH=-e.panHorizontalOffset.min+t.x,this.maxH=e.panHorizontalOffset.max+t.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Oo(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Oo(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Oo(this.spherical.theta-e.rotationHorizontalOffset.min),this.maxTheta=Oo(this.spherical.theta+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,this.preventScroll=e.preventScroll,e.orbitTouches===1&&(this.touches[0]=$n.ROTATE),e.panTouches===1&&(this.touches[0]=$n.PAN),e.orbitTouches===2&&(this.touches[1]=$n.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=$n.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=$n.ROTATE),e.panTouches===3&&(this.touches[2]=$n.PAN)}connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),I2||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchmove",this.onTouchMove),this.domElement.addEventListener("touchend",this.onTouchEnd)}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointercancel",this.onPointerCancel),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),I2||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,s,a,o){this.overShoot.set(0,0);let l,h,d;e instanceof L?(l=e.x,h=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,h=e.phi,this.current.set(Oo(this.spherical.theta),Oo(this.spherical.phi)),d=!1),r===oa.NONE&&(this.current.x+=l,this.current.y+=h),(t===pn.BOTH||t===pn.HORIZONTAL)&&(!d&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x),i===n&&(l=0)),(t===pn.BOTH||t===pn.VERTICAL)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y),s===a&&(h=0)),d||(this.overShoot.x=Oo(this.overShoot.x),this.overShoot.y=Oo(this.overShoot.y)),r!==oa.NONE?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===oa.EASE&&(this.overRatio.x=k2(Math.abs(this.overRatio.x)),this.overRatio.y=k2(Math.abs(this.overRatio.y))),this.isPointerDown||r===oa.EASE?r===oa.BOUNCE&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(l*this.overShoot.x<0&&(l*=1-this.overRatio.x),h*this.overShoot.y<0&&(h*=1-this.overRatio.y)):r===oa.BOUNCE&&(!d&&(this.overRatio.x>.002||this.overRatio.y>.002)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(l=this.overShoot.x*.05,h=this.overShoot.y*.05,d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,h+=this.overShoot.y),e instanceof L?(e.x=l,e.y=h):(e.theta=l,e.phi=h)}setEnableDampingSpeed(e){this.enableDamping=e,Fx=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*B2}getZoomScale(){return Math.pow(.95,z2)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrix),this.panUp(2*t*n/r.clientHeight,this.object.matrix)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix));this.dispatchEvent(cte)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(N2)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(N2)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Ju),this.dollyOut(e),this.dispatchEvent(cd)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Ju),this.dollyIn(e),this.dispatchEvent(cd)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(Fx*t).rotateAround(dte,-this.object.angleOffsetFromUp);let r=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/r.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/r.clientHeight),this.rotateStart.copy(this.rotateEnd),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(Ux*t),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd),this.update()}handleMouseWheel(e){if(!this.gesture)this.gesture=!0,this.isTrackpadScroll=vte(e),this.isPointerDown=!0;else{if(this.isTrackpadScroll===!1||km(e)){if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale())}else{if(this.enablePan===!1)return;this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(Ux),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y)}this.update()}window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.isPointerDown=!1,this.gesture=!1,this.isTrackpadScroll=!1},30)}handleTouchStartRotate(){if(Vt.length===2){let e=.5*(Vt[0].pageX+Vt[1].pageX),t=.5*(Vt[0].pageY+Vt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(Vt[0].pageX,Vt[0].pageY)}handleTouchStartPan(){if(Vt.length===2){let e=.5*(Vt[0].pageX+Vt[1].pageX),t=.5*(Vt[0].pageY+Vt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(Vt[0].pageX,Vt[0].pageY)}handleTouchStartDolly(){let e=Vt[0].pageX-Vt[1].pageX,t=Vt[0].pageY-Vt[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(Vt.length===2){let r=Hx(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==Vt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(Fx);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(Vt.length===2){let t=Hx(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==Vt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(Ux),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=Hx(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,z2)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}};function Oo(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function k2(e){return 1-Math.pow(1-e,4)}function vte(e){return e.wheelDeltaY===0||e.deltaY===0?m_&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var Vt=[],fv={};function yte(e){Vt.push(e)}function H2(e){delete fv[e.pointerId];for(let t=0;t<Vt.length;t++)if(Vt[t].pointerId===e.pointerId){Vt.splice(t,1);return}}function G2(e){let t=fv[e.pointerId];t===void 0&&(t=new q,fv[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Hx(e){let t=e.pointerId===Vt[0].pointerId?Vt[1]:Vt[0];return fv[t.pointerId]}var xte=3,fs=5855577,wte=2857471,V2=15711266,bte=class extends bY{constructor(){super();this.layers.enable(xte)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new gs({color:65280,linewidth:10}),t=new L(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new L(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new L().addVectors(t,r.multiplyScalar(i)),s=new st;return s.setFromPoints([t,n]),new Xh(s,e)}},$r=class extends wi{constructor({char:e,originalChar:t,fontFamily:r,letterSpacing:i,fontSize:n,LOD:s=16},a=new Kl({color:0,opacity:1,visible:!0,transparent:!0,side:xi})){let o=$r.loadChar(e,r,s);super(o.geometry,a);this.char=e,this.originalChar=t!=null?t:e,this.fontFamily=r,this.letterSpacing=i,this.fontSize=n,this.LOD=s,this.resolution=o.resolution,this.glyphsHa=o.glyphsHa,this.localPosition=new q,this.charSize=0,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}static get FONTS_PATH(){return $r._fontPath}static set FONTS_PATH(e){$r._fontPath=e}updatePosition(e,t){this.localPosition.copy(e);let r=new L(this.localPosition.x,-this.localPosition.y,0);this.position.copy(r).add(t)}updateFontSize(e){let t=e/this.resolution;this.fontSize=e,this.scale.set(this.fontSize,this.fontSize,1),this.charSize=this.glyphsHa*t*this.letterSpacing}updateFontFamily(e){if(this.fontFamily===e)return;this.fontFamily=e;let t=$r.loadChar(this.char,e,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateChar(e){if(this.char===e)return;this.char=e;let t=$r.loadChar(e,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateLetterSpacing(e){this.letterSpacing!==e&&(this.letterSpacing=e,this.updateFontSize(this.fontSize))}updateLOD(e){if(this.LOD===e)return;this.LOD=e;let t=$r.loadChar(this.char,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}clone(){let e={char:this.char,originalChar:this.originalChar,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,LOD:this.LOD};return new $r(e).copy(this)}static loadFont(e){return new Promise(function(t,r){$r.fontCache[e]?t($r.fontCache[e]):new tY().load($r.FONTS_PATH+e+".json",i=>{$r.fontCache[e]=i,t(i)},void 0,r)})}static loadChar(e,t,r){if($r.charCache[e]){if($r.charCache[e][r]&&$r.charCache[e][r].fontFamily===t)return $r.charCache[e][r]}else $r.charCache[e]={};let i=$r.fontCache[t],n=i.generateShapes(e,1);return $r.charCache[e][r]={geometry:new a_(n,r),fontFamily:t,resolution:i.data.resolution,glyphsHa:i.data.glyphs[e].ha},$r.charCache[e][r]}},Nn=$r;Nn.charCache={},Nn.fontCache={},Nn._fontPath="/_assets/_fonts/";var _te=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a;let o=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),l=o.width/2,h=(i=o.radiusTop)!=null?i:l,d=(n=o.radiusBottom)!=null?n:l;return h===d?(h=l,d=l):h>d?(h=l,d=d*l/h):(h=h*l/d,d=l),{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs((s=o.height)!=null?s:o.width),depth:Math.abs((a=o.depth)!=null?a:o.width),radiusTop:h,radiusBottom:d})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,radiusTop:h,radiusBottom:d,cornerRadius:p,cornerSegments:f,hollow:m}=e.parameters,y;return p||m?y=new AR(h,d,i,n,s,a,o,l*Math.PI/180,p,p,f,m):y=new i_(h,d,i,n,s,a,o,l*Math.PI/180),y.scale(1,1,r/t),Object.assign(y,{userData:tt(Le({},e),{type:"CylinderGeometry"})})}};function Po(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function j2(e){return new q(e.y,-e.x)}var AR=class extends st{constructor(e,t,r,i,n,s,a,o,l,h,d,p,f=!1){super();this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,s&&(l=0,h=0);let m=[],y=[],b=[],x=[],v=0,g=r/2,_=new L,S=new L;f&&e==0&&(e=l),f&&t==0&&(t=h);let T=new q(e,g),A=new q(t,-g),M=null,O=null,P=null,C=null,N=T.clone().sub(A),U=0,V=0,k=0;p>0&&(U=Math.min(e,t)*(1-p),V=e-U,k=t-U);let G=T.clone();G.x-=U;let Z=Math.PI-N.angle(),W=N.angle(),$=Math.tan(W/2),ae=Math.tan(Z/2),te=$+ae,H=p?te:ae,X=p?te:$;if(l=Math.min(l,(e-V)/H,N.length()/te),h=Math.min(h,(t-k)/X,N.length()/te),l>0){let fe=l/$;M=T.clone().sub(new q(fe,l)),p&&(P=M.clone(),P.x-=U-te*l),T.sub(N.clone().setLength(fe))}if(h>0){let fe=h/ae;O=A.clone().sub(new q(fe,-h)),A.add(N.clone().setLength(fe)),p&&(C=O.clone(),C.x-=U-te*h,G.sub(N.clone().setLength(fe)))}N=T.clone().sub(A);let J=N.length()<.5,se=[];for(let fe=0;fe<=i;fe++){let ee=[],Q=fe/i,ie=Q*o+a,oe=new q(Math.sin(ie),Math.cos(ie));C&&O?(ge(ee,Q,oe,Z,h,C,-1,!0),ge(ee,Q,oe,W,h,O,-1,!1)):O?(Y(ee,oe,O.x,0,-1),ge(ee,Q,oe,W,h,O,-1,!1)):s||Y(ee,oe,t,k,-1);let me=j2(N).normalize();if(Po(me,oe,_),!J)for(let pe=0;pe<=n;pe++){let we=pe/n,Ae=N.clone().multiplyScalar(we).add(A);Po(Ae,oe,S),y.push(S.x,S.y,S.z),b.push(_.x,_.y,_.z),x.push(Q,.5+S.y/r),ee.push(v++)}if(P&&M?(ge(ee,Q,oe,Z,l,M,1,!1),ge(ee,Q,oe,W,l,P,1,!0)):M?(ge(ee,Q,oe,Z,l,M,1,!1),Y(ee,oe,M.x,0,1)):s||Y(ee,oe,e,V,1),p&&!J){let pe=j2(N).multiplyScalar(-1).normalize();Po(pe,oe,_);for(let we=0;we<=n;we++){let Ae=we/n,F=N.clone().multiplyScalar(-Ae).add(G);Po(F,oe,S),y.push(S.x,S.y,S.z),b.push(_.x,_.y,_.z),x.push(Q,.5+S.y/r),ee.push(v++)}}p&&!s&&ee.push(ee[0]),se.push(ee)}for(let fe=0;fe<se.length-1;fe++)for(let ee=0;ee<se[0].length-1;ee++){if(s&&p&&ee==n)continue;let Q=se[fe][ee],ie=se[fe+1][ee],oe=se[fe+1][ee+1],me=se[fe][ee+1],pe=y[oe*3+0],we=y[oe*3+2];m.push(Q,ie,me),(pe!=0||we!=0)&&m.push(ie,oe,me)}o<Math.PI*2&&(be(-1,se[0],a),be(1,se[se.length-1],a+o)),this.setIndex(m),this.setAttribute("position",new We(y,3)),this.setAttribute("normal",new We(b,3)),this.setAttribute("uv",new We(x,2));function ge(fe,ee,Q,ie,oe,me,pe,we){for(let Ae=0;Ae<d+1;Ae++){let F=Ae/d,B=pe<0?F:1-F;we&&(B-=1),B*=ie;let de=new q(Math.sin(B),Math.cos(B)*pe),Oe=de.clone().multiplyScalar(oe).add(me);Po(Oe,Q,S),y.push(S.x,S.y,S.z),Po(de,Q,_),b.push(_.x,_.y,_.z),x.push(ee,.5+S.y/r),fe.push(v++)}}function Y(fe,ee,Q,ie,oe){let me=new L,pe=new q,we=[Q,ie];oe<0&&we.reverse();for(let Ae of we)pe.set(Ae,g*oe),Po(pe,ee,me),y.push(me.x,me.y,me.z),b.push(0,oe,0),x.push(.5,.5),fe.push(v++)}function be(fe,ee,Q){let ie=new q(Math.sin(Q),Math.cos(Q)),oe=new q(-Math.cos(Q),Math.sin(Q)),me=new L,pe=fe<0?(F,B,de)=>m.push(F,B,de):(F,B,de)=>m.push(F,de,B),we=new q((e+t+V+k)/4,0);Po(we,ie,me),y.push(me.x,me.y,me.z),b.push(oe.x,0,oe.y),x.push(.5,.5);let Ae=v++;for(let F of ee){let B=y.slice(F*3,F*3+3);y.push(...B),b.push(oe.x,0,oe.y);let de=x.slice(F*2,F*2+2);x.push(...de),v++}for(let F=Ae+1;F<v-1;F++)pe(Ae,F,F+1);pe(Ae,v-1,Ae+1)}}},Ste=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,cornerRadiusTop:h,cornerRadiusBottom:d,cornerSegments:p}=e.parameters,f;return h>0||d>0||l<360?f=new AR(0,t/2,i,n,s,a,o,l*Math.PI/180,h,d,p,0,!0):f=new QP(t/2,i,n,s,a),f.scale(1,1,r/t),Object.assign(f,{userData:tt(Le({},e),{type:"ConeGeometry"})})}},Ate=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:s,depthSegments:a,cornerRadius:o,cornerSegments:l}=e.parameters,h;return o==0?h=new ol(t,r,i,n,s,a):h=new Mte(t,r,i,n,s,a,o,l),Object.assign(h,{userData:tt(Le({},e),{type:"CubeGeometry"})})}},Gx=Math.PI/2,Mte=class extends st{constructor(e=1,t=1,r=1,i=1,n=1,s=1,a=0,o=4){super();this.type="BoxBufferGeometry";let l=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),a=Math.min(a,e/2,t/2,r/2);let h=[],d=[],p=[],f=[],m=0,y=0;b("z","y","x",-1,-1,r,t,e,s,n,0),b("z","y","x",1,-1,r,t,-e,s,n,1),b("x","z","y",1,1,e,r,t,i,s,2),b("x","z","y",1,-1,e,r,-t,i,s,3),b("x","y","z",1,-1,e,t,r,i,n,4),b("x","y","z",-1,-1,e,t,-r,i,n,5),a>0&&(x("z","y","x",-1,-1,1,r,t,e,s,0),x("z","y","x",1,-1,-1,r,t,e,s,1),x("z","y","x",-1,1,-1,r,t,e,s,1),x("z","y","x",1,1,1,r,t,e,s,0),x("x","y","z",-1,-1,-1,e,t,r,i,0),x("x","y","z",1,-1,1,e,t,r,i,1),x("x","y","z",-1,1,1,e,t,r,i,0),x("x","y","z",1,1,-1,e,t,r,i,1),x("y","x","z",-1,-1,1,t,e,r,n,0),x("y","x","z",1,-1,-1,t,e,r,n,1),x("y","x","z",1,1,1,t,e,r,n,1),x("y","x","z",-1,1,-1,t,e,r,n,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(h),this.setAttribute("position",new We(d,3)),this.setAttribute("normal",new We(p,3)),this.setAttribute("uv",new We(f,2));function b(g,_,S,T,A,M,O,P,C,N,U){let V=(M-2*a)/C,k=(O-2*a)/N,G=M/2-a,Z=O/2-a,W=P/2,$=C+1,ae=N+1,te=0,H=0,X=new L;for(let J=0;J<ae;J++){let se=J*k-Z;for(let ge=0;ge<$;ge++){let Y=ge*V-G;X[g]=Y*T,X[_]=se*A,X[S]=W,d.push(X.x,X.y,X.z),X[g]=0,X[_]=0,X[S]=P>0?1:-1,p.push(X.x,X.y,X.z),f.push(ge/C),f.push(1-J/N),te+=1}}for(let J=0;J<N;J++)for(let se=0;se<C;se++){let ge=m+se+$*J,Y=m+se+$*(J+1),be=m+(se+1)+$*(J+1),fe=m+(se+1)+$*J;h.push(ge,Y,fe),h.push(Y,be,fe),H+=6}l.addGroup(y,H,U),y+=H,m+=te}function x(g,_,S,T,A,M,O,P,C,N,U){let V=(O-2*a)/N,k=O/2-a,G=P/2-a,Z=C/2,W=N+1,$=0,ae=0,te=new L,H=new L;for(let X=0;X<o+1;X++){let J=X/o*Gx,se=Math.sin(J)*a,ge=(1-Math.cos(J))*a,Y=Math.sin(J),be=Math.cos(J);te[_]=(G+se)*A,te[S]=(Z-ge)*M,H[g]=0,H[_]=Y*Math.sign(te[_]),H[S]=be*Math.sign(te[S]);for(let fe=0;fe<W;fe++){let ee=fe*V-k;te[g]=ee*T,d.push(te.x,te.y,te.z),p.push(H.x,H.y,H.z),f.push(fe/N),f.push(0),$+=1}}for(let X=0;X<o;X++)for(let J=0;J<N;J++){let se=m+J+W*X,ge=m+J+W*(X+1),Y=m+(J+1)+W*(X+1),be=m+(J+1)+W*X;h.push(se,ge,be),h.push(ge,Y,be),ae+=6}l.addGroup(y,ae,U),y+=ae,m+=$}function v(g,_,S){let T=new L,A=new L(e/2,t/2,r/2);A.subScalar(a);let M=[],O=g*_*S>0?(C,N,U)=>h.push(C,N,U):(C,N,U)=>h.push(C,U,N);for(let C=0;C<=o;C++){let N=[],U=Gx*(1-C/o),V=Math.cos(U),k=Math.sin(U),G=0;for(let Z=0;Z<=C;Z++){let W=Math.cos(G),$=Math.sin(G);T.x=V*W,T.y=k,T.z=V*$;let ae=A.clone().addScaledVector(T,a);d.push(g*ae.x,_*ae.y,S*ae.z),p.push(g*T.x,_*T.y,S*T.z),f.push(0,0),N.push(m++),G+=Gx/C}M.push(N)}let P=M.length-1;for(let C=0;C<P;C++){let N=M[C],U=M[C+1],V=N.length-1;O(N[0],U[1],U[0]);for(let k=1;k<=V;k++)O(N[k-1],N[k],U[k]),O(N[k],U[k+1],U[k])}}}},z_=class extends st{constructor(e,t,r,i=1,n=.2,s=4){super();this.type="PolyhedronGeometryRound";let a=[],o=[],l=[];h(),d(),this.setAttribute("position",new We(a,3)),this.setAttribute("normal",new We(l,3)),this.setAttribute("uv",new We(o,2));return;function h(){var p;n=Math.min(1-1e-5,n),n==0&&(s=0);let f={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],m=new L,y=m.clone(),b=new ii,x=n*i,v=i-x,g=s+1,_=new L,S=($,ae)=>_.subVectors($,ae).normalize(),T=($,ae)=>Array($).fill(void 0).map(ae),A=T(e.length/3,($,ae)=>new L().fromArray(e,ae*3).setLength(i)),M=[],O=1e6;for(let $=0;$<A.length;$++){let ae=A[$],te=[],H,X,J,se=1e10,ge=-1;for(;(ge=t.indexOf($,ge+1))!=-1;){let ee=ge-ge%3;H=t[ee+(ge+1)%3],X=t[ee+(ge+2)%3],J=ae.distanceToSquared(A[H]),se=Math.min(se,J),te.push([H,X,J])}se+=1e-6;let Y=[],be=0,fe=te.length;for(let ee=0;ee<fe;ee++){[H,X,J]=te[be];let Q=((p=M[H])==null?void 0:p.includes($))==!0;J<=se&&Y.push(H+ +Q*O),be=te.findIndex(ie=>ie[0]==X)}M.push(Y)}let P=[];{let $=0,ae=0,te,H,X=f==3;for(let J=0;J<=s;J++){te=J*(J+1)/2,H=(J+1)*(J+2)/2;for(let se=0;se<s-J;se++)[$,ae]=[te+se+J+2,H+se+J+3],P.push(te,H,...X?[ae,te]:[$,H],ae,$),[te,H]=[$,ae];P.push(te,H,te+s+2)}}let C=m.clone(),N=m.clone(),U=m.clone(),V=m.clone(),k=m.clone(),G=[],Z=T(A.length,()=>T(f,()=>m.clone()));for(let $=0;$<A.length;$++){m.copy(A[$]).normalize(),C.copy(m).multiplyScalar(v);let ae=M[$];for(let Y=0;Y<ae.length;Y++){let be=ae[Y],fe=ae[(Y+1)%f];b.setFromPointsAndIndices(A,$,be%O,fe%O),b.b.sub(b.a).setLength(1e10).add(b.a),b.c.sub(b.a).setLength(1e10).add(b.a),b.closestPointToPoint(C,Z[$][Y])}let te=[],H=[],X=[],J=new L;s==0&&[...Z[$]].reduce((Y,be)=>Y.add(be),J).multiplyScalar(1/f);for(let Y=0;Y<f;Y++){let be=[],fe=(Y-1+f)%f,ee=Z[$][fe],Q=Z[$][Y];m.copy(ee).sub(C),y.copy(Q).sub(C);let ie=C.angleTo(m),oe=m.angleTo(y),me=Math.cos(ie)*x;s==0?N.copy(J):N.copy(C).setLength(v+me),H.push(me);let pe=[N,ee,Q];for(let we=0;we<2;we++){let Ae=pe[we],F=pe[we+1];V.subVectors(Ae,C),k.subVectors(F,C),U.crossVectors(V,k).normalize();for(let B=0;B<g;B++){let de=[ie,oe][we]*B/g;m.copy(V).applyAxisAngle(U,de).add(C),te.push(m.clone()),we&&(S(m,C),be.push([B==0?Ae:m.clone(),_.clone()]))}we&&(S(F,C),be.push([F,_.clone()]))}X.push(be)}G.push(X);let se=2*g,ge=2;for(let Y=0;Y<f;Y++){let be=se*Y,fe=se*((Y+1)%f),ee=[te[be]];for(let ie=1;ie<g;ie++){V=te[be+ie],k=te[fe+ie],ee.push(V);for(let oe=1,me=ie-ge+1;oe<=me;oe++)m.lerpVectors(V,k,oe/(me+1)),m.sub(C).setLength(H[Y]).add(C),ee.push(m.clone());ee.push(k)}for(let ie=0;ie<g;ie++)ee.push(te[ie+g+be]);ee.push(te[fe+g]);let Q=P.map(ie=>ee[ie]);a.push(...Q.map(ie=>[ie.x,ie.y,ie.z]).flat()),l.push(...Q.map(ie=>(S(ie,C),[_.x,_.y,_.z])).flat())}}let W=[];for(let $=0;$<M.length;$++)for(let ae=0;ae<f;ae++){let te=M[$][ae];if(te<O){let H=M[te].findIndex(se=>se%O==$),X=G[$][ae],J=G[te][H];for(let se=0;se<g;se++){let ge=X[se],Y=J[g-se],be=X[se+1],fe=J[g-(se+1)];[ge,Y,be,be,Y,fe].forEach(ee=>{a.push(ee[0].x,ee[0].y,ee[0].z),l.push(ee[1].x,ee[1].y,ee[1].z)})}W.push(X[0][0],J[g][0],X[g][0],J[0][0])}}for(;W.length;){let $,ae,te,H;[$,ae]=W.splice(0,2);let X=[$];for(;$!=ae;)X.push(ae),te=W.indexOf(ae),H=te%2,ae=W.splice(te-H,2)[1-H];_.subVectors(X[0],X[1]).cross(m.subVectors(X[0],X[2])).normalize();let J=_.dot(X[0])<0;J&&_.negate();for(let se=1;se<=X.length-2;se++)[X[se+ +J],X[se+1-+J],X[0]].forEach(ge=>{a.push(ge.x,ge.y,ge.z),l.push(_.x,_.y,_.z)})}}function d(){let p=new L;for(let A=0;A<a.length;A+=3){p.x=a[A+0],p.y=a[A+1],p.z=a[A+2];let M=S(p)/2/Math.PI+.5,O=T(p)/Math.PI+.5;o.push(M,1-O)}let f=new L,m=new L,y=new L,b=new L,x=new q,v=new q,g=new q,_=(A,M,O,P)=>{P<0&&A.x===1&&(o[M]=A.x-1),O.x===0&&O.z===0&&(o[M]=P/2/Math.PI+.5)};for(let A=0,M=0;A<a.length;A+=9,M+=6){f.set(a[A+0],a[A+1],a[A+2]),m.set(a[A+3],a[A+4],a[A+5]),y.set(a[A+6],a[A+7],a[A+8]),x.set(o[M+0],o[M+1]),v.set(o[M+2],o[M+3]),g.set(o[M+4],o[M+5]),b.copy(f).add(m).add(y).divideScalar(3);let O=S(b);_(x,M+0,f,O),_(v,M+2,m,O),_(g,M+4,y,O)}for(let A=0;A<o.length;A+=6){let M=o[A+0],O=o[A+2],P=o[A+4],C=Math.max(M,O,P),N=Math.min(M,O,P);C>.9&&N<.1&&(M<.2&&(o[A+0]+=1),O<.2&&(o[A+2]+=1),P<.2&&(o[A+4]+=1))}function S(A){return Math.atan2(A.z,-A.x)}function T(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}}static fromJSON(e){return new z_(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},Ete=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new MR(t*.5,s,a):new KP(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:tt(Le({},e),{type:"DodecahedronGeometry"})})}},MR=class extends z_{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(s,a,o,e,t,r);this.type=o}static fromJSON(e){return new MR(e.radius,e.corner,e.cornerSides)}},dd=1e-12,F_=class{constructor(e){this.position=new q,this.startPosition=new q,this.uuid=sr.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new F_(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Rw=class extends F_{constructor(e){super(e.position);this.parent=e}copy(e){return super.copy(e),this}clone(){return new Rw(this.parent).copy(this)}},zh=class extends F_{constructor(e,t){super(t);this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Rw(this),new Rw(this))}static create(e,t){let r=new zh(e,new q(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new zh(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}},U_=e=>e,Qp=new q,k_=new q,Tte=new q,Cte=new q,Lte=new q,Ote=new q,ER=new L,TR=new L;function Pte(e){let t=new q;t.addVectors(e.v0,Qp.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new q;return r.addVectors(e.v2,k_.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Fs(e.v0,t,r,e.v2)}function Ad(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function Dte(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Rte(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function CR(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),s=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-s*s)/(2*n*i))}function Nte(e,t,r,i,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(e.y-t.y)/s,h=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return i.set(o+l,a+h),n.set(o-l,a-h),[i,n]}function Ite(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function Bte(e,t,r,i,n,s){let a=t.x-e.x,o=t.y-e.y,l=r.x-e.x,h=r.y-e.y,d=Math.sqrt((a+l)*(a+l)+(o+h)*(o+h)),p;return CR(t,e,r)>Math.PI&&(d*=-1),Ad(h,o)?p=(o+h)*(i/d-.5)*8/3/(a-l):p=(a+l)*(i/d-.5)*8/3/(h-o),n.set(t.x-p*o,t.y+p*a),s.set(r.x+p*h,r.y-p*l),[n,s]}function W2(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function zte(e,t,r,i,n=.5){let s=Qp.subVectors(t,e).multiplyScalar(n).add(e),a=k_.subVectors(r,t).multiplyScalar(n).add(t),o=Tte.subVectors(i,r).multiplyScalar(n).add(r),l=s,h=Cte.subVectors(a,s).multiplyScalar(n).add(s),d=Lte.subVectors(o,a).multiplyScalar(n).add(a),p=o,f=Ote.subVectors(d,h).multiplyScalar(n).add(h);return[e.x,e.y,l.x,l.y,h.x,h.y,f.x,f.y,d.x,d.y,p.x,p.y,i.x,i.y]}function Fte(e,t,r=12,i=!0){let n=TR.set(0,0,0),s,a=0;for(let o=0;o<t.length;o++){let l=U_(t[o]),h=Qp,d=Jl(l,r);for(let p=0;p<=d;p++)if(l instanceof Fs||l instanceof ll||l instanceof Gs){if(l.getPoint(p/d,h),n.set(h.x,h.y,0),s!==void 0&&Rte(s,n))continue;s===void 0&&(s=ER),s.copy(n),e.setXYZ(a,n.x,n.y,n.z),a++}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function Ute(e,t,r,i=12,n=!0){let s=TR.set(0,0,0),a=0,o=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let h,d=U_(t[l]),p=Qp,f=Jl(d,i);o.push(f);for(let m=0;m<=f;m++)if(d instanceof Fs||d instanceof ll||d instanceof Gs){if(d.getPoint(m/f,p),s.set(p.x,p.y,0),h==null?void 0:h.equals(s))continue;h===void 0?h=ER:(e.setXYZ(a,h.x,h.y,h.z),a++,e.setXYZ(a,s.x,s.y,s.z),a++),h.copy(s)}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),o}function J2(e,t=12,r=!1){let i=[];for(let n=0,s=e.length;n<s;n++){let a=e[n],o=0;if(r&&a.roundedCurveCorner!==void 0){let l=Jl(a.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),o+=l}a.curveAfter!==void 0&&(o+=Jl(a.curveAfter,t)),i.push(o)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=Jl(e[0].roundedCurveCorner,t)*.5),i}function Jl(e,t=12){return e&&e instanceof Wp?t*2:e&&(e instanceof Gs||e instanceof tD)?1:e&&e instanceof Yv?t*e.points.length:t}function kte(e,t,r=12,i=!0){let n,s=0;for(let a=0;a<t.length;a++){let o=U_(t[a]),l=Jl(o,r),h=Qp;for(let d=0;d<=l;d++)if(o instanceof Fs||o instanceof ll||o instanceof Gs){if(o.getPoint(d/l,h),n!==void 0&&Dte(n,h,dd))continue;n===void 0&&(n=k_),n.copy(h),e.push(h.x,h.y),s++}}return Ad(e[0],e[e.length-2],dd)&&Ad(e[1],e[e.length-1],dd)&&(e.pop(),e.pop()),i&&s>1&&!(Ad(e[s-1],e[1],dd)&&Ad(e[s-2],e[0],dd))&&(e.push(e[0],e[1]),s++),e}var Vx=new q,Hte=new q,Gte=new q,Vte=new q,jte=new q,Wte=new q,Ur=class extends ro{constructor(e=100,t=100){super();this.points=[],this.shapeHoles=[],this.eventDispatcher=new Gn,this.plane=new Ds(new L(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=sr.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new Ur;return i.isClosed=e.isClosed,i.points=e.points.map(n=>zh.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>Ur.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){return this.points.findIndex(t=>t.uuid===e)}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0)for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t],n=e-this.points.length;if(n<=i.points.length-1)return i.points[n]}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this.applyScale(e/this.width,t/this.height),this._width=e,this._height=t}applyScale(e,t){let r=Vx.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];s.position.multiply(r),s.controls[0].position.multiply(r),s.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update(!1)}createPoint(e,t=0,r=sr.generateUUID()){let i;e instanceof q?i=e:i=new q(e,t);let n=new zh(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(e=!0){for(let t=0,r=this.shapeHoles.length;t<r;t++)this.shapeHoles[t].update(!1);this._update(e)}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return Fte(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=J2(this.points,e,!1),this.roundedCurveDivisions=J2(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return Ute(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),kte(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=Jl(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=i.reduce((a,o)=>a+o,0));for(let a=0,o=i.length;a<o;a++){let l=i[a];if(s<r+l)return[a,(s-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,a=s[e];if(W2(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(Vx.set(r.x,r.y))/l}let o=0;for(let l=0;l<e;l++)o+=s[l];return(t-o)/a}dispose(){this.eventDispatcher=null}_applyCurveForPoint(e,t){W2(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(e=!0){var t;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];if(i===0)this.moveTo(s.position.x,s.position.y);else{let a=this.points[i-1];this._applyCurveForPoint(s,a)}}let r=this.getLastPoint();if(r!=null&&r.curveAfter&&(r.curveAfter=void 0),this.isClosed){let i=this.points[0],n=this.points[this.points.length-1];this._applyCurveForPoint(i,n)}if(this.points.length>2){let i=0;for(let n=0,s=this.points.length;n<s;n++){let a=this.points[n],o=a.roundness;if(!a.controlsMoved()&&o>0){let l=a.curveBefore,h=a.curveAfter;if(l===void 0||h===void 0)continue;let d=a.roundedCurveBefore,p=a.roundedCurveAfter,f=l.getLength(),m=h.getLength(),y=Math.min(o,f*.499),b=Math.min(o,m*.499),x=Math.min(y,b),v=1-x/f,g=x/m,_=l.getPointAt(v,Vx),S=h.getPointAt(g,Hte);this._subSplitCurve(l,d,v,_,void 0),this._subSplitCurve(h,p,g,void 0,S);let T;if(this.useCubicForRoundedCorners){let A=CR(_,a.position,S)/2,M=Math.tan(A)*_.distanceTo(a.position),[O,P]=Nte(_,S,M,Gte,Vte),C=Ite(O,P,a.position),[N,U]=Bte(C,_,S,M,jte,Wte);T=new Fs(_.clone(),N.clone(),U.clone(),S.clone())}else T=new ll(_.clone(),a.position.clone(),S.clone());a.roundedCurveCorner=T,this.roundedCurves.splice(n+i,0,T),i++}}}e&&((t=this.eventDispatcher)==null||t.dispatchEvent({type:"update"}))}_subSplitCurve(e,t,r,i,n){if(e instanceof Gs)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let s=e,a=t,o=s.getUtoTmapping(r,0),l=zte(s.v0,s.v1,s.v2,s.v3,o);return i!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),n!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new Ur(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var t;this.points=[],this.pointIDs=0;let r=e.points.length/7;for(let i=0;i<r;i++){let n=i*7,s=e.points[n+0],a=e.points[n+1],o=e.points[n+2],l=e.points[n+3],h=e.points[n+4],d=e.points[n+5],p=e.points[n+6],f=new zh(sr.generateUUID(),new q(s,a));f.controls[0].position.set(o,l),f.controls[1].position.set(h,d),f.roundness=p,this.points.push(f)}return this.shapeHoles=(t=e.shapeHoles)!=null&&t.length?e.shapeHoles.map(i=>{let n=new Ur;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(i,n)=>{n instanceof Fs&&n.v3.equals(i.position)&&i.controls[0].position.copy(n.v2)},r=i=>{let n=[],s,a;for(s=0,a=i.length;s<a;s++)i[s]instanceof ll&&(i[s]=Pte(i[s]));for(s=0,a=i.length;s<a;s++){let h=i[s],d=s>0?i[s-1]:null,p;h instanceof Fs?(p=this.createPoint(h.v0),p.controls[1].position.copy(h.v1)):h instanceof Gs&&(p=this.createPoint(h.v1)),p!==void 0&&(d!==null&&t(p,d),n.push(p))}let o=i[i.length-1],l=!1;return o instanceof Fs?o.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(o.v2),l=!0):o instanceof Gs&&o.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=r(e.curves),e instanceof ro&&(this.shapeHoles=e.holes.map(i=>{let n=new Ur;return n.fromShape(i),n})),this.update(),this}},Nw=Math.PI*2;function jx({x:e,y:t},r,i,n,s){return{x:e*r+n,y:t*i+s}}function Jte(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),a=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:s+a*r,y:a-s*r},{x:s,y:a}]}function Y2(e,t,r,i){let n=e*i-t*r<0?-1:1,s=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(s)}function Yte(e,t,r,i,n,s,a,o,l,h){let d=Math.pow(n,2),p=Math.pow(s,2),f=Math.pow(a,2),m=Math.pow(o,2),y=d*p-d*m-p*f;y<0&&(y=0),y/=d*m+p*f,y=Math.sqrt(y)*(l===h?-1:1);let b=y*n/s*o,x=y*-s/n*a,v=b+(e+r)/2,g=x+(t+i)/2,_=(a-b)/n,S=(o-x)/s,T=(-a-b)/n,A=(-o-x)/s,M=Y2(1,0,_,S),O=Y2(_,S,T,A);return!h&&O>0&&(O-=Nw),h&&O<0&&(O+=Nw),{centerx:v,centery:g,ang1:M,ang2:O}}function Xte({px:e,py:t,cx:r,cy:i,rx:n,ry:s,largeArcFlag:a,sweepFlag:o}){let l=[];if(n===0||s===0)return[];let h=(e-r)/2,d=(t-i)/2;if(h===0&&d===0)return[];n=Math.abs(n),s=Math.abs(s);let p=Math.pow(h,2)/Math.pow(n,2)+Math.pow(d,2)/Math.pow(s,2);p>1&&(n*=Math.sqrt(p),s*=Math.sqrt(p));let f=Yte(e,t,r,i,n,s,h,d,a,o),{ang1:m,ang2:y}=f,{centerx:b,centery:x}=f,v=Math.abs(y)/(Nw/4);Math.abs(1-v)<1e-7&&(v=1);let g=Math.max(Math.ceil(v),1);y/=g;for(let _=0;_<g;_++)l.push(Jte(m,y)),m+=y;return l.map(_=>{let{x:S,y:T}=jx(_[0],n,s,b,x),{x:A,y:M}=jx(_[1],n,s,b,x),{x:O,y:P}=jx(_[2],n,s,b,x);return{x1:S,y1:T,x2:A,y2:M,x:O,y:P}})}var kr;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(kr||(kr={}));var Di;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Di||(Di={}));function lt(e,t){if(!e)throw t||"Assertion Failed!"}var it=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){lt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?n<s?r.t-t.t+(t.t-i.t)*(n/(n+s)):r.t-i.t+(i.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,r,i){lt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?(r.t-i.t)*n+(r.t-t.t)*s:0},e.transEval=function(t,r,i){lt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?n<s?r.s-t.s+(t.s-i.s)*(n/(n+s)):r.s-i.s+(i.s-t.s)*(s/(n+s)):0},e.transSign=function(t,r,i){lt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?(r.s-i.s)*n+(r.s-t.s)*s:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,s){var a,o,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(a=e.edgeEval(t,i,r),o=e.edgeEval(i,r,n),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,r.s)):(a=e.edgeSign(t,i,r),o=-e.edgeSign(t,n,r),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,n.s)):s.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(a=e.transEval(t,i,r),o=e.transEval(i,r,n),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,r.t)):(a=e.transSign(t,i,r),o=-e.transSign(t,n,r),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,n.t)):s.t=(i.t+r.t)/2},e}(),pd=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),Gm=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),th=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),X2=function(){function e(){var t=new th,r=new pd,i=new Gm(0),n=new Gm(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new Gm(0),i=new Gm(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;lt(n,"Vertex can't be null!");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r;var a=r;do a.Org=n,a=a.Onext;while(a!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;lt(n,"Face can't be null");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var a=r;do a.Lface=n,a=a.Lnext;while(a!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.makeEdge=function(){var t=new th,r=new th,i=new pd,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var s=new th;this.makeVertex_(s,r,t.Org),t.Org.anEdge=t}if(!i){var a=new pd;this.makeFace_(a,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new pd;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new th;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),s=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,r),n.Org=t.Dst,s.Org=r.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!i){var a=new pd;this.makeFace_(a,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,s,a,o;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=r);a=t.prev,o=t.next,o.prev=a,a.next=o},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,s,a,o,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,a=i.Org;n=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(o=this.countFaceVerts_(r),l=this.countFaceVerts_(s.Lface),o+l-2<=t&&it.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&it.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===a);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,s,a,o,l,h;for(s=t,s=t;(n=s.next)!==t;s=n){lt(n.prev===s),l=n.anEdge;do lt(l.Sym!==l),lt(l.Sym.Sym===l),lt(l.Lnext.Onext.Sym===l),lt(l.Onext.Sym.Lnext===l),lt(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(lt(n.prev===s&&n.anEdge===null),o=r,o=r;(a=o.next)!==r;o=a){lt(a.prev===o),l=a.anEdge;do lt(l.Sym!==l),lt(l.Sym.Sym===l),lt(l.Lnext.Onext.Sym===l),lt(l.Onext.Sym.Lnext===l),lt(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for(lt(a.prev===o&&a.anEdge===null),h=i,h=i;(l=h.next)!==i;h=l)lt(l.Sym.next===h.Sym),lt(l.Sym!==l),lt(l.Sym.Sym===l),lt(l.Org!==null),lt(l.Dst!==null),lt(l.Lnext.Onext.Sym===l),lt(l.Onext.Sym.Lnext===l);lt(l.Sym.next===h.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),q2=function(){function e(){this.handle=null}return e}(),Q2=function(){function e(){this.key=null,this.node=0}return e}(),qte=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new q2,this.handles[i]=new Q2;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t<<1,a<this.size&&this.leq(i[r[a+1].handle].key,i[r[a].handle].key)&&++a,lt(a<=this.max),s=r[a].handle,a>this.size||this.leq(i[n].key,i[s].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t>>1,s=r[a].handle,a===0||this.leq(i[s].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new q2;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new Q2}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;lt(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),Wx=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),K2=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),Qte=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new K2,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new K2;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Kte=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,s=r.eUp,a=i.eUp;if(s.Dst===n)return a.Dst===n?it.vertLeq(s.Org,a.Org)?it.edgeSign(a.Dst,s.Org,a.Org)<=0:it.edgeSign(s.Dst,a.Org,s.Org)>=0:it.edgeSign(a.Dst,n,a.Org)<=0;if(a.Dst===n)return it.edgeSign(s.Dst,n,s.Org)>=0;var o=it.edgeEval(s.Dst,n,s.Org),l=it.edgeEval(a.Dst,n,a.Org);return o>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&lt(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){lt(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new Wx;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case kr.ODD:return(r&1)!=0;case kr.NONZERO:return r!==0;case kr.POSITIVE:return r>0;case kr.NEGATIVE:return r<0;case kr.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,s=null,a=r,o=r.eUp;a!==i;){if(a.fixUpperEdge=!1,s=e.regionBelow(a),n=s.eUp,n.Org!=o.Org){if(!s.fixUpperEdge){e.finishRegion(t,a);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,a),o=s.eUp,a=s}return o},e.addRightEdges=function(t,r,i,n,s,a){var o,l,h,d,p=!0;h=i;do lt(it.vertLeq(h.Org,h.Dst)),e.addRegionBelow(t,r,h.Sym),h=h.Onext;while(h!==n);for(s===null&&(s=e.regionBelow(r).eUp.Rprev),l=r,d=s;o=e.regionBelow(l),h=o.eUp.Sym,h.Org===d.Org;)h.Onext!==d&&(t.mesh.splice(h.Oprev,h),t.mesh.splice(d.Oprev,h)),o.windingNumber=l.windingNumber-h.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!p&&e.checkForRightSplice(t,l)&&(e.addWinding(h,d),e.deleteRegion(t,l),t.mesh.delete(d)),p=!1,l=o,d=h;l.dirty=!0,lt(l.windingNumber-h.winding===o.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=it.vertL1dist(r,t),s=it.vertL1dist(i,t),a=.5*s/(n+s),o=.5*n/(n+s);t.coords[0]+=a*r.coords[0]+o*i.coords[0],t.coords[1]+=a*r.coords[1]+o*i.coords[1],t.coords[2]+=a*r.coords[2]+o*i.coords[2]},e.getIntersectData=function(t,r,i,n,s,a){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,s,a)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp;if(it.vertLeq(n.Org,s.Org)){if(it.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;it.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),r.dirty=i.dirty=!0)}else{if(it.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a;if(lt(!it.vertEq(n.Dst,s.Dst)),it.vertLeq(n.Dst,s.Dst)){if(it.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,a=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,a),a.Lface.inside=r.inside}else{if(it.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;r.dirty=i.dirty=!0,a=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),a.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a=n.Org,o=s.Org,l=n.Dst,h=s.Dst,d,p,f=new th,m,y;if(lt(!it.vertEq(h,l)),lt(it.edgeSign(l,t.event,a)<=0),lt(it.edgeSign(h,t.event,o)>=0),lt(a!==t.event&&o!==t.event),lt(!r.fixUpperEdge&&!i.fixUpperEdge),a===o||(d=Math.min(a.t,l.t),p=Math.max(o.t,h.t),d>p))return!1;if(it.vertLeq(a,o)){if(it.edgeSign(h,a,o)>0)return!1}else if(it.edgeSign(l,o,a)<0)return!1;return e.debugEvent(t),it.intersect(l,a,h,o,f),lt(Math.min(a.t,l.t)<=f.t),lt(f.t<=Math.max(o.t,h.t)),lt(Math.min(h.s,l.s)<=f.s),lt(f.s<=Math.max(o.s,a.s)),it.vertLeq(f,t.event)&&(f.s=t.event.s,f.t=t.event.t),m=it.vertLeq(a,o)?a:o,it.vertLeq(m,f)&&(f.s=m.s,f.t=m.t),it.vertEq(f,a)||it.vertEq(f,o)?(e.checkForRightSplice(t,r),!1):!it.vertEq(l,t.event)&&it.edgeSign(l,t.event,f)>=0||!it.vertEq(h,t.event)&&it.edgeSign(h,t.event,f)<=0?h===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),i=r,r=e.topRightRegion(r),y=e.regionBelow(r).eUp.Rprev,i.eUp=s.Oprev,s=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,s.Onext,n.Rprev,y,!0),!0):(it.edgeSign(l,t.event,f)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),it.edgeSign(h,t.event,f)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=f.s,n.Org.t=f.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,a,l,o,h),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,s;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,s=i.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(s),i=e.regionBelow(r),s=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,s=i.Onext,a=e.regionBelow(r),o=r.eUp,l=a.eUp,h=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,r),it.vertEq(o.Org,t.event)&&(t.mesh.splice(s.Oprev,o),r=e.topLeftRegion(t,r),s=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),a),h=!0),it.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,a,null),h=!0),h){e.addRightEdges(t,r,i.Onext,s,s,!0);return}it.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,s,a,o,l;if(n=r.eUp,it.vertEq(n.Org,i)){lt(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!it.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}lt(!1),r=e.topRightRegion(r),l=e.regionBelow(r),a=l.eUp.Sym,s=o=a.Onext,l.fixUpperEdge&&(lt(s!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=s.Oprev),t.mesh.splice(i.anEdge,a),it.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,r,a.Onext,o,s,!0)},e.connectLeftVertex=function(t,r){var i,n,s,a,o,l,h=new Wx;if(h.eUp=r.anEdge.Sym,i=t.dict.search(h).key,n=e.regionBelow(i),!!n){if(a=i.eUp,o=n.eUp,it.edgeSign(a.Dst,r,a.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(s=it.vertLeq(o.Dst,a.Dst)?i:n,i.inside||s.fixUpperEdge){if(s===i)l=t.mesh.connect(r.anEdge.Sym,a.Lnext);else{var d=t.mesh.connect(o.Dnext,r.anEdge);l=d.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);lt(n!==null);var s=e.regionBelow(n),a=s.eUp,o=e.finishLeftRegions(t,s,null);o.Onext===a?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,a,a,!0)},e.addSentinel=function(t,r,i,n){var s=new Wx,a=t.mesh.makeEdge();a.Org.s=i,a.Org.t=n,a.Dst.s=r,a.Dst.t=n,t.event=a.Dst,s.eUp=a,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new Qte(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,s=t.bmax[0]+r,a=t.bmin[1]-i,o=t.bmax[1]+i;e.addSentinel(t,n,s,a),e.addSentinel(t,n,s,o)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(lt(r.fixUpperEdge),lt(++i==1)),lt(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,s=t.mesh.eHead;for(r=s.next;r!==s;r=i)i=r.next,n=r.Lnext,it.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,s=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)s++;for(s+=8,r=t.pq=new qte(s,it.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,s;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,s=i.anEdge,lt(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!it.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),Zte=function(){function e(){this.mesh=new X2,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=kr.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,s,a,o,l=[0,0,0],h=[0,0,0],d=[0,0,0],p=[0,0,0],f=[0,0,0],m=[null,null,null],y=[null,null,null],b=this.mesh.vHead;r=b.next;for(var x=0;x<3;++x)s=r.coords[x],h[x]=s,y[x]=r,l[x]=s,m[x]=r;for(r=b.next;r!==b;r=r.next)for(var v=0;v<3;++v)s=r.coords[v],s<h[v]&&(h[v]=s,y[v]=r),s>l[v]&&(l[v]=s,m[v]=r);var g=0;if(l[1]-h[1]>l[0]-h[0]&&(g=1),l[2]-h[2]>l[g]-h[g]&&(g=2),h[g]>=l[g]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,i=y[g],n=m[g],d[0]=i.coords[0]-n.coords[0],d[1]=i.coords[1]-n.coords[1],d[2]=i.coords[2]-n.coords[2],r=b.next;r!==b;r=r.next)p[0]=r.coords[0]-n.coords[0],p[1]=r.coords[1]-n.coords[1],p[2]=r.coords[2]-n.coords[2],f[0]=d[1]*p[2]-d[2]*p[1],f[1]=d[2]*p[0]-d[0]*p[2],f[2]=d[0]*p[1]-d[1]*p[0],a=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],a>o&&(o=a,t[0]=f[0],t[1]=f[1],t[2]=f[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,s=0,a=t.next;a!==t;a=a.next)if(n=a.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==a.anEdge);if(s<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,s=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),s=!0),i=this.sUnit,n=this.tUnit;var a=this.longAxis_(r);i[a]=0,i[(a+1)%3]=1,i[(a+2)%3]=0,n[a]=0,n[(a+1)%3]=0,n[(a+2)%3]=r[a]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,i),o.t=this.dot_(o.coords,n);s&&this.checkOrientation_();for(var l=!0,h=t.next;h!==t;h=h.next)l?(this.bmin[0]=this.bmax[0]=h.s,this.bmin[1]=this.bmax[1]=h.t,l=!1):(h.s<this.bmin[0]&&(this.bmin[0]=h.s),h.s>this.bmax[0]&&(this.bmax[0]=h.s),h.t<this.bmin[1]&&(this.bmin[1]=h.t),h.t>this.bmax[1]&&(this.bmax[1]=h.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;it.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;it.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var s=void 0;i.Lnext!==n;)if(it.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(it.edgeGoesLeft(n.Lnext)||it.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(it.edgeGoesRight(i.Lprev)||it.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=t.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?r:-r:i?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var s,a=0,o=0,l;i>3&&t.mergeConvexFaces(i);for(var h=t.vHead.next;h!==t.vHead;h=h.next)h.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,!!d.inside){s=d.anEdge,l=0;do{var h=s.Org;h.n===-1&&(h.n=o,o++),l++,s=s.Lnext}while(s!==d.anEdge);if(l>i)throw"Face vertex greater that support polygon";d.n=a,++a}this.elementCount=a,r===Di.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*i,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var h=t.vHead.next;h!==t.vHead;h=h.next)if(h.n!==-1){var p=h.n*n;this.vertices[p+0]=h.coords[0],this.vertices[p+1]=h.coords[1],n>2&&(this.vertices[p+2]=h.coords[2]),this.vertexIndices[h.n]=h.idx}for(var f=0,d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){s=d.anEdge,l=0;do{var h=s.Org;this.elements[f++]=h.n,l++,s=s.Lnext}while(s!==d.anEdge);for(var m=l;m<i;++m)this.elements[f++]=-1;if(r===Di.CONNECTED_POLYGONS){s=d.anEdge;do this.elements[f++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==d.anEdge);for(var y=l;y<i;++y)this.elements[f++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,s=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=i=o.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,h=0,d=0;s=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){a=0,n=i=o.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[h++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,a++,i=i.Lnext;while(i!==n);this.elements[d++]=s,this.elements[d++]=a,s+=a}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new X2),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,s,a){if(t===void 0&&(t=kr.ODD),r===void 0&&(r=Di.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),Kte.computeInterior(this,a);var o=this.mesh;return r===Di.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),r===Di.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,r,i,n),!0},e}();function Md(e){var t=e.windingRule,r=t===void 0?kr.ODD:t,i=e.elementType,n=i===void 0?Di.POLYGONS:i,s=e.polySize,a=s===void 0?3:s,o=e.vertexSize,l=o===void 0?2:o,h=e.normal,d=h===void 0?[0,0,1]:h,p=e.contours,f=p===void 0?[]:p,m=e.strict,y=m===void 0?!0:m,b=e.debug,x=b===void 0?!1:b;if(!f&&y)throw new Error("Contours can't be empty");if(f){var v=new Zte;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var g=0;g<f.length;g++)v.addContour(l||2,f[g]);return v.tesselate(r,n,a,l,d,y),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:x?v.mesh:void 0}}}kr.ODD;kr.NONZERO;kr.POSITIVE;kr.NEGATIVE;kr.ABS_GEQ_TWO;Di.POLYGONS;Di.CONNECTED_POLYGONS;Di.BOUNDARY_CONTOURS;var LR=class extends st{constructor(e,t=12,r=100,i={}){super();this.type="ShapeGeometry",this.windingRule=kr.ODD,this.elementType=Di.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._drawCount=0,this._shape=e,this._curveSegments=t,this._maxCount=r,this._maxDrawCount=r*3,this._triangulationOptions=Object.assign({windingRule:kr.ODD,elementType:Di.POLYGONS,polySize:3,vertexSize:2,strict:!0},i),this._positionAttribute=new dt(new Float32Array(r*3),3),this._normalAttribute=new dt(new Float32Array(r*3),3),this._uvAttribute=new dt(new Float32Array(r*2),2),this._indexAttribute=new dt(new Uint32Array(r*3),1),this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.updateFromShape()}copy(e){return this._drawCount=e.drawCount,this._maxDrawCount=e._maxDrawCount,this._maxCount=e.maxCount,super.copy(e)}get curveSegments(){return this._curveSegments}set curveSegments(e){this._curveSegments=e,this.updateFromShape()}get drawCount(){return this._drawCount}get maxDrawCount(){return this._maxDrawCount}get maxCount(){return this._maxCount}updateFromShape(){let e=this._shape.extractShapePointsToFlatArray([],this._curveSegments),t=this._shape.shapeHoles.map(o=>o.extractShapePointsToFlatArray([],this._curveSegments)),r,i=!0,n=!0,s,a;for(let o=0,l=e.length/2;o<l;o++){let h=o*2,d=e[h+0],p=e[h+1];if(s!==void 0&&d!==s&&(i=!1),a!==void 0&&p!==a&&(n=!1),s=d,a=p,!i&&!n)break}if(!i&&!n&&(r=Md({contours:[e,...t],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})),this._positionAttribute.array.fill(0),this._normalAttribute.array.fill(0),this._uvAttribute.array.fill(0),this._indexAttribute.array.fill(0),this._drawCount=0,r){let o=1/0,l=-1/0,h=1/0,d=-1/0;for(let m=0,y=r.vertexCount;m<y;m++){let b=m*2,x=r.vertices[b+0],v=r.vertices[b+1];x<o&&(o=x),x>l&&(l=x),v<h&&(h=v),v>d&&(d=v)}let p=l-o,f=d-h;for(let m=0,y=r.vertexCount;m<y;m++){let b=m*2,x=r.vertices[b+0],v=r.vertices[b+1],g=(x-o)/p,_=(v-h)/f;this._positionAttribute.setXYZ(m,x,v,0),this._normalAttribute.setXYZ(m,0,0,1),this._uvAttribute.setXY(m,g,_)}for(let m=0,y=r.elementCount;m<y;m++){let b=m*3,x=r.elements[b+0],v=r.elements[b+1],g=r.elements[b+2];this._indexAttribute.setX(b+0,x),this._indexAttribute.setX(b+1,v),this._indexAttribute.setX(b+2,g),this._drawCount+=3}}return this._positionAttribute.needsUpdate=!0,this._normalAttribute.needsUpdate=!0,this._uvAttribute.needsUpdate=!0,this._indexAttribute.needsUpdate=!0,this.setDrawRange(0,this._drawCount),this._drawCount>this._maxDrawCount}},Iw=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*Iw.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${e}`);let r=e*Iw.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,s=0,a=new Float32Array(i,s*n,3*e);s+=3*e;let o=new Float32Array(i,s*n,3*e);s+=3*e;let l=new Float32Array(i,s*n,2*e);a.set(this.positions.slice(0,this.size*3)),o.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=i,this.positions=a,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},OR=Iw;OR.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var Jx=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),$te=class extends st{constructor(e,t,r=0,i=12,n=3){super();this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,r<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(r,t/2-1e-12),this._bevelSegments=Math.floor(n));let s=this._shape.extractShapePointsToFlatArray([],i),a=this._shape.shapeHoles.map(T=>{let A=T.extractShapePointsToFlatArray([],i),M=[];for(let O=A.length-1;O>=1;O-=2){let P=A[O-1],C=A[O-0];M.push(P,C)}return M}),o=Md({windingRule:kr.ODD,elementType:Di.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]}),l=Md({windingRule:kr.ODD,elementType:Di.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]});if(!o)throw new Error("error generating geometry");let h=o.elementCount;if(l){o.elementCount+=l.elementCount;for(let T=0;T<l.elements.length;T++){let A=l.elements[T],M=T%2==0?o.vertexCount:0;o.elements.push(A+M)}for(let T=0;T<l.vertexIndices.length;T++){let A=l.vertexIndices[T],M=o.vertexCount;o.vertexIndices.push(A+M)}for(let T=0;T<l.vertices.length;T++){let A=l.vertices[T];o.vertices.push(A)}}let d=1/0,p=-1/0,f=1/0,m=-1/0;for(let T=0,A=o.vertexCount;T<A;T++){let M=T*2,O=o.vertices[M+0],P=o.vertices[M+1];O<d&&(d=O),O>p&&(p=O),P<f&&(f=P),P>m&&(m=P)}this._minX=d,this._minY=f,this._width=p-d,this._height=m-f;let y=o.vertexCount*2*(2+this._bevelSegments);this._buffer=new OR(y);let b=[],x=[];for(let T=o.elementCount-1,A=o.elementCount;T>=0;T--){let M=T>=h,O=T*2,P=o.elements[O+0],C=o.elements[O+1],N=P+C,U={start:P,count:C,normals:[],continuous:[],concave:[]},V=P,k=N-1,G=P+1,Z=this._shape.roundedCurves.length;do{let te=V-P,H=o.vertices[k*2+0],X=o.vertices[k*2+1],J=o.vertices[V*2+0],se=o.vertices[V*2+1],ge=o.vertices[G*2+0],Y=o.vertices[G*2+1],be=J-H,fe=se-X,ee=Math.sqrt(be*be+fe*fe);be/=ee,fe/=ee;let Q=J-ge,ie=se-Y,oe=Math.sqrt(Q*Q+ie*ie);Q/=oe,ie/=oe,U.normals[te*2+0]=-ie,U.normals[te*2+1]=Q,U.concave[te]=be*ie-fe*Q>0;let me=o.vertexIndices[V];if(Array.isArray(me))U.continuous[te]=!1;else{let[pe,we]=this._shape.getCurveIndexFromVertexId(me-1,!0);if(we>0&&we<1)U.continuous[te]=!0;else{let Ae=we===1?pe+1:pe-1;Ae=(Ae+Z)%Z;let F=we===1?0:1,B=this._shape.roundedCurves[pe].getTangent(we),de=this._shape.roundedCurves[Ae].getTangent(F);U.continuous[te]=B.dot(de)>.95}}M&&(U.normals[te*2+0]*=-1,U.normals[te*2+1]*=-1),[k,V,G]=[V,G,G+1],G>=N&&(G-=C)}while(G!==P+1);let W=[];W.push({bevelI:0,angle:0,size:0,boundary:{vertices:o.vertices.slice(P*2,N*2),vertexCount:C,vertexIndices:new Array(C).fill(!0).map((te,H)=>[H,H]),elements:[0,C],elementCount:1,mesh:null},reverseMap:[],insetPoints:o.vertices.slice(P*2,N*2)});for(let te=1;te<=this._bevelSegments;te++){let H=te/this._bevelSegments*Math.PI/2,X=(1-Math.cos(H))*this._bevelSize,J=[],se=[],ge=[],Y=[],be=0;for(let ee=0;ee<C;ee++){let Q=ee*2,ie=(ee-1+C)%C*2,oe=o.vertices[U.start*2+Q+0],me=o.vertices[U.start*2+Q+1],pe=-U.normals[ie+0]*X,we=-U.normals[ie+1]*X,Ae=-U.normals[Q+0]*X,F=-U.normals[Q+1]*X;if(U.concave[ee]||!U.concave[ee]&&M){let B=Math.atan2(we,pe),de=Math.atan2(F,Ae);de>B&&(de-=Math.PI*2);let Oe=de-B;if(U.continuous[ee]||M){let Ce=B+Oe/2,Re=Math.cos(Ce)*X,ze=Math.sin(Ce)*X;J[2*be+0]=oe+Re*(M?-1:1),J[2*be+1]=me+ze*(M?-1:1),Y[be]=ee,be++}else{let Ce=Math.max(1,Math.floor(i/4*Math.abs(Oe)/Math.PI));for(let Re=0;Re<=Ce;Re++){let ze=B+Oe*(Re/Ce),Ke=Math.cos(ze)*X,je=Math.sin(ze)*X;J[2*be+0]=oe+Ke,J[2*be+1]=me+je,Y[be]=ee,be++}}}else J[2*be+0]=oe+pe,J[2*be+1]=me+we,Y[be]=ee,se[ee]=be,be++,J[2*be+0]=oe,J[2*be+1]=me,Y[be]=ee,be++,J[2*be+0]=oe+Ae,J[2*be+1]=me+F,Y[be]=ee,ge[ee]=be,be++}let fe=Md({windingRule:kr.POSITIVE,elementType:Di.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[J],edgeCreateCallback:ee=>{let Q=ee.Org.idx,ie=Y[Q],oe=Y[(Q+1)%Y.length];ee.idx=[ie,oe],ee.Sym.idx=[oe,ie]},vertexIdCallback:ee=>{let Q=ee.Lprev.idx;return[Q?Q[1]:0,ee.idx[0]]}});if(!fe)throw console.log("Error"),new Error(`error generating bevel geometry for ${te}'th loop`);if(!fe.vertexCount)break;for(let ee=0;ee<fe.vertexIndices.length;ee++){let[Q,ie]=fe.vertexIndices[ee];if(Q===ie)continue;let oe=ie;ie<Q&&(oe+=C);for(let me=Q;me<oe;me++){let pe=me%C,we=(me+1)%C;if(!U.continuous[pe]||!U.continuous[we]){fe.vertexIndices[ee]=[Q,pe],fe.vertexIndices.splice(ee+1,0,[we,ie]),fe.vertices.splice((ee+1)*2,0,fe.vertices[ee*2],fe.vertices[ee*2+1]);break}}}W.push({bevelI:te,angle:H,size:X,boundary:fe,reverseMap:Y,insetPoints:J})}let $=(te,H,X)=>{let J=0,se=te.boundary.vertexIndices.length;for(;J<se&&X(te.boundary.vertexIndices[H]);)H=(H+1)%se,J++;return J},ae=b.length;for(let te=1;te<W.length;te++){let H=W[te-1],X=W[te],J=H.boundary.vertexIndices.length,se=X.boundary.vertexIndices.length;if(!J||!se)break;let ge=U.concave.length,Y=0,be=Jx(Y,C);for(;!H.boundary.vertexIndices.filter(be).length||!X.boundary.vertexIndices.filter(be).length;)Y++,be=Jx(Y,C);let fe=H.boundary.vertexIndices.findIndex(be),ee=X.boundary.vertexIndices.findIndex(be);do fe=(fe+1)%J;while(be(H.boundary.vertexIndices[fe]));do ee=(ee+1)%se;while(be(X.boundary.vertexIndices[ee]));Y=(Y+1)%C;let Q=Y,ie=this.buildBevelVert(U,H,(fe-1+J)%J),oe=this.buildBevelVert(U,X,(ee-1+se)%se),me=ie,pe=oe,we,Ae,F=!1;do{be=Jx(Y,C);let B=$(H,fe,be),de=$(X,ee,be),Oe=F;if(F=!1,B&&!de){for(let Ce=0;Ce<B;Ce++)we=this.buildBevelVert(U,H,(fe+Ce)%J,Ce/(B-1)),b.push(me.topN,we.topP,pe.topN),b.push(we.bottomP,me.bottomN,pe.bottomN),me=we;F=!0}else if(!B&&de)for(let Ce=0;Ce<de;Ce++)Ae=this.buildBevelVert(U,X,(ee+Ce)%se,Ce/(de-1)),b.push(pe.topN,me.topP,Ae.topP),b.push(me.bottomP,pe.bottomN,Ae.bottomP),pe=Ae;else if(B&&de)if(we=this.buildBevelVert(U,H,fe,0),Ae=this.buildBevelVert(U,X,ee,0),Oe?(b.push(me.topN,Ae.topP,pe.topN),b.push(me.topN,we.topP,Ae.topP),b.push(Ae.bottomP,me.bottomN,pe.bottomN),b.push(we.bottomP,me.bottomN,Ae.bottomP)):(b.push(me.topN,we.topP,pe.topN),b.push(pe.topN,we.topP,Ae.topP),b.push(we.bottomP,me.bottomN,pe.bottomN),b.push(we.bottomP,pe.bottomN,Ae.bottomP)),me=we,pe=Ae,B===de)for(let Ce=1;Ce<B;Ce++)we=this.buildBevelVert(U,H,(fe+Ce)%J,Ce/(B-1)),Ae=this.buildBevelVert(U,X,(ee+Ce)%se,Ce/(de-1)),b.push(me.topN,we.topP,pe.topN),b.push(pe.topN,we.topP,Ae.topP),b.push(we.bottomP,me.bottomN,pe.bottomN),b.push(we.bottomP,pe.bottomN,Ae.bottomP),me=we,pe=Ae;else if(B>de){let Ce=B/de,Re=0;for(let ze=1;ze<B;ze++)we=this.buildBevelVert(U,H,(fe+ze)%J,ze/(B-1)),b.push(me.topN,we.topP,pe.topN),b.push(we.bottomP,me.bottomN,pe.bottomN),me=we,ze>(Re+1)*Ce&&(Re++,Ae=this.buildBevelVert(U,X,(ee+Re)%se,Re/(de-1)),b.push(pe.topN,we.topP,Ae.topP),b.push(we.bottomP,pe.bottomN,Ae.bottomP),pe=Ae)}else{let Ce=de/B,Re=0;for(let ze=1;ze<de;ze++)Ae=this.buildBevelVert(U,X,(ee+ze)%se,ze/(de-1)),b.push(pe.topN,we.topP,Ae.topP),b.push(we.bottomP,pe.bottomN,Ae.bottomP),pe=Ae,ze>(Re+1)*Ce&&(Re++,we=this.buildBevelVert(U,H,(fe+Re)%J,Re/(B-1)),b.push(me.topN,we.topP,pe.topN),b.push(we.bottomP,me.bottomN,pe.bottomN),me=we)}fe=(fe+B)%J,ee=(ee+de)%se,Y=(Y+1)%ge}while(Y!==Q)}{let te=W[0];for(let H=0,X=te.boundary.vertexCount;H<X;H++){let J=this.buildBevelVert(U,te,H),se=this.buildBevelVert(U,te,(H+1)%X);b.push(se.topP,J.topN,J.bottomN),b.push(se.topP,J.bottomN,se.bottomP)}}if(M){let te=[];for(let H=b.length-1;H>=ae+2;H-=3){let X=b[H-2],J=b[H-1],se=b[H-0];te.push(se,J,X)}b.splice(ae,b.length-ae,...te)}if(M){let te=[];for(let H=W[W.length-1].boundary.vertices.length-1;H>=1;H-=2){let X=W[W.length-1].boundary.vertices[H-1],J=W[W.length-1].boundary.vertices[H-0];te.push(X,J)}x.push(te)}if(!M){let te=W[W.length-1],H=Md({windingRule:W.length>1?kr.POSITIVE:kr.ODD,elementType:Di.POLYGONS,vertexSize:2,strict:!0,contours:[te.insetPoints,...x]});if(!H)throw new Error("Error generating geometry for surface");for(let X=0;X<H.elementCount*3;X+=3){let J=this.buildSurfaceVert(H,H.elements[X+0]),se=this.buildSurfaceVert(H,H.elements[X+1]),ge=this.buildSurfaceVert(H,H.elements[X+2]);b.push(J.top,se.top,ge.top),b.push(ge.bottom,se.bottom,J.bottom)}}this.vertexCache={}}this._buffer.shrink();let v=new dt(Uint32Array.from(b),1),g=new dt(this._buffer.positions,3),_=new dt(this._buffer.normals,3),S=new dt(this._buffer.uvs,2);g.needsUpdate=!0,_.needsUpdate=!0,S.needsUpdate=!0,v.needsUpdate=!0,this.setAttribute("position",g),this.setAttribute("normal",_),this.setAttribute("uv",S),this.setIndex(v)}buildSurfaceVert(e,t){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let i=e.vertices[t*2+0],n=e.vertices[t*2+1],s=(i-this._minX)/this._width,a=(n-this._minY)/this._height,o=this._buffer.get(2),l=o*3,h=o*2,d={top:o+0,bottom:o+1};return this._buffer.positions[l+0]=i,this._buffer.positions[l+1]=n,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[h+0]=s,this._buffer.uvs[h+1]=a,this._buffer.positions[l+3]=i,this._buffer.positions[l+4]=n,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[h+2]=s,this._buffer.uvs[h+3]=a,this.vertexCache[r]=d,d}buildBevelVert(e,t,r,i=1){let n=`${t.bevelI}:${r}`;if(n in this.vertexCache)return this.vertexCache[n];let[s,a]=t.boundary.vertexIndices[r],o,l,h,d;s!==a?(l=s,o=a,d=!1,h=e.continuous[l]&&e.continuous[o]):(o=s,l=(o-1+e.count)%e.count,d=e.concave[o]&&t.bevelI>0,h=e.continuous[o]||d);let p=Math.cos(t.angle),f=Math.sin(t.angle),m=r*2,y=o*2,b=l*2,x=t.boundary.vertices[m+0],v=t.boundary.vertices[m+1],g=(1-f)*this._bevelSize,_=(x-this._minX)/this._width,S=(v-this._minY)/this._height,T=e.normals[y+0],A=e.normals[y+1],M=e.normals[b+0],O=e.normals[b+1];if(d){let V=M-T,k=O-A;T=T+V*(1-i),A=A+k*(1-i);let G=Math.sqrt(T*T+A*A);T/=G,A/=G}let P=this._buffer.get(h?2:4),C=P*3,N=P*2,U={i:r,fi:o,topP:P+0,topN:P+0,bottomP:P+1,bottomN:P+1};return this._buffer.positions[C+0]=x,this._buffer.positions[C+1]=v,this._buffer.positions[C+2]=this._depth-g,this._buffer.normals[C+0]=T*p,this._buffer.normals[C+1]=A*p,this._buffer.normals[C+2]=f,this._buffer.uvs[N+0]=_,this._buffer.uvs[N+1]=S,this._buffer.positions[C+3]=x,this._buffer.positions[C+4]=v,this._buffer.positions[C+5]=g,this._buffer.normals[C+3]=T*p,this._buffer.normals[C+4]=A*p,this._buffer.normals[C+5]=-f,this._buffer.uvs[N+2]=S,this._buffer.uvs[N+3]=_,h||(P+=2,C+=6,N+=4,U.topP=P+0,U.bottomP=P+1,this._buffer.positions[C+0]=x,this._buffer.positions[C+1]=v,this._buffer.positions[C+2]=this._depth-g,this._buffer.normals[C+0]=M*p,this._buffer.normals[C+1]=O*p,this._buffer.normals[C+2]=f,this._buffer.uvs[N+0]=_,this._buffer.uvs[N+1]=S,this._buffer.positions[C+3]=x,this._buffer.positions[C+4]=v,this._buffer.positions[C+5]=g,this._buffer.normals[C+3]=M*p,this._buffer.normals[C+4]=O*p,this._buffer.normals[C+5]=-f,this._buffer.uvs[N+2]=S,this._buffer.uvs[N+3]=_),this.vertexCache[n]=U,U}},oo=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a,o,l;let h=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,subdivisions:40,roundness:0,extrudeDepth:0,surfaceMaxCount:100,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),d=Math.abs(h.width),p=Math.abs((i=h.height)!=null?i:h.width),f=Math.abs(h.depth!==void 0&&h.depth===0&&h.extrudeDepth>0?h.extrudeDepth:(n=h.depth)!=null?n:0),m=(s=e.shape)!=null?s:t==null?void 0:t.shape,y=(a=m==null?void 0:m.roundness)!=null?a:h.roundness;m!==void 0&&(m instanceof Ur?(m.width!==d||m.height!==p)&&m.applySize(d,p):m=new Ur(d,p).fromJSON(m),((o=e.parameters)==null?void 0:o.roundness)!==void 0&&((l=e.parameters)==null?void 0:l.roundness)>0&&m.update(!1));let b=m!=null?m:new Ur(d,p);return{parameters:Object.assign(h,{width:d,height:p,depth:f,extrudeDepth:f,roundness:y}),shape:b}}static build(e){let{extrudeDepth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:s,surfaceMaxCount:a}=e.parameters;e.shape.roundness=s;let o;return t<=0?o=new LR(e.shape,n,a):o=new $te(e.shape,t,r,n,i),Object.assign(o,{userData:tt(Le({},e),{type:"VectorGeometry"})})}},PR=Math.PI*2,ere=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1e3},e.parameters);return{shape:e.shape&&e.shape instanceof Ur?e.shape:new Ur,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs(s.depth!==void 0&&s.depth===0&&s.extrudeDepth>0?s.extrudeDepth:(n=s.depth)!=null?n:0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l,surfaceMaxCount:h}=e.parameters,d=e.shape,p=t*.5,f=r*.5,m=tre(d,p,f,n*Math.PI/180,i,s);d.isClosed=!0,d.update();let y=oo.create({shape:d,parameters:{subdivisions:m,surfaceMaxCount:h,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(y,{userData:tt(Le({},e),{type:"EllipseGeometry"})})}};function tre(e,t,r,i,n,s){if(i>=PR)return n>30||n%4==0?(ire(e,t,r,s),Math.round(n/4)):Z2(e,i,n,t,r,s);let a={x:0,y:r},o=i+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*r},h=Xte({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%h.length==0?rre(e,a.x,a.y,h,n,t,r,s):Z2(e,i,n,t,r,s)}function rre(e,t,r,i,n,s,a,o){let l=Math.round(n/i.length);e.addPoint(Fh(t,r));for(let h=0,d=i.length;h<d;h++){let p=i[h],f=e.points[h],m=Fh(p.x,p.y);f.controls[1].position.set(p.x1,p.y1),m.controls[0].position.set(p.x2,p.y2),e.addPoint(m)}return o>0?DR(e,s,a,o):e.addPoint(Fh(0,0)),l}function Z2(e,t,r,i,n,s){let a=-t/r;for(let o=0;o<=r;o++){let l=a*o,h=Math.sin(l)*i,d=Math.cos(l)*n;e.addPoint(Fh(h,d))}return t<PR?s>0?DR(e,i,n,s):e.addPoint(Fh(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&RR(e,i,n,s)),1}function ire(e,t,r,i=0,n=0,s=0){let a=.5522847498,o=t*a,l=r*a;e.addPoint(Vm(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(Vm(n,s+r,n-o,s+r,n+o,s+r)),e.addPoint(Vm(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(Vm(n,s-r,n+o,s-r,n-o,s-r)),i>0&&RR(e,t,r,i)}function Fh(e,t){return new zh(sr.generateUUID(),new q(e,t))}function Vm(e,t,r,i,n,s){let a=Fh(e,t);return a.controls[0].position.set(r,i),a.controls[1].position.set(n,s),a}function DR(e,t,r,i){NR(e,t,r,i).forEach(n=>e.addPoint(n))}function RR(e,t,r,i){let n=NR(e,t,r,i),s=new Ur;n.forEach(a=>s.addPoint(a)),s.isClosed=!0,e.shapeHoles.push(s)}function NR(e,t,r,i){let n=i*t/100,s=n*(Math.abs(r)/Math.abs(t)),a=new q(n/t,s/r),o=e.points.map(l=>{let h=l.clone();return h.uuid=sr.generateUUID(),h}).reverse();return o.forEach(l=>{l.position.multiply(a);let h=l.controls[0].position.clone().multiply(a),d=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(d),l.controls[1].position.copy(h)}),o}var nre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),a=Math.abs(s.width),o=Math.abs((i=s.height)!=null?i:a),l=Math.abs((n=s.depth)!=null?n:a),h=Math.abs(Math.min(a,l))/2;return{parameters:Object.assign(s,{width:a,height:o,depth:l,radius:h,segments:Math.round(s.segments),pathSegments:Math.round(s.pathSegments),cornerSegments:Math.round(s.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:s,segments:a,pathRadius:o,pathType:l,pathSegments:h,cornerRadius:d,cornerSegments:p}=e.parameters,f=new IR(!1,t,r,i,n,s,a,o,l,h,d,p);return Object.assign(f,{userData:tt(Le({},e),{type:"HelixGeometry"})})}},IR=class extends st{constructor(e,t,r,i,n,s,a,o,l,h,d,p){super();let f=e&&s===1;f&&(p=0),d>100&&(d=100);let m=()=>new L,y=new L,b=m(),x=m(),v=m(),g,_,S,T,A,M,O,P,C=m(),N=m(),U=m(),V=m(),k=m(),G=m(),Z=m(),W=m(),$=r-2*o+.001,ae=$/s,te=Math.ceil(a*s),H=te+1,X=$/te,J=-$/2,se=h+1,ge=2*Math.PI/h,Y=Math.PI/2/p,be=.01,fe=Math.min((1-d/100)*o,o-be),ee=o-fe,Q=0,ie=2,oe=p*ie+ie,me=se*oe/ie,pe=me+se*H,we=se*(H+oe),[Ae,F,B]=[3,3,2].map(Be=>Array(we*Be).fill(0)),de=[],Oe=n-o;function Ce(Be,at){let kt=Math.PI/2;M=at*X,P=2*Math.PI*(M%ae)/ae+kt,M+=J,O=Math.sin(P)*Oe,A=Math.cos(P)*Oe,e?Be.set(A,O,M):Be.set(A,M,O)}Ce(y,-1e-10),Ce(b,0),C.copy(y),Ce(y,1);let Re=y.distanceTo(b),ze=ee+fe,Ke=Re*te+2*ze,je=fe,Ye=Ke-ze;for(let Be=0;Be<=te;Be++){Ce(x,Be),W.subVectors(x,C).normalize(),C.copy(x),G.copy(x).setComponent(+e+1,0).normalize(),Z.crossVectors(W,G).normalize();let at=Be===0,kt=Be===te,vr=at?3*Math.PI/2:Y,Si=at?je:Ye,$t=at?se:pe,di=at?0:we-se,Fi=W.clone().multiplyScalar(at?-ee:ee).add(x),qs=W.clone().multiplyScalar(at?-1:1).normalize();for(let Ui=0;Ui<se;Ui++){let ys=Ui*ge;if(N.addVectors(y.copy(G).multiplyScalar(o*Math.cos(ys)),b.copy(Z).multiplyScalar(o*Math.sin(ys))),U.copy(N).normalize(),at||kt){f||(Q=di+Ui,[0,1,2].forEach(Cr=>{Ae[Q*3+Cr]=Fi.getComponent(Cr),F[Q*3+Cr]=qs.getComponent(Cr)}),B[Q*2]=+kt,B[Q*2+1]=Ui/h),b.copy(U).multiplyScalar(fe),v.addVectors(x,b);for(let Cr=0;Cr<p;Cr++){let ki=Cr*Y+vr;V.addVectors(y.copy(W).multiplyScalar(ee*Math.sin(ki)),b.copy(U).multiplyScalar(ee*Math.cos(ki))),k.copy(V).normalize(),b.addVectors(v,V),V.normalize(),Q=$t+Cr*se+Ui,[0,1,2].forEach(ht=>{Ae[Q*3+ht]=b.getComponent(ht),F[Q*3+ht]=k.getComponent(ht)});let Kr=+at+Math.sin(ki);B[Q*2]=(Si+ee*Kr)/Ke,B[Q*2+1]=Ui/h}}b.addVectors(x,N),Q=me+Be*se+Ui,[0,1,2].forEach(Cr=>{Ae[Q*3+Cr]=b.getComponent(Cr),F[Q*3+Cr]=U.getComponent(Cr)}),B[Q*2]=(ze+Be*Re)/Ke,B[Q*2+1]=Ui/h}}let re=H+2*p+ie,Ie=1,[Me,Ve]=f?[Ie,Ie+H-1]:[0,re-1];for(let Be=Me;Be<=Ve-1;Be++){let at=f&&Be===Ve-1;for(let kt=0;kt<se-1;kt++)g=Be*se+kt,_=g+1,S=(at?kt:g)+se,T=(at?kt+1:_)+se,Be===0?de.push(_,T,S):Be===re-2?de.push(g,_,S):de.push(g,_,S,_,T,S)}this.setIndex(de),this.setAttribute("position",new We(Ae,3)),this.setAttribute("normal",new We(F,3)),this.setAttribute("uv",new We(B,2))}},sre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new BR(t*.5,s,a):new oD(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:tt(Le({},e),{type:"IcosahedronGeometry"})})}},BR=class extends z_{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(n,s,a,e,t,r);this.type=a}static fromJSON(e){return new BR(e.radius,e.corner,e.cornerSides)}},are=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a;((i=(r=e.parameters)==null?void 0:r.points)!=null?i:[]).forEach(l=>{Array.isArray(l)&&(l.x=l[0],l.y=l[1])});let o=Object.assign({},(n=t==null?void 0:t.parameters)!=null?n:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs((s=o.height)!=null?s:o.width),depth:Math.abs((a=o.depth)!=null?a:o.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new ro;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new lD(n.extractPoints(i).shape,r);return s.rotateZ(Math.PI),Object.assign(s,{userData:tt(Le({},e),{type:"LatheGeometry"})})}},ra=new He,Yx=new Nt,jm=new L,mv=class extends Gn{constructor(){super();this.uuid=sr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Dr().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let s=0,a=n.vertexNormals.length;s<a;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return ra.makeRotationX(e),this.applyMatrix4(ra),this}rotateY(e){return ra.makeRotationY(e),this.applyMatrix4(ra),this}rotateZ(e){return ra.makeRotationZ(e),this.applyMatrix4(ra),this}translate(e,t,r){return ra.makeTranslation(e,t,r),this.applyMatrix4(ra),this}scale(e,t,r){return ra.makeScale(e,t,r),this.applyMatrix4(ra),this}lookAt(e){return Yx.lookAt(e),Yx.updateMatrix(),this.applyMatrix4(Yx.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,s=i.normal,a=i.color,o=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let p=0;p<n.count;p++)t.vertices.push(new L().fromBufferAttribute(n,p)),a!==void 0&&t.colors.push(new Ue().fromBufferAttribute(a,p));function h(p,f,m,y){let b=a===void 0?[]:[t.colors[p].clone(),t.colors[f].clone(),t.colors[m].clone()],x=s===void 0?[]:[new L().fromBufferAttribute(s,p),new L().fromBufferAttribute(s,f),new L().fromBufferAttribute(s,m)],v=new Bw(p,f,m,x,b,y);t.faces.push(v),o!==void 0&&t.faceVertexUvs[0].push([new q().fromBufferAttribute(o,p),new q().fromBufferAttribute(o,f),new q().fromBufferAttribute(o,m)]),l!==void 0&&t.faceVertexUvs[1].push([new q().fromBufferAttribute(l,p),new q().fromBufferAttribute(l,f),new q().fromBufferAttribute(l,m)])}let d=e.groups;if(d.length>0)for(let p=0;p<d.length;p++){let f=d[p],m=f.start,y=f.count;for(let b=m,x=m+y;b<x;b+=3)r!==void 0?h(r.getX(b),r.getX(b+1),r.getX(b+2),f.materialIndex):h(b,b+1,b+2,f.materialIndex)}else if(r!==void 0)for(let p=0;p<r.count;p+=3)h(r.getX(p),r.getX(p+1),r.getX(p+2));else for(let p=0;p<n.count;p+=3)h(p,p+1,p+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jm).negate(),this.translate(jm.x,jm.y,jm.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new He;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new L,t=new L;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new L;if(e){let r=new L,i=new L;for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=this.vertices[a.a],l=this.vertices[a.b],h=this.vertices[a.c];r.subVectors(h,l),i.subVectors(o,l),r.cross(i),t[a.a].add(r),t[a.b].add(r),t[a.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,s=i.vertexNormals.length;n<s;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new mv;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let a=0,o=this.faces.length;a<o;a++){let l=new L,h={a:new L,b:new L,c:new L};n.push(l),s.push(h)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=i.faceNormals[n],l=i.vertexNormals[n];o.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zi),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vs),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,h=this.colors,d=e.colors;t!==void 0&&(i=new Dr().getNormalMatrix(t));for(let p=0,f=a.length;p<f;p++){let m=a[p].clone();t!==void 0&&m.applyMatrix4(t),s.push(m)}for(let p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(let p=0,f=l.length;p<f;p++){let m=l[p],y,b,x=m.vertexNormals,v=m.vertexColors,g=new Bw(m.a+n,m.b+n,m.c+n);g.normal.copy(m.normal),i!==void 0&&g.normal.applyMatrix3(i).normalize();for(let _=0,S=x.length;_<S;_++)y=x[_].clone(),i!==void 0&&y.applyMatrix3(i).normalize(),g.vertexNormals.push(y);g.color.copy(m.color);for(let _=0,S=v.length;_<S;_++)b=v[_],g.vertexColors.push(b.clone());g.materialIndex=m.materialIndex+r,o.push(g)}for(let p=0,f=e.faceVertexUvs.length;p<f;p++){let m=e.faceVertexUvs[p];this.faceVertexUvs[p]===void 0&&(this.faceVertexUvs[p]=[]);for(let y=0,b=m.length;y<b;y++){let x=m[y],v=[];for(let g=0,_=x.length;g<_;g++)v.push(x[g].clone());this.faceVertexUvs[p].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let h=this.vertices[o],d=Math.round(h.x*n)+"_"+Math.round(h.y*n)+"_"+Math.round(h.z*n);t[d]===void 0?(t[d]=o,r.push(this.vertices[o]),i[o]=r.length-1):i[o]=i[t[d]]}let s=[];for(let o=0,l=this.faces.length;o<l;o++){let h=this.faces[o];h.a=i[h.a],h.b=i[h.b],h.c=i[h.c];let d=[h.a,h.b,h.c];for(let p=0;p<3;p++)if(d[p]===d[(p+1)%3]){s.push(o);break}}for(let o=s.length-1;o>=0;o--){let l=s[o];this.faces.splice(l,1);for(let h=0,d=this.faceVertexUvs.length;h<d;h++)this.faceVertexUvs[h].splice(l,1)}let a=this.vertices.length-r.length;return this.vertices=r,a}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new L(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function r(o,l){return o.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,a;i&&i.length===t&&(s=[]),n&&n.length===t&&(a=[]);for(let o=0;o<t;o++){let l=e[o]._id;s&&s.push(i[l]),a&&a.push(n[l])}s&&(this.faceVertexUvs[0]=s),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let m=this.parameters;for(let y in m)m[y]!==void 0&&(e[y]=m[y]);return e}let t=[];for(let m=0;m<this.vertices.length;m++){let y=this.vertices[m];t.push(y.x,y.y,y.z)}let r=[],i=[],n={},s=[],a={},o=[],l={};for(let m=0;m<this.faces.length;m++){let y=this.faces[m],b=!0,x=!1,v=this.faceVertexUvs[0][m]!==void 0,g=y.normal.length()>0,_=y.vertexNormals.length>0,S=y.color.r!==1||y.color.g!==1||y.color.b!==1,T=y.vertexColors.length>0,A=0;if(A=h(A,0,0),A=h(A,1,b),A=h(A,2,x),A=h(A,3,v),A=h(A,4,g),A=h(A,5,_),A=h(A,6,S),A=h(A,7,T),r.push(A),r.push(y.a,y.b,y.c),r.push(y.materialIndex),v){let M=this.faceVertexUvs[0][m];r.push(f(M[0]),f(M[1]),f(M[2]))}if(g&&r.push(d(y.normal)),_){let M=y.vertexNormals;r.push(d(M[0]),d(M[1]),d(M[2]))}if(S&&r.push(p(y.color)),T){let M=y.vertexColors;r.push(p(M[0]),p(M[1]),p(M[2]))}}function h(m,y,b){return b?m|1<<y:m&~(1<<y)}function d(m){let y=m.x.toString()+m.y.toString()+m.z.toString();return n[y]!==void 0||(n[y]=i.length/3,i.push(m.x,m.y,m.z)),n[y]}function p(m){let y=m.r.toString()+m.g.toString()+m.b.toString();return a[y]!==void 0||(a[y]=s.length,s.push(m.getHex())),a[y]}function f(m){let y=m.x.toString()+m.y.toString();return l[y]!==void 0||(l[y]=o.length/2,o.push(m.x,m.y)),l[y]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),o.length>0&&(e.data.uvs=[o]),e.data.faces=r,e}clone(){return new mv().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let p=0,f=t.length;p<f;p++)this.vertices.push(t[p].clone());let r=e.colors;for(let p=0,f=r.length;p<f;p++)this.colors.push(r[p].clone());let i=e.faces;for(let p=0,f=i.length;p<f;p++)this.faces.push(i[p].clone());for(let p=0,f=e.faceVertexUvs.length;p<f;p++){let m=e.faceVertexUvs[p];this.faceVertexUvs[p]===void 0&&(this.faceVertexUvs[p]=[]);for(let y=0,b=m.length;y<b;y++){let x=m[y],v=[];for(let g=0,_=x.length;g<_;g++){let S=x[g];v.push(S.clone())}this.faceVertexUvs[p].push(v)}}let n=e.morphTargets;for(let p=0,f=n.length;p<f;p++){let m={};if(m.name=n[p].name,n[p].vertices!==void 0){m.vertices=[];for(let y=0,b=n[p].vertices.length;y<b;y++)m.vertices.push(n[p].vertices[y].clone())}if(n[p].normals!==void 0){m.normals=[];for(let y=0,b=n[p].normals.length;y<b;y++)m.normals.push(n[p].normals[y].clone())}this.morphTargets.push(m)}let s=e.morphNormals;for(let p=0,f=s.length;p<f;p++){let m={};if(s[p].vertexNormals!==void 0){m.vertexNormals=[];for(let y=0,b=s[p].vertexNormals.length;y<b;y++){let x=s[p].vertexNormals[y],v={};v.a=x.a.clone(),v.b=x.b.clone(),v.c=x.c.clone(),m.vertexNormals.push(v)}}if(s[p].faceNormals!==void 0){m.faceNormals=[];for(let y=0,b=s[p].faceNormals.length;y<b;y++)m.faceNormals.push(s[p].faceNormals[y].clone())}this.morphNormals.push(m)}let a=e.skinWeights;for(let p=0,f=a.length;p<f;p++)this.skinWeights.push(a[p].clone());let o=e.skinIndices;for(let p=0,f=o.length;p<f;p++)this.skinIndices.push(o[p].clone());let l=e.lineDistances;for(let p=0,f=l.length;p<f;p++)this.lineDistances.push(l[p]);let h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());let d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new ore().fromGeometry(this),t=new st,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",new dt(r,3).copyVector3sArray(e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",new dt(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",new dt(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",new dt(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",new dt(i,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],s=e.morphTargets[i];for(let a=0,o=s.length;a<o;a++){let l=s[a],h=new We(l.data.length*3,3);h.name=l.name,n.push(h.copyVector3sArray(l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new We(e.skinIndices.length*4,4);t.setAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){let i=new We(e.skinWeights.length*4,4);t.setAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new st,r=e.geometry;if(e.isPoints||e.isLine){let i=new We(r.vertices.length*3,3),n=new We(r.colors.length*3,3);if(t.setAttribute("position",i.copyVector3sArray(r.vertices)),t.setAttribute("color",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let s=new We(r.lineDistances.length,1);t.setAttribute("lineDistance",s.copyArray(r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};mv.prototype.isGeometry=!0;var ore=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,s=e.faces;for(i=0;i<s.length;i++){let a=s[i];a.materialIndex!==n&&(n=a.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,a=e.morphTargets,o=a.length,l;if(o>0){l=[];for(let x=0;x<o;x++)l[x]={name:a[x].name,data:[]};this.morphTargets.position=l}let h=e.morphNormals,d=h.length,p;if(d>0){p=[];for(let x=0;x<d;x++)p[x]={name:h[x].name,data:[]};this.morphTargets.normal=p}let f=e.skinIndices,m=e.skinWeights,y=f.length===r.length,b=m.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let x=0;x<t.length;x++){let v=t[x];this.vertices.push(r[v.a],r[v.b],r[v.c]);let g=v.vertexNormals;if(g.length===3)this.normals.push(g[0],g[1],g[2]);else{let S=v.normal;this.normals.push(S,S,S)}let _=v.vertexColors;if(_.length===3)this.colors.push(_[0],_[1],_[2]);else{let S=v.color;this.colors.push(S,S,S)}if(n===!0){let S=i[0][x];S!==void 0?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",x),this.uvs.push(new q,new q,new q))}if(s===!0){let S=i[1][x];S!==void 0?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",x),this.uvs2.push(new q,new q,new q))}for(let S=0;S<o;S++){let T=a[S].vertices;l[S].data.push(T[v.a],T[v.b],T[v.c])}for(let S=0;S<d;S++){let T=h[S].vertexNormals[x];p[S].data.push(T.a,T.b,T.c)}y&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),b&&this.skinWeights.push(m[v.a],m[v.b],m[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},Bw=class{constructor(e,t,r,i,n,s=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new L,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new Ue,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},lre=["a","b","c"];function ure(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function Xx(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),s=i+"_"+n;return r.get(s)}function qx(e,t,r,i,n,s){let a=Math.min(e,t),o=Math.max(e,t),l=a+"_"+o,h;if(i.has(l))h=i.get(l);else{let d=r[a],p=r[o];h={a:d,b:p,newEdge:null,faces:[]},i.set(l,h)}h.faces.push(n),s[e].edges.push(h),s[t].edges.push(h)}function hre(e,t,r,i){let n,s,a;for(n=0,s=e.length;n<s;n++)r[n]={edges:[]};for(n=0,s=t.length;n<s;n++)a=t[n],qx(a.a,a.b,e,i,a,r),qx(a.b,a.c,e,i,a,r),qx(a.c,a.a,e,i,a,r)}function Wm(e,t,r,i,n){e.push(new Bw(t,r,i,void 0,void 0,n))}function Yu(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function Jm(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var cre=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof st?e=new mv().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new L,r,i,n,s,a,o=e.vertices,l=e.faces,h=e.faceVertexUvs[0],d=h!==void 0&&h.length>0,p=[],f=new Map;hre(o,l,p,f);let m=[],y,b,x,v,g,_,S;for(let be of Array.from(f.keys())){for(b=f.get(be),x=new L,g=3/8,_=1/8,S=b.faces.length,S!=2&&(g=.5,_=0,S!=1),x.addVectors(b.a,b.b).multiplyScalar(g),t.set(0,0,0),s=0;s<S;s++){for(v=b.faces[s],a=0;a<3&&(y=o[ure(v,lre[a])],!(y!==b.a&&y!==b.b));a++);y&&t.add(y)}t.multiplyScalar(_),x.add(t),b.newEdge=m.length,m.push(x)}let T,A,M,O,P,C,N,U=[];for(i=0,n=o.length;i<n;i++){for(C=o[i],P=p[i].edges,r=P.length,r==3?T=3/16:r>3&&(T=3/(8*r)),A=1-r*Number(T),M=T,r<=2&&(r==2?(A=3/4,M=1/8):r==1||r==0),N=C.clone().multiplyScalar(A),t.set(0,0,0),s=0;s<r;s++)O=P[s],y=O.a!==C?O.a:O.b,t.add(y);t.multiplyScalar(Number(M)),N.add(t),U.push(N)}let V=U.concat(m),k=U.length,G,Z,W,$=[],ae=[],te,H,X,J,se=new q,ge=new q,Y=new q;for(i=0,n=l.length;i<n;i++)v=l[i],G=Number(Xx(v.a,v.b,f).newEdge)+k,Z=Number(Xx(v.b,v.c,f).newEdge)+k,W=Number(Xx(v.c,v.a,f).newEdge)+k,Wm($,G,Z,W,v.materialIndex),Wm($,v.a,G,W,v.materialIndex),Wm($,v.b,Z,G,v.materialIndex),Wm($,v.c,W,Z,v.materialIndex),d&&(te=h[i],H=te[0],X=te[1],J=te[2],se.set(Yu(H.x,X.x),Yu(H.y,X.y)),ge.set(Yu(X.x,J.x),Yu(X.y,J.y)),Y.set(Yu(H.x,J.x),Yu(H.y,J.y)),Jm(ae,se,ge,Y),Jm(ae,H,se,Y),Jm(ae,X,ge,se),Jm(ae,J,Y,ge));e.vertices=V,e.faces=$,d&&(e.faceVertexUvs[0]=ae)}},ui=new L,dre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i;let n=(i=(r=e.geometry)!=null?r:t==null?void 0:t.geometry)!=null?i:new st().copy(new ol(100,100,100)),s;t===void 0?(n.computeBoundingBox(),n.boundingBox.getSize(ui),s={width:ui.x,height:ui.y,depth:ui.z,subdivisions:0}):s=t.parameters;let a=Le(Le({},s),e.parameters);return{parameters:{width:Math.abs(a.width),height:Math.abs(a.height),depth:Math.abs(a.depth),subdivisions:Math.abs(a.subdivisions)},geometry:n}}static build(e){var t;let{width:r,height:i,depth:n,subdivisions:s}=e.parameters,a=(t=e.geometry)!=null?t:new st().copy(new ol(100,100,100)),o=a.userData.parameters;o===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(ui)):ui.set(o.width,o.height,o.depth),(r!==ui.x||i!==ui.y||n!==ui.z)&&a.scale(ui.x===0?1:r/ui.x,ui.y===0?1:i/ui.y,ui.z===0?1:n/ui.z);let l=a.originalGeometry;return s>0?(l===void 0||(o==null?void 0:o.subdivisions)!==s)&&(l===void 0&&(l=a),a=new cre(s).modify(l).toBufferGeometry()):(l!==void 0&&(a=l),l=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()),l!==void 0&&Object.assign(a,{originalGeometry:l}),delete e.geometry,Object.assign(a,{userData:tt(Le({},e),{type:"NonParametricGeometry"})})}static loadFromUrl(e,t,r){new d_(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(ui);let s=100/ui.x;Object.assign(n.parameters,{width:100,height:ui.y*s,depth:ui.z*s}),t(this.build(n))})}},pre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Ur?e.shape:new Ur,parameters:Object.assign(a,{surfaceMaxCount:((i=a.surfaceMaxCount)!=null?i:a.cornerRadius>0)?1e3:100,width:Math.abs(a.width),height:Math.abs((n=a.height)!=null?n:a.width),depth:Math.abs(a.depth!==void 0&&a.depth===0&&a.extrudeDepth>0?a.extrudeDepth:(s=a.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o,surfaceMaxCount:l}=e.parameters,h=e.shape,d=t*.5,p=r*.5,f=0,m=0,y=2*Math.PI/i;for(let x=0;x<i;x++){let v=y*x,g=f+Math.sin(v)*d,_=m+Math.cos(v)*p;h.addPoint(h.createPoint(g,_))}h.isClosed=!0;for(let x=0,v=h.points.length;x<v;x++)h.points[x].roundness=n;h.roundness=n,h.update();let b=oo.create({shape:h,parameters:{surfaceMaxCount:l,roundness:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(b,{userData:tt(Le({},e),{type:"PolygonGeometry"})})}},fre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:s,openEnded:a,cornerRadius:o,cornerSegments:l}=e.parameters,h=new gre(t*.5,r,n,s,a,o,l);return h.scale(1,1,i/t),Object.assign(h,{userData:tt(Le({},e),{type:"PyramidGeometry"})})}};function fd(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function Qx(e,t,r,i,n,s){let a=t.clone().sub(e),o=r.clone().sub(e),l=a.angleTo(o);if(a.normalize(),o.normalize(),i===n){let h=a.add(o).normalize();s.copy(e).addScaledVector(h,i/Math.sin(l/2))}else{let h=a.angleTo(o);s.copy(e),s.addScaledVector(a,n/Math.sin(h)),s.addScaledVector(o,i/Math.sin(h))}}function mre(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var gre=class extends st{constructor(e=.5,t=1,r=4,i=1,n=!1,s=0,a=4){super();r=Math.floor(Math.max(3,r)),i=Math.floor(i),a=Math.floor(a);let o=[],l=[],h=[],d=[],p=0,f=t/2,m=Math.PI/r,y=e*Math.cos(Math.PI/r),b=2*Math.PI/r,x=(r-2)*Math.PI/r,v=Math.PI-x,g=new L(0,-f,0),_=new L(0,f,0),S=new q(e,-f),T=new q(y,-f),A=new q(0,_.y).sub(T),M=new q(0,_.y).sub(S),O=new q(A.y,-A.x).normalize(),P=new q(M.y,-M.x).normalize(),C=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-A.angle())/2)-1e-8;s=Math.min(s,C);let N;{let W=new L(O.x,O.y,0),$=new L(Math.cos(b)*W.x,W.y,Math.sin(b)*W.x);N=W.angleTo($)}let U=s/Math.tan((Math.PI-A.angle())/2),V=s/Math.tan((Math.PI-N)/2),k=new L;if(!n){l.push(g.x,g.y,g.z),h.push(0,-1,0),d.push(0,0);let W=p++,$=[],ae=S.clone(),te=U/Math.cos(Math.PI/r);ae.x-=te;for(let H=0;H<r;H++){let X=H/r*Math.PI*2+m,J=new q(Math.sin(X),Math.cos(X));fd(ae,J,k),l.push(k.x,k.y,k.z),h.push(0,-1,0),d.push(0,0),$.push(p++)}for(let H=0;H<$.length;H++)o.push($[H],W,$[(H+1)%$.length])}{let W=new L,$=new L,ae=new L,te=new L,H=new L,X=new L;for(let J=0;J<r;J++){let se=J/r*Math.PI*2+m,ge=(J+.5)/r*Math.PI*2+m,Y=(J+1)/r*Math.PI*2+m,be=new q(Math.sin(se),Math.cos(se)),fe=new q(Math.sin(ge),Math.cos(ge)),ee=new q(Math.sin(Y),Math.cos(Y));fd(S,be,$),fd(S,ee,ae),fd(O,fe,W),Qx(_,$,ae,V,V,te),l.push(te.x,te.y,te.z),Qx($,_,ae,V,U,H),l.push(H.x,H.y,H.z),Qx(ae,$,_,U,V,X),l.push(X.x,X.y,X.z),h.push(W.x,W.y,W.z),h.push(W.x,W.y,W.z),h.push(W.x,W.y,W.z),d.push(0,0),d.push(0,0),d.push(0,0);let Q=p++,ie=p++,oe=p++;if(o.push(Q,ie,oe),s>0){{let we=$.clone().add(ae).multiplyScalar(.5),Ae=_.clone().sub(we).normalize(),F=g.clone().sub(we).normalize().add(Ae).normalize().multiplyScalar(-1),B=X.clone().sub(H);G(we,B,F,A.angle())}let me,pe;{let we=new L;fd(P,ee,we);let Ae=X.clone().add(te).multiplyScalar(.5);Ae=mre(Ae,ae,_);let F=X.clone().sub(te);[me,pe]=G(Ae,F,we,N,te.y)}{let we=me,Ae=we.clone().setY(0).normalize(),F=new L(0,-1,0),B=Ae.clone().cross(F);Z(we,Ae,F,B)}{let we=A.angle(),Ae=Math.PI-we,F=_.clone();F.y-=s/Math.sin(we-Math.PI/2);let B=new L,de=[];for(let Ce=0;Ce<a;Ce++){let Re=[],ze=Math.PI/2-Ae*Ce/a,Ke=Math.cos(ze),je=Math.sin(ze),Ye=ge;for(let re=0;re<=Ce;re++){let Ie=Math.cos(Ye),Me=Math.sin(Ye);W.x=Ke*Me,W.y=je,W.z=Ke*Ie,B.copy(F).addScaledVector(W,s),l.push(B.x,B.y,B.z),h.push(W.x,W.y,W.z),d.push(0,0),Re.push(p++),Ye+=Math.PI*2/Ce/r}de.push(Re)}pe.reverse(),de.push(pe);let Oe=de.length-1;for(let Ce=0;Ce<Oe;Ce++){let Re=de[Ce],ze=de[Ce+1],Ke=Re.length-1;o.push(ze[1],Re[0],ze[0]);for(let je=1;je<=Ke;je++)o.push(Re[je],Re[je-1],ze[je]),o.push(ze[je+1],Re[je],ze[je])}}}}}this.setIndex(o),this.setAttribute("position",new We(l,3)),this.setAttribute("normal",new We(h,3)),this.setAttribute("uv",new We(d,2));function G(W,$,ae,te,H){let X=-te/2,J=(Math.PI-te)/2,se=$.clone().normalize().cross(ae);W.addScaledVector(ae,-s/Math.sin(J));let ge=new L,Y=new L,be=1,fe=p,ee=[];for(let Q=0;Q<=a;Q++){let ie=X+Q/a*te;Y.set(0,0,0),Y.addScaledVector(se,Math.sin(ie)),Y.addScaledVector(ae,Math.cos(ie));for(let oe=0;oe<=be;oe++){let me=oe/be-.5;if(ge.copy(W),ge.addScaledVector($,me),ge.addScaledVector(Y,s),H!=null){let pe=Math.max(0,ge.y-H);ge.addScaledVector($,-pe/$.y)}l.push(ge.x,ge.y,ge.z),h.push(Y.x,Y.y,Y.z),d.push(0,0),oe===0&&ee.push(p),p++}}for(let Q=0;Q<a;Q++)for(let ie=0;ie<be;ie++){let oe=fe+ie+(be+1)*Q,me=oe+(be+1),pe=me+1,we=oe+1;o.push(oe,me,we),o.push(me,pe,we)}return[W.clone().addScaledVector($,.5),ee]}function Z(W,$,ae,te){let H=Math.PI/2,X=M.angle()-H,J=[],se=new L,ge=new L;for(let be=0;be<=a;be++){let fe=[],ee=be/a;for(let Q=0;Q<=be;Q++){let ie=((be?Q/be:0)-.5)*v,oe=Math.cos(ie),me=Math.sin(ie),pe=Math.atan(Math.tan(X)*oe),we=(H+pe)*ee,Ae=Math.cos(we),F=Math.sin(we);se.set(0,0,0),se.addScaledVector($,F*oe),se.addScaledVector(ae,Ae),se.addScaledVector(te,F*me),ge.copy(W).addScaledVector(se,s),l.push(ge.x,ge.y,ge.z),h.push(se.x,se.y,se.z),d.push(0,0),fe.push(p++)}J.push(fe)}let Y=J.length-1;for(let be=0;be<Y;be++){let fe=J[be],ee=J[be+1],Q=fe.length-1;o.push(fe[0],ee[1],ee[0]);for(let ie=1;ie<=Q;ie++)o.push(fe[ie-1],fe[ie],ee[ie]),o.push(fe[ie],ee[ie+1],ee[ie])}}}},zR=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a;let o=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),l=Object.assign((i=t==null?void 0:t.ui)!=null?i:{enabledIndieCorners:!1},e.ui),h=o.cornerRadius.reduce((d,p)=>d+p,0);return{shape:e.shape&&e.shape instanceof Ur?e.shape:new Ur,parameters:Object.assign(o,{surfaceMaxCount:((n=o.surfaceMaxCount)!=null?n:h>0)?1e3:100,width:Math.abs(o.width),height:Math.abs((s=o.height)!=null?s:o.width),depth:Math.abs(o.depth!==void 0&&o.depth===0&&o.extrudeDepth>0?o.extrudeDepth:(a=o.depth)!=null?a:0)}),ui:l}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l,surfaceMaxCount:h}=e.parameters,d={x:r*.5,y:i*.5},p={x:-d.x,y:-d.y},f={x:d.x,y:d.y};function m(T,A,M){return A>r&&M>i?Math.min(T*r/A,T*i/M):A>r?T*r/A:M>i?T*i/M:T}let y=[];y[0]=n[0]===0?0:m(n[0],n[0]+n[3],n[0]+n[1]),y[1]=n[1]===0?0:m(n[1],n[1]+n[2],n[1]+n[0]),y[2]=n[2]===0?0:m(n[2],n[2]+n[1],n[2]+n[3]),y[3]=n[3]===0?0:m(n[3],n[3]+n[0],n[3]+n[2]);let b=p.x,x=f.x,v=f.y,g=p.y;t.addPoint(t.createPoint(b,v)),t.addPoint(t.createPoint(x,v)),t.addPoint(t.createPoint(x,g)),t.addPoint(t.createPoint(b,g)),t.isClosed=!0;let _=!0;for(let T=0,A=t.points.length;T<A;T++)t.points[T].roundness=y[T],T>0&&y[T]!==y[T-1]&&(_=!1);_&&(t.roundness=y[0]),t.useCubicForRoundedCorners=s!==1,t.update();let S=oo.create({shape:t,parameters:{surfaceMaxCount:h,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(S,{userData:tt(Le({},e),{type:"RectangleGeometry"})})}},vre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:s=64,phiStart:a,phiLength:o,thetaStart:l,thetaLength:h}=e.parameters,d=new o_(.5*t,n,s,a,o,l,h);return d.scale(1,r/t,i/t),Object.assign(d,{userData:tt(Le({},e),{type:"SphereGeometry"})})}},yre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i;let n=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,s=new Vv(t,r,i,n);return s.scale(1,1,1),Object.assign(s,{userData:tt(Le({},e),{type:"PlaneGeometry"})})}},xre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Ur?e.shape:new Ur,parameters:Object.assign(a,{surfaceMaxCount:((i=a.surfaceMaxCount)!=null?i:a.cornerRadius>0)?1e3:100,width:Math.abs(a.width),height:Math.abs((n=a.height)!=null?n:a.width),depth:Math.abs(a.depth!==void 0&&a.depth===0&&a.extrudeDepth>0?a.extrudeDepth:(s=a.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:s,angle:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h,surfaceMaxCount:d}=e.parameters,p=e.shape,f=t*.5,m=r*.5,y=0,b=0,x=a*Math.PI/360/n,v=Math.PI/2*3*-1,g=f*i/100,_=m*i/100;if(n==3&&i==50){x=2*Math.PI/n;for(let T=0;T<n;T++){let A=x*T,M=y+Math.sin(A)*f,O=b+Math.cos(A)*m;p.addPoint(p.createPoint(M,O))}}else for(let T=0;T<n;T++){let A=y+Math.cos(v)*f,M=b+Math.sin(v)*m;p.addPoint(p.createPoint(A,M)),v+=x,A=y+Math.cos(v)*g,M=b+Math.sin(v)*_,p.addPoint(p.createPoint(A,M)),v+=x}p.isClosed=!0;for(let T=0,A=p.points.length;T<A;T++)p.points[T].roundness=s;p.roundness=s,p.update();let S=oo.create({shape:p,parameters:{surfaceMaxCount:d,roundness:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h}});return Object.assign(S,{userData:tt(Le({},e),{type:"StarGeometry"})})}},FR=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new Vv(t,r);return Object.assign(i,{userData:tt(Le({},e),{type:"TextFrameGeometry"})})}},wre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),a=Math.abs(s.width),o=Math.abs((i=s.height)!=null?i:s.width),l=Math.abs((n=s.depth)!=null?n:s.width*.25);return{parameters:Object.assign(s,{width:a,height:o,depth:l})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:s,arc:a,cornerRadius:o,cornerSegments:l}=e.parameters,h=bre(t,r,i,t*.5,a,s,0,0,n,o,l);return h.scale(1,r/t,1),Object.assign(h,{userData:tt(Le({},e),{type:"TorusGeometry"})})}};function bre(e,t,r,i,n,s,a,o,l,h,d){return[t,r]=[r,t],a=t/2,n/=2*Math.PI,n==1&&(h=0),new IR(!0,e,t,r,i,n,s,a,o,l,h,d)}var _re=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs((i=a.height)!=null?i:a.width),depth:Math.abs((n=a.depth)!=null?n:a.width),tube:(s=a.tube)!=null?s:a.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:s,q:a}=e.parameters,o=t*.5;o!==r&&(o-=r);let l=new uD(o,r,i,n,s,a);return Object.assign(l,{userData:tt(Le({},e),{type:"TorusKnotGeometry"})})}},Sre=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Ur?e.shape:new Ur,parameters:Object.assign(a,{surfaceMaxCount:((i=a.surfaceMaxCount)!=null?i:a.cornerRadius>0)?1e3:100,width:Math.abs(a.width),height:Math.abs((n=a.height)!=null?n:a.width*(a.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(a.depth!==void 0&&a.depth===0&&a.extrudeDepth>0?a.extrudeDepth:(s=a.depth)!=null?s:0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,isRect:o,surfaceMaxCount:l}=e.parameters,h=e.shape,d=t*.5,p=r*.5;o?(h.addPoint(h.createPoint(-d,p)),h.addPoint(h.createPoint(d,-p)),h.addPoint(h.createPoint(-d,-p))):(h.addPoint(h.createPoint(0,p)),h.addPoint(h.createPoint(d,-p)),h.addPoint(h.createPoint(-d,-p))),h.isClosed=!0;for(let m=0,y=h.points.length;m<y;m++)h.points[m].roundness=i;h.roundness=i,h.update();let f=oo.create({shape:h,parameters:{surfaceMaxCount:l,roundness:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a}});return Object.assign(f,{userData:tt(Le({},e),{type:"TriangleGeometry"})})}},UR={};TV(UR,{addBarycentricAttribute:()=>Ere,fixUvs:()=>Cre,loadFromUrl:()=>Tre,resizeGeometry:()=>Mre,roundShapePolygon:()=>Are});var $2=function(e,t){let r=t.x-e.x,i=t.y-e.y,n=Math.sqrt(r*r+i*i),s=r/n,a=i/n,o=Math.atan2(a,s);return{x:r,y:i,len:n,nx:s,ny:a,ang:o}},Are=(e,t,r)=>{let i,n,s,a,o,l,h,d,p,f,m,y,b,x,v=t.length;for(a=t[v-2],e.curves=[],i=1;i<v-1;i++){o=t[i%v],l=t[(i+1)%v];let g=$2(o,a),_=$2(o,l);h=g.nx*_.ny-g.ny*_.nx,d=g.nx*_.nx-g.ny*-_.ny,m=Math.asin(h),p=1,f=!1,d<0?m<0?m=Math.PI+m:(m=Math.PI-m,p=-1,f=!0):m>0&&(p=-1,f=!0),y=m/2,x=Math.abs(Math.cos(y)*r/Math.sin(y)),x>Math.min(g.len/2,_.len/2)?(x=Math.min(g.len/2,_.len/2),b=Math.abs(x*Math.sin(y)/Math.cos(y))):b=r,n=o.x+_.nx*x,s=o.y+_.ny*x,n+=-_.ny*b*p,s+=_.nx*b*p,e.absarc(n,s,b,g.ang+Math.PI/2*p,_.ang-Math.PI/2*p,f),a=o,o=l}e.closePath()},Mre=(e,{width:t,height:r,depth:i})=>{t=Math.abs(t),r=Math.abs(r),i=Math.abs(i);let n=e.userData.parameters,s,a,o;t===0?(t=n.width,s=1):s=t/n.width,r===0?(r=n.height,a=1):a=r/n.height,i===0?(i=n.depth,o=1):o=i/n.depth,e.scale(s,a,o),n.width=t,n.height=r,n.depth=i},Ere=(e,t)=>{let r=[new L(1,0,0),new L(0,1,0),new L(0,0,1)],i=e.attributes.position,n=new Float32Array(i.count*3);for(let s=0,a=i.count;s<a;s++)r[s%3].toArray(n,s*3);e.setAttribute(t,new We(n,3))},Tre=e=>new Promise(t=>{new d_().load(e,r=>t(r))}),Cre=(e,t,r)=>{let i=e.getAttribute("uv");if(i)for(let n=0;n<i.count;n++){let s=i.getX(n),a=i.getY(n);i.setXY(n,(s+t/2)/t,1-(a-r/2)/r*-1)}},kR=new Promise(e=>{}),ot;kR.then(e=>{ot=e});var Ns=class{static build(e,t,r,i,n){let s,a,o;return e===void 0?(s=Ns.allocate(n,r),ot.set_destination_refinement_level(s,0),a=Ns.buildLevel(s,!0,i)):e.positionWASM!==void 0?(t&&t!==0&&(ot.free_bvh(t),ot.free_subdivision_surface(t)),s=Ns.allocate(n,void 0,e),ot.set_destination_refinement_level(s,0),a=Ns.buildLevel(s,!0,i)):s=t,e!==void 0&&e.subdivisions!==void 0&&(ot.set_destination_refinement_level(s,e.subdivisions),e.subdivisions>0?o=Ns.buildLevel(s,!1,i):o=null),{subdivPointer:s,originalGeometry:a,subdividedGeometry:o}}static allocate(e,t,r){var i;let n,s,a,o=[],l=[];if(r)r.positionWASM.length>0?(n=r.positionWASM,s=r.indexWASM,a=r.verticesPerFaceWASM):(n=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),s=new Uint32Array([0,1,2,3]),a=new Uint8Array([4]));else{t.deleteAttribute("normal"),t.deleteAttribute("uv");let T=hte.mergeVertices(t);n=T.attributes.position.array;let A=T.getIndex().array,M=A.length;switch(t.userData.type==="TorusGeometry"&&(t==null?void 0:t.userData.parameters.arc)===Math.PI*2&&(t.userData.type="ClosedTorusGeometry"),t.userData.type){case"ClosedTorusGeometry":case"PlaneGeometry":case"TorusKnotGeometry":case"CubeGeometry":s=new Uint32Array(M/3*2),a=new Uint8Array(M/6).fill(4);for(let k=0,G=0;k<M;k+=6)s[G++]=A[k],s[G++]=A[k+1],s[G++]=A[k+4],s[G++]=A[k+5];break;case"TorusGeometry":case"SphereGeometry":case"HelixGeometry":case"CylinderGeometry":case"ConeGeometry":let O,P,C;if(t.userData.type==="SphereGeometry")P=t.parameters.heightSegments,O=t.parameters.widthSegments,t.parameters.thetaLength!==Math.PI&&(C=!0);else if(t.userData.type==="CylinderGeometry")P=t.parameters.heightSegments+2,O=t.parameters.radialSegments;else if(t.userData.type==="ConeGeometry")P=t.parameters.heightSegments+1,O=t.parameters.radialSegments;else if(t.userData.type==="TorusGeometry"){let k=t.userData.parameters;P=Math.ceil(k.tubularSegments*k.arc/(2*Math.PI))+2,O=k.radialSegments}else{let{pathSegments:k,segments:G,revolutions:Z}=t.userData.parameters;P=Math.ceil(G*Z)+2,O=k}C?(s=new Uint32Array(1*O*3+(P-1)*O*4),a=new Uint8Array(1*O+(P-1)*O)):(s=new Uint32Array(2*O*3+(P-2)*O*4),a=new Uint8Array(2*O+(P-2)*O));let N=0,U=0,V=0;if(t.userData.type==="SphereGeometry"||t.userData.type==="HelixGeometry"||t.userData.type==="TorusGeometry"){for(;U<3*O;)s[U++]=A[N++],s[U++]=A[N++],s[U++]=A[N++],a[V++]=3;let k=C?s.length:3*O+4*(P-2)*O;for(;U<k;N+=6)s[U++]=A[N],s[U++]=A[N+1],s[U++]=A[N+4],s[U++]=A[N+5],a[V++]=4}else for(;U<4*(P-2)*O;N+=6)s[U++]=A[N],s[U++]=A[N+1],s[U++]=A[N+4],s[U++]=A[N+5],a[V++]=4;for(;U<s.length;)s[U++]=A[N++],s[U++]=A[N++],s[U++]=A[N++],a[V++]=3;break;default:s=A,a=new Uint8Array(M/3).fill(3);break}}let h=n.length,d=s.length,p=a.length,f=n.length+o.length+l.length,m=s.length+a.length,y=f*Float32Array.BYTES_PER_ELEMENT+m*Uint32Array.BYTES_PER_ELEMENT,b=f*Float32Array.BYTES_PER_ELEMENT,x=ot._malloc(y),v=new Float32Array(ot.HEAPF32.buffer,x,f),g=new Uint32Array(ot.HEAPU32.buffer,x+b,m);v.set(n,0),v.set(o,n.length),v.set(l,n.length+o.length),g.set(s,0),g.set(a,s.length);let _;(i=r==null?void 0:r.scaleBaked)!=null&&i.some(T=>T!==1)&&(_=new He().makeScale(...r.scaleBaked)),e&&(_?_.premultiply(e):_=e);let S=_?ot.alloc_subdivision_surface2(x,h,x+b,d,x+b+s.length*Uint32Array.BYTES_PER_ELEMENT,p,_.elements):ot.alloc_subdivision_surface(x,h,x+b,d,x+b+s.length*Uint32Array.BYTES_PER_ELEMENT,p);return ot._free(x),S}static buildLevel(e,t,r,i,n){let s=n?ot.get_mesh_data2(e,t?ot.Level.CONTROL:ot.Level.REFINED,r!=null?r:!t,n.elements):ot.get_mesh_data(e,t?ot.Level.CONTROL:ot.Level.REFINED,r!=null?r:!t),a=8,o=ot.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(4,4+4),h=0,d=ot.HEAPU32[o[h]>>2],p=ot.HEAPF32.subarray(d>>2,(d>>2)+l[h]);h++;let f=ot.HEAPU32[o[h]>>2],m=ot.HEAPF32.subarray(f>>2,(f>>2)+l[h]);h++;let y=ot.HEAPU32[o[h]>>2],b=ot.HEAPU32.subarray(y>>2,(y>>2)+l[h]);h++;let x=ot.HEAPU32[o[h]>>2],v=ot.HEAPU32.subarray(x>>2,(x>>2)+l[h]);if(h++,i===void 0){let g=new st;if(g.setIndex(new jd(v,1)),g.setAttribute("position",new We(p,3)),g.setAttribute("normal",new We(m,3)),t){g.setAttribute("faceMap",new jd(b,1));let _=new Float32Array(m.length/3*4).fill(0);g.setAttribute("color",new dt(_,4))}return ot.free_mesh_data(s),g.userData.type="SubdivGeometry",g}i.getAttribute("position").copyArray(p),i.getAttribute("normal").copyArray(m),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,ot.free_mesh_data(s)}static buildControlCageWireframe(e,t,r){let i=ot.get_wireframe_data_for_base_level(e),n=4,s=ot.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(2,2+2),o=0,l=ot.HEAPU32[s[o]>>2],h=ot.HEAPF32.subarray(l>>2,(l>>2)+a[o]);o++;let d=ot.HEAPU32[s[o]>>2],p=ot.HEAPU32.subarray(d>>2,(d>>2)+a[o]);if(t===void 0){let f=new st;f.setAttribute("position",new We(h,3));let m=new Float32Array(h.length);for(let y=0,b=h.length;y<b;)m[y++]=r.r,m[y++]=r.g,m[y++]=r.b;return f.setAttribute("color",new dt(m,3)),f.setIndex(new jd(p,1)),ot.free_wireframe_data_for_base_level(i),f}t.getAttribute("position").copyArray(h),t.attributes.position.needsUpdate=!0,ot.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){t||ot.set_destination_refinement_level(e,1);let i=r?ot.get_topological_data2(e,t?ot.Level.CONTROL:ot.Level.REFINED,r.elements):ot.get_topological_data(e,t?ot.Level.CONTROL:ot.Level.REFINED),n=6,s=ot.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(3,3+3),o=0,l=ot.HEAPU32[s[o]>>2],h=new Float32Array(ot.HEAPF32.subarray(l>>2,(l>>2)+a[o]));o++;let d=ot.HEAPU32[s[o]>>2],p=new Uint32Array(ot.HEAPU32.subarray(d>>2,(d>>2)+a[o]));o++;let f=ot.HEAPU32[s[o]>>2],m=new Uint8Array(ot.HEAPU32.subarray(f>>2,(f>>2)+a[o]));return ot.free_topological_data(i),{positions:h,indices:p,verticesPerFace:m}}},HR={ConeGeometry:Ste,CubeGeometry:Ate,CylinderGeometry:_te,DodecahedronGeometry:Ete,EllipseGeometry:ere,HelixGeometry:nre,IcosahedronGeometry:sre,LatheGeometry:are,NonParametricGeometry:dre,PolygonGeometry:pre,PyramidGeometry:fre,RectangleGeometry:zR,SphereGeometry:vre,PlaneGeometry:yre,StarGeometry:xre,TextFrameGeometry:FR,TorusGeometry:wre,TorusKnotGeometry:_re,TriangleGeometry:Sre,VectorGeometry:oo},zw=e=>HR[e.type].create(e),Ea=class extends Ue{constructor(e,t,r,i){super(e,t,r);this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}};function Xi(e,t){let r;if(typeof e=="string"){let i=t==null?void 0:t.getColor(e);i?r=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),r=new Ea(0,0,0,0))}else return"a"in e?new Ea(e.r,e.g,e.b,e.a):new Ea(e.r,e.g,e.b,1);return r}var Kx=e=>"isEntity"in e,GR=e=>"isAbstractMesh"in e,Kp=e=>"objectHelper"in e;function VR(e,t){var r;let i=!1;t.position&&(e.position.fromArray(t.position),i=!0),t.rotation&&(e.rotation.fromArray(t.rotation),i=!0),t.scale&&(i=!0,e.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&"hiddenMatrix"in e&&(i=!0,e.hiddenMatrix.fromArray((r=t.hiddenMatrix)!=null?r:Kh.identity)),i&&e.updateMatrix(),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&e.updateWorldMatrix(!1,!0),e.objectType==="CombinedCamera"&&(t.isUpVectorFlipped!==void 0&&(e.isUpVectorFlipped=t.isUpVectorFlipped),e.updateUp())}function Lre(e,t){VR(e,t),t.name!==void 0&&(e.name=t.name),t.visible!==void 0&&(e.isEntity?e.visibility=t.visible:e.visible=t.visible)}function Ore(e,t,r){Lre(e,t),t.color!==void 0&&(e.color=Xi(t.color,r)),t.intensity!==void 0&&(e.intensity=t.intensity),t.shadows!==void 0&&!(e instanceof tv)&&(e.castShadow=t.shadows),e.shadow&&!(e instanceof tv)&&t.depth!==void 0&&(e.shadow.camera.far=t.depth,e.shadow.needsUpdate=!0),t.helper!==void 0&&Kp(e)&&(e.enableHelper=t.helper,e.gizmos.shadowmap.visible=t.helper)}function Pre(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var Xu=new zi,Ti=new L,nt=new L,ti=new He;function Dre(e,t,r=0,i=t.count){let n=1/0,s=1/0,a=1/0,o=-1/0,l=-1/0,h=-1/0;for(let d=r;d<i;d++){let p=t.getX(d),f=t.getY(d),m=t.getZ(d);p<n&&(n=p),f<s&&(s=f),m<a&&(a=m),p>o&&(o=p),f>l&&(l=f),m>h&&(h=m)}return e.min.set(n,s,a),e.max.set(o,l,h),e}var eL=(e,t,r,i)=>{var n;if(GR(e)){let s=e.geometry.userData.parameters,a=e.geometry.getAttribute("position");e.geometry.userData.type==="SubdivGeometry"?Ti.copy(e.originalGeometry.boundingSphere.center):(Dre(Xu,a,e.geometry.drawRange.start,e.geometry.drawRange.count<1/0?e.geometry.drawRange.count:a.count),Xu.getCenter(Ti)),e.forceComputeSize?Xu.getSize(nt).multiplyScalar(.5):nt.set(s.width,s.height,(n=s.depth)!=null?n:0).multiplyScalar(.5)}else if(Kp(e)&&i===!0){let s=e.geometryHelper.getAttribute("position");Xu.setFromArray(s.array),Xu.getCenter(Ti),Xu.getSize(nt).multiplyScalar(.5)}else Ti.setScalar(0),nt.setScalar(0);ti.copy(t).multiply(e.matrixWorld),nt.x===0&&nt.y===0&&nt.z===0?r.push(new L(Ti.x,Ti.y,Ti.z).applyMatrix4(ti)):r.push(new L(-nt.x,nt.y,nt.z).add(Ti).applyMatrix4(ti),new L(-nt.x,-nt.y,nt.z).add(Ti).applyMatrix4(ti),new L(nt.x,-nt.y,nt.z).add(Ti).applyMatrix4(ti),new L(nt.x,nt.y,nt.z).add(Ti).applyMatrix4(ti),new L(-nt.x,nt.y,-nt.z).add(Ti).applyMatrix4(ti),new L(-nt.x,-nt.y,-nt.z).add(Ti).applyMatrix4(ti),new L(nt.x,-nt.y,-nt.z).add(Ti).applyMatrix4(ti),new L(nt.x,nt.y,-nt.z).add(Ti).applyMatrix4(ti))},tL=class extends zi{constructor(){super(...arguments);this.matrix=new He,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new He().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>eL(n,t,i,e.enableHelper===!0)):eL(e,t,i,e.enableHelper===!0),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(ti.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(nt).multiplyScalar(.5),this.getCenter(Ti),ti.copy(this.matrix).setPosition(Ti),this.vertices=[new L(-nt.x,nt.y,nt.z).applyMatrix4(ti),new L(-nt.x,-nt.y,nt.z).applyMatrix4(ti),new L(nt.x,-nt.y,nt.z).applyMatrix4(ti),new L(nt.x,nt.y,nt.z).applyMatrix4(ti),new L(-nt.x,nt.y,-nt.z).applyMatrix4(ti),new L(-nt.x,-nt.y,-nt.z).applyMatrix4(ti),new L(nt.x,-nt.y,-nt.z).applyMatrix4(ti),new L(nt.x,nt.y,-nt.z).applyMatrix4(ti)]}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=[new Rn(this.vertices[0],this.vertices[3]),new Rn(this.vertices[1],this.vertices[2]),new Rn(this.vertices[5],this.vertices[6]),new Rn(this.vertices[4],this.vertices[7]),new Rn(this.vertices[0],this.vertices[1]),new Rn(this.vertices[3],this.vertices[2]),new Rn(this.vertices[7],this.vertices[6]),new Rn(this.vertices[4],this.vertices[5]),new Rn(this.vertices[0],this.vertices[4]),new Rn(this.vertices[1],this.vertices[5]),new Rn(this.vertices[2],this.vertices[6]),new Rn(this.vertices[3],this.vertices[7])],this.centerEdges=this.edges.map(e=>e.getCenter(new L))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=[new L().copy(this.vertices[0]).sub(this.vertices[2]).multiplyScalar(.5).add(this.vertices[2]),new L().copy(this.vertices[7]).sub(this.vertices[5]).multiplyScalar(.5).add(this.vertices[5]),new L().copy(this.vertices[4]).sub(this.vertices[1]).multiplyScalar(.5).add(this.vertices[1]),new L().copy(this.vertices[3]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6]),new L().copy(this.vertices[4]).sub(this.vertices[3]).multiplyScalar(.5).add(this.vertices[3]),new L().copy(this.vertices[1]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6])]}};function Rre(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let d=1-i;return r.w=d*e.w+i*t.w,r.x=d*e.x+i*t.x,r.y=d*e.y+i*t.y,r.z=d*e.z+i*t.z,r.normalize(),r}let a=Math.sqrt(s),o=Math.atan2(a,n),l=Math.sin((1-i)*o)/a,h=Math.sin(i*o)/a;return r.w=e.w*l+t.w*h,r.x=e.x*l+t.x*h,r.y=e.y*l+t.y*h,r.z=e.z*l+t.z*h,r}var rL=class{constructor(e){e=e!=null?e:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Ft=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=sr.generateUUID(),this.type=e,this.name="",this.userData={}}analyze(e,t){t=t!=null?t:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r!=null?r:{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r!=null?r:{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t!=null?t:this.getType(e,t);let i=e.getNodeData(r!=null?r:this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,s){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getJSONNode(e){if((e==null?void 0:e.materials)&&(e==null?void 0:e.materials[this.uuid])!==void 0)return e.materials[this.uuid]}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof Ft&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}copy(e){return this.name=e.name,e.type&&(this.type=e.type),e.frameId&&(this.frameId=e.frameId),e.hashProperties&&(this.hashProperties=e.hashProperties.map(t=>t)),this.userData=JSON.parse(JSON.stringify(e.userData)),this.shortcuts=JSON.parse(JSON.stringify(e.shortcuts)),this}clone(){return new this.constructor().copy(this)}createJSONNode(e){let t=e===void 0||typeof e=="string";if(typeof this.type!="string")throw new Error("Node does not allow serialization.");let r={};return r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),!t&&e&&(e.nodes[this.uuid]=r),r}toJSON(e){var t;return(t=this.getJSONNode(e))!=null?t:this.createJSONNode(e)}fromJSON(e,t){return this.uuid=e.uuid,this.type=e.type,e.name&&(this.name=e.name),e.userData&&(this.userData=e.userData),this}},Nre=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},vn=new Nre,_r=class extends Ft{constructor(e,t){super(e);this.scope="",t=t!=null?t:{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t!=null?t:this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=sr.generateUUID()),r=e.getUUID(r!=null?r:this.getUUID(),!n);let s=e.getNodeData(r),a=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return s.name=s.name||super.build(e,t,r),s.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||s.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let o=this.getTemp(e,r);if(o)return e.format(o,a,t);{o=super.generate(e,t,r,s.output,i);let l=this.generate(e,a,r);return e.addNodeCode(o+" = "+l+";"),e.format(o,a,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r!=null?r:this.uuid,e.getTempVar(r,i!=null?i:this.getType(e),n,this.getLabel()).name}},vs=class extends _r{constructor(e,t){t=t!=null?t:{},t.shared=t.shared!==void 0?t.shared:!1;super(e,t);this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}createJSONNode(e){let t=super.createJSONNode(e);return this.readonly===!0&&(t.readonly=this.readonly),t}fromJSON(e,t){return super.fromJSON(e,t),e.readonly!==void 0&&this.setReadonly(e.readonly),this}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let a=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}copy(e){return super.copy(e),this.readonly=e.readonly,this}},is=class extends vs{constructor(e=0,t){super("v2");this.nodeType="Vector2",this.value=e instanceof q?e:new q(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.x=this.value.x,t.y=this.value.y,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.x&&(this.value.x=e.x),e.y&&(this.value.y=e.y),this}},ss=class extends vs{constructor(e=0,t,r){super("v3");this.nodeType="Vector3",this.value=e instanceof L?e:new L(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.x=this.value.x,t.y=this.value.y,t.z=this.value.z,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.x&&(this.value.x=e.x),e.y&&(this.value.y=e.y),e.z&&(this.value.z=e.z),this}},yh=class extends vs{constructor(e){super("v4");this.nodeType="Vector4",this.value=e instanceof Ea?e:new Ea(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}},Ire=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,iL=/[a-z_0-9]+/gi,rt=class extends _r{constructor(e,t,r,i,n){super(n);this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let s,a=0,o=this.src;if(this.includes)for(let h=0;h<this.includes.length;h++)e.include(this.includes[h],this);for(let h in this.extensions)e.extensions[h]=!0;let l=[];for(;s=iL.exec(this.src);)l.push(s);for(let h=0;h<l.length;h++){let d=l[h],p=d[0],f=this.isMethod?!this.getInputByName(p):!0,m=p;if(this.keywords[p]||this.useKeywords&&f&&vn.containsKeyword(p)){let y=this.keywords[p];if(!y){let b=vn.getKeywordData(p);b.cache&&(y=e.keywords[p]),y=y||vn.getKeyword(p,e),b.cache&&(e.keywords[p]=y)}m=y.build(e)}p!==m&&(o=o.substring(0,d.index+a)+m+o.substring(d.index+p.length+a),a+=m.length-p.length),this.getIncludeByName(m)===void 0&&vn.contains(m)&&e.include(vn.get(m))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t!=null?t:[],this.extensions=r!=null?r:{},this.keywords=i!=null?i:{},this.isMethod){let n=Ire.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(iL);if(s){let a=0;for(;a<s.length;){let o=s[a++],l;o==="in"||o==="out"||o==="inout"?l=s[a++]:(l=o,o="");let h=s[a++];this.inputs.push({name:h,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}copy(e){return super.copy(e),this.isMethod=e.isMethod,this.useKeywords=e.useKeywords,e.type!==void 0&&(this.type=e.type),this.parse(e.src,e.includes,e.extensions,e.keywords),this}toJSON(e){var t;let r=this.getJSONNode(e);if(!r){r=this.createJSONNode(e),r.src=this.src,r.isMethod=this.isMethod,r.useKeywords=this.useKeywords,this.isMethod||(r.type=this.type),r.extensions=JSON.parse(JSON.stringify(this.extensions));let i={};for(let n in this.keywords)i[n]=this.keywords[n].toJSON(e).uuid;if(r.keywords=i,(t=this.includes)==null?void 0:t.length){let n=[];for(let s=0;s<this.includes.length;s++)n.push(this.includes[s].toJSON(e).uuid);r.includes=n}r.isMethod=this.isMethod,r.inputs=this.inputs}return r.nodeType=this.nodeType,r}fromJSON(e,t){if(super.fromJSON(e,t),e.inputs!==void 0&&(this.inputs=e.inputs),e.isMethod!==void 0&&(this.isMethod=e.isMethod),e.src&&(this.src=e.src),e.isMethod&&(this.isMethod=e.isMethod),e.useKeywords&&(this.useKeywords=e.useKeywords),e.type&&(this.type=e.type),e.extensions&&(this.extensions=e.extensions),e.keywords&&t){this.keywords={};for(let r in e.keywords)this.keywords[r]=t.getNode(e.keywords[r])}return e.includes&&t&&(this.includes=e.includes.map(r=>t.getNode(r))),this}},Bre=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,jR=class extends _r{constructor(e="",t){super();this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||jR.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let s,a,o="",l=Bre.exec(e);this.useDefine=n!=null?n:this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],s=l[2],o=l[3]):(s=this.src,a="f"),this.name=s,this.type=a,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}copy(e){return super.copy(e),this.parse(e.src,void 0,void 0,void 0,e.useDefine),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.src=this.src,t.useDefine=this.useDefine,t.value=this.value,t.name=this.name),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.src&&(this.src=e.src),e.value&&(this.value=e.value),e.name&&(this.name=e.name),e.useDefine!==void 0&&(this.useDefine=e.useDefine),this}},jt=jR;jt.PI="PI",jt.PI2="PI2",jt.RECIPROCAL_PI="RECIPROCAL_PI",jt.RECIPROCAL_PI2="RECIPROCAL_PI2",jt.LOG2="LOG2",jt.EPSILON="EPSILON";var zre=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Fre=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),WR=class extends _r{constructor(e=""){super();this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=zre.exec(e);if(t){let r=t[2],i;for(;i=Fre.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.src=this.src),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.src&&(this.src=e.src,this.parse(this.src)),this}},H_=class extends _r{constructor(e){super("v2",{shared:!1});this.nodeType="UV",this.index=e!=null?e:0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}copy(e){return super.copy(e),this.index=e.index,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.index=this.index),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.index&&(this.index=e.index),this}};vn.addKeyword("uv",function(){return new H_});vn.addKeyword("uv2",function(){return new H_(1)});var Qe=class extends vs{constructor(e){super("f");this.nodeType="Float",this.value=e!=null?e:0}generateReadonly(e,t,r,i,n,s){return e.format(this.value+(this.value%1?"":".0"),i,t)}copy(e){return super.copy(e),this.value=e.value,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value),this}},Or=class extends rt{constructor(e="",t,r,i,n){super(e,n,i,r,t);this.nodeType="Expression"}},rh=class extends _r{constructor(e=new Ft,t){super("v4");this.nodeType="ColorSpace",this.factor=new Ft,this.input=e,this.method=t!=null?t:rh.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Ii:return["Linear"];case Gp:return["sRGB"];case kv:return["RGBE"];case qb:return["RGBM",new Qe(7).setReadonly(!0)];case Qb:return["RGBM",new Qe(16).setReadonly(!0)];case Kb:return["RGBD",new Qe(256).setReadonly(!0)];case Vp:return["Gamma",new Or("float( GAMMA_FACTOR )","f")];default:return[]}}generate(e,t){let r=this.input.build(e,"v4"),i=this.getType(e),n=rh.Nodes[this.method],s=e.include(n);if(s===rh.LINEAR_TO_LINEAR)return e.format(r,i,t);if(n.inputs.length===2){let a=this.factor.build(e,"f");return e.format(s+"( "+r+", "+a+" )",i,t)}else return e.format(s+"( "+r+" )",i,t)}fromEncoding(e){let t=rh.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=rh.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}copy(e){return super.copy(e),this.input.copy(e.input),this.method=e.method,this.factor.copy(e.factor),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.input=this.input.toJSON(e).uuid,t.factor=this.factor.toJSON(e).uuid,t.method=this.method),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.input&&(this.input=t.getNode(e.input)),e.factor&&(this.factor=t.getNode(e.factor)),e.method&&(this.method=e.method),this}},ei=rh;ei.Nodes={LinearToLinear:new rt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),GammaToLinear:new rt(["vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {","	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );","}"].join(`
`)),LinearToGamma:new rt(["vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {","	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );","}"].join(`
`)),sRGBToLinear:new rt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new rt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`)),RGBEToLinear:new rt(["vec4 RGBEToLinear( in vec4 value ) {","	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );","}"].join(`
`)),LinearToRGBE:new rt(["vec4 LinearToRGBE( in vec4 value ) {","	float maxComponent = max( max( value.r, value.g ), value.b );","	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );","	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );","}"].join(`
`)),RGBMToLinear:new rt(["vec3 RGBMToLinear( in vec4 value, in float maxRange ) {","	return vec4( value.xyz * value.w * maxRange, 1.0 );","}"].join(`
`)),LinearToRGBM:new rt(["vec3 LinearToRGBM( in vec4 value, in float maxRange ) {","	float maxRGB = max( value.x, max( value.g, value.b ) );","	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );","	M            = ceil( M * 255.0 ) / 255.0;","	return vec4( value.rgb / ( M * maxRange ), M );","}"].join(`
`)),RGBDToLinear:new rt(["vec3 RGBDToLinear( in vec4 value, in float maxRange ) {","	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );","}"].join(`
`)),LinearToRGBD:new rt(["vec3 LinearToRGBD( in vec4 value, in float maxRange ) {","	float maxRGB = max( value.x, max( value.g, value.b ) );","	float D      = max( maxRange / maxRGB, 1.0 );","	D            = clamp( floor( D ) / 255.0, 0.0, 1.0 );","	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );","}"].join(`
`)),cLogLuvM:new jt("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),LinearToLogLuv:new rt(["vec4 LinearToLogLuv( in vec4 value ) {","	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;","	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));","	vec4 vResult;","	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;","	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;","	vResult.w = fract(Le);","	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;","	return vResult;","}"].join(`
`),[new jt("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );")]),cLogLuvInverseM:new jt("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );"),LogLuvToLinear:new rt(["vec4 LogLuvToLinear( in vec4 value ) {","	float Le = value.z * 255.0 + value.w;","	vec3 Xp_Y_XYZp;","	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);","	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;","	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;","	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;","	return vec4( max(vRGB, 0.0), 1.0 );","}"].join(`
`),[new jt("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );")])},ei.LINEAR_TO_LINEAR="LinearToLinear",ei.GAMMA_TO_LINEAR="GammaToLinear",ei.LINEAR_TO_GAMMA="LinearToGamma",ei.SRGB_TO_LINEAR="sRGBToLinear",ei.LINEAR_TO_SRGB="LinearTosRGB",ei.RGBE_TO_LINEAR="RGBEToLinear",ei.LINEAR_TO_RGBE="LinearToRGBE",ei.RGBM_TO_LINEAR="RGBMToLinear",ei.LINEAR_TO_RGBM="LinearToRGBM",ei.RGBD_TO_LINEAR="RGBDToLinear",ei.LINEAR_TO_RGBD="LinearToRGBD",ei.LINEAR_TO_LOG_LUV="LinearToLogLuv",ei.LOG_LUV_TO_LINEAR="LogLuvToLinear";var ih=class extends Rr{toJSON(e){let t=super.toJSON(e),r=e===void 0||typeof e=="string";if(this.image!==void 0&&!r){let i=this.image;if(Array.isArray(i)){e.images[i.uuid].url=[];for(let n=0;n<i.length;n++)e.images[i.uuid].url[n]=nL(i[n])}else e.images[i.uuid].url=nL(i)}return t}};function nL(e){return typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?Ure(e):(console.warn("THREE.Texture: Unable to serialize Texture."),"")}var qu;function Ure(e){if(/^data:/i.test(e.src))return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{qu===void 0&&(qu=document.createElement("canvas")),qu.width=e.width,qu.height=e.height;let i=qu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=qu}let r=e.src.startsWith("blob:")?e.fileName:e.src;return/\.jpe?g$/i.test(r)?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}var pa=class extends vs{constructor(e=new ih,t,r,i){super("v4",{shared:!0});this.nodeType="Texture",this.value=e,this.uv=t!=null?t:new H_,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var r;if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),n=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let a,o;this.project?a="texture2DProj":a=s?"tex2DBias":"tex2D",s?o=a+"( "+i+", "+n+", "+s+" )":o=a+"( "+i+", "+n+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},h=this.getType(e);return e.addContext(l),this.colorSpace=(r=this.colorSpace)!=null?r:new ei(new Or("",h)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,h),e.removeContext(),e.format(o,h,t)}copy(e){return super.copy(e),e.value.isRenderTargetTexture?this.value=e.value:this.value.copy(e.value),this.uv.copy(e.uv),e.bias?this.bias?this.bias.copy(e.bias):this.bias=e.bias.clone():this.bias=void 0,e.colorSpace?this.colorSpace?this.colorSpace.copy(e.colorSpace):this.colorSpace=e.colorSpace.clone():this.colorSpace=void 0,this.project=e.project,e.value.isRenderTargetTexture||(this.value.updateMatrix(),this.value.needsUpdate=!0),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.toJSON(e).uuid),t.uv=this.uv.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),this.project=e.project,e.value&&(this.value=t.getTexture(e.value),this.value.updateMatrix()),e.uv&&(this.uv=t.getNode(e.uv)),e.bias&&(this.bias=t.getNode(e.bias)),this}},sL=class extends _r{constructor(e,t){super();this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t!=null?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let s=this.value,a=s.build(e,t)+"( ",o=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let h=s.inputs[l],d=this.inputs[l]||this.inputs[h.name];o.push(d.build(e,e.getTypeByFormat(h.type)))}a+=o.join(", ")+" )"}return e.format(a,i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this.inputs=e.inputs.map(t=>t.clone()),this}toJSON(e){var t;let r=this.getJSONNode(e);if(!r){let i=this.value;if(r=this.createJSONNode(e),r.value=this.value.toJSON(e).uuid,(t=i.inputs)==null?void 0:t.length){r.inputs={};for(let n=0;n<i.inputs.length;n++){let s=i.inputs[n],a=this.inputs[n];r.inputs[s.name]=a.toJSON(e).uuid}}}return r}},xh;(function(e){e.ADD="+",e.SUB="-",e.MUL="*",e.DIV="/"})(xh||(xh={}));var JR=class extends _r{constructor(e=new Ft,t=new Ft,r=JR.ADD){super();this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b.copy(e.b),this.op=e.op,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.a&&(this.a=t.getNode(e.a)),e.b&&(this.b=t.getNode(e.b)),e.op&&(this.op=e.op),this}},xa=JR;xa.ADD=xh.ADD,xa.SUB=xh.SUB,xa.MUL=xh.MUL,xa.DIV=xh.DIV;var Ot;(function(e){e.RAD="radians",e.DEG="degrees",e.EXP="exp",e.EXP2="exp2",e.LOG="log",e.LOG2="log2",e.SQRT="sqrt",e.INV_SQRT="inversesqrt",e.FLOOR="floor",e.CEIL="ceil",e.NORMALIZE="normalize",e.FRACT="fract",e.SATURATE="saturate",e.SIN="sin",e.COS="cos",e.TAN="tan",e.ASIN="asin",e.ACOS="acos",e.ARCTAN="atan",e.ABS="abs",e.SIGN="sign",e.LENGTH="length",e.NEGATE="negate",e.INVERT="invert",e.MIN="min",e.MAX="max",e.MOD="mod",e.STEP="step",e.REFLECT="reflect",e.DISTANCE="distance",e.DOT="dot",e.CROSS="cross",e.POW="pow",e.MIX="mix",e.CLAMP="clamp",e.REFRACT="refract",e.SMOOTHSTEP="smoothstep",e.FACEFORWARD="faceforward"})(Ot||(Ot={}));var ur=class extends _r{constructor(e=new Ft,t=ur.ABS,r,i){super();this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case ur.MIX:case ur.CLAMP:case ur.REFRACT:case ur.SMOOTHSTEP:case ur.FACEFORWARD:return 3;case ur.MIN:case ur.MAX:case ur.MOD:case ur.STEP:case ur.REFLECT:case ur.DISTANCE:case ur.DOT:case ur.CROSS:case ur.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case ur.LENGTH:case ur.DISTANCE:case ur.DOT:return"f";case ur.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),h=this.getType(e);switch(this.type=h,this.method){case ur.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case ur.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case ur.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case ur.STEP:r=this.a.build(e,s===1?"f":l),i=this.b.build(e,l);break;case ur.MIN:case ur.MAX:case ur.MOD:r=this.a.build(e,l),i=this.b.build(e,a===1?"f":l);break;case ur.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case ur.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let d=[];d.push(r),i&&d.push(i),n&&d.push(n);let p=this.getNumInputs(e);if(d.length!==p)throw Error(`Arguments not match used in "${this.method}". Require ${p}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",h,t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b=e.b instanceof Ft?e.b.clone():e.b,this.c=e.c instanceof Ft?e.c.clone():e.c,this.method=e.method,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.a=this.a.toJSON(e).uuid,this.b&&(t.b=this.b.toJSON(e).uuid),this.c&&(t.c=this.c.toJSON(e).uuid),t.method=this.method),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.a&&(this.a=t.getNode(e.a)),e.b&&(this.b=t.getNode(e.b)),e.c&&(this.c=t.getNode(e.c)),e.method&&(this.method=e.method),this}},vt=ur;vt.RAD=Ot.RAD,vt.DEG=Ot.DEG,vt.EXP=Ot.EXP,vt.EXP2=Ot.EXP2,vt.LOG=Ot.LOG,vt.LOG2=Ot.LOG2,vt.SQRT=Ot.SQRT,vt.INV_SQRT=Ot.INV_SQRT,vt.FLOOR=Ot.FLOOR,vt.CEIL=Ot.CEIL,vt.NORMALIZE=Ot.NORMALIZE,vt.FRACT=Ot.FRACT,vt.SATURATE=Ot.SATURATE,vt.SIN=Ot.SIN,vt.COS=Ot.COS,vt.TAN=Ot.TAN,vt.ASIN=Ot.ASIN,vt.ACOS=Ot.ACOS,vt.ARCTAN=Ot.ARCTAN,vt.ABS=Ot.ABS,vt.SIGN=Ot.SIGN,vt.LENGTH=Ot.LENGTH,vt.NEGATE=Ot.NEGATE,vt.INVERT=Ot.INVERT,vt.MIN=Ot.MIN,vt.MAX=Ot.MAX,vt.MOD=Ot.MOD,vt.STEP=Ot.STEP,vt.REFLECT=Ot.REFLECT,vt.DISTANCE=Ot.DISTANCE,vt.DOT=Ot.DOT,vt.CROSS=Ot.CROSS,vt.POW=Ot.POW,vt.MIX=Ot.MIX,vt.CLAMP=Ot.CLAMP,vt.REFRACT=Ot.REFRACT,vt.SMOOTHSTEP=Ot.SMOOTHSTEP,vt.FACEFORWARD=Ot.FACEFORWARD;var Ed=class extends _r{constructor(e=new Ft,t=new Ft,r=new Ft){super("v4");this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){var n,s,a,o;let l=new sL(Ed.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=(n=this.colorSpaceTL)!=null?n:new ei(new Or("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(l.build(e)+".tl"),this.colorSpaceTR=(s=this.colorSpaceTR)!=null?s:new ei(new Or("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(l.build(e)+".tr"),this.colorSpaceBL=(a=this.colorSpaceBL)!=null?a:new ei(new Or("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(l.build(e)+".bl"),this.colorSpaceBR=(o=this.colorSpaceBR)!=null?o:new ei(new Or("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(l.build(e)+".br");let h={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(h),this.colorSpaceTLExp=new Or(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Or(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Or(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Or(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let d=new Or("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return d.keywords.cubeUV_TL=this.colorSpaceTLExp,d.keywords.cubeUV_TR=this.colorSpaceTRExp,d.keywords.cubeUV_BL=this.colorSpaceBLExp,d.keywords.cubeUV_BR=this.colorSpaceBRExp,d.keywords.cubeUV=l,d}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new sL(Ed.Nodes.roughnessToMip,[i]),s=new vt(n,Ed.Nodes.m0,Ed.Nodes.cubeUV_maxMipLevel,vt.CLAMP),a=new vt(s,vt.FLOOR),o=new vt(s,vt.FRACT),l=this.bilinearCubeUV(e,this.value,r,a),h=this.bilinearCubeUV(e,this.value,r,new xa(a,new Qe(1).setReadonly(!0),xa.ADD)),d=new vt(l,h,o,vt.MIX);return e.format(d.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.uv.copy(e.uv),this.bias.copy(e.bias),this.value.copy(e.value),e.colorSpaceTL?this.colorSpaceTL?this.colorSpaceTL.copy(e.colorSpaceTL):this.colorSpaceTL=e.colorSpaceTL.clone():this.colorSpaceTL=void 0,e.colorSpaceTR?this.colorSpaceTR?this.colorSpaceTR.copy(e.colorSpaceTR):this.colorSpaceTR=e.colorSpaceTR.clone():this.colorSpaceTR=void 0,e.colorSpaceBL?this.colorSpaceBL?this.colorSpaceBL.copy(e.colorSpaceBL):this.colorSpaceBL=e.colorSpaceBL.clone():this.colorSpaceBL=void 0,e.colorSpaceBR?this.colorSpaceBR?this.colorSpaceBR.copy(e.colorSpaceBR):this.colorSpaceBR=e.colorSpaceBR.clone():this.colorSpaceBR=void 0,e.colorSpaceTLExp?this.colorSpaceTLExp?this.colorSpaceTLExp.copy(e.colorSpaceTLExp):this.colorSpaceTLExp=e.colorSpaceTLExp.clone():this.colorSpaceTLExp=void 0,e.colorSpaceTRExp?this.colorSpaceTRExp?this.colorSpaceTRExp.copy(e.colorSpaceTRExp):this.colorSpaceTRExp=e.colorSpaceTRExp.clone():this.colorSpaceTRExp=void 0,e.colorSpaceBLExp?this.colorSpaceBLExp?this.colorSpaceBLExp.copy(e.colorSpaceBLExp):this.colorSpaceBLExp=e.colorSpaceBLExp.clone():this.colorSpaceBLExp=void 0,e.colorSpaceBRExp?this.colorSpaceBRExp?this.colorSpaceBRExp.copy(e.colorSpaceBRExp):this.colorSpaceBRExp=e.colorSpaceBRExp.clone():this.colorSpaceBRExp=void 0,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid,this.colorSpaceTL&&this.colorSpaceTL.toJSON(e).uuid,this.colorSpaceTR&&this.colorSpaceTR.toJSON(e).uuid,this.colorSpaceBL&&this.colorSpaceBL.toJSON(e).uuid,this.colorSpaceBR&&this.colorSpaceBR.toJSON(e).uuid,this.colorSpaceTLExp&&this.colorSpaceTLExp.toJSON(e).uuid,this.colorSpaceTRExp&&this.colorSpaceTRExp.toJSON(e).uuid,this.colorSpaceBLExp&&this.colorSpaceBLExp.toJSON(e).uuid,this.colorSpaceBRExp&&this.colorSpaceBRExp.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getNode(e.value)),e.uv&&(this.uv=t.getNode(e.uv)),e.bias&&(this.bias=t.getNode(e.bias)),e.colorSpaceTL&&(this.colorSpaceTL=t.getNode(e.colorSpaceTL)),e.colorSpaceTR&&(this.colorSpaceTR=t.getNode(e.colorSpaceTR)),e.colorSpaceBL&&(this.colorSpaceBL=t.getNode(e.colorSpaceBL)),e.colorSpaceBR&&(this.colorSpaceBR=t.getNode(e.colorSpaceBR)),e.colorSpaceTLExp&&(this.colorSpaceTLExp=t.getNode(e.colorSpaceTLExp)),e.colorSpaceTRExp&&(this.colorSpaceTRExp=t.getNode(e.colorSpaceTRExp)),e.colorSpaceBLExp&&(this.colorSpaceBLExp=t.getNode(e.colorSpaceBLExp)),e.colorSpaceBRExp&&(this.colorSpaceBRExp=t.getNode(e.colorSpaceBRExp)),this}},Fw=Ed;Fw.Nodes=function(){let e=new WR(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new jt("float cubeUV_maxMipLevel 8.0",!0),r=new jt("float cubeUV_minMipLevel 4.0",!0),i=new jt("float cubeUV_maxTileSize 256.0",!0),n=new jt("float cubeUV_minTileSize 16.0",!0),s=new rt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let a=new rt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let o=new rt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,a,t,r,i,n]);o.useKeywords=!1;let l=new jt("float r0 1.0",!0),h=new jt("float v0 0.339",!0),d=new jt("float m0 -2.0",!0),p=new jt("float r1 0.8",!0),f=new jt("float v1 0.276",!0),m=new jt("float m1 -1.0",!0),y=new jt("float r4 0.4",!0),b=new jt("float v4 0.046",!0),x=new jt("float m4 2.0",!0),v=new jt("float r5 0.305",!0),g=new jt("float v5 0.016",!0),_=new jt("float m5 3.0",!0),S=new jt("float r6 0.21",!0),T=new jt("float v6 0.0038",!0),A=new jt("float m6 4.0",!0),M=[l,h,d,p,f,m,y,b,x,v,g,_,S,T,A],O=new rt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,M);return{bilinearCubeUV:o,roughnessToMip:O,m0:d,cubeUV_maxMipLevel:t}}();var nh=class extends _r{constructor(e){super("v3");this.nodeType="Normal",this.scope=e!=null?e:nh.VIEW}getShared(){return this.scope===nh.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let s;switch(this.scope){case nh.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case nh.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case nh.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},xn=nh;xn.LOCAL="local",xn.WORLD="world",xn.VIEW="view",xn.NORMAL="normal";vn.addKeyword("viewNormal",function(){return new xn(xn.VIEW)});vn.addKeyword("localNormal",function(){return new xn(xn.NORMAL)});vn.addKeyword("worldNormal",function(){return new xn(xn.WORLD)});var Xa=class extends _r{constructor(e){super("v3");this.nodeType="Position",this.scope=e!=null?e:Xa.LOCAL}getType(){switch(this.scope){case Xa.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Xa.LOCAL:case Xa.WORLD:return!1}return!0}generate(e,t,r,i,n){let s;switch(this.scope){case Xa.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case Xa.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case Xa.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Xa.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},zn=Xa;zn.LOCAL="local",zn.WORLD="world",zn.VIEW="view",zn.PROJECTION="projection";vn.addKeyword("position",function(){return new zn});vn.addKeyword("worldPosition",function(){return new zn(zn.WORLD)});vn.addKeyword("viewPosition",function(){return new zn(zn.VIEW)});var ia=class extends _r{constructor(e){super("v3");this.nodeType="Reflect",this.scope=e!=null?e:ia.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case ia.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case ia.VECTOR:{let n=new xn(xn.VIEW),s=e.context.roughness,a=n.build(e,"v3"),o=new zn(zn.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,h=`reflect( -normalize( ${o} ), ${a} )`;l&&(h=`normalize( mix( ${h}, ${a}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${h}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${d};`),i="reflectVec"):i=d;break}case ia.CUBE:{let n=new ia(ia.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case ia.SPHERE:{let n=new ia(ia.VECTOR).build(e,"v3"),s="normalize( ( viewMatrix * vec4( "+n+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${s};`),i="reflectSphereVec"):i=s;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},Uh=ia;Uh.CUBE="cube",Uh.SPHERE="sphere",Uh.VECTOR="vector";var kre=class extends _r{constructor(e=new pa,t,r){super("v4");this.nodeType="TextureCube",this.value=e,this.radianceNode=new Fw(this.value,t!=null?t:new Uh(Uh.VECTOR),r),this.irradianceNode=new Fw(this.value,new xn(xn.WORLD),new Qe(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}copy(e){return super.copy(e),this.value.copy(e.value),this.radianceNode.copy(e.radianceNode),this.irradianceNode.copy(e.irradianceNode),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.toJSON(e).uuid,this.radianceNode&&(t.radianceNode=this.radianceNode.toJSON(e).uuid),this.irradianceNode&&(t.irradianceNode=this.irradianceNode.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getNode(e.value)),e.radianceNode&&(this.radianceNode=t.getNode(e.radianceNode)),e.irradianceNode&&(this.irradianceNode=t.getNode(e.irradianceNode)),this}},Hre=class extends vs{constructor(e=new jp,t,r){super("v4",{shared:!0});this.nodeType="CubeTexture",this.value=e,this.uv=t!=null?t:new Uh,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var r,i;if(t==="samplerCube")return this.getTexture(e,t);let n=this.getTexture(e,t),s=(r=this.uv)==null?void 0:r.build(e,"v3"),a=this.bias?this.bias.build(e,"f"):void 0;a===void 0&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f"));let o;a?o="texCubeBias( "+n+", "+s+", "+a+" )":o="texCube( "+n+", "+s+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},h=this.getType(e);return e.addContext(l),this.colorSpace=(i=this.colorSpace)!=null?i:new ei(new Or("",h)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,h),e.removeContext(),e.format(o,h,t)}copy(e){return super.copy(e),this.value.copy(e.value),e.uv?this.uv?this.uv.copy(e.uv):this.uv=e.uv.clone():this.uv=void 0,e.bias?this.bias?this.bias.copy(e.bias):this.bias=e.bias.clone():this.bias=void 0,this}toJSON(e){var t;let r=this.getJSONNode(e);return r||(r=this.createJSONNode(e),this.value&&(r.value=this.value.uuid),r.uv=(t=this.uv)==null?void 0:t.toJSON(e).uuid,this.bias&&(r.bias=this.bias.toJSON(e).uuid)),r.nodeType=this.nodeType,r}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getTexture(e.value)),e.uv&&(this.uv=t.getNode(e.uv)),e.bias&&(this.bias=t.getNode(e.bias)),this}},aL=["x","y","z","w"],Gre=["float","vec2","vec3","vec4"],Vre={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},jre={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Wre=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let s=0;s<i.length;s++)i[s].src&&(n+=i[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.requires={uv:[],color:[],lights:!1,fog:!1,transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e!=null?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t!=null?t:this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t!=null?t:this.shader]+=e+`
`}clearNodeCode(e){e=e!=null?e:this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t!=null?t:this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t!=null?t:this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",s=""){let a=this.getVars(i),o=a[e];if(!o){let l=a.length;o={name:r||"node"+n+l+(s?"_"+s:""),type:t},a.push(o),a[e]=o}return o}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t!=null?t:"";let r="";for(let i=0,n=e.length;i<n;++i){let s=e[i],a=s.type,o=s.name,l=s.size,h=this.getFormatByType(a);if(h===void 0)throw new Error("Node pars "+h+" not found.");h.includes("[]")?r+=t+" "+h.substring(0,h.length-2)+" "+o+`[${l}];
`:r+=t+" "+h+" "+o+`;
`}return r}getVars(e){return this.inputs.vars[e!=null?e:this.shader]}getNodeData(e){let t=e instanceof Ft?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,s){if(t.includes("[]")){let a=this.inputs.arrayUniforms,o=a.list.length,l=new rL({type:t,size:r.size,name:i||"nodeUA"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,o=a.list.length,l=new rL({type:t,name:i||"nodeU"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var i;let n;if(e=typeof e=="string"?vn.get(e):e,this.context.include===!1)return e.name;e instanceof rt?n=this.includes.functions:e instanceof jt?n=this.includes.consts:e instanceof WR&&(n=this.includes.structs);let s=n[this.shader]=n[this.shader]||[];if(e){let a=s[e.name];if(a||(a=s[e.name]={node:e,deps:[]},s.push(a),a.src=e.build(this,"source")),e instanceof rt&&t&&s[t.name]&&s[t.name].deps.indexOf(e)==-1&&(s[t.name].deps.push(e),(i=e.includes)==null?void 0:i.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return r&&(a.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return Gre[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case Up:case kp:return new Hre(r);case Hp:case Uv:return new kre(new pa(r));default:return new pa(r)}else{if(r.isVector2)return new is(r);if(r.isVector3)return new ss(r);if(r.isVector4)return new yh(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Vre[e]||e}getFormatByType(e){return jre[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return aL[e]}getIndexByElement(e){return aL.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Ii,t===Ii&&this.context.gamma&&(t=Vp),t}},oL=class extends Ft{constructor(e=new Ft){super("v4");this.nodeType="Raw",this.value=e}generate(e){let t=this.value.analyzeAndFlow(e,this.type),r=t.code+`
`;return e.isShader("vertex")?r+="gl_Position = "+t.result+";":r+="gl_FragColor = "+t.result+";",r}copy(e){return super.copy(e),this.value.copy(e.value),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getNode(e.value)),this}},Xr=class extends vs{constructor(e=0,t,r,i){super("c");this.nodeType="Color",this.value=e instanceof Ea?e:new Ea(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let a=e.getNodeData(r),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},nr=class extends vs{constructor(e){super("i");this.nodeType="Int",this.value=Math.floor(e!=null?e:0)}generateReadonly(e,t,r,i,n,s){return e.format(this.value.toString(),i,t)}copy(e){return super.copy(e),this.value=e.value,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value),this}},Gt;(function(e){e.POSITION="position",e.LIGHTING="light",e.COLOR="color",e.GRADIENT="gradient",e.NORMAL="normal",e.DEPTH="depth",e.TEXTURE="texture",e.NOISE="noise",e.FRESNEL="fresnel",e.RAINBOW="rainbow",e.TRANSMISSION="transmission",e.POINTS="points",e.MATCAP="matcap",e.LINES="lines",e.DISPLACE="displace"})(Gt||(Gt={}));var Ar;(function(e){e.POSITION="position",e.LIGHTING="light",e.COLOR="color"})(Ar||(Ar={}));var Yr=class{constructor(e,t,r,i){if(this.next=void 0,this.uniforms={},this.textures={},this.defines={},this.backLayer=void 0,this.isBack=!1,this.id=e,this.uuid=t,r){this.type=r.type;for(let n in r)n!=="type"&&n!=="calpha"&&(this.uniforms[`f${this.id}_${n}`]=r[n]);for(let n in i)this.defines[n]=i[n]}}copy(e){this.id=e.id,this.type=e.type,this.defines=Le({},e.defines);for(let t in e.uniforms)this.getName(t)==="transmissionSamplerMap"||this.getName(t)==="transmissionDepthMap"||(this.uniforms[t]?this.uniforms[t].copy(e.uniforms[t]):this.uniforms[t]=e.uniforms[t].clone());return this}clone(){return new Yr(this.id).copy(this)}fromJSON(e,t){this.id=e.id,this.defines=Le({},e.defines);for(let r in e.uniforms)this.uniforms[r]=t.getNode(e.uniforms[r]);if(e.type===Gt.TEXTURE){if(!(`f${this.id}_textureSize`in this.uniforms)){let r=this.uniforms[`f${this.id}_texture`].value.image;this.uniforms[`f${e.id}_textureSize`]=new ss(r.width,r.height)}`f${this.id}_size`in this.uniforms||(this.uniforms[`f${e.id}_size`]=new is(200,200)),`f${e.id}_axis`in this.uniforms||(this.uniforms[`f${e.id}_axis`]=new nr(0)),`f${e.id}_projection`in this.uniforms||(this.uniforms[`f${e.id}_projection`]=new nr(0))}else e.type===Gt.NOISE?(`f${e.id}_noiseType`in this.uniforms||(this.uniforms[`f${e.id}_noiseType`]=new nr(0)),`f${e.id}_size`in this.uniforms||(this.uniforms[`f${e.id}_size`]=new ss(-1,-1,-1))):e.type===Gt.DEPTH&&(`f${e.id}_isWorldSpace`in this.uniforms||(this.uniforms[`f${e.id}_isWorldSpace`]=new Qe(1)));return this}toJSON(e){let t={};for(let r in this.uniforms)t[r]=this.uniforms[r].toJSON(e).uuid;return{id:this.id,type:this.type,defines:JSON.parse(JSON.stringify(this.defines)),uniforms:t,next:this.next==null?void 0:this.next.toJSON(e)}}copyUniforms(e){for(let t in this.uniforms){let r=this.getName(t);r!==void 0&&e.uniforms[`f${e.id}_${r}`]&&r!=="transmissionDepthMap"&&r!=="transmissionSamplerMap"&&this.uniforms[t].copy(e.uniforms[`f${e.id}_${r}`])}return this}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getValues(){let e={type:this.type};for(let t in this.uniforms){let r=this.getName(t);if(r===void 0)continue;let i=this.uniforms[`f${this.id}_${r}`].value;i!==void 0&&(Array.isArray(i)?e[r]=i.map(n=>n.clone?n.clone():n):e[r]=i.clone?i.clone():i)}return e}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}isEqual(e){for(let t in e.uniforms){let r=e.getName(t);if(!r)return!1;let i=this.getValue(r),n=e.uniforms[t].value;if(n.value instanceof Rr){if(i.image!==n.image)return!1}else if(Array.isArray(n)){let s=i;for(let a=0,o=s.length;a<o;++a)if(s[a]!==n[a])return!1}else{let s=i;if(s.equals){if(!s.equals(n))return!1}else if(i!==n)return!1}}return!0}dispose(){}},lL=function(e,t){let r=e.id,i=e.type;return new Yr(r,void 0,{type:i}).fromJSON(e,t)};function YR(e){let t=e instanceof Yr?e.type:e;return t==="texture"||t==="displace_map"||t==="matcap"}var uL=class extends vs{constructor(e){super("b");this.nodeType="Bool",this.value=e!=null?e:!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}copy(e){return super.copy(e),this.value=e.value,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value),this}},Td=class extends vs{constructor(e=1,t){super("v4[]");this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Tt?new Array(e).fill(t):new Array(e).fill(new Tt(0))}copy(e){return super.copy(e),this.value=e.value.map(t=>t.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.map(r=>({x:r.x,y:r.y,z:r.z,w:r.w}))),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value.map(r=>new Tt(r.x,r.y,r.z,r.w)),this.size=this.value.length),this}},Ym=class extends vs{constructor(e=1,t){super("f[]");this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}copy(e){return super.copy(e),this.size=e.size,this.value=[...e.value],this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.size=this.size,t.value=[...this.value]),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=[...e.value]),e.size?this.size=e.size:e.value&&(this.size=this.value.length),this}},gv=class extends vs{constructor(e){super("m3");this.nodeType="Matrix3",this.value=e!=null?e:new Dr}generateReadonly(e,t,r,i,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}copy(e){return super.copy(e),this.elements=e.elements,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.elements=this.value.elements.concat()),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.elements&&(this.elements=e.elements),this}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},hL;(function(e){e[e.UV=0]="UV",e[e.PLANAR=1]="PLANAR",e[e.SPHERICAL=2]="SPHERICAL",e[e.CYLINDRICAL=3]="CYLINDRICAL"})(hL||(hL={}));var yg=class extends _r{constructor(e=new pa,t,r,i,n,s,a,o){super("v3");this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.size=s,this.mat=new gv(this.texture.value.matrix),this.alpha=a,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r;switch(this.projection.value){case 3:r=e.include(yg.Nodes.cylindrical);break;case 2:r=e.include(yg.Nodes.spherical);break;case 1:let n=new rt(`
		vec3 g${this.uuid.toString().replace(/-/g,"")}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (g${this.uuid.toString().replace(/-/g,"")}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);r=e.include(n);break;default:r=e.include(yg.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){let n=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexParsCode(`varying vec2 ${n}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${n}_vCustomUv;`),e.addVertexFinalCode(`
                        vec3 ${n}_posN = transformed;
${this.axis.value===0?`
									   float ${n}_u = (1. + (${n}_posN.z)) / 2.;
									   float ${n}_v = (1. + (${n}_posN.y)) / 2.;
									   `:""}

${this.axis.value===1?`
									   float ${n}_u = (1. + (${n}_posN.x)) / 2.;
									   float ${n}_v = (1. - (${n}_posN.z)) / 2.;
									   `:""}

${this.axis.value===2?`
									   float ${n}_u = (1. + (${n}_posN.x)) / 2.;
									   float ${n}_v = (1. + (${n}_posN.y)) / 2.;
									   `:""}

                        ${n}_vCustomUv = vec2(${n}_u, ${n}_v);
                    `)}e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.texture.getTexture(e,"t")),i.push(this.textureSize.build(e,"v2")),i.push(this.crop.build(e,"f")),i.push(this.mat.build(e,"mat3")),i.push(this.size.build(e,"v2")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+i.join(",")+")",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.texture=this.texture.toJSON(e).uuid,t.textureSize=this.textureSize.toJSON(e).uuid,t.crop=this.crop.toJSON(e).uuid,t.projection=this.projection.toJSON(e).uuid,t.axis=this.axis.toJSON(e).uuid,t.size=this.size.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.texture&&(this.texture=t.getNode(e.texture),this.texture.value.updateMatrix(),this.mat=new gv(this.texture.value.matrix)),e.textureSize&&(this.textureSize=t.getNode(e.textureSize)),e.crop&&(this.crop=t.getNode(e.crop)),e.projection&&(this.projection=t.getNode(e.projection)),e.axis&&(this.axis=t.getNode(e.axis)),e.size&&(this.size=t.getNode(e.size)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.mode&&(this.mode=t.getNode(e.mode)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.texture.copy(e.texture),this.textureSize=e.textureSize.clone(),this.crop=e.crop.clone(),this.projection=e.projection.clone(),this.axis=e.axis.clone(),this.size=e.size.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this}},XR=yg;XR.Nodes=function(){let e=new rt(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),t=new rt(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),r=new rt(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:e,spherical:t,uv:r}}();var qR=class extends _r{constructor(e,t,r,i,n,s,a){super("v3");this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.alpha=s,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(qR.Nodes.fresnel),i=[];return i.push(this.color.build(e,"c")),i.push(this.bias.build(e,"f")),i.push(this.scale.build(e,"f")),i.push(this.intensity.build(e,"f")),i.push(this.factor.build(e,"f")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.color=this.color.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid,t.intensity=this.intensity.toJSON(e).uuid,t.factor=this.factor.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.color&&(this.color=t.getNode(e.color)),e.bias&&(this.bias=t.getNode(e.bias)),e.scale&&(this.scale=t.getNode(e.scale)),e.intensity&&(this.intensity=t.getNode(e.intensity)),e.factor&&(this.factor=t.getNode(e.factor)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.mode&&(this.mode=t.getNode(e.mode)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.color=e.color.clone(),this.bias=e.bias.clone(),this.scale=e.scale.clone(),this.intensity=e.intensity.clone(),this.factor=e.factor.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this.calpha=e.calpha,this}},QR=qR;QR.Nodes=function(){return{fresnel:new rt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var vv;(function(e){e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin"})(vv||(vv={}));var Bs=function(){let e=5,t=new rt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),r=new rt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);r.keywords.F3=new jt("float F3 0.3333333"),r.keywords.G3=new jt("float G3 0.1666667");let i=new rt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[r]),n=new rt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),s=new rt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new rt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,s]),o=new rt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),l=new rt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),h=new rt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[l]),d=new rt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[h]);d.keywords.NUM_OCTAVES=new jt(`int NUM_OCTAVES ${e}`);let p=new rt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),f=new rt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,s,p]);return{simplex:r,simplexFractal:i,simplexAshima:a,fbm:d,perlin:f}}(),KR=class extends _r{constructor(e,t,r,i,n,s,a){super("v3");this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=s,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(KR.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.filmThickness=this.filmThickness.toJSON(e).uuid,t.movement=this.movement.toJSON(e).uuid,t.wavelengths=this.wavelengths.toJSON(e).uuid,t.noiseStrength=this.noiseStrength.toJSON(e).uuid,t.noiseScale=this.noiseScale.toJSON(e).uuid,t.offset=this.offset.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.filmThickness&&(this.filmThickness=t.getNode(e.filmThickness)),e.movement&&(this.movement=t.getNode(e.movement)),e.wavelengths&&(this.wavelengths=t.getNode(e.wavelengths)),e.noiseStrength&&(this.noiseStrength=t.getNode(e.noiseStrength)),e.noiseScale&&(this.noiseScale=t.getNode(e.noiseScale)),e.offset&&(this.offset=t.getNode(e.offset)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.filmThickness=e.filmThickness.clone(),this.movement=e.movement.clone(),this.wavelengths=e.wavelengths.clone(),this.noiseStrength=e.noiseStrength.clone(),this.noiseScale=e.noiseScale.clone(),this.offset=e.offset.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},ZR=KR;ZR.Nodes=function(){let e=new rt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 viewDir = normalize(-(cameraPosition + offset));
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vObjectNormal), viewDir)) + movement);
             }`,[Bs.simplex]);return{rainbow:new rt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[e])}}();var $R=class extends _r{constructor(e,t,r,i,n,s,a,o){super("v3");this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include($R.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.thickness=this.thickness.toJSON(e).uuid,t.ior=this.ior.toJSON(e).uuid,t.roughness=this.roughness.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.thickness&&(this.thickness=t.getNode(e.thickness)),e.ior&&(this.ior=t.getNode(e.ior)),e.roughness&&(this.roughness=t.getNode(e.roughness)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(this),this.thickness=e.thickness.clone(),this.ior=e.ior.clone(),this.roughness=e.roughness.clone(),this.transmissionSamplerSize=e.transmissionSamplerSize.clone(),this.transmissionSamplerMap=e.transmissionSamplerMap,this.transmissionDepthMap=e.transmissionDepthMap,this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},eN=$R;eN.Nodes=function(){let e=new rt(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),t=new rt(`
            vec4 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec4 O = vec4(0);
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = texture2D(dm, uv).r;
                    if (opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian(d) * texture2DLodEXT( sp, uv, lod);
                    #else
                    O += gaussian(d) * textureLod( sp, uv, lod);
                    #endif
                }
                return O / O.a;
            }`,[e]),r=new rt(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new rt(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),n=new rt(`
vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[i,t]),s=new rt(`
vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
        // Get the specular component.
        return vec4( ( 1.0 ) * transmittedLight.rgb, transmittedLight.a );
    }`,[n,r]);return{transmission:new rt(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec4 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission.rgb;
            }`,[s])}}();var tN=class extends _r{constructor(e,t){super("v3");this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let r=e.include(tN.Nodes.customNormal),i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.alpha.build(e,"f")),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.cnormal=this.cnormal.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.cnormal&&(this.cnormal=t.getNode(e.cnormal)),e.alpha&&(this.alpha=t.getNode(e.alpha)),this}copy(e){return super.copy(e),this.cnormal.copy(e.cnormal),this.alpha.copy(e.alpha),this}},rN=tN;rN.Nodes=function(){return{customNormal:new rt(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();var iN=class extends _r{constructor(e,t,r,i,n,s,a,o){super("v3");this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=s,this.angle=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(iN.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.gradientType=this.gradientType.toJSON(e).uuid,t.smooth=this.smooth.toJSON(e).uuid,t.colors=this.colors.toJSON(e).uuid,t.steps=this.steps.toJSON(e).uuid,t.offset=this.offset.toJSON(e).uuid,t.morph=this.morph.toJSON(e).uuid,t.angle=this.angle.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}copy(e){return super.copy(e),this.gradientType=e.gradientType.clone(),this.smooth=e.smooth.clone(),this.colors=e.colors.clone(),this.steps=e.steps.clone(),this.offset=e.offset.clone(),this.morph=e.morph.clone(),this.angle=e.angle.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}fromJSON(e,t){return super.fromJSON(e,t),e.calpha&&(this.calpha=e.calpha),e.gradientType&&(this.gradientType=t.getNode(e.gradientType)),e.smooth&&(this.smooth=t.getNode(e.smooth)),e.colors&&(this.colors=t.getNode(e.colors)),e.steps&&(this.steps=t.getNode(e.steps)),e.offset&&(this.offset=t.getNode(e.offset)),e.morph&&(this.morph=t.getNode(e.morph)),e.angle&&(this.angle=t.getNode(e.angle)),e.alpha&&(this.alpha=t.getNode(e.alpha)),this}},nN=iN;nN.Nodes=function(){return{gradient:new rt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var Il;(function(e){e.NOISE="noise",e.MAP="map"})(Il||(Il={}));var sN=class extends _r{constructor(e=new nr(0),t,r,i,n,s){super("v3");this.nodeType="VertexDisplacement",this.displacementTypeIndex=e,this.intensity=t,this.movementOrTexture=r,Object.values(Il)[this.displacementTypeIndex.value]===Il.MAP&&(this.mat=new gv(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=n,this.noiseFunctionIndex=s}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(Il)[this.displacementTypeIndex.value]){case Il.MAP:{r=e.include(sN.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case Il.NOISE:{let n=Object.values(vv)[this.noiseFunctionIndex.value],s=new rt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=new rt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[Bs.simplex,Bs.simplexFractal,Bs.simplexAshima,Bs.fbm,Bs.perlin]),o=new rt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[a,s]);r=e.include(o),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){var t;let r=this.getJSONNode(e);return r||(r=this.createJSONNode(e),r.intensity=this.intensity.toJSON(e).uuid,r.scale=(t=this.scale)==null?void 0:t.toJSON(e).uuid,r.movementOrTexture=this.movementOrTexture.toJSON(e).uuid,r.cropOrOffset=this.cropOrOffset.toJSON(e).uuid),r.displacementTypeIndex=this.displacementTypeIndex,r.noiseFunctionIndex=this.noiseFunctionIndex,r.nodeType=this.nodeType,r}fromJSON(e,t){return super.fromJSON(e,t),this.displacementTypeIndex=e.displacementTypeIndex,this.noiseFunctionIndex=e.noiseFunctionIndex,e.cropOrOffset&&(this.cropOrOffset=t.getNode(e.cropOrOffset)),e.intensity&&(this.intensity=t.getNode(e.intensity)),e.movementOrTexture&&(this.displacementTypeIndex.value===1?(this.movementOrTexture=t.getNode(e.movementOrTexture),this.movementOrTexture.value.updateMatrix(),this.mat=new gv(this.movementOrTexture.value.matrix)):this.displacementTypeIndex.value===0&&(this.movementOrTexture=t.getNode(e.movementOrTexture))),e.scale&&(this.scale=t.getNode(e.scale)),this}copy(e){var t,r;return super.copy(e),this.noiseFunctionIndex=(t=e.noiseFunctionIndex)==null?void 0:t.clone(),this.scale=(r=e.scale)==null?void 0:r.clone(),this.cropOrOffset=e.cropOrOffset.clone(),this.intensity=e.intensity.clone(),this.movementOrTexture=e.movementOrTexture.clone(),this}},Uw=sN;Uw.Nodes=function(){let e=new rt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new rt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new rt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var aN=class extends _r{constructor(e=new Ft,t=new Ft,r=new Ft,i=new Ft,n=new Ft,s=new Ft,a=new Ft,o=new Ft,l=new Ft,h=new Ft,d=new Ft,p=new Ft){super("v3");this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=s,this.colorA=a,this.colorB=o,this.colorC=l,this.colorD=h,this.alpha=d,this.noiseType=p,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(vv)[this.noiseType.value],a=new rt(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[Bs.simplex,Bs.simplexFractal,Bs.simplexAshima,Bs.fbm,Bs.perlin]),o=e.include(a),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(o+"("+l.join(",")+")",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scale=this.scale.toJSON(e).uuid,t.size=this.size.toJSON(e).uuid,t.move=this.move.toJSON(e).uuid,t.fA=this.fA.toJSON(e).uuid,t.fB=this.fB.toJSON(e).uuid,t.distortion=this.distortion.toJSON(e).uuid,t.colorA=this.colorA.toJSON(e).uuid,t.colorB=this.colorB.toJSON(e).uuid,t.colorC=this.colorC.toJSON(e).uuid,t.colorD=this.colorD.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.noiseType=this.noiseType,t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scale&&(this.scale=t.getNode(e.scale)),e.size&&(this.size=t.getNode(e.size)),e.move&&(this.move=t.getNode(e.move)),e.fA&&(this.fA=t.getNode(e.fA)),e.fB&&(this.fB=t.getNode(e.fB)),e.distortion&&(this.distortion=t.getNode(e.distortion)),e.colorA&&(this.colorA=t.getNode(e.colorA)),e.colorB&&(this.colorB=t.getNode(e.colorB)),e.colorC&&(this.colorC=t.getNode(e.colorC)),e.colorD&&(this.colorD=t.getNode(e.colorD)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.noiseType&&(this.noiseType=t.getNode(e.noiseType)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.scale.copy(e.scale),this.size.copy(e.size),this.move.copy(e.move),this.fA.copy(e.fA),this.fB.copy(e.fB),this.distortion.copy(e.distortion),this.colorA.copy(e.colorA),this.colorB.copy(e.colorB),this.colorC.copy(e.colorC),this.colorD.copy(e.colorD),this.alpha.copy(e.alpha),this.calpha=e.calpha,this.noiseType.copy(e.noiseType),this}};aN.numOctaves=5;var cL=class extends _r{constructor(e=new Ft,t=new Ft,r=new Ft,i=new Ft){super("v3");this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b.copy(e.b),this.alpha.copy(e.alpha),this.mode.copy(e.mode),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.a&&(this.a=t.getNode(e.a)),e.b&&(this.b=t.getNode(e.b)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.mode&&(this.mode=t.getNode(e.mode)),this}},oN=class extends _r{constructor(e,t,r,i,n,s,a,o,l,h,d){super("v3");this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=s,this.origin=a,this.direction=o,this.colors=l,this.steps=h,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("MAX_COLORS",10),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let r=e.include(oN.Nodes.sdepth),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.near.build(e,"f")),i.push(this.far.build(e,"f")),i.push(this.isVector.build(e,"f")),i.push(this.isWorldSpace.build(e,"f")),i.push(this.origin.build(e,"v3")),i.push(this.direction.build(e,"v3")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.gradientType=this.gradientType.toJSON(e).uuid,t.smooth=this.smooth.toJSON(e).uuid,t.near=this.near.toJSON(e).uuid,t.far=this.far.toJSON(e).uuid,t.isVector=this.isVector.toJSON(e).uuid,t.isWorldSpace=this.isWorldSpace.toJSON(e).uuid,t.origin=this.origin.toJSON(e).uuid,t.direction=this.direction.toJSON(e).uuid,t.colors=this.colors.toJSON(e).uuid,t.steps=this.steps.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.gradientType&&(this.gradientType=t.getNode(e.gradientType)),e.smooth&&(this.smooth=t.getNode(e.smooth)),e.near&&(this.near=t.getNode(e.near)),e.far&&(this.far=t.getNode(e.far)),e.isVector&&(this.isVector=t.getNode(e.isVector)),e.isWorldSpace&&(this.isWorldSpace=t.getNode(e.isWorldSpace)),e.origin&&(this.origin=t.getNode(e.origin)),e.direction&&(this.direction=t.getNode(e.direction)),e.colors&&(this.colors=t.getNode(e.colors)),e.steps&&(this.steps=t.getNode(e.steps)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.gradientType=e.gradientType.clone(),this.smooth=e.smooth.clone(),this.near=e.near.clone(),this.far=e.far.clone(),this.isVector=e.isVector.clone(),this.isWorldSpace=e.isWorldSpace.clone(),this.origin=e.origin.clone(),this.direction=e.direction.clone(),this.colors=e.colors.clone(),this.steps=e.steps.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},lN=oN;lN.Nodes=function(){return{sdepth:new rt(`vec3 sdepth(int gradientType, bool smoothed, float near, float far, float isVector, float isWorldSpace, vec3 origin, vec3 direction, vec4 colors[MAX_COLORS], float steps[MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               float dist;
               if (isVector > 0.5) {
                   if (gradientType == 0) {
                      vec3 n = normalize(direction);

                      dist = (isWorldSpace > 0.5)
                          ? (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z))
                          : (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));

                   } else {
                      dist = (isWorldSpace > 0.5) ? length(vWPosition - origin) : length(position - origin);
                   }
               } else {
                   dist = length (vWPosition - cameraPosition);
               }
			   float dep = ( dist - near ) / ( far - near );

			  float p;
              if (smoothed) {
				for ( int i = 1; i < MAX_COLORS; i++ ) {
						p = clamp( ( dep - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

               } else {
                for ( int i = 1; i < MAX_COLORS; i++ ) {
                   p = clamp(( dep - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
               }
               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`)}}();var uN=class extends _r{constructor(e,t,r,i){super("v3");this.nodeType="Matcap",this.color=e,this.texture=t,this.alpha=r,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(uN.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.color.build(e,"v3")),i.push(this.texture.getTexture(e,"t")),i.push("normal"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.texture=e.texture.clone(),this.color=e.color.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this.calpha=e.calpha,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.texture=this.texture.toJSON(e).uuid,t.color=this.color.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.calpha&&(this.calpha=e.calpha),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.texture&&(this.texture=t.getNode(e.texture)),e.color&&(this.color=t.getNode(e.color)),e.mode&&(this.mode=t.getNode(e.mode)),this}},hN=uN;hN.Nodes=function(){return{matcap:new rt(`vec3 matcap(vec3 color, sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );
                // matcapColor = matcapTexelToLinear( matcapColor );
                matcapColor.rgb *= color;
                
                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var hu=class{constructor(e){this.id=2,this.layerCount=2,this.uuid=sr.generateUUID(),this.needsUpdate=!1,this._material=e,this._layerNodes=[];let t=this._createLayer({id:0,type:Gt.COLOR});this._material.color=t.color,this._material.alpha===void 0&&(this._material.alpha=new Qe(1));let r=new Qe(1),i=new nr(0);"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=r,this._material.shadingBlend=i),this._layerNodes.push({id:0,type:Ar.COLOR,color:t.color,alpha:t.alpha,mode:t.mode}),this._layerNodes.push({id:1,type:Ar.LIGHTING,alpha:r,mode:i}),this.head=t.layer,this.head.next=new Yr(1,void 0,{type:Gt.LIGHTING,alpha:r,mode:i}),this.attachLightNodes()}get material(){return this._material}set material(e){this._material=e;let t,r,i=this.head;for(;i!==void 0;){if(i.type===Gt.LIGHTING){t=i.uniforms[`f${i.id}_alpha`],r=i.uniforms[`f${i.id}_mode`];break}i=i.next}"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=t,this._material.shadingBlend=r),this.attachLightNodes(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}getLayersOfType(e){let t=[],r=this.head;for(;r;)r.type===e&&t.push(r),r=r.next;return t}addLayer(e){var t;if(e.id=(t=e.id)!=null?t:++this.id,this.layerCount++,e.type===Gt.LIGHTING){let n=this.createLightLayer(e);return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}let r=this._createLayer(e),i=r.layer;if(this.head===void 0)this.head=i;else{let n=this.head;for(;n.next!=null;)n=n.next;n.next=i}return r.color&&this._layerNodes.push({id:i.id,type:Ar.COLOR,color:r.color,alpha:r.alpha,mode:r.mode}),r.position&&this._layerNodes.push({id:i.id,type:Ar.POSITION,position:r.position}),this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),i}addLayerBeforeAt(e,t){var r;let i=this.head;e.id=(r=e.id)!=null?r:++this.id,this.layerCount++;let n=this._createLayer(e),s=n.layer;s.next=t;let a=0;if(i===t)this.head=s,n.color&&this._layerNodes.splice(0,0,{id:s.id,type:Ar.COLOR,color:n.color,alpha:n.alpha,mode:n.mode}),n.position&&this._layerNodes.splice(0,0,{id:s.id,type:Ar.POSITION,position:n.position});else{for(a=1;(i==null?void 0:i.next)!==t;)i=i==null?void 0:i.next,a++;i.next=s,n.color&&this._layerNodes.splice(a,0,{id:s.id,type:Ar.COLOR,color:n.color,alpha:n.alpha,mode:n.mode}),n.position&&this._layerNodes.splice(a,0,{id:s.id,type:Ar.POSITION,position:n.position})}return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),s}addLayerAt(e,t){var r;t.id=(r=t.id)!=null?r:++this.id,this.layerCount++;let i=this._createLayer(t),n=i.layer;if(i.color&&this._layerNodes.splice(e,0,{id:n.id,type:Ar.COLOR,color:i.color,alpha:i.alpha,mode:i.mode}),i.position&&this._layerNodes.splice(e,0,{id:n.id,type:Ar.POSITION,position:i.position}),e==0)n.next=this.head,this.head=n;else{let s=this.head,a=this.head.next;for(let o=0;o<e-1;o++)s=a,a=a.next;n.next=a,s.next=n}return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}removeLayer(e){let t=this.head,r,i=0;if((t==null?void 0:t.id)==e)this.head=t.next;else for(i=1,r=t,t=t==null?void 0:t.next;t!=null;){if(t.id==e){r.next=t.next;break}i++,r=t,t=t.next}return this.cleanupChangedLayer(t),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.uuid=sr.generateUUID(),this.layerCount--,i}changeLayer(e,t){let r,i=this.head,n;if((i==null?void 0:i.id)==e){let s=this._createLayer(Le({id:e,uuid:i.uuid},t));n=s.layer,n.next=i.next,this.head=n,s.color&&(this._layerNodes[0]={id:n.id,type:Ar.COLOR,color:s.color,alpha:s.alpha,mode:s.mode}),s.position&&(this._layerNodes[0]={id:n.id,type:Ar.POSITION,position:s.position}),n.uniforms[`f${e}_mode`].value=i.uniforms[`f${e}_mode`].value,n.uniforms[`f${e}_alpha`].value=i.uniforms[`f${e}_alpha`].value}else{r=i,i=i.next;let s=1;for(;i!=null;){if(i.id==e){let a=this._createLayer(Le({id:e,uuid:i.uuid},t));n=a.layer,r.next=n,n.next=i.next,a.color&&(this._layerNodes[s]={id:e,type:Ar.COLOR,color:a.color,alpha:a.alpha,mode:a.mode}),a.position&&(this._layerNodes[s]={id:e,type:Ar.POSITION,position:a.position}),n.uniforms[`f${e}_mode`].value=i.uniforms[`f${e}_mode`].value,n.uniforms[`f${e}_alpha`].value=i.uniforms[`f${e}_alpha`].value;break}r=i,i=i.next,s++}}return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}getLayer(e){let t=this.head;for(;t!=null&&t.id!=e;)t=t.next;return t}getLayerByUuid(e){let t=this.head;for(;t!==void 0;){if(t.uuid===e)return t;t=t.next}}getLayers(){let e=[],t=this.head;for(;t!=null;)e.push(t),t=t.next;return e}getLayerPosition(e){let t=this.head,r=0;for(;t!==void 0&&t.id!=e;)r++,t=t.next;return r}getDefines(){}getBeforeProgram(){}getLightingProgram(){}getAfterProgram(){}getVarPrograms(){}getUniforms(){}moveLayer(e,t){let r,i=this.head,n;if(e==0)r=this.head,this.head=r.next;else{for(let a=0;a<e;a++)n=i,i=i.next;n.next=i.next,r=i}if(i=this.head,n=void 0,t==0)r.next=this.head,this.head=r;else{for(let a=0;a<t-1;a++)i=i.next;r.next=i==null?void 0:i.next,i.next=r}let s=this._layerNodes.splice(e,1)[0];this._layerNodes.splice(t,0,s),this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors()}updateLayerUniform(){this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors()}copy(e){this.needsUpdate=!1,this.layerCount=e.layerCount,this._layerNodes=[],this.layerCount=0,this.head=void 0,this.rebuildLayerNodes(this.head,e.head);let t=e.head,r=this.head;for(;t.next!=null;)this.rebuildLayerNodes(r,t.next),r=r.next,t=t.next;return this.id=e.id,this.uuid=e.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}createLightLayer(e){let t=new Qe(e.alpha),r=new nr(e.mode);this._material.shadingAlpha=t,this._material.shadingBlend=r,this._layerNodes.push({id:e.id,type:Ar.LIGHTING,alpha:t,mode:r});let i=new Yr(e.id,void 0,{type:Gt.LIGHTING,alpha:t,mode:r});if(this.head===void 0)this.head=i;else{let n=this.head;for(;n.next!=null;)n=n.next;n.next=i}return this.attachLightNodes(),i}rebuildLayerNodes(e,t,r=!1){if(t.type===Gt.LIGHTING){let i=r?t.uniforms[`f${t.id}_alpha`]:new Qe(t.uniforms[`f${t.id}_alpha`].value),n=r?t.uniforms[`f${t.id}_mode`]:new nr(t.uniforms[`f${t.id}_mode`].value);this._material.shadingAlpha=i,this._material.shadingBlend=n,this._layerNodes.push({id:t.id,type:Ar.LIGHTING,alpha:i,mode:n}),this.head===void 0?this.head=new Yr(t.id,t.uuid,{type:Gt.LIGHTING,alpha:i,mode:n}):e&&(e.next=new Yr(t.id,t.uuid,{type:Gt.LIGHTING,alpha:i,mode:n})),this.attachLightNodes(t)}else{let i={type:t.type,id:t.id};for(let n in t.uniforms){let s=t.getName(n);if(!s)continue;let a=`f${t.id}_${s}`;if(Array.isArray(t.uniforms[a].value))i[s]=t.uniforms[a].value.map(o=>o.clone&&!r?o.clone():o);else{let o=t.uniforms[a].value;if(s==="transmissionDepthMap"){i[s]=o;continue}o!=null&&(i[s]=o.clone&&!r&&!o.isRenderTargetTexture?o.clone():o)}}this.addLayer(i)}}attachLightNodes(e){var t,r,i,n,s,a,o,l,h,d,p;let f={},m=this.getLightLayer();switch(this._material.userData.category){case"Lambert":f.emissive=new Xr((r=(t=e==null?void 0:e.getValue("emissive"))==null?void 0:t.clone())!=null?r:0);break;case"Phong":f.shininess=new Qe((i=e==null?void 0:e.getValue("shininess"))!=null?i:30),f.specular=new Xr((s=(n=e==null?void 0:e.getValue("specular"))==null?void 0:n.clone())!=null?s:1118481);break;case"Toon":f.shininess=new Qe((a=e==null?void 0:e.getValue("shininess"))!=null?a:30),f.specular=new Xr((l=(o=e==null?void 0:e.getValue("specular"))==null?void 0:o.clone())!=null?l:1118481);break;case"Physical":f.roughness=new Qe((h=e==null?void 0:e.getValue("roughness"))!=null?h:.3),f.metalness=new Qe((d=e==null?void 0:e.getValue("metalness"))!=null?d:0),f.reflectivity=new Qe((p=e==null?void 0:e.getValue("reflectivity"))!=null?p:.5);break}Object.keys(f).forEach(y=>{this._material[y]=f[y],m.uniforms[`f${m.id}_${y}`]=f[y]})}clone(e){return new hu(e).copy(this)}toJSON(e){return{id:this.id,uuid:this.uuid,head:this.head.toJSON(e)}}fromJSON(e,t,r){let i=new Yr(e.head.id,void 0,{type:e.head.type}).fromJSON(e.head,t),n=e.head.next,s=i;for(;n!=null;)s.next=new Yr(n.id,void 0,{type:n.type}).fromJSON(n,t),n=n.next,s=s.next;this._layerNodes=[],this.head=void 0,this.rebuildLayerNodes(this.head,i,!0);let a=i;for(s=this.head;a.next!=null;)this.rebuildLayerNodes(s,a.next,!0),s=s.next,a=a.next;return this._material=r,this.id=e.id,this.uuid=e.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}getLightLayer(){var e;let t=this.head;for(;t!==void 0&&t.type!=="light";)t=(e=t.next)!=null?e:t;return t}dispose(){let e=this.head;for(this._layerNodes=[],this.layerCount=0;e!==void 0;)e.hasOwnProperty("dispose")===!0&&e.dispose(),e=e.next;this.head=void 0}_createLayer(e){var t,r,i,n,s,a,o,l,h,d,p,f,m,y,b,x,v,g,_,S,T,A,M,O,P,C,N,U,V,k,G,Z,W,$,ae,te,H,X,J,se,ge,Y,be,fe,ee,Q,ie,oe,me,pe,we,Ae,F,B,de,Oe,Ce,Re,ze,Ke,je,Ye,re,Ie,Me,Ve,Be,at,kt,vr,Si,$t,di,Fi,qs,Ui,ys,Cr,ki;let Kr=e.type;switch(Kr){case Gt.COLOR:{let ht=new Xr((t=e.color)!=null?t:fs),xt=new Qe((r=e.alpha)!=null?r:1),wt=new Or("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");wt.keywords.alpha=xt;let _t=new nr((i=e.mode)!=null?i:0);return ht.alpha=xt,{layer:new Yr(e.id,e.uuid,{type:Kr,color:ht,alpha:xt,calpha:wt,mode:_t}),color:ht,alpha:wt,mode:_t}}case Gt.TEXTURE:{let ht=(n=e.texture)!=null?n:new ih,xt=ht.matrix;e.mat&&xt.copy(e.mat),ht.needsUpdate=!0;let wt=new Qe((s=e.crop)!=null?s:0),_t=new nr((a=e.projection)!=null?a:0),Dt=new nr((o=e.axis)!=null?o:0),Xt=new is(e.size?new q(e.size[0],e.size[1]):new q(100,100)),Ht=new Qe((l=e.alpha)!=null?l:1),er=new nr((h=e.mode)!=null?h:0),z=new pa(ht),he=new ss((d=e.textureSize)!=null?d:new L(ht.image?ht.image.width:0,ht.image?ht.image.height:0)),le=new XR(z,he,wt,_t,Dt,Xt,Ht,er),ye=new Or(le.calpha,"f");return{layer:new Yr(e.id,e.uuid,{type:Kr,texture:z,textureSize:he,crop:wt,projection:_t,axis:Dt,size:Xt,mat:le.mat,alpha:Ht,calpha:ye,mode:er}),color:le,alpha:ye,mode:er}}case Gt.MATCAP:{let ht=new Xr((p=e.color)!=null?p:16777215),xt=(f=e.texture)!=null?f:new ih;xt.needsUpdate=!0;let wt=new Qe((m=e.alpha)!=null?m:1),_t=new pa(xt),Dt=new nr((y=e.mode)!=null?y:0),Xt=new hN(ht,_t,wt,Dt),Ht=new Or(Xt.calpha,"f");return{layer:new Yr(e.id,e.uuid,{type:Kr,texture:_t,color:ht,alpha:wt,calpha:Ht,mode:Dt}),color:Xt,alpha:Ht,mode:Dt}}case Gt.FRESNEL:{let ht=new Xr((b=e.color)!=null?b:16777215),xt=new Qe((x=e.bias)!=null?x:.1),wt=new Qe((v=e.scale)!=null?v:1),_t=new Qe((g=e.intensity)!=null?g:2),Dt=new Qe((_=e.factor)!=null?_:1),Xt=new Qe((S=e.alpha)!=null?S:1),Ht=new nr((T=e.mode)!=null?T:0),er=new QR(ht,xt,wt,_t,Dt,Xt,Ht),z=new Or(er.calpha,"f");return{layer:new Yr(e.id,e.uuid,{type:Kr,color:ht,bias:xt,scale:wt,intensity:_t,factor:Dt,alpha:Xt,calpha:z,mode:Ht}),color:er,alpha:z,mode:Ht}}case Gt.RAINBOW:{let ht=new Qe((A=e.filmThickness)!=null?A:30),xt=new Qe((M=e.movement)!=null?M:0),wt=new ss((O=e.wavelengths)!=null?O:new L(0,0,0)),_t=new Qe((P=e.noiseStrength)!=null?P:0),Dt=new Qe((C=e.noiseScale)!=null?C:1),Xt=new ss((N=e.offset)!=null?N:new L(0,0,0)),Ht=new Qe((U=e.alpha)!=null?U:1),er=new ZR(ht,xt,wt,_t,Dt,Xt,Ht),z=new Or(er.calpha,"f"),he=new nr((V=e.mode)!=null?V:0);return{layer:new Yr(e.id,e.uuid,{type:Kr,filmThickness:ht,movement:xt,wavelengths:wt,noiseStrength:_t,noiseScale:Dt,offset:Xt,alpha:Ht,calpha:z,mode:he}),color:er,alpha:z,mode:he}}case Gt.TRANSMISSION:{let ht=new Qe((k=e.thickness)!=null?k:10),xt=new Qe((G=e.ior)!=null?G:1.5),wt=new Qe((Z=e.roughness)!=null?Z:.5),_t=new is((W=e.transmissionSamplerSize)!=null?W:new q(2048,2048)),Dt=($=e.transmissionSamplerMap)!=null?$:new ih,Xt=(ae=e.transmissionDepthMap)!=null?ae:new ih,Ht=new pa(Dt),er=new pa(Xt),z=window.innerWidth,he=window.innerHeight,le=z>=he?new is(he/z,1):new is(1,z/he),ye=new Qe((te=e.alpha)!=null?te:1),Pe=new eN(ht,xt,wt,_t,Ht,er,le,ye),Ze=new Or(Pe.calpha,"f"),qe=new nr((H=e.mode)!=null?H:0);return{layer:new Yr(e.id,e.uuid,{type:Kr,thickness:ht,ior:xt,roughness:wt,transmissionSamplerSize:_t,transmissionSamplerMap:Ht,transmissionDepthMap:er,aspectRatio:le,alpha:ye,calpha:Ze,mode:qe}),color:Pe,alpha:Ze,mode:qe}}case Gt.DEPTH:{let ht=new nr((X=e.gradientType)!=null?X:0),xt=new uL((J=e.smooth)!=null?J:!1),wt=new Qe((se=e.near)!=null?se:50),_t=new Qe((ge=e.far)!=null?ge:200),Dt=new Qe((Y=e.isVector)!=null?Y:1),Xt=new Qe((be=e.isWorldSpace)!=null?be:0),Ht=new ss((fe=e.origin)!=null?fe:new L),er=new ss((ee=e.direction)!=null?ee:new L),z;e.colors?z=new Td(e.colors.length,e.colors):(z=new Td(10,new Tt(0,0,0,1)),z.value[1]=new Tt(1,1,1,1));let he;e.steps?he=new Ym(e.steps.length,e.steps):(he=new Ym(10,1),he.value[0]=0);let le=new Qe((Q=e.alpha)!=null?Q:1),ye=new nr((ie=e.mode)!=null?ie:0),Pe=new lN(ht,xt,wt,_t,Dt,Xt,Ht,er,z,he,le),Ze=new Or(Pe.calpha,"f");return{layer:new Yr(e.id,e.uuid,{type:Kr,gradientType:ht,smooth:xt,near:wt,far:_t,isVector:Dt,isWorldSpace:Xt,origin:Ht,direction:er,colors:z,steps:he,alpha:le,calpha:Ze,mode:ye}),color:Pe,alpha:Ze,mode:ye}}case Gt.NOISE:{let ht=new Qe((oe=e.scale)!=null?oe:1),xt=new ss((me=e.size)!=null?me:new L(100,100,100)),wt=new Qe((pe=e.move)!=null?pe:1),_t=new is((we=e.fA)!=null?we:new q(1.7,9.2)),Dt=new is((Ae=e.fB)!=null?Ae:new q(8.3,2.8)),Xt=new is((F=e.distortion)!=null?F:new q(1,1)),Ht=new yh(e.colorA),er=new yh(e.colorB),z=new yh(e.colorC),he=new yh(e.colorD),le=new Qe((B=e.alpha)!=null?B:1),ye=new nr((de=e.mode)!=null?de:0),Pe=new nr((Oe=e.noiseType)!=null?Oe:0),Ze=new aN(ht,xt,wt,_t,Dt,Xt,Ht,er,z,he,le,Pe),qe=new Or(Ze.calpha,"f");return{layer:new Yr(e.id,e.uuid,{type:Kr,scale:ht,size:xt,move:wt,fA:_t,fB:Dt,distortion:Xt,colorA:Ht,colorB:er,colorC:z,colorD:he,alpha:le,calpha:qe,mode:ye,noiseType:Pe}),color:Ze,alpha:qe,mode:ye}}case Gt.NORMAL:{let ht=new ss((Ce=e.cnormal)!=null?Ce:new L(1,1,1)),xt=new Qe((Re=e.alpha)!=null?Re:1),wt=new nr((ze=e.mode)!=null?ze:0),_t=new rN(ht,xt),Dt=new Or("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return Dt.keywords.alpha=xt,{layer:new Yr(e.id,e.uuid,{type:Kr,cnormal:ht,alpha:xt,calpha:Dt,mode:wt}),color:_t,alpha:Dt,mode:wt}}case Gt.GRADIENT:{let ht=new nr((Ke=e.gradientType)!=null?Ke:0),xt=new uL((je=e.smooth)!=null?je:!1),wt;e.colors?wt=new Td(e.colors.length,e.colors):(wt=new Td(10,new Tt(0,0,0,1)),wt.value[1]=new Tt(1,1,1,1));let _t;e.steps?_t=new Ym(e.steps.length,e.steps):(_t=new Ym(10,1),_t.value[0]=0);let Dt=new is((Ye=e.offset)!=null?Ye:new q(0,0)),Xt=new is((re=e.morph)!=null?re:new q(0,0)),Ht=new Qe((Ie=e.angle)!=null?Ie:0),er=new Qe((Me=e.alpha)!=null?Me:1),z=new nr((Ve=e.mode)!=null?Ve:0),he=new nN(ht,xt,wt,_t,Dt,Xt,Ht,er),le=new Or(he.calpha,"f");return{layer:new Yr(e.id,e.uuid,{type:Kr,gradientType:ht,smooth:xt,colors:wt,steps:_t,offset:Dt,morph:Xt,angle:Ht,alpha:er,calpha:le,mode:z}),color:he,alpha:le,mode:z}}case Gt.DISPLACE:{let ht=new nr((Be=e.displacementType)!=null?Be:0);if(ht.value===0){let xt=new ss((at=e.offset)!=null?at:new L(0,0,0)),wt=new Qe((kt=e.scale)!=null?kt:10),_t=new Qe((vr=e.intensity)!=null?vr:8),Dt=new Qe((Si=e.movement)!=null?Si:1),Xt=new Qe(($t=e.alpha)!=null?$t:1),Ht=new nr((di=e.mode)!=null?di:0),er=new nr((Fi=e.noiseType)!=null?Fi:0),z=new Uw(ht,_t,Dt,xt,wt,er);return{layer:new Yr(e.id,e.uuid,{displacementType:ht,type:Kr,offset:xt,scale:wt,intensity:_t,movement:Dt,alpha:Xt,mode:Ht,noiseType:er}),position:z}}else if(ht.value===1){let xt=(qs=e.texture)!=null?qs:new ih,wt=xt.matrix;e.mat&&wt.copy(e.mat),xt.needsUpdate=!0;let _t=new Qe((Ui=e.intensity)!=null?Ui:8),Dt=new pa(xt),Xt=new Qe((ys=e.crop)!=null?ys:0),Ht=new Qe((Cr=e.alpha)!=null?Cr:1),er=new nr((ki=e.mode)!=null?ki:0),z=new Uw(ht,_t,Dt,Xt);return{layer:new Yr(e.id,e.uuid,{displacementType:ht,type:Kr,intensity:_t,texture:Dt,crop:Xt,mat:z.mat,alpha:Ht,mode:er}),position:z}}return{}}}return{}}blendColors(){let e=this._layerNodes.findIndex(r=>r.type===Ar.COLOR),t=this._layerNodes.findIndex(r=>r.type===Ar.LIGHTING);if(e!==-1&&e<t){let r=this._layerNodes[e].color;for(let i=e+1;i<t;++i){let n=this._layerNodes[i];n.type===Ar.COLOR&&(r=new cL(r,n.color,n.alpha,n.mode))}this._material.color=r}else this._material.color=void 0}blendAfterColors(){let e=new Or("outgoingLight","f"),t=this._layerNodes.findIndex(r=>r.type===Ar.LIGHTING);if(this._layerNodes.length>t+1){for(let r=t+1;r<this._layerNodes.length;++r){let i=this._layerNodes[r];i.type===Ar.COLOR&&(e=new cL(e,i.color,i.alpha,i.mode))}"afterColor"in this._material&&(this._material.afterColor=e)}else"afterColor"in this._material&&(this._material.afterColor=void 0)}blendPositions(){let e=this._layerNodes.filter(t=>t.type===Ar.POSITION);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new xa(t,e[r].position,xa.ADD),t=new xa(t,new Qe(.5).setReadonly(!0),xa.MUL));this._material.position=t}else this._material.position=void 0}cleanupChangedLayer(e){switch(this._layerNodes=this._layerNodes.filter(t=>t.id!==e.id),e.type){case Gt.DISPLACE:{this.blendPositions();break}default:{this.blendColors(),this.blendAfterColors();break}}}},_c=class extends Bi{constructor(e,t,r){super(r);this.isNodeMaterial=!0,this.type="NodeMaterial",this.wireframeLinecap="",this.wireframeLinejoin="",this.uniformsBackup={},this.userData={type:"",category:"",nodeType:""},this.fog=!0,this.vertex=e!=null?e:new oL(new zn(zn.PROJECTION)),this.fragment=t!=null?t:new oL(new Xr(fs)),this.updaters=[],this.isDetached=!0,this.dithering=!0,this.onBeforeCompile=this._onBeforeCompile}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}_onBeforeCompile(e,t){this.build({renderer:t}),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}_getLayerStack(e){let t=new hu(this);return e&&(async()=>{for(;e.image===void 0;)await new Promise(r=>requestAnimationFrame(r));t.addLayerAt(1,{type:Gt.TEXTURE,texture:e}),this.dispose()})(),t}clampUniformsForPreview(e,t){let r=(i,n,s)=>Math.min(Math.max(i,n),s);if(this.userData.layers){for(let i of this.userData.layers.getLayers())if(i.type==Gt.DISPLACE){this.uniformsBackup[`f${i.id}_intensity`]=i.uniforms[`f${i.id}_intensity`].value;let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}}restoreClampedUniforms(){if(this.userData.layers)for(let e of this.userData.layers.getLayers())e.type==Gt.DISPLACE&&(e.uniforms[`f${e.id}_intensity`].value=this.uniformsBackup[`f${e.id}_intensity`])}customProgramCacheKey(){return this.getHash()}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(e){var t;e=e!=null?e:{};let r=(t=e.builder)!=null?t:new Wre;return r.setMaterial(this,e.renderer),r.build(this.vertex,this.fragment),this.vertexShader=r.getCode("vertex"),this.fragmentShader=r.getCode("fragment"),this.defines=r.defines,this.uniforms=r.uniforms,this.extensions=r.extensions,this.updaters=r.updaters,this.fog=r.requires.fog,this.lights=r.requires.lights,this.transparent=r.requires.transparent||this.blending>Ph,this}getHash(){let e="{";return e+='"vertex":'+this.vertex.getHash()+",",e+='"fragment":'+this.fragment.getHash(),e+="}",e}copy(e){let t=this.uuid;for(let r in e)this[r]=e[r];return this.uuid=t,e.userData!==void 0&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this}toJSON(e){let t=this.userData.layers;this.userData.layers=void 0;let r=super.toJSON(e);return r.type="ShaderMaterial",r.userData={type:this.userData.type,category:this.userData.category,nodeType:this.type,layers:t.toJSON(e)},r.vertex=this.vertex.toJSON(e).uuid,r.fragment=this.fragment.toJSON(e).uuid,delete r.vertexShader,delete r.fragmentShader,delete r.color,delete r.shininess,delete r.specular,delete r.roughness,delete r.metalness,delete r.uniforms,e&&!e.materials[this.uuid]&&(e.materials[this.uuid]=r),this.userData.layers=t,r}fromJSON(e,t){var r;this.defines=(r=e.defines)!=null?r:{},this.depthFunc=e.depthFunc,this.depthWrite=e.depthWrite,this.side=e.side!==void 0?e.side:sl,this.transparent=e.transparent,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.wireframe=e.wireframe,this.userData.layers.fromJSON(e.userData.layers,t,this)}};Object.defineProperties(_c.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){e===!0&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}});var Jre=class extends Ft{constructor(){super("basic");this.nodeType="Basic",this.color=new Xr(fs)}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(pc.merge([Fe.fog])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif","#include <fog_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED"," vNormal = normalize( transformedNormal );","#endif",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Xr(fs)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif"].join(`
`));let s=["#include <normal_fragment_begin>",r.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),n?s.push(n.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${n.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${r.result};`),i?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} );`):s.push("gl_FragColor = vec4("+r.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),e.position&&(this.position=e.position.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.color&&(t.color=this.color.toJSON(e).uuid),this.position&&(t.position=this.position.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid),this.shadingAlpha&&(t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid),this.shadingBlend&&(t.shadingBlend=this.shadingBlend.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),this}},Yre=class extends _c{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}constructor(e=new Jre,t){super(e,e,t);this.type="BasicNodeMaterial",this.fragment=e}},lo=class extends Yre{constructor(e,t,r){super(t,e);this.userData.type="BasicMaterial",this.userData.category="Basic",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof hu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new lo(void 0,i);return n.fromJSON(t,r),n}static fromMaterial(e){let t=new lo(e.map?{map:e.map}:{}),r=t.fragment;return r.color.value.copy(e.color),r.alpha.value=e.opacity,t}dispose(){super.dispose()}},Xre=class extends Ft{constructor(){super("phong");this.nodeType="Phong",this.color=new Xr(fs),this.specular=new Xr(1118481),this.shininess=new Qe(30),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(pc.merge([Fe.fog,Fe.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Xr(fs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.specular=e.specular.clone(),this.shininess=e.shininess.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid,t.shadingBlend=this.shadingBlend.toJSON(e).uuid,this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.specular&&(this.specular=t.getNode(e.specular)),e.shininess&&(this.shininess=t.getNode(e.shininess)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),this}},qre=class extends _c{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get specular(){return this.fragment.specular}set specular(e){this.fragment.specular=e}get shininess(){return this.fragment.shininess}set shininess(e){this.fragment.shininess=e}constructor(e=new Xre,t){super(e,e,t);this.type="PhongNodeMaterial",this.fragment=e}},ec=class extends qre{constructor(e,t,r){super(t,e);this.userData.type="PhongMaterial",this.userData.category="Phong",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof hu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new ec(void 0,i);return n.fromJSON(t,r),n}static fromMaterial(e){let t=new ec(e.map?{map:e.map}:{}),r=t.fragment;return r.color.value.copy(e.color),r.alpha.value=e.opacity,t}dispose(){super.dispose()}},Qre=class extends Ft{constructor(){super("lambert");this.nodeType="Lambert",this.color=new Xr(fs),this.emissive=new Xr(0),this.emissiveIntensity=new Qe(1),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(pc.merge([Fe.fog,Fe.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = PI * directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = PI * directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = PI * directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Xr(fs)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];h.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += (isFrontFacing) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = (isFrontFacing) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&h.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}copy(e){return super.copy(e),this.emissiveIntensity=e.emissiveIntensity.clone(),e.color&&(this.color=e.color.clone()),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),e.emissive&&(this.emissive=e.emissive.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.emissiveIntensity=this.emissiveIntensity.toJSON(e).uuid,t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid,t.shadingBlend=this.shadingBlend.toJSON(e).uuid,this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.emissiveIntensity&&(this.emissiveIntensity=t.getNode(e.emissiveIntensity)),this}},Kre=class extends _c{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get emissive(){return this.fragment.emissive}set emissive(e){this.fragment.emissive=e}get emissiveIntensity(){return this.fragment.emissiveIntensity}set emissiveIntensity(e){this.fragment.emissiveIntensity=e}constructor(e=new Qre,t){super(e,e,t);this.type="LambertNodeMaterial",this.fragment=e}},cN=class extends Kre{constructor(e,t,r){super(t,e);this.userData.type="LambertMaterial",this.userData.category="Lambert",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof hu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new cN(void 0,i);return n.fromJSON(t,r),n}dispose(){super.dispose()}},Zre=class extends Ft{constructor(){super("toon");this.nodeType="Toon",this.color=new Xr(fs),this.specular=new Xr(1118481),this.shininess=new Qe(30),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(pc.merge([Fe.fog,Fe.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Xr(fs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					#ifndef FLAT_SHADED
						varying vec3 vNormal;
					#endif
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
						#ifndef PHYSICALLY_CORRECT_LIGHTS
							irradiance *= PI;
						#endif
						reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.specular=e.specular.clone(),this.shininess=e.shininess.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.shadingAlpha&&(t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid),this.shadingBlend&&(t.shadingBlend=this.shadingBlend.toJSON(e).uuid),this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.specular&&(this.specular=t.getNode(e.specular)),e.shininess&&(this.shininess=t.getNode(e.shininess)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),this}},$re=class extends _c{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get specular(){return this.fragment.specular}set specular(e){this.fragment.specular=e}get shininess(){return this.fragment.shininess}set shininess(e){this.fragment.shininess=e}constructor(e=new Zre,t){super(e,e,t);this.type="ToonNodeMaterial",this.fragment=e}},dN=class extends $re{constructor(e,t,r){super(t,e);this.userData.type="ToonMaterial",this.userData.category="Toon",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof hu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new dN(void 0,i);return n.fromJSON(t,r),n}dispose(){super.dispose()}},eie=class extends Ft{constructor(){super("standard");this.nodeType="Standard",this.color=new Xr(fs),this.roughness=new Qe(.3),this.metalness=new Qe(0),this.reflectivity=new Qe(.5),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(pc.merge([Fe.fog,Fe.lights])),Fe.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=i.join(`
`)}else{let r={gamma:!0};this.color===void 0&&(this.color=new Xr(fs)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let i=this.color.flow(e,"c",{slot:"color",context:r}),n=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let p=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];p.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	float roughnessFactor = "+n.result+";",s.code,"	float metalnessFactor = "+s.result+";"),h&&p.push(h.code,"#ifdef ALPHATEST","	if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.specularRoughness = max( roughnessFactor, 0.0525 );","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?p.push(d.code,"material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),p.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${o.result} );
				}
				`),l&&p.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.roughness=e.roughness.clone(),this.metalness=e.metalness.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.reflectivity&&(this.reflectivity=e.reflectivity.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.roughness=this.roughness.toJSON(e).uuid,t.metalness=this.metalness.toJSON(e).uuid,this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.reflectivity&&(t.reflectivity=this.reflectivity.toJSON(e).uuid),this.shadingAlpha&&(t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid),this.shadingBlend&&(t.shadingBlend=this.shadingBlend.toJSON(e).uuid),this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.roughness&&(this.roughness=t.getNode(e.roughness)),e.metalness&&(this.metalness=t.getNode(e.metalness)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.reflectivity&&(this.reflectivity=t.getNode(e.reflectivity)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),this}},tie=class extends _c{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get roughness(){return this.fragment.roughness}set roughness(e){this.fragment.roughness=e}get metalness(){return this.fragment.metalness}set metalness(e){this.fragment.metalness=e}get reflectivity(){return this.fragment.reflectivity}set reflectivity(e){this.fragment.reflectivity=e}constructor(e=new eie,t){super(e,e,t);this.type="StandardNodeMaterial",this.fragment=e}},pN=class extends tie{constructor(e,t,r){super(t,e);this.userData.type="PhysicalMaterial",this.userData.category="Physical",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof hu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new pN(void 0,i);return n.fromJSON(t,r),n}dispose(){super.dispose()}};function fN(e,t){switch(e.data.type){case"light":return Xs(e);case"fresnel":return iie(e,t);case"gradient":return nie(e);case"depth":return sie(e);case"normal":return aie(e);case"noise":return oie(e,t);case"texture":return lie(e,t);case"rainbow":return uie(e);case"transmission":return hie(e,t);case"matcap":return cie(e,t);case"displace":return die(e);case"color":default:return rie(e,t)}}function mN(e){return{type:e.data.type}}function Xs(e){let{alpha:t,mode:r}=e.data;return tt(Le({},mN(e)),{alpha:t,mode:r})}function rie(e,t){return tt(Le({},Xs(e)),{color:Xi(e.data.color,t)})}function iie(e,t){let{bias:r,scale:i,intensity:n,factor:s,color:a}=e.data;return tt(Le({},Xs(e)),{color:Xi(a,t),bias:r,scale:i,intensity:n,factor:s})}function nie(e){let{gradientType:t,smooth:r,colors:i,steps:n,angle:s,offset:a,morph:o}=e.data;return tt(Le({},Xs(e)),{gradientType:t,smooth:r,colors:i.map(l=>new Tt(l[0],l[1],l[2],l[3])),num:i.length,steps:n,offset:new q(...a),morph:new q(...o),angle:s})}function sie(e){let{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:a,direction:o,colors:l,steps:h,smooth:d}=e.data;return tt(Le({},Xs(e)),{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:new L(...a),direction:o?new L(...o):new L(1,0,0),num:l.length,colors:l.map(p=>new Tt(p[0],p[1],p[2],p[3])),steps:h,smooth:d})}function aie(e){let{cnormal:t}=e.data;return tt(Le({},Xs(e)),{cnormal:new L(t[0],t[1],t[2])})}function oie(e,t){let{data:r}=e;return tt(Le({},Xs(e)),{scale:r.scale,move:r.move,fA:new q(...r.fA),fB:new q(...r.fB),distortion:new q(...r.distortion),colorA:Xi(r.colorA,t),colorB:Xi(r.colorB,t),colorC:Xi(r.colorC,t),colorD:Xi(r.colorD,t),noiseType:r.noiseType})}function lie(e,t){let{projection:r,axis:i,crop:n,size:s}=e.data,{image:a,wrapping:o,repeat:l,offset:h}=e.data.texture,d=new Rr,p;if(typeof a=="string")p=t==null?void 0:t.getImage(a);else{let f=new Image;f.src=a.data,f.onload=()=>{t!=null&&t.onImageLoad&&(t==null||t.onImageLoad(a.data))},p=f}return d.image=p,d.wrapS=d.wrapT=o,tt(Le({},Xs(e)),{texture:d,mat:new Dr().setUvTransform(h[0],h[1],l[0],l[1],0,0,0),crop:n,projection:r,axis:["x","y","z"].indexOf(i),size:s})}function uie(e){let{data:t}=e;return tt(Le({},Xs(e)),{filmThickness:t.filmThickness,movement:t.movement,wavelengths:new L(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new L(...t.offset)})}function hie(e,t){let{data:r}=e;return tt(Le({},Xs(e)),{thickness:r.thickness,ior:r.ior,roughness:r.roughness,transmissionSamplerMap:t.transmissionSamplerMap,transmissionDepthMap:t.transmissionDepthMap})}function cie(e,t){let r=new Rr,{image:i}=e.data.texture,n;if(typeof i=="string")n=t==null?void 0:t.getImage(i);else{let a=new Image;a.src=i.data,a.onload=()=>{t!=null&&t.onImageLoad&&(t==null||t.onImageLoad(i.data))},n=a}r.image=n;let s=16777215;return tt(Le({},Xs(e)),{color:s,texture:r})}function die(e){let{data:t}=e,r=tt(Le({},mN(e)),{intensity:t.intensity});if(t.displacementType==="noise")return tt(Le({},r),{offset:new L(...t.offset),scale:t.scale,movement:t.movement,noiseType:t.noiseType});{let i=new Rr,n=new Dr().setUvTransform(0,0,1,1,0,0,0);return tt(Le({},r),{texture:i,mat:n,crop:t.crop})}}function gN(e,t,r){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];return i?(i.value=r.alpha*(r.visible?1:0),i):void 0}}var qd;(function(e){function t(r){return new Ue(r.x,r.y,r.z).getHex()}e.getHex=t})(qd||(qd={}));var dL;(function(e){function t(r){return new Tt(r.r,r.g,r.b,r.a)}e.getThreeVector4=t})(dL||(dL={}));var pL;(function(e){function t(i,n){i.setRGB(n.r,n.g,n.b)}e.setThreeColor=t;function r(i){return new Ue(i.r,i.g,i.b).getHex()}e.getHex=r})(pL||(pL={}));function Cp(e,t){return typeof e=="string"?t.getMaterialOrDeletedPlaceholder(e):vN(e,t)}function pie(e,t){return e.map(r=>Cp(r,t))}function vN(e,t){var r;let i=(r=e.layers)!=null?r:cv.defaultTwoLayerData("phong").layers,n=fie(i),s;switch(n.category){case"basic":s=new lo;break;case"lambert":{s=new cN;break}case"toon":{s=new dN;break}case"physical":s=new pN;break;case"phong":default:{s=new ec;break}}let a=s.userData.layers;mie(a);for(let o=i.length-1;o>=0;o--)gie(a,i[o],t);switch(n.category){case"basic":break;case"lambert":{let h=s,d=Xi(n.emissive,t);d instanceof Ue?h.emissive.value=d:h.emissive.value.setHex(qd.getHex(d));break}case"toon":{let h=s,d=n;h.shininess.value=d.shininess;let p=Xi(d.specular,t);p instanceof Ue?h.specular.value=p:h.specular.value.setHex(qd.getHex(p));break}case"physical":let o=s,l=n;o.metalness.value=l.metalness,o.roughness.value=l.roughness,o.reflectivity.value=l.reflectivity;break;case"phong":default:{let h=s,d=n;h.shininess.value=d.shininess;let p=Xi(d.specular,t);p instanceof Ue?h.specular.value=p:h.specular.value.setHex(qd.getHex(p));break}}return a.blendColors(),a.blendAfterColors(),a.blendPositions(),s}function fie(e){for(let t of e)if(t.data.type==="light")return t.data;return{type:"light",category:"basic",visible:!0,alpha:1,mode:Cw.Normal}}function mie(e){for(let t of e.getLayers())e.removeLayer(t.id)}function gie(e,t,r){let i=fN(t,r);i.type==="transmission"&&(i.transmissionSamplerMap=r==null?void 0:r.transmissionSamplerMap,i.transmissionDepthMap=r==null?void 0:r.transmissionDepthMap);let n=e.addLayer(i);n.uuid=t.id;for(let s in t.data)gN(s,n,t.data)}var Qd=new Set,qa;(function(e){e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING"})(qa||(qa={}));var Lp=class{constructor(){this.easing=4,this.duration=1e3,this.delay=0,this.cubicControls=[.5,.05,.1,.3],this.springParameters={mass:1,stiffness:80,damping:10,velocity:0},this.repeat=!1,this.cycle=!1,this.rewind=!1}static create(e){let t=new Lp,r=e;return t.easing=e.easing,t.duration=e.duration,t.delay=e.delay,r.easing===av.CUBIC?t.cubicControls=[...r.control1,...r.control2]:r.easing===av.SPRING&&(t.springParameters={mass:r.mass,stiffness:r.stiffness,damping:r.damping,velocity:r.velocity}),t.repeat=e.repeat,t.cycle=e.cycle,t.rewind=e.rewind,t}get sp_mass(){return this.springParameters.mass}set sp_mass(e){this.springParameters.mass=e}get sp_stiffness(){return this.springParameters.stiffness}set sp_stiffness(e){this.springParameters.stiffness=e}get sp_damping(){return this.springParameters.damping}set sp_damping(e){this.springParameters.damping=e}get sp_velocity(){return this.springParameters.velocity}set sp_velocity(e){this.springParameters.velocity=e}copy(e){return this.easing=e.easing,this.duration=e.duration,this.delay=e.delay,this.cubicControls=[...e.cubicControls],this.springParameters=Le({},e.springParameters),this.repeat=e.repeat,this.cycle=e.cycle,this.rewind=e.rewind,this}clone(){return new Lp().copy(this)}toJSON(){let e={easing:this.easing,duration:this.duration,delay:this.delay,cubicControls:this.cubicControls,springParameters:Le({},this.springParameters)};return this.repeat===!0&&(e.repeat=!0),this.cycle===!0&&(e.cycle=!0),this.rewind===!0&&(e.rewind=!0),this.object!==void 0&&(e.object=this.object.uuid),this.state!==void 0&&(e.state=this.state.uuid),e}fromJSON(e,t,r){return this.easing=e.easing,this.duration=e.duration,this.delay=e.delay,this.cubicControls=[...e.cubicControls],this.springParameters.mass=e.springParameters.mass,this.springParameters.stiffness=e.springParameters.stiffness,this.springParameters.damping=e.springParameters.damping,this.springParameters.velocity=e.springParameters.velocity,e.repeat!==void 0&&(this.repeat=e.repeat),e.cycle!==void 0&&(this.cycle=e.cycle),e.rewind!==void 0&&(this.rewind=e.rewind),e.object!==void 0&&(this.object=t[e.object]),e.state!==void 0&&(this.state=r[e.state]),this}};function vie(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Et;(function(e){e[e.MOUSE_DOWN=0]="MOUSE_DOWN",e[e.MOUSE_UP=1]="MOUSE_UP",e[e.MOUSE_HOVER=2]="MOUSE_HOVER",e[e.MOUSE_ENTER=3]="MOUSE_ENTER",e[e.MOUSE_LEAVE=4]="MOUSE_LEAVE",e[e.KEY_DOWN=5]="KEY_DOWN",e[e.KEY_UP=6]="KEY_UP",e[e.START=7]="START",e[e.OPEN_LINK=8]="OPEN_LINK",e[e.LOOK_AT=9]="LOOK_AT",e[e.FOLLOW=10]="FOLLOW",e[e.SCROLL=11]="SCROLL"})(Et||(Et={}));var yv=class{constructor(e,t){this.targets=[],this._type=e,this.key=t}get type(){return this._type}set type(e){this._type=e,e===9?this.distance=1e3:this.distance=void 0,e!==5&&e!==6&&(this.key=void 0)}newTarget(e){let t=new Lp;if(t.object=e,e!==void 0){let r=e.interaction.states;r.length>0&&(t.state=r[r.length-1])}return this.targets.push(t),Qd.add(t),t}addTarget(e,t=0){this.targets.splice(t,0,e),Qd.add(e)}removeTarget(e){Qd.delete(this.targets[e]),this.targets.splice(e,1)}dispatchReverse(){for(let e=0,t=this.targets.length;e<t;++e){let r=this.targets[e];r.state!==void 0&&r.object!==void 0&&r.object.interaction.reverse(r)}}dispatch(e){this.url!==void 0&&(this._type===8||this._type===0||this._type===1||this._type===5||this._type===6)&&(vie()?window.location.assign(this.url):window.open(this.url,"_blank"));for(let t=0,r=this.targets.length;t<r;++t){let i=this.targets[t];i.state!==void 0&&i.object!==void 0&&(this._type===11?i.object.interaction.seek(i,e,this.steps):i.object.interaction.play(i))}}copy(e){return this._type=e.type,this.key=e.key,this.url=e.url,this.distance=e.distance,this}clone(){return new yv().copy(this)}toJSON(){let e={type:this._type,key:this.key,ui:{isCollapsed:!1}};if(this.url!==void 0&&(e.url=this.url),this.distance!==void 0&&(e.distance=this.distance),this.targets.length>0){e.targets=[];for(let t=0,r=this.targets.length;t<r;++t)e.targets.push(this.targets[t].toJSON())}return e}fromJSON(e,t,r){if(this._type=e.type,this.key=e.key,this.targets=[],this.url=e.url,e.distance!==void 0&&(this.distance=e.distance),e.targets!==void 0)for(let i=0,n=e.targets.length;i<n;++i)this.addTarget(new Lp().fromJSON(e.targets[i],t,r),i);return this}},tc=class{constructor(){this.uuid=sr.generateUUID(),this.name="",this.position=new L,this.rotation=new al,this.scale=new L,this.hiddenMatrix=new He}static create(e,t,r){let i=new tc;if(i.uuid=e,i.position.fromArray(t.position),i.scale.fromArray(t.scale),i.rotation.fromArray(t.rotation),i.hiddenMatrix.fromArray(t.hiddenMatrix),"geometry"in t&&(i.geometry=t.geometry),"material"in t&&(i.material={layersList:Cp(t.material,r).layersList.getLayers()}),"materials"in t&&(i.material=t.materials.map(n=>({layersList:Cp(n,r).layersList.getLayers()}))),"perspective"in t&&(i.camera={zoomOrtho:t.orthographic.zoom,zoomPersp:t.perspective.zoom,targetOffset:t.targetOffset}),uv.is(t.type)){let n=t;i.light={intensity:n.intensity,color:Xi(n.color,r)}}return i}update(e){this.updateMatrix(e),"geometry"in e&&this.updateGeometry(e),"material"in e&&this.updateMaterial(e),e.objectType==="CombinedCamera"?this.updateCamera(e):(e.objectType==="LightDirectional"||e.objectType==="LightPoint"||e.objectType==="LightSpot")&&this.updateLight(e)}updateCamera(e){this.camera={zoomPersp:e.perspCamera.zoom,zoomOrtho:e.orthoCamera.zoom,targetOffset:e.targetOffset}}updateLight(e){let t=e.color;this.light={intensity:e.intensity,color:{r:t.r,g:t.g,b:t.b}}}updateMatrix(e){this.position.copy(e.position),this.rotation.copy(e.rotation),this.scale.copy(e.scale),"hiddenMatrix"in e&&this.hiddenMatrix.copy(e.hiddenMatrix)}updateGeometry(e){if("geometry"in e&&this.geometry!==void 0){let{width:t,height:r,depth:i}=e.geometry.userData.parameters;this.geometry={width:t,height:r,depth:i}}}updateMaterial(e){if("material"in e&&this.material!==void 0)if(e.material instanceof Array){this.material=[];for(let t=0,r=e.material.length;t<r;++t){let i=e.material[t],n=[],s=i.layersList.head;for(;s;)n.push(s.clone()),s=s.next;this.material.push({layersList:n})}}else{let t=e.material,r=[],i=t.layersList.head;for(;i;)r.push(i.clone()),i=i.next;this.material={layersList:r}}}execute(e){if(e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale),e.updateMatrix(),"hiddenMatrix"in e&&e.hiddenMatrix.copy(this.hiddenMatrix),"geometry"in e&&this.geometry!==void 0){let t=e.geometry.userData.parameters,r=this.geometry;(r.width!==t.width||r.height!==t.height||r.depth!==t.depth)&&e.updateGeometry({parameters:{width:r.width,height:r.height,depth:r.depth}})}if("material"in e&&this.material!==void 0){let t=e.material;if(t instanceof Array){let r=this.material;for(let i=0,n=r.length;i<n;++i){let s=t[i].layersList.head,a=r[i].layersList,o=0;for(;s;)s.copy(a[o++]),s=s.next;t[i].dispose()}}else{if(t.userData.isAsset)return;let r=0,i=t.layersList.head,n=this.material.layersList;for(;i;)i.copyUniforms(n[r++]),i=i.next;t.dispose()}}if(this.camera&&e.objectType==="CombinedCamera"&&(e=e,e.zoom=e.cameraType==="OrthographicCamera"?this.camera.zoomOrtho:this.camera.zoomPersp,e.targetOffset=this.camera.targetOffset,e.updateProjectionMatrix()),this.light&&(e.objectType==="LightDirectional"||e.objectType==="LightPoint"||e.objectType==="LightSpot")){e=e,e.intensity=this.light.intensity;let t=this.light.color;e.color.setRGB(t.r,t.g,t.b)}}copy(e){if(this.name=e.name,this.position.copy(e.position),this.rotation.copy(e.rotation),this.scale.copy(e.scale),this.hiddenMatrix.copy(e.hiddenMatrix),e.geometry!==void 0&&(this.geometry={width:e.geometry.width,height:e.geometry.height,depth:e.geometry.depth}),e.material!==void 0)if(e.material instanceof Array){this.material=[];for(let t=0,r=e.material.length;t<r;++t)this.material.push({layersList:e.material[t].layersList.map(i=>i.clone())})}else this.material={layersList:e.material.layersList.map(t=>t.clone())};return e.camera!==void 0&&(this.camera={zoomPersp:e.camera.zoomPersp,zoomOrtho:e.camera.zoomOrtho,targetOffset:e.camera.targetOffset}),e.light!==void 0&&(this.light={intensity:e.light.intensity,color:Bn.clone(e.light.color)}),this}clone(){return new tc().copy(this)}toJSON(e){let t={uuid:this.uuid,name:this.name,position:this.position.toArray(),rotation:this.rotation.toArray(),scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};if(this.geometry!==void 0&&(t.geometry={width:this.geometry.width,height:this.geometry.height,depth:this.geometry.depth}),this.material!==void 0)if(this.material instanceof Array){t.material=[];for(let r=0,i=this.material.length;r<i;++r)t.material.push({layersList:this.material[r].layersList.map(n=>n.toJSON(e))})}else t.material={layersList:this.material.layersList.map(r=>r.toJSON(e))};return this.camera!==void 0&&(t.camera={zoomPersp:this.camera.zoomPersp,zoomOrtho:this.camera.zoomOrtho,targetOffset:this.camera.targetOffset}),t}fromJSON(e,t){var r;if(this.uuid=e.uuid,this.name=e.name,this.position.fromArray(e.position),this.rotation.fromArray(e.rotation),this.scale.fromArray(e.scale),this.hiddenMatrix.fromArray(e.hiddenMatrix),e.geometry!==void 0&&(this.geometry={width:e.geometry.width,height:e.geometry.height,depth:e.geometry.depth}),e.material!==void 0)if(e.material instanceof Array){this.material=[];for(let i=0,n=e.material.length;i<n;++i)this.material.push({layersList:e.material[i].layersList.map(s=>lL(s,t))})}else this.material={layersList:e.material.layersList.map(i=>lL(i,t))};return e.camera!==void 0&&(this.camera={zoomPersp:e.camera.zoomPersp,zoomOrtho:e.camera.zoomOrtho,targetOffset:(r=e.camera.targetOffset)!=null?r:-1}),this}},yN={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},G_={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},yie=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],xv={CSS:{},springs:{}};function wa(e,t,r){return Math.min(Math.max(e,t),r)}function Kd(e,t){return e.indexOf(t)>-1}function Zx(e,t){return e.apply(null,t)}var ut={arr:function(e){return Array.isArray(e)},obj:function(e){return Kd(Object.prototype.toString.call(e),"Object")},pth:function(e){return ut.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||ut.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e=="undefined"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ut.hex(e)||ut.rgb(e)||ut.hsl(e)},key:function(e){return!yN.hasOwnProperty(e)&&!G_.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function xN(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function wN(e,t){var r=xN(e),i=wa(ut.und(r[0])?1:r[0],.1,100),n=wa(ut.und(r[1])?100:r[1],.1,100),s=wa(ut.und(r[2])?10:r[2],.1,100),a=wa(ut.und(r[3])?0:r[3],.1,100),o=Math.sqrt(n/i),l=s/(2*Math.sqrt(n*i)),h=l<1?o*Math.sqrt(1-l*l):0,d=1,p=l<1?(l*o+-a)/h:-a+o;function f(y){var b=t?t*y/1e3:y;return l<1?b=Math.exp(-b*l*o)*(d*Math.cos(h*b)+p*Math.sin(h*b)):b=(d+p*b)*Math.exp(-b*o),y===0||y===1?y:1-b}function m(){var y=xv.springs[e];if(y)return y;for(var b=1/6,x=0,v=0;;)if(x+=b,f(x)===1){if(v++,v>=16)break}else v=0;var g=x*b*1e3;return xv.springs[e]=g,g}return t?f:m}function xie(e){return e===void 0&&(e=10),function(t){return Math.ceil(wa(t,1e-6,1)*e)*(1/e)}}var wie=function(){var e=11,t=1/(e-1);function r(d,p){return 1-3*p+3*d}function i(d,p){return 3*p-6*d}function n(d){return 3*d}function s(d,p,f){return((r(p,f)*d+i(p,f))*d+n(p))*d}function a(d,p,f){return 3*r(p,f)*d*d+2*i(p,f)*d+n(p)}function o(d,p,f,m,y){var b,x,v=0;do x=p+(f-p)/2,b=s(x,m,y)-d,b>0?f=x:p=x;while(Math.abs(b)>1e-7&&++v<10);return x}function l(d,p,f,m){for(var y=0;y<4;++y){var b=a(p,f,m);if(b===0)return p;var x=s(p,f,m)-d;p-=x/b}return p}function h(d,p,f,m){if(!(0<=d&&d<=1&&0<=f&&f<=1))return;var y=new Float32Array(e);if(d!==p||f!==m)for(var b=0;b<e;++b)y[b]=s(b*t,d,f);function x(v){for(var g=0,_=1,S=e-1;_!==S&&y[_]<=v;++_)g+=t;--_;var T=(v-y[_])/(y[_+1]-y[_]),A=g+T*t,M=a(A,d,f);return M>=.001?l(v,A,d,f):M===0?A:o(v,g,g+t,d,f)}return function(v){return d===p&&f===m||v===0||v===1?v:s(x(v),p,m)}}return h}(),bN=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=wa(i,1,10),a=wa(n,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-a/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/a)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,a){return function(o){return 1-n(s,a)(1-o)}},e["easeInOut"+i]=function(s,a){return function(o){return o<.5?n(s,a)(o*2)/2:1-n(s,a)(o*-2+2)/2}}}),e}();function V_(e,t){if(ut.fnc(e))return e;var r=e.split("(")[0],i=bN[r],n=xN(e);switch(r){case"spring":return wN(e,t);case"cubicBezier":return Zx(wie,n);case"steps":return Zx(xie,n);default:return Zx(i,n)}}function _N(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function o0(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var a=e[s];t.call(i,a,s,e)&&n.push(a)}return n}function l0(e){return e.reduce(function(t,r){return t.concat(ut.arr(r)?l0(r):r)},[])}function fL(e){return ut.arr(e)?e:(ut.str(e)&&(e=_N(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function j_(e,t){return e.some(function(r){return r===t})}function W_(e){var t={};for(var r in e)t[r]=e[r];return t}function kw(e,t){var r=W_(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function u0(e,t){var r=W_(e);for(var i in t)r[i]=ut.und(e[i])?t[i]:e[i];return r}function bie(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function _ie(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(o,l,h,d){return l+l+h+h+d+d}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),a=parseInt(i[3],16);return"rgba("+n+","+s+","+a+",1)"}function Sie(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function a(f,m,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?f+(m-f)*6*y:y<1/2?m:y<2/3?f+(m-f)*(2/3-y)*6:f}var o,l,h;if(i==0)o=l=h=n;else{var d=n<.5?n*(1+i):n+i-n*i,p=2*n-d;o=a(p,d,r+1/3),l=a(p,d,r),h=a(p,d,r-1/3)}return"rgba("+o*255+","+l*255+","+h*255+","+s+")"}function Aie(e){if(ut.rgb(e))return bie(e);if(ut.hex(e))return _ie(e);if(ut.hsl(e))return Sie(e)}function no(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Mie(e){if(Kd(e,"translate")||e==="perspective")return"px";if(Kd(e,"rotate")||Kd(e,"skew"))return"deg"}function Hw(e,t){return ut.fnc(e)?e(t.target,t.id,t.total):e}function ba(e,t){return e.getAttribute(t)}function J_(e,t,r){var i=no(t);if(j_([r,"deg","rad","turn"],i))return t;var n=xv.CSS[t+r];if(!ut.und(n))return n;var s=100,a=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=s+r;var l=s/a.offsetWidth;o.removeChild(a);var h=l*parseFloat(t);return xv.CSS[t+r]=h,h}function SN(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?J_(e,n,r):n}}function Y_(e,t){if(ut.dom(e)&&!ut.inp(e)&&(ba(e,t)||ut.svg(e)&&e[t]))return"attribute";if(ut.dom(e)&&j_(yie,t))return"transform";if(ut.dom(e)&&t!=="transform"&&SN(e,t))return"css";if(e[t]!=null)return"object"}function AN(e){if(ut.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function Eie(e,t,r,i){var n=Kd(t,"scale")?1:0+Mie(t),s=AN(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?J_(e,s,i):s}function X_(e,t,r,i){switch(Y_(e,t)){case"transform":return Eie(e,t,i,r);case"css":return SN(e,t,r);case"attribute":return ba(e,t);default:return e[t]||0}}function q_(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=no(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function MN(e,t){if(ut.col(e))return Aie(e);if(/\s/g.test(e))return e;var r=no(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function Q_(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Tie(e){return Math.PI*2*ba(e,"r")}function Cie(e){return ba(e,"width")*2+ba(e,"height")*2}function Lie(e){return Q_({x:ba(e,"x1"),y:ba(e,"y1")},{x:ba(e,"x2"),y:ba(e,"y2")})}function EN(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=Q_(i,s)),i=s}return r}function Oie(e){var t=e.points;return EN(e)+Q_(t.getItem(t.numberOfItems-1),t.getItem(0))}function TN(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Tie(e);case"rect":return Cie(e);case"line":return Lie(e);case"polyline":return EN(e);case"polygon":return Oie(e)}}function Pie(e){var t=TN(e);return e.setAttribute("stroke-dasharray",t),t}function Die(e){for(var t=e.parentNode;ut.svg(t)&&ut.svg(t.parentNode);)t=t.parentNode;return t}function CN(e,t){var r=t||{},i=r.el||Die(e),n=i.getBoundingClientRect(),s=ba(i,"viewBox"),a=n.width,o=n.height,l=r.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:o/l[3]}}function Rie(e,t){var r=ut.str(e)?_N(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:CN(r),totalLength:TN(r)*(i/100)}}}function Nie(e,t){function r(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var i=CN(e.el,e.svg),n=r(),s=r(-1),a=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(a.y-s.y,a.x-s.x)*180/Math.PI}}function mL(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=MN(ut.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:ut.str(e)||t?i.split(r):[]}}function LN(e){var t=e?l0(ut.arr(e)?e.map(fL):fL(e)):[];return o0(t,function(r,i,n){return n.indexOf(r)===i})}function ON(e){var t=LN(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:AN(r)}}})}function Iie(e,t){var r=W_(t);if(/^spring/.test(r.easing)&&(r.duration=wN(r.easing)),ut.arr(e)){var i=e.length,n=i===2&&!ut.obj(e[0]);n?e={value:e}:ut.fnc(t.duration)||(r.duration=t.duration/i)}var s=ut.arr(e)?e:[e];return s.map(function(a,o){var l=ut.obj(a)&&!ut.pth(a)?a:{value:a};return ut.und(l.delay)&&(l.delay=o?0:t.delay),ut.und(l.endDelay)&&(l.endDelay=o===s.length-1?t.endDelay:0),l}).map(function(a){return u0(a,r)})}function Bie(e){for(var t=o0(l0(e.map(function(s){return Object.keys(s)})),function(s){return ut.key(s)}).reduce(function(s,a){return s.indexOf(a)<0&&s.push(a),s},[]),r={},i=function(s){var a=t[s];r[a]=e.map(function(o){var l={};for(var h in o)ut.key(h)?h==a&&(l.value=o[h]):l[h]=o[h];return l})},n=0;n<t.length;n++)i(n);return r}function zie(e,t){var r=[],i=t.keyframes;i&&(t=u0(Bie(i),t));for(var n in t)ut.key(n)&&r.push({name:n,tweens:Iie(t[n],e)});return r}function Fie(e,t){var r={};for(var i in e){var n=Hw(e[i],t);ut.arr(n)&&(n=n.map(function(s){return Hw(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function Uie(e,t){var r;return e.tweens.map(function(i){var n=Fie(i,t),s=n.value,a=ut.arr(s)?s[1]:s,o=no(a),l=X_(t.target,e.name,o,t),h=r?r.to.original:l,d=ut.arr(s)?s[0]:h,p=no(d)||no(l),f=o||p;return ut.und(a)&&(a=h),n.from=mL(d,f),n.to=mL(q_(a,d),f),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=V_(n.easing,n.duration),n.isPath=ut.pth(s),n.isColor=ut.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var PN={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(a,o){s+=o+"("+a+") "}),e.style.transform=s}}};function DN(e,t){var r=ON(e);r.forEach(function(i){for(var n in t){var s=Hw(t[n],i),a=i.target,o=no(s),l=X_(a,n,o,i),h=o||no(l),d=q_(MN(s,h),l),p=Y_(a,n);PN[p](a,n,d,i.transforms,!0)}})}function kie(e,t){var r=Y_(e.target,t.name);if(r){var i=Uie(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function Hie(e,t){return o0(l0(e.map(function(r){return t.map(function(i){return kie(r,i)})})),function(r){return!ut.und(r)})}function RN(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){return i(s)+s.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){return i(s)+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){return i(s)+s.duration-s.endDelay})):t.endDelay,n}var gL=0;function Gie(e){var t=kw(yN,e),r=kw(G_,e),i=zie(r,e),n=ON(e.targets),s=Hie(n,i),a=RN(s,r),o=gL;return gL++,u0(t,{id:o,children:[],animatables:n,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}var yn=[],vL=[],xg,Vie=function(){function e(){xg=requestAnimationFrame(t)}function t(r){var i=yn.length;if(i){for(var n=0;n<i;){var s=yn[n];if(!s.paused)s.tick(r);else{var a=yn.indexOf(s);a>-1&&(yn.splice(a,1),i=yn.length)}n++}e()}else xg=cancelAnimationFrame(xg)}return e}();function jie(){document.hidden?(yn.forEach(function(e){return e.pause()}),vL=yn.slice(0),si.running=yn=[]):vL.forEach(function(e){return e.play()})}typeof document!="undefined"&&document.addEventListener("visibilitychange",jie);function si(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s=0,a=null;function o(g){var _=window.Promise&&new Promise(function(S){return a=S});return g.finished=_,_}var l=Gie(e);o(l);function h(){var g=l.direction;g!=="alternate"&&(l.direction=g!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(_){return _.reversed=l.reversed})}function d(g){return l.reversed?l.duration-g:g}function p(){t=0,r=d(l.currentTime)*(1/si.speed)}function f(g,_){_&&_.seek(g-_.timelineOffset)}function m(g){if(l.reversePlayback)for(var _=s;_--;)f(g,n[_]);else for(var S=0;S<s;S++)f(g,n[S])}function y(g){var _=0,S=l.animations,T=S.length;for(l.reversePlayback===!0&&l.rewind===!1&&(g=l.duration-g);_<T;){var A=S[_],M=A.animatable,O=A.tweens,P=O.length-1,C=O[P];P&&(C=o0(O,function(Y){return g<Y.end})[0]||C);for(var N=wa(g-C.start-C.delay,0,C.duration)/C.duration,U=isNaN(N)?1:C.easing(N),V=C.to.strings,k=C.round,G=[],Z=C.to.numbers.length,W=void 0,$=0;$<Z;$++){var ae=void 0;if(l.reversePlayback===!0&&l.rewind===!1)var H=C.to.numbers[$],te=C.from.numbers[$]||0;else var te=C.to.numbers[$],H=C.from.numbers[$]||0;C.isPath?ae=Nie(C.value,U*te):ae=H+U*(te-H),k&&(C.isColor&&$>2||(ae=Math.round(ae*k)/k)),G.push(ae)}var X=V.length;if(!X)W=G[0];else{W=V[0];for(var J=0;J<X;J++){V[J];var se=V[J+1],ge=G[J];isNaN(ge)||(se?W+=ge+se:W+=ge+" ")}}PN[A.type](M.target,A.property,W,M.transforms),A.currentValue=W,_++}}function b(g){l[g]&&!l.passThrough&&l[g](l)}function x(){l.remaining&&l.remaining!==!0&&l.remaining--}function v(g){var _=l.duration,S=l.delay,T=_-l.endDelay,A=d(g);l.progress=wa(A/_*100,0,100),l.reversePlayback=A<l.currentTime,n&&m(A),!l.began&&l.currentTime>=0&&(l.began=!0,b("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,b("loopBegin")),A<=S&&l.currentTime!==0&&y(0),(A>=T&&l.currentTime!==_||!_)&&y(_),A>S&&A<T?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,b("changeBegin")),b("change"),y(A)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,b("changeComplete")),l.currentTime=wa(A,0,_),l.began&&b("update"),g>=_&&(r=0,x(),l.remaining?(t=i,b("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&h()):(l.paused=!0,l.completed||(l.completed=!0,b("loopComplete"),b("complete"),!l.passThrough&&"Promise"in window&&(a(),o(l)))))}return l.reset=function(){var g=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=g==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var _=s;_--;)l.children[_].reset();(l.reversed&&l.loop!==!0||g==="alternate"&&l.loop===1)&&l.remaining++,y(l.reversed?l.duration:0)},l.set=function(g,_){return DN(g,_),l},l.tick=function(g){i=g,t||(t=i),v((i+(r-t))*si.speed)},l.seek=function(g){v(d(g))},l.pause=function(){l.paused=!0,p()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,yn.push(l),p(),xg||Vie())},l.reverse=function(){h(),l.completed=!l.reversed,p()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function yL(e,t){for(var r=t.length;r--;)j_(e,t[r].animatable.target)&&t.splice(r,1)}function Wie(e){for(var t=LN(e),r=yn.length;r--;){var i=yn[r],n=i.animations,s=i.children;yL(t,n);for(var a=s.length;a--;){var o=s[a],l=o.animations;yL(t,l),!l.length&&!o.children.length&&s.splice(a,1)}!n.length&&!s.length&&i.pause()}}function Jie(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?V_(t.easing):null,n=t.grid,s=t.axis,a=t.from||0,o=a==="first",l=a==="center",h=a==="last",d=ut.arr(e),p=parseFloat(d?e[0]:e),f=d?parseFloat(e[1]):0,m=no(d?e[1]:e)||0,y=t.start||0+(d?p:0),b=[],x=0;return function(v,g,_){if(o&&(a=0),l&&(a=(_-1)/2),h&&(a=_-1),!b.length){for(var S=0;S<_;S++){if(!n)b.push(Math.abs(a-S));else{var T=l?(n[0]-1)/2:a%n[0],A=l?(n[1]-1)/2:Math.floor(a/n[0]),M=S%n[0],O=Math.floor(S/n[0]),P=T-M,C=A-O,N=Math.sqrt(P*P+C*C);s==="x"&&(N=-P),s==="y"&&(N=-C),b.push(N)}x=Math.max.apply(Math,b)}i&&(b=b.map(function(V){return i(V/x)*x})),r==="reverse"&&(b=b.map(function(V){return s?V<0?V*-1:-V:Math.abs(x-V)}))}var U=d?(f-p)/x:p;return y+U*(Math.round(b[g]*100)/100)+m}}function Yie(e){e===void 0&&(e={});var t=si(e);return t.duration=0,t.add=function(r,i){var n=yn.indexOf(t),s=t.children;n>-1&&yn.splice(n,1);function a(f){f.passThrough=!0}for(var o=0;o<s.length;o++)a(s[o]);var l=u0(r,kw(G_,e));l.targets=l.targets||e.targets;var h=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=ut.und(i)?h:q_(i,h),a(t),l.rewind=t.rewind,t.seek(l.timelineOffset);var d=si(l);a(d),s.push(d);var p=RN(s,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}si.version="3.2.0";si.speed=1;si.running=yn;si.remove=Wie;si.get=X_;si.set=DN;si.convertPx=J_;si.path=Rie;si.setDashoffset=Pie;si.stagger=Jie;si.timeline=Yie;si.easing=V_;si.penner=bN;si.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var Xm=si,K_=class{constructor(){this.pluginCallbacks=[],this.register(function(e){return new rne(e)}),this.register(function(e){return new ine(e)}),this.register(function(e){return new nne(e)}),this.register(function(e){return new sne(e)}),this.register(function(e){return new ane(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r){let i=new tne,n=[];for(let s=0,a=this.pluginCallbacks.length;s<a;s++)n.push(this.pluginCallbacks[s](i));i.setPlugins(n),i.write(e,t,r)}},cr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Fn={};Fn[qr]=cr.NEAREST;Fn[Z1]=cr.NEAREST_MIPMAP_NEAREST;Fn[$1]=cr.NEAREST_MIPMAP_LINEAR;Fn[ar]=cr.LINEAR;Fn[xP]=cr.LINEAR_MIPMAP_NEAREST;Fn[nu]=cr.LINEAR_MIPMAP_LINEAR;Fn[yi]=cr.CLAMP_TO_EDGE;Fn[Wh]=cr.REPEAT;Fn[Xg]=cr.MIRRORED_REPEAT;var xL={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},wL=12,Xie=1179937895,qie=2,bL=8,Qie=1313821514,Kie=5130562;function Cd(e,t){return e.length===t.length&&e.every(function(r,i){return r===t[i]})}function Zie(e){if(window.TextEncoder!==void 0)return new TextEncoder().encode(e).buffer;let t=new Uint8Array(new ArrayBuffer(e.length));for(let r=0,i=e.length;r<i;r++){let n=e.charCodeAt(r);t[r]=n>255?32:n}return t.buffer}function $ie(e){return Cd(e.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function ene(e,t,r){let i={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let n=t;n<t+r;n++)for(let s=0;s<e.itemSize;s++){let a;e.itemSize>4?a=e.array[n*e.itemSize+s]:s===0?a=e.getX(n):s===1?a=e.getY(n):s===2?a=e.getZ(n):s===3&&(a=e.getW(n)),i.min[s]=Math.min(i.min[s],a),i.max[s]=Math.max(i.max[s],a)}return i}function NN(e){return Math.ceil(e/4)*4}function $x(e,t=0){let r=NN(e.byteLength);if(r!==e.byteLength){let i=new Uint8Array(r);if(i.set(new Uint8Array(e)),t!==0)for(let n=e.byteLength;n<r;n++)i[n]=t;return i.buffer}return e}var _L=null,tne=class{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}write(e,t,r){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e);let i=this;Promise.all(this.pending).then(function(){let n=i.buffers,s=i.json,a=i.options,o=i.extensionsUsed,l=new Blob(n,{type:"application/octet-stream"}),h=Object.keys(o);if(h.length>0&&(s.extensionsUsed=h),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=l.size),a.binary===!0){let d=new window.FileReader;d.readAsArrayBuffer(l),d.onloadend=function(){let p=$x(d.result),f=new DataView(new ArrayBuffer(bL));f.setUint32(0,p.byteLength,!0),f.setUint32(4,Kie,!0);let m=$x(Zie(JSON.stringify(s)),32),y=new DataView(new ArrayBuffer(bL));y.setUint32(0,m.byteLength,!0),y.setUint32(4,Qie,!0);let b=new ArrayBuffer(wL),x=new DataView(b);x.setUint32(0,Xie,!0),x.setUint32(4,qie,!0);let v=wL+y.byteLength+m.byteLength+f.byteLength+p.byteLength;x.setUint32(8,v,!0);let g=new Blob([b,y,m,f,p],{type:"application/octet-stream"}),_=new window.FileReader;_.readAsArrayBuffer(g),_.onloadend=function(){t(_.result)}}}else if(s.buffers&&s.buffers.length>0){let d=new window.FileReader;d.readAsDataURL(l),d.onloadend=function(){let p=d.result;s.buffers[0].uri=p,t(s)}}else t(s)})}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;let r=this.options,i=this.extensionsUsed;try{let n=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&n.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(let s in n.gltfExtensions)t.extensions[s]=n.gltfExtensions[s],i[s]=!0;delete n.gltfExtensions}Object.keys(n).length>0&&(t.extras=n)}catch(n){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+n.message)}}getUID(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;let t=new L;for(let r=0,i=e.count;r<i;r++)if(Math.abs(t.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);let r=e.clone(),i=new L;for(let n=0,s=r.count;n<s;n++)i.fromBufferAttribute(r,n),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(n,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1,i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}processBuffer(e){let t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,n){let s=this.json;s.bufferViews||(s.bufferViews=[]);let a;t===cr.UNSIGNED_BYTE?a=1:t===cr.UNSIGNED_SHORT?a=2:a=4;let o=NN(i*e.itemSize*a),l=new DataView(new ArrayBuffer(o)),h=0;for(let p=r;p<r+i;p++)for(let f=0;f<e.itemSize;f++){let m;e.itemSize>4?m=e.array[p*e.itemSize+f]:f===0?m=e.getX(p):f===1?m=e.getY(p):f===2?m=e.getZ(p):f===3&&(m=e.getW(p)),t===cr.FLOAT?l.setFloat32(h,m,!0):t===cr.UNSIGNED_INT?l.setUint32(h,m,!0):t===cr.UNSIGNED_SHORT?l.setUint16(h,m,!0):t===cr.UNSIGNED_BYTE&&l.setUint8(h,m),h+=a}let d={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:o};return n!==void 0&&(d.target=n),n===cr.ARRAY_BUFFER&&(d.byteStride=e.itemSize*a),this.byteOffset+=o,s.bufferViews.push(d),{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){let t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){let n=new window.FileReader;n.readAsArrayBuffer(e),n.onloadend=function(){let s=$x(n.result),a={buffer:t.processBuffer(s),byteOffset:t.byteOffset,byteLength:s.byteLength};t.byteOffset+=s.byteLength,i(r.bufferViews.push(a)-1)}})}processAccessor(e,t,r,i){let n=this.options,s=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"},o;if(e.array.constructor===Float32Array)o=cr.FLOAT;else if(e.array.constructor===Uint32Array)o=cr.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)o=cr.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)o=cr.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),n.truncateDrawRange&&t!==void 0&&t.index===null){let f=r+i,m=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;r=Math.max(r,t.drawRange.start),i=Math.min(f,m)-r,i<0&&(i=0)}if(i===0)return null;let l=ene(e,r,i),h;t!==void 0&&(h=e===t.index?cr.ELEMENT_ARRAY_BUFFER:cr.ARRAY_BUFFER);let d=this.processBufferView(e,o,r,i,h),p={bufferView:d.id,byteOffset:d.byteOffset,componentType:o,count:i,max:l.max,min:l.min,type:a[e.itemSize]};return e.normalized===!0&&(p.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(p)-1}processImage(e,t,r){let i=this,n=i.cache,s=i.json,a=i.options,o=i.pending;n.images.has(e)||n.images.set(e,{});let l=n.images.get(e),h=t===ci?"image/png":"image/jpeg",d=h+":flipY/"+r.toString();if(l[d]!==void 0)return l[d];s.images||(s.images=[]);let p={mimeType:h};if(a.embedImages){let m=_L=_L||document.createElement("canvas");m.width=Math.min(e.width,a.maxTextureSize),m.height=Math.min(e.height,a.maxTextureSize);let y=m.getContext("2d");if(r===!0&&(y.translate(0,m.height),y.scale(1,-1)),typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap)y.drawImage(e,0,0,m.width,m.height);else{t!==ci&&t!==Qi&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>a.maxTextureSize||e.height>a.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);let b=new Uint8ClampedArray(e.height*e.width*4);if(t===ci)for(let x=0;x<b.length;x+=4)b[x+0]=e.data[x+0],b[x+1]=e.data[x+1],b[x+2]=e.data[x+2],b[x+3]=e.data[x+3];else for(let x=0,v=0;x<b.length;x+=4,v+=3)b[x+0]=e.data[v+0],b[x+1]=e.data[v+1],b[x+2]=e.data[v+2],b[x+3]=255;y.putImageData(new ImageData(b,e.width,e.height),0,0)}a.binary===!0?o.push(new Promise(function(b){m.toBlob(function(x){i.processBufferViewImage(x).then(function(v){p.bufferView=v,b()})},h)})):p.uri=m.toDataURL(h)}else p.uri=e.src;let f=s.images.push(p)-1;return l[d]=f,f}processSampler(e){let t=this.json;t.samplers||(t.samplers=[]);let r={magFilter:Fn[e.magFilter],minFilter:Fn[e.minFilter],wrapS:Fn[e.wrapS],wrapT:Fn[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){let t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(i.name=e.name),this._invokeAll(function(s){s.writeTexture&&s.writeTexture(e,i)});let n=r.textures.push(i)-1;return t.textures.set(e,n),n}processMaterial(e){let t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);let i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let n=e.color.toArray().concat([e.opacity]);if(Cd(n,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=n),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){let a={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(a,e.metalnessMap),i.pbrMetallicRoughness.metallicRoughnessTexture=a}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){let a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){let a=e.emissive.clone().multiplyScalar(e.emissiveIntensity),o=Math.max(a.r,a.g,a.b);if(o>1&&(a.multiplyScalar(1/o),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),o>0&&(i.emissiveFactor=a.toArray()),e.emissiveMap){let l={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(l,e.emissiveMap),i.emissiveTexture=l}}if(e.normalMap){let a={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){let a={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===xi&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});let s=r.materials.push(i)-1;return t.materials.set(e,s),s}processMesh(e){let t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let g=0,_=e.material.length;g<_;g++)i.push(e.material[g].uuid);else i.push(e.material.uuid);let n=i.join(":");if(t.meshes.has(n))return t.meshes.get(n);let s=e.geometry,a;if(e.isLineSegments?a=cr.LINES:e.isLineLoop?a=cr.LINE_LOOP:e.isLine?a=cr.LINE_STRIP:e.isPoints?a=cr.POINTS:a=e.material.wireframe?cr.LINES:cr.TRIANGLES,s.isBufferGeometry!==!0)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");let o={},l={},h=[],d=[],p={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},f=s.getAttribute("normal");f!==void 0&&!this.isNormalizedNormalAttribute(f)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(f)));let m=null;for(let g in s.attributes){if(g.substr(0,5)==="morph")continue;let _=s.attributes[g];if(g=p[g]||g.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(g)||(g="_"+g),t.attributes.has(this.getUID(_))){l[g]=t.attributes.get(this.getUID(_));continue}m=null;let S=_.array;g==="JOINTS_0"&&!(S instanceof Uint16Array)&&!(S instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new dt(new Uint16Array(S),_.itemSize,_.normalized));let T=this.processAccessor(m||_,s);T!==null&&(l[g]=T,t.attributes.set(this.getUID(_),T))}if(f!==void 0&&s.setAttribute("normal",f),Object.keys(l).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){let g=[],_=[],S={};if(e.morphTargetDictionary!==void 0)for(let T in e.morphTargetDictionary)S[e.morphTargetDictionary[T]]=T;for(let T=0;T<e.morphTargetInfluences.length;++T){let A={},M=!1;for(let O in s.morphAttributes){if(O!=="position"&&O!=="normal"){M||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),M=!0);continue}let P=s.morphAttributes[O][T],C=O.toUpperCase(),N=s.attributes[O];if(t.attributes.has(this.getUID(P))){A[C]=t.attributes.get(this.getUID(P));continue}let U=P.clone();if(!s.morphTargetsRelative)for(let V=0,k=P.count;V<k;V++)U.setXYZ(V,P.getX(V)-N.getX(V),P.getY(V)-N.getY(V),P.getZ(V)-N.getZ(V));A[C]=this.processAccessor(U,s),t.attributes.set(this.getUID(N),A[C])}d.push(A),g.push(e.morphTargetInfluences[T]),e.morphTargetDictionary!==void 0&&_.push(S[T])}o.weights=g,_.length>0&&(o.extras={},o.extras.targetNames=_)}let y=Array.isArray(e.material);if(y&&s.groups.length===0)return null;let b=y?e.material:[e.material],x=y?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let g=0,_=x.length;g<_;g++){let S={mode:a,attributes:l};if(this.serializeUserData(s,S),d.length>0&&(S.targets=d),s.index!==null){let A=this.getUID(s.index);(x[g].start!==void 0||x[g].count!==void 0)&&(A+=":"+x[g].start+":"+x[g].count),t.attributes.has(A)?S.indices=t.attributes.get(A):(S.indices=this.processAccessor(s.index,s,x[g].start,x[g].count),t.attributes.set(A,S.indices)),S.indices===null&&delete S.indices}let T=this.processMaterial(b[x[g].materialIndex]);T!==null&&(S.material=T),h.push(S)}o.primitives=h,r.meshes||(r.meshes=[]),this._invokeAll(function(g){g.writeMesh&&g.writeMesh(e,o)});let v=r.meshes.push(o)-1;return t.meshes.set(n,v),v}processCamera(e){let t=this.json;t.cameras||(t.cameras=[]);let r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:sr.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){let r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=K_.Utils.mergeMorphTargetTracks(e.clone(),t);let n=e.tracks,s=[],a=[];for(let o=0;o<n.length;++o){let l=n[o],h=qt.parseTrackName(l.name),d=qt.findNode(t,h.nodeName),p=xL[h.propertyName];if(h.objectName==="bones"&&(d.isSkinnedMesh===!0?d=d.skeleton.getBoneByName(h.objectIndex):d=void 0),!d||!p)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;let f=1,m=l.values.length/l.times.length;p===xL.morphTargetInfluences&&(m/=d.morphTargetInfluences.length);let y;l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(y="CUBICSPLINE",m/=3):l.getInterpolation()===mp?y="STEP":y="LINEAR",a.push({input:this.processAccessor(new dt(l.times,f)),output:this.processAccessor(new dt(l.values,m)),interpolation:y}),s.push({sampler:a.length-1,target:{node:i.get(d),path:p}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:s}),r.animations.length-1}processSkin(e){let t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],n=e.skeleton;if(n===void 0)return null;let s=e.skeleton.bones[0];if(s===void 0)return null;let a=[],o=new Float32Array(n.bones.length*16),l=new He;for(let h=0;h<n.bones.length;++h)a.push(r.get(n.bones[h])),l.copy(n.boneInverses[h]),l.multiply(e.bindMatrix).toArray(o,h*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new dt(o,16)),joints:a,skeleton:r.get(s)}),i.skin=t.skins.length-1}processNode(e){let t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);let n={};if(r.trs){let a=e.quaternion.toArray(),o=e.position.toArray(),l=e.scale.toArray();Cd(a,[0,0,0,1])||(n.rotation=a),Cd(o,[0,0,0])||(n.translation=o),Cd(l,[1,1,1])||(n.scale=l)}else e.matrixAutoUpdate&&e.updateMatrix(),$ie(e.matrix)===!1&&(n.matrix=e.matrix.elements);if(e.name!==""&&(n.name=String(e.name)),this.serializeUserData(e,n),e.isMesh||e.isLine||e.isPoints){let a=this.processMesh(e);a!==null&&(n.mesh=a)}else e.isCamera&&(n.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){let a=[];for(let o=0,l=e.children.length;o<l;o++){let h=e.children[o];if(h.visible||r.onlyVisible===!1){let d=this.processNode(h);d!==null&&a.push(d)}}a.length>0&&(n.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,n)});let s=t.nodes.push(n)-1;return i.set(e,s),s}processScene(e){let t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);let i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);let n=[];for(let s=0,a=e.children.length;s<a;s++){let o=e.children[s];if(o.visible||r.onlyVisible===!1){let l=this.processNode(o);l!==null&&n.push(l)}}n.length>0&&(i.nodes=n),this.serializeUserData(e,i)}processObjects(e){let t=new Ma;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){let t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});let r=[];for(let i=0;i<e.length;i++)e[i]instanceof Ma?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}},rne=class{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}let r=this.writer,i=r.json,n=r.extensionsUsed,s={};e.name&&(s.name=e.name),s.color=e.color.toArray(),s.intensity=e.intensity,e.isDirectionalLight?s.type="directional":e.isPointLight?(s.type="point",e.distance>0&&(s.range=e.distance)):e.isSpotLight&&(s.type="spot",e.distance>0&&(s.range=e.distance),s.spot={},s.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,s.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),n[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},n[this.name]=!0);let a=i.extensions[this.name].lights;a.push(s),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}},ine=class{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;let r=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}},nne=class{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;let r=this.writer,i=r.extensionsUsed,n={};t.pbrMetallicRoughness.baseColorFactor&&(n.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);let s=[1,1,1];if(e.specular.toArray(s,0),n.specularFactor=s,n.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(n.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){let a={index:r.processTexture(e.specularMap)};r.applyTextureTransform(a,e.specularMap),n.specularGlossinessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}},sne=class{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;let r=this.writer,i=r.extensionsUsed,n={};if(n.transmissionFactor=e.transmission,e.transmissionMap){let s={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(s,e.transmissionMap),n.transmissionTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}},ane=class{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.thickness===0)return;let r=this.writer,i=r.extensionsUsed,n={};if(n.thicknessFactor=e.thickness,e.thicknessMap){let s={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(s,e.thicknessMap),n.thicknessTexture=s}n.attenuationDistance=e.attenuationDistance,n.attenuationColor=e.attenuationTint.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}};K_.Utils={insertKeyframe:function(e,t){let r=.001,i=e.getValueSize(),n=new e.TimeBufferType(e.times.length+1),s=new e.ValueBufferType(e.values.length+i),a=e.createInterpolant(new e.ValueBufferType(i)),o;if(e.times.length===0){n[0]=t;for(let l=0;l<i;l++)s[l]=0;o=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<r)return 0;n[0]=t,n.set(e.times,1),s.set(a.evaluate(t),0),s.set(e.values,i),o=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<r)return e.times.length-1;n[n.length-1]=t,n.set(e.times,0),s.set(e.values,0),s.set(a.evaluate(t),e.values.length),o=n.length-1}else for(let l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<r)return l;if(e.times[l]<t&&e.times[l+1]>t){n.set(e.times.slice(0,l+1),0),n[l+1]=t,n.set(e.times.slice(l+1),l+2),s.set(e.values.slice(0,(l+1)*i),0),s.set(a.evaluate(t),(l+1)*i),s.set(e.values.slice((l+1)*i),(l+2)*i),o=l+1;break}}return e.times=n,e.values=s,o},mergeMorphTargetTracks:function(e,t){let r=[],i={},n=e.tracks;for(let s=0;s<n.length;++s){let a=n[s],o=qt.parseTrackName(a.name),l=qt.findNode(t,o.nodeName);if(o.propertyName!=="morphTargetInfluences"||o.propertyIndex===void 0){r.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(gp)}let h=l.morphTargetInfluences.length,d=l.morphTargetDictionary[o.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let p;if(i[l.uuid]===void 0){p=a.clone();let m=new p.ValueBufferType(h*p.times.length);for(let y=0;y<p.times.length;y++)m[y*h+d]=p.values[y];p.name=(o.nodeName||"")+".morphTargetInfluences",p.values=m,i[l.uuid]=p,r.push(p);continue}let f=a.createInterpolant(new a.ValueBufferType(1));p=i[l.uuid];for(let m=0;m<p.times.length;m++)p.values[m*h+d]=f.evaluate(p.times[m]);for(let m=0;m<a.times.length;m++){let y=this.insertKeyframe(p,a.times[m]);p.values[y*h+d]=a.values[m]}}return e.tracks=r,e}};new Promise(e=>{});cP(LV());function Gw(e,t,r){return e[t.uuid]===void 0&&(e[t.uuid]=t.toJSON(r)),t.uuid}new K_;function one(e,t,r){if(e[t.uuid]===void 0)if(t.userData.type==="NonParametricGeometry"||t.userData.type==="SubdivGeometry"){if(t.userData.type==="SubdivGeometry"){let n=t.originalGeometry;if(n){let s=t.userData;t=n.clone(),t.userData=s}else t=t.clone();delete t.attributes.color,delete t.attributes.faceMap,delete t.attributes.position,delete t.attributes.normal,t.index=null}let i=t.originalGeometry;if(i!==void 0){let n=t.userData;t=i,t.userData=n}e[t.uuid]=t.toJSON()}else{let i=t.userData;if(i.type==="VectorGeometry"){let n=t.userData.shape;i=Object.assign({},i,{shape:n.toJSON()})}e[t.uuid]={uuid:t.uuid,userData:i}}return t.uuid}function md(e){let t=[];for(let r in e){let i=e[r];delete i.metadata,t.push(i)}return t}function lne(e){let t=[];for(let r in e)t.push(e[r]);return t}var SL=new L,une=new L,AL;(function(e){e[e.started=0]="started",e[e.ended=1]="ended",e[e.once=2]="once"})(AL||(AL={}));var na=class{constructor(e){this.object=e,this.uuid=sr.generateUUID(),this.states=[],this.events=[],this._scrollCounter=null,this._interpolateMaterialBetweenValues=(t,r,i,n=r.getNames())=>{var s,a,o,l,h;for(let d=0,p=n.length;d<p;++d){let f=n[d],m=`f${r.id}_${f}`,y=`f${i.id}_${f}`,b=r.uniforms[m],x=i.uniforms[y];if(!(!b||b.value===void 0||x===void 0)){if(f==="mode"){b.value!==x.value&&(b.value=x.value);continue}if(typeof b.value=="boolean"){b.value!==x.value&&(b.value=x.value);continue}if(typeof b.value=="number"){b.value!==x.value&&((s=this._animation)==null||s.add({targets:b,value:Number(x.value)},0));continue}if("isVector2"in b.value){b.value.equals(x.value)===!1&&((a=this._animation)==null||a.add({targets:b,x:x.value.x,y:x.value.y},0));continue}if("isVector3"in b.value){b.value.equals(x.value)===!1&&((o=this._animation)==null||o.add({targets:b,x:x.value.x,y:x.value.y,z:x.value.z},0));continue}if("isColor"in b.value){b.value.equals(x.value)===!1&&((l=this._animation)==null||l.add({targets:b.value,r:x.value.r,g:x.value.g,b:x.value.b},0));continue}}}if(r.backLayer){let d=`f${r.backLayer.id}_alpha`,p=r.backLayer.uniforms[d];(h=this._animation)==null||h.add({targets:p,value:0},0)}},this._interpolateMaterialBetweenLayers=(t,r,i)=>{var n,s,a;let o=t.layersList;if(r.backLayer===void 0){let f=i.getValues();f.alpha=0,r.backLayer=o.addLayerBeforeAt(f,r),r.backLayer.isBack=!0,t.dispose()}let l=`f${r.id}_alpha`,h=`f${(n=r.backLayer)==null?void 0:n.id}_alpha`,d=r.uniforms[l],p=(s=r.backLayer)==null?void 0:s.uniforms[h];(a=this._animation)==null||a.add({targets:d,value:0},0).add({targets:p,value:i.uniforms[`f${i.id}_alpha`].value},0)},this._interpolateMaterialTexture=(t,r,i)=>{var n;let s=`f${r.id}_texture`,a=r.uniforms[s].value,o=i.uniforms[`f${i.id}_texture`].value,l=r.uniforms[`f${r.id}_crop`],h=i.uniforms[`f${i.id}_crop`];l&&h&&l.value!==h.value&&(l.value=Number(h.value)),(a.wrapS!==o.wrapS||a.wrapT!==o.wrapT)&&(a.wrapS=o.wrapS,a.wrapT=o.wrapT,a.needsUpdate=!0);let d=a.matrix,p=o.matrix;if(d.equals(p)===!1){let m={repeatX:a.repeat.x,repeatY:a.repeat.y,offsetX:a.offset.x,offsetY:a.offset.y};(n=this._animation)==null||n.add({targets:m,repeatX:o.repeat.x,repeatY:o.repeat.y,offsetX:o.offset.x,offsetY:o.offset.y,update:()=>{a.repeat.set(m.repeatX,m.repeatY),a.offset.set(m.offsetX,m.offsetY),a.updateMatrix(),a.needsUpdate=!0}},0)}let f=["alpha","mode"];r.type==="displace_map"&&f.push("intensity"),this._interpolateMaterialBetweenValues(t,r,i,f)},this._interpolateMaterialGradient=(t,r,i)=>{var n;let s=10,a=`f${r.id}_steps`,o=`f${i.id}_steps`,l=r.uniforms[a],h=i.uniforms[o],d=`f${r.id}_colors`,p=`f${i.id}_colors`,f=r.uniforms[d],m=i.uniforms[p];for(let y=0;y<s;++y){let b=f.value[y],x=m.value[y];if(l.value[y]!==h.value[y]||!b.equals(x)){let v={value:l.value[y]};(n=this._animation)==null||n.add({targets:[v,b],value:h.value[y],x:x.x,y:x.y,z:x.z,w:x.w,update:()=>{l.value[y]=v.value}},0)}}this._interpolateMaterialBetweenValues(t,r,i,["alpha","mode","gradientType","smooth","offset","morph","angle","origin","direction","near","far"])}}static get isAllAnimationsEnded(){let e;for(let t in na.isAnimating){if(na.isAnimating[t]===2)return na.isAnimating[t]=1,!1;if(na.isAnimating[t]===0)return!1;e=!0}return e}computeCache(){return this.cache={mouseDown:this.events.find(e=>e.type===Et.MOUSE_DOWN),mouseUp:this.events.find(e=>e.type===Et.MOUSE_UP),mouseHover:this.events.find(e=>e.type===Et.MOUSE_HOVER),start:this.events.find(e=>e.type===Et.START),lookAt:this.events.find(e=>e.type===Et.LOOK_AT),follow:this.events.find(e=>e.type===Et.FOLLOW),keyDown:this.events.filter(e=>e.type===Et.KEY_DOWN),keyUp:this.events.filter(e=>e.type===Et.KEY_UP),scroll:this.events.find(e=>e.type===Et.SCROLL)},this.cache}newState(e){let t=new tc;return t.name=e,t.update(this.object),this.states.push(t),t}addState(e,t){this.states.splice(t,0,e)}removeState(e){this.states.splice(e,1)}selectState(e){e!==void 0&&this.states[e].execute(this.object)}hasEventType(e,t){return e===Et.KEY_DOWN||e===Et.KEY_UP?t===void 0?!1:this.events.some(r=>r.type===e&&r.key===t):this.events.some(r=>r.type===e)}newEvent(){let e=[Et.MOUSE_DOWN,Et.MOUSE_UP,Et.MOUSE_HOVER,Et.KEY_DOWN].find(r=>this.hasEventType(r)===!1),t=new yv(e);return this.events.push(t),t}addEvent(e,t){this.events.splice(t,0,e);let r=this.events[t].targets;for(let i=0,n=r.length;i<n;++i)r[i].object!==void 0&&Qd.add(r[i])}removeEvent(e){let t=this.events[e].targets;for(let r=0,i=t.length;r<i;++r)t[r].object!==void 0&&Qd.delete(t[r]);this.events.splice(e,1)}copy(e){for(let t=0,r=e.states.length;t<r;++t)this.addState(e.states[t].clone(),t);for(let t=0,r=e.events.length;t<r;++t){this.addEvent(e.events[t].clone(),t);let i=e.events[t].targets;for(let n=0,s=i.length;n<s;++n){let a=i[n].clone();i[n].object===e.object?(a.object=this.object,a.state=this.states[e.states.indexOf(i[n].state)]):(a.object=i[n].object,a.state=i[n].state),this.events[t].addTarget(a,n)}}return this}clone(e){return new na(e).copy(this)}toJSON(e){e===void 0&&(e={nodes:{},geometries:{},materials:{},textures:{},images:{},interactionStates:{}});let t={uuid:this.uuid};if(this.states.length>0){t.states=[];for(let r=0,i=this.states.length;r<i;++r)t.states.push(Gw(e.interactionStates,this.states[r],e))}if(this.events.length>0){t.events=[];for(let r=0,i=this.events.length;r<i;++r)t.events.push(this.events[r].toJSON())}return t}fromJSON(e,t,r){var i;if(this.uuid=e.uuid,this.states=[],this.events=[],e.states!==void 0)for(let n=0,s=e.states.length;n<s;++n){let a=r[e.states[n]];this.states.push(a),((i=a.camera)==null?void 0:i.targetOffset)===-1&&(a.camera.targetOffset=this.object.getDistanceToTarget())}if(e.events!==void 0)for(let n=0,s=e.events.length;n<s;++n)this.events.push(new yv().fromJSON(e.events[n],t,r));return this}start(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0,this._scrollCounter=null,this._removeBackLayer()),this.states.length>1?(this.states[0].execute(this.object),this._currentState=this.states[0],this._prevState=void 0):this._state0!==void 0?this._state0.execute(this.object):this.events.some(e=>e.type===Et.LOOK_AT||e.type===Et.FOLLOW)&&(this._state0=new tc,this._state0.update(this.object))}end(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0,this._removeBackLayer()),this.states.length>1?this.states[0].execute(this.object):this._state0!==void 0&&(this._state0.execute(this.object),this._state0=void 0),this._currentState=void 0,this._prevState=void 0}lookAt(e){var t;this.object.lookAt(e),this.object.updateMatrix(),(t=this._animation)==null||t.finished.then(()=>{this.lookAt(e),this.object.updateMatrix()})}follow(e){this.object.position.copy(e),this.object.parent!==null&&this.object.position.applyMatrix4(new He().copy(this.object.parent.matrixWorld).invert()),this.object.position.applyMatrix4(new He().copy(this.object.hiddenMatrix).invert()),this.object.updateMatrix()}play(e){this.object.visible&&e.state!==void 0&&this.animate(e.state,e)}seek(e,t,r){var i;this._scrollCounter===null&&(this.object.visible&&e.state!==void 0&&this.animate(e.state,e,!0),this._scrollCounter=0),this._scrollCounter+=t,this._scrollCounter=Math.min(Math.max(this._scrollCounter,0),r),na.isAnimating[e.state.uuid]=2,(i=this._animation)==null||i.seek(this._scrollCounter/r*e.duration)}reverse(e){this.object.visible&&this._prevState!==void 0&&this.animate(this._prevState,e)}_removeBackLayer(){if("material"in this.object){let e=this.object.material;if(e instanceof Array)for(let t=0,r=e.length;t<r;++t){let i=e[t].layersList,n=i.head;for(;n;)if(n.backLayer){delete n.backLayer;let s=n.next;i.removeLayer(n.id),n=s}else n.isBack&&(n.isBack=!1),n=n.next}else{let t=e.layersList,r=t.head;for(;r;)for(;r;)if(r.backLayer){delete r.backLayer;let i=r.next;t.removeLayer(r.id),r=i}else r.isBack&&(r.isBack=!1),r=r.next}}}getTimingFunction(e,t,r){switch(e){case qa.LINEAR:return"cubicBezier( 0, 0, 1, 1 )";case qa.EASE:return"cubicBezier( .25, .1, .25, 1 )";case qa.EASE_IN:return"cubicBezier( .42, 0, 1, 1 )";case qa.EASE_OUT:return"cubicBezier( 0, 0, .58, 1 )";case qa.EASE_IN_OUT:return"cubicBezier( .42, 0, .58, 1 )";case qa.CUBIC:return`cubicBezier( ${t[0]}, ${t[1]}, ${t[2]}, ${t[3]} )`;case qa.SPRING:return`spring( ${r.mass}, ${r.stiffness}, ${r.damping}, ${r.velocity} )`}}animate(e,t,r=!1){var i,n,s,a,o,l;if(na.isAnimating[e.uuid]=0,this._currentState===e){if((i=this._animation)!=null&&i.reversed){let h=(s=(n=this._animation)==null?void 0:n.currentTime)!=null?s:0;(a=this._animation)==null||a.reset(),(o=this._animation)==null||o.seek(h),(l=this._animation)==null||l.play()}}else this._prevState=this._currentState,this._currentState=e,this._animation!==void 0&&(na.isAnimating[this._prevState.uuid]=1,this._animation.pause()),this._removeBackLayer(),t.cycle===!0&&t.repeat===!0?this._animation=Xm.timeline({duration:t.duration,delay:t.delay/2,endDelay:t.delay/2,direction:"alternate",loop:!0,rewind:t.rewind,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}):t.cycle===!0&&t.repeat===!1?this._animation=Xm.timeline({duration:t.duration,delay:t.delay,endDelay:t.delay/2,direction:"alternate",rewind:t.rewind,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}):t.cycle===!1&&t.repeat===!0?this._animation=Xm.timeline({duration:t.duration,delay:t.delay,direction:"normal",loop:!0,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}):this._animation=Xm.timeline({duration:t.duration,delay:t.delay,direction:"normal",easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}),this._animation.finished.then(()=>{r||(this._removeBackLayer(),this._animation=void 0,na.isAnimating[e.uuid]=1)}),this.animateMatrix(e),this.animateGeometry(e),this.animateMaterial(e),this.animateCamera(e),this.animateLight(e.light)}animateMatrix(e){var t,r,i,n,s;if(this.object.position.equals(e.position)===!1){let h=this.object.position.clone(),d={t:0};(t=this._animation)==null||t.add({targets:d,t:1,update:()=>{this.object.position.lerpVectors(h,e.position,d.t),this.object.updateMatrix()}},0)}if(this.object.scale.equals(e.scale)===!1){let h=this.object.scale.clone(),d={t:0};(r=this._animation)==null||r.add({targets:d,t:1,update:()=>{this.object.scale.lerpVectors(h,e.scale,d.t),this.object.updateMatrix()}},0)}if(this.object.rotation.equals(e.rotation)===!1){let h=(this._prevState?this._prevState.rotation:this.object.rotation).toVector3(SL),d=e.rotation.toVector3(une).sub(h),p={t:0};if(Object.values(d).every(f=>Math.abs(f)<2*Math.PI)){let f=this.object.quaternion.clone(),m=new Hr().setFromEuler(e.rotation);(i=this._animation)==null||i.add({targets:p,t:1,update:()=>{Rre(f,m,this.object.quaternion,p.t),this.object.updateMatrix()}},0)}else{let f=this.object.rotation.toVector3(),m=e.rotation.toVector3().sub(f);(n=this._animation)==null||n.add({targets:p,t:1,update:()=>{this.object.rotation.setFromVector3(SL.copy(m).multiplyScalar(p.t).add(f)),this.object.updateMatrix()}},0)}}let a=new L,o=new Hr,l=new L;if(e.hiddenMatrix.decompose(a,o,l),"hiddenMatrix"in this.object){let h=new L,d=new Hr,p=new L;if(this.object.hiddenMatrix.decompose(h,d,p),this.object.hiddenMatrix.equals(e.hiddenMatrix)===!1){let f=new L,m=new Hr,y=new L,b={t:0},x=this.object.hiddenMatrix;(s=this._animation)==null||s.add({targets:b,t:1,update:()=>{m.slerpQuaternions(d,o,b.t),f.lerpVectors(h,a,b.t),y.lerpVectors(p,l,b.t),x.compose(f,m,y)}},0)}}}animateGeometry(e){var t;if("geometry"in this.object&&e.geometry!==void 0){let r=this.object.geometry.userData.parameters,i=e.geometry;if(i.width!==r.width||i.height!==r.height||i.depth!==r.depth){let n=this.object;(t=this._animation)==null||t.add({targets:r,width:i.width,height:i.height,depth:i.depth,update:()=>{n.updateGeometry({parameters:{width:r.width,height:r.height,depth:r.depth}})}},0)}}}animateMaterial(e){if("material"in this.object&&e.material!==void 0)if(this.object.material instanceof Array)for(let t=0,r=this.object.material.length;t<r;++t)this._interpolateMaterial(this.object.material[t],e.material[t]);else{if(this.object.material.userData.isAsset)return;this._interpolateMaterial(this.object.material,e.material)}}animateCamera(e){var t,r;if(this.object.objectType==="CombinedCamera"&&e.camera!==void 0){let i=this.object,n=i.cameraType==="OrthographicCamera"?e.camera.zoomOrtho:e.camera.zoomPersp;i.zoom!==n&&((t=this._animation)==null||t.add({targets:i,zoom:n,update:()=>{i.updateProjectionMatrix()}},0)),i.targetOffset!==e.camera.targetOffset&&((r=this._animation)==null||r.add({targets:i,targetOffset:e.camera.targetOffset},0))}}animateLight(e){var t,r;if(e!==void 0&&(this.object.objectType==="LightDirectional"||this.object.objectType==="LightSpot"||this.object.objectType==="LightPoint")){let i=this.object;i.intensity!==e.intensity&&((t=this._animation)==null||t.add({targets:i,intensity:e.intensity},0)),Bn.equals(i.color,e.color)||(r=this._animation)==null||r.add({targets:i.color,r:e.color.r,g:e.color.g,b:e.color.b},0)}}_interpolateMaterial(e,t){let r=e.layersList.head,i=0;for(;r;){if(r.isBack===!0){r=r.next;continue}let n=t.layersList[i++];if(YR(r)){let s=r.uniforms[`f${r.id}_texture`].value,a=n.uniforms[`f${n.id}_texture`].value;s.image===a.image?this._interpolateMaterialTexture(e,r,n):this._interpolateMaterialBetweenLayers(e,r,n)}else r.type==="gradient"||r.type==="depth"?r.uniforms[`f${r.id}_gradientType`].value===n.uniforms[`f${n.id}_gradientType`].value?this._interpolateMaterialGradient(e,r,n):this._interpolateMaterialBetweenLayers(e,r,n):this._interpolateMaterialBetweenValues(e,r,n);r=r.next}}},h0=na;h0.isAnimating={};var IN=e=>class extends e{hasEntityChild(){return this.children.some(t=>Kx(t))}isDescendantOf(t){t instanceof Nt&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new He().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),Kx(t)?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let i=0;i<t.children.length;i++){let n=t.children[i];this.add(n.clone())}return this}toJSON(t){let r=t===void 0,i={object:{uuid:"",objectType:""}};t===void 0&&(t={geometries:{},materials:{},textures:{},images:{},interactionStates:{},nodes:{}},i.metadata={version:1.5,type:"Object",generator:"Object3D.toJSON"});let n={uuid:this.uuid,objectType:this.type};if(this.name!==""&&(n.name=this.name),n.matrix=this.matrix.toArray(),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),n.layers=this.layers.mask,JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),this.children.length>0){n.children=[];for(let s of this.children)(Kx(s)||s instanceof js)&&n.children.push(s.toJSON(t).object)}if(r){let s=md(t.geometries),a=md(t.materials),o=md(t.textures),l=md(t.images),h=md(t.interactionStates),d=lne(t.nodes);s.length>0&&(i.geometries=s),a.length>0&&(i.materials=a),o.length>0&&(i.textures=o),l.length>0&&(i.images=l),h.length>0&&(i.interactionStates=h),d.length>0&&(i.nodes=d)}return i.object=n,i}fromJSON(t){return this.uuid=t.uuid,t.name!==void 0&&(this.name=t.name),t.matrix!==void 0?(this.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(this.matrixAutoUpdate=t.matrixAutoUpdate),this.matrixAutoUpdate&&this.matrix.decompose(this.position,this.quaternion,this.scale)):(t.position!==void 0&&this.position.fromArray(t.position),t.rotation!==void 0&&this.rotation.fromArray(t.rotation),t.quaternion!==void 0&&this.quaternion.fromArray(t.quaternion),t.scale!==void 0&&this.scale.fromArray(t.scale)),this.castShadow=t.castShadow!==void 0,this.receiveShadow=t.receiveShadow!==void 0,t.visible!==void 0&&(this.visible=t.visible),t.frustumCulled!==void 0&&(this.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(this.renderOrder=t.renderOrder),t.layers!==void 0&&(this.layers.mask=t.layers),t.userData!==void 0&&(this.userData=t.userData),this}},Is=e=>"isEntity"in e,hne=e=>"isAbstractMesh"in e,Sc=e=>class extends IN(e){constructor(){super(...arguments);this.objectType="",this.isEntity=!0,this.raycastLock=!1,this.scaleLock=!1,this.hiddenMatrix=new He,this.interaction=new h0(this),this._singleBBox=new tL,this._recursiveBBox=new tL,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.forceComputeSize=!1}set visibility(t){this.visible=t;for(let r of this.children)Is(r)&&r.traverseEntity(i=>{Kp(i)&&i.visible&&(i.objectHelper.visible=t)})}get visibility(){return this.visible}get interactionCache(){return this.interaction.cache===void 0&&this.interaction.computeCache(),this.interaction.cache}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors(t=>{Is(t)&&(t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0)}),this.traverseEntity(t=>{t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0})}traverseEntity(t){t(this);for(let r of this.children)Is(r)&&r.traverseEntity(t)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}shallowClone(t){return new this.constructor().shallowCopy(this,t)}shallowCopy(t,r=!0){if(super.copy(t,!1),this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),t.interaction!==void 0&&this.interaction.copy(t.interaction),r===!0)for(let i of t.children)Is(i)&&this.add(i.shallowClone());return this}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(super.copy(t,!1),this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),t.interaction!==void 0&&this.interaction.copy(t.interaction),r===!0)for(let i of t.children)Is(i)&&this.add(i.clone());return this}keepChildrenMatrixWorld(){let t=new He,r=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),t.copy(this.matrixWorld).invert(),t.multiply(r);for(let i of this.children)Is(i)&&i.hiddenMatrix.premultiply(t)}toJSON(t){let r=super.toJSON(t),i=r.object;return this.raycastLock===!0&&(i.raycastLock=!0),this.scaleLock===!0&&(i.scaleLock=!0),i.hiddenMatrix=this.hiddenMatrix.toArray(),this.interaction!==void 0&&(i.interaction=this.interaction.toJSON(t)),r}fromJSON(t){return super.fromJSON(t),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.scaleLock!==void 0&&(this.scaleLock=t.scaleLock),this.hiddenMatrix.fromArray(t.hiddenMatrix),this}fromObject3D(t){let r=t.children;return t.children=[],Object.assign(t,{raycastLock:!1,scaleLock:!1,hiddenMatrix:new He}),this.copy(t),t.children=r,this}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return dw(r,t)}fromObjectTransformState(t){return t.position&&this.position.fromArray(t.position),t.rotation&&this.rotation.fromArray(t.rotation),t.scale&&this.scale.fromArray(t.scale),t.hiddenMatrix&&this.hiddenMatrix.fromArray(t.hiddenMatrix),this.updateMatrix(),this}toState(t=[]){let r=Le({name:this.name,visible:this.visible,raycastLock:this.raycastLock},this.toObjectTransformState(t));return dw(r,t)}fromState(t,r){return t.name&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.type!=="OrthographicCamera"&&t.type!=="PerspectiveCamera"&&(this.matrixAutoUpdate=!1),t.visible!==void 0&&(this.visibility=t.visible),this.fromObjectTransformState(t),this}},ML=class extends Nt{constructor(e,t={}){super();this.object=e;let r=e.recursiveBBox.getSize(new L),i=.1;this.parameters=fw.defaultData(r.toArray(),i),nv(this.parameters,t),this.update(),this.setHideBase(this.parameters.hideBase)}refreshMaterial(){if("material"in this.object)for(let e of this.children)e.material=this.object.material}setHideBase(e){if("material"in this.object){if(Array.isArray(this.object.material)){if(this.children.length>0){for(let t of this.object.material)t.visible=!0;if(e){let t=this.object.material.map(r=>r.clone());for(let r of this.children)r.material=t}else for(let t of this.children)t.material=this.object.material}for(let t of this.object.material)t.visible=!e}else{if(this.children.length>0)if(this.object.material.visible=!0,e){let t=this.object.material.clone();for(let r of this.children)r.material=t}else for(let t of this.children)t.material=this.object.material;this.object.material.visible=!e}this.parameters.hideBase=e}}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach(e=>e.updateMatrix())}_updateCount(){let e=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==e)if(this.children.length<e)for(let t=0,r=e-this.children.length;t<r;++t){let i=this.object.shallowClone(!1);i.visible=!0,this.add(i),this.parameters.hideBase&&this.setHideBase(!0)}else for(let t=0,r=this.children.length-e;t<r;++t)this.remove(this.children[0])}_updateRadial(e){let t=e.radial,r=t.start*sr.DEG2RAD,i=t.end*sr.DEG2RAD,n=r-i,s=new al(t.rotation[0]*sr.DEG2RAD,t.rotation[1]*sr.DEG2RAD,t.rotation[2]*sr.DEG2RAD),a;switch(t.axis){case"z":a=new L(0,0,1);break;case"y":a=new L(0,1,0);break;default:case"x":a=new L(1,0,0);break}for(let[o,l]of this.children.entries()){l.hiddenMatrix.identity(),l.scale.x=t.scale[0]+1,l.scale.y=t.scale[1]+1,l.scale.z=t.scale[2]+1,l.position.setScalar(0);let h=n/e.count*o-r;switch(t.axis){case"x":l.rotation.set(0,h,0);break;case"y":l.rotation.set(0,0,h);break;case"z":l.rotation.set(h,0,0);break}l.translateOnAxis(a,t.radius),l.position.x+=t.position[0],l.position.y+=t.position[1],l.position.z+=t.position[2],t.alignment===!0?(l.rotation.x+=s.x,l.rotation.y+=s.y,l.rotation.z+=s.z):l.rotation.copy(s)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new al(t.rotation[0]*sr.DEG2RAD,t.rotation[1]*sr.DEG2RAD,t.rotation[2]*sr.DEG2RAD);for(let[i,n]of this.children.entries())n.hiddenMatrix.identity(),n.scale.x=t.scale[0]*i+1,n.scale.y=t.scale[1]*i+1,n.scale.z=t.scale[2]*i+1,n.rotation.x=r.x*i,n.rotation.y=r.y*i,n.rotation.z=r.z*i,n.position.x=t.position[0]*i,n.position.y=t.position[1]*i,n.position.z=t.position[2]*i}_updateGrid(e){let t=0,r=e.grid;if(r.useCenter===!0){let i={x:r.count[0]%2==0?2:1,y:r.count[1]%2==0?2:1,z:r.count[2]%2==0?2:1},n=new L(r.size[0]*(r.count[0]-i.x)*.5,r.size[1]*(r.count[1]-i.y)*.5,r.size[2]*(r.count[2]-i.z)*.5);for(let s=0;s<r.count[0];s++)for(let a=0;a<r.count[1];a++)for(let o=0;o<r.count[2];o++){let l=this.children[t++];l.hiddenMatrix.identity(),l.scale.setScalar(1),l.rotation.set(0,0,0),l.position.x=r.size[0]*s-n.x,l.position.y=r.size[1]*a-n.y,l.position.z=r.size[2]*o-n.z}}else for(let i=0;i<r.count[0];i++)for(let n=0;n<r.count[1];n++)for(let s=0;s<r.count[2];s++){let a=this.children[t++];a.hiddenMatrix.identity(),a.scale.setScalar(1),a.rotation.set(0,0,0),a.position.x=r.size[0]*i,a.position.y=-r.size[1]*n,a.position.z=-r.size[2]*s}}fromJSON(e){return this}toJSON(){return{}}fromClonerState(e){return e.hideBase!==void 0&&this.setHideBase(e.hideBase),nv(this.parameters,e),this.update(),this}},Ca=class extends Sc(wi){constructor(e,t){super(e,t);this.isAbstractMesh=!0,Array.isArray(t)&&(this.selectedMaterial=0,e.groups.length===0&&e.addGroup(0,e.getAttribute("position").count,0))}get cloner(){return this._cloner}set cloner(e){this._cloner&&this.remove(this._cloner),e&&this.add(e),this._cloner=e}getSelectedMaterial(e){return Array.isArray(this.material)?(this.selectedMaterial===void 0&&(this.selectedMaterial=e!=null?e:0),this.material[e!=null?e:this.selectedMaterial]):this.material}setSelectedMaterial(e,t){Array.isArray(this.material)?(this.selectedMaterial===void 0&&(this.selectedMaterial=t!=null?t:0),t=t!=null?t:this.selectedMaterial,this.material[t].dispose(),this.material[t]=e):(this.material.dispose(),this.material=e)}updateGeometry(e){let t=this.geometry,r=HR[t.userData.type],i=this.objectType==="NonParametric"?Object.assign({},t.userData,{geometry:t}):t.userData,n=r.build(r.normalizeInputs(e,i)),s=t.uuid;if(this.geometry.dispose(),this.geometry=n,this.geometry.uuid=s,this.geometry.computeBoundingSphere(),this.cloner)for(let a of this.cloner.children)a.geometry=this.geometry}resizeGeometry(e,t,r){UR.resizeGeometry(this.geometry,{width:e,height:t,depth:r})}shallowClone(e){return new this.constructor(this.geometry,this.material).shallowCopy(this,e)}clone(e){let t=this.objectType==="NonParametric"?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,r=zw(t),i=Array.isArray(this.material)?this.material.map(n=>n.clone()):this.material.clone();return new this.constructor(r,i).copy(this,e)}copy(e,t=!0){return super.copy(e,t),e.cloner&&(this.cloner=new ML(e,e.cloner.parameters),this.add(this.cloner)),this}toJSON(e){let t=super.toJSON(e),r=t.object;if(r.geometry=one(e.geometries,this.geometry,this.material),Array.isArray(this.material)){let i=[];for(let n=0,s=this.material.length;n<s;n++)i.push(Gw(e.materials,this.material[n],e));r.material=i}else r.material=Gw(e.materials,this.material,e);return t}fromJSON(e){return super.fromJSON(e),e.selectedMaterial!==void 0&&(this.selectedMaterial=e.selectedMaterial),this}setFromClonerState(e){e===null?this.cloner=void 0:(this.cloner===void 0&&(this.cloner=new ML(this)),this.cloner.fromClonerState(e))}fromState(e,t){var r,i;return super.fromState(e),e.type==="Mesh"&&(this.setFromClonerState(e.cloner),this.castShadow=(r=e.castShadow)!=null?r:!0,this.receiveShadow=(i=e.receiveShadow)!=null?i:!0),this}},qm=new q,wg=class{constructor(e,t,r){this.message=[],this.endLine=!0,this.yLinePos=e,this.lineHeight=t,this.maxCharSize=r,this.nextChar3DPos=new q(0,this.yLinePos+this.maxCharSize*this.lineHeight),this.align=rs.Left}addChar3D(e,t,r=this.message.length){this.message.splice(r,0,e),e.fontSize>this.maxCharSize?(this.maxCharSize=e.fontSize,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight,this.fullUpdate(t)):(e.updatePosition(this.nextChar3DPos,t),this.nextChar3DPos.x+=e.charSize)}deleteChar3D(e=this.message.length-1){let t=this.message[e];if(t)return this.message.splice(e,1),this.nextChar3DPos.x-=t.charSize,t}isEndLine(e){this.endLine=e}fullUpdate(e,t=0){this.nextChar3DPos.x=0;for(let r=t,i=this.message.length;r<i;r+=1)this.message[r].updatePosition(this.nextChar3DPos,e),this.nextChar3DPos.x+=this.message[r].charSize}checkOverFlow(e){let t,r=this.message.length-1;if(r<=0)return!1;for(;r>=0;){if(this.message[r].char!==" "){t=this.message[r];break}r-=1}return!!(r>=0&&t&&t.localPosition.x+t.charSize>e)}containSpaceOverFlow(e=this.message.length-1){for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}containSpace(e=this.message.length-1){if(this.endLine)return!0;for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}popWord(e=this.message.length-1){let t=[],r=!0,i;for(i=e;i>=0;i-=1)if(this.message[i].char===" "){r=!1,t.length===0&&(i-=1,t.splice(0,0,this.message[i]));break}else t.splice(0,0,this.message[i]);return r?t=[]:this.message.splice(i+1,t.length),t}getWord(e=0,t=1){let r=[],i=e;for(i=e;;i+=t){if(!this.message[i]||this.message[i].char===" "){r.length===0&&this.message[i]&&(r.push(this.message[i]),this.message.splice(i,1));break}t>0?(r.push(this.message[i]),this.message.splice(i,1),i-=t):(r.splice(0,0,this.message[i]),this.message.splice(i,1))}return r}getWordAtIndex(e){let t=[];for(let r=e;r<this.message.length&&this.message[r].char!==" ";r++)t.push(this.message[r]);for(let r=e-1;r>=0&&this.message[r].char!==" ";r--)t.splice(0,0,this.message[r]);return t}wordSize(e=0,t=-1){let r=0,i=e;for(;i>=0&&i<this.message.length;){if(this.message[i].char===" "){r===0&&(r=this.message[i].charSize);break}r+=this.message[i].charSize,i+=t}return(i<0||i>=this.message.length)&&!this.endLine?this.message[e]?this.message[e].charSize:999999999:r===0?999999999:r}spaceLeft(e){return e-this.nextChar3DPos.x}popChar(e=this.message.length-1){return this.nextChar3DPos.x-=this.message[e].charSize,this.message.splice(e,1)}isEmpty(){return!this.message.length}updateNextCharPosY(){this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}updateYLinePos(e){this.yLinePos=e,this.updateNextCharPosY()}updatelineHeight(e){this.lineHeight=e,this.updateNextCharPosY()}updateFontSize(e,t=0,r=this.message.length-1){for(let i=t;i<=r;i+=1)this.message[i].updateFontSize(e);this.maxCharSize=e,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}countSpaces(){let e=0;for(let t=0;t<this.message.length;t++)this.message[t].char===" "&&(e+=1);return e}alignText(e,t,r,i,n){switch(r){case rs.Left:this.leftAlign(e,n);break;case rs.Center:this.centerAlign(this.spaceLeft(t),e,n);break;case rs.Right:this.rightAlign(this.spaceLeft(t),e,n);break;case rs.Justify:this.justifyAlign(this.spaceLeft(t),e,n);break}}offsetCharacters(e,t,r){qm.set(t,r);let i=this.message.length;for(let n=0;n<i;n++)this.message[n].updatePosition(this.message[n].localPosition.add(qm),e)}leftAlign(e,t){this.align=rs.Left,this.offsetCharacters(e,0,t)}centerAlign(e,t,r){this.align=rs.Center,this.offsetCharacters(t,e/2,r)}rightAlign(e,t,r){this.align=rs.Right,this.offsetCharacters(t,e,r)}justifyAlign(e,t,r){if(this.align=rs.Justify,this.endLine){this.offsetCharacters(t,0,r);return}let i=this.countSpaces();if(i===0){this.offsetCharacters(t,0,r);return}let n=e/i,s=0;for(let a=0;a<this.message.length;a++)this.message[a].char===" "&&(s+=n),qm.set(s,r),this.message[a].updatePosition(this.message[a].localPosition.add(qm),t)}clone(){let e=new wg(this.yLinePos,this.lineHeight,this.maxCharSize);e.nextChar3DPos=this.nextChar3DPos.clone(),e.align=this.align,e.endLine=this.endLine;for(let t=0;t<this.message.length;t++)e.message.push(this.message[t].clone());return e}},cne=new L(0,0,1),EL=new L,TL=new L,CL=new Dr,Z_=class extends Ca{constructor(e=oo.create({}),t=new lo({side:xi})){super(e,t);this.recursiveSelection=!1,this.objectType="VectorObject",this.eventDispatcher=new Gn,this._onShapeUpdate=()=>{if(this.geometry instanceof LR){if(this.geometry.updateFromShape()){let i=this.geometry.drawCount,n=this.geometry.userData;this.updateGeometry(Object.assign(this.geometry.userData,{parameters:Object.assign(n.parameters,{surfaceMaxCount:i+1e3})}))}}else this.updateGeometry({});this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox()};var r;this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!0,this.shape=e.userData.shape,(r=this.shape.eventDispatcher)==null||r.addEventListener("update",this._onShapeUpdate)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="VectorObject",t}fromState(e){return super.fromState(e),this.shape.update(),this}setHelperVisibility(){}updateGeometry(e){if(super.updateGeometry(e),"userData"in this.geometry){let t=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:t})}}setShape(e){var t,r;this.shape&&((t=this.shape.eventDispatcher)==null||t.removeEventListener("update",this._onShapeUpdate)),this.shape=e,(r=this.shape.eventDispatcher)==null||r.addEventListener("update",this._onShapeUpdate)}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),CL.getNormalMatrix(this.matrixWorld),EL.copy(cne).applyMatrix3(CL).normalize(),TL.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(EL,TL)}clone(e){let t=this.shape.clone(),r=this.material.clone(),i=this.geometry.userData,n=oo.create(Object.assign({},i,{shape:t})),s=new Z_(n,r).copy(this,e);return s.shape=t,t.update(),s}raycast(e,t){Ca.prototype.raycast.call(this,e,t)}},Zp=e=>{var t;return t=class extends e{constructor(){super(...arguments);this.isObjectHelper=!0}},t.geometryHelper=new ol(30,30,30),t},Qm=new ml,e1=new Vs,LL=new He,$p=(e,t,r,i,n=!1)=>{let s=t,a=e.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),e1.copy(s.boundingSphere),e1.applyMatrix4(a),r.ray.intersectsSphere(e1)===!1||(LL.copy(a).invert(),Qm.copy(r.ray).applyMatrix4(LL),s.boundingBox!==null&&Qm.intersectsBox(s.boundingBox)===!1))return;let o,l,h,d,p=s.index,f=s.attributes.position,m=s.drawRange,y,b;if(n===!1){let v=Math.max(0,m.start),g=Math.min(p.count,m.start+m.count);for(y=v,b=g;y<b;y+=3)if(l=p.getX(y),h=p.getX(y+1),d=p.getX(y+2),o=x(e,r,Qm,f,l,h,d),o){o.faceIndex=Math.floor(y/3),i.push(o);return}}else{let v=s.attributes.position,g=new L,_=new L,S=new L,T=new L,A=2,M=1/((e.scale.x+e.scale.y+e.scale.z)/3),O=M*M,P=Math.max(0,m.start),C=Math.min(v.count,m.start+m.count);for(let N=P,U=C-1;N<U;N+=A){if(g.fromBufferAttribute(v,N),_.fromBufferAttribute(v,N+1),Qm.distanceSqToSegment(g,_,T,S)>O)continue;T.applyMatrix4(e.matrixWorld);let V=r.ray.origin.distanceTo(T);V<r.near||V>r.far||i.push({distance:V,point:S.clone().applyMatrix4(e.matrixWorld),object:e})}}function x(v,g,_,S,T,A,M){let O=new L,P=new L,C=new L,N=new L,U=new L;if(O.fromBufferAttribute(S,T),P.fromBufferAttribute(S,A),C.fromBufferAttribute(S,M),_.intersectTriangle(O,P,C,!1,N)===null)return null;U.copy(N),U.applyMatrix4(v.matrixWorld);let V=g.ray.origin.distanceTo(U);return V<g.near||V>g.far?null:{faceIndex:1,distance:V,point:U.clone(),object:v}}},Km=new L,ts=new su,dne=class extends gl{constructor(e){let t=new st,r=new gs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={},a=new Ue(V2),o=new Ue(V2),l=new Ue(wte);h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",o),h("p","n2",o),h("p","n3",o),h("p","n4",o),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l);function h(p,f,m){d(p,m),d(f,m)}function d(p,f){i.push(0,0,0),n.push(f.r,f.g,f.b),s[p]===void 0&&(s[p]=[]),s[p].push(i.length/3-1)}t.setAttribute("position",new We(i,3)),t.setAttribute("color",new We(n,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;ts.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;Ls("n1",t,e,ts,-r,-i,n),Ls("n2",t,e,ts,r,-i,n),Ls("n3",t,e,ts,-r,i,n),Ls("n4",t,e,ts,r,i,n);let s=n;Ls("f1",t,e,ts,-r,-i,s),Ls("f2",t,e,ts,r,-i,s),Ls("f3",t,e,ts,-r,i,s),Ls("f4",t,e,ts,r,i,s);let a=s,o=.5;Ls("u1",t,e,ts,r*.7*o,i*1.1,a),Ls("u2",t,e,ts,-r*.7*o,i*1.1,a),Ls("u3",t,e,ts,0,i*(1.1+.9*o),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ls(e,t,r,i,n,s,a){Km.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let h=0,d=o.length;h<d;h++)l.setXYZ(o[h],Km.x,Km.y,Km.z)}}var pne=class extends Zp(dne){constructor(e){super(e);this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){$p(this.object,this.geometry,e,t,!0)}},BN=class extends Zp(TY){constructor(e,t=15,r=10066329){super(e,t,r);this.object=e,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){$p(this.object,BN.geometryHelper,e,t)}},zN=class extends Zp(CY){constructor(e,t=15){super(t);this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){$p(this.object,zN.geometryHelper,e,t)}update(){}},FN=class extends Zp(MY){constructor(e,t=15,r=6710886){super(e,t,r);this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){$p(this.object,FN.geometryHelper,e,t)}},Vw=class extends Zp(SY){constructor(e,t=6710886){super(e,t);this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){$p(this.object,Vw.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=Vw._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},UN=Vw;UN._vector=new L;var ef=(e,t)=>class extends e{constructor(){super(...arguments);this.objectHelper=new t(this),this.enableHelper=!1}set visibility(r){this.visible=r,this.setHelperVisibility(r),this.setHelperChildrenVisibility(r)}get visibility(){return this.visible}get geometryHelper(){return t.geometryHelper}setHelperVisibility(r){this.objectHelper.visible=r}setHelperChildrenVisibility(r){for(let i of this.children)Is(i)&&i.traverseEntity(n=>{Kp(n)&&n.visible&&(n.objectHelper.visible=r)})}raycast(r,i){this.objectHelper.raycast(r,i)}copy(r,i=!0){return super.copy(r,i),r.enableHelper!==void 0&&(this.enableHelper=r.enableHelper),r.objectHelper!==void 0&&(this.objectHelper.visible=r.objectHelper.visible),this}toJSON(r){let i=super.toJSON(r),n=i.object;return n.enableHelper=this.enableHelper,i}fromJSON(r){return super.fromJSON(r),r.enableHelper!==void 0&&(this.enableHelper=!0),this}fromLightState(r,i){if(this.objectType==="LightDirectional"||this.objectType==="LightPoint"||this.objectType==="LightSpot"){let n=this;r.color!==void 0&&(n.color=Xi(r.color,i)),r.intensity!==void 0&&(n.intensity=r.intensity),r.depth!==void 0&&(n.shadow.camera.far=r.depth,n.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows),r.helper!==void 0&&(this.enableHelper=r.helper,n.gizmos.shadowmap.visible=r.helper)}return this}},Qu=new L,t1=new L,rc=class extends ef(Sc(su),pne){constructor(e=window.innerWidth,t=window.innerHeight,r=45,i,n=1e5){super();this.objectType="CombinedCamera",this._cameraType="OrthographicCamera",this.targetOffset=Ep.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.width=e,this.height=t,this.orthoCamera=new jv(e*-.5,e*.5,t*.5,t*-.5,i!=null?i:-5e4,n),this.perspCamera=new Pi(r,e/t,i!=null?i:50,n),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.fov=this.perspCamera.fov,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.toOrthographic(!0)}static createFromState(e,t){let r=new rc().fromState(t);return r.enableHelper=!0,r.objectHelper.update(),r.uuid=e,r}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e){super.lookAt(e),this.getWorldPosition(Qu),this.targetOffset=Qu.distanceTo(e)}getTarget(e=new L){return this.getWorldDirection(t1),this.getWorldPosition(Qu),t1.multiplyScalar(this.targetOffset),e.copy(Qu).add(t1),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(Qu),Qu.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new Hr),t=new L(0,0,1).applyQuaternion(e),r=new L().copy(Nt.DefaultUp);this.isUpVectorFlipped&&r.negate(),r.applyQuaternion(e);let i=new L().copy(Nt.DefaultUp).projectOnPlane(t),n=new L().crossVectors(i,r).dot(t)>=0?1:-1;this.angleOffsetFromUp=i.angleTo(r)*n}getViewFrontToObject(e){let t=e.getWorldPosition(new L),r=e.getWorldDirection(new L).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToObject(e){let t=e.getWorldPosition(new L),r=this.getWorldDirection(new L).multiplyScalar(this.targetOffset);return{position:t.clone().sub(r),target:t}}setViewplaneSize(e,t){this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5,this.aspect=e/t,this.updateProjectionMatrix()}toOrthographic(e){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",(this.enableHelper===!0||e===!0)&&this.objectHelper.update()}toPerspective(e){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",(this.enableHelper===!0||e===!0)&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,s):this.orthoCamera.setViewOffset(e,t,r,i,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(e){this._cameraType==="PerspectiveCamera"?this.toPerspective(e):this._cameraType==="OrthographicCamera"&&this.toOrthographic(e)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}fromCameraRender(e){let t={near:this.orthoCamera.near,far:this.orthoCamera.far},r={near:this.perspCamera.near,far:this.perspCamera.far};return this.copy(e),this.name="",this.enableHelper=!0,this.objectHelper.visible=!0,this.orthoCamera.near=t.near,this.orthoCamera.far=t.far,this.perspCamera.near=r.near,this.perspCamera.far=r.far,this.updateProjectionMatrix(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="CombinedCamera",r.cameraType=this.cameraType,r.targetOffset=this.targetOffset,r.isUpVectorFlipped=this.isUpVectorFlipped,r.angleOffsetFromUp=this.angleOffsetFromUp,r.left=this.left,r.right=this.right,r.top=this.top,r.bottom=this.bottom,this.view!==null&&(r.view=Object.assign({},this.view)),r.zoomOrtho=this.orthoCamera.zoom,r.nearOrtho=this.orthoCamera.near,r.far=this.far,r.aspect=this.aspect,r.fov=this.fov,r.focus=this.focus,r.filmGauge=this.filmGauge,r.filmOffset=this.filmOffset,r.zoomPersp=this.perspCamera.zoom,r.nearPersp=this.perspCamera.near,t}fromJSON(e){var t;if(super.fromJSON(e),this.cameraType=e.cameraType,e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.orbitControlsTarget!==void 0){let r=this.getWorldPosition(new L),i=new L().fromArray(e.orbitControlsTarget);this.targetOffset=i.distanceTo(r)}else e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset);return this.isUpVectorFlipped=!1,this.angleOffsetFromUp=(t=e.angleOffsetFromUp)!=null?t:0,e.left!==void 0&&(this.left=e.left),e.right!==void 0&&(this.right=e.right),e.top!==void 0&&(this.top=e.top),e.bottom!==void 0&&(this.bottom=e.bottom),e.view!==void 0&&(this.view=Object.assign({},e.view)),e.zoomOrtho!==void 0&&(this.orthoCamera.zoom=e.zoomOrtho),e.nearOrtho!==void 0&&(this.orthoCamera.near=e.nearOrtho),e.far!==void 0&&(this.far=e.far),e.aspect!==void 0&&(this.aspect=e.aspect),e.fov!==void 0&&(this.fov=e.fov),e.focus!==void 0&&(this.focus=e.focus),e.filmGauge!==void 0&&(this.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(this.filmOffset=e.filmOffset),e.zoomPersp!==void 0&&(this.perspCamera.zoom=e.zoomPersp),e.nearPersp!==void 0&&(this.perspCamera.near=e.nearPersp),this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return dw(t,e)}fromCameraState(e){let{orthographic:t,perspective:r}=e;return e.type!==void 0&&(this.cameraType=e.type),e.far!==void 0&&(this.far=e.far),t!==void 0&&(t.near!==void 0&&(this.orthoCamera.near=t.near),t.zoom!==void 0&&(this.orthoCamera.zoom=t.zoom)),r!==void 0&&(r.near!==void 0&&(this.perspCamera.near=r.near),r.fov!==void 0&&(this.perspCamera.fov=r.fov),r.zoom!==void 0&&(this.perspCamera.zoom=r.zoom)),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix(),this}toState(e){return tt(Le(Le({},super.toState(e)),this.toCameraState(e)),{type:this.cameraType})}fromState(e){return super.fromState(e),this.fromCameraState(e),this}},Yl=class extends ef(Sc(mh),zN){constructor(){super(...arguments);this.objectType="EmptyObject"}static createFromState(e,t){let r=new Yl().fromState(t);return r.uuid=e,r.enableHelper=!0,r.objectHelper.update(),r}toJSON(e){let t=super.toJSON(e);return t.object.objectType="EmptyObject",t}},kN=class extends ef(Sc(xD),BN){constructor(...e){super(...e);this.objectType="LightDirectional",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.top=1250,t.bottom=-1250,t.right=1250,t.left=-1250,t.near=1,t.far=2500;let r=new Uo(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let i=new kN().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Uo&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Uo&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Uo&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.enableHelper===!0&&this.objectHelper.visible===!0&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightDirectional",r.color=this.color.getHex(),r.intensity=this.intensity,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.shadow.normalBias=(t=e.shadow.normalBias)!=null?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray(e.shadow.mapSize);let r=this.shadow.camera,i=e.shadow.camera;return r.near=i.near,r.far=i.far,r.zoom=i.zoom,r.left=i.left,r.right=i.right,r.top=i.top,r.bottom=i.bottom,i.view!==void 0&&(r.view=Object.assign({},i.view)),this}fromDirectionalLightState(e,t){let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;return super.fromLightState(e,t),e.size!==void 0&&Pre(this,e.size),r&&this.update(),this}fromState(e,t){return super.fromState(e),this.fromDirectionalLightState(e,t),this}},HN=class extends ef(Sc(vD),FN){constructor(...e){super(...e);this.objectType="LightPoint",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.fov=90,t.aspect=1,t.near=100,t.far=2500;let r=new L(-t.far+this.position.x,-t.far+this.position.y,-t.far+this.position.z),i=new L(t.far+this.position.x,t.far+this.position.y,t.far+this.position.z),n=new zi(r,i),s=new Um(n,new Ue(16755200));s.visible=!1,this._gizmos.shadowmap=s,this.update()}static createFromState(e,t,r){let i=new HN().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Um&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Um&&(t.visible=!1)}}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(let e in this._gizmos){let t=this._gizmos[e];if(t instanceof Um){let r=this.shadow.camera,i=new L(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new L(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.enableHelper===!0&&this.objectHelper.visible===!0&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightPoint",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.decay=this.decay,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t,r;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow.normalBias=(t=e.shadow.normalBias)!=null?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray((r=e.shadow.mapSize)!=null?r:[512,512]),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null);let i=this.shadow.camera,n=e.shadow.camera;return i.near=n.near,i.far=n.far,i.zoom=n.zoom,i.fov=n.fov,i.focus=n.focus,i.aspect=n.aspect,i.filmGauge=n.filmGauge,i.filmOffset=n.filmOffset,n.view!==void 0&&(i.view=Object.assign({},n.view)),this}fromPointLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromPointLightState(e,t),this}},OL=new L,PL=new L,DL=new Hr,GN=class extends ef(Sc(mD),UN){constructor(...e){super(...e);this.objectType="LightSpot",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.fov=sr.RAD2DEG*2*this.angle,t.aspect=1,t.near=100,t.far=2500;let r=new Uo(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let i=new GN().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Uo&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Uo&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Uo&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),PL.setFromMatrixPosition(this.matrixWorld),DL.setFromRotationMatrix(this.matrixWorld),OL.copy(this.up).applyQuaternion(DL).negate().multiplyScalar(this.distance),this.target.position.copy(PL).add(OL),this.target.updateMatrixWorld(),this.enableHelper===!0&&this.objectHelper.visible===!0&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightSpot",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.angle=this.angle,r.decay=this.decay,r.penumbra=this.penumbra,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.decay=e.decay,this.penumbra=e.penumbra,this.shadow.normalBias=(t=e.shadow.normalBias)!=null?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray(e.shadow.mapSize);let r=this.shadow.camera,i=e.shadow.camera;return r.near=i.near,r.far=i.far,r.zoom=i.zoom,r.fov=i.fov,r.focus=i.focus,r.aspect=i.aspect,r.filmGauge=i.filmGauge,r.filmOffset=i.filmOffset,i.view!==void 0&&(r.view=Object.assign({},i.view)),this}fromSpotLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),this}fromState(e,t){return super.fromState(e),this.fromSpotLightState(e,t),this}},RL=e=>e.tagName==="VIDEO",jw=class{static resize(e,t,r){let i=e/t,n;if(!r.image)return;let s=r.image;RL(s)?n=s.videoWidth/s.videoHeight:n=s.width/s.height,i>n&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1*n/i):r.repeat.set(1,1*n/i)),i<n&&(r.imageType=="WEBCAM"?r.repeat.set(1*i/n*-1,1):r.repeat.set(1*i/n,1)),i==n&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1):r.repeat.set(1,1))}static resizeTextureLayer(e,t,r){let i=e/t,n=r.image!==void 0?r.image.width/r.image.height:1,s;i>n?s={x:1,y:n/i}:i<n?s={x:i/n,y:1}:s={x:1,y:1},r.repeat.set(s.x,s.y),r.updateMatrix()}static resizeTextureLayers(e,t,r){let i=r.userData.layers,n=i.getLayers();for(let s=0;s<n.length;s++){let a=n[s];YR(a)&&(jw.resizeTextureLayer(e,t,a.uniforms[`f${a.id}_texture`].value),i.updateLayerUniform())}}static resizeComplex(e,t,r,i){let n=e/t,s,a=r.image;RL(a)?s=a.videoWidth/a.videoHeight:s=a.width/a.height,i.geometry.type.includes("Shape")?(n>s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*-1,1/t*s/n):r.repeat.set(1/e,1/t*s/n)),n<s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*n/s*-1,1/t):r.repeat.set(1/e*n/s,1/t)),n==s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*-1,1/t):r.repeat.set(1/e,1/t))):(n>s&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1*s/n):r.repeat.set(1,1*s/n)),n<s&&(r.imageType=="WEBCAM"?r.repeat.set(1*n/s*-1,1):r.repeat.set(1*n/s,1)),n==s&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1):r.repeat.set(1,1)))}},VN=class extends Ca{constructor(e,t=new lo){super(e,t);this.objectType="Mesh2D",this.castShadow=!0,this.receiveShadow=!0}updateGeometry(e){super.updateGeometry(e),this.material.userData.layers&&jw.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}resizeGeometry(e,t){super.resizeGeometry(e,t,0),this.material.userData.layers&&jw.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="Mesh2D",t}clone(){let e=super.clone();return e.updateGeometry({}),e}static fromTexture(e){let t,r;if(e instanceof qP){let s=e.image;t=s.videoWidth*.5,r=s.videoHeight*.5}else{let s=e.image;t=s.width*.5,r=s.height*.5}let i=zR.create({parameters:{width:t,height:r}}),n=new lo;return n.layersList.changeLayer(0,{type:Gt.TEXTURE,texture:e}),n.layersList.moveLayer(0,1),n.dispose(),new VN(i,n)}},jN=class extends Ca{constructor(e,t=new ec){super(e,t);this.objectType="Mesh3D",this.castShadow=!0,this.receiveShadow=!0}toJSON(e){let t=super.toJSON(e);return t.object.objectType="Mesh3D",t}},WN=class extends jN{constructor(e,t=new ec){super(e,t);this.objectType="NonParametric"}toJSON(e){let t=super.toJSON(e);return t.object.objectType="NonParametric",t}},NL;(function(e){e[e.TO_RIGHT=1]="TO_RIGHT",e[e.TO_LEFT=-1]="TO_LEFT"})(NL||(NL={}));var JN=class extends Ca{constructor(e,t=new lo({transparent:!0,opacity:1,visible:!1,side:xi})){super(e,t);this.objectType="TextFrame",this.charContainer=new Nt,this.add(this.charContainer),this.material.visible=!1,this._geometryUserData=e.userData,this.userData.textFrame={hexColor:null,opacity:1,visible:!0,text:"",fontSize:16,lineHeight:1.5,letterSpacing:1,fontFamily:"roboto_regular",textTransform:Bh.None,horizontalAlignment:1,verticalAlignment:Hl.Top,LOD:16,maxLineSize:this._geometryUserData.parameters.width,textOrigin:new L(this._geometryUserData.parameters.width*-.5,this._geometryUserData.parameters.height*.5,0),textLines:[]},this.createTextLine()}static createFromState(e,t,r){let i=FR.create({parameters:{width:t.width,height:t.height}}),n=new JN(i).fromState(t,r);return n.uuid=e,n}async updateText(e){this.clearText();let t=this.userData.textFrame,r=t.fontFamily;await Nn.loadFont(r),t.text=e;let i=t.textOrigin,n=new Kl({visible:t.visible,transparent:!0,side:xi}),s=e.split(`
`),a=0;this.userData.textFrame.textLines=s.map((o,l)=>{let h=new wg(a,t.lineHeight,t.fontSize);return h.message=o.split("").map(d=>{let p={char:d,fontFamily:r,letterSpacing:t.letterSpacing,fontSize:t.fontSize,LOD:16},f=n.clone();f.color=t.hexColor,f.opacity=t.opacity;let m=new Nn(p,f);return h.addChar3D(m,i),this.charContainer.add(m),m}),a+=h.maxCharSize*h.lineHeight,h}),this.textFullUpdate(),this.checkOverFlow()}clearText(){let e=this.userData.textFrame.textLines;for(;this.charContainer.children.length;){let t=this.charContainer.children[0];this.charContainer.remove(t)}for(;e.length;)e.pop()}raycast(e,t){let r=[];if(super.raycast(e,r),r.length>0){t.push(r[0]);return}let i=[];for(let n=0,s=this.charContainer.children.length;n<s;++n)if(this.charContainer.children[n]instanceof Nn&&(e.intersectObject(this.charContainer.children[n],!1,i),i.length>0)){i[0].object=this,t.push(i[0]);return}}updateGeometry(e){var t,r,i,n;let s=this.userData,a=this.geometry.userData,o=a.parameters.width,l=a.parameters.height,h=(r=(t=e.parameters)==null?void 0:t.width)!=null?r:o,d=(n=(i=e.parameters)==null?void 0:i.height)!=null?n:l,p=s.textFrame;super.updateGeometry(e),p.maxLineSize=h,p.textOrigin.set(-.5*h,.5*d,0),d!==l?(this.checkOverFlow(),this.checkCapacity()):h!==o&&(o<h?this.checkCapacity():o>h&&this.checkOverFlow())}checkOverFlow(e=0){let t=this.userData,r=t.textFrame.textOrigin,i=t.textFrame.textLines;for(let n=e;n<i.length;n++){i[n].updateYLinePos(this.getNewLinePosition(n)),i[n].fullUpdate(r);let s=[];for(;i[n].checkOverFlow(t.textFrame.maxLineSize);)i[n].containSpaceOverFlow()?s.unshift(i[n].getWord(i[n].message.length-1,-1)):s.unshift(i[n].popChar());if(s.length>0){i[n+1]===void 0?(i[n].isEndLine(!1),this.createTextLine()):i[n].endLine&&(this.createTextLine(n+1),i[n].isEndLine(!1),i[n+1].isEndLine(!0));let a=0;for(let o=0;o<s.length;o+=1)for(let l=0;l<s[o].length;l+=1)i[n+1].addChar3D(s[o][l],r,a),a+=1;i[n+1].fullUpdate(r)}i[n].fullUpdate(r)}this.textFullUpdate(e)}checkCapacity(e=0){let t=this.userData,r=t.textFrame.textOrigin,i=t.textFrame.maxLineSize,n=t.textFrame.textLines;for(let s=e;s<n.length;s+=1)if(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(r),!!n[s-1])for(;!n[s-1].endLine;){let a,o=n[s-1].spaceLeft(i);if(n[s].wordSize(0,1)<=o){n[s].containSpace()?a=n[s].getWord(0,1):a=n[s].popChar(0);for(let l=0;l<a.length;l+=1)a[l]&&n[s-1].addChar3D(a[l],r)}else{n[s].isEmpty()?(n[s].endLine&&n[s-1].isEndLine(!0),n.splice(s,1),s-=1):(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(r));break}}this.textFullUpdate(e)}createTextLine(e=this.userData.textFrame.textLines.length){let t=this.userData.textFrame;t.textLines.splice(e,0,new wg(this.getNewLinePosition(e),t.lineHeight,t.fontSize))}textFullUpdate(e=0){let t=this.userData.textFrame,r=t.textLines,i=this.getVerticalAlignmentOffSet();for(let n=e;n<r.length;n++)r[n].updateYLinePos(this.getNewLinePosition(n)),r[n].fullUpdate(t.textOrigin),r[n].alignText(t.textOrigin,t.maxLineSize,t.horizontalAlignment,t.verticalAlignment,i)}getVerticalAlignmentOffSet(){switch(this.userData.textFrame.verticalAlignment){case Hl.Top:return 0;case Hl.Center:return this.getRemainingVerticalSpace()/2;case Hl.Bottom:return this.getRemainingVerticalSpace();default:return 0}}getRemainingVerticalSpace(){let e=this.userData.textFrame.textLines;return this.geometry.userData.parameters.height-this.getNewLinePosition(e.length)}getNewLinePosition(e){let t=this.userData.textFrame.textLines,r=0;for(let i=0;i<e;i+=1)r+=t[i].maxCharSize*t[i].lineHeight;return r}updateColor(e){var t;let r=this.userData;r.textFrame.hexColor=e;let i=r.textFrame.textLines;for(let n=0;n<i.length;n++){let s=i[n].message;for(let a=0;a<s.length;a++){let o=s[a].material;(t=o.color)!=null&&t.isColor&&(o.color=e)}}}updateOpacity(e){let t=this.userData;t.textFrame.opacity=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++){let a=n[s].material;a.opacity=e}}}updateVisible(e){let t=this.userData;t.textFrame.visible=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++){let a=n[s].material;a.visible=e}}}async updateFontFamily(e){await Nn.loadFont(e);let t=this.userData.textFrame,r=t.textLines;t.fontFamily=e;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)n[s].updateFontFamily(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateFontSize(e){let t=this.userData.textFrame,r=t.textLines,i=t.fontSize;t.fontSize=e;for(let n=0;n<r.length;n++)r[n].updateFontSize(e);this.textFullUpdate(),e>i?this.checkOverFlow():e<i&&this.checkCapacity()}async updateTextTransform(e){let t=this.userData.textFrame;await Nn.loadFont(t.fontFamily);let r=t.textLines;switch(t.textTransform=e,e){case Bh.Upper:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].char.toUpperCase())}break;case Bh.Lower:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].char.toLowerCase())}break;default:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].originalChar)}}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLetterSpacing(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.letterSpacing=e;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)n[s].updateLetterSpacing(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLOD(e){let t=this.userData;t.textFrame.LOD=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLineHeight(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.lineHeight=e;for(let i=0;i<r.length;i++)r[i].updatelineHeight(e);this.textFullUpdate()}updateVerticalAlignment(e){let t=this.userData;t.textFrame.verticalAlignment=e,this.textFullUpdate()}updateHorizontalAlignment(e){let t=this.userData;t.textFrame.horizontalAlignment=e,this.textFullUpdate()}toJSON(e){let t=super.toJSON(e),r=t.object;r.objectType="TextFrame";let i=this.userData.textFrame.textLines.map(n=>{let s=n.message.map(a=>({char:a.char,originalChar:a.originalChar,fontFamily:a.fontFamily,letterSpacing:a.letterSpacing,fontSize:a.fontSize,LOD:a.LOD}));return{align:n.align,endLine:n.endLine,lineHeight:n.lineHeight,maxCharSize:n.maxCharSize,yLinePos:n.yLinePos,message:s}});return r.userData.textFrame.textLinesData=i,t}async fromJSONasync(e){if(super.fromJSON(e),e.userData!==void 0){let t=e.userData.textFrame;await Nn.loadFont(t.fontFamily),t.textOrigin=new L(t.textOrigin.x,t.textOrigin.y,t.textOrigin.z);let r=new Kl({color:t.hexColor,opacity:t.opacity,visible:t.visible,transparent:!0,side:xi});t.textLinesData&&(t.textLines=t.textLinesData.map((i,n)=>{let s=new wg(Number(i.yLinePos),Number(i.lineHeight),Number(i.maxCharSize)),a=i.message.map((o,l)=>{if(o.char===void 0){let p=t.textLines[n].message[l];if("geometries"in p){let f=p.geometries[0].userData.parameters;Object.assign(o,{LOD:f.lod,char:f.char,fontFamily:f.fontFamily,fontSize:f.fontSize,letterSpacing:f.letterSpacing,originalChar:f.char})}}let h={char:o.char,fontFamily:o.fontFamily,letterSpacing:Number(o.letterSpacing),fontSize:Number(o.fontSize),LOD:o.LOD},d=new Nn(h,r.clone());return s.addChar3D(d,t.textOrigin),this.charContainer.add(d),d});return s.message=a,s}),this.userData.textFrame=t),this.textFullUpdate()}return this}fromTextFrameData(e,t){if(e.color!==void 0){let r=Xi(e.color,t);this.updateColor(r),this.updateOpacity(r.a)}e.alpha!==void 0&&this.updateOpacity(e.alpha),e.font!==void 0&&this.updateFontFamily(e.font),e.horizontalAlign!==void 0&&this.updateHorizontalAlignment(e.horizontalAlign),e.verticalAlign!==void 0&&this.updateVerticalAlignment(e.verticalAlign),e.textTransform!==void 0&&this.updateTextTransform(e.textTransform),e.fontSize!==void 0&&this.updateFontSize(e.fontSize),e.lineHeight!==void 0&&this.updateLineHeight(e.lineHeight),e.letterSpacing!==void 0&&this.updateLetterSpacing(e.letterSpacing),e.text!==void 0&&e.text!==""&&this.updateText(e.text),(e.width!==void 0||e.height!==void 0)&&this.updateGeometry({parameters:{width:e.width,height:e.height}})}fromState(e,t){return super.fromState(e),this.fromTextFrameData(e,t),this}convertToVector(){let{fontFamily:e,hexColor:t}=this.userData.textFrame,r=new Yl;r.name="Text Shape";let i=Nn.fontCache[e];for(let n of this.charContainer.children)n instanceof Nn&&i.generateShapes(n.char,1).forEach(s=>{let a=new Ur().fromShape(s);a.applyScale(n.scale.x,n.scale.y);let o=oo.create({shape:a}),l=new lo({side:xi});l.color=t;let h=new Z_(o,l);h.name=n.char,h.position.copy(n.position),h.rotation.copy(n.rotation),r.attach(h)});return r}},bg=JN;bg.VerticalAlign=Hl,bg.HorizontalAlign=rs,bg.TextTransform=Bh;var YN={RED:0,GREEN:1,BLUE:2,ALPHA:3},tf="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",fne=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,Zm=class extends Bi{constructor(e=!1,t=!1){super({type:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new $e(null),kernel16:new $e(null),inputBuffer:new $e(null),cocBuffer:new $e(null),texelSize:new $e(new q),scale:new $e(1)},fragmentShader:fne,vertexShader:tf,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let o=0;o<80;++o){let l=o*e,h=Math.sqrt(o)/Math.sqrt(80),d=h*Math.cos(l),p=h*Math.sin(l);o%5==0?(r[n++]=d,r[n++]=p):(t[i++]=d,t[i++]=p)}let s=[],a=[];for(let o=0;o<128;)s.push(new Tt(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)a.push(new Tt(r[o++],r[o++],r[o++],r[o++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}},mne=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focalLength;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focalLength,abs(signedDistance));gl_FragColor.rg=vec2(step(signedDistance,0.0)*magnitude,step(0.0,signedDistance)*magnitude);}`,gne=class extends Bi{constructor(e){super({type:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new $e(null),focusDistance:new $e(0),focalLength:new $e(0),cameraNear:new $e(.3),cameraFar:new $e(1e3)},fragmentShader:mne,vertexShader:tf,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.adoptCameraSettings(e)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}adoptCameraSettings(e=null){e!==null&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Pi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},vne=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,yne=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,xne=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <dithering_fragment>
}`,wne="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",IL=class extends Bi{constructor(e=new q){super({type:"ConvolutionMaterial",uniforms:{inputBuffer:new $e(null),texelSize:new $e(new q),halfTexelSize:new $e(new q),kernel:new $e(0),scale:new $e(1)},fragmentShader:xne,vertexShader:wne,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernelSize=c0.LARGE}getKernel(){return bne[this.kernelSize]}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}},bne=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],c0={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},_ne=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,XN=class extends Bi{constructor(){super({type:"CopyMaterial",uniforms:{inputBuffer:new $e(null),opacity:new $e(1)},fragmentShader:_ne,vertexShader:tf,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1}},Sne=class extends Bi{constructor(e=new q,t=$_.COLOR){super({type:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new $e(null),depthBuffer:new $e(null),predicationBuffer:new $e(null),texelSize:new $e(e)},fragmentShader:vne,vertexShader:yne,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.setEdgeDetectionMode(t)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setEdgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}setLocalContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}setEdgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}setPredicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}setPredicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}setPredicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},$_={DEPTH:0,LUMA:1,COLOR:2},Ane={DISABLED:0,DEPTH:1,CUSTOM:2},Mne=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,Ene="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Tne=class extends Bi{constructor(e=null,t=null,r=null,i,n=!1){super({type:"EffectMaterial",defines:{DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new $e(null),depthBuffer:new $e(null),resolution:new $e(new q),texelSize:new $e(new q),cameraNear:new $e(.3),cameraFar:new $e(1e3),aspect:new $e(1),time:new $e(0)},blending:Ri,depthWrite:!1,depthTest:!1,dithering:n});this.toneMapped=!1,e!==null&&this.setShaderParts(e),t!==null&&this.setDefines(t),r!==null&&this.setUniforms(r),this.adoptCameraSettings(i)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setShaderParts(e){return this.fragmentShader=Mne.replace(Jt.FRAGMENT_HEAD,e.get(Jt.FRAGMENT_HEAD)).replace(Jt.FRAGMENT_MAIN_UV,e.get(Jt.FRAGMENT_MAIN_UV)).replace(Jt.FRAGMENT_MAIN_IMAGE,e.get(Jt.FRAGMENT_MAIN_IMAGE)),this.vertexShader=Ene.replace(Jt.VERTEX_HEAD,e.get(Jt.VERTEX_HEAD)).replace(Jt.VERTEX_MAIN_SUPPORT,e.get(Jt.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}adoptCameraSettings(e=null){e!==null&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Pi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=Math.max(e,1),i=Math.max(t,1);this.uniforms.resolution.value.set(r,i),this.uniforms.texelSize.value.set(1/r,1/i),this.uniforms.aspect.value=r/i}},Jt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Cne=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Lne=class extends Bi{constructor(e=!1,t=null){let r=t!==null;super({type:"LuminanceMaterial",uniforms:{inputBuffer:new $e(null),threshold:new $e(0),smoothing:new $e(1),range:new $e(r?t:new q)},fragmentShader:Cne,vertexShader:tf,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.colorOutput=e,this.useThreshold=!0,this.useRange=r}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.uniforms.threshold.value=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.uniforms.smoothing.value=e}get useThreshold(){return this.defines.THRESHOLD!==void 0}set useThreshold(e){e?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.needsUpdate=!0}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.defines.RANGE!==void 0}set useRange(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}get luminanceRange(){return this.useRange}set luminanceRange(e){this.useRange=e}setLuminanceRangeEnabled(e){this.useRange=e}},One=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,Pne=class extends Bi{constructor(e=null){super({type:"MaskMaterial",uniforms:{maskTexture:new $e(e),inputBuffer:new $e(null),strength:new $e(1)},fragmentShader:One,vertexShader:tf,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.colorChannel=YN.RED,this.maskFunction=qN.DISCARD}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==_i&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}},qN={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},Dne=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,Rne="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",Nne=class extends Bi{constructor(e=new q,t=new q){super({type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new $e(null),areaTexture:new $e(null),searchTexture:new $e(null),texelSize:new $e(e),resolution:new $e(t)},fragmentShader:Dne,vertexShader:Rne,blending:Ri,depthWrite:!1,depthTest:!1});this.toneMapped=!1}setOrthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setCornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}get cornerRounding(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerRounding(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},Ine=new su,Do=null;function Bne(){if(Do===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Do=new st,Do.setAttribute!==void 0?(Do.setAttribute("position",new dt(e,3)),Do.setAttribute("uv",new dt(t,2))):(Do.addAttribute("position",new dt(e,3)),Do.addAttribute("uv",new dt(t,2)))}return Do}var ho=class{constructor(e="Pass",t=new Ma,r=Ine){this.name=e,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}getFullscreenMaterial(){return this.screen!==null?this.screen.material:null}setFullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new wi(Bne(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Ma),this.scene.add(t),this.screen=t)}getDepthTexture(){return null}setDepthTexture(e,t=0){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){let e=this.getFullscreenMaterial();e!==null&&e.dispose();for(let t of Object.keys(this)){let r=this[t];if(r!==null&&typeof r.dispose=="function"){if(r instanceof Ma)continue;this[t].dispose()}}}},zne=class extends ho{constructor(e,t=!0){super("SavePass");this.setFullscreenMaterial(new XN),this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ni(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="SavePass.Target"),this.resize=t}get texture(){return this.renderTarget.texture}render(e,t,r,i,n){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){if(this.resize){let r=Math.max(e,1),i=Math.max(t,1);this.renderTarget.setSize(r,i)}}initialize(e,t,r){if(!t&&r===_i&&(this.renderTarget.texture.format=Qi),r!==void 0&&(this.renderTarget.texture.type=r,r!==_i)){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},Ya=-1,Us=class{constructor(e,t=Ya,r=Ya,i=1){this.resizable=e,this.base=new q(1,1),this.target=new q(t,r),this.s=i}get scale(){return this.s}set scale(e){this.s=e,this.target.x=Ya,this.target.y=Ya,this.resizable.setSize(this.base.x,this.base.y)}get width(){let e=this.base,t=this.target,r;return t.x!==Ya?r=t.x:t.y!==Ya?r=Math.round(t.y*(e.x/e.y)):r=Math.round(e.x*this.s),r}set width(e){this.target.x=e,this.resizable.setSize(this.base.x,this.base.y)}get height(){let e=this.base,t=this.target,r;return t.y!==Ya?r=t.y:t.x!==Ya?r=Math.round(t.x/(e.x/e.y)):r=Math.round(e.y*this.s),r}set height(e){this.target.y=e,this.resizable.setSize(this.base.x,this.base.y)}static get AUTO_SIZE(){return Ya}},QN=class extends ho{constructor({resolutionScale:e=.5,width:t=Us.AUTO_SIZE,height:r=Us.AUTO_SIZE,kernelSize:i=c0.LARGE}={}){super("BlurPass");this.renderTargetA=new ni(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.resolution=new Us(this,t,r,e),this.convolutionMaterial=new IL,this.ditheredConvolutionMaterial=new IL,this.ditheredConvolutionMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get scale(){return this.convolutionMaterial.uniforms.scale.value}set scale(e){this.convolutionMaterial.uniforms.scale.value=e,this.ditheredConvolutionMaterial.uniforms.scale.value=e}get kernelSize(){return this.convolutionMaterial.kernelSize}set kernelSize(e){this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,h=this.convolutionMaterial,d=h.uniforms,p=h.getKernel(),f=t,m,y,b;for(this.setFullscreenMaterial(h),y=0,b=p.length-1;y<b;++y)m=(y&1)==0?o:l,d.kernel.value=p[y],d.inputBuffer.value=f.texture,e.setRenderTarget(m),e.render(s,a),f=m;this.dithering&&(h=this.ditheredConvolutionMaterial,d=h.uniforms,this.setFullscreenMaterial(h)),d.kernel.value=p[y],d.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(s,a)}setSize(e,t){let r=this.resolution;r.base.set(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.convolutionMaterial.setTexelSize(1/i,1/n),this.ditheredConvolutionMaterial.setTexelSize(1/i,1/n)}initialize(e,t,r){if(!t&&r===_i&&(this.renderTargetA.texture.format=Qi,this.renderTargetB.texture.format=Qi),r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==_i)){let i=this.convolutionMaterial,n=this.ditheredConvolutionMaterial;i.defines.FRAMEBUFFER_PRECISION_HIGH="1",n.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}static get AUTO_SIZE(){return Us.AUTO_SIZE}},Fne=class extends ho{constructor(){super("ClearMaskPass",null,null);this.needsSwap=!1}render(e,t,r,i,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},r1=new Ue,eS=class extends ho{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null);this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}render(e,t,r,i,n){let s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=s!==null,h=a>=0;l?(r1.copy(e.getClearColor(r1)),e.setClearColor(s,h?a:o)):h&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(r1,o):h&&e.setClearAlpha(o)}},i1=!1,BL=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case xi:r=this.materialsFlatShadedDoubleSide;break;case Er:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case xi:r=this.materialsDoubleSide;break;case Er:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=sl;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Er,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=xi,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Er,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=xi,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,i1){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return i1}static set workaroundEnabled(e){i1=e}},zL=class extends ho{constructor(e,t,r=null){super("RenderPass",e,t);this.needsSwap=!1,this.clearPass=new eS,this.overrideMaterialManager=r===null?null:new BL(r)}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new BL(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=s.background,l=this.renderToScreen?null:t;this.clear&&(this.clearPass.overrideClearColor!==null&&(s.background=null),this.clearPass.render(e,t)),e.setRenderTarget(l),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,a):e.render(s,a),s.background!==o&&(s.background=o)}},Wt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Une="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",kne="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Hne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Gne="float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Vne="float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",jne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Wne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Jne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Yne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Xne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",qne="float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Qne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Kne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Zne="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",$ne="float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",ese="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",tse="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",rse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",ise=new Map([[Wt.SKIP,null],[Wt.ADD,Une],[Wt.ALPHA,kne],[Wt.AVERAGE,Hne],[Wt.COLOR_BURN,Gne],[Wt.COLOR_DODGE,Vne],[Wt.DARKEN,jne],[Wt.DIFFERENCE,Wne],[Wt.EXCLUSION,Jne],[Wt.LIGHTEN,Yne],[Wt.MULTIPLY,Xne],[Wt.DIVIDE,qne],[Wt.NEGATION,Qne],[Wt.NORMAL,Kne],[Wt.OVERLAY,Zne],[Wt.REFLECT,$ne],[Wt.SCREEN,ese],[Wt.SOFT_LIGHT,tse],[Wt.SUBTRACT,rse]]),nse=class extends Gn{constructor(e,t=1){super();this.blendFunction=e,this.opacity=new $e(t)}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e,this.dispatchEvent({type:"change"})}getShaderCode(){return ise.get(this.blendFunction)}},Pa=class extends Gn{constructor(e,t,{attributes:r=ks.NONE,blendFunction:i=Wt.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super();this.name=e,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=s,this.extensions=a,this.blendMode=new nse(i),this.blendMode.addEventListener("change",l=>this.setChanged())}setChanged(){this.dispatchEvent({type:"change"})}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setDepthTexture(e,t=0){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Ma)continue;this[e].dispose()}}}},ks={NONE:0,DEPTH:1,CONVOLUTION:2};function n1(e,t){let r=[],i;for(;(i=e.exec(t))!==null;)r.push(i[1]);return r}function FL(e,t,r){let i,n;for(let s of t){i="$1"+e+s.charAt(0).toUpperCase()+s.slice(1),n=new RegExp("([^\\.])(\\b"+s+"\\b)","g");for(let a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(n,i))}}function sse(e,t,r,i,n,s,a){let o=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,l=/(?:varying\s+\w+\s+(\w*))/g,h=t.blendMode,d=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),p=d.get("fragment")!==void 0&&/mainImage/.test(d.get("fragment")),f=d.get("fragment")!==void 0&&/mainUv/.test(d.get("fragment")),m=[],y=[],b=!1,x=!1;if(d.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(f&&(a&ks.CONVOLUTION)!=0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!p&&!f)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{if(f&&(r.set(Jt.FRAGMENT_MAIN_UV,r.get(Jt.FRAGMENT_MAIN_UV)+"	"+e+`MainUv(UV);
`),b=!0),d.get("vertex")!==null&&/mainSupport/.test(d.get("vertex"))){let v="	"+e+"MainSupport(";/mainSupport *\([\w\s]*?uv\s*?\)/.test(d.get("vertex"))&&(v+="vUv"),v+=`);
`,r.set(Jt.VERTEX_MAIN_SUPPORT,r.get(Jt.VERTEX_MAIN_SUPPORT)+v),m=m.concat(n1(l,d.get("vertex"))),y=y.concat(m).concat(n1(o,d.get("vertex")))}if(y=y.concat(n1(o,d.get("fragment"))).concat(Array.from(t.defines.keys()).map(v=>v.replace(/\([\w\s,]*\)/g,""))).concat(Array.from(t.uniforms.keys())),t.uniforms.forEach((v,g)=>s.set(e+g.charAt(0).toUpperCase()+g.slice(1),v)),t.defines.forEach((v,g)=>n.set(e+g.charAt(0).toUpperCase()+g.slice(1),v)),FL(e,y,n),FL(e,y,d),i.set(h.blendFunction,h),p){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,g=e+"MainImage(color0, UV, ";(a&ks.DEPTH)!=0&&v.test(d.get("fragment"))&&(g+="depth, ",x=!0),g+=`color1);
	`;let _=e+"BlendOpacity";s.set(_,h.opacity),g+="color0 = blend"+h.getBlendFunction()+"(color0, color1, "+_+`);

	`,r.set(Jt.FRAGMENT_MAIN_IMAGE,r.get(Jt.FRAGMENT_MAIN_IMAGE)+g),r.set(Jt.FRAGMENT_HEAD,r.get(Jt.FRAGMENT_HEAD)+"uniform float "+_+`;

`)}r.set(Jt.FRAGMENT_HEAD,r.get(Jt.FRAGMENT_HEAD)+d.get("fragment")+`
`),d.get("vertex")!==null&&r.set(Jt.VERTEX_HEAD,r.get(Jt.VERTEX_HEAD)+d.get("vertex")+`
`)}return{varyings:m,transformedUv:b,readDepth:x}}var s1=class extends ho{constructor(e,...t){super("EffectPass");this.setFullscreenMaterial(new Tne(null,null,null,e)),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniforms=0,this.varyings=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.getFullscreenMaterial().defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){if(this.encodeOutput!==e){let t=this.getFullscreenMaterial();t.needsUpdate=!0,e?t.defines.ENCODE_OUTPUT="1":delete t.defines.ENCODE_OUTPUT}}get dithering(){return this.getFullscreenMaterial().dithering}set dithering(e){let t=this.getFullscreenMaterial();t.dithering!==e&&(t.dithering=e,t.needsUpdate=!0)}verifyResources(e){let t=e.capabilities,r=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniforms>r&&console.warn("The current rendering context doesn't support more than "+r+" uniforms, but "+this.uniforms+" were defined"),r=t.maxVaryings,this.varyings>r&&console.warn("The current rendering context doesn't support more than "+r+" varyings, but "+this.varyings+" were defined")}updateMaterial(){let e=/\bblend\b/g,t=new Map([[Jt.FRAGMENT_HEAD,""],[Jt.FRAGMENT_MAIN_UV,""],[Jt.FRAGMENT_MAIN_IMAGE,""],[Jt.VERTEX_HEAD,""],[Jt.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,s=new Set,a=0,o=0,l=0,h=!1,d=!1,p;for(let m of this.effects)if(m.blendMode.getBlendFunction()===Wt.SKIP)l|=m.getAttributes()&ks.DEPTH;else if((l&ks.CONVOLUTION)!=0&&(m.getAttributes()&ks.CONVOLUTION)!=0)console.error("Convolution effects cannot be merged",m);else if(l|=m.getAttributes(),p=sse("e"+a++,m,t,r,i,n,l),o+=p.varyings.length,h=h||p.transformedUv,d=d||p.readDepth,m.extensions!==null)for(let y of m.extensions)s.add(y);for(let m of r.values())t.set(Jt.FRAGMENT_HEAD,t.get(Jt.FRAGMENT_HEAD)+m.getShaderCode().replace(e,"blend"+m.getBlendFunction())+`
`);(l&ks.DEPTH)!=0?(d&&t.set(Jt.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(Jt.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,h?(t.set(Jt.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(Jt.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),t.forEach((m,y,b)=>b.set(y,m.trim().replace(/^#/,`
#`))),this.uniforms=n.size,this.varyings=o,this.skipRendering=a===0,this.needsSwap=!this.skipRendering;let f=this.getFullscreenMaterial();if(f.setShaderParts(t).setDefines(i).setUniforms(n),f.extensions={},s.size>0)for(let m of s)f.extensions[m]=!0;this.needsUpdate=!1}recompile(e){this.updateMaterial(),e!==void 0&&this.verifyResources(e)}getDepthTexture(){return this.getFullscreenMaterial().uniforms.depthBuffer.value}setDepthTexture(e,t=Hv){let r=this.getFullscreenMaterial();r.uniforms.depthBuffer.value=e,r.depthPacking=t,r.needsUpdate=!0;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,r,i,n){let s=this.getFullscreenMaterial(),a=s.uniforms.time.value+i;this.needsUpdate&&this.recompile(e);for(let o of this.effects)o.update(e,t,i);(!this.skipRendering||this.renderToScreen)&&(s.uniforms.inputBuffer.value=t.texture,s.uniforms.time.value=a<=this.maxTime?a:this.minTime,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera))}setSize(e,t){this.getFullscreenMaterial().setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));if(this.updateMaterial(),this.verifyResources(e),r!==void 0&&r!==_i){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.needsUpdate=!0;break}}},ase=class extends ho{constructor({width:e=Us.AUTO_SIZE,height:t=Us.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass");this.setFullscreenMaterial(new Lne(n,i)),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new ni(1,1,{minFilter:ar,magFilter:ar,format:n?ci:wP,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1),this.resolution=new Us(this,e,t)}get texture(){return this.renderTarget.texture}render(e,t,r,i,n){let s=this.getFullscreenMaterial();s.uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.base.set(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){if(r!==void 0&&r!==_i){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},ose=class extends ho{constructor(e,t){super("MaskPass",e,t);this.needsSwap=!1,this.clearPass=new eS(!1,!1,!0),this.inverse=!1}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}render(e,t,r,i,n){let s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,h=this.clearPass,d=this.inverse?0:1,p=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,d,4294967295),a.stencil.setClear(p),a.stencil.setLocked(!0),this.clear&&(this.renderToScreen?h.render(e,null):(h.render(e,t),h.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(r),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},Ka=class extends ho{constructor(e,t="inputBuffer"){super("ShaderPass");this.setFullscreenMaterial(e),this.uniform=null,this.setInput(t)}setInput(e){let t=this.getFullscreenMaterial();if(this.uniform=null,t!==null){let r=t.uniforms;r!==void 0&&r[e]!==void 0&&(this.uniform=r[e])}}render(e,t,r,i,n){this.uniform!==null&&t!==null&&(this.uniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){if(r!==void 0&&r!==_i){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},lse=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,alpha:i=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,this.renderer!==null&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(t,r,s,n),this.outputBuffer=this.inputBuffer.clone()),this.copyPass=new Ka(new XN),this.alpha=i,this.depthTexture=null,this.passes=[],this.autoRenderToScreen=!0}get multisampling(){return this.inputBuffer instanceof xp?this.inputBuffer.samples:0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getRenderer(){return this.renderer}replaceRenderer(e,t=!0){let r=this.renderer;if(r!==null&&r!==e){let i=r.getSize(new q),n=e.getSize(new q),s=r.domElement.parentNode;this.renderer=e,this.renderer.autoClear=!1,i.equals(n)||this.setSize(),t&&s!==null&&(s.removeChild(r.domElement),s.appendChild(e.domElement))}return r}createDepthTexture(){let e=this.depthTexture=new Jv;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Jh,e.type=Rh):e.type=Hd,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){let n=this.renderer,s=n.getContext(),a=n.getDrawingBufferSize(new q),o={format:!(this.alpha||s.getContextAttributes().alpha)&&r===_i?Qi:ci,minFilter:ar,magFilter:ar,stencilBuffer:t,depthBuffer:e,type:r},l=i>0?new xp(a.width,a.height,o):new ni(a.width,a.height,o);return i>0&&(l.samples=i),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}addPass(e,t){let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new q),s=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setSize(n.width,n.height),e.initialize(i,s,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let o=this.createDepthTexture();for(e of r)e.setDepthTexture(o)}else e.setDepthTexture(this.depthTexture)}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,s)=>n||s.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,s=!1,a,o,l;for(let h of this.passes)h.enabled&&(h.render(t,i,n,e,s),h.needsSwap&&(s&&(r.renderToScreen=h.renderToScreen,a=t.getContext(),o=t.state.buffers.stencil,o.setFunc(a.NOTEQUAL,1,4294967295),r.render(t,i,n,e,s),o.setFunc(a.EQUAL,1,4294967295)),l=i,i=n,n=l),h instanceof ose?s=!0:h instanceof Fne&&(s=!1))}setSize(e,t,r){let i=this.renderer;if(e===void 0||t===void 0){let s=i.getSize(new q);e=s.width,t=s.height}else i.setSize(e,t,r);let n=i.getDrawingBufferSize(new q);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose()}},use=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,hse=class extends Pa{constructor({blendFunction:e=Wt.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:s=Us.AUTO_SIZE,height:a=Us.AUTO_SIZE,kernelSize:o=c0.LARGE}={}){super("BloomEffect",use,{blendFunction:e,uniforms:new Map([["map",new $e(null)],["intensity",new $e(n)]])});this.renderTarget=new ni(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new QN({resolutionScale:i,width:s,height:a,kernelSize:o}),this.blurPass.resolution.resizable=this,this.luminancePass=new ase({renderTarget:this.renderTarget,colorOutput:!0}),this.luminancePass.resolution=this.resolution,this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r}get texture(){return this.renderTarget.texture}get luminanceMaterial(){return this.luminancePass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead."),1}set distinction(e){console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){this.blurPass.setSize(e,t),this.renderTarget.setSize(this.resolution.width,this.resolution.height)}initialize(e,t,r){this.blurPass.initialize(e,t,r),!t&&r===_i&&(this.renderTarget.texture.format=Qi),r!==void 0&&(this.renderTarget.texture.type=r)}},cse="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",dse=class extends Pa{constructor({blendFunction:e=Wt.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",cse,{blendFunction:e,uniforms:new Map([["brightness",new $e(t)],["contrast",new $e(r)]])})}},pse="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}",fse=class extends Pa{constructor(e=Wt.NORMAL){super("ColorAverageEffect",pse,{blendFunction:e})}},mse=`varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;
#ifdef ALPHA
vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;color.r=ra.x;color.b=ba.x;color.a=max(max(ra.y,ba.y),inputColor.a);
#else
color.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;
#endif
outputColor=color;}`,gse="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}",vse=class extends Pa{constructor({blendFunction:e=Wt.NORMAL,offset:t=new q(.001,5e-4)}={}){super("ChromaticAberrationEffect",mse,{vertexShader:gse,blendFunction:e,attributes:ks.CONVOLUTION,uniforms:new Map([["offset",new $e(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}initialize(e,t,r){t?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA")}},yse=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,xse=class extends Pa{constructor(e,{blendFunction:t=Wt.NORMAL,focusDistance:r=0,focalLength:i=.1,bokehScale:n=1,width:s=Us.AUTO_SIZE,height:a=Us.AUTO_SIZE}={}){super("DepthOfFieldEffect",yse,{blendFunction:t,attributes:ks.DEPTH,uniforms:new Map([["nearColorBuffer",new $e(null)],["farColorBuffer",new $e(null)],["nearCoCBuffer",new $e(null)],["scale",new $e(1)]])});this.camera=e,this.renderTarget=new ni(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.format=Qi,this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Ka(new gne(e));let o=this.circleOfConfusionMaterial;o.uniforms.focusDistance.value=r,o.uniforms.focalLength.value=i,this.blurPass=new QN({width:s,height:a,kernelSize:c0.MEDIUM}),this.blurPass.resolution.resizable=this,this.maskPass=new Ka(new Pne(this.renderTargetCoC.texture));let l=this.maskPass.getFullscreenMaterial();l.maskFunction=qN.MULTIPLY,l.colorChannel=YN.GREEN,this.bokehNearBasePass=new Ka(new Zm(!1,!0)),this.bokehNearFillPass=new Ka(new Zm(!0,!0)),this.bokehFarBasePass=new Ka(new Zm(!1,!1)),this.bokehFarFillPass=new Ka(new Zm(!0,!1)),this.bokehScale=n,this.target=null}get circleOfConfusionMaterial(){return this.cocPass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].map(t=>t.getFullscreenMaterial().uniforms.scale).forEach(t=>{t.value=e}),this.maskPass.getFullscreenMaterial().uniforms.strength.value=e,this.uniforms.get("scale").value=e}calculateFocusDistance(e){let t=this.camera,r=t.far-t.near,i=t.position.distanceTo(e);return Math.min(Math.max(i/r,0),1)}setDepthTexture(e,t=Hv){let r=this.circleOfConfusionMaterial;r.uniforms.depthBuffer.value=e,r.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked,o=this.bokehFarBasePass,l=this.bokehFarFillPass,h=o.getFullscreenMaterial().uniforms,d=l.getFullscreenMaterial().uniforms,p=this.bokehNearBasePass,f=this.bokehNearFillPass,m=p.getFullscreenMaterial().uniforms,y=f.getFullscreenMaterial().uniforms;if(this.target!==null){let b=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.uniforms.focusDistance.value=b}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,a),h.cocBuffer.value=d.cocBuffer.value=n.texture,o.render(e,a,i),l.render(e,i,this.renderTargetFar),m.cocBuffer.value=y.cocBuffer.value=s.texture,p.render(e,t,i),f.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution,i=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];i.push(this.renderTargetCoC,this.renderTargetMasked),i.forEach(a=>a.setSize(e,t));let n=r.width,s=r.height;i=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],i.forEach(a=>a.setSize(n,s)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.getFullscreenMaterial().setTexelSize(1/n,1/s))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,_i),!t&&r===_i&&(this.renderTargetNear.texture.type=Qi),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r)}};new L;new He;var wse="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",bse=class extends Pa{constructor({blendFunction:e=Wt.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",wse,{blendFunction:e,uniforms:new Map([["hue",new $e(new L)],["saturation",new $e(r)]])});this.setHue(t)}setHue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set(2*r,-Math.sqrt(3)*t-r,Math.sqrt(3)*t-r).addScalar(1).divideScalar(3)}};new Ue;var _se=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Sse=class extends Pa{constructor({blendFunction:e=Wt.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",_se,{blendFunction:e});this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},Ase="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",Mse=class extends Pa{constructor(e=30){super("PixelationEffect",Ase,{uniforms:new Map([["active",new $e(!1)],["d",new $e(new q)]])});this.resolution=new q,this.granularity=e}getGranularity(){return this.granularity}setGranularity(e){e=Math.floor(e),e%2>0&&(e+=1);let t=this.uniforms;t.get("active").value=e>0,t.get("d").value.set(e,e).divide(this.resolution),this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.setGranularity(this.granularity)}};new L;new L;var KN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",ZN="data:image/png;base64,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",Ese="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Tse="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Cse=class extends Pa{constructor(e,t,r=sh.HIGH,i=$_.COLOR){super("SMAAEffect",Ese,{vertexShader:Tse,blendFunction:Wt.NORMAL,attributes:ks.CONVOLUTION|ks.DEPTH,uniforms:new Map([["weightMap",new $e(null)]])});this.renderTargetEdges=new ni(1,1,{minFilter:ar,stencilBuffer:!1,depthBuffer:!1,format:Qi}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.renderTargetWeights.texture.format=ci,this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new eS(!0,!1,!1),this.clearPass.overrideClearColor=new Ue(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Ka(new Sne(new q,i)),this.weightsPass=new Ka(new Nne);let n=new Rr(e);n.name="SMAA.Search",n.magFilter=qr,n.minFilter=qr,n.format=ci,n.generateMipmaps=!1,n.needsUpdate=!0,n.flipY=!0;let s=new Rr(t);s.name="SMAA.Area",s.magFilter=ar,s.minFilter=ar,s.format=ci,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!1;let a=this.weightsPass.getFullscreenMaterial();a.uniforms.searchTexture.value=n,a.uniforms.areaTexture.value=s,this.applyPreset(r)}get edgeDetectionMaterial(){return this.edgeDetectionPass.getFullscreenMaterial()}get colorEdgesMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.getFullscreenMaterial()}setEdgeDetectionThreshold(e){this.edgeDetectionPass.getFullscreenMaterial().setEdgeDetectionThreshold(e)}setOrthogonalSearchSteps(e){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(e)}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case sh.LOW:t.setEdgeDetectionThreshold(.15),r.setOrthogonalSearchSteps(4),r.diagonalDetection=!1,r.cornerRounding=!1;break;case sh.MEDIUM:t.setEdgeDetectionThreshold(.1),r.setOrthogonalSearchSteps(8),r.diagonalDetection=!1,r.cornerRounding=!1;break;case sh.HIGH:t.setEdgeDetectionThreshold(.1),r.setOrthogonalSearchSteps(16),r.setDiagonalSearchSteps(8),r.setCornerRounding(25),r.diagonalDetection=!0,r.cornerRounding=!0;break;case sh.ULTRA:t.setEdgeDetectionThreshold(.05),r.setOrthogonalSearchSteps(32),r.setDiagonalSearchSteps(16),r.setCornerRounding(25),r.diagonalDetection=!0,r.cornerRounding=!0;break}}setDepthTexture(e,t=Hv){let r=this.edgeDetectionMaterial;r.uniforms.depthBuffer.value=e,r.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){let r=this.edgeDetectionPass.getFullscreenMaterial(),i=this.weightsPass.getFullscreenMaterial();this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),i.uniforms.resolution.value.set(e,t),i.uniforms.texelSize.value.set(1/e,1/t),r.uniforms.texelSize.value.copy(i.uniforms.texelSize.value)}dispose(){let e=this.weightsPass.getFullscreenMaterial().uniforms;e.searchTexture.value.dispose(),e.areaTexture.value.dispose(),super.dispose()}static get searchImageDataURL(){return KN}static get areaImageDataURL(){return ZN}},sh={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Lse=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#ifdef ESKIL
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#else
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#endif
outputColor=vec4(color,inputColor.a);}`,Ose=class extends Pa{constructor(e={}){let t=Object.assign({blendFunction:Wt.NORMAL,eskil:!1,offset:.5,darkness:.5},e);super("VignetteEffect",Lse,{blendFunction:t.blendFunction,uniforms:new Map([["offset",new $e(t.offset)],["darkness",new $e(t.darkness)]])});this.eskil=t.eskil}get eskil(){return this.defines.has("ESKIL")}set eskil(e){this.eskil!==e&&(e?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL"),this.setChanged())}},Pse=class extends Js{load(e=()=>{},t=null){arguments.length===4?(e=arguments[1],t=arguments[3]):(arguments.length===3||typeof arguments[0]!="function")&&(e=arguments[1],t=null);let r=this.manager,i=new l_;return new Promise((n,s)=>{let a=new Image,o=new Image;i.onError=l=>{r.itemError(l),t!==null?(t(`Failed to load ${l}`),n()):s(`Failed to load ${l}`)},i.onLoad=()=>{let l=[a,o];e(l),n(l)},a.addEventListener("error",l=>{i.itemError("smaa-search")}),o.addEventListener("error",l=>{i.itemError("smaa-area")}),a.addEventListener("load",()=>{r.itemEnd("smaa-search"),i.itemEnd("smaa-search")}),o.addEventListener("load",()=>{r.itemEnd("smaa-area"),i.itemEnd("smaa-area")}),r.itemStart("smaa-search"),r.itemStart("smaa-area"),i.itemStart("smaa-search"),i.itemStart("smaa-area"),a.src=KN,o.src=ZN})}},co=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Wt.NORMAL}toJSON(){let e=["constructor","effect","subscriptions"],t=Le({},this),r=Object.getPrototypeOf(this),i=Object.getOwnPropertyNames(r);for(let n of i){let s=Object.getOwnPropertyDescriptor(r,n);s&&typeof s.get=="function"&&(t[n]=this[n])}return e.forEach(n=>delete t[n]),t}},Dse=class extends co{constructor(){super(hse);this.blendFunction=Wt.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},Rse=class extends co{constructor(){super(dse)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},Nse=class extends co{constructor(){super(vse);this.effect.offset=new q(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},Ise=class extends co{constructor(){super(fse)}},Bse=class extends co{constructor(){super(bse);this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},zse=class extends co{constructor(){super(Sse);this.blendFunction=Wt.OVERLAY}},Fse=class extends co{constructor(){super(Ose)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},Use=class extends co{constructor(e){super(xse,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},kse=class extends co{constructor(){super(Mse)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}};function UL(e,t){return t&&t.enabled&&e.push(t.effect),e}var Hse=class{constructor(){this._scene=new Ma,this._camera=new rc,this.effects=new Map,this.loadingManager=new l_,this.smaaImageLoader=new Pse(this.loadingManager),this.renderPass=new zL,this._renderToScreen=!0,this._hasSmaa=!1,this.search=null,this.area=null,this.clock=new aY,this.enabled=!1,this.debug=!1,this.effects.set("bloom",new Dse),this.effects.set("chromaticAberration",new Nse),this.effects.set("vignette",new Fse),this.effects.set("noise",new zse),this.effects.set("colorAverage",new Ise),this.effects.set("hueSaturation",new Bse),this.effects.set("brightnessContrast",new Rse),this.effects.set("depthOfField",new Use),this.effects.set("pixelation",new kse),this.smaaPromise=this.loadSmaaImages()}get scene(){return this._scene}set scene(e){this._scene=e}get camera(){return this._camera}set camera(e){this._camera=e}loadSmaaImages(){return new Promise(e=>{this.smaaImageLoader.load(([t,r])=>{this.search=t,this.area=r,e()})})}async _initSmaa(){if(!this.effectComposer)return;let e=this.effectComposer.passes.length;(!this.area||!this.search)&&await this.smaaPromise;let t=new Cse(this.search,this.area,sh.ULTRA,$_.COLOR);t.edgeDetectionMaterial.setPredicationMode(Ane.DEPTH),t.edgeDetectionMaterial.setEdgeDetectionThreshold(.05),t.edgeDetectionMaterial.setPredicationThreshold(.002),t.edgeDetectionMaterial.setPredicationScale(1),this.effectComposer.addPass(new s1(this.camera,t),e),this._hasSmaa=!0}async _initPasses(){if(!(!this.effectComposer||!this.renderer))if(this.effectComposer.removeAllPasses(),this._hasSmaa=!1,this.renderPass=new zL(this.scene,this.camera),this.enabled){this.effectComposer.addPass(this.renderPass),await this._initSmaa();let e=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(UL,[]),t=[this.effects.get("pixelation")].reduce(UL,[]);t.length>0&&this.effectComposer.addPass(new s1(this.camera,...t)),this.effectComposer.addPass(new s1(this.camera,...e))}else this.effectComposer.addPass(this.renderPass)}async reinit(){!this.renderer||(this.effectComposer=new lse(this.renderer),await this._initPasses())}async init({renderer:e,camera:t,scene:r}){this.renderer=e,this.scene=r,this.camera=t,this._initSavePass(),await this.reinit()}_initSavePass(){if(this._savePass)return;let e=new q;this.renderer.getDrawingBufferSize(e);let t=this.renderer.capabilities.isWebGL2?xp:ni;this._rt=new t(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Wh,wrapT:Wh}),this._savePass=new zne(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){var t,r;let i=this.effectComposer;!i||(e===!0?((t=this.renderer)!=null&&t.capabilities.isWebGL2&&(i.multisampling=0),i.removePass(this._savePass),i.passes[i.passes.length-1].renderToScreen=!0,i.autoRenderToScreen=!0):(((r=this.renderer)==null?void 0:r.capabilities.isWebGL2)&&!this._hasSmaa&&(i.multisampling=4),i.autoRenderToScreen=!1,i.passes[i.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,i.addPass(this._savePass)),this._renderToScreen=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}fromJSON(e){e&&(Object.keys(e).forEach(t=>{let r=e[t],i=this.effects.get(t);Object.keys(r).forEach(n=>{i[n]=r[n]})}),this.enabled=e.enabled)}toJSON(){let e={};return this.effects.forEach((t,r)=>{e[r]=t.toJSON()},e),Le({enabled:this.enabled},e)}render(){var e;(e=this.effectComposer)==null||e.render(this.clock.getDelta())}setScissor(e,t,r,i){if(!this.effectComposer||!this.renderer)return;e instanceof Tt?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){!this.effectComposer||!this.renderer||(this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e))}setViewport(e,t,r,i){!this.effectComposer||(e instanceof Tt?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i)))}resize(e,t){var r,i;if((r=this.effectComposer)==null||r.setSize(e,t),this._rt){let n=((i=this.renderer)==null?void 0:i.getPixelRatio())||window.devicePixelRatio;this._rt.setSize(e*n,t*n)}}dispose(){var e;(e=this.effectComposer)==null||e.dispose()}};function Gse(e,t){return Vse(e)}function Vse(e){let t={parameters:e,type:e.type};if(e.type==="VectorGeometry"){let i=Ur.createFromState(e.shape,e.width,e.height);t.shape=i}else e.type==="NonParametricGeometry"&&(t.geometry=new d_().parse(e));let r;try{r=zw(t)}catch(i){console.error(i)}if(!r){let i=Ur.createFromState(dv.defaultData(),100,100);t.shape=i,r=zw(t)}return r}var jse=cP(OV()),Ww;kR.then(e=>{Ww=e});var $N=new He,Wse=new He,Jse=new He,Os=new zi,Ro=new L,Yse=new He,Xse=new He,tS=class extends Ca{constructor(e,t,r,i=new ec){super(r!=null?r:t,i);this.subdivPointer=e,this.originalGeometry=t,this.subdividedGeometry=r,this.objectType="SubdivObject",this.hiddenMatrixOld=new He,this.smoothShading=!0,this.matrixWorldRigid=new He,this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!1}static createFromState(e,t,r){let{subdivPointer:i,originalGeometry:n,subdividedGeometry:s}=Ns.build(t.geometry,void 0,void 0,!t.flatShading),a=Cp(t.material,r),o=new tS(i,n,s||void 0,a);return o.calcBoundingBox(),o.freeSubdivPointer(),o.uuid=e,o.fromState(t),o}shallowClone(e){return new WN(this.geometry,this.material).shallowCopy(this,e)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="SubdivObject",t}buildFromStore(e){var t,r,i;let{originalGeometry:n,subdividedGeometry:s,subdivPointer:a}=Ns.build(e,this.subdivPointer,void 0,this.smoothShading,this.shearScale);if(this.subdivPointer=a,n!==void 0&&((t=this.originalGeometry)==null||t.dispose(),this.originalGeometry=n),s!==void 0&&((r=this.subdividedGeometry)==null||r.dispose(),this.subdividedGeometry=s!=null?s:void 0),this.geometry=(i=this.subdividedGeometry)!=null?i:this.originalGeometry,this.cloner)for(let o of this.cloner.children)o.geometry=this.geometry;e.width&&(this.geometry.userData.parameters={width:e.width,height:e.height,depth:e.depth})}updateMesh(e=!1){Ns.buildLevel(this.subdivPointer,!0,this.smoothShading,this.originalGeometry,e?this.shearScaleInv:void 0),this.subdividedGeometry&&Ns.buildLevel(this.subdivPointer,!1,this.smoothShading,this.subdividedGeometry,e?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=Ns.buildLevel(this.subdivPointer,!0,this.smoothShading),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Ns.buildLevel(this.subdivPointer,!1,this.smoothShading)),this.geometry=(e=this.subdividedGeometry)!=null?e:this.originalGeometry}raycast(e,t){var r;this.geometry=this.originalGeometry,Ca.prototype.raycast.call(this,e,t),this.geometry=(r=this.subdividedGeometry)!=null?r:this.originalGeometry}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:r,v:i,q:n}=(0,jse.SVD)(t),s=$N.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=Wse.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),o=Jse.copy(a).transpose();this.shearScale=Yse.makeScale(n[0],n[1],n[2]).multiply(o).premultiply(a),this.shearScaleInv=Xse.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,o),n.every(l=>Math.abs(n[0]-l)<.01)&&(this.shearScale=void 0,this.shearScaleInv=void 0)}activateSVDCompensation(){this.shearScale!==void 0&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){this.shearScale!==void 0&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Vs);let t=e.attributes.position,r=e.boundingSphere.center;Os.setFromBufferAttribute(t),Os.getCenter(r),e.boundingSphere.radius=r.distanceTo(Os.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Os.getSize(Ro);let i={width:Ro.x,height:Ro.y,depth:Ro.z};return this.geometry.userData.parameters=i,i}updateBoundingBox(e){let t=this.originalGeometry;Os.min.set(e[0],e[2],e[4]),Os.max.set(e[1],e[3],e[5]),this.shearScaleInv&&(Os.min.applyMatrix4(this.shearScaleInv),Os.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Vs);let r=t.boundingSphere.center;Os.getCenter(r),t.boundingSphere.radius=r.distanceTo(Os.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Os.getSize(Ro);let i={width:Ro.x,height:Ro.y,depth:Ro.z};return this.geometry.userData.parameters=i,i}freeSubdivPointer(){this.subdivPointer&&(Ww.free_bvh(this.subdivPointer),Ww.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}updateGeometry(e){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=this.geometry.userData.parameters.width===0?1:e.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=this.geometry.userData.parameters.height===0?1:e.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=this.geometry.userData.parameters.depth===0?1:e.parameters.depth/this.geometry.userData.parameters.depth,kL(this.originalGeometry.attributes,...this.geometry.userData.scale),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(kL(this.subdividedGeometry.attributes,...this.subdividedGeometry.userData.scale),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters=Le({},e.parameters)}};function kL(e,t,r,i){let n=e.position.array,s=e.normal.array,a=$N.makeScale(t,r,i).invert().elements,o,l,h;for(var d=0,p=n.length;d<p;d+=3)n[d]*=t,n[d+1]*=r,n[d+2]*=i,o=s[d],l=s[d+1],h=s[d+2],s[d]=a[0]*o+a[4]*l+a[8]*h,s[d+1]=a[1]*o+a[5]*l+a[9]*h,s[d+2]=a[2]*o+a[6]*l+a[10]*h}function HL(e,t){t.flatShading!==void 0&&(e.flatShading=t.flatShading,e.needsUpdate=!0),t.wireframe!==void 0&&(e.wireframe=t.wireframe),t.side!==void 0&&(t.side===hv.Front?e.side=sl:t.side===hv.Back?e.side=Er:e.side=xi)}function qse(e,t){if(Array.isArray(e.material))for(let r of e.material)HL(r,t);else{let r=e.material;HL(r,t)}e.objectType==="SubdivObject"&&t.flatShading!==void 0&&(e.material.flatShading=!1,e.smoothShading=!t.flatShading,e.updateMesh())}function Qse(e,t,r){let i;if(t.geometry.type==="SubdivGeometry")i=tS.createFromState(e,t,r);else{let n=Gse(t.geometry),s="materials"in t?pie(t.materials,r):Cp(t.material,r);Lw.is2DParametricMesh(n.userData.type)?i=new VN(n,s):(n==null?void 0:n.userData.type)==="VectorGeometry"?i=new Z_(n,s):t.geometry.type==="NonParametricGeometry"?i=new WN(n,s):i=new jN(n,s),i.uuid=e,i.fromState(t)}return qse(i,t),i}function Kse(e,t,r){return t.type==="Mesh"?Qse(e,t,r):t.type==="TextFrame"?bg.createFromState(e,t,r):t.type==="Empty"?Yl.createFromState(e,t):t.type==="PointLight"?HN.createFromState(e,t,r):t.type==="SpotLight"?GN.createFromState(e,t,r):t.type==="DirectionalLight"?kN.createFromState(e,t,r):Mp.is(t.type)?rc.createFromState(e,t):(console.error(t),new Yl)}function Zse(e,t){t.uniforms[`f${t.id}_transmissionSamplerMap`].value=e.texture,t.uniforms[`f${t.id}_transmissionDepthMap`].value=e.depthTexture}function GL(e,t,r){if(!r.userData.layers)return!1;let i=!1,n=r.userData.layers.getLayersOfType(Gt.TRANSMISSION);return n.length>0?(t.layers.set(3),i=!0,e!==void 0&&n.forEach(s=>Zse(e,s))):t.layers.set(0),i}function $se(e,t){let r=!1;return t.traverseEntity(i=>{if(i instanceof Ca)if(Array.isArray(i.material))for(let n=0;n<i.material.length;n++)GL(e,i,i.material[n])&&(r=!0);else GL(e,i,i.material)&&(r=!0)}),r}function eae(e,t){"material"in e&&tae(e.material,t),"geometry"in e&&e.geometry.dispose()}function tae(e,t){NY(e).forEach(r=>{t.isSharedMaterial(r)||r.dispose()})}var VL=new L,eI=class extends IN(Ma){constructor(e,t){super();this.objectType="Scene",this.alpha=1,this.backupFog=new r_(16777215,.1,2e3),this.fogUseBGColor=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this._needsTransmission=!1,this._color=new Ue(1,0,0),this.bgColor=new Ue(1,1,1),this.entityByUuid={},this.postprocessing=new Hse,this.ambientLight=new tv(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.init(e,t)}needsTransmission(e){return this.needsTransmissionDirty&&(this._needsTransmission=$se(e,this),e!==void 0&&(this.needsTransmissionDirty=!1)),this._needsTransmission}find(e){if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}get color(){return this._color}set color(e){this.fogUseBGColor===!0&&this.backupFog.color.copy(e),this._color.copy(e)}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,t){if(this.initPostprocessing(e.postprocessing),this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(Xi(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let r=this.find(e.publish.playCamera);r instanceof rc&&this.switchActiveCamera(r)}}initPostprocessing(e){let t=e,{enabled:r}=t,i=EV(t,["enabled"]);for(let n of Object.entries(i)){let s=n[1],a=this.postprocessing.effects.get(n[0]);if(a){a.enabled=s.enabled;for(let[o,l]of Object.entries(s))a[o]=l}}this.postprocessing.enabled=r,this.postprocessing.reinit()}clearScene(e){this.traverseEntity(t=>{eae(t,e)});for(let t of this.children)Is(t)&&t.removeFromParent()}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=rc.createFromState(eI.PERSONAL_CAMERA_ID,tt(Le({},Dw.defaultData),{name:"personal"}));return e.enableHelper=!1,e.objectHelper.visible=!1,delete e.isEntity,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],r=i=>{for(let n of i.children)Is(n)&&!n.raycastLock&&n.visible&&((GR(n)||Kp(n)&&n.enableHelper&&n.objectHelper.parent)&&e.intersectObject(n,!1,t),r(n))};return r(this),t}traverseEntity(e){for(let t of this.children)Is(t)&&t.traverseEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Xi(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}toJSON(e){return{}}fromJSON(e){return this}dispose(){this.traverseEntity(e=>{"geometry"in e&&e.geometry.dispose(),"material"in e&&(e.material instanceof Array?e.material.forEach(t=>t.dispose()):e.material.dispose())}),this.postprocessing.dispose()}updateAmbientLight(e,t){Ore(this.ambientLight,e,t),e.groundColor!==void 0&&(this.ambientLight.groundColor=Xi(e.groundColor,t)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.enableHelper=!0),this.activeCamera=e,this.postprocessing.camera=e,e.enableHelper=!1}setBackgroundColor(e){this.bgColor=e,this.alpha=e.a}createChildrenObjects(e,t,r){for(let i of e)this.createChildObject(i.id,i.data,i.children,t,r)}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createChildObject(e,t,r,i,n){let s=Kse(e,t,n);return s&&(this.entityByUuid[e]=s,i.add(s),this.createChildrenObjects(r,s,n)),s}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:s,recursive:a}=e[i],o=this.find(s),l=a?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let r=new zi;return r.setFromPoints(t),r.getCenter(VL),VL}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(e===null){t.identity();return}let i=(r=this.find(e))==null?void 0:r.parent;i?t.copy(i.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Ca)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)e(t.material[r]);else e(t.material)})}updateCanvasSize(e,t){this.activeCamera.setViewplaneSize(e,t);let r,i;e>=t?(r=t/e,i=1):(r=1,i=e/t),this.traverseMaterial(n=>{n.layersList.getLayersOfType(Gt.TRANSMISSION).forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=r,s.uniforms[`f${s.id}_aspectRatio`].value.y=i})})}},tI=eI;tI.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var rae=class{constructor(e,t,r,i){this.isEnable=!1,this.splineEvents={},this._enableEvent={},this._map={},this._prevAncestors=[],this._raycaster=new bte,this._intersection=new L,this._plane=new Ds,this._normal=new L,this._position=new L,this._onMouseDown=n=>{this._raycaster.setFromCamera(this._getPointer(n.clientX,n.clientY),this._camera),this._handleMouseDownEvent()},this._onMouseUp=n=>{this._raycaster.setFromCamera(this._getPointer(n.clientX,n.clientY),this._camera),this._handleMouseUpEvent()},this._onMouseMove=n=>{this._raycaster.setFromCamera(this._getPointer(n.clientX,n.clientY),this._camera),this._camera.getWorldDirection(this._normal),this._normal.negate(),this._handleMouseHoverEvent(),this._handleLookAtEvent(),this._handleFollowEvent()},this._onWheel=n=>{this._handleWheelEvent(n)},this._onTouchStart=n=>{n.touches.length===1&&(this._raycaster.setFromCamera(this._getPointer(n.touches[0].clientX,n.touches[0].clientY),this._camera),this._camera.getWorldDirection(this._normal),this._normal.negate(),this._handleMouseDownEvent(),this._handleMouseHoverEvent(),this._handleLookAtEvent(),this._handleFollowEvent())},this._onTouchEnd=()=>{this._handleMouseUpEvent(),this._handleMouseHoverEvent(!0)},this._onTouchMove=n=>{n.touches.length===1&&(this._raycaster.setFromCamera(this._getPointer(n.touches[0].clientX,n.touches[0].clientY),this._camera),this._camera.getWorldDirection(this._normal),this._normal.negate(),this._handleMouseHoverEvent(),this._handleLookAtEvent(),this._handleFollowEvent())},this._onKeyDown=n=>{this._handleKeyDownEvent(n.key)},this._onKeyUp=n=>{this._handleKeyUpEvent(n.key)},this._domElement=e,this._scene=t,this._camera=r,this._app=i}activate(){this.isEnable=!0,this._scene.traverseEntity(e=>{if(e.interaction!==void 0){e.interaction.start();for(let t of e.interaction.events){let r=t.type;this._addCustomEvent(r,e),this._enableEvent[r]=!0,(r===Et.KEY_DOWN||r===Et.KEY_UP||r===Et.START||r===Et.LOOK_AT||r===Et.FOLLOW||r===Et.SCROLL)&&(this._map[r]===void 0&&(this._map[r]=[]),this._map[r].push(e))}}}),this._enableEvent[Et.START]!==void 0&&this._handleStartEvent(),this._enableEvent[Et.MOUSE_DOWN]!==void 0&&(this._domElement.addEventListener("pointerdown",this._onMouseDown,!1),this._domElement.addEventListener("touchstart",this._onTouchStart,!1)),this._enableEvent[Et.MOUSE_UP]!==void 0&&(this._domElement.addEventListener("pointerup",this._onMouseUp,!1),this._domElement.addEventListener("touchend",this._onTouchEnd,!1)),(this._enableEvent[Et.MOUSE_HOVER]!==void 0||this._enableEvent[Et.LOOK_AT]!==void 0||this._enableEvent[Et.FOLLOW]!==void 0)&&(this._domElement.addEventListener("pointermove",this._onMouseMove,!1),this._domElement.addEventListener("touchstart",this._onTouchStart,!1),this._domElement.addEventListener("touchend",this._onTouchEnd,!1),this._domElement.addEventListener("touchmove",this._onTouchMove,!1)),this._enableEvent[Et.KEY_DOWN]!==void 0&&document.addEventListener("keydown",this._onKeyDown,!1),this._enableEvent[Et.KEY_UP]!==void 0&&document.addEventListener("keyup",this._onKeyUp,!1),this._enableEvent[Et.SCROLL]!==void 0&&this._domElement.addEventListener("wheel",this._onWheel,!1)}deactivate(){this._scene.traverseEntity(e=>{e.interaction!==void 0&&e.interaction.end(),e.interaction.cache=void 0}),this._domElement.removeEventListener("pointerdown",this._onMouseDown),this._domElement.removeEventListener("pointerup",this._onMouseUp),this._domElement.removeEventListener("pointermove",this._onMouseMove),this._domElement.removeEventListener("touchstart",this._onTouchStart),this._domElement.removeEventListener("touchend",this._onTouchEnd),this._domElement.removeEventListener("touchmove",this._onTouchMove),this._domElement.removeEventListener("wheel",this._onWheel),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp),this._enableEvent={},this._map={},this.isEnable=!1}reset(){this._scene.traverseEntity(e=>{e.interaction.start()}),this._handleStartEvent()}_getPointer(e,t){let r=this._domElement.getBoundingClientRect();return{x:(e-r.left)/r.width*2-1,y:-((t-r.top)/r.height)*2+1}}_handleStartEvent(){var e;(e=this._map[Et.START])==null||e.forEach(t=>{var r;(r=t.interactionCache.start)==null||r.dispatch()})}_handleWheelEvent(e){var t;(t=this._map[Et.SCROLL])==null||t.forEach(r=>{var i;this._dispatchDOMCustomEvent("scroll",r.uuid),(i=r.interactionCache.scroll)==null||i.dispatch(e.deltaY>0?1:-1)})}_handleMouseDownEvent(){var e;let t=this._raycastMesh(this._raycaster);for(let r=0,i=t.length;r<i;++r){let n=t[r].object;if(this._dispatchDOMCustomEvent("mouseDown",n.uuid),(e=n.interactionCache.mouseDown)==null||e.dispatch(),n.traverseAncestors(s=>{var a;s instanceof Yl&&(this._dispatchDOMCustomEvent("mouseDown",s.uuid),(a=s.interactionCache.mouseDown)==null||a.dispatch())}),!n.interactionCache.follow)break}}_handleMouseUpEvent(){var e;let t=this._raycastMesh(this._raycaster);for(let r=0,i=t.length;r<i;++r){let n=t[r].object;if(this._dispatchDOMCustomEvent("mouseUp",n.uuid),(e=n.interactionCache.mouseUp)==null||e.dispatch(),n.traverseAncestors(s=>{var a;s instanceof Yl&&(this._dispatchDOMCustomEvent("mouseUp",s.uuid),(a=s.interactionCache.mouseUp)==null||a.dispatch())}),!n.interactionCache.follow)break}}_handleMouseHoverEvent(e=!1){var t,r;if(this._enableEvent[Et.MOUSE_HOVER]!==void 0){let i;if(!e){let n=this._raycastMesh(this._raycaster).find(s=>!s.object.interactionCache.follow);i=n?n.object:void 0}if(this._prevObject!==i){this._prevObject!==void 0&&((t=this._prevObject.interactionCache.mouseHover)==null||t.dispatchReverse()),i!==void 0&&(this._dispatchDOMCustomEvent("mouseHover",i.uuid),(r=i.interactionCache.mouseHover)==null||r.dispatch());let n=[];i==null||i.traverseAncestors(o=>{o instanceof Yl&&o.interactionCache.mouseHover&&n.push(o)}),this._prevAncestors.filter(o=>{var l;return n.includes(o)?!1:((l=o.interactionCache.mouseHover)==null||l.dispatchReverse(),!0)});let s=n.filter(o=>{var l;return this._prevAncestors.includes(o)?!1:((l=o.interactionCache.mouseHover)==null||l.dispatch(),!0)}),a=this._prevAncestors.filter(o=>n.includes(o));this._prevAncestors=[...a,...s]}this._prevObject=i}}_handleLookAtEvent(){var e;(e=this._map[Et.LOOK_AT])==null||e.forEach(t=>{var r;let i=(r=t.interactionCache.lookAt)==null?void 0:r.distance;this._dispatchDOMCustomEvent("lookAt",t.uuid),i!==void 0&&(this._plane.set(this._normal,-i),this._raycaster.ray.intersectPlane(this._plane,this._intersection),t.interaction.lookAt(this._intersection))}),this._app.requestRender()}_handleFollowEvent(){var e;(e=this._map[Et.FOLLOW])==null||e.forEach(t=>{this._dispatchDOMCustomEvent("follow",t.uuid),this._plane.setFromNormalAndCoplanarPoint(this._normal,t.getWorldPosition(this._position)),this._raycaster.ray.intersectPlane(this._plane,this._intersection),t.interaction.follow(this._intersection)}),this._app.requestRender()}_handleKeyDownEvent(e){var t;(t=this._map[Et.KEY_DOWN])==null||t.forEach(r=>{var i;let n=(i=r.interactionCache.keyDown)==null?void 0:i.find(s=>s.key===e);this._dispatchDOMCustomEvent("keyDown",r.uuid),n==null||n.dispatch()})}_handleKeyUpEvent(e){var t;(t=this._map[Et.KEY_UP])==null||t.forEach(r=>{var i;let n=(i=r.interactionCache.keyUp)==null?void 0:i.find(s=>s.key===e);this._dispatchDOMCustomEvent("keyUp",r.uuid),n==null||n.dispatch()})}_raycastMesh(e){let t=[],r=i=>{for(let n of i.children)Is(n)&&!n.raycastLock&&n.visible&&(hne(n)&&e.intersectObject(n,!1,t),r(n))};return r(this._scene),t}_addCustomEvent(e,t){let r=(()=>{switch(e){case 0:return"mouseDown";case 1:return"mouseUp";case 2:return"mouseHover";case 5:return"keyDown";case 6:return"keyUp";case 7:return"start";case 9:return"lookAt";case 10:return"follow";case 11:return"scroll"}})();if(r){let i=new CustomEvent(r,{bubbles:!0});Object.defineProperty(i,"target",{writable:!1,value:{id:t.uuid,name:t.name}}),this.splineEvents[r]?this.splineEvents[r][t.uuid]=i:this.splineEvents[r]={[t.uuid]:i}}}_dispatchDOMCustomEvent(e,t){var r;let i=(r=this.splineEvents[e])==null?void 0:r[t];i&&this._domElement.dispatchEvent(i)}},iae=class{constructor(e,t,r,i,n){this._aspect=1,this._renderer=e,this._camera=t,this._frameSize=new q().copy(r),this._editorSize=new q().copy(i),this._aspect=t.aspect,this._fov=n!=null?n:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewportForImageExport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,i=this._editorSize.y;this._aspect=e/t,this._camera.zoom*=Math.min(r/e,i/t),this._renderer.setViewport(0,0,e,t)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,i=this._editorSize.y,n=0,s=0,a=e,o=t;e<r&&(n=(r-e)*.5,n=-n,a=r),t<i&&(s=(i-t)*.5,s=-s,o=i),this._aspect=a/o,this._renderer.setViewport(n,s,a,o)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let e=this._frameSize.y,t=this._editorSize.y,r=this._fov;if(e>t){let i=nae(e,1080,2160,1,15)/100;r*=e/t,r*=1-i}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t),this._camera.updateProjectionMatrix())}};function nae(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var jL=new lo,wv=class extends Ea{},rI=class{constructor(e){this.materials={},this.images={},this.colors={},this.transmissionRenderTarget=new ni(2048,2048,{generateMipmaps:!0,minFilter:nu,magFilter:ar,wrapS:yi,wrapT:yi}),this.transmissionRenderTarget.depthTexture=new Jv(2048,2048),this.reset(e)}reset(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.data);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,vN(r,this))}get transmissionSamplerMap(){return this.transmissionRenderTarget.texture}get transmissionDepthMap(){return this.transmissionRenderTarget.depthTexture}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].dispose(),delete this.materials[e])}isSharedMaterial(e){return e.uuid in this.materials||e===jL}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return(t=this.materials[e])!=null?t:jL}getMaterials(){return this.materials}addImage(e,t){if(this.images[e])return this.images[e].onload=()=>{this.onImageLoad&&this.onImageLoad(e)},this.images[e].src=t,!0;{let r=new Image;return r.src=t,r.onload=()=>{this.onImageLoad&&this.onImageLoad(e)},this.images[e]=r,!1}}deleteImage(e){this.images[e]&&delete this.images[e]}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]}getImages(){return this.images}addColor(e,t){return this.colors[e]?("a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new wv(t.r,t.g,t.b,t.a):this.colors[e]=new wv(t.r,t.g,t.b,1),!1)}updateColor(e,t){var r,i,n,s;if(this.colors[e]){let a=this.colors[e];return this.colors[e].r=(r=t.r)!=null?r:a.r,this.colors[e].g=(i=t.g)!=null?i:a.g,this.colors[e].b=(n=t.b)!=null?n:a.b,this.colors[e].a=(s=t.a)!=null?s:a.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this.transmissionRenderTarget.depthTexture.dispose(),this.transmissionRenderTarget.dispose(),this.onImageLoad=void 0}};function sae(e,t){switch(e.type){case Gt.NOISE:return t==="noiseType";case Gt.TEXTURE:return t==="projection"||t==="axis";case Gt.DISPLACE:return t==="noiseType";default:return!1}}function WL(e,t,r,i,n){var s;let a=!1;for(let[o,l]of Object.entries(e)){if(!o||l===void 0||gN(o,r,n))continue;let h=r.uniforms[`f${r.id}_${o}`];if(h)switch(h.constructor){case Xr:if(typeof l=="string"){let d=t.getColor(l);d&&(h.value=d);break}else{let d=l;h.value instanceof wv?h.value=new Ea(d.r,d.g,d.b,d.a):h.setRGBA(d);break}case yh:if(typeof l=="string"){let d=t.getColor(l);d&&(h.value=d);break}else{let d=l;h.value instanceof wv?h.value=new Ea(d.r,d.g,d.b,d.a):h.value.setRGBA(d.r,d.g,d.b,d.a);break}case is:{let d=l;h.value.setX(d[0]),h.value.setY(d[1]);break}case ss:{let d=l;h.value.setX(d[0]),h.value.setY(d[1]),h.value.setZ(d[2]);break}case pa:{let d=l;"image"in d&&(h.value.image=t.getImage(d.image)),"wrapping"in d&&(h.value.wrapS=h.value.wrapT=d.wrapping),"repeat"in d&&h.value.repeat.fromArray(d.repeat),"offset"in d&&h.value.offset.fromArray(d.offset),h.value.needsUpdate=!0;break}case Td:{l.forEach((d,p)=>{h.value[p].setX(d[0]),h.value[p].setY(d[1]),h.value[p].setZ(d[2]),h.value[p].setW(d[3])});break}default:{a=a||sae(r,o),h.value=l;break}}}if(a&&n){let o=fN({id:"0",fi:0,data:n},t);(s=i.userData.layers)==null||s.changeLayer(r.id,Le({},o)),i.dispose(),i.needsUpdate=!0}}function aae(e,t,r){var i;let n=[];e.objects.traverse((s,a)=>{var o;if(a.states===void 0)return;let l=t.find(s),h=l.interaction=new h0(l);oae(l,a,null,r),h.states.push(tc.create(s,a,r));for(let d of a.states){let p=pv.patch(a,d.data);h.states.push(tc.create(d.id,p,r))}if(a.events)for(let d of a.events){let p=d.data,f=new yv(p.type);if("key"in p&&(f.key=p.key),"url"in p&&(f.url=(o=p.url)!=null?o:void 0),"distance"in p&&(f.distance=p.distance),"steps"in p&&(f.steps=p.steps),"targets"in p)for(let{data:m}of p.targets){let y=Lp.create(m);m.object?(y.object=t.find(m.object),n.push([y,m.object,m.state])):y.object=void 0,f.addTarget(y)}h.events.push(f)}});for(let[s,a,o]of n){let l=t.find(a);l&&(o?s.state=(i=l.interaction.states.find(h=>h.uuid===o))!=null?i:l.interaction.states[0]:s.state=l.interaction.states[0])}}function oae(e,t,r,i,n=!1){if(!n&&t.states.length===0)return;let s=r===null?t:pv.patch(t,t.states.data(r));if(VR(e,s),e instanceof rc&&Mp.is(s.type)){let o=s;e.setZoom("PerspectiveCamera",o.perspective.zoom),e.setZoom("OrthographicCamera",o.orthographic.zoom)}else if(e instanceof Ca&&s.type==="Mesh"){if(e instanceof tS?e.buildFromStore(s.geometry):e.updateGeometry({parameters:s.geometry}),"material"in s){if(e.material instanceof Array)return;if(typeof s.material!="string"){let o=s.material.layers;for(let l of o){let h=e.material.userData.layers.getLayerByUuid(l.id);WL(l.data,i,h,e.material,l.data)}}}else if("materials"in s){if(!(e.material instanceof Array))return;var a=0;for(let o of s.materials){if(typeof o!="string"){let l=o.layers;for(let h of l){let d=e.material[a].userData.layers.getLayerByUuid(h.id);WL(h.data,i,d,e.material[a],h.data)}}a++}}}else s.type==="DirectionalLight"?e.fromDirectionalLightState(s,i):s.type==="PointLight"?e.fromPointLightState(s,i):s.type==="SpotLight"&&e.fromSpotLightState(s,i)}var lae=class{constructor(e){this.sharedAssets=new rI(e.shared),this.scene=new tI(e.scene,this.sharedAssets)}reset(e,t){this.scene.clearScene(this.sharedAssets),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}dispose(){this.scene.clearScene(this.sharedAssets),this.sharedAssets.dispose()}},gd=".",rS=Symbol("target"),iI=Symbol("unsubscribe");function Jw(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function uae(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var fa=Array.isArray;function iS(e){return typeof e=="symbol"}var hae={after:(e,t)=>fa(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>fa(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=gd),iS(t)?e+t.toString():e+t):e,initial:e=>{if(fa(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(gd);return t===-1?"":e.slice(0,t)},last:e=>{if(fa(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(gd);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(fa(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(gd);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(gd,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},as=hae;function cae(e){return typeof e=="object"&&typeof e.next=="function"}function dae(e,t,r,i,n){let s=e.next;if(t.name==="entries")e.next=function(){let a=s.call(this);return a.done===!1&&(a.value[0]=n(a.value[0],t,a.value[0],i),a.value[1]=n(a.value[1],t,a.value[0],i)),a};else if(t.name==="values"){let a=r[rS].keys();e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,a.next().value,i)),o}}else e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,a.value,i)),a};return e}function JL(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&iS(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var pae=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],s=n||e;this._pathCache.set(s,t);let a=this._proxyCache.get(s);return a===void 0&&(a=n===void 0?new Proxy(e,r):e,this._proxyCache.set(s,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,as.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function Yw(e){return toString.call(e)==="[object Object]"}function $m(){return!0}function Ku(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var nI=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),fae=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),sI={push:$m,pop:$m,shift:$m,unshift:$m,copyWithin:Ku,reverse:Ku,sort:Ku,splice:Ku,flat:Ku,fill:Ku},mae=new Set([...nI,...fae,...Object.keys(sI)]);function eg(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var aI=["keys","values","entries"],oI=new Set(["has","toString"]),lI={add:eg,clear:eg,delete:eg,forEach:eg},gae=new Set([...oI,...Object.keys(lI),...aI]);function tg(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var vae=new Set([...oI,"get"]),uI={set:tg,clear:tg,delete:tg,forEach:tg},yae=new Set([...vae,...Object.keys(uI),...aI]),dl=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return nI.has(e)}_shallowClone(e){let t=e;if(Yw(e))t=Le({},e);else if(fa(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(fa(i)?this._onIsChanged=sI[t]:i instanceof Set?this._onIsChanged=lI[t]:i instanceof Map&&(this._onIsChanged=uI[t]),i):r}update(e,t,r){let i=as.after(e,this._path);if(t!=="length"){let n=this.clone;as.walk(i,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],as.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},YL=class extends dl{static isHandledMethod(e){return mae.has(e)}},xae=class extends dl{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},XL=class extends dl{static isHandledMethod(e){return gae.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},qL=class extends dl{static isHandledMethod(e){return yae.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},wae=class extends dl{constructor(e,t,r,i){super(void 0,t,r,i);this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},bae=class extends dl{constructor(e,t,r,i){super(void 0,t,r,i);this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},ah=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return Yw(e)||fa(e)||Jw(e)}static isHandledMethod(e,t){return Yw(e)?dl.isHandledMethod(t):fa(e)?YL.isHandledMethod(t):e instanceof Set?XL.isHandledMethod(t):e instanceof Map?qL.isHandledMethod(t):Jw(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=dl;fa(e)?i=YL:e instanceof Date?i=xae:e instanceof Set?i=XL:e instanceof Map?i=qL:e instanceof WeakSet?i=wae:e instanceof WeakMap&&(i=bae),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=ah.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},_ae={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},nS=(e,t,r={})=>{r=Le(Le({},_ae),r);let i=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:a,details:o}=r,l=new pae(n),h=typeof r.onValidate=="function",d=new ah(h),p=(g,_,S,T,A)=>!h||d.isCloning||r.onValidate(as.concat(l.getPath(g),_),S,T,A)===!0,f=(g,_,S,T)=>{!JL(l,r,_)&&!(a&&l.isDetached(g,e))&&m(l.getPath(g),_,S,T)},m=(g,_,S,T,A)=>{d.isCloning?d.update(g,_,T):t(as.concat(g,_),S,T,A)},y=g=>g&&(g[i]||g),b=(g,_,S,T)=>uae(g)||S==="constructor"||s&&!ah.isHandledMethod(_,S)||JL(l,r,S)||l.isGetInvariant(_,S)||a&&l.isDetached(_,e)?g:(T===void 0&&(T=l.getPath(_)),l.getProxy(g,as.concat(T,S),x,i)),x={get(g,_,S){if(iS(_)){if(_===i||_===rS)return g;if(_===iI&&!l.isUnsubscribed&&l.getPath(g).length===0)return l.unsubscribe(),g}let T=Jw(g)?Reflect.get(g,_):Reflect.get(g,_,S);return b(T,g,_)},set(g,_,S,T){S=y(S);let A=g[i]||g,M=A[_];if(n(M,S)&&_ in g)return!0;let O=p(g,_,S,M);return O&&l.setProperty(A,_,S,T,M)?(f(g,_,g[_],M),!0):!O},defineProperty(g,_,S){if(!l.isSameDescriptor(S,g,_)){let T=g[_];p(g,_,S.value,T)&&l.defineProperty(g,_,S,T)&&f(g,_,S.value,T)}return!0},deleteProperty(g,_){if(!Reflect.has(g,_))return!0;let S=Reflect.get(g,_),T=p(g,_,void 0,S);return T&&l.deleteProperty(g,_,S)?(f(g,_,void 0,S),!0):!T},apply(g,_,S){let T=_[i]||_;if(l.isUnsubscribed)return Reflect.apply(g,T,S);if((o===!1||o!==!0&&!o.includes(g.name))&&ah.isHandledType(T)){let A=as.initial(l.getPath(g)),M=ah.isHandledMethod(T,g.name);d.start(T,A,S);let O=Reflect.apply(g,d.preferredThisArg(g,_,T),M?S.map(N=>y(N)):S),P=d.isChanged(T,n),C=d.stop();if(ah.isHandledType(O)&&M&&(_ instanceof Map&&g.name==="get"&&(A=as.concat(A,S[0])),O=l.getProxy(O,A,x)),P){let N={name:g.name,args:S,result:O},U=d.isCloning?as.initial(A):A,V=d.isCloning?as.last(A):"";p(as.get(e,U),V,T,C,N)?m(U,V,T,C,N):d.undo(T)}return(_ instanceof Map||_ instanceof Set)&&cae(O)?dae(O,g,_,A,b):O}return Reflect.apply(g,_,S)}},v=l.getProxy(e,r.pathAsArray?[]:"",x);return t=t.bind(v),h&&(r.onValidate=r.onValidate.bind(v)),v};nS.target=e=>e&&e[rS]||e;nS.unsubscribe=e=>e[iI]||e;var QL=nS,KL;(function(e){e[e.FULLSCREEN=1]="FULLSCREEN",e[e.CUSTOM=2]="CUSTOM"})(KL||(KL={}));var Sae=class{constructor(e,{autoRender:t=!1}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._skipRender=!0,this.autoRender=!1,this.requestRender=()=>{this._skipRender=!1},this.render=()=>{var r;if(!this._renderer)return;this._rafId=requestAnimationFrame(this.render);let i=h0.isAllAnimationsEnded;!this.autoRender&&this._skipRender&&(i===void 0||i)||(this._controls&&(this._controls.enableDamping||this._controls.autoRotate)?this._skipRender=!this._controls.update():this._skipRender=!0,this._playmode&&!this._playmode.isEnable&&this._playmode.activate(),this._scene&&this._camera&&(this._renderer.autoClear=!1,this._transmissionRenderTarget&&(this._renderer.setRenderTarget(this._transmissionRenderTarget),this._renderer.clear(),this._camera.layers.enable(0),this._camera.layers.disable(3),this._renderer.render(this._scene,this._camera),this._renderer.setRenderTarget(null),this._camera.layers.enable(3)),(r=this._scene.postprocessing)!=null&&r.enabled?(this._renderer.autoClear=!1,this._scene.postprocessing.render()):(this._renderer.autoClear=!0,this._renderer.render(this._scene,this._camera))))},this.resize=()=>{var r,i,n,s;!this._renderer||(this._viewportMode===1&&(this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._frameView&&(this._frameView.frameSize=new q(this._viewportWidth,this._viewportHeight))),(r=this._frameView)==null||r.updateRenderer(),(i=this._scene)!=null&&i.postprocessing&&this._scene.postprocessing.resize(this._viewportWidth,this._viewportHeight),this._viewportMode!==1&&((n=this._frameView)==null||n.updateViewport()),this._camera&&((s=this._frameView)==null||s.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&this._viewportMode===1&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),this.requestRender())},this.canvas=e,this.autoRender=t,window.addEventListener("resize",nR(this.resize,200))}async load(e){let t=await(await fetch(e)).arrayBuffer();this.start(t)}start(e){var t;let r=_w.deserialize(new Uint8Array(e));this._publishData=r.scene.publish;let i=new lae(r).scene;this._scene=i,this._sharedAssetsManager=new rI(r.shared),this._sharedAssetsManager.onImageLoad=()=>{this.requestRender()},aae(r.scene,this._scene,this._sharedAssetsManager),this._camera=this._scene.activeCamera;let n=Object.values(r.frames)[0];n&&(n.preset==="fullscreen"?(this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight):(this._viewportMode=2,this._viewportWidth=n.size[0],this._viewportHeight=n.size[1])),(t=this._scene.postprocessing)!=null&&t.enabled?(this._renderer=new hr({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._scene.postprocessing.init({renderer:this._renderer,camera:this._camera,scene:this._scene}).then(this.requestRender)):this._renderer=new hr({canvas:this.canvas,antialias:!0,alpha:!0,stencil:!0,depth:!0,powerPreference:"high-performance"}),this._scene.needsTransmission(void 0)&&(this._transmissionRenderTarget=new ni(2048,2048,{generateMipmaps:!0,minFilter:nu,magFilter:ar,wrapS:yi,wrapT:yi}),this._transmissionRenderTarget.depthTexture=new Jv(2048,2048),this._scene.needsTransmission(this._transmissionRenderTarget)),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this._viewportWidth,this._viewportHeight),this._scene.postprocessing&&this._scene.postprocessing.resize(this._viewportWidth,this._viewportHeight),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=fP,this._renderer.setClearColor(this._scene.bgColor,this._scene.alpha),this._frameView=new iae(this._renderer,this._camera,new q(this._viewportWidth,this._viewportHeight),new q(window.innerWidth,window.innerHeight)),this._controls=new gte(this._camera,this._renderer.domElement),this._publishData&&(this._controls.fromJSON(this._publishData.orbitControls),this._controls.useKeyEvents=!1),this._controls.addEventListener("change",this.requestRender),this._controls.addEventListener("start",this.requestRender),this._playmode=new rae(this._renderer.domElement,this._scene,this._camera,this),this.resize(),this.render()}findObjectById(e){var t;let r=(t=this._scene)==null?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(r)}findObjectByName(e){var t;let r=(t=this._scene)==null?void 0:t.getObjectByName(e);return this._createProxyObject(r)}getSplineEvents(){var e;return(e=this._playmode)==null?void 0:e.splineEvents}emitEvent(e,t){let r=this.findObjectById(t);r==null||r.emitEvent(e)}emitEventReverse(e,t){let r=this.findObjectById(t);r==null||r.emitEventReverse(e)}addEventListener(e,t){var r;(r=this._renderer)==null||r.domElement.addEventListener(e,t)}removeEventListener(e,t){var r;(r=this._renderer)==null||r.domElement.removeEventListener(e,t)}setZoom(e){var t;(t=this._controls)==null||t.zoomOut(e)}dispose(){var e,t,r,i,n,s,a;(e=this._playmode)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach(o=>{QL.unsubscribe(o)}),(r=this._renderer)==null||r.dispose(),(i=this._transmissionRenderTarget)==null||i.dispose(),(s=(n=this._transmissionRenderTarget)==null?void 0:n.depthTexture)==null||s.dispose(),(a=this._sharedAssetsManager)==null||a.dispose()}_createProxyObject(e){if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,emitEvent(i){var n;let s=(n=e.interactionCache)==null?void 0:n[i];Array.isArray(s)?s.forEach(a=>{a==null||a.dispatch()}):s==null||s.dispatch()},emitEventReverse(i){var n;let s=(n=e.interactionCache)==null?void 0:n[i];Array.isArray(s)?s.forEach(a=>{a==null||a.dispatchReverse()}):s==null||s.dispatchReverse()}},r=QL(t,(i,n)=>{var s;typeof e[i]!="object"&&((s=Object.getOwnPropertyDescriptor(e,i))==null?void 0:s.writable)&&(e[i]=n),this.requestRender(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,r),r}};Nn.FONTS_PATH="_assets/_fonts/";var Aae=Object.defineProperty,ZL=Object.getOwnPropertySymbols,Mae=Object.prototype.hasOwnProperty,Eae=Object.prototype.propertyIsEnumerable,$L=(e,t,r)=>t in e?Aae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Tae=(e,t)=>{for(var r in t||(t={}))Mae.call(t,r)&&$L(e,r,t[r]);if(ZL)for(var r of ZL(t))Eae.call(t,r)&&$L(e,r,t[r]);return e},hI={exports:{}},rf={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var eO=Object.getOwnPropertySymbols,Cae=Object.prototype.hasOwnProperty,Lae=Object.prototype.propertyIsEnumerable;function Oae(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Pae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Pae();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dae=vO,cI=60103;rf.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var tO=Symbol.for;cI=tO("react.element"),rf.Fragment=tO("react.fragment")}var Rae=Dae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nae=Object.prototype.hasOwnProperty,Iae={key:!0,ref:!0,__self:!0,__source:!0};function dI(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)Nae.call(t,i)&&!Iae.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:cI,type:e,key:s,ref:a,props:n,_owner:Rae.current}}rf.jsx=dI;rf.jsxs=dI;hI.exports=rf;const rO=hI.exports.jsx,zae=vi.exports.forwardRef(({scene:e,id:t,style:r,className:i,onMouseDown:n,onMouseUp:s,onMouseHover:a,onKeyDown:o,onKeyUp:l,onStart:h,onLookAt:d,onFollow:p,onWheel:f,onLoad:m,autoRender:y=!1},b)=>{const x=vi.exports.useRef(null),[v,g]=vi.exports.useState(!0);return vi.exports.useEffect(()=>{g(!0);let _;const S=[{name:"mouseDown",cb:n},{name:"mouseUp",cb:s},{name:"mouseHover",cb:a},{name:"keyDown",cb:o},{name:"keyUp",cb:l},{name:"start",cb:h},{name:"lookAt",cb:d},{name:"follow",cb:p},{name:"scroll",cb:f}];if(x.current){_=new Sae(x.current,{autoRender:y});async function T(){await _.load(e);for(let A of S)A.cb&&_.addEventListener(A.name,A.cb);g(!1),m==null||m(_)}T()}return()=>{for(let T of S)T.cb&&_.removeEventListener(T.name,T.cb);_.dispose()}},[e]),rO("div",{style:Tae({display:`${v?"none":"flex"}`},r),className:i,ref:b,children:rO("canvas",{ref:x,id:t})})});export{Bae as R,zae as S,vO as a,mV as j,iT as l,tT as n};
