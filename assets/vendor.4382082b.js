function zH(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(i){if(i!=="default"&&!(i in e)){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Ax(){return Ax=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ax.apply(this,arguments)}var Xc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},_i={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip=Symbol.for("react.element"),FH=Symbol.for("react.portal"),UH=Symbol.for("react.fragment"),kH=Symbol.for("react.strict_mode"),HH=Symbol.for("react.profiler"),GH=Symbol.for("react.provider"),VH=Symbol.for("react.context"),jH=Symbol.for("react.forward_ref"),WH=Symbol.for("react.suspense"),JH=Symbol.for("react.memo"),YH=Symbol.for("react.lazy"),qM=Symbol.iterator;function qH(e){return e===null||typeof e!="object"?null:(e=qM&&e[qM]||e["@@iterator"],typeof e=="function"?e:null)}var dO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pO=Object.assign,fO={};function gc(e,t,r){this.props=e,this.context=t,this.refs=fO,this.updater=r||dO}gc.prototype.isReactComponent={};gc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mO(){}mO.prototype=gc.prototype;function v_(e,t,r){this.props=e,this.context=t,this.refs=fO,this.updater=r||dO}var y_=v_.prototype=new mO;y_.constructor=v_;pO(y_,gc.prototype);y_.isPureReactComponent=!0;var XM=Array.isArray,gO=Object.prototype.hasOwnProperty,x_={current:null},vO={key:!0,ref:!0,__self:!0,__source:!0};function yO(e,t,r){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)gO.call(t,i)&&!vO.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var l=Array(o),h=0;h<o;h++)l[h]=arguments[h+2];n.children=l}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:Ip,type:e,key:s,ref:a,props:n,_owner:x_.current}}function XH(e,t){return{$$typeof:Ip,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function w_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ip}function QH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var QM=/\/+/g;function Uy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QH(""+e.key):t.toString(36)}function pg(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ip:case FH:a=!0}}if(a)return a=e,n=n(a),e=i===""?"."+Uy(a,0):i,XM(n)?(r="",e!=null&&(r=e.replace(QM,"$&/")+"/"),pg(n,t,r,"",function(h){return h})):n!=null&&(w_(n)&&(n=XH(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(QM,"$&/")+"/")+e)),t.push(n)),1;if(a=0,i=i===""?".":i+":",XM(e))for(var o=0;o<e.length;o++){s=e[o];var l=i+Uy(s,o);a+=pg(s,t,r,l,n)}else if(l=qH(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=i+Uy(s,o++),a+=pg(s,t,r,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Yf(e,t,r){if(e==null)return e;var i=[],n=0;return pg(e,i,"","",function(s){return t.call(r,s,n++)}),i}function KH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var hn={current:null},fg={transition:null},ZH={ReactCurrentDispatcher:hn,ReactCurrentBatchConfig:fg,ReactCurrentOwner:x_};Ft.Children={map:Yf,forEach:function(e,t,r){Yf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Yf(e,function(){t++}),t},toArray:function(e){return Yf(e,function(t){return t})||[]},only:function(e){if(!w_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ft.Component=gc;Ft.Fragment=UH;Ft.Profiler=HH;Ft.PureComponent=v_;Ft.StrictMode=kH;Ft.Suspense=WH;Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZH;Ft.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=pO({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=x_.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)gO.call(t,l)&&!vO.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){o=Array(l);for(var h=0;h<l;h++)o[h]=arguments[h+2];i.children=o}return{$$typeof:Ip,type:e.type,key:n,ref:s,props:i,_owner:a}};Ft.createContext=function(e){return e={$$typeof:VH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:GH,_context:e},e.Consumer=e};Ft.createElement=yO;Ft.createFactory=function(e){var t=yO.bind(null,e);return t.type=e,t};Ft.createRef=function(){return{current:null}};Ft.forwardRef=function(e){return{$$typeof:jH,render:e}};Ft.isValidElement=w_;Ft.lazy=function(e){return{$$typeof:YH,_payload:{_status:-1,_result:e},_init:KH}};Ft.memo=function(e,t){return{$$typeof:JH,type:e,compare:t===void 0?null:t}};Ft.startTransition=function(e){var t=fg.transition;fg.transition={};try{e()}finally{fg.transition=t}};Ft.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ft.useCallback=function(e,t){return hn.current.useCallback(e,t)};Ft.useContext=function(e){return hn.current.useContext(e)};Ft.useDebugValue=function(){};Ft.useDeferredValue=function(e){return hn.current.useDeferredValue(e)};Ft.useEffect=function(e,t){return hn.current.useEffect(e,t)};Ft.useId=function(){return hn.current.useId()};Ft.useImperativeHandle=function(e,t,r){return hn.current.useImperativeHandle(e,t,r)};Ft.useInsertionEffect=function(e,t){return hn.current.useInsertionEffect(e,t)};Ft.useLayoutEffect=function(e,t){return hn.current.useLayoutEffect(e,t)};Ft.useMemo=function(e,t){return hn.current.useMemo(e,t)};Ft.useReducer=function(e,t,r){return hn.current.useReducer(e,t,r)};Ft.useRef=function(e){return hn.current.useRef(e)};Ft.useState=function(e){return hn.current.useState(e)};Ft.useSyncExternalStore=function(e,t,r){return hn.current.useSyncExternalStore(e,t,r)};Ft.useTransition=function(){return hn.current.useTransition()};Ft.version="18.0.0-rc.2-11c5bb6e1-20220308";_i.exports=Ft;var xO=_i.exports,Ng=zH({__proto__:null,default:xO},[_i.exports]);function wO(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var $H=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,e5=wO(function(e){return $H.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function t5(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function r5(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var i5=function(){function e(r){var i=this;this._insertTag=function(n){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(n,s),i.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(r5(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var s=t5(n);try{s.insertRule(i,s.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),qi="-ms-",Ig="-moz-",Zt="-webkit-",_O="comm",__="rule",S_="decl",n5="@import",SO="@keyframes",s5=Math.abs,Bv=String.fromCharCode,a5=Object.assign;function o5(e,t){return(((t<<2^yn(e,0))<<2^yn(e,1))<<2^yn(e,2))<<2^yn(e,3)}function bO(e){return e.trim()}function l5(e,t){return(e=t.exec(e))?e[0]:e}function ir(e,t,r){return e.replace(t,r)}function Mx(e,t){return e.indexOf(t)}function yn(e,t){return e.charCodeAt(t)|0}function ep(e,t,r){return e.slice(t,r)}function xa(e){return e.length}function b_(e){return e.length}function qf(e,t){return t.push(e),e}function u5(e,t){return e.map(t).join("")}var zv=1,Xh=1,AO=0,Ln=0,si=0,vc="";function Fv(e,t,r,i,n,s,a){return{value:e,root:t,parent:r,type:i,props:n,children:s,line:zv,column:Xh,length:a,return:""}}function Qc(e,t){return a5(Fv("",null,null,"",null,null,0),e,{length:-e.length},t)}function h5(){return si}function c5(){return si=Ln>0?yn(vc,--Ln):0,Xh--,si===10&&(Xh=1,zv--),si}function qn(){return si=Ln<AO?yn(vc,Ln++):0,Xh++,si===10&&(Xh=1,zv++),si}function Da(){return yn(vc,Ln)}function mg(){return Ln}function Bp(e,t){return ep(vc,e,t)}function tp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function MO(e){return zv=Xh=1,AO=xa(vc=e),Ln=0,[]}function EO(e){return vc="",e}function gg(e){return bO(Bp(Ln-1,Ex(e===91?e+2:e===40?e+1:e)))}function d5(e){for(;(si=Da())&&si<33;)qn();return tp(e)>2||tp(si)>3?"":" "}function p5(e,t){for(;--t&&qn()&&!(si<48||si>102||si>57&&si<65||si>70&&si<97););return Bp(e,mg()+(t<6&&Da()==32&&qn()==32))}function Ex(e){for(;qn();)switch(si){case e:return Ln;case 34:case 39:e!==34&&e!==39&&Ex(si);break;case 40:e===41&&Ex(e);break;case 92:qn();break}return Ln}function f5(e,t){for(;qn()&&e+si!==47+10;)if(e+si===42+42&&Da()===47)break;return"/*"+Bp(t,Ln-1)+"*"+Bv(e===47?e:qn())}function m5(e){for(;!tp(Da());)qn();return Bp(e,Ln)}function g5(e){return EO(vg("",null,null,null,[""],e=MO(e),0,[0],e))}function vg(e,t,r,i,n,s,a,o,l){for(var h=0,d=0,p=a,f=0,m=0,v=0,w=1,S=1,y=1,g=0,_="",b=n,T=s,A=i,M=_;S;)switch(v=g,g=qn()){case 40:if(v!=108&&M.charCodeAt(p-1)==58){Mx(M+=ir(gg(g),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:M+=gg(g);break;case 9:case 10:case 13:case 32:M+=d5(v);break;case 92:M+=p5(mg()-1,7);continue;case 47:switch(Da()){case 42:case 47:qf(v5(f5(qn(),mg()),t,r),l);break;default:M+="/"}break;case 123*w:o[h++]=xa(M)*y;case 125*w:case 59:case 0:switch(g){case 0:case 125:S=0;case 59+d:m>0&&xa(M)-p&&qf(m>32?ZM(M+";",i,r,p-1):ZM(ir(M," ","")+";",i,r,p-2),l);break;case 59:M+=";";default:if(qf(A=KM(M,t,r,h,d,n,o,_,b=[],T=[],p),s),g===123)if(d===0)vg(M,t,A,A,b,s,p,o,T);else switch(f){case 100:case 109:case 115:vg(e,A,A,i&&qf(KM(e,A,A,0,0,n,o,_,n,b=[],p),T),n,T,p,o,i?b:T);break;default:vg(M,A,A,A,[""],T,0,o,T)}}h=d=m=0,w=y=1,_=M="",p=a;break;case 58:p=1+xa(M),m=v;default:if(w<1){if(g==123)--w;else if(g==125&&w++==0&&c5()==125)continue}switch(M+=Bv(g),g*w){case 38:y=d>0?1:(M+="\f",-1);break;case 44:o[h++]=(xa(M)-1)*y,y=1;break;case 64:Da()===45&&(M+=gg(qn())),f=Da(),d=p=xa(_=M+=m5(mg())),g++;break;case 45:v===45&&xa(M)==2&&(w=0)}}return s}function KM(e,t,r,i,n,s,a,o,l,h,d){for(var p=n-1,f=n===0?s:[""],m=b_(f),v=0,w=0,S=0;v<i;++v)for(var y=0,g=ep(e,p+1,p=s5(w=a[v])),_=e;y<m;++y)(_=bO(w>0?f[y]+" "+g:ir(g,/&\f/g,f[y])))&&(l[S++]=_);return Fv(e,t,r,n===0?__:o,l,h,d)}function v5(e,t,r){return Fv(e,t,r,_O,Bv(h5()),ep(e,2,-2),0)}function ZM(e,t,r,i){return Fv(e,t,r,S_,ep(e,0,i),ep(e,i+1,-1),i)}function TO(e,t){switch(o5(e,t)){case 5103:return Zt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Zt+e+Ig+e+qi+e+e;case 6828:case 4268:return Zt+e+qi+e+e;case 6165:return Zt+e+qi+"flex-"+e+e;case 5187:return Zt+e+ir(e,/(\w+).+(:[^]+)/,Zt+"box-$1$2"+qi+"flex-$1$2")+e;case 5443:return Zt+e+qi+"flex-item-"+ir(e,/flex-|-self/,"")+e;case 4675:return Zt+e+qi+"flex-line-pack"+ir(e,/align-content|flex-|-self/,"")+e;case 5548:return Zt+e+qi+ir(e,"shrink","negative")+e;case 5292:return Zt+e+qi+ir(e,"basis","preferred-size")+e;case 6060:return Zt+"box-"+ir(e,"-grow","")+Zt+e+qi+ir(e,"grow","positive")+e;case 4554:return Zt+ir(e,/([^-])(transform)/g,"$1"+Zt+"$2")+e;case 6187:return ir(ir(ir(e,/(zoom-|grab)/,Zt+"$1"),/(image-set)/,Zt+"$1"),e,"")+e;case 5495:case 3959:return ir(e,/(image-set\([^]*)/,Zt+"$1$`$1");case 4968:return ir(ir(e,/(.+:)(flex-)?(.*)/,Zt+"box-pack:$3"+qi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zt+e+e;case 4095:case 3583:case 4068:case 2532:return ir(e,/(.+)-inline(.+)/,Zt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xa(e)-1-t>6)switch(yn(e,t+1)){case 109:if(yn(e,t+4)!==45)break;case 102:return ir(e,/(.+:)(.+)-([^]+)/,"$1"+Zt+"$2-$3$1"+Ig+(yn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Mx(e,"stretch")?TO(ir(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(yn(e,t+1)!==115)break;case 6444:switch(yn(e,xa(e)-3-(~Mx(e,"!important")&&10))){case 107:return ir(e,":",":"+Zt)+e;case 101:return ir(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zt+(yn(e,14)===45?"inline-":"")+"box$3$1"+Zt+"$2$3$1"+qi+"$2box$3")+e}break;case 5936:switch(yn(e,t+11)){case 114:return Zt+e+qi+ir(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Zt+e+qi+ir(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Zt+e+qi+ir(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Zt+e+qi+e+e}return e}function Rh(e,t){for(var r="",i=b_(e),n=0;n<i;n++)r+=t(e[n],n,e,t)||"";return r}function y5(e,t,r,i){switch(e.type){case n5:case S_:return e.return=e.return||e.value;case _O:return"";case SO:return e.return=e.value+"{"+Rh(e.children,i)+"}";case __:e.value=e.props.join(",")}return xa(r=Rh(e.children,i))?e.return=e.value+"{"+r+"}":""}function x5(e){var t=b_(e);return function(r,i,n,s){for(var a="",o=0;o<t;o++)a+=e[o](r,i,n,s)||"";return a}}function w5(e){return function(t){t.root||(t=t.return)&&e(t)}}function _5(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case S_:e.return=TO(e.value,e.length);break;case SO:return Rh([Qc(e,{value:ir(e.value,"@","@"+Zt)})],i);case __:if(e.length)return u5(e.props,function(n){switch(l5(n,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rh([Qc(e,{props:[ir(n,/:(read-\w+)/,":"+Ig+"$1")]})],i);case"::placeholder":return Rh([Qc(e,{props:[ir(n,/:(plac\w+)/,":"+Zt+"input-$1")]}),Qc(e,{props:[ir(n,/:(plac\w+)/,":"+Ig+"$1")]}),Qc(e,{props:[ir(n,/:(plac\w+)/,qi+"input-$1")]})],i)}return""})}}var S5=function(t,r,i){for(var n=0,s=0;n=s,s=Da(),n===38&&s===12&&(r[i]=1),!tp(s);)qn();return Bp(t,Ln)},b5=function(t,r){var i=-1,n=44;do switch(tp(n)){case 0:n===38&&Da()===12&&(r[i]=1),t[i]+=S5(Ln-1,r,i);break;case 2:t[i]+=gg(n);break;case 4:if(n===44){t[++i]=Da()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=Bv(n)}while(n=qn());return t},A5=function(t,r){return EO(b5(MO(t),r))},$M=new WeakMap,M5=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,n=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!$M.get(i))&&!n){$M.set(t,!0);for(var s=[],a=A5(r,s),o=i.props,l=0,h=0;l<a.length;l++)for(var d=0;d<o.length;d++,h++)t.props[h]=s[l]?a[l].replace(/&\f/g,o[d]):o[d]+" "+a[l]}}},E5=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}},T5=[_5],C5=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(w){var S=w.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var n=t.stylisPlugins||T5,s={},a,o=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(w){for(var S=w.getAttribute("data-emotion").split(" "),y=1;y<S.length;y++)s[S[y]]=!0;o.push(w)});var l,h=[M5,E5];{var d,p=[y5,w5(function(w){d.insert(w)})],f=x5(h.concat(n,p)),m=function(S){return Rh(g5(S),f)};l=function(S,y,g,_){d=g,m(S?S+"{"+y.styles+"}":y.styles),_&&(v.inserted[y.name]=!0)}}var v={key:r,sheet:new i5({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return v.sheet.hydrate(o),v},L5=!0;function O5(e,t,r){var i="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):i+=n+" "}),i}var CO=function(t,r,i){var n=t.key+"-"+r.name;(i===!1||L5===!1)&&t.registered[n]===void 0&&(t.registered[n]=r.styles)},P5=function(t,r,i){CO(t,r,i);var n=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+n:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function D5(e){for(var t=0,r,i=0,n=e.length;n>=4;++i,n-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var R5={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},N5=/[A-Z]|^ms/g,I5=/_EMO_([^_]+?)_([^]*?)_EMO_/g,LO=function(t){return t.charCodeAt(1)===45},eE=function(t){return t!=null&&typeof t!="boolean"},ky=wO(function(e){return LO(e)?e:e.replace(N5,"-$&").toLowerCase()}),tE=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(I5,function(i,n,s){return wa={name:n,styles:s,next:wa},n})}return R5[t]!==1&&!LO(t)&&typeof r=="number"&&r!==0?r+"px":r};function rp(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return wa={name:r.name,styles:r.styles,next:wa},r.name;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)wa={name:i.name,styles:i.styles,next:wa},i=i.next;var n=r.styles+";";return n}return B5(e,t,r)}case"function":{if(e!==void 0){var s=wa,a=r(e);return wa=s,rp(e,t,a)}break}}if(t==null)return r;var o=t[r];return o!==void 0?o:r}function B5(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=rp(e,t,r[n])+";";else for(var s in r){var a=r[s];if(typeof a!="object")t!=null&&t[a]!==void 0?i+=s+"{"+t[a]+"}":eE(a)&&(i+=ky(s)+":"+tE(s,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var o=0;o<a.length;o++)eE(a[o])&&(i+=ky(s)+":"+tE(s,a[o])+";");else{var l=rp(e,t,a);switch(s){case"animation":case"animationName":{i+=ky(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var rE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,wa,z5=function(t,r,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,s="";wa=void 0;var a=t[0];a==null||a.raw===void 0?(n=!1,s+=rp(i,r,a)):s+=a[0];for(var o=1;o<t.length;o++)s+=rp(i,r,t[o]),n&&(s+=a[o]);rE.lastIndex=0;for(var l="",h;(h=rE.exec(s))!==null;)l+="-"+h[1];var d=D5(s)+l;return{name:d,styles:s,next:wa}},OO=_i.exports.createContext(typeof HTMLElement!="undefined"?C5({key:"css"}):null);OO.Provider;var F5=function(t){return _i.exports.forwardRef(function(r,i){var n=_i.exports.useContext(OO);return t(r,n,i)})},U5=_i.exports.createContext({});Ng["useInsertionEffect"]&&Ng["useInsertionEffect"];var k5=e5,H5=function(t){return t!=="theme"},iE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?k5:H5},nE=function(t,r,i){var n;if(r){var s=r.shouldForwardProp;n=t.__emotion_forwardProp&&s?function(a){return t.__emotion_forwardProp(a)&&s(a)}:s}return typeof n!="function"&&i&&(n=t.__emotion_forwardProp),n},G5=Ng["useInsertionEffect"]?Ng["useInsertionEffect"]:function(t){t()};function V5(e){G5(e)}var j5=function(t){var r=t.cache,i=t.serialized,n=t.isStringTag;return CO(r,i,n),V5(function(){return P5(r,i,n)}),null},W5=function e(t,r){var i=t.__emotion_real===t,n=i&&t.__emotion_base||t,s,a;r!==void 0&&(s=r.label,a=r.target);var o=nE(t,r,i),l=o||iE(n),h=!l("as");return function(){var d=arguments,p=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&p.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)p.push.apply(p,d);else{p.push(d[0][0]);for(var f=d.length,m=1;m<f;m++)p.push(d[m],d[0][m])}var v=F5(function(w,S,y){var g=h&&w.as||n,_="",b=[],T=w;if(w.theme==null){T={};for(var A in w)T[A]=w[A];T.theme=_i.exports.useContext(U5)}typeof w.className=="string"?_=O5(S.registered,b,w.className):w.className!=null&&(_=w.className+" ");var M=z5(p.concat(b),S.registered,T);_+=S.key+"-"+M.name,a!==void 0&&(_+=" "+a);var L=h&&o===void 0?iE(g):l,D={};for(var C in w)h&&C==="as"||L(C)&&(D[C]=w[C]);return D.className=_,D.ref=y,_i.exports.createElement(_i.exports.Fragment,null,_i.exports.createElement(j5,{cache:S,serialized:M,isStringTag:typeof g=="string"}),_i.exports.createElement(g,D))});return v.displayName=s!==void 0?s:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",v.defaultProps=t.defaultProps,v.__emotion_real=v,v.__emotion_base=n,v.__emotion_styles=p,v.__emotion_forwardProp=o,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(w,S){return e(w,Ax({},r,S,{shouldForwardProp:nE(v,S,!0)})).apply(void 0,p)},v}},J5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],sE=W5.bind();J5.forEach(function(e){sE[e]=sE(e)});var Y5={exports:{}},Uv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q5=_i.exports,X5=Symbol.for("react.element"),Q5=Symbol.for("react.fragment"),K5=Object.prototype.hasOwnProperty,Z5=q5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$5={key:!0,ref:!0,__self:!0,__source:!0};function PO(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)K5.call(t,i)&&!$5.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:X5,type:e,key:s,ref:a,props:n,_owner:Z5.current}}Uv.Fragment=Q5;Uv.jsx=PO;Uv.jsxs=PO;Y5.exports=Uv;var aE={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,i="4.17.21",n=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",p=1,f=2,m=4,v=1,w=2,S=1,y=2,g=4,_=8,b=16,T=32,A=64,M=128,L=256,D=512,C=30,N="...",U=800,V=16,k=1,G=2,$=3,W=1/0,H=9007199254740991,X=17976931348623157e292,J=0/0,Y=4294967295,ee=Y-1,ie=Y>>>1,ue=[["ary",M],["bind",S],["bindKey",y],["curry",_],["curryRight",b],["flip",D],["partial",T],["partialRight",A],["rearg",L]],we="[object Arguments]",q="[object Array]",Se="[object AsyncFunction]",me="[object Boolean]",re="[object Date]",K="[object DOMException]",ne="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",pe="[object Map]",xe="[object Number]",Ae="[object Null]",F="[object Object]",B="[object Promise]",de="[object Proxy]",Oe="[object RegExp]",Ce="[object Set]",Re="[object String]",ze="[object Symbol]",Ke="[object Undefined]",We="[object WeakMap]",qe="[object WeakSet]",te="[object ArrayBuffer]",Ie="[object DataView]",Me="[object Float32Array]",je="[object Float64Array]",Be="[object Int8Array]",at="[object Int16Array]",kt="[object Int32Array]",yr="[object Uint8Array]",Ei="[object Uint8ClampedArray]",$t="[object Uint16Array]",gi="[object Uint32Array]",ki=/\b__p \+= '';/g,aa=/\b(__p \+=) '' \+/g,Hi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ls=/&(?:amp|lt|gt|quot|#39);/g,Lr=/[&<>"']/g,Gi=RegExp(Ls.source),ei=RegExp(Lr.source),ht=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pt=/^\w*$/,qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,er=RegExp(Ht.source),z=/^\s+/,he=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ve=/\{\n\/\* \[wrapped with (.+)\] \*/,Pe=/,? & /,Ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xe=/[()=,{}\[\]\/\s]/,mt=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,or=/\w*$/,bt=/^[-+]0x[0-9a-f]+$/i,Dt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,Os=/^0o[0-7]+$/i,es=/^(?:0|[1-9]\d*)$/,oa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vi=/($^)/,Va=/['\n\r\u2028\u2029\\]/g,On="\\ud800-\\udfff",ti="\\u0300-\\u036f",ts="\\ufe20-\\ufe2f",hi="\\u20d0-\\u20ff",bb=ti+ts+hi,Ab="\\u2700-\\u27bf",Mb="a-z\\xdf-\\xf6\\xf8-\\xff",RI="\\xac\\xb1\\xd7\\xf7",NI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",II="\\u2000-\\u206f",BI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Eb="A-Z\\xc0-\\xd6\\xd8-\\xde",Tb="\\ufe0e\\ufe0f",Cb=RI+NI+II+BI,L0="['\u2019]",zI="["+On+"]",Lb="["+Cb+"]",of="["+bb+"]",Ob="\\d+",FI="["+Ab+"]",Pb="["+Mb+"]",Db="[^"+On+Cb+Ob+Ab+Mb+Eb+"]",O0="\\ud83c[\\udffb-\\udfff]",UI="(?:"+of+"|"+O0+")",Rb="[^"+On+"]",P0="(?:\\ud83c[\\udde6-\\uddff]){2}",D0="[\\ud800-\\udbff][\\udc00-\\udfff]",_u="["+Eb+"]",Nb="\\u200d",Ib="(?:"+Pb+"|"+Db+")",kI="(?:"+_u+"|"+Db+")",Bb="(?:"+L0+"(?:d|ll|m|re|s|t|ve))?",zb="(?:"+L0+"(?:D|LL|M|RE|S|T|VE))?",Fb=UI+"?",Ub="["+Tb+"]?",HI="(?:"+Nb+"(?:"+[Rb,P0,D0].join("|")+")"+Ub+Fb+")*",GI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",VI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kb=Ub+Fb+HI,jI="(?:"+[FI,P0,D0].join("|")+")"+kb,WI="(?:"+[Rb+of+"?",of,P0,D0,zI].join("|")+")",JI=RegExp(L0,"g"),YI=RegExp(of,"g"),R0=RegExp(O0+"(?="+O0+")|"+WI+kb,"g"),qI=RegExp([_u+"?"+Pb+"+"+Bb+"(?="+[Lb,_u,"$"].join("|")+")",kI+"+"+zb+"(?="+[Lb,_u+Ib,"$"].join("|")+")",_u+"?"+Ib+"+"+Bb,_u+"+"+zb,VI,GI,Ob,jI].join("|"),"g"),XI=RegExp("["+Nb+On+bb+Tb+"]"),QI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,KI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ZI=-1,xr={};xr[Me]=xr[je]=xr[Be]=xr[at]=xr[kt]=xr[yr]=xr[Ei]=xr[$t]=xr[gi]=!0,xr[we]=xr[q]=xr[te]=xr[me]=xr[Ie]=xr[re]=xr[ne]=xr[ae]=xr[pe]=xr[xe]=xr[F]=xr[Oe]=xr[Ce]=xr[Re]=xr[We]=!1;var fr={};fr[we]=fr[q]=fr[te]=fr[Ie]=fr[me]=fr[re]=fr[Me]=fr[je]=fr[Be]=fr[at]=fr[kt]=fr[pe]=fr[xe]=fr[F]=fr[Oe]=fr[Ce]=fr[Re]=fr[ze]=fr[yr]=fr[Ei]=fr[$t]=fr[gi]=!0,fr[ne]=fr[ae]=fr[We]=!1;var $I={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},eB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tB={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rB={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iB=parseFloat,nB=parseInt,Hb=typeof Xc=="object"&&Xc&&Xc.Object===Object&&Xc,sB=typeof self=="object"&&self&&self.Object===Object&&self,Ti=Hb||sB||Function("return this")(),N0=t&&!t.nodeType&&t,Ol=N0&&!0&&e&&!e.nodeType&&e,Gb=Ol&&Ol.exports===N0,I0=Gb&&Hb.process,rs=function(){try{var se=Ol&&Ol.require&&Ol.require("util").types;return se||I0&&I0.binding&&I0.binding("util")}catch{}}(),Vb=rs&&rs.isArrayBuffer,jb=rs&&rs.isDate,Wb=rs&&rs.isMap,Jb=rs&&rs.isRegExp,Yb=rs&&rs.isSet,qb=rs&&rs.isTypedArray;function Pn(se,_e,ye){switch(ye.length){case 0:return se.call(_e);case 1:return se.call(_e,ye[0]);case 2:return se.call(_e,ye[0],ye[1]);case 3:return se.call(_e,ye[0],ye[1],ye[2])}return se.apply(_e,ye)}function aB(se,_e,ye,Ye){for(var wt=-1,Kt=se==null?0:se.length;++wt<Kt;){var ci=se[wt];_e(Ye,ci,ye(ci),se)}return Ye}function is(se,_e){for(var ye=-1,Ye=se==null?0:se.length;++ye<Ye&&_e(se[ye],ye,se)!==!1;);return se}function oB(se,_e){for(var ye=se==null?0:se.length;ye--&&_e(se[ye],ye,se)!==!1;);return se}function Xb(se,_e){for(var ye=-1,Ye=se==null?0:se.length;++ye<Ye;)if(!_e(se[ye],ye,se))return!1;return!0}function Eo(se,_e){for(var ye=-1,Ye=se==null?0:se.length,wt=0,Kt=[];++ye<Ye;){var ci=se[ye];_e(ci,ye,se)&&(Kt[wt++]=ci)}return Kt}function lf(se,_e){var ye=se==null?0:se.length;return!!ye&&Su(se,_e,0)>-1}function B0(se,_e,ye){for(var Ye=-1,wt=se==null?0:se.length;++Ye<wt;)if(ye(_e,se[Ye]))return!0;return!1}function Ar(se,_e){for(var ye=-1,Ye=se==null?0:se.length,wt=Array(Ye);++ye<Ye;)wt[ye]=_e(se[ye],ye,se);return wt}function To(se,_e){for(var ye=-1,Ye=_e.length,wt=se.length;++ye<Ye;)se[wt+ye]=_e[ye];return se}function z0(se,_e,ye,Ye){var wt=-1,Kt=se==null?0:se.length;for(Ye&&Kt&&(ye=se[++wt]);++wt<Kt;)ye=_e(ye,se[wt],wt,se);return ye}function lB(se,_e,ye,Ye){var wt=se==null?0:se.length;for(Ye&&wt&&(ye=se[--wt]);wt--;)ye=_e(ye,se[wt],wt,se);return ye}function F0(se,_e){for(var ye=-1,Ye=se==null?0:se.length;++ye<Ye;)if(_e(se[ye],ye,se))return!0;return!1}var uB=U0("length");function hB(se){return se.split("")}function cB(se){return se.match(Ze)||[]}function Qb(se,_e,ye){var Ye;return ye(se,function(wt,Kt,ci){if(_e(wt,Kt,ci))return Ye=Kt,!1}),Ye}function uf(se,_e,ye,Ye){for(var wt=se.length,Kt=ye+(Ye?1:-1);Ye?Kt--:++Kt<wt;)if(_e(se[Kt],Kt,se))return Kt;return-1}function Su(se,_e,ye){return _e===_e?bB(se,_e,ye):uf(se,Kb,ye)}function dB(se,_e,ye,Ye){for(var wt=ye-1,Kt=se.length;++wt<Kt;)if(Ye(se[wt],_e))return wt;return-1}function Kb(se){return se!==se}function Zb(se,_e){var ye=se==null?0:se.length;return ye?H0(se,_e)/ye:J}function U0(se){return function(_e){return _e==null?r:_e[se]}}function k0(se){return function(_e){return se==null?r:se[_e]}}function $b(se,_e,ye,Ye,wt){return wt(se,function(Kt,ci,pr){ye=Ye?(Ye=!1,Kt):_e(ye,Kt,ci,pr)}),ye}function pB(se,_e){var ye=se.length;for(se.sort(_e);ye--;)se[ye]=se[ye].value;return se}function H0(se,_e){for(var ye,Ye=-1,wt=se.length;++Ye<wt;){var Kt=_e(se[Ye]);Kt!==r&&(ye=ye===r?Kt:ye+Kt)}return ye}function G0(se,_e){for(var ye=-1,Ye=Array(se);++ye<se;)Ye[ye]=_e(ye);return Ye}function fB(se,_e){return Ar(_e,function(ye){return[ye,se[ye]]})}function eA(se){return se&&se.slice(0,nA(se)+1).replace(z,"")}function Dn(se){return function(_e){return se(_e)}}function V0(se,_e){return Ar(_e,function(ye){return se[ye]})}function Nc(se,_e){return se.has(_e)}function tA(se,_e){for(var ye=-1,Ye=se.length;++ye<Ye&&Su(_e,se[ye],0)>-1;);return ye}function rA(se,_e){for(var ye=se.length;ye--&&Su(_e,se[ye],0)>-1;);return ye}function mB(se,_e){for(var ye=se.length,Ye=0;ye--;)se[ye]===_e&&++Ye;return Ye}var gB=k0($I),vB=k0(eB);function yB(se){return"\\"+rB[se]}function xB(se,_e){return se==null?r:se[_e]}function bu(se){return XI.test(se)}function wB(se){return QI.test(se)}function _B(se){for(var _e,ye=[];!(_e=se.next()).done;)ye.push(_e.value);return ye}function j0(se){var _e=-1,ye=Array(se.size);return se.forEach(function(Ye,wt){ye[++_e]=[wt,Ye]}),ye}function iA(se,_e){return function(ye){return se(_e(ye))}}function Co(se,_e){for(var ye=-1,Ye=se.length,wt=0,Kt=[];++ye<Ye;){var ci=se[ye];(ci===_e||ci===d)&&(se[ye]=d,Kt[wt++]=ye)}return Kt}function hf(se){var _e=-1,ye=Array(se.size);return se.forEach(function(Ye){ye[++_e]=Ye}),ye}function SB(se){var _e=-1,ye=Array(se.size);return se.forEach(function(Ye){ye[++_e]=[Ye,Ye]}),ye}function bB(se,_e,ye){for(var Ye=ye-1,wt=se.length;++Ye<wt;)if(se[Ye]===_e)return Ye;return-1}function AB(se,_e,ye){for(var Ye=ye+1;Ye--;)if(se[Ye]===_e)return Ye;return Ye}function Au(se){return bu(se)?EB(se):uB(se)}function Ps(se){return bu(se)?TB(se):hB(se)}function nA(se){for(var _e=se.length;_e--&&he.test(se.charAt(_e)););return _e}var MB=k0(tB);function EB(se){for(var _e=R0.lastIndex=0;R0.test(se);)++_e;return _e}function TB(se){return se.match(R0)||[]}function CB(se){return se.match(qI)||[]}var LB=function se(_e){_e=_e==null?Ti:Mu.defaults(Ti.Object(),_e,Mu.pick(Ti,KI));var ye=_e.Array,Ye=_e.Date,wt=_e.Error,Kt=_e.Function,ci=_e.Math,pr=_e.Object,W0=_e.RegExp,OB=_e.String,ns=_e.TypeError,cf=ye.prototype,PB=Kt.prototype,Eu=pr.prototype,df=_e["__core-js_shared__"],pf=PB.toString,lr=Eu.hasOwnProperty,DB=0,sA=function(){var u=/[^.]+$/.exec(df&&df.keys&&df.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),ff=Eu.toString,RB=pf.call(pr),NB=Ti._,IB=W0("^"+pf.call(lr).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mf=Gb?_e.Buffer:r,Lo=_e.Symbol,gf=_e.Uint8Array,aA=mf?mf.allocUnsafe:r,vf=iA(pr.getPrototypeOf,pr),oA=pr.create,lA=Eu.propertyIsEnumerable,yf=cf.splice,uA=Lo?Lo.isConcatSpreadable:r,Ic=Lo?Lo.iterator:r,Pl=Lo?Lo.toStringTag:r,xf=function(){try{var u=Bl(pr,"defineProperty");return u({},"",{}),u}catch{}}(),BB=_e.clearTimeout!==Ti.clearTimeout&&_e.clearTimeout,zB=Ye&&Ye.now!==Ti.Date.now&&Ye.now,FB=_e.setTimeout!==Ti.setTimeout&&_e.setTimeout,wf=ci.ceil,_f=ci.floor,J0=pr.getOwnPropertySymbols,UB=mf?mf.isBuffer:r,hA=_e.isFinite,kB=cf.join,HB=iA(pr.keys,pr),di=ci.max,ji=ci.min,GB=Ye.now,VB=_e.parseInt,cA=ci.random,jB=cf.reverse,Y0=Bl(_e,"DataView"),Bc=Bl(_e,"Map"),q0=Bl(_e,"Promise"),Tu=Bl(_e,"Set"),zc=Bl(_e,"WeakMap"),Fc=Bl(pr,"create"),Sf=zc&&new zc,Cu={},WB=zl(Y0),JB=zl(Bc),YB=zl(q0),qB=zl(Tu),XB=zl(zc),bf=Lo?Lo.prototype:r,Uc=bf?bf.valueOf:r,dA=bf?bf.toString:r;function R(u){if(zr(u)&&!St(u)&&!(u instanceof Bt)){if(u instanceof ss)return u;if(lr.call(u,"__wrapped__"))return pM(u)}return new ss(u)}var Lu=function(){function u(){}return function(c){if(!Or(c))return{};if(oA)return oA(c);u.prototype=c;var x=new u;return u.prototype=r,x}}();function Af(){}function ss(u,c){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=r}R.templateSettings={escape:ht,evaluate:yt,interpolate:xt,variable:"",imports:{_:R}},R.prototype=Af.prototype,R.prototype.constructor=R,ss.prototype=Lu(Af.prototype),ss.prototype.constructor=ss;function Bt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function QB(){var u=new Bt(this.__wrapped__);return u.__actions__=dn(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=dn(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=dn(this.__views__),u}function KB(){if(this.__filtered__){var u=new Bt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function ZB(){var u=this.__wrapped__.value(),c=this.__dir__,x=St(u),E=c<0,P=x?u.length:0,I=h4(0,P,this.__views__),j=I.start,Z=I.end,le=Z-j,Ee=E?Z:j-1,Te=this.__iteratees__,De=Te.length,ke=0,et=ji(le,this.__takeCount__);if(!x||!E&&P==le&&et==le)return BA(u,this.__actions__);var pt=[];e:for(;le--&&ke<et;){Ee+=c;for(var Ct=-1,ft=u[Ee];++Ct<De;){var Nt=Te[Ct],Ut=Nt.iteratee,In=Nt.type,an=Ut(ft);if(In==G)ft=an;else if(!an){if(In==k)continue e;break e}}pt[ke++]=ft}return pt}Bt.prototype=Lu(Af.prototype),Bt.prototype.constructor=Bt;function Dl(u){var c=-1,x=u==null?0:u.length;for(this.clear();++c<x;){var E=u[c];this.set(E[0],E[1])}}function $B(){this.__data__=Fc?Fc(null):{},this.size=0}function ez(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}function tz(u){var c=this.__data__;if(Fc){var x=c[u];return x===l?r:x}return lr.call(c,u)?c[u]:r}function rz(u){var c=this.__data__;return Fc?c[u]!==r:lr.call(c,u)}function iz(u,c){var x=this.__data__;return this.size+=this.has(u)?0:1,x[u]=Fc&&c===r?l:c,this}Dl.prototype.clear=$B,Dl.prototype.delete=ez,Dl.prototype.get=tz,Dl.prototype.has=rz,Dl.prototype.set=iz;function ja(u){var c=-1,x=u==null?0:u.length;for(this.clear();++c<x;){var E=u[c];this.set(E[0],E[1])}}function nz(){this.__data__=[],this.size=0}function sz(u){var c=this.__data__,x=Mf(c,u);if(x<0)return!1;var E=c.length-1;return x==E?c.pop():yf.call(c,x,1),--this.size,!0}function az(u){var c=this.__data__,x=Mf(c,u);return x<0?r:c[x][1]}function oz(u){return Mf(this.__data__,u)>-1}function lz(u,c){var x=this.__data__,E=Mf(x,u);return E<0?(++this.size,x.push([u,c])):x[E][1]=c,this}ja.prototype.clear=nz,ja.prototype.delete=sz,ja.prototype.get=az,ja.prototype.has=oz,ja.prototype.set=lz;function Wa(u){var c=-1,x=u==null?0:u.length;for(this.clear();++c<x;){var E=u[c];this.set(E[0],E[1])}}function uz(){this.size=0,this.__data__={hash:new Dl,map:new(Bc||ja),string:new Dl}}function hz(u){var c=zf(this,u).delete(u);return this.size-=c?1:0,c}function cz(u){return zf(this,u).get(u)}function dz(u){return zf(this,u).has(u)}function pz(u,c){var x=zf(this,u),E=x.size;return x.set(u,c),this.size+=x.size==E?0:1,this}Wa.prototype.clear=uz,Wa.prototype.delete=hz,Wa.prototype.get=cz,Wa.prototype.has=dz,Wa.prototype.set=pz;function Rl(u){var c=-1,x=u==null?0:u.length;for(this.__data__=new Wa;++c<x;)this.add(u[c])}function fz(u){return this.__data__.set(u,l),this}function mz(u){return this.__data__.has(u)}Rl.prototype.add=Rl.prototype.push=fz,Rl.prototype.has=mz;function Ds(u){var c=this.__data__=new ja(u);this.size=c.size}function gz(){this.__data__=new ja,this.size=0}function vz(u){var c=this.__data__,x=c.delete(u);return this.size=c.size,x}function yz(u){return this.__data__.get(u)}function xz(u){return this.__data__.has(u)}function wz(u,c){var x=this.__data__;if(x instanceof ja){var E=x.__data__;if(!Bc||E.length<n-1)return E.push([u,c]),this.size=++x.size,this;x=this.__data__=new Wa(E)}return x.set(u,c),this.size=x.size,this}Ds.prototype.clear=gz,Ds.prototype.delete=vz,Ds.prototype.get=yz,Ds.prototype.has=xz,Ds.prototype.set=wz;function pA(u,c){var x=St(u),E=!x&&Fl(u),P=!x&&!E&&No(u),I=!x&&!E&&!P&&Ru(u),j=x||E||P||I,Z=j?G0(u.length,OB):[],le=Z.length;for(var Ee in u)(c||lr.call(u,Ee))&&!(j&&(Ee=="length"||P&&(Ee=="offset"||Ee=="parent")||I&&(Ee=="buffer"||Ee=="byteLength"||Ee=="byteOffset")||Xa(Ee,le)))&&Z.push(Ee);return Z}function fA(u){var c=u.length;return c?u[sy(0,c-1)]:r}function _z(u,c){return Ff(dn(u),Nl(c,0,u.length))}function Sz(u){return Ff(dn(u))}function X0(u,c,x){(x!==r&&!Rs(u[c],x)||x===r&&!(c in u))&&Ja(u,c,x)}function kc(u,c,x){var E=u[c];(!(lr.call(u,c)&&Rs(E,x))||x===r&&!(c in u))&&Ja(u,c,x)}function Mf(u,c){for(var x=u.length;x--;)if(Rs(u[x][0],c))return x;return-1}function bz(u,c,x,E){return Oo(u,function(P,I,j){c(E,P,x(P),j)}),E}function mA(u,c){return u&&ua(c,vi(c),u)}function Az(u,c){return u&&ua(c,fn(c),u)}function Ja(u,c,x){c=="__proto__"&&xf?xf(u,c,{configurable:!0,enumerable:!0,value:x,writable:!0}):u[c]=x}function Q0(u,c){for(var x=-1,E=c.length,P=ye(E),I=u==null;++x<E;)P[x]=I?r:Oy(u,c[x]);return P}function Nl(u,c,x){return u===u&&(x!==r&&(u=u<=x?u:x),c!==r&&(u=u>=c?u:c)),u}function as(u,c,x,E,P,I){var j,Z=c&p,le=c&f,Ee=c&m;if(x&&(j=P?x(u,E,P,I):x(u)),j!==r)return j;if(!Or(u))return u;var Te=St(u);if(Te){if(j=d4(u),!Z)return dn(u,j)}else{var De=Wi(u),ke=De==ae||De==fe;if(No(u))return UA(u,Z);if(De==F||De==we||ke&&!P){if(j=le||ke?{}:nM(u),!Z)return le?t4(u,Az(j,u)):e4(u,mA(j,u))}else{if(!fr[De])return P?u:{};j=p4(u,De,Z)}}I||(I=new Ds);var et=I.get(u);if(et)return et;I.set(u,j),RM(u)?u.forEach(function(ft){j.add(as(ft,c,x,ft,u,I))}):PM(u)&&u.forEach(function(ft,Nt){j.set(Nt,as(ft,c,x,Nt,u,I))});var pt=Ee?le?gy:my:le?fn:vi,Ct=Te?r:pt(u);return is(Ct||u,function(ft,Nt){Ct&&(Nt=ft,ft=u[Nt]),kc(j,Nt,as(ft,c,x,Nt,u,I))}),j}function Mz(u){var c=vi(u);return function(x){return gA(x,u,c)}}function gA(u,c,x){var E=x.length;if(u==null)return!E;for(u=pr(u);E--;){var P=x[E],I=c[P],j=u[P];if(j===r&&!(P in u)||!I(j))return!1}return!0}function vA(u,c,x){if(typeof u!="function")throw new ns(a);return Yc(function(){u.apply(r,x)},c)}function Hc(u,c,x,E){var P=-1,I=lf,j=!0,Z=u.length,le=[],Ee=c.length;if(!Z)return le;x&&(c=Ar(c,Dn(x))),E?(I=B0,j=!1):c.length>=n&&(I=Nc,j=!1,c=new Rl(c));e:for(;++P<Z;){var Te=u[P],De=x==null?Te:x(Te);if(Te=E||Te!==0?Te:0,j&&De===De){for(var ke=Ee;ke--;)if(c[ke]===De)continue e;le.push(Te)}else I(c,De,E)||le.push(Te)}return le}var Oo=jA(la),yA=jA(Z0,!0);function Ez(u,c){var x=!0;return Oo(u,function(E,P,I){return x=!!c(E,P,I),x}),x}function Ef(u,c,x){for(var E=-1,P=u.length;++E<P;){var I=u[E],j=c(I);if(j!=null&&(Z===r?j===j&&!Nn(j):x(j,Z)))var Z=j,le=I}return le}function Tz(u,c,x,E){var P=u.length;for(x=At(x),x<0&&(x=-x>P?0:P+x),E=E===r||E>P?P:At(E),E<0&&(E+=P),E=x>E?0:IM(E);x<E;)u[x++]=c;return u}function xA(u,c){var x=[];return Oo(u,function(E,P,I){c(E,P,I)&&x.push(E)}),x}function Ci(u,c,x,E,P){var I=-1,j=u.length;for(x||(x=m4),P||(P=[]);++I<j;){var Z=u[I];c>0&&x(Z)?c>1?Ci(Z,c-1,x,E,P):To(P,Z):E||(P[P.length]=Z)}return P}var K0=WA(),wA=WA(!0);function la(u,c){return u&&K0(u,c,vi)}function Z0(u,c){return u&&wA(u,c,vi)}function Tf(u,c){return Eo(c,function(x){return Qa(u[x])})}function Il(u,c){c=Do(c,u);for(var x=0,E=c.length;u!=null&&x<E;)u=u[ha(c[x++])];return x&&x==E?u:r}function _A(u,c,x){var E=c(u);return St(u)?E:To(E,x(u))}function nn(u){return u==null?u===r?Ke:Ae:Pl&&Pl in pr(u)?u4(u):S4(u)}function $0(u,c){return u>c}function Cz(u,c){return u!=null&&lr.call(u,c)}function Lz(u,c){return u!=null&&c in pr(u)}function Oz(u,c,x){return u>=ji(c,x)&&u<di(c,x)}function ey(u,c,x){for(var E=x?B0:lf,P=u[0].length,I=u.length,j=I,Z=ye(I),le=1/0,Ee=[];j--;){var Te=u[j];j&&c&&(Te=Ar(Te,Dn(c))),le=ji(Te.length,le),Z[j]=!x&&(c||P>=120&&Te.length>=120)?new Rl(j&&Te):r}Te=u[0];var De=-1,ke=Z[0];e:for(;++De<P&&Ee.length<le;){var et=Te[De],pt=c?c(et):et;if(et=x||et!==0?et:0,!(ke?Nc(ke,pt):E(Ee,pt,x))){for(j=I;--j;){var Ct=Z[j];if(!(Ct?Nc(Ct,pt):E(u[j],pt,x)))continue e}ke&&ke.push(pt),Ee.push(et)}}return Ee}function Pz(u,c,x,E){return la(u,function(P,I,j){c(E,x(P),I,j)}),E}function Gc(u,c,x){c=Do(c,u),u=lM(u,c);var E=u==null?u:u[ha(ls(c))];return E==null?r:Pn(E,u,x)}function SA(u){return zr(u)&&nn(u)==we}function Dz(u){return zr(u)&&nn(u)==te}function Rz(u){return zr(u)&&nn(u)==re}function Vc(u,c,x,E,P){return u===c?!0:u==null||c==null||!zr(u)&&!zr(c)?u!==u&&c!==c:Nz(u,c,x,E,Vc,P)}function Nz(u,c,x,E,P,I){var j=St(u),Z=St(c),le=j?q:Wi(u),Ee=Z?q:Wi(c);le=le==we?F:le,Ee=Ee==we?F:Ee;var Te=le==F,De=Ee==F,ke=le==Ee;if(ke&&No(u)){if(!No(c))return!1;j=!0,Te=!1}if(ke&&!Te)return I||(I=new Ds),j||Ru(u)?tM(u,c,x,E,P,I):o4(u,c,le,x,E,P,I);if(!(x&v)){var et=Te&&lr.call(u,"__wrapped__"),pt=De&&lr.call(c,"__wrapped__");if(et||pt){var Ct=et?u.value():u,ft=pt?c.value():c;return I||(I=new Ds),P(Ct,ft,x,E,I)}}return ke?(I||(I=new Ds),l4(u,c,x,E,P,I)):!1}function Iz(u){return zr(u)&&Wi(u)==pe}function ty(u,c,x,E){var P=x.length,I=P,j=!E;if(u==null)return!I;for(u=pr(u);P--;){var Z=x[P];if(j&&Z[2]?Z[1]!==u[Z[0]]:!(Z[0]in u))return!1}for(;++P<I;){Z=x[P];var le=Z[0],Ee=u[le],Te=Z[1];if(j&&Z[2]){if(Ee===r&&!(le in u))return!1}else{var De=new Ds;if(E)var ke=E(Ee,Te,le,u,c,De);if(!(ke===r?Vc(Te,Ee,v|w,E,De):ke))return!1}}return!0}function bA(u){if(!Or(u)||v4(u))return!1;var c=Qa(u)?IB:gt;return c.test(zl(u))}function Bz(u){return zr(u)&&nn(u)==Oe}function zz(u){return zr(u)&&Wi(u)==Ce}function Fz(u){return zr(u)&&jf(u.length)&&!!xr[nn(u)]}function AA(u){return typeof u=="function"?u:u==null?mn:typeof u=="object"?St(u)?TA(u[0],u[1]):EA(u):JM(u)}function ry(u){if(!Jc(u))return HB(u);var c=[];for(var x in pr(u))lr.call(u,x)&&x!="constructor"&&c.push(x);return c}function Uz(u){if(!Or(u))return _4(u);var c=Jc(u),x=[];for(var E in u)E=="constructor"&&(c||!lr.call(u,E))||x.push(E);return x}function iy(u,c){return u<c}function MA(u,c){var x=-1,E=pn(u)?ye(u.length):[];return Oo(u,function(P,I,j){E[++x]=c(P,I,j)}),E}function EA(u){var c=yy(u);return c.length==1&&c[0][2]?aM(c[0][0],c[0][1]):function(x){return x===u||ty(x,u,c)}}function TA(u,c){return wy(u)&&sM(c)?aM(ha(u),c):function(x){var E=Oy(x,u);return E===r&&E===c?Py(x,u):Vc(c,E,v|w)}}function Cf(u,c,x,E,P){u!==c&&K0(c,function(I,j){if(P||(P=new Ds),Or(I))kz(u,c,j,x,Cf,E,P);else{var Z=E?E(Sy(u,j),I,j+"",u,c,P):r;Z===r&&(Z=I),X0(u,j,Z)}},fn)}function kz(u,c,x,E,P,I,j){var Z=Sy(u,x),le=Sy(c,x),Ee=j.get(le);if(Ee){X0(u,x,Ee);return}var Te=I?I(Z,le,x+"",u,c,j):r,De=Te===r;if(De){var ke=St(le),et=!ke&&No(le),pt=!ke&&!et&&Ru(le);Te=le,ke||et||pt?St(Z)?Te=Z:jr(Z)?Te=dn(Z):et?(De=!1,Te=UA(le,!0)):pt?(De=!1,Te=kA(le,!0)):Te=[]:qc(le)||Fl(le)?(Te=Z,Fl(Z)?Te=BM(Z):(!Or(Z)||Qa(Z))&&(Te=nM(le))):De=!1}De&&(j.set(le,Te),P(Te,le,E,I,j),j.delete(le)),X0(u,x,Te)}function CA(u,c){var x=u.length;if(!!x)return c+=c<0?x:0,Xa(c,x)?u[c]:r}function LA(u,c,x){c.length?c=Ar(c,function(I){return St(I)?function(j){return Il(j,I.length===1?I[0]:I)}:I}):c=[mn];var E=-1;c=Ar(c,Dn(ct()));var P=MA(u,function(I,j,Z){var le=Ar(c,function(Ee){return Ee(I)});return{criteria:le,index:++E,value:I}});return pB(P,function(I,j){return $z(I,j,x)})}function Hz(u,c){return OA(u,c,function(x,E){return Py(u,E)})}function OA(u,c,x){for(var E=-1,P=c.length,I={};++E<P;){var j=c[E],Z=Il(u,j);x(Z,j)&&jc(I,Do(j,u),Z)}return I}function Gz(u){return function(c){return Il(c,u)}}function ny(u,c,x,E){var P=E?dB:Su,I=-1,j=c.length,Z=u;for(u===c&&(c=dn(c)),x&&(Z=Ar(u,Dn(x)));++I<j;)for(var le=0,Ee=c[I],Te=x?x(Ee):Ee;(le=P(Z,Te,le,E))>-1;)Z!==u&&yf.call(Z,le,1),yf.call(u,le,1);return u}function PA(u,c){for(var x=u?c.length:0,E=x-1;x--;){var P=c[x];if(x==E||P!==I){var I=P;Xa(P)?yf.call(u,P,1):ly(u,P)}}return u}function sy(u,c){return u+_f(cA()*(c-u+1))}function Vz(u,c,x,E){for(var P=-1,I=di(wf((c-u)/(x||1)),0),j=ye(I);I--;)j[E?I:++P]=u,u+=x;return j}function ay(u,c){var x="";if(!u||c<1||c>H)return x;do c%2&&(x+=u),c=_f(c/2),c&&(u+=u);while(c);return x}function Ot(u,c){return by(oM(u,c,mn),u+"")}function jz(u){return fA(Nu(u))}function Wz(u,c){var x=Nu(u);return Ff(x,Nl(c,0,x.length))}function jc(u,c,x,E){if(!Or(u))return u;c=Do(c,u);for(var P=-1,I=c.length,j=I-1,Z=u;Z!=null&&++P<I;){var le=ha(c[P]),Ee=x;if(le==="__proto__"||le==="constructor"||le==="prototype")return u;if(P!=j){var Te=Z[le];Ee=E?E(Te,le,Z):r,Ee===r&&(Ee=Or(Te)?Te:Xa(c[P+1])?[]:{})}kc(Z,le,Ee),Z=Z[le]}return u}var DA=Sf?function(u,c){return Sf.set(u,c),u}:mn,Jz=xf?function(u,c){return xf(u,"toString",{configurable:!0,enumerable:!1,value:Ry(c),writable:!0})}:mn;function Yz(u){return Ff(Nu(u))}function os(u,c,x){var E=-1,P=u.length;c<0&&(c=-c>P?0:P+c),x=x>P?P:x,x<0&&(x+=P),P=c>x?0:x-c>>>0,c>>>=0;for(var I=ye(P);++E<P;)I[E]=u[E+c];return I}function qz(u,c){var x;return Oo(u,function(E,P,I){return x=c(E,P,I),!x}),!!x}function Lf(u,c,x){var E=0,P=u==null?E:u.length;if(typeof c=="number"&&c===c&&P<=ie){for(;E<P;){var I=E+P>>>1,j=u[I];j!==null&&!Nn(j)&&(x?j<=c:j<c)?E=I+1:P=I}return P}return oy(u,c,mn,x)}function oy(u,c,x,E){var P=0,I=u==null?0:u.length;if(I===0)return 0;c=x(c);for(var j=c!==c,Z=c===null,le=Nn(c),Ee=c===r;P<I;){var Te=_f((P+I)/2),De=x(u[Te]),ke=De!==r,et=De===null,pt=De===De,Ct=Nn(De);if(j)var ft=E||pt;else Ee?ft=pt&&(E||ke):Z?ft=pt&&ke&&(E||!et):le?ft=pt&&ke&&!et&&(E||!Ct):et||Ct?ft=!1:ft=E?De<=c:De<c;ft?P=Te+1:I=Te}return ji(I,ee)}function RA(u,c){for(var x=-1,E=u.length,P=0,I=[];++x<E;){var j=u[x],Z=c?c(j):j;if(!x||!Rs(Z,le)){var le=Z;I[P++]=j===0?0:j}}return I}function NA(u){return typeof u=="number"?u:Nn(u)?J:+u}function Rn(u){if(typeof u=="string")return u;if(St(u))return Ar(u,Rn)+"";if(Nn(u))return dA?dA.call(u):"";var c=u+"";return c=="0"&&1/u==-W?"-0":c}function Po(u,c,x){var E=-1,P=lf,I=u.length,j=!0,Z=[],le=Z;if(x)j=!1,P=B0;else if(I>=n){var Ee=c?null:s4(u);if(Ee)return hf(Ee);j=!1,P=Nc,le=new Rl}else le=c?[]:Z;e:for(;++E<I;){var Te=u[E],De=c?c(Te):Te;if(Te=x||Te!==0?Te:0,j&&De===De){for(var ke=le.length;ke--;)if(le[ke]===De)continue e;c&&le.push(De),Z.push(Te)}else P(le,De,x)||(le!==Z&&le.push(De),Z.push(Te))}return Z}function ly(u,c){return c=Do(c,u),u=lM(u,c),u==null||delete u[ha(ls(c))]}function IA(u,c,x,E){return jc(u,c,x(Il(u,c)),E)}function Of(u,c,x,E){for(var P=u.length,I=E?P:-1;(E?I--:++I<P)&&c(u[I],I,u););return x?os(u,E?0:I,E?I+1:P):os(u,E?I+1:0,E?P:I)}function BA(u,c){var x=u;return x instanceof Bt&&(x=x.value()),z0(c,function(E,P){return P.func.apply(P.thisArg,To([E],P.args))},x)}function uy(u,c,x){var E=u.length;if(E<2)return E?Po(u[0]):[];for(var P=-1,I=ye(E);++P<E;)for(var j=u[P],Z=-1;++Z<E;)Z!=P&&(I[P]=Hc(I[P]||j,u[Z],c,x));return Po(Ci(I,1),c,x)}function zA(u,c,x){for(var E=-1,P=u.length,I=c.length,j={};++E<P;){var Z=E<I?c[E]:r;x(j,u[E],Z)}return j}function hy(u){return jr(u)?u:[]}function cy(u){return typeof u=="function"?u:mn}function Do(u,c){return St(u)?u:wy(u,c)?[u]:dM(tr(u))}var Xz=Ot;function Ro(u,c,x){var E=u.length;return x=x===r?E:x,!c&&x>=E?u:os(u,c,x)}var FA=BB||function(u){return Ti.clearTimeout(u)};function UA(u,c){if(c)return u.slice();var x=u.length,E=aA?aA(x):new u.constructor(x);return u.copy(E),E}function dy(u){var c=new u.constructor(u.byteLength);return new gf(c).set(new gf(u)),c}function Qz(u,c){var x=c?dy(u.buffer):u.buffer;return new u.constructor(x,u.byteOffset,u.byteLength)}function Kz(u){var c=new u.constructor(u.source,or.exec(u));return c.lastIndex=u.lastIndex,c}function Zz(u){return Uc?pr(Uc.call(u)):{}}function kA(u,c){var x=c?dy(u.buffer):u.buffer;return new u.constructor(x,u.byteOffset,u.length)}function HA(u,c){if(u!==c){var x=u!==r,E=u===null,P=u===u,I=Nn(u),j=c!==r,Z=c===null,le=c===c,Ee=Nn(c);if(!Z&&!Ee&&!I&&u>c||I&&j&&le&&!Z&&!Ee||E&&j&&le||!x&&le||!P)return 1;if(!E&&!I&&!Ee&&u<c||Ee&&x&&P&&!E&&!I||Z&&x&&P||!j&&P||!le)return-1}return 0}function $z(u,c,x){for(var E=-1,P=u.criteria,I=c.criteria,j=P.length,Z=x.length;++E<j;){var le=HA(P[E],I[E]);if(le){if(E>=Z)return le;var Ee=x[E];return le*(Ee=="desc"?-1:1)}}return u.index-c.index}function GA(u,c,x,E){for(var P=-1,I=u.length,j=x.length,Z=-1,le=c.length,Ee=di(I-j,0),Te=ye(le+Ee),De=!E;++Z<le;)Te[Z]=c[Z];for(;++P<j;)(De||P<I)&&(Te[x[P]]=u[P]);for(;Ee--;)Te[Z++]=u[P++];return Te}function VA(u,c,x,E){for(var P=-1,I=u.length,j=-1,Z=x.length,le=-1,Ee=c.length,Te=di(I-Z,0),De=ye(Te+Ee),ke=!E;++P<Te;)De[P]=u[P];for(var et=P;++le<Ee;)De[et+le]=c[le];for(;++j<Z;)(ke||P<I)&&(De[et+x[j]]=u[P++]);return De}function dn(u,c){var x=-1,E=u.length;for(c||(c=ye(E));++x<E;)c[x]=u[x];return c}function ua(u,c,x,E){var P=!x;x||(x={});for(var I=-1,j=c.length;++I<j;){var Z=c[I],le=E?E(x[Z],u[Z],Z,x,u):r;le===r&&(le=u[Z]),P?Ja(x,Z,le):kc(x,Z,le)}return x}function e4(u,c){return ua(u,xy(u),c)}function t4(u,c){return ua(u,rM(u),c)}function Pf(u,c){return function(x,E){var P=St(x)?aB:bz,I=c?c():{};return P(x,u,ct(E,2),I)}}function Ou(u){return Ot(function(c,x){var E=-1,P=x.length,I=P>1?x[P-1]:r,j=P>2?x[2]:r;for(I=u.length>3&&typeof I=="function"?(P--,I):r,j&&sn(x[0],x[1],j)&&(I=P<3?r:I,P=1),c=pr(c);++E<P;){var Z=x[E];Z&&u(c,Z,E,I)}return c})}function jA(u,c){return function(x,E){if(x==null)return x;if(!pn(x))return u(x,E);for(var P=x.length,I=c?P:-1,j=pr(x);(c?I--:++I<P)&&E(j[I],I,j)!==!1;);return x}}function WA(u){return function(c,x,E){for(var P=-1,I=pr(c),j=E(c),Z=j.length;Z--;){var le=j[u?Z:++P];if(x(I[le],le,I)===!1)break}return c}}function r4(u,c,x){var E=c&S,P=Wc(u);function I(){var j=this&&this!==Ti&&this instanceof I?P:u;return j.apply(E?x:this,arguments)}return I}function JA(u){return function(c){c=tr(c);var x=bu(c)?Ps(c):r,E=x?x[0]:c.charAt(0),P=x?Ro(x,1).join(""):c.slice(1);return E[u]()+P}}function Pu(u){return function(c){return z0(jM(VM(c).replace(JI,"")),u,"")}}function Wc(u){return function(){var c=arguments;switch(c.length){case 0:return new u;case 1:return new u(c[0]);case 2:return new u(c[0],c[1]);case 3:return new u(c[0],c[1],c[2]);case 4:return new u(c[0],c[1],c[2],c[3]);case 5:return new u(c[0],c[1],c[2],c[3],c[4]);case 6:return new u(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new u(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var x=Lu(u.prototype),E=u.apply(x,c);return Or(E)?E:x}}function i4(u,c,x){var E=Wc(u);function P(){for(var I=arguments.length,j=ye(I),Z=I,le=Du(P);Z--;)j[Z]=arguments[Z];var Ee=I<3&&j[0]!==le&&j[I-1]!==le?[]:Co(j,le);if(I-=Ee.length,I<x)return KA(u,c,Df,P.placeholder,r,j,Ee,r,r,x-I);var Te=this&&this!==Ti&&this instanceof P?E:u;return Pn(Te,this,j)}return P}function YA(u){return function(c,x,E){var P=pr(c);if(!pn(c)){var I=ct(x,3);c=vi(c),x=function(Z){return I(P[Z],Z,P)}}var j=u(c,x,E);return j>-1?P[I?c[j]:j]:r}}function qA(u){return qa(function(c){var x=c.length,E=x,P=ss.prototype.thru;for(u&&c.reverse();E--;){var I=c[E];if(typeof I!="function")throw new ns(a);if(P&&!j&&Bf(I)=="wrapper")var j=new ss([],!0)}for(E=j?E:x;++E<x;){I=c[E];var Z=Bf(I),le=Z=="wrapper"?vy(I):r;le&&_y(le[0])&&le[1]==(M|_|T|L)&&!le[4].length&&le[9]==1?j=j[Bf(le[0])].apply(j,le[3]):j=I.length==1&&_y(I)?j[Z]():j.thru(I)}return function(){var Ee=arguments,Te=Ee[0];if(j&&Ee.length==1&&St(Te))return j.plant(Te).value();for(var De=0,ke=x?c[De].apply(this,Ee):Te;++De<x;)ke=c[De].call(this,ke);return ke}})}function Df(u,c,x,E,P,I,j,Z,le,Ee){var Te=c&M,De=c&S,ke=c&y,et=c&(_|b),pt=c&D,Ct=ke?r:Wc(u);function ft(){for(var Nt=arguments.length,Ut=ye(Nt),In=Nt;In--;)Ut[In]=arguments[In];if(et)var an=Du(ft),Bn=mB(Ut,an);if(E&&(Ut=GA(Ut,E,P,et)),I&&(Ut=VA(Ut,I,j,et)),Nt-=Bn,et&&Nt<Ee){var Wr=Co(Ut,an);return KA(u,c,Df,ft.placeholder,x,Ut,Wr,Z,le,Ee-Nt)}var Ns=De?x:this,Za=ke?Ns[u]:u;return Nt=Ut.length,Z?Ut=b4(Ut,Z):pt&&Nt>1&&Ut.reverse(),Te&&le<Nt&&(Ut.length=le),this&&this!==Ti&&this instanceof ft&&(Za=Ct||Wc(Za)),Za.apply(Ns,Ut)}return ft}function XA(u,c){return function(x,E){return Pz(x,u,c(E),{})}}function Rf(u,c){return function(x,E){var P;if(x===r&&E===r)return c;if(x!==r&&(P=x),E!==r){if(P===r)return E;typeof x=="string"||typeof E=="string"?(x=Rn(x),E=Rn(E)):(x=NA(x),E=NA(E)),P=u(x,E)}return P}}function py(u){return qa(function(c){return c=Ar(c,Dn(ct())),Ot(function(x){var E=this;return u(c,function(P){return Pn(P,E,x)})})})}function Nf(u,c){c=c===r?" ":Rn(c);var x=c.length;if(x<2)return x?ay(c,u):c;var E=ay(c,wf(u/Au(c)));return bu(c)?Ro(Ps(E),0,u).join(""):E.slice(0,u)}function n4(u,c,x,E){var P=c&S,I=Wc(u);function j(){for(var Z=-1,le=arguments.length,Ee=-1,Te=E.length,De=ye(Te+le),ke=this&&this!==Ti&&this instanceof j?I:u;++Ee<Te;)De[Ee]=E[Ee];for(;le--;)De[Ee++]=arguments[++Z];return Pn(ke,P?x:this,De)}return j}function QA(u){return function(c,x,E){return E&&typeof E!="number"&&sn(c,x,E)&&(x=E=r),c=Ka(c),x===r?(x=c,c=0):x=Ka(x),E=E===r?c<x?1:-1:Ka(E),Vz(c,x,E,u)}}function If(u){return function(c,x){return typeof c=="string"&&typeof x=="string"||(c=us(c),x=us(x)),u(c,x)}}function KA(u,c,x,E,P,I,j,Z,le,Ee){var Te=c&_,De=Te?j:r,ke=Te?r:j,et=Te?I:r,pt=Te?r:I;c|=Te?T:A,c&=~(Te?A:T),c&g||(c&=~(S|y));var Ct=[u,c,P,et,De,pt,ke,Z,le,Ee],ft=x.apply(r,Ct);return _y(u)&&uM(ft,Ct),ft.placeholder=E,hM(ft,u,c)}function fy(u){var c=ci[u];return function(x,E){if(x=us(x),E=E==null?0:ji(At(E),292),E&&hA(x)){var P=(tr(x)+"e").split("e"),I=c(P[0]+"e"+(+P[1]+E));return P=(tr(I)+"e").split("e"),+(P[0]+"e"+(+P[1]-E))}return c(x)}}var s4=Tu&&1/hf(new Tu([,-0]))[1]==W?function(u){return new Tu(u)}:By;function ZA(u){return function(c){var x=Wi(c);return x==pe?j0(c):x==Ce?SB(c):fB(c,u(c))}}function Ya(u,c,x,E,P,I,j,Z){var le=c&y;if(!le&&typeof u!="function")throw new ns(a);var Ee=E?E.length:0;if(Ee||(c&=~(T|A),E=P=r),j=j===r?j:di(At(j),0),Z=Z===r?Z:At(Z),Ee-=P?P.length:0,c&A){var Te=E,De=P;E=P=r}var ke=le?r:vy(u),et=[u,c,x,E,P,Te,De,I,j,Z];if(ke&&w4(et,ke),u=et[0],c=et[1],x=et[2],E=et[3],P=et[4],Z=et[9]=et[9]===r?le?0:u.length:di(et[9]-Ee,0),!Z&&c&(_|b)&&(c&=~(_|b)),!c||c==S)var pt=r4(u,c,x);else c==_||c==b?pt=i4(u,c,Z):(c==T||c==(S|T))&&!P.length?pt=n4(u,c,x,E):pt=Df.apply(r,et);var Ct=ke?DA:uM;return hM(Ct(pt,et),u,c)}function $A(u,c,x,E){return u===r||Rs(u,Eu[x])&&!lr.call(E,x)?c:u}function eM(u,c,x,E,P,I){return Or(u)&&Or(c)&&(I.set(c,u),Cf(u,c,r,eM,I),I.delete(c)),u}function a4(u){return qc(u)?r:u}function tM(u,c,x,E,P,I){var j=x&v,Z=u.length,le=c.length;if(Z!=le&&!(j&&le>Z))return!1;var Ee=I.get(u),Te=I.get(c);if(Ee&&Te)return Ee==c&&Te==u;var De=-1,ke=!0,et=x&w?new Rl:r;for(I.set(u,c),I.set(c,u);++De<Z;){var pt=u[De],Ct=c[De];if(E)var ft=j?E(Ct,pt,De,c,u,I):E(pt,Ct,De,u,c,I);if(ft!==r){if(ft)continue;ke=!1;break}if(et){if(!F0(c,function(Nt,Ut){if(!Nc(et,Ut)&&(pt===Nt||P(pt,Nt,x,E,I)))return et.push(Ut)})){ke=!1;break}}else if(!(pt===Ct||P(pt,Ct,x,E,I))){ke=!1;break}}return I.delete(u),I.delete(c),ke}function o4(u,c,x,E,P,I,j){switch(x){case Ie:if(u.byteLength!=c.byteLength||u.byteOffset!=c.byteOffset)return!1;u=u.buffer,c=c.buffer;case te:return!(u.byteLength!=c.byteLength||!I(new gf(u),new gf(c)));case me:case re:case xe:return Rs(+u,+c);case ne:return u.name==c.name&&u.message==c.message;case Oe:case Re:return u==c+"";case pe:var Z=j0;case Ce:var le=E&v;if(Z||(Z=hf),u.size!=c.size&&!le)return!1;var Ee=j.get(u);if(Ee)return Ee==c;E|=w,j.set(u,c);var Te=tM(Z(u),Z(c),E,P,I,j);return j.delete(u),Te;case ze:if(Uc)return Uc.call(u)==Uc.call(c)}return!1}function l4(u,c,x,E,P,I){var j=x&v,Z=my(u),le=Z.length,Ee=my(c),Te=Ee.length;if(le!=Te&&!j)return!1;for(var De=le;De--;){var ke=Z[De];if(!(j?ke in c:lr.call(c,ke)))return!1}var et=I.get(u),pt=I.get(c);if(et&&pt)return et==c&&pt==u;var Ct=!0;I.set(u,c),I.set(c,u);for(var ft=j;++De<le;){ke=Z[De];var Nt=u[ke],Ut=c[ke];if(E)var In=j?E(Ut,Nt,ke,c,u,I):E(Nt,Ut,ke,u,c,I);if(!(In===r?Nt===Ut||P(Nt,Ut,x,E,I):In)){Ct=!1;break}ft||(ft=ke=="constructor")}if(Ct&&!ft){var an=u.constructor,Bn=c.constructor;an!=Bn&&"constructor"in u&&"constructor"in c&&!(typeof an=="function"&&an instanceof an&&typeof Bn=="function"&&Bn instanceof Bn)&&(Ct=!1)}return I.delete(u),I.delete(c),Ct}function qa(u){return by(oM(u,r,gM),u+"")}function my(u){return _A(u,vi,xy)}function gy(u){return _A(u,fn,rM)}var vy=Sf?function(u){return Sf.get(u)}:By;function Bf(u){for(var c=u.name+"",x=Cu[c],E=lr.call(Cu,c)?x.length:0;E--;){var P=x[E],I=P.func;if(I==null||I==u)return P.name}return c}function Du(u){var c=lr.call(R,"placeholder")?R:u;return c.placeholder}function ct(){var u=R.iteratee||Ny;return u=u===Ny?AA:u,arguments.length?u(arguments[0],arguments[1]):u}function zf(u,c){var x=u.__data__;return g4(c)?x[typeof c=="string"?"string":"hash"]:x.map}function yy(u){for(var c=vi(u),x=c.length;x--;){var E=c[x],P=u[E];c[x]=[E,P,sM(P)]}return c}function Bl(u,c){var x=xB(u,c);return bA(x)?x:r}function u4(u){var c=lr.call(u,Pl),x=u[Pl];try{u[Pl]=r;var E=!0}catch{}var P=ff.call(u);return E&&(c?u[Pl]=x:delete u[Pl]),P}var xy=J0?function(u){return u==null?[]:(u=pr(u),Eo(J0(u),function(c){return lA.call(u,c)}))}:zy,rM=J0?function(u){for(var c=[];u;)To(c,xy(u)),u=vf(u);return c}:zy,Wi=nn;(Y0&&Wi(new Y0(new ArrayBuffer(1)))!=Ie||Bc&&Wi(new Bc)!=pe||q0&&Wi(q0.resolve())!=B||Tu&&Wi(new Tu)!=Ce||zc&&Wi(new zc)!=We)&&(Wi=function(u){var c=nn(u),x=c==F?u.constructor:r,E=x?zl(x):"";if(E)switch(E){case WB:return Ie;case JB:return pe;case YB:return B;case qB:return Ce;case XB:return We}return c});function h4(u,c,x){for(var E=-1,P=x.length;++E<P;){var I=x[E],j=I.size;switch(I.type){case"drop":u+=j;break;case"dropRight":c-=j;break;case"take":c=ji(c,u+j);break;case"takeRight":u=di(u,c-j);break}}return{start:u,end:c}}function c4(u){var c=u.match(ve);return c?c[1].split(Pe):[]}function iM(u,c,x){c=Do(c,u);for(var E=-1,P=c.length,I=!1;++E<P;){var j=ha(c[E]);if(!(I=u!=null&&x(u,j)))break;u=u[j]}return I||++E!=P?I:(P=u==null?0:u.length,!!P&&jf(P)&&Xa(j,P)&&(St(u)||Fl(u)))}function d4(u){var c=u.length,x=new u.constructor(c);return c&&typeof u[0]=="string"&&lr.call(u,"index")&&(x.index=u.index,x.input=u.input),x}function nM(u){return typeof u.constructor=="function"&&!Jc(u)?Lu(vf(u)):{}}function p4(u,c,x){var E=u.constructor;switch(c){case te:return dy(u);case me:case re:return new E(+u);case Ie:return Qz(u,x);case Me:case je:case Be:case at:case kt:case yr:case Ei:case $t:case gi:return kA(u,x);case pe:return new E;case xe:case Re:return new E(u);case Oe:return Kz(u);case Ce:return new E;case ze:return Zz(u)}}function f4(u,c){var x=c.length;if(!x)return u;var E=x-1;return c[E]=(x>1?"& ":"")+c[E],c=c.join(x>2?", ":" "),u.replace(oe,`{
/* [wrapped with `+c+`] */
`)}function m4(u){return St(u)||Fl(u)||!!(uA&&u&&u[uA])}function Xa(u,c){var x=typeof u;return c=c==null?H:c,!!c&&(x=="number"||x!="symbol"&&es.test(u))&&u>-1&&u%1==0&&u<c}function sn(u,c,x){if(!Or(x))return!1;var E=typeof c;return(E=="number"?pn(x)&&Xa(c,x.length):E=="string"&&c in x)?Rs(x[c],u):!1}function wy(u,c){if(St(u))return!1;var x=typeof u;return x=="number"||x=="symbol"||x=="boolean"||u==null||Nn(u)?!0:Pt.test(u)||!_t.test(u)||c!=null&&u in pr(c)}function g4(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}function _y(u){var c=Bf(u),x=R[c];if(typeof x!="function"||!(c in Bt.prototype))return!1;if(u===x)return!0;var E=vy(x);return!!E&&u===E[0]}function v4(u){return!!sA&&sA in u}var y4=df?Qa:Fy;function Jc(u){var c=u&&u.constructor,x=typeof c=="function"&&c.prototype||Eu;return u===x}function sM(u){return u===u&&!Or(u)}function aM(u,c){return function(x){return x==null?!1:x[u]===c&&(c!==r||u in pr(x))}}function x4(u){var c=Gf(u,function(E){return x.size===h&&x.clear(),E}),x=c.cache;return c}function w4(u,c){var x=u[1],E=c[1],P=x|E,I=P<(S|y|M),j=E==M&&x==_||E==M&&x==L&&u[7].length<=c[8]||E==(M|L)&&c[7].length<=c[8]&&x==_;if(!(I||j))return u;E&S&&(u[2]=c[2],P|=x&S?0:g);var Z=c[3];if(Z){var le=u[3];u[3]=le?GA(le,Z,c[4]):Z,u[4]=le?Co(u[3],d):c[4]}return Z=c[5],Z&&(le=u[5],u[5]=le?VA(le,Z,c[6]):Z,u[6]=le?Co(u[5],d):c[6]),Z=c[7],Z&&(u[7]=Z),E&M&&(u[8]=u[8]==null?c[8]:ji(u[8],c[8])),u[9]==null&&(u[9]=c[9]),u[0]=c[0],u[1]=P,u}function _4(u){var c=[];if(u!=null)for(var x in pr(u))c.push(x);return c}function S4(u){return ff.call(u)}function oM(u,c,x){return c=di(c===r?u.length-1:c,0),function(){for(var E=arguments,P=-1,I=di(E.length-c,0),j=ye(I);++P<I;)j[P]=E[c+P];P=-1;for(var Z=ye(c+1);++P<c;)Z[P]=E[P];return Z[c]=x(j),Pn(u,this,Z)}}function lM(u,c){return c.length<2?u:Il(u,os(c,0,-1))}function b4(u,c){for(var x=u.length,E=ji(c.length,x),P=dn(u);E--;){var I=c[E];u[E]=Xa(I,x)?P[I]:r}return u}function Sy(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}var uM=cM(DA),Yc=FB||function(u,c){return Ti.setTimeout(u,c)},by=cM(Jz);function hM(u,c,x){var E=c+"";return by(u,f4(E,A4(c4(E),x)))}function cM(u){var c=0,x=0;return function(){var E=GB(),P=V-(E-x);if(x=E,P>0){if(++c>=U)return arguments[0]}else c=0;return u.apply(r,arguments)}}function Ff(u,c){var x=-1,E=u.length,P=E-1;for(c=c===r?E:c;++x<c;){var I=sy(x,P),j=u[I];u[I]=u[x],u[x]=j}return u.length=c,u}var dM=x4(function(u){var c=[];return u.charCodeAt(0)===46&&c.push(""),u.replace(qt,function(x,E,P,I){c.push(P?I.replace(mt,"$1"):E||x)}),c});function ha(u){if(typeof u=="string"||Nn(u))return u;var c=u+"";return c=="0"&&1/u==-W?"-0":c}function zl(u){if(u!=null){try{return pf.call(u)}catch{}try{return u+""}catch{}}return""}function A4(u,c){return is(ue,function(x){var E="_."+x[0];c&x[1]&&!lf(u,E)&&u.push(E)}),u.sort()}function pM(u){if(u instanceof Bt)return u.clone();var c=new ss(u.__wrapped__,u.__chain__);return c.__actions__=dn(u.__actions__),c.__index__=u.__index__,c.__values__=u.__values__,c}function M4(u,c,x){(x?sn(u,c,x):c===r)?c=1:c=di(At(c),0);var E=u==null?0:u.length;if(!E||c<1)return[];for(var P=0,I=0,j=ye(wf(E/c));P<E;)j[I++]=os(u,P,P+=c);return j}function E4(u){for(var c=-1,x=u==null?0:u.length,E=0,P=[];++c<x;){var I=u[c];I&&(P[E++]=I)}return P}function T4(){var u=arguments.length;if(!u)return[];for(var c=ye(u-1),x=arguments[0],E=u;E--;)c[E-1]=arguments[E];return To(St(x)?dn(x):[x],Ci(c,1))}var C4=Ot(function(u,c){return jr(u)?Hc(u,Ci(c,1,jr,!0)):[]}),L4=Ot(function(u,c){var x=ls(c);return jr(x)&&(x=r),jr(u)?Hc(u,Ci(c,1,jr,!0),ct(x,2)):[]}),O4=Ot(function(u,c){var x=ls(c);return jr(x)&&(x=r),jr(u)?Hc(u,Ci(c,1,jr,!0),r,x):[]});function P4(u,c,x){var E=u==null?0:u.length;return E?(c=x||c===r?1:At(c),os(u,c<0?0:c,E)):[]}function D4(u,c,x){var E=u==null?0:u.length;return E?(c=x||c===r?1:At(c),c=E-c,os(u,0,c<0?0:c)):[]}function R4(u,c){return u&&u.length?Of(u,ct(c,3),!0,!0):[]}function N4(u,c){return u&&u.length?Of(u,ct(c,3),!0):[]}function I4(u,c,x,E){var P=u==null?0:u.length;return P?(x&&typeof x!="number"&&sn(u,c,x)&&(x=0,E=P),Tz(u,c,x,E)):[]}function fM(u,c,x){var E=u==null?0:u.length;if(!E)return-1;var P=x==null?0:At(x);return P<0&&(P=di(E+P,0)),uf(u,ct(c,3),P)}function mM(u,c,x){var E=u==null?0:u.length;if(!E)return-1;var P=E-1;return x!==r&&(P=At(x),P=x<0?di(E+P,0):ji(P,E-1)),uf(u,ct(c,3),P,!0)}function gM(u){var c=u==null?0:u.length;return c?Ci(u,1):[]}function B4(u){var c=u==null?0:u.length;return c?Ci(u,W):[]}function z4(u,c){var x=u==null?0:u.length;return x?(c=c===r?1:At(c),Ci(u,c)):[]}function F4(u){for(var c=-1,x=u==null?0:u.length,E={};++c<x;){var P=u[c];E[P[0]]=P[1]}return E}function vM(u){return u&&u.length?u[0]:r}function U4(u,c,x){var E=u==null?0:u.length;if(!E)return-1;var P=x==null?0:At(x);return P<0&&(P=di(E+P,0)),Su(u,c,P)}function k4(u){var c=u==null?0:u.length;return c?os(u,0,-1):[]}var H4=Ot(function(u){var c=Ar(u,hy);return c.length&&c[0]===u[0]?ey(c):[]}),G4=Ot(function(u){var c=ls(u),x=Ar(u,hy);return c===ls(x)?c=r:x.pop(),x.length&&x[0]===u[0]?ey(x,ct(c,2)):[]}),V4=Ot(function(u){var c=ls(u),x=Ar(u,hy);return c=typeof c=="function"?c:r,c&&x.pop(),x.length&&x[0]===u[0]?ey(x,r,c):[]});function j4(u,c){return u==null?"":kB.call(u,c)}function ls(u){var c=u==null?0:u.length;return c?u[c-1]:r}function W4(u,c,x){var E=u==null?0:u.length;if(!E)return-1;var P=E;return x!==r&&(P=At(x),P=P<0?di(E+P,0):ji(P,E-1)),c===c?AB(u,c,P):uf(u,Kb,P,!0)}function J4(u,c){return u&&u.length?CA(u,At(c)):r}var Y4=Ot(yM);function yM(u,c){return u&&u.length&&c&&c.length?ny(u,c):u}function q4(u,c,x){return u&&u.length&&c&&c.length?ny(u,c,ct(x,2)):u}function X4(u,c,x){return u&&u.length&&c&&c.length?ny(u,c,r,x):u}var Q4=qa(function(u,c){var x=u==null?0:u.length,E=Q0(u,c);return PA(u,Ar(c,function(P){return Xa(P,x)?+P:P}).sort(HA)),E});function K4(u,c){var x=[];if(!(u&&u.length))return x;var E=-1,P=[],I=u.length;for(c=ct(c,3);++E<I;){var j=u[E];c(j,E,u)&&(x.push(j),P.push(E))}return PA(u,P),x}function Ay(u){return u==null?u:jB.call(u)}function Z4(u,c,x){var E=u==null?0:u.length;return E?(x&&typeof x!="number"&&sn(u,c,x)?(c=0,x=E):(c=c==null?0:At(c),x=x===r?E:At(x)),os(u,c,x)):[]}function $4(u,c){return Lf(u,c)}function eF(u,c,x){return oy(u,c,ct(x,2))}function tF(u,c){var x=u==null?0:u.length;if(x){var E=Lf(u,c);if(E<x&&Rs(u[E],c))return E}return-1}function rF(u,c){return Lf(u,c,!0)}function iF(u,c,x){return oy(u,c,ct(x,2),!0)}function nF(u,c){var x=u==null?0:u.length;if(x){var E=Lf(u,c,!0)-1;if(Rs(u[E],c))return E}return-1}function sF(u){return u&&u.length?RA(u):[]}function aF(u,c){return u&&u.length?RA(u,ct(c,2)):[]}function oF(u){var c=u==null?0:u.length;return c?os(u,1,c):[]}function lF(u,c,x){return u&&u.length?(c=x||c===r?1:At(c),os(u,0,c<0?0:c)):[]}function uF(u,c,x){var E=u==null?0:u.length;return E?(c=x||c===r?1:At(c),c=E-c,os(u,c<0?0:c,E)):[]}function hF(u,c){return u&&u.length?Of(u,ct(c,3),!1,!0):[]}function cF(u,c){return u&&u.length?Of(u,ct(c,3)):[]}var dF=Ot(function(u){return Po(Ci(u,1,jr,!0))}),pF=Ot(function(u){var c=ls(u);return jr(c)&&(c=r),Po(Ci(u,1,jr,!0),ct(c,2))}),fF=Ot(function(u){var c=ls(u);return c=typeof c=="function"?c:r,Po(Ci(u,1,jr,!0),r,c)});function mF(u){return u&&u.length?Po(u):[]}function gF(u,c){return u&&u.length?Po(u,ct(c,2)):[]}function vF(u,c){return c=typeof c=="function"?c:r,u&&u.length?Po(u,r,c):[]}function My(u){if(!(u&&u.length))return[];var c=0;return u=Eo(u,function(x){if(jr(x))return c=di(x.length,c),!0}),G0(c,function(x){return Ar(u,U0(x))})}function xM(u,c){if(!(u&&u.length))return[];var x=My(u);return c==null?x:Ar(x,function(E){return Pn(c,r,E)})}var yF=Ot(function(u,c){return jr(u)?Hc(u,c):[]}),xF=Ot(function(u){return uy(Eo(u,jr))}),wF=Ot(function(u){var c=ls(u);return jr(c)&&(c=r),uy(Eo(u,jr),ct(c,2))}),_F=Ot(function(u){var c=ls(u);return c=typeof c=="function"?c:r,uy(Eo(u,jr),r,c)}),SF=Ot(My);function bF(u,c){return zA(u||[],c||[],kc)}function AF(u,c){return zA(u||[],c||[],jc)}var MF=Ot(function(u){var c=u.length,x=c>1?u[c-1]:r;return x=typeof x=="function"?(u.pop(),x):r,xM(u,x)});function wM(u){var c=R(u);return c.__chain__=!0,c}function EF(u,c){return c(u),u}function Uf(u,c){return c(u)}var TF=qa(function(u){var c=u.length,x=c?u[0]:0,E=this.__wrapped__,P=function(I){return Q0(I,u)};return c>1||this.__actions__.length||!(E instanceof Bt)||!Xa(x)?this.thru(P):(E=E.slice(x,+x+(c?1:0)),E.__actions__.push({func:Uf,args:[P],thisArg:r}),new ss(E,this.__chain__).thru(function(I){return c&&!I.length&&I.push(r),I}))});function CF(){return wM(this)}function LF(){return new ss(this.value(),this.__chain__)}function OF(){this.__values__===r&&(this.__values__=NM(this.value()));var u=this.__index__>=this.__values__.length,c=u?r:this.__values__[this.__index__++];return{done:u,value:c}}function PF(){return this}function DF(u){for(var c,x=this;x instanceof Af;){var E=pM(x);E.__index__=0,E.__values__=r,c?P.__wrapped__=E:c=E;var P=E;x=x.__wrapped__}return P.__wrapped__=u,c}function RF(){var u=this.__wrapped__;if(u instanceof Bt){var c=u;return this.__actions__.length&&(c=new Bt(this)),c=c.reverse(),c.__actions__.push({func:Uf,args:[Ay],thisArg:r}),new ss(c,this.__chain__)}return this.thru(Ay)}function NF(){return BA(this.__wrapped__,this.__actions__)}var IF=Pf(function(u,c,x){lr.call(u,x)?++u[x]:Ja(u,x,1)});function BF(u,c,x){var E=St(u)?Xb:Ez;return x&&sn(u,c,x)&&(c=r),E(u,ct(c,3))}function zF(u,c){var x=St(u)?Eo:xA;return x(u,ct(c,3))}var FF=YA(fM),UF=YA(mM);function kF(u,c){return Ci(kf(u,c),1)}function HF(u,c){return Ci(kf(u,c),W)}function GF(u,c,x){return x=x===r?1:At(x),Ci(kf(u,c),x)}function _M(u,c){var x=St(u)?is:Oo;return x(u,ct(c,3))}function SM(u,c){var x=St(u)?oB:yA;return x(u,ct(c,3))}var VF=Pf(function(u,c,x){lr.call(u,x)?u[x].push(c):Ja(u,x,[c])});function jF(u,c,x,E){u=pn(u)?u:Nu(u),x=x&&!E?At(x):0;var P=u.length;return x<0&&(x=di(P+x,0)),Wf(u)?x<=P&&u.indexOf(c,x)>-1:!!P&&Su(u,c,x)>-1}var WF=Ot(function(u,c,x){var E=-1,P=typeof c=="function",I=pn(u)?ye(u.length):[];return Oo(u,function(j){I[++E]=P?Pn(c,j,x):Gc(j,c,x)}),I}),JF=Pf(function(u,c,x){Ja(u,x,c)});function kf(u,c){var x=St(u)?Ar:MA;return x(u,ct(c,3))}function YF(u,c,x,E){return u==null?[]:(St(c)||(c=c==null?[]:[c]),x=E?r:x,St(x)||(x=x==null?[]:[x]),LA(u,c,x))}var qF=Pf(function(u,c,x){u[x?0:1].push(c)},function(){return[[],[]]});function XF(u,c,x){var E=St(u)?z0:$b,P=arguments.length<3;return E(u,ct(c,4),x,P,Oo)}function QF(u,c,x){var E=St(u)?lB:$b,P=arguments.length<3;return E(u,ct(c,4),x,P,yA)}function KF(u,c){var x=St(u)?Eo:xA;return x(u,Vf(ct(c,3)))}function ZF(u){var c=St(u)?fA:jz;return c(u)}function $F(u,c,x){(x?sn(u,c,x):c===r)?c=1:c=At(c);var E=St(u)?_z:Wz;return E(u,c)}function eU(u){var c=St(u)?Sz:Yz;return c(u)}function tU(u){if(u==null)return 0;if(pn(u))return Wf(u)?Au(u):u.length;var c=Wi(u);return c==pe||c==Ce?u.size:ry(u).length}function rU(u,c,x){var E=St(u)?F0:qz;return x&&sn(u,c,x)&&(c=r),E(u,ct(c,3))}var iU=Ot(function(u,c){if(u==null)return[];var x=c.length;return x>1&&sn(u,c[0],c[1])?c=[]:x>2&&sn(c[0],c[1],c[2])&&(c=[c[0]]),LA(u,Ci(c,1),[])}),Hf=zB||function(){return Ti.Date.now()};function nU(u,c){if(typeof c!="function")throw new ns(a);return u=At(u),function(){if(--u<1)return c.apply(this,arguments)}}function bM(u,c,x){return c=x?r:c,c=u&&c==null?u.length:c,Ya(u,M,r,r,r,r,c)}function AM(u,c){var x;if(typeof c!="function")throw new ns(a);return u=At(u),function(){return--u>0&&(x=c.apply(this,arguments)),u<=1&&(c=r),x}}var Ey=Ot(function(u,c,x){var E=S;if(x.length){var P=Co(x,Du(Ey));E|=T}return Ya(u,E,c,x,P)}),MM=Ot(function(u,c,x){var E=S|y;if(x.length){var P=Co(x,Du(MM));E|=T}return Ya(c,E,u,x,P)});function EM(u,c,x){c=x?r:c;var E=Ya(u,_,r,r,r,r,r,c);return E.placeholder=EM.placeholder,E}function TM(u,c,x){c=x?r:c;var E=Ya(u,b,r,r,r,r,r,c);return E.placeholder=TM.placeholder,E}function CM(u,c,x){var E,P,I,j,Z,le,Ee=0,Te=!1,De=!1,ke=!0;if(typeof u!="function")throw new ns(a);c=us(c)||0,Or(x)&&(Te=!!x.leading,De="maxWait"in x,I=De?di(us(x.maxWait)||0,c):I,ke="trailing"in x?!!x.trailing:ke);function et(Wr){var Ns=E,Za=P;return E=P=r,Ee=Wr,j=u.apply(Za,Ns),j}function pt(Wr){return Ee=Wr,Z=Yc(Nt,c),Te?et(Wr):j}function Ct(Wr){var Ns=Wr-le,Za=Wr-Ee,YM=c-Ns;return De?ji(YM,I-Za):YM}function ft(Wr){var Ns=Wr-le,Za=Wr-Ee;return le===r||Ns>=c||Ns<0||De&&Za>=I}function Nt(){var Wr=Hf();if(ft(Wr))return Ut(Wr);Z=Yc(Nt,Ct(Wr))}function Ut(Wr){return Z=r,ke&&E?et(Wr):(E=P=r,j)}function In(){Z!==r&&FA(Z),Ee=0,E=le=P=Z=r}function an(){return Z===r?j:Ut(Hf())}function Bn(){var Wr=Hf(),Ns=ft(Wr);if(E=arguments,P=this,le=Wr,Ns){if(Z===r)return pt(le);if(De)return FA(Z),Z=Yc(Nt,c),et(le)}return Z===r&&(Z=Yc(Nt,c)),j}return Bn.cancel=In,Bn.flush=an,Bn}var sU=Ot(function(u,c){return vA(u,1,c)}),aU=Ot(function(u,c,x){return vA(u,us(c)||0,x)});function oU(u){return Ya(u,D)}function Gf(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new ns(a);var x=function(){var E=arguments,P=c?c.apply(this,E):E[0],I=x.cache;if(I.has(P))return I.get(P);var j=u.apply(this,E);return x.cache=I.set(P,j)||I,j};return x.cache=new(Gf.Cache||Wa),x}Gf.Cache=Wa;function Vf(u){if(typeof u!="function")throw new ns(a);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}function lU(u){return AM(2,u)}var uU=Xz(function(u,c){c=c.length==1&&St(c[0])?Ar(c[0],Dn(ct())):Ar(Ci(c,1),Dn(ct()));var x=c.length;return Ot(function(E){for(var P=-1,I=ji(E.length,x);++P<I;)E[P]=c[P].call(this,E[P]);return Pn(u,this,E)})}),Ty=Ot(function(u,c){var x=Co(c,Du(Ty));return Ya(u,T,r,c,x)}),LM=Ot(function(u,c){var x=Co(c,Du(LM));return Ya(u,A,r,c,x)}),hU=qa(function(u,c){return Ya(u,L,r,r,r,c)});function cU(u,c){if(typeof u!="function")throw new ns(a);return c=c===r?c:At(c),Ot(u,c)}function dU(u,c){if(typeof u!="function")throw new ns(a);return c=c==null?0:di(At(c),0),Ot(function(x){var E=x[c],P=Ro(x,0,c);return E&&To(P,E),Pn(u,this,P)})}function pU(u,c,x){var E=!0,P=!0;if(typeof u!="function")throw new ns(a);return Or(x)&&(E="leading"in x?!!x.leading:E,P="trailing"in x?!!x.trailing:P),CM(u,c,{leading:E,maxWait:c,trailing:P})}function fU(u){return bM(u,1)}function mU(u,c){return Ty(cy(c),u)}function gU(){if(!arguments.length)return[];var u=arguments[0];return St(u)?u:[u]}function vU(u){return as(u,m)}function yU(u,c){return c=typeof c=="function"?c:r,as(u,m,c)}function xU(u){return as(u,p|m)}function wU(u,c){return c=typeof c=="function"?c:r,as(u,p|m,c)}function _U(u,c){return c==null||gA(u,c,vi(c))}function Rs(u,c){return u===c||u!==u&&c!==c}var SU=If($0),bU=If(function(u,c){return u>=c}),Fl=SA(function(){return arguments}())?SA:function(u){return zr(u)&&lr.call(u,"callee")&&!lA.call(u,"callee")},St=ye.isArray,AU=Vb?Dn(Vb):Dz;function pn(u){return u!=null&&jf(u.length)&&!Qa(u)}function jr(u){return zr(u)&&pn(u)}function MU(u){return u===!0||u===!1||zr(u)&&nn(u)==me}var No=UB||Fy,EU=jb?Dn(jb):Rz;function TU(u){return zr(u)&&u.nodeType===1&&!qc(u)}function CU(u){if(u==null)return!0;if(pn(u)&&(St(u)||typeof u=="string"||typeof u.splice=="function"||No(u)||Ru(u)||Fl(u)))return!u.length;var c=Wi(u);if(c==pe||c==Ce)return!u.size;if(Jc(u))return!ry(u).length;for(var x in u)if(lr.call(u,x))return!1;return!0}function LU(u,c){return Vc(u,c)}function OU(u,c,x){x=typeof x=="function"?x:r;var E=x?x(u,c):r;return E===r?Vc(u,c,r,x):!!E}function Cy(u){if(!zr(u))return!1;var c=nn(u);return c==ne||c==K||typeof u.message=="string"&&typeof u.name=="string"&&!qc(u)}function PU(u){return typeof u=="number"&&hA(u)}function Qa(u){if(!Or(u))return!1;var c=nn(u);return c==ae||c==fe||c==Se||c==de}function OM(u){return typeof u=="number"&&u==At(u)}function jf(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=H}function Or(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}function zr(u){return u!=null&&typeof u=="object"}var PM=Wb?Dn(Wb):Iz;function DU(u,c){return u===c||ty(u,c,yy(c))}function RU(u,c,x){return x=typeof x=="function"?x:r,ty(u,c,yy(c),x)}function NU(u){return DM(u)&&u!=+u}function IU(u){if(y4(u))throw new wt(s);return bA(u)}function BU(u){return u===null}function zU(u){return u==null}function DM(u){return typeof u=="number"||zr(u)&&nn(u)==xe}function qc(u){if(!zr(u)||nn(u)!=F)return!1;var c=vf(u);if(c===null)return!0;var x=lr.call(c,"constructor")&&c.constructor;return typeof x=="function"&&x instanceof x&&pf.call(x)==RB}var Ly=Jb?Dn(Jb):Bz;function FU(u){return OM(u)&&u>=-H&&u<=H}var RM=Yb?Dn(Yb):zz;function Wf(u){return typeof u=="string"||!St(u)&&zr(u)&&nn(u)==Re}function Nn(u){return typeof u=="symbol"||zr(u)&&nn(u)==ze}var Ru=qb?Dn(qb):Fz;function UU(u){return u===r}function kU(u){return zr(u)&&Wi(u)==We}function HU(u){return zr(u)&&nn(u)==qe}var GU=If(iy),VU=If(function(u,c){return u<=c});function NM(u){if(!u)return[];if(pn(u))return Wf(u)?Ps(u):dn(u);if(Ic&&u[Ic])return _B(u[Ic]());var c=Wi(u),x=c==pe?j0:c==Ce?hf:Nu;return x(u)}function Ka(u){if(!u)return u===0?u:0;if(u=us(u),u===W||u===-W){var c=u<0?-1:1;return c*X}return u===u?u:0}function At(u){var c=Ka(u),x=c%1;return c===c?x?c-x:c:0}function IM(u){return u?Nl(At(u),0,Y):0}function us(u){if(typeof u=="number")return u;if(Nn(u))return J;if(Or(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=Or(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=eA(u);var x=Dt.test(u);return x||Os.test(u)?nB(u.slice(2),x?2:8):bt.test(u)?J:+u}function BM(u){return ua(u,fn(u))}function jU(u){return u?Nl(At(u),-H,H):u===0?u:0}function tr(u){return u==null?"":Rn(u)}var WU=Ou(function(u,c){if(Jc(c)||pn(c)){ua(c,vi(c),u);return}for(var x in c)lr.call(c,x)&&kc(u,x,c[x])}),zM=Ou(function(u,c){ua(c,fn(c),u)}),Jf=Ou(function(u,c,x,E){ua(c,fn(c),u,E)}),JU=Ou(function(u,c,x,E){ua(c,vi(c),u,E)}),YU=qa(Q0);function qU(u,c){var x=Lu(u);return c==null?x:mA(x,c)}var XU=Ot(function(u,c){u=pr(u);var x=-1,E=c.length,P=E>2?c[2]:r;for(P&&sn(c[0],c[1],P)&&(E=1);++x<E;)for(var I=c[x],j=fn(I),Z=-1,le=j.length;++Z<le;){var Ee=j[Z],Te=u[Ee];(Te===r||Rs(Te,Eu[Ee])&&!lr.call(u,Ee))&&(u[Ee]=I[Ee])}return u}),QU=Ot(function(u){return u.push(r,eM),Pn(FM,r,u)});function KU(u,c){return Qb(u,ct(c,3),la)}function ZU(u,c){return Qb(u,ct(c,3),Z0)}function $U(u,c){return u==null?u:K0(u,ct(c,3),fn)}function ek(u,c){return u==null?u:wA(u,ct(c,3),fn)}function tk(u,c){return u&&la(u,ct(c,3))}function rk(u,c){return u&&Z0(u,ct(c,3))}function ik(u){return u==null?[]:Tf(u,vi(u))}function nk(u){return u==null?[]:Tf(u,fn(u))}function Oy(u,c,x){var E=u==null?r:Il(u,c);return E===r?x:E}function sk(u,c){return u!=null&&iM(u,c,Cz)}function Py(u,c){return u!=null&&iM(u,c,Lz)}var ak=XA(function(u,c,x){c!=null&&typeof c.toString!="function"&&(c=ff.call(c)),u[c]=x},Ry(mn)),ok=XA(function(u,c,x){c!=null&&typeof c.toString!="function"&&(c=ff.call(c)),lr.call(u,c)?u[c].push(x):u[c]=[x]},ct),lk=Ot(Gc);function vi(u){return pn(u)?pA(u):ry(u)}function fn(u){return pn(u)?pA(u,!0):Uz(u)}function uk(u,c){var x={};return c=ct(c,3),la(u,function(E,P,I){Ja(x,c(E,P,I),E)}),x}function hk(u,c){var x={};return c=ct(c,3),la(u,function(E,P,I){Ja(x,P,c(E,P,I))}),x}var ck=Ou(function(u,c,x){Cf(u,c,x)}),FM=Ou(function(u,c,x,E){Cf(u,c,x,E)}),dk=qa(function(u,c){var x={};if(u==null)return x;var E=!1;c=Ar(c,function(I){return I=Do(I,u),E||(E=I.length>1),I}),ua(u,gy(u),x),E&&(x=as(x,p|f|m,a4));for(var P=c.length;P--;)ly(x,c[P]);return x});function pk(u,c){return UM(u,Vf(ct(c)))}var fk=qa(function(u,c){return u==null?{}:Hz(u,c)});function UM(u,c){if(u==null)return{};var x=Ar(gy(u),function(E){return[E]});return c=ct(c),OA(u,x,function(E,P){return c(E,P[0])})}function mk(u,c,x){c=Do(c,u);var E=-1,P=c.length;for(P||(P=1,u=r);++E<P;){var I=u==null?r:u[ha(c[E])];I===r&&(E=P,I=x),u=Qa(I)?I.call(u):I}return u}function gk(u,c,x){return u==null?u:jc(u,c,x)}function vk(u,c,x,E){return E=typeof E=="function"?E:r,u==null?u:jc(u,c,x,E)}var kM=ZA(vi),HM=ZA(fn);function yk(u,c,x){var E=St(u),P=E||No(u)||Ru(u);if(c=ct(c,4),x==null){var I=u&&u.constructor;P?x=E?new I:[]:Or(u)?x=Qa(I)?Lu(vf(u)):{}:x={}}return(P?is:la)(u,function(j,Z,le){return c(x,j,Z,le)}),x}function xk(u,c){return u==null?!0:ly(u,c)}function wk(u,c,x){return u==null?u:IA(u,c,cy(x))}function _k(u,c,x,E){return E=typeof E=="function"?E:r,u==null?u:IA(u,c,cy(x),E)}function Nu(u){return u==null?[]:V0(u,vi(u))}function Sk(u){return u==null?[]:V0(u,fn(u))}function bk(u,c,x){return x===r&&(x=c,c=r),x!==r&&(x=us(x),x=x===x?x:0),c!==r&&(c=us(c),c=c===c?c:0),Nl(us(u),c,x)}function Ak(u,c,x){return c=Ka(c),x===r?(x=c,c=0):x=Ka(x),u=us(u),Oz(u,c,x)}function Mk(u,c,x){if(x&&typeof x!="boolean"&&sn(u,c,x)&&(c=x=r),x===r&&(typeof c=="boolean"?(x=c,c=r):typeof u=="boolean"&&(x=u,u=r)),u===r&&c===r?(u=0,c=1):(u=Ka(u),c===r?(c=u,u=0):c=Ka(c)),u>c){var E=u;u=c,c=E}if(x||u%1||c%1){var P=cA();return ji(u+P*(c-u+iB("1e-"+((P+"").length-1))),c)}return sy(u,c)}var Ek=Pu(function(u,c,x){return c=c.toLowerCase(),u+(x?GM(c):c)});function GM(u){return Dy(tr(u).toLowerCase())}function VM(u){return u=tr(u),u&&u.replace(oa,gB).replace(YI,"")}function Tk(u,c,x){u=tr(u),c=Rn(c);var E=u.length;x=x===r?E:Nl(At(x),0,E);var P=x;return x-=c.length,x>=0&&u.slice(x,P)==c}function Ck(u){return u=tr(u),u&&ei.test(u)?u.replace(Lr,vB):u}function Lk(u){return u=tr(u),u&&er.test(u)?u.replace(Ht,"\\$&"):u}var Ok=Pu(function(u,c,x){return u+(x?"-":"")+c.toLowerCase()}),Pk=Pu(function(u,c,x){return u+(x?" ":"")+c.toLowerCase()}),Dk=JA("toLowerCase");function Rk(u,c,x){u=tr(u),c=At(c);var E=c?Au(u):0;if(!c||E>=c)return u;var P=(c-E)/2;return Nf(_f(P),x)+u+Nf(wf(P),x)}function Nk(u,c,x){u=tr(u),c=At(c);var E=c?Au(u):0;return c&&E<c?u+Nf(c-E,x):u}function Ik(u,c,x){u=tr(u),c=At(c);var E=c?Au(u):0;return c&&E<c?Nf(c-E,x)+u:u}function Bk(u,c,x){return x||c==null?c=0:c&&(c=+c),VB(tr(u).replace(z,""),c||0)}function zk(u,c,x){return(x?sn(u,c,x):c===r)?c=1:c=At(c),ay(tr(u),c)}function Fk(){var u=arguments,c=tr(u[0]);return u.length<3?c:c.replace(u[1],u[2])}var Uk=Pu(function(u,c,x){return u+(x?"_":"")+c.toLowerCase()});function kk(u,c,x){return x&&typeof x!="number"&&sn(u,c,x)&&(c=x=r),x=x===r?Y:x>>>0,x?(u=tr(u),u&&(typeof c=="string"||c!=null&&!Ly(c))&&(c=Rn(c),!c&&bu(u))?Ro(Ps(u),0,x):u.split(c,x)):[]}var Hk=Pu(function(u,c,x){return u+(x?" ":"")+Dy(c)});function Gk(u,c,x){return u=tr(u),x=x==null?0:Nl(At(x),0,u.length),c=Rn(c),u.slice(x,x+c.length)==c}function Vk(u,c,x){var E=R.templateSettings;x&&sn(u,c,x)&&(c=r),u=tr(u),c=Jf({},c,E,$A);var P=Jf({},c.imports,E.imports,$A),I=vi(P),j=V0(P,I),Z,le,Ee=0,Te=c.interpolate||Vi,De="__p += '",ke=W0((c.escape||Vi).source+"|"+Te.source+"|"+(Te===xt?Tt:Vi).source+"|"+(c.evaluate||Vi).source+"|$","g"),et="//# sourceURL="+(lr.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ZI+"]")+`
`;u.replace(ke,function(ft,Nt,Ut,In,an,Bn){return Ut||(Ut=In),De+=u.slice(Ee,Bn).replace(Va,yB),Nt&&(Z=!0,De+=`' +
__e(`+Nt+`) +
'`),an&&(le=!0,De+=`';
`+an+`;
__p += '`),Ut&&(De+=`' +
((__t = (`+Ut+`)) == null ? '' : __t) +
'`),Ee=Bn+ft.length,ft}),De+=`';
`;var pt=lr.call(c,"variable")&&c.variable;if(!pt)De=`with (obj) {
`+De+`
}
`;else if(Xe.test(pt))throw new wt(o);De=(le?De.replace(ki,""):De).replace(aa,"$1").replace(Hi,"$1;"),De="function("+(pt||"obj")+`) {
`+(pt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var Ct=WM(function(){return Kt(I,et+"return "+De).apply(r,j)});if(Ct.source=De,Cy(Ct))throw Ct;return Ct}function jk(u){return tr(u).toLowerCase()}function Wk(u){return tr(u).toUpperCase()}function Jk(u,c,x){if(u=tr(u),u&&(x||c===r))return eA(u);if(!u||!(c=Rn(c)))return u;var E=Ps(u),P=Ps(c),I=tA(E,P),j=rA(E,P)+1;return Ro(E,I,j).join("")}function Yk(u,c,x){if(u=tr(u),u&&(x||c===r))return u.slice(0,nA(u)+1);if(!u||!(c=Rn(c)))return u;var E=Ps(u),P=rA(E,Ps(c))+1;return Ro(E,0,P).join("")}function qk(u,c,x){if(u=tr(u),u&&(x||c===r))return u.replace(z,"");if(!u||!(c=Rn(c)))return u;var E=Ps(u),P=tA(E,Ps(c));return Ro(E,P).join("")}function Xk(u,c){var x=C,E=N;if(Or(c)){var P="separator"in c?c.separator:P;x="length"in c?At(c.length):x,E="omission"in c?Rn(c.omission):E}u=tr(u);var I=u.length;if(bu(u)){var j=Ps(u);I=j.length}if(x>=I)return u;var Z=x-Au(E);if(Z<1)return E;var le=j?Ro(j,0,Z).join(""):u.slice(0,Z);if(P===r)return le+E;if(j&&(Z+=le.length-Z),Ly(P)){if(u.slice(Z).search(P)){var Ee,Te=le;for(P.global||(P=W0(P.source,tr(or.exec(P))+"g")),P.lastIndex=0;Ee=P.exec(Te);)var De=Ee.index;le=le.slice(0,De===r?Z:De)}}else if(u.indexOf(Rn(P),Z)!=Z){var ke=le.lastIndexOf(P);ke>-1&&(le=le.slice(0,ke))}return le+E}function Qk(u){return u=tr(u),u&&Gi.test(u)?u.replace(Ls,MB):u}var Kk=Pu(function(u,c,x){return u+(x?" ":"")+c.toUpperCase()}),Dy=JA("toUpperCase");function jM(u,c,x){return u=tr(u),c=x?r:c,c===r?wB(u)?CB(u):cB(u):u.match(c)||[]}var WM=Ot(function(u,c){try{return Pn(u,r,c)}catch(x){return Cy(x)?x:new wt(x)}}),Zk=qa(function(u,c){return is(c,function(x){x=ha(x),Ja(u,x,Ey(u[x],u))}),u});function $k(u){var c=u==null?0:u.length,x=ct();return u=c?Ar(u,function(E){if(typeof E[1]!="function")throw new ns(a);return[x(E[0]),E[1]]}):[],Ot(function(E){for(var P=-1;++P<c;){var I=u[P];if(Pn(I[0],this,E))return Pn(I[1],this,E)}})}function eH(u){return Mz(as(u,p))}function Ry(u){return function(){return u}}function tH(u,c){return u==null||u!==u?c:u}var rH=qA(),iH=qA(!0);function mn(u){return u}function Ny(u){return AA(typeof u=="function"?u:as(u,p))}function nH(u){return EA(as(u,p))}function sH(u,c){return TA(u,as(c,p))}var aH=Ot(function(u,c){return function(x){return Gc(x,u,c)}}),oH=Ot(function(u,c){return function(x){return Gc(u,x,c)}});function Iy(u,c,x){var E=vi(c),P=Tf(c,E);x==null&&!(Or(c)&&(P.length||!E.length))&&(x=c,c=u,u=this,P=Tf(c,vi(c)));var I=!(Or(x)&&"chain"in x)||!!x.chain,j=Qa(u);return is(P,function(Z){var le=c[Z];u[Z]=le,j&&(u.prototype[Z]=function(){var Ee=this.__chain__;if(I||Ee){var Te=u(this.__wrapped__),De=Te.__actions__=dn(this.__actions__);return De.push({func:le,args:arguments,thisArg:u}),Te.__chain__=Ee,Te}return le.apply(u,To([this.value()],arguments))})}),u}function lH(){return Ti._===this&&(Ti._=NB),this}function By(){}function uH(u){return u=At(u),Ot(function(c){return CA(c,u)})}var hH=py(Ar),cH=py(Xb),dH=py(F0);function JM(u){return wy(u)?U0(ha(u)):Gz(u)}function pH(u){return function(c){return u==null?r:Il(u,c)}}var fH=QA(),mH=QA(!0);function zy(){return[]}function Fy(){return!1}function gH(){return{}}function vH(){return""}function yH(){return!0}function xH(u,c){if(u=At(u),u<1||u>H)return[];var x=Y,E=ji(u,Y);c=ct(c),u-=Y;for(var P=G0(E,c);++x<u;)c(x);return P}function wH(u){return St(u)?Ar(u,ha):Nn(u)?[u]:dn(dM(tr(u)))}function _H(u){var c=++DB;return tr(u)+c}var SH=Rf(function(u,c){return u+c},0),bH=fy("ceil"),AH=Rf(function(u,c){return u/c},1),MH=fy("floor");function EH(u){return u&&u.length?Ef(u,mn,$0):r}function TH(u,c){return u&&u.length?Ef(u,ct(c,2),$0):r}function CH(u){return Zb(u,mn)}function LH(u,c){return Zb(u,ct(c,2))}function OH(u){return u&&u.length?Ef(u,mn,iy):r}function PH(u,c){return u&&u.length?Ef(u,ct(c,2),iy):r}var DH=Rf(function(u,c){return u*c},1),RH=fy("round"),NH=Rf(function(u,c){return u-c},0);function IH(u){return u&&u.length?H0(u,mn):0}function BH(u,c){return u&&u.length?H0(u,ct(c,2)):0}return R.after=nU,R.ary=bM,R.assign=WU,R.assignIn=zM,R.assignInWith=Jf,R.assignWith=JU,R.at=YU,R.before=AM,R.bind=Ey,R.bindAll=Zk,R.bindKey=MM,R.castArray=gU,R.chain=wM,R.chunk=M4,R.compact=E4,R.concat=T4,R.cond=$k,R.conforms=eH,R.constant=Ry,R.countBy=IF,R.create=qU,R.curry=EM,R.curryRight=TM,R.debounce=CM,R.defaults=XU,R.defaultsDeep=QU,R.defer=sU,R.delay=aU,R.difference=C4,R.differenceBy=L4,R.differenceWith=O4,R.drop=P4,R.dropRight=D4,R.dropRightWhile=R4,R.dropWhile=N4,R.fill=I4,R.filter=zF,R.flatMap=kF,R.flatMapDeep=HF,R.flatMapDepth=GF,R.flatten=gM,R.flattenDeep=B4,R.flattenDepth=z4,R.flip=oU,R.flow=rH,R.flowRight=iH,R.fromPairs=F4,R.functions=ik,R.functionsIn=nk,R.groupBy=VF,R.initial=k4,R.intersection=H4,R.intersectionBy=G4,R.intersectionWith=V4,R.invert=ak,R.invertBy=ok,R.invokeMap=WF,R.iteratee=Ny,R.keyBy=JF,R.keys=vi,R.keysIn=fn,R.map=kf,R.mapKeys=uk,R.mapValues=hk,R.matches=nH,R.matchesProperty=sH,R.memoize=Gf,R.merge=ck,R.mergeWith=FM,R.method=aH,R.methodOf=oH,R.mixin=Iy,R.negate=Vf,R.nthArg=uH,R.omit=dk,R.omitBy=pk,R.once=lU,R.orderBy=YF,R.over=hH,R.overArgs=uU,R.overEvery=cH,R.overSome=dH,R.partial=Ty,R.partialRight=LM,R.partition=qF,R.pick=fk,R.pickBy=UM,R.property=JM,R.propertyOf=pH,R.pull=Y4,R.pullAll=yM,R.pullAllBy=q4,R.pullAllWith=X4,R.pullAt=Q4,R.range=fH,R.rangeRight=mH,R.rearg=hU,R.reject=KF,R.remove=K4,R.rest=cU,R.reverse=Ay,R.sampleSize=$F,R.set=gk,R.setWith=vk,R.shuffle=eU,R.slice=Z4,R.sortBy=iU,R.sortedUniq=sF,R.sortedUniqBy=aF,R.split=kk,R.spread=dU,R.tail=oF,R.take=lF,R.takeRight=uF,R.takeRightWhile=hF,R.takeWhile=cF,R.tap=EF,R.throttle=pU,R.thru=Uf,R.toArray=NM,R.toPairs=kM,R.toPairsIn=HM,R.toPath=wH,R.toPlainObject=BM,R.transform=yk,R.unary=fU,R.union=dF,R.unionBy=pF,R.unionWith=fF,R.uniq=mF,R.uniqBy=gF,R.uniqWith=vF,R.unset=xk,R.unzip=My,R.unzipWith=xM,R.update=wk,R.updateWith=_k,R.values=Nu,R.valuesIn=Sk,R.without=yF,R.words=jM,R.wrap=mU,R.xor=xF,R.xorBy=wF,R.xorWith=_F,R.zip=SF,R.zipObject=bF,R.zipObjectDeep=AF,R.zipWith=MF,R.entries=kM,R.entriesIn=HM,R.extend=zM,R.extendWith=Jf,Iy(R,R),R.add=SH,R.attempt=WM,R.camelCase=Ek,R.capitalize=GM,R.ceil=bH,R.clamp=bk,R.clone=vU,R.cloneDeep=xU,R.cloneDeepWith=wU,R.cloneWith=yU,R.conformsTo=_U,R.deburr=VM,R.defaultTo=tH,R.divide=AH,R.endsWith=Tk,R.eq=Rs,R.escape=Ck,R.escapeRegExp=Lk,R.every=BF,R.find=FF,R.findIndex=fM,R.findKey=KU,R.findLast=UF,R.findLastIndex=mM,R.findLastKey=ZU,R.floor=MH,R.forEach=_M,R.forEachRight=SM,R.forIn=$U,R.forInRight=ek,R.forOwn=tk,R.forOwnRight=rk,R.get=Oy,R.gt=SU,R.gte=bU,R.has=sk,R.hasIn=Py,R.head=vM,R.identity=mn,R.includes=jF,R.indexOf=U4,R.inRange=Ak,R.invoke=lk,R.isArguments=Fl,R.isArray=St,R.isArrayBuffer=AU,R.isArrayLike=pn,R.isArrayLikeObject=jr,R.isBoolean=MU,R.isBuffer=No,R.isDate=EU,R.isElement=TU,R.isEmpty=CU,R.isEqual=LU,R.isEqualWith=OU,R.isError=Cy,R.isFinite=PU,R.isFunction=Qa,R.isInteger=OM,R.isLength=jf,R.isMap=PM,R.isMatch=DU,R.isMatchWith=RU,R.isNaN=NU,R.isNative=IU,R.isNil=zU,R.isNull=BU,R.isNumber=DM,R.isObject=Or,R.isObjectLike=zr,R.isPlainObject=qc,R.isRegExp=Ly,R.isSafeInteger=FU,R.isSet=RM,R.isString=Wf,R.isSymbol=Nn,R.isTypedArray=Ru,R.isUndefined=UU,R.isWeakMap=kU,R.isWeakSet=HU,R.join=j4,R.kebabCase=Ok,R.last=ls,R.lastIndexOf=W4,R.lowerCase=Pk,R.lowerFirst=Dk,R.lt=GU,R.lte=VU,R.max=EH,R.maxBy=TH,R.mean=CH,R.meanBy=LH,R.min=OH,R.minBy=PH,R.stubArray=zy,R.stubFalse=Fy,R.stubObject=gH,R.stubString=vH,R.stubTrue=yH,R.multiply=DH,R.nth=J4,R.noConflict=lH,R.noop=By,R.now=Hf,R.pad=Rk,R.padEnd=Nk,R.padStart=Ik,R.parseInt=Bk,R.random=Mk,R.reduce=XF,R.reduceRight=QF,R.repeat=zk,R.replace=Fk,R.result=mk,R.round=RH,R.runInContext=se,R.sample=ZF,R.size=tU,R.snakeCase=Uk,R.some=rU,R.sortedIndex=$4,R.sortedIndexBy=eF,R.sortedIndexOf=tF,R.sortedLastIndex=rF,R.sortedLastIndexBy=iF,R.sortedLastIndexOf=nF,R.startCase=Hk,R.startsWith=Gk,R.subtract=NH,R.sum=IH,R.sumBy=BH,R.template=Vk,R.times=xH,R.toFinite=Ka,R.toInteger=At,R.toLength=IM,R.toLower=jk,R.toNumber=us,R.toSafeInteger=jU,R.toString=tr,R.toUpper=Wk,R.trim=Jk,R.trimEnd=Yk,R.trimStart=qk,R.truncate=Xk,R.unescape=Qk,R.uniqueId=_H,R.upperCase=Kk,R.upperFirst=Dy,R.each=_M,R.eachRight=SM,R.first=vM,Iy(R,function(){var u={};return la(R,function(c,x){lr.call(R.prototype,x)||(u[x]=c)}),u}(),{chain:!1}),R.VERSION=i,is(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){R[u].placeholder=R}),is(["drop","take"],function(u,c){Bt.prototype[u]=function(x){x=x===r?1:di(At(x),0);var E=this.__filtered__&&!c?new Bt(this):this.clone();return E.__filtered__?E.__takeCount__=ji(x,E.__takeCount__):E.__views__.push({size:ji(x,Y),type:u+(E.__dir__<0?"Right":"")}),E},Bt.prototype[u+"Right"]=function(x){return this.reverse()[u](x).reverse()}}),is(["filter","map","takeWhile"],function(u,c){var x=c+1,E=x==k||x==$;Bt.prototype[u]=function(P){var I=this.clone();return I.__iteratees__.push({iteratee:ct(P,3),type:x}),I.__filtered__=I.__filtered__||E,I}}),is(["head","last"],function(u,c){var x="take"+(c?"Right":"");Bt.prototype[u]=function(){return this[x](1).value()[0]}}),is(["initial","tail"],function(u,c){var x="drop"+(c?"":"Right");Bt.prototype[u]=function(){return this.__filtered__?new Bt(this):this[x](1)}}),Bt.prototype.compact=function(){return this.filter(mn)},Bt.prototype.find=function(u){return this.filter(u).head()},Bt.prototype.findLast=function(u){return this.reverse().find(u)},Bt.prototype.invokeMap=Ot(function(u,c){return typeof u=="function"?new Bt(this):this.map(function(x){return Gc(x,u,c)})}),Bt.prototype.reject=function(u){return this.filter(Vf(ct(u)))},Bt.prototype.slice=function(u,c){u=At(u);var x=this;return x.__filtered__&&(u>0||c<0)?new Bt(x):(u<0?x=x.takeRight(-u):u&&(x=x.drop(u)),c!==r&&(c=At(c),x=c<0?x.dropRight(-c):x.take(c-u)),x)},Bt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Bt.prototype.toArray=function(){return this.take(Y)},la(Bt.prototype,function(u,c){var x=/^(?:filter|find|map|reject)|While$/.test(c),E=/^(?:head|last)$/.test(c),P=R[E?"take"+(c=="last"?"Right":""):c],I=E||/^find/.test(c);!P||(R.prototype[c]=function(){var j=this.__wrapped__,Z=E?[1]:arguments,le=j instanceof Bt,Ee=Z[0],Te=le||St(j),De=function(Nt){var Ut=P.apply(R,To([Nt],Z));return E&&ke?Ut[0]:Ut};Te&&x&&typeof Ee=="function"&&Ee.length!=1&&(le=Te=!1);var ke=this.__chain__,et=!!this.__actions__.length,pt=I&&!ke,Ct=le&&!et;if(!I&&Te){j=Ct?j:new Bt(this);var ft=u.apply(j,Z);return ft.__actions__.push({func:Uf,args:[De],thisArg:r}),new ss(ft,ke)}return pt&&Ct?u.apply(this,Z):(ft=this.thru(De),pt?E?ft.value()[0]:ft.value():ft)})}),is(["pop","push","shift","sort","splice","unshift"],function(u){var c=cf[u],x=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);R.prototype[u]=function(){var P=arguments;if(E&&!this.__chain__){var I=this.value();return c.apply(St(I)?I:[],P)}return this[x](function(j){return c.apply(St(j)?j:[],P)})}}),la(Bt.prototype,function(u,c){var x=R[c];if(x){var E=x.name+"";lr.call(Cu,E)||(Cu[E]=[]),Cu[E].push({name:c,func:x})}}),Cu[Df(r,y).name]=[{name:"wrapper",func:r}],Bt.prototype.clone=QB,Bt.prototype.reverse=KB,Bt.prototype.value=ZB,R.prototype.at=TF,R.prototype.chain=CF,R.prototype.commit=LF,R.prototype.next=OF,R.prototype.plant=DF,R.prototype.reverse=RF,R.prototype.toJSON=R.prototype.valueOf=R.prototype.value=NF,R.prototype.first=R.prototype.head,Ic&&(R.prototype[Ic]=PF),R},Mu=LB();Ol?((Ol.exports=Mu)._=Mu,N0._=Mu):Ti._=Mu}).call(Xc)})(aE,aE.exports);var eG=Object.create,zp=Object.defineProperty,tG=Object.defineProperties,rG=Object.getOwnPropertyDescriptor,iG=Object.getOwnPropertyDescriptors,nG=Object.getOwnPropertyNames,Bg=Object.getOwnPropertySymbols,sG=Object.getPrototypeOf,A_=Object.prototype.hasOwnProperty,DO=Object.prototype.propertyIsEnumerable,oE=(e,t,r)=>t in e?zp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Le=(e,t)=>{for(var r in t||(t={}))A_.call(t,r)&&oE(e,r,t[r]);if(Bg)for(var r of Bg(t))DO.call(t,r)&&oE(e,r,t[r]);return e},tt=(e,t)=>tG(e,iG(t)),RO=e=>zp(e,"__esModule",{value:!0}),aG=(e,t)=>{var r={};for(var i in e)A_.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&Bg)for(var i of Bg(e))t.indexOf(i)<0&&DO.call(e,i)&&(r[i]=e[i]);return r},NO=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),oG=(e,t)=>{RO(e);for(var r in t)zp(e,r,{get:t[r],enumerable:!0})},lG=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nG(t))!A_.call(e,i)&&i!=="default"&&zp(e,i,{get:()=>t[i],enumerable:!(r=rG(t,i))||r.enumerable});return e},IO=e=>lG(RO(zp(e!=null?eG(sG(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),uG=NO(e=>{e.byteLength=l,e.toByteArray=d,e.fromByteArray=m;var t=[],r=[],i=typeof Uint8Array!="undefined"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,a=n.length;s<a;++s)t[s]=n[s],r[n.charCodeAt(s)]=s;var s,a;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function o(v){var w=v.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=v.indexOf("=");S===-1&&(S=w);var y=S===w?0:4-S%4;return[S,y]}function l(v){var w=o(v),S=w[0],y=w[1];return(S+y)*3/4-y}function h(v,w,S){return(w+S)*3/4-S}function d(v){var w,S=o(v),y=S[0],g=S[1],_=new i(h(v,y,g)),b=0,T=g>0?y-4:y,A;for(A=0;A<T;A+=4)w=r[v.charCodeAt(A)]<<18|r[v.charCodeAt(A+1)]<<12|r[v.charCodeAt(A+2)]<<6|r[v.charCodeAt(A+3)],_[b++]=w>>16&255,_[b++]=w>>8&255,_[b++]=w&255;return g===2&&(w=r[v.charCodeAt(A)]<<2|r[v.charCodeAt(A+1)]>>4,_[b++]=w&255),g===1&&(w=r[v.charCodeAt(A)]<<10|r[v.charCodeAt(A+1)]<<4|r[v.charCodeAt(A+2)]>>2,_[b++]=w>>8&255,_[b++]=w&255),_}function p(v){return t[v>>18&63]+t[v>>12&63]+t[v>>6&63]+t[v&63]}function f(v,w,S){for(var y,g=[],_=w;_<S;_+=3)y=(v[_]<<16&16711680)+(v[_+1]<<8&65280)+(v[_+2]&255),g.push(p(y));return g.join("")}function m(v){for(var w,S=v.length,y=S%3,g=[],_=16383,b=0,T=S-y;b<T;b+=_)g.push(f(v,b,b+_>T?T:b+_));return y===1?(w=v[S-1],g.push(t[w>>2]+t[w<<4&63]+"==")):y===2&&(w=(v[S-2]<<8)+v[S-1],g.push(t[w>>10]+t[w>>4&63]+t[w<<2&63]+"=")),g.join("")}}),hG=NO((e,t)=>{(function(r,i){typeof e=="object"&&typeof t!="undefined"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis!="undefined"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,s,a,o){if(n=n===void 0||n,s=s===void 0||s,o=1e-64/(a=a||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,h,d,p,f,m,v,w,S,y,g,_,b=i[0].length,T=i.length;if(T<b)throw new TypeError("Invalid matrix: m < n");for(var A=[],M=[],L=[],D=n==="f"?T:b,C=y=v=0;C<T;C++)M[C]=new Array(D).fill(0);for(C=0;C<b;C++)L[C]=new Array(b).fill(0);var N,U=new Array(b).fill(0);for(C=0;C<T;C++)for(l=0;l<b;l++)M[C][l]=i[C][l];for(C=0;C<b;C++){for(A[C]=v,S=0,d=C+1,l=C;l<T;l++)S+=Math.pow(M[l][C],2);if(S<o)v=0;else for(w=(m=M[C][C])*(v=m<0?Math.sqrt(S):-Math.sqrt(S))-S,M[C][C]=m-v,l=d;l<b;l++){for(S=0,h=C;h<T;h++)S+=M[h][C]*M[h][l];for(m=S/w,h=C;h<T;h++)M[h][l]=M[h][l]+m*M[h][C]}for(U[C]=v,S=0,l=d;l<b;l++)S+=Math.pow(M[C][l],2);if(S<o)v=0;else{for(w=(m=M[C][C+1])*(v=m<0?Math.sqrt(S):-Math.sqrt(S))-S,M[C][C+1]=m-v,l=d;l<b;l++)A[l]=M[C][l]/w;for(l=d;l<T;l++){for(S=0,h=d;h<b;h++)S+=M[l][h]*M[C][h];for(h=d;h<b;h++)M[l][h]=M[l][h]+S*A[h]}}y<(g=Math.abs(U[C])+Math.abs(A[C]))&&(y=g)}if(s)for(C=b-1;0<=C;C--){if(v!==0){for(w=M[C][C+1]*v,l=d;l<b;l++)L[l][C]=M[C][l]/w;for(l=d;l<b;l++){for(S=0,h=d;h<b;h++)S+=M[C][h]*L[h][l];for(h=d;h<b;h++)L[h][l]=L[h][l]+S*L[h][C]}}for(l=d;l<b;l++)L[C][l]=0,L[l][C]=0;L[C][C]=1,v=A[C],d=C}if(n){if(n==="f")for(C=b;C<T;C++){for(l=b;l<T;l++)M[C][l]=0;M[C][C]=1}for(C=b-1;0<=C;C--){for(d=C+1,v=U[C],l=d;l<D;l++)M[C][l]=0;if(v!==0){for(w=M[C][C]*v,l=d;l<D;l++){for(S=0,h=d;h<T;h++)S+=M[h][C]*M[h][l];for(m=S/w,h=C;h<T;h++)M[h][l]=M[h][l]+m*M[h][C]}for(l=C;l<T;l++)M[l][C]=M[l][C]/v}else for(l=C;l<T;l++)M[l][C]=0;M[C][C]=M[C][C]+1}}for(a*=y,h=b-1;0<=h;h--)for(var V=0;V<50;V++){for(N=!1,d=h;0<=d;d--){if(Math.abs(A[d])<=a){N=!0;break}if(Math.abs(U[d-1])<=a)break}if(!N){for(f=0,p=d-(S=1),C=d;C<h+1&&(m=S*A[C],A[C]=f*A[C],!(Math.abs(m)<=a));C++)if(v=U[C],U[C]=Math.sqrt(m*m+v*v),f=v/(w=U[C]),S=-m/w,n)for(l=0;l<T;l++)g=M[l][p],_=M[l][C],M[l][p]=g*f+_*S,M[l][C]=-g*S+_*f}if(_=U[h],d===h){if(_<0&&(U[h]=-_,s))for(l=0;l<b;l++)L[l][h]=-L[l][h];break}for(y=U[d],m=(((g=U[h-1])-_)*(g+_)+((v=A[h-1])-(w=A[h]))*(v+w))/(2*w*g),v=Math.sqrt(m*m+1),m=((y-_)*(y+_)+w*(g/(m<0?m-v:m+v)-w))/y,C=d+(S=f=1);C<h+1;C++){if(v=A[C],g=U[C],w=S*v,v*=f,_=Math.sqrt(m*m+w*w),m=y*(f=m/(A[C-1]=_))+v*(S=w/_),v=-y*S+v*f,w=g*S,g*=f,s)for(l=0;l<b;l++)y=L[l][C-1],_=L[l][C],L[l][C-1]=y*f+_*S,L[l][C]=-y*S+_*f;if(_=Math.sqrt(m*m+w*w),m=(f=m/(U[C-1]=_))*v+(S=w/_)*g,y=-S*v+f*g,n)for(l=0;l<T;l++)g=M[l][C-1],_=M[l][C],M[l][C-1]=g*f+_*S,M[l][C]=-g*S+_*f}A[d]=0,A[h]=m,U[h]=y}for(C=0;C<b;C++)U[C]<a&&(U[C]=0);return{u:M,q:U,v:L}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),BO="131",hs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},cG=0,lE=1,dG=2,zO=1,FO=2,Ad=3,dl=0,Tr=1,bi=2,UO=1,Ni=0,Nh=1,uE=2,hE=3,cE=4,pG=5,lh=100,fG=101,mG=102,dE=103,pE=104,gG=200,vG=201,yG=202,xG=203,kO=204,HO=205,wG=206,_G=207,SG=208,bG=209,AG=210,MG=0,EG=1,TG=2,Tx=3,CG=4,LG=5,OG=6,PG=7,kv=0,DG=1,RG=2,$l=0,NG=1,IG=2,BG=3,zG=4,FG=5,GO=300,Fp=301,Up=302,Cx=303,Lx=304,kp=306,Hv=307,Qh=1e3,Si=1001,zg=1002,Zr=1003,Ox=1004,Px=1005,ar=1006,VO=1007,du=1008,Mi=1009,UG=1010,kG=1011,Fg=1012,HG=1013,Id=1014,Yl=1015,Ih=1016,GG=1017,VG=1018,jG=1019,Bh=1020,WG=1021,$i=1022,mi=1023,jO=1024,JG=1025,YG=mi,zh=1026,Kh=1027,qG=1028,XG=1029,QG=1030,KG=1031,ZG=1032,$G=1033,fE=33776,mE=33777,gE=33778,vE=33779,yE=35840,xE=35841,wE=35842,_E=35843,eV=36196,SE=37492,bE=37496,tV=37808,rV=37809,iV=37810,nV=37811,sV=37812,aV=37813,oV=37814,lV=37815,uV=37816,hV=37817,cV=37818,dV=37819,pV=37820,fV=37821,mV=36492,gV=37840,vV=37841,yV=37842,xV=37843,wV=37844,_V=37845,SV=37846,bV=37847,AV=37848,MV=37849,EV=37850,TV=37851,CV=37852,LV=37853,OV=2200,PV=2201,DV=2202,ip=2300,np=2301,Hy=2302,mh=2400,gh=2401,Ug=2402,M_=2500,WO=2501,JO=0,RV=1,AE=2,Bi=3e3,Hp=3001,Gp=3007,Gv=3002,NV=3003,E_=3004,T_=3005,C_=3006,Vv=3200,IV=3201,yc=0,BV=1,Gy=7680,zV=519,sp=35044,kg=35048,ME="300 es",Kn=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},Li=[];for(let e=0;e<256;e++)Li[e]=(e<16?"0":"")+e.toString(16);var Xf=1234567,Bd=Math.PI/180,ap=180/Math.PI;function Qs(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Li[e&255]+Li[e>>8&255]+Li[e>>16&255]+Li[e>>24&255]+"-"+Li[t&255]+Li[t>>8&255]+"-"+Li[t>>16&15|64]+Li[t>>24&255]+"-"+Li[r&63|128]+Li[r>>8&255]+"-"+Li[r>>16&255]+Li[r>>24&255]+Li[i&255]+Li[i>>8&255]+Li[i>>16&255]+Li[i>>24&255]).toUpperCase()}function Pi(e,t,r){return Math.max(t,Math.min(r,e))}function L_(e,t){return(e%t+t)%t}function FV(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function UV(e,t,r){return e!==t?(r-e)/(t-e):0}function zd(e,t,r){return(1-r)*e+r*t}function kV(e,t,r,i){return zd(e,t,1-Math.exp(-r*i))}function HV(e,t=1){return t-Math.abs(L_(e,t*2)-t)}function GV(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function VV(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function jV(e,t){return e+Math.floor(Math.random()*(t-e+1))}function WV(e,t){return e+Math.random()*(t-e)}function JV(e){return e*(.5-Math.random())}function YV(e){return e!==void 0&&(Xf=e%2147483647),Xf=Xf*16807%2147483647,(Xf-1)/2147483646}function qV(e){return e*Bd}function XV(e){return e*ap}function Dx(e){return(e&e-1)==0&&e!==0}function QV(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function YO(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function KV(e,t,r,i,n){let s=Math.cos,a=Math.sin,o=s(r/2),l=a(r/2),h=s((t+i)/2),d=a((t+i)/2),p=s((t-i)/2),f=a((t-i)/2),m=s((i-t)/2),v=a((i-t)/2);switch(n){case"XYX":e.set(o*d,l*p,l*f,o*h);break;case"YZY":e.set(l*f,o*d,l*p,o*h);break;case"ZXZ":e.set(l*p,l*f,o*d,o*h);break;case"XZX":e.set(o*d,l*v,l*m,o*h);break;case"YXY":e.set(l*m,o*d,l*v,o*h);break;case"ZYZ":e.set(l*v,l*m,o*d,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}var sr=Object.freeze({__proto__:null,DEG2RAD:Bd,RAD2DEG:ap,generateUUID:Qs,clamp:Pi,euclideanModulo:L_,mapLinear:FV,inverseLerp:UV,lerp:zd,damp:kV,pingpong:HV,smoothstep:GV,smootherstep:VV,randInt:jV,randFloat:WV,randFloatSpread:JV,seededRandom:YV,degToRad:qV,radToDeg:XV,isPowerOfTwo:Dx,ceilPowerOfTwo:QV,floorPowerOfTwo:YO,setQuaternionFromProperEuler:KV}),Q=class{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*r-s*i+e.x,this.y=n*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}};Q.prototype.isVector2=!0;var Nr=class{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,n,s,a,o,l){let h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=n,h[5]=o,h[6]=r,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],h=r[4],d=r[7],p=r[2],f=r[5],m=r[8],v=i[0],w=i[3],S=i[6],y=i[1],g=i[4],_=i[7],b=i[2],T=i[5],A=i[8];return n[0]=s*v+a*y+o*b,n[3]=s*w+a*g+o*T,n[6]=s*S+a*_+o*A,n[1]=l*v+h*y+d*b,n[4]=l*w+h*g+d*T,n[7]=l*S+h*_+d*A,n[2]=p*v+f*y+m*b,n[5]=p*w+f*g+m*T,n[8]=p*S+f*_+m*A,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8];return t*s*h-t*a*l-r*n*h+r*a*o+i*n*l-i*s*o}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],d=h*s-a*l,p=a*o-h*n,f=l*n-s*o,m=t*d+r*p+i*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/m;return e[0]=d*v,e[1]=(i*l-h*r)*v,e[2]=(a*r-i*s)*v,e[3]=p*v,e[4]=(h*t-i*o)*v,e[5]=(i*n-a*t)*v,e[6]=f*v,e[7]=(r*o-l*t)*v,e[8]=(s*t-r*n)*v,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,s,a){let o=Math.cos(n),l=Math.sin(n);return this.set(r*o,r*l,-r*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){let r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){let t=Math.cos(e),r=Math.sin(e),i=this.elements,n=i[0],s=i[3],a=i[6],o=i[1],l=i[4],h=i[7];return i[0]=t*n+r*o,i[3]=t*s+r*l,i[6]=t*a+r*h,i[1]=-r*n+t*o,i[4]=-r*s+t*l,i[7]=-r*a+t*h,this}translate(e,t){let r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};Nr.prototype.isMatrix3=!0;var Iu,xc=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Iu===void 0&&(Iu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Iu.width=e.width,Iu.height=e.height;let r=Iu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Iu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},ZV=0,Ir=class extends Kn{constructor(e=Ir.DEFAULT_IMAGE,t=Ir.DEFAULT_MAPPING,r=Si,i=Si,n=ar,s=du,a=mi,o=Mi,l=1,h=Bi){super();Object.defineProperty(this,"id",{value:ZV++}),this.uuid=Qs(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Q(0,0),this.repeat=new Q(1,1),this.center=new Q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){let i=this.image;if(i.uuid===void 0&&(i.uuid=Qs()),!t&&e.images[i.uuid]===void 0){let n;if(Array.isArray(i)){n=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?n.push(Vy(i[s].image)):n.push(Vy(i[s]))}else n=Vy(i);e.images[i.uuid]={uuid:i.uuid,url:n}}r.image=i.uuid}return t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==GO)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qh:e.x=e.x-Math.floor(e.x);break;case Si:e.x=e.x<0?0:1;break;case zg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qh:e.y=e.y-Math.floor(e.y);break;case Si:e.y=e.y<0?0:1;break;case zg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}};Ir.DEFAULT_IMAGE=void 0;Ir.DEFAULT_MAPPING=GO;Ir.prototype.isTexture=!0;function Vy(e){return typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?xc.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Et=class{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*n,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*n,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*n,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,s=.01,a=.1,o=e.elements,l=o[0],h=o[4],d=o[8],p=o[1],f=o[5],m=o[9],v=o[2],w=o[6],S=o[10];if(Math.abs(h-p)<s&&Math.abs(d-v)<s&&Math.abs(m-w)<s){if(Math.abs(h+p)<a&&Math.abs(d+v)<a&&Math.abs(m+w)<a&&Math.abs(l+f+S-3)<a)return this.set(1,0,0,0),this;t=Math.PI;let g=(l+1)/2,_=(f+1)/2,b=(S+1)/2,T=(h+p)/4,A=(d+v)/4,M=(m+w)/4;return g>_&&g>b?g<s?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=T/r,n=A/r):_>b?_<s?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(_),r=T/i,n=M/i):b<s?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(b),r=A/n,i=M/n),this.set(r,i,n,t),this}let y=Math.sqrt((w-m)*(w-m)+(d-v)*(d-v)+(p-h)*(p-h));return Math.abs(y)<.001&&(y=1),this.x=(w-m)/y,this.y=(d-v)/y,this.z=(p-h)/y,this.w=Math.acos((l+f+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}};Et.prototype.isVector4=!0;var li=class extends Kn{constructor(e,t,r={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new Et(0,0,e,t),this.scissorTest=!1,this.viewport=new Et(0,0,e,t),this.texture=new Ir(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ar,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Le({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}};li.prototype.isWebGLRenderTarget=!0;var $V=class extends li{constructor(e,t,r){super(e,t);let i=this.texture;this.texture=[];for(let n=0;n<r;n++)this.texture[n]=i.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.texture.length;i<n;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}};$V.prototype.isWebGLMultipleRenderTargets=!0;var op=class extends li{constructor(e,t,r){super(e,t,r);this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}};op.prototype.isWebGLMultisampleRenderTarget=!0;var Gr=class{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,n,s,a){let o=r[i+0],l=r[i+1],h=r[i+2],d=r[i+3],p=n[s+0],f=n[s+1],m=n[s+2],v=n[s+3];if(a===0){e[t+0]=o,e[t+1]=l,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=f,e[t+2]=m,e[t+3]=v;return}if(d!==v||o!==p||l!==f||h!==m){let w=1-a,S=o*p+l*f+h*m+d*v,y=S>=0?1:-1,g=1-S*S;if(g>Number.EPSILON){let b=Math.sqrt(g),T=Math.atan2(b,S*y);w=Math.sin(w*T)/b,a=Math.sin(a*T)/b}let _=a*y;if(o=o*w+p*_,l=l*w+f*_,h=h*w+m*_,d=d*w+v*_,w===1-a){let b=1/Math.sqrt(o*o+l*l+h*h+d*d);o*=b,l*=b,h*=b,d*=b}}e[t]=o,e[t+1]=l,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,n,s){let a=r[i],o=r[i+1],l=r[i+2],h=r[i+3],d=n[s],p=n[s+1],f=n[s+2],m=n[s+3];return e[t]=a*m+h*d+o*f-l*p,e[t+1]=o*m+h*p+l*d-a*f,e[t+2]=l*m+h*f+a*p-o*d,e[t+3]=h*m-a*d-o*p-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let r=e._x,i=e._y,n=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(r/2),h=a(i/2),d=a(n/2),p=o(r/2),f=o(i/2),m=o(n/2);switch(s){case"XYZ":this._x=p*h*d+l*f*m,this._y=l*f*d-p*h*m,this._z=l*h*m+p*f*d,this._w=l*h*d-p*f*m;break;case"YXZ":this._x=p*h*d+l*f*m,this._y=l*f*d-p*h*m,this._z=l*h*m-p*f*d,this._w=l*h*d+p*f*m;break;case"ZXY":this._x=p*h*d-l*f*m,this._y=l*f*d+p*h*m,this._z=l*h*m+p*f*d,this._w=l*h*d-p*f*m;break;case"ZYX":this._x=p*h*d-l*f*m,this._y=l*f*d+p*h*m,this._z=l*h*m-p*f*d,this._w=l*h*d+p*f*m;break;case"YZX":this._x=p*h*d+l*f*m,this._y=l*f*d+p*h*m,this._z=l*h*m-p*f*d,this._w=l*h*d-p*f*m;break;case"XZY":this._x=p*h*d-l*f*m,this._y=l*f*d-p*h*m,this._z=l*h*m+p*f*d,this._w=l*h*d+p*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],s=t[1],a=t[5],o=t[9],l=t[2],h=t[6],d=t[10],p=r+a+d;if(p>0){let f=.5/Math.sqrt(p+1);this._w=.25/f,this._x=(h-o)*f,this._y=(n-l)*f,this._z=(s-i)*f}else if(r>a&&r>d){let f=2*Math.sqrt(1+r-a-d);this._w=(h-o)/f,this._x=.25*f,this._y=(i+s)/f,this._z=(n+l)/f}else if(a>d){let f=2*Math.sqrt(1+a-r-d);this._w=(n-l)/f,this._x=(i+s)/f,this._y=.25*f,this._z=(o+h)/f}else{let f=2*Math.sqrt(1+d-r-a);this._w=(s-i)/f,this._x=(n+l)/f,this._y=(o+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Pi(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,s=e._w,a=t._x,o=t._y,l=t._z,h=t._w;return this._x=r*h+s*a+i*l-n*o,this._y=i*h+s*o+n*a-r*l,this._z=n*h+s*l+r*o-i*a,this._w=s*h-r*a-i*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,s=this._w,a=s*e._w+r*e._x+i*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=n,this;let o=1-a*a;if(o<=Number.EPSILON){let f=1-t;return this._w=f*s+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),h=Math.atan2(l,a),d=Math.sin((1-t)*h)/l,p=Math.sin(t*h)/l;return this._w=s*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=n*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){this.copy(e).slerp(t,r)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};Gr.prototype.isQuaternion=!0;var O=class{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(EE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(EE.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,s=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*s,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*s,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*s,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*r,h=o*r+a*t-n*i,d=o*i+n*r-s*t,p=-n*t-s*r-a*i;return this.x=l*o+p*-n+h*-a-d*-s,this.y=h*o+p*-s+d*-n-l*-a,this.z=d*o+p*-a+l*-s-h*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-n*a,this.y=n*s-r*o,this.z=r*a-i*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return jy.copy(this).projectOnVector(e),this.sub(jy)}reflect(e){return this.sub(jy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Pi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}};O.prototype.isVector3=!0;var jy=new O,EE=new Gr,Ui=class{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){let h=e[o],d=e[o+1],p=e[o+2];h<t&&(t=h),d<r&&(r=d),p<i&&(i=p),h>n&&(n=h),d>s&&(s=d),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){let h=e.getX(o),d=e.getY(o),p=e.getZ(o);h<t&&(t=h),d<r&&(r=d),p<i&&(i=p),h>n&&(n=h),d>s&&(s=d),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Kc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);let t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Wy.copy(t.boundingBox),Wy.applyMatrix4(e.matrixWorld),this.union(Wy));let r=e.children;for(let i=0,n=r.length;i<n;i++)this.expandByObject(r[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Kc),Kc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zc),Qf.subVectors(this.max,Zc),Bu.subVectors(e.a,Zc),zu.subVectors(e.b,Zc),Fu.subVectors(e.c,Zc),Io.subVectors(zu,Bu),Bo.subVectors(Fu,zu),Ul.subVectors(Bu,Fu);let t=[0,-Io.z,Io.y,0,-Bo.z,Bo.y,0,-Ul.z,Ul.y,Io.z,0,-Io.x,Bo.z,0,-Bo.x,Ul.z,0,-Ul.x,-Io.y,Io.x,0,-Bo.y,Bo.x,0,-Ul.y,Ul.x,0];return!Jy(t,Bu,zu,Fu,Qf)||(t=[1,0,0,0,1,0,0,0,1],!Jy(t,Bu,zu,Fu,Qf))?!1:(Kf.crossVectors(Io,Bo),t=[Kf.x,Kf.y,Kf.z],Jy(t,Bu,zu,Fu,Qf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Kc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Kc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($a),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};Ui.prototype.isBox3=!0;var $a=[new O,new O,new O,new O,new O,new O,new O,new O],Kc=new O,Wy=new Ui,Bu=new O,zu=new O,Fu=new O,Io=new O,Bo=new O,Ul=new O,Zc=new O,Qf=new O,Kf=new O,kl=new O;function Jy(e,t,r,i,n){for(let s=0,a=e.length-3;s<=a;s+=3){kl.fromArray(e,s);let o=n.x*Math.abs(kl.x)+n.y*Math.abs(kl.y)+n.z*Math.abs(kl.z),l=t.dot(kl),h=r.dot(kl),d=i.dot(kl);if(Math.max(-Math.max(l,h,d),Math.min(l,h,d))>o)return!1}return!0}var e6=new Ui,TE=new O,Yy=new O,qy=new O,ea=class{constructor(e=new O,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):e6.setFromPoints(e).getCenter(r);let i=0;for(let n=0,s=e.length;n<s;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){qy.subVectors(e,this.center);let t=qy.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(qy.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return Yy.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(TE.copy(e.center).add(Yy)),this.expandByPoint(TE.copy(e.center).sub(Yy)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},eo=new O,Xy=new O,Zf=new O,zo=new O,Qy=new O,$f=new O,Ky=new O,bl=class{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,eo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=eo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(eo.copy(this.direction).multiplyScalar(t).add(this.origin),eo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Xy.copy(e).add(t).multiplyScalar(.5),Zf.copy(t).sub(e).normalize(),zo.copy(this.origin).sub(Xy);let n=e.distanceTo(t)*.5,s=-this.direction.dot(Zf),a=zo.dot(this.direction),o=-zo.dot(Zf),l=zo.lengthSq(),h=Math.abs(1-s*s),d,p,f,m;if(h>0)if(d=s*o-a,p=s*a-o,m=n*h,d>=0)if(p>=-m)if(p<=m){let v=1/h;d*=v,p*=v,f=d*(d+s*p+2*a)+p*(s*d+p+2*o)+l}else p=n,d=Math.max(0,-(s*p+a)),f=-d*d+p*(p+2*o)+l;else p=-n,d=Math.max(0,-(s*p+a)),f=-d*d+p*(p+2*o)+l;else p<=-m?(d=Math.max(0,-(-s*n+a)),p=d>0?-n:Math.min(Math.max(-n,-o),n),f=-d*d+p*(p+2*o)+l):p<=m?(d=0,p=Math.min(Math.max(-n,-o),n),f=p*(p+2*o)+l):(d=Math.max(0,-(s*n+a)),p=d>0?n:Math.min(Math.max(-n,-o),n),f=-d*d+p*(p+2*o)+l);else p=s>0?-n:n,d=Math.max(0,-(s*p+a)),f=-d*d+p*(p+2*o)+l;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(Zf).multiplyScalar(p).add(Xy),f}intersectSphere(e,t){eo.subVectors(e.center,this.origin);let r=eo.dot(this.direction),i=eo.dot(eo)-r*r,n=e.radius*e.radius;if(i>n)return null;let s=Math.sqrt(n-i),a=r-s,o=r+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,s,a,o,l=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return l>=0?(r=(e.min.x-p.x)*l,i=(e.max.x-p.x)*l):(r=(e.max.x-p.x)*l,i=(e.min.x-p.x)*l),h>=0?(n=(e.min.y-p.y)*h,s=(e.max.y-p.y)*h):(n=(e.max.y-p.y)*h,s=(e.min.y-p.y)*h),r>s||n>i||((n>r||r!==r)&&(r=n),(s<i||i!==i)&&(i=s),d>=0?(a=(e.min.z-p.z)*d,o=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,o=(e.min.z-p.z)*d),r>o||a>i)||((a>r||r!==r)&&(r=a),(o<i||i!==i)&&(i=o),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,eo)!==null}intersectTriangle(e,t,r,i,n){Qy.subVectors(t,e),$f.subVectors(r,e),Ky.crossVectors(Qy,$f);let s=this.direction.dot(Ky),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;zo.subVectors(this.origin,e);let o=a*this.direction.dot($f.crossVectors(zo,$f));if(o<0)return null;let l=a*this.direction.dot(Qy.cross(zo));if(l<0||o+l>s)return null;let h=-a*zo.dot(Ky);return h<0?null:this.at(h/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ge=class{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,n,s,a,o,l,h,d,p,f,m,v,w){let S=this.elements;return S[0]=e,S[4]=t,S[8]=r,S[12]=i,S[1]=n,S[5]=s,S[9]=a,S[13]=o,S[2]=l,S[6]=h,S[10]=d,S[14]=p,S[3]=f,S[7]=m,S[11]=v,S[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ge().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/Uu.setFromMatrixColumn(e,0).length(),n=1/Uu.setFromMatrixColumn(e,1).length(),s=1/Uu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,r=e.x,i=e.y,n=e.z,s=Math.cos(r),a=Math.sin(r),o=Math.cos(i),l=Math.sin(i),h=Math.cos(n),d=Math.sin(n);if(e.order==="XYZ"){let p=s*h,f=s*d,m=a*h,v=a*d;t[0]=o*h,t[4]=-o*d,t[8]=l,t[1]=f+m*l,t[5]=p-v*l,t[9]=-a*o,t[2]=v-p*l,t[6]=m+f*l,t[10]=s*o}else if(e.order==="YXZ"){let p=o*h,f=o*d,m=l*h,v=l*d;t[0]=p+v*a,t[4]=m*a-f,t[8]=s*l,t[1]=s*d,t[5]=s*h,t[9]=-a,t[2]=f*a-m,t[6]=v+p*a,t[10]=s*o}else if(e.order==="ZXY"){let p=o*h,f=o*d,m=l*h,v=l*d;t[0]=p-v*a,t[4]=-s*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=s*h,t[9]=v-p*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if(e.order==="ZYX"){let p=s*h,f=s*d,m=a*h,v=a*d;t[0]=o*h,t[4]=m*l-f,t[8]=p*l+v,t[1]=o*d,t[5]=v*l+p,t[9]=f*l-m,t[2]=-l,t[6]=a*o,t[10]=s*o}else if(e.order==="YZX"){let p=s*o,f=s*l,m=a*o,v=a*l;t[0]=o*h,t[4]=v-p*d,t[8]=m*d+f,t[1]=d,t[5]=s*h,t[9]=-a*h,t[2]=-l*h,t[6]=f*d+m,t[10]=p-v*d}else if(e.order==="XZY"){let p=s*o,f=s*l,m=a*o,v=a*l;t[0]=o*h,t[4]=-d,t[8]=l*h,t[1]=p*d+v,t[5]=s*h,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*h,t[10]=v*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(t6,e,r6)}lookAt(e,t,r){let i=this.elements;return zn.subVectors(e,t),zn.lengthSq()===0&&(zn.z=1),zn.normalize(),Fo.crossVectors(r,zn),Fo.lengthSq()===0&&(Math.abs(r.z)===1?zn.x+=1e-4:zn.z+=1e-4,zn.normalize(),Fo.crossVectors(r,zn)),Fo.normalize(),em.crossVectors(zn,Fo),i[0]=Fo.x,i[4]=em.x,i[8]=zn.x,i[1]=Fo.y,i[5]=em.y,i[9]=zn.y,i[2]=Fo.z,i[6]=em.z,i[10]=zn.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[4],o=r[8],l=r[12],h=r[1],d=r[5],p=r[9],f=r[13],m=r[2],v=r[6],w=r[10],S=r[14],y=r[3],g=r[7],_=r[11],b=r[15],T=i[0],A=i[4],M=i[8],L=i[12],D=i[1],C=i[5],N=i[9],U=i[13],V=i[2],k=i[6],G=i[10],$=i[14],W=i[3],H=i[7],X=i[11],J=i[15];return n[0]=s*T+a*D+o*V+l*W,n[4]=s*A+a*C+o*k+l*H,n[8]=s*M+a*N+o*G+l*X,n[12]=s*L+a*U+o*$+l*J,n[1]=h*T+d*D+p*V+f*W,n[5]=h*A+d*C+p*k+f*H,n[9]=h*M+d*N+p*G+f*X,n[13]=h*L+d*U+p*$+f*J,n[2]=m*T+v*D+w*V+S*W,n[6]=m*A+v*C+w*k+S*H,n[10]=m*M+v*N+w*G+S*X,n[14]=m*L+v*U+w*$+S*J,n[3]=y*T+g*D+_*V+b*W,n[7]=y*A+g*C+_*k+b*H,n[11]=y*M+g*N+_*G+b*X,n[15]=y*L+g*U+_*$+b*J,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],s=e[1],a=e[5],o=e[9],l=e[13],h=e[2],d=e[6],p=e[10],f=e[14],m=e[3],v=e[7],w=e[11],S=e[15];return m*(+n*o*d-i*l*d-n*a*p+r*l*p+i*a*f-r*o*f)+v*(+t*o*f-t*l*p+n*s*p-i*s*f+i*l*h-n*o*h)+w*(+t*l*d-t*a*f-n*s*d+r*s*f+n*a*h-r*l*h)+S*(-i*a*h-t*o*d+t*a*p+i*s*d-r*s*p+r*o*h)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],v=e[13],w=e[14],S=e[15],y=d*w*l-v*p*l+v*o*f-a*w*f-d*o*S+a*p*S,g=m*p*l-h*w*l-m*o*f+s*w*f+h*o*S-s*p*S,_=h*v*l-m*d*l+m*a*f-s*v*f-h*a*S+s*d*S,b=m*d*o-h*v*o-m*a*p+s*v*p+h*a*w-s*d*w,T=t*y+r*g+i*_+n*b;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let A=1/T;return e[0]=y*A,e[1]=(v*p*n-d*w*n-v*i*f+r*w*f+d*i*S-r*p*S)*A,e[2]=(a*w*n-v*o*n+v*i*l-r*w*l-a*i*S+r*o*S)*A,e[3]=(d*o*n-a*p*n-d*i*l+r*p*l+a*i*f-r*o*f)*A,e[4]=g*A,e[5]=(h*w*n-m*p*n+m*i*f-t*w*f-h*i*S+t*p*S)*A,e[6]=(m*o*n-s*w*n-m*i*l+t*w*l+s*i*S-t*o*S)*A,e[7]=(s*p*n-h*o*n+h*i*l-t*p*l-s*i*f+t*o*f)*A,e[8]=_*A,e[9]=(m*d*n-h*v*n-m*r*f+t*v*f+h*r*S-t*d*S)*A,e[10]=(s*v*n-m*a*n+m*r*l-t*v*l-s*r*S+t*a*S)*A,e[11]=(h*a*n-s*d*n-h*r*l+t*d*l+s*r*f-t*a*f)*A,e[12]=b*A,e[13]=(h*v*i-m*d*i+m*r*p-t*v*p-h*r*w+t*d*w)*A,e[14]=(m*a*i-s*v*i-m*r*o+t*v*o+s*r*w-t*a*w)*A,e[15]=(s*d*i-h*a*i+h*r*o-t*d*o-s*r*p+t*a*p)*A,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,s=e.x,a=e.y,o=e.z,l=n*s,h=n*a;return this.set(l*s+r,l*a-i*o,l*o+i*a,0,l*a+i*o,h*a+r,h*o-i*s,0,l*o-i*a,h*o+i*s,n*o*o+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,s){return this.set(1,r,n,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,s=t._y,a=t._z,o=t._w,l=n+n,h=s+s,d=a+a,p=n*l,f=n*h,m=n*d,v=s*h,w=s*d,S=a*d,y=o*l,g=o*h,_=o*d,b=r.x,T=r.y,A=r.z;return i[0]=(1-(v+S))*b,i[1]=(f+_)*b,i[2]=(m-g)*b,i[3]=0,i[4]=(f-_)*T,i[5]=(1-(p+S))*T,i[6]=(w+y)*T,i[7]=0,i[8]=(m+g)*A,i[9]=(w-y)*A,i[10]=(1-(p+v))*A,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=Uu.set(i[0],i[1],i[2]).length(),s=Uu.set(i[4],i[5],i[6]).length(),a=Uu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],Is.copy(this);let o=1/n,l=1/s,h=1/a;return Is.elements[0]*=o,Is.elements[1]*=o,Is.elements[2]*=o,Is.elements[4]*=l,Is.elements[5]*=l,Is.elements[6]*=l,Is.elements[8]*=h,Is.elements[9]*=h,Is.elements[10]*=h,t.setFromRotationMatrix(Is),r.x=n,r.y=s,r.z=a,this}makePerspective(e,t,r,i,n,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let a=this.elements,o=2*n/(t-e),l=2*n/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i),p=-(s+n)/(s-n),f=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,n,s){let a=this.elements,o=1/(t-e),l=1/(r-i),h=1/(s-n),d=(t+e)*o,p=(r+i)*l,f=(s+n)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};Ge.prototype.isMatrix4=!0;var Uu=new O,Is=new Ge,t6=new O(0,0,0),r6=new O(1,1,1),Fo=new O,em=new O,zn=new O,CE=new Ge,LE=new Gr,pl=class{constructor(e=0,t=0,r=0,i=pl.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],s=i[4],a=i[8],o=i[1],l=i[5],h=i[9],d=i[2],p=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Pi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(p,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Pi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-d,n),this._z=0);break;case"ZXY":this._x=Math.asin(Pi(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Pi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,f),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Pi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-d,n)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Pi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return CE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(CE,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return LE.setFromEuler(this),this.setFromQuaternion(LE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new O(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};pl.prototype.isEuler=!0;pl.DefaultOrder="XYZ";pl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var qO=class{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}},i6=0,OE=new O,ku=new Gr,to=new Ge,tm=new O,$c=new O,n6=new O,s6=new Gr,PE=new O(1,0,0),DE=new O(0,1,0),RE=new O(0,0,1),a6={type:"added"},NE={type:"removed"},Rt=class extends Kn{constructor(){super();Object.defineProperty(this,"id",{value:i6++}),this.uuid=Qs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rt.DefaultUp.clone();let e=new O,t=new pl,r=new Gr,i=new O(1,1,1);function n(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ge},normalMatrix:{value:new Nr}}),this.matrix=new Ge,this.matrixWorld=new Ge,this.matrixAutoUpdate=Rt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qO,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ku.setFromAxisAngle(e,t),this.quaternion.multiply(ku),this}rotateOnWorldAxis(e,t){return ku.setFromAxisAngle(e,t),this.quaternion.premultiply(ku),this}rotateX(e){return this.rotateOnAxis(PE,e)}rotateY(e){return this.rotateOnAxis(DE,e)}rotateZ(e){return this.rotateOnAxis(RE,e)}translateOnAxis(e,t){return OE.copy(e).applyQuaternion(this.quaternion),this.position.add(OE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(PE,e)}translateY(e){return this.translateOnAxis(DE,e)}translateZ(e){return this.translateOnAxis(RE,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(to.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?tm.copy(e):tm.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),$c.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?to.lookAt($c,tm,this.up):to.lookAt(tm,$c,this.up),this.quaternion.setFromRotationMatrix(to),i&&(to.extractRotation(i.matrixWorld),ku.setFromRotationMatrix(to),this.quaternion.premultiply(ku.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(a6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(NE)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(NE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),to.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),to.multiply(e.parent.matrixWorld)),e.applyMatrix4(to),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($c,e,n6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($c,s6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,s=i.length;n<s;n++)i[n].updateWorldMatrix(!1,!0)}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(a,o){return a[o.uuid]===void 0&&(a[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let o=a.shapes;if(Array.isArray(o))for(let l=0,h=o.length;l<h;l++){let d=o[l];n(e.shapes,d)}else n(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let o=0,l=this.material.length;o<l;o++)a.push(n(e.materials,this.material[o]));i.material=a}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){let o=this.animations[a];i.animations.push(n(e.animations,o))}}if(t){let a=s(e.geometries),o=s(e.materials),l=s(e.textures),h=s(e.images),d=s(e.shapes),p=s(e.skeletons),f=s(e.animations);a.length>0&&(r.geometries=a),o.length>0&&(r.materials=o),l.length>0&&(r.textures=l),h.length>0&&(r.images=h),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),f.length>0&&(r.animations=f)}return r.object=i,r;function s(a){let o=[];for(let l in a){let h=a[l];delete h.metadata,o.push(h)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};Rt.DefaultUp=new O(0,1,0);Rt.DefaultMatrixAutoUpdate=!0;Rt.prototype.isObject3D=!0;var Bs=new O,ro=new O,Zy=new O,io=new O,Hu=new O,Gu=new O,IE=new O,$y=new O,e1=new O,t1=new O,ai=class{constructor(e=new O,t=new O,r=new O){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Bs.subVectors(e,t),i.cross(Bs);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){Bs.subVectors(i,t),ro.subVectors(r,t),Zy.subVectors(e,t);let s=Bs.dot(Bs),a=Bs.dot(ro),o=Bs.dot(Zy),l=ro.dot(ro),h=ro.dot(Zy),d=s*l-a*a;if(d===0)return n.set(-2,-1,-1);let p=1/d,f=(l*o-a*h)*p,m=(s*h-a*o)*p;return n.set(1-f-m,m,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,io),io.x>=0&&io.y>=0&&io.x+io.y<=1}static getUV(e,t,r,i,n,s,a,o){return this.getBarycoord(e,t,r,i,io),o.set(0,0),o.addScaledVector(n,io.x),o.addScaledVector(s,io.y),o.addScaledVector(a,io.z),o}static isFrontFacing(e,t,r,i){return Bs.subVectors(r,t),ro.subVectors(e,t),Bs.cross(ro).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bs.subVectors(this.c,this.b),ro.subVectors(this.a,this.b),Bs.cross(ro).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ai.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ai.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return ai.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return ai.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ai.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,s,a;Hu.subVectors(i,r),Gu.subVectors(n,r),$y.subVectors(e,r);let o=Hu.dot($y),l=Gu.dot($y);if(o<=0&&l<=0)return t.copy(r);e1.subVectors(e,i);let h=Hu.dot(e1),d=Gu.dot(e1);if(h>=0&&d<=h)return t.copy(i);let p=o*d-h*l;if(p<=0&&o>=0&&h<=0)return s=o/(o-h),t.copy(r).addScaledVector(Hu,s);t1.subVectors(e,n);let f=Hu.dot(t1),m=Gu.dot(t1);if(m>=0&&f<=m)return t.copy(n);let v=f*l-o*m;if(v<=0&&l>=0&&m<=0)return a=l/(l-m),t.copy(r).addScaledVector(Gu,a);let w=h*m-f*d;if(w<=0&&d-h>=0&&f-m>=0)return IE.subVectors(n,i),a=(d-h)/(d-h+(f-m)),t.copy(i).addScaledVector(IE,a);let S=1/(w+v+p);return s=v*S,a=p*S,t.copy(r).addScaledVector(Hu,s).addScaledVector(Gu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},o6=0,rn=class extends Kn{constructor(){super();Object.defineProperty(this,"id",{value:o6++}),this.uuid=Qs(),this.name="",this.type="Material",this.fog=!0,this.blending=Nh,this.side=dl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=kO,this.blendDst=HO,this.blendEquation=lh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Tx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=zV,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gy,this.stencilZFail=Gy,this.stencilZPass=Gy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===UO;continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(r.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(r.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(r.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Nh&&(r.blending=this.blending),this.side!==dl&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(n){let s=[];for(let a in n){let o=n[a];delete o.metadata,s.push(o)}return s}if(t){let n=i(e.textures),s=i(e.images);n.length>0&&(r.textures=n),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};rn.prototype.isMaterial=!0;var XO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zs={h:0,s:0,l:0},rm={h:0,s:0,l:0};function r1(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function i1(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function n1(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var Ue=class{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=L_(e,1),t=Pi(t,0,1),r=Pi(r,0,1),t===0)this.r=this.g=this.b=r;else{let i=r<=.5?r*(1+t):r+t-r*t,n=2*r-i;this.r=r1(n,i,e+1/3),this.g=r1(n,i,e),this.b=r1(n,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i,n=r[1],s=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let a=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(a,o,l)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let i=r[1],n=i.length;if(n===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(n===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){let t=XO[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){let r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=i1(e.r),this.g=i1(e.g),this.b=i1(e.b),this}copyLinearToSRGB(e){return this.r=n1(e.r),this.g=n1(e.g),this.b=n1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){let t=this.r,r=this.g,i=this.b,n=Math.max(t,r,i),s=Math.min(t,r,i),a,o,l=(s+n)/2;if(s===n)a=0,o=0;else{let h=n-s;switch(o=l<=.5?h/(n+s):h/(2-n-s),n){case t:a=(r-i)/h+(r<i?6:0);break;case r:a=(i-t)/h+2;break;case i:a=(t-r)/h+4;break}a/=6}return e.h=a,e.s=o,e.l=l,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(zs),zs.h+=e,zs.s+=t,zs.l+=r,this.setHSL(zs.h,zs.s,zs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(zs),e.getHSL(rm);let r=zd(zs.h,rm.h,t),i=zd(zs.s,rm.s,t),n=zd(zs.l,rm.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}};Ue.NAMES=XO;Ue.prototype.isColor=!0;Ue.prototype.r=1;Ue.prototype.g=1;Ue.prototype.b=1;var ou=class extends rn{constructor(e){super();this.type="MeshBasicMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};ou.prototype.isMeshBasicMaterial=!0;var mr=new O,im=new Q,dt=class{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=sp,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Ue),t[r++]=s.r,t[r++]=s.g,t[r++]=s.b}return this}copyVector2sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Q),t[r++]=s.x,t[r++]=s.y}return this}copyVector3sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new O),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this}copyVector4sArray(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Et),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z,t[r++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)im.fromBufferAttribute(this,t),im.applyMatrix3(e),this.setXY(t,im.x,im.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)mr.fromBufferAttribute(this,t),mr.applyMatrix3(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)mr.x=this.getX(t),mr.y=this.getY(t),mr.z=this.getZ(t),mr.applyMatrix4(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)mr.x=this.getX(t),mr.y=this.getY(t),mr.z=this.getZ(t),mr.applyNormalMatrix(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)mr.x=this.getX(t),mr.y=this.getY(t),mr.z=this.getZ(t),mr.transformDirection(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==sp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}};dt.prototype.isBufferAttribute=!0;var QO=class extends dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}},Fd=class extends dt{constructor(e,t,r){super(new Uint32Array(e),t,r)}},l6=class extends dt{constructor(e,t,r){super(new Uint16Array(e),t,r)}};l6.prototype.isFloat16BufferAttribute=!0;var Je=class extends dt{constructor(e,t,r){super(new Float32Array(e),t,r)}};function KO(e){if(e.length===0)return-1/0;let t=e[0];for(let r=1,i=e.length;r<i;++r)e[r]>t&&(t=e[r]);return t}var u6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function nm(e,t){return new u6[e](t)}var h6=0,cs=new Ge,s1=new Rt,Vu=new O,Fn=new Ui,ed=new Ui,yi=new O,st=class extends Kn{constructor(){super();Object.defineProperty(this,"id",{value:h6++}),this.uuid=Qs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(KO(e)>65535?Fd:QO)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new Nr().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return cs.makeRotationFromQuaternion(e),this.applyMatrix4(cs),this}rotateX(e){return cs.makeRotationX(e),this.applyMatrix4(cs),this}rotateY(e){return cs.makeRotationY(e),this.applyMatrix4(cs),this}rotateZ(e){return cs.makeRotationZ(e),this.applyMatrix4(cs),this}translate(e,t,r){return cs.makeTranslation(e,t,r),this.applyMatrix4(cs),this}scale(e,t,r){return cs.makeScale(e,t,r),this.applyMatrix4(cs),this}lookAt(e){return s1.lookAt(e),s1.updateMatrix(),this.applyMatrix4(s1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vu).negate(),this.translate(Vu.x,Vu.y,Vu.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Je(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Fn.setFromBufferAttribute(n),this.morphTargetsRelative?(yi.addVectors(this.boundingBox.min,Fn.min),this.boundingBox.expandByPoint(yi),yi.addVectors(this.boundingBox.max,Fn.max),this.boundingBox.expandByPoint(yi)):(this.boundingBox.expandByPoint(Fn.min),this.boundingBox.expandByPoint(Fn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ea);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new O,1/0);return}if(e){let r=this.boundingSphere.center;if(Fn.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let a=t[n];ed.setFromBufferAttribute(a),this.morphTargetsRelative?(yi.addVectors(Fn.min,ed.min),Fn.expandByPoint(yi),yi.addVectors(Fn.max,ed.max),Fn.expandByPoint(yi)):(Fn.expandByPoint(ed.min),Fn.expandByPoint(ed.max))}Fn.getCenter(r);let i=0;for(let n=0,s=e.count;n<s;n++)yi.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(yi));if(t)for(let n=0,s=t.length;n<s;n++){let a=t[n],o=this.morphTargetsRelative;for(let l=0,h=a.count;l<h;l++)yi.fromBufferAttribute(a,l),o&&(Vu.fromBufferAttribute(e,l),yi.add(Vu)),i=Math.max(i,r.distanceToSquared(yi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,s=t.uv.array,a=i.length/3;t.tangent===void 0&&this.setAttribute("tangent",new dt(new Float32Array(4*a),4));let o=t.tangent.array,l=[],h=[];for(let D=0;D<a;D++)l[D]=new O,h[D]=new O;let d=new O,p=new O,f=new O,m=new Q,v=new Q,w=new Q,S=new O,y=new O;function g(D,C,N){d.fromArray(i,D*3),p.fromArray(i,C*3),f.fromArray(i,N*3),m.fromArray(s,D*2),v.fromArray(s,C*2),w.fromArray(s,N*2),p.sub(d),f.sub(d),v.sub(m),w.sub(m);let U=1/(v.x*w.y-w.x*v.y);!isFinite(U)||(S.copy(p).multiplyScalar(w.y).addScaledVector(f,-v.y).multiplyScalar(U),y.copy(f).multiplyScalar(v.x).addScaledVector(p,-w.x).multiplyScalar(U),l[D].add(S),l[C].add(S),l[N].add(S),h[D].add(y),h[C].add(y),h[N].add(y))}let _=this.groups;_.length===0&&(_=[{start:0,count:r.length}]);for(let D=0,C=_.length;D<C;++D){let N=_[D],U=N.start,V=N.count;for(let k=U,G=U+V;k<G;k+=3)g(r[k+0],r[k+1],r[k+2])}let b=new O,T=new O,A=new O,M=new O;function L(D){A.fromArray(n,D*3),M.copy(A);let C=l[D];b.copy(C),b.sub(A.multiplyScalar(A.dot(C))).normalize(),T.crossVectors(M,C);let N=T.dot(h[D])<0?-1:1;o[D*4]=b.x,o[D*4+1]=b.y,o[D*4+2]=b.z,o[D*4+3]=N}for(let D=0,C=_.length;D<C;++D){let N=_[D],U=N.start,V=N.count;for(let k=U,G=U+V;k<G;k+=3)L(r[k+0]),L(r[k+1]),L(r[k+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new dt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,f=r.count;p<f;p++)r.setXYZ(p,0,0,0);let i=new O,n=new O,s=new O,a=new O,o=new O,l=new O,h=new O,d=new O;if(e)for(let p=0,f=e.count;p<f;p+=3){let m=e.getX(p+0),v=e.getX(p+1),w=e.getX(p+2);i.fromBufferAttribute(t,m),n.fromBufferAttribute(t,v),s.fromBufferAttribute(t,w),h.subVectors(s,n),d.subVectors(i,n),h.cross(d),a.fromBufferAttribute(r,m),o.fromBufferAttribute(r,v),l.fromBufferAttribute(r,w),a.add(h),o.add(h),l.add(h),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(v,o.x,o.y,o.z),r.setXYZ(w,l.x,l.y,l.z)}else for(let p=0,f=t.count;p<f;p+=3)i.fromBufferAttribute(t,p+0),n.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),h.subVectors(s,n),d.subVectors(i,n),h.cross(d),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let r=this.attributes;for(let i in r){if(e.attributes[i]===void 0)continue;let n=r[i].array,s=e.attributes[i],a=s.array,o=s.itemSize*t,l=Math.min(a.length,n.length-o);for(let h=0,d=o;h<l;h++,d++)n[d]=a[h]}return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)yi.fromBufferAttribute(e,t),yi.normalize(),e.setXYZ(t,yi.x,yi.y,yi.z)}toNonIndexed(){function e(a,o){let l=a.array,h=a.itemSize,d=a.normalized,p=new l.constructor(o.length*h),f=0,m=0;for(let v=0,w=o.length;v<w;v++){a.isInterleavedBufferAttribute?f=o[v]*a.data.stride+a.offset:f=o[v]*h;for(let S=0;S<h;S++)p[m++]=l[f++]}return new dt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new st,r=this.index.array,i=this.attributes;for(let a in i){let o=i[a],l=e(o,r);t.setAttribute(a,l)}let n=this.morphAttributes;for(let a in n){let o=[],l=n[a];for(let h=0,d=l.length;h<d;h++){let p=l[h],f=e(p,r);o.push(f)}t.morphAttributes[a]=o}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,o=s.length;a<o;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let o in r){let l=r[o];e.data.attributes[o]=l.toJSON(e.data)}let i={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],h=[];for(let d=0,p=l.length;d<p;d++){let f=l[d];h.push(f.toJSON(e.data))}h.length>0&&(i[o]=h,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new st().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let h=i[l];this.setAttribute(l,h.clone(t))}let n=e.morphAttributes;for(let l in n){let h=[],d=n[l];for(let p=0,f=d.length;p<f;p++)h.push(d[p].clone(t));this.morphAttributes[l]=h}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,h=s.length;l<h;l++){let d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};st.prototype.isBufferGeometry=!0;var BE=new Ge,ju=new bl,a1=new ea,Uo=new O,ko=new O,Ho=new O,o1=new O,l1=new O,u1=new O,sm=new O,am=new O,om=new O,lm=new Q,um=new Q,hm=new Q,h1=new O,cm=new O,Ai=class extends Rt{constructor(e=new st,t=new ou){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){let a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}else{let t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),a1.copy(r.boundingSphere),a1.applyMatrix4(n),e.ray.intersectsSphere(a1)===!1)||(BE.copy(n).invert(),ju.copy(e.ray).applyMatrix4(BE),r.boundingBox!==null&&ju.intersectsBox(r.boundingBox)===!1))return;let s;if(r.isBufferGeometry){let a=r.index,o=r.attributes.position,l=r.morphAttributes.position,h=r.morphTargetsRelative,d=r.attributes.uv,p=r.attributes.uv2,f=r.groups,m=r.drawRange;if(a!==null)if(Array.isArray(i))for(let v=0,w=f.length;v<w;v++){let S=f[v],y=i[S.materialIndex],g=Math.max(S.start,m.start),_=Math.min(S.start+S.count,m.start+m.count);for(let b=g,T=_;b<T;b+=3){let A=a.getX(b),M=a.getX(b+1),L=a.getX(b+2);s=dm(this,y,e,ju,o,l,h,d,p,A,M,L),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=S.materialIndex,t.push(s))}}else{let v=Math.max(0,m.start),w=Math.min(a.count,m.start+m.count);for(let S=v,y=w;S<y;S+=3){let g=a.getX(S),_=a.getX(S+1),b=a.getX(S+2);s=dm(this,i,e,ju,o,l,h,d,p,g,_,b),s&&(s.faceIndex=Math.floor(S/3),t.push(s))}}else if(o!==void 0)if(Array.isArray(i))for(let v=0,w=f.length;v<w;v++){let S=f[v],y=i[S.materialIndex],g=Math.max(S.start,m.start),_=Math.min(S.start+S.count,m.start+m.count);for(let b=g,T=_;b<T;b+=3){let A=b,M=b+1,L=b+2;s=dm(this,y,e,ju,o,l,h,d,p,A,M,L),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=S.materialIndex,t.push(s))}}else{let v=Math.max(0,m.start),w=Math.min(o.count,m.start+m.count);for(let S=v,y=w;S<y;S+=3){let g=S,_=S+1,b=S+2;s=dm(this,i,e,ju,o,l,h,d,p,g,_,b),s&&(s.faceIndex=Math.floor(S/3),t.push(s))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}};Ai.prototype.isMesh=!0;function c6(e,t,r,i,n,s,a,o){let l;if(t.side===Tr?l=i.intersectTriangle(a,s,n,!0,o):l=i.intersectTriangle(n,s,a,t.side!==bi,o),l===null)return null;cm.copy(o),cm.applyMatrix4(e.matrixWorld);let h=r.ray.origin.distanceTo(cm);return h<r.near||h>r.far?null:{distance:h,point:cm.clone(),object:e}}function dm(e,t,r,i,n,s,a,o,l,h,d,p){Uo.fromBufferAttribute(n,h),ko.fromBufferAttribute(n,d),Ho.fromBufferAttribute(n,p);let f=e.morphTargetInfluences;if(s&&f){sm.set(0,0,0),am.set(0,0,0),om.set(0,0,0);for(let v=0,w=s.length;v<w;v++){let S=f[v],y=s[v];S!==0&&(o1.fromBufferAttribute(y,h),l1.fromBufferAttribute(y,d),u1.fromBufferAttribute(y,p),a?(sm.addScaledVector(o1,S),am.addScaledVector(l1,S),om.addScaledVector(u1,S)):(sm.addScaledVector(o1.sub(Uo),S),am.addScaledVector(l1.sub(ko),S),om.addScaledVector(u1.sub(Ho),S)))}Uo.add(sm),ko.add(am),Ho.add(om)}e.isSkinnedMesh&&(e.boneTransform(h,Uo),e.boneTransform(d,ko),e.boneTransform(p,Ho));let m=c6(e,t,r,i,Uo,ko,Ho,h1);if(m){o&&(lm.fromBufferAttribute(o,h),um.fromBufferAttribute(o,d),hm.fromBufferAttribute(o,p),m.uv=ai.getUV(h1,Uo,ko,Ho,lm,um,hm,new Q)),l&&(lm.fromBufferAttribute(l,h),um.fromBufferAttribute(l,d),hm.fromBufferAttribute(l,p),m.uv2=ai.getUV(h1,Uo,ko,Ho,lm,um,hm,new Q));let v={a:h,b:d,c:p,normal:new O,materialIndex:0};ai.getNormal(Uo,ko,Ho,v.normal),m.face=v}return m}var fl=class extends st{constructor(e=1,t=1,r=1,i=1,n=1,s=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:s};let a=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s);let o=[],l=[],h=[],d=[],p=0,f=0;m("z","y","x",-1,-1,r,t,e,s,n,0),m("z","y","x",1,-1,r,t,-e,s,n,1),m("x","z","y",1,1,e,r,t,i,s,2),m("x","z","y",1,-1,e,r,-t,i,s,3),m("x","y","z",1,-1,e,t,r,i,n,4),m("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(o),this.setAttribute("position",new Je(l,3)),this.setAttribute("normal",new Je(h,3)),this.setAttribute("uv",new Je(d,2));function m(v,w,S,y,g,_,b,T,A,M,L){let D=_/A,C=b/M,N=_/2,U=b/2,V=T/2,k=A+1,G=M+1,$=0,W=0,H=new O;for(let X=0;X<G;X++){let J=X*C-U;for(let Y=0;Y<k;Y++){let ee=Y*D-N;H[v]=ee*y,H[w]=J*g,H[S]=V,l.push(H.x,H.y,H.z),H[v]=0,H[w]=0,H[S]=T>0?1:-1,h.push(H.x,H.y,H.z),d.push(Y/A),d.push(1-X/M),$+=1}}for(let X=0;X<M;X++)for(let J=0;J<A;J++){let Y=p+J+k*X,ee=p+J+k*(X+1),ie=p+(J+1)+k*(X+1),ue=p+(J+1)+k*X;o.push(Y,ee,ue),o.push(ee,ie,ue),W+=6}a.addGroup(f,W,L),f+=W,p+=$}}static fromJSON(e){return new fl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Zh(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function Xi(e){let t={};for(let r=0;r<e.length;r++){let i=Zh(e[r]);for(let n in i)t[n]=i[n]}return t}var wc={clone:Zh,merge:Xi},d6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,p6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,zi=class extends rn{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=d6,this.fragmentShader=p6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zh(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}};zi.prototype.isShaderMaterial=!0;var pu=class extends Rt{constructor(){super();this.type="Camera",this.matrixWorldInverse=new Ge,this.projectionMatrix=new Ge,this.projectionMatrixInverse=new Ge}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};pu.prototype.isCamera=!0;var Di=class extends pu{constructor(e=50,t=1,r=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=ap*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Bd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ap*2*Math.atan(Math.tan(Bd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Bd*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let o=s.fullWidth,l=s.fullHeight;n+=s.offsetX*i/o,t-=s.offsetY*r/l,i*=s.width/o,r*=s.height/l}let a=this.filmOffset;a!==0&&(n+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};Di.prototype.isPerspectiveCamera=!0;var Wu=90,Ju=1,O_=class extends Rt{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;let i=new Di(Wu,Ju,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new O(1,0,0)),this.add(i);let n=new Di(Wu,Ju,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new O(-1,0,0)),this.add(n);let s=new Di(Wu,Ju,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new O(0,1,0)),this.add(s);let a=new Di(Wu,Ju,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new O(0,-1,0)),this.add(a);let o=new Di(Wu,Ju,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new O(0,0,1)),this.add(o);let l=new Di(Wu,Ju,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new O(0,0,-1)),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,s,a,o,l]=this.children,h=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;let p=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,o),r.texture.generateMipmaps=p,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(d),e.xr.enabled=h}},Vp=class extends Ir{constructor(e,t,r,i,n,s,a,o,l,h){e=e!==void 0?e:[],t=t!==void 0?t:Fp,a=a!==void 0?a:$i;super(e,t,r,i,n,s,a,o,l,h);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};Vp.prototype.isCubeTexture=!0;var ZO=class extends li{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r);super(e,e,t);t=t||{},this.texture=new Vp(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ar,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=mi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fl(5,5,5),n=new zi({name:"CubemapFromEquirect",uniforms:Zh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Tr,blending:Ni});n.uniforms.tEquirect.value=t;let s=new Ai(i,n),a=t.minFilter;return t.minFilter===du&&(t.minFilter=ar),new O_(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(n)}};ZO.prototype.isWebGLCubeRenderTarget=!0;var c1=new O,f6=new O,m6=new Nr,Gs=class{constructor(e=new O(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=c1.subVectors(r,t).cross(f6.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(c1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||m6.getNormalMatrix(e),i=this.coplanarPoint(c1).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};Gs.prototype.isPlane=!0;var Yu=new ea,pm=new O,jv=class{constructor(e=new Gs,t=new Gs,r=new Gs,i=new Gs,n=new Gs,s=new Gs){this.planes=[e,t,r,i,n,s]}set(e,t,r,i,n,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(n),a[5].copy(s),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],l=r[5],h=r[6],d=r[7],p=r[8],f=r[9],m=r[10],v=r[11],w=r[12],S=r[13],y=r[14],g=r[15];return t[0].setComponents(a-i,d-o,v-p,g-w).normalize(),t[1].setComponents(a+i,d+o,v+p,g+w).normalize(),t[2].setComponents(a+n,d+l,v+f,g+S).normalize(),t[3].setComponents(a-n,d-l,v-f,g-S).normalize(),t[4].setComponents(a-s,d-h,v-m,g-y).normalize(),t[5].setComponents(a+s,d+h,v+m,g+y).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Yu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Yu)}intersectsSprite(e){return Yu.center.set(0,0,0),Yu.radius=.7071067811865476,Yu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yu)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(pm.x=i.normal.x>0?e.max.x:e.min.x,pm.y=i.normal.y>0?e.max.y:e.min.y,pm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(pm)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function $O(){let e=null,t=!1,r=null,i=null;function n(s,a){r(s,a),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){r=s},setContext:function(s){e=s}}}function g6(e,t){let r=t.isWebGL2,i=new WeakMap;function n(h,d){let p=h.array,f=h.usage,m=e.createBuffer();e.bindBuffer(d,m),e.bufferData(d,p,f),h.onUploadCallback();let v=5126;return p instanceof Float32Array?v=5126:p instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):p instanceof Uint16Array?h.isFloat16BufferAttribute?r?v=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):v=5123:p instanceof Int16Array?v=5122:p instanceof Uint32Array?v=5125:p instanceof Int32Array?v=5124:p instanceof Int8Array?v=5120:(p instanceof Uint8Array||p instanceof Uint8ClampedArray)&&(v=5121),{buffer:m,type:v,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version}}function s(h,d,p){let f=d.array,m=d.updateRange;e.bindBuffer(p,h),m.count===-1?e.bufferSubData(p,0,f):(r?e.bufferSubData(p,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):e.bufferSubData(p,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1)}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);let d=i.get(h);d&&(e.deleteBuffer(d.buffer),i.delete(h))}function l(h,d){if(h.isGLBufferAttribute){let f=i.get(h);(!f||f.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);let p=i.get(h);p===void 0?i.set(h,n(h,d)):p.version<h.version&&(s(p.buffer,h,d),p.version=h.version)}return{get:a,remove:o,update:l}}var Wv=class extends st{constructor(e=1,t=1,r=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,s=t/2,a=Math.floor(r),o=Math.floor(i),l=a+1,h=o+1,d=e/a,p=t/o,f=[],m=[],v=[],w=[];for(let S=0;S<h;S++){let y=S*p-s;for(let g=0;g<l;g++){let _=g*d-n;m.push(_,-y,0),v.push(0,0,1),w.push(g/a),w.push(1-S/o)}}for(let S=0;S<o;S++)for(let y=0;y<a;y++){let g=y+l*S,_=y+l*(S+1),b=y+1+l*(S+1),T=y+1+l*S;f.push(g,_,T),f.push(_,b,T)}this.setIndex(f),this.setAttribute("position",new Je(m,3)),this.setAttribute("normal",new Je(v,3)),this.setAttribute("uv",new Je(w,2))}static fromJSON(e){return new Wv(e.width,e.height,e.widthSegments,e.heightSegments)}},v6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,y6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,x6=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,w6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,_6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,S6="vec3 transformed = vec3( position );",b6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,A6=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {
	float fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );
	return ( f90 - f0 ) * fresnel + f0;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,M6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,E6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,T6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,C6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,L6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,O6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,P6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,D6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,R6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,N6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,I6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,B6=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,z6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,F6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,U6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,k6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,H6="gl_FragColor = linearToOutputTexel( gl_FragColor );",G6=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,V6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,j6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,W6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,J6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Y6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,q6=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,X6=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,Q6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,K6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Z6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,$6=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,e8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,t8=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,r8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,i8=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,n8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,s8=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,a8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,o8=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,l8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	#ifdef SPECULAR
		vec3 specularIntensityFactor = vec3( specularIntensity );
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );
	#else
		vec3 specularIntensityFactor = vec3( 1.0 );
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularColorF90 = vec3( 1.0 );
	#endif
	material.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
	material.specularColorF90 = vec3( 1.0 );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,u8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
	vec3 specularColorF90;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,h8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,c8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,d8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,p8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,f8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,m8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,g8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,v8=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,y8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,x8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,w8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,S8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,b8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,A8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,M8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,E8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,T8=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,C8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,L8=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,O8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,P8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,D8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,R8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,N8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,I8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,B8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,z8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,F8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,U8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,k8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,H8=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,G8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,V8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,j8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,W8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,J8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Y8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,q8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,X8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Q8=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,K8=`#ifdef USE_TRANSMISSION
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition.xyz / vWorldPosition.w;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	float ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );
	vec3 transmission = transmissionFactor * getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );
#endif`,Z8=`#ifdef USE_TRANSMISSION
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec4 vWorldPosition;
	vec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {
		vec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);
		vec3 modelScale;
		modelScale.x = length(vec3(modelMatrix[0].xyz));
		modelScale.y = length(vec3(modelMatrix[1].xyz));
		modelScale.z = length(vec3(modelMatrix[2].xyz));
		return normalize(refractionVector) * thickness * modelScale;
	}
	float applyIorToRoughness(float roughness, float ior) {
		return roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);
	}
	vec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {
		float framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);
		return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;
	}
	vec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {
		if (attenuationDistance == 0.0) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;
			vec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);			return transmittance * radiance;
		}
	}
	vec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance) {
		vec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);
		vec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);
		return (1.0 - specularColor) * attenuatedColor * baseColor;
	}
#endif`,$8=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,ej=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,tj=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,rj=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,ij=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,nj=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,sj=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,aj=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,oj=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lj=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,uj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hj=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,cj=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,dj=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,pj=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fj=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,mj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,gj=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vj=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yj=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xj=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wj=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_j=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sj=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bj=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
		#ifdef USE_TANGENT
			vTangent = normalize( transformedTangent );
			vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
		#endif
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Aj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mj=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ej=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tj=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Cj=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <transmission_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lj=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#ifdef USE_TRANSMISSION
	varying vec4 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition;
#endif
}`,Oj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,Pj=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Dj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Rj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Nj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ij=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,zj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,It={alphamap_fragment:v6,alphamap_pars_fragment:y6,alphatest_fragment:x6,aomap_fragment:w6,aomap_pars_fragment:_6,begin_vertex:S6,beginnormal_vertex:b6,bsdfs:A6,bumpmap_pars_fragment:M6,clipping_planes_fragment:E6,clipping_planes_pars_fragment:T6,clipping_planes_pars_vertex:C6,clipping_planes_vertex:L6,color_fragment:O6,color_pars_fragment:P6,color_pars_vertex:D6,color_vertex:R6,common:N6,cube_uv_reflection_fragment:I6,defaultnormal_vertex:B6,displacementmap_pars_vertex:z6,displacementmap_vertex:F6,emissivemap_fragment:U6,emissivemap_pars_fragment:k6,encodings_fragment:H6,encodings_pars_fragment:G6,envmap_fragment:V6,envmap_common_pars_fragment:j6,envmap_pars_fragment:W6,envmap_pars_vertex:J6,envmap_physical_pars_fragment:i8,envmap_vertex:Y6,fog_vertex:q6,fog_pars_vertex:X6,fog_fragment:Q6,fog_pars_fragment:K6,gradientmap_pars_fragment:Z6,lightmap_fragment:$6,lightmap_pars_fragment:e8,lights_lambert_vertex:t8,lights_pars_begin:r8,lights_toon_fragment:n8,lights_toon_pars_fragment:s8,lights_phong_fragment:a8,lights_phong_pars_fragment:o8,lights_physical_fragment:l8,lights_physical_pars_fragment:u8,lights_fragment_begin:h8,lights_fragment_maps:c8,lights_fragment_end:d8,logdepthbuf_fragment:p8,logdepthbuf_pars_fragment:f8,logdepthbuf_pars_vertex:m8,logdepthbuf_vertex:g8,map_fragment:v8,map_pars_fragment:y8,map_particle_fragment:x8,map_particle_pars_fragment:w8,metalnessmap_fragment:_8,metalnessmap_pars_fragment:S8,morphnormal_vertex:b8,morphtarget_pars_vertex:A8,morphtarget_vertex:M8,normal_fragment_begin:E8,normal_fragment_maps:T8,normalmap_pars_fragment:C8,clearcoat_normal_fragment_begin:L8,clearcoat_normal_fragment_maps:O8,clearcoat_pars_fragment:P8,packing:D8,premultiplied_alpha_fragment:R8,project_vertex:N8,dithering_fragment:I8,dithering_pars_fragment:B8,roughnessmap_fragment:z8,roughnessmap_pars_fragment:F8,shadowmap_pars_fragment:U8,shadowmap_pars_vertex:k8,shadowmap_vertex:H8,shadowmask_pars_fragment:G8,skinbase_vertex:V8,skinning_pars_vertex:j8,skinning_vertex:W8,skinnormal_vertex:J8,specularmap_fragment:Y8,specularmap_pars_fragment:q8,tonemapping_fragment:X8,tonemapping_pars_fragment:Q8,transmission_fragment:K8,transmission_pars_fragment:Z8,uv_pars_fragment:$8,uv_pars_vertex:ej,uv_vertex:tj,uv2_pars_fragment:rj,uv2_pars_vertex:ij,uv2_vertex:nj,worldpos_vertex:sj,background_frag:aj,background_vert:oj,cube_frag:lj,cube_vert:uj,depth_frag:hj,depth_vert:cj,distanceRGBA_frag:dj,distanceRGBA_vert:pj,equirect_frag:fj,equirect_vert:mj,linedashed_frag:gj,linedashed_vert:vj,meshbasic_frag:yj,meshbasic_vert:xj,meshlambert_frag:wj,meshlambert_vert:_j,meshmatcap_frag:Sj,meshmatcap_vert:bj,meshtoon_frag:Aj,meshtoon_vert:Mj,meshphong_frag:Ej,meshphong_vert:Tj,meshphysical_frag:Cj,meshphysical_vert:Lj,normal_frag:Oj,normal_vert:Pj,points_frag:Dj,points_vert:Rj,shadow_frag:Nj,shadow_vert:Ij,sprite_frag:Bj,sprite_vert:zj},Fe={common:{diffuse:{value:new Ue(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Nr},uv2Transform:{value:new Nr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ue(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ue(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Nr}},sprite:{diffuse:{value:new Ue(16777215)},opacity:{value:1},center:{value:new Q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Nr}}},_a={basic:{uniforms:Xi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.fog]),vertexShader:It.meshbasic_vert,fragmentShader:It.meshbasic_frag},lambert:{uniforms:Xi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)}}]),vertexShader:It.meshlambert_vert,fragmentShader:It.meshlambert_frag},phong:{uniforms:Xi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)},specular:{value:new Ue(1118481)},shininess:{value:30}}]),vertexShader:It.meshphong_vert,fragmentShader:It.meshphong_frag},standard:{uniforms:Xi([Fe.common,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.roughnessmap,Fe.metalnessmap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag},toon:{uniforms:Xi([Fe.common,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.gradientmap,Fe.fog,Fe.lights,{emissive:{value:new Ue(0)}}]),vertexShader:It.meshtoon_vert,fragmentShader:It.meshtoon_frag},matcap:{uniforms:Xi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,{matcap:{value:null}}]),vertexShader:It.meshmatcap_vert,fragmentShader:It.meshmatcap_frag},points:{uniforms:Xi([Fe.points,Fe.fog]),vertexShader:It.points_vert,fragmentShader:It.points_frag},dashed:{uniforms:Xi([Fe.common,Fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:It.linedashed_vert,fragmentShader:It.linedashed_frag},depth:{uniforms:Xi([Fe.common,Fe.displacementmap]),vertexShader:It.depth_vert,fragmentShader:It.depth_frag},normal:{uniforms:Xi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,{opacity:{value:1}}]),vertexShader:It.normal_vert,fragmentShader:It.normal_frag},sprite:{uniforms:Xi([Fe.sprite,Fe.fog]),vertexShader:It.sprite_vert,fragmentShader:It.sprite_frag},background:{uniforms:{uvTransform:{value:new Nr},t2D:{value:null}},vertexShader:It.background_vert,fragmentShader:It.background_frag},cube:{uniforms:Xi([Fe.envmap,{opacity:{value:1}}]),vertexShader:It.cube_vert,fragmentShader:It.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:It.equirect_vert,fragmentShader:It.equirect_frag},distanceRGBA:{uniforms:Xi([Fe.common,Fe.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:It.distanceRGBA_vert,fragmentShader:It.distanceRGBA_frag},shadow:{uniforms:Xi([Fe.lights,Fe.fog,{color:{value:new Ue(0)},opacity:{value:1}}]),vertexShader:It.shadow_vert,fragmentShader:It.shadow_frag}};_a.physical={uniforms:Xi([_a.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Q(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ue(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Ue(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Ue(1,1,1)},specularTintMap:{value:null}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag};function Fj(e,t,r,i,n){let s=new Ue(0),a=0,o,l,h=null,d=0,p=null;function f(v,w){let S=!1,y=w.isScene===!0?w.background:null;y&&y.isTexture&&(y=t.get(y));let g=e.xr,_=g.getSession&&g.getSession();_&&_.environmentBlendMode==="additive"&&(y=null),y===null?m(s,a):y&&y.isColor&&(m(y,1),S=!0),(e.autoClear||S)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.mapping===kp)?(l===void 0&&(l=new Ai(new fl(1,1,1),new zi({name:"BackgroundCubeMaterial",uniforms:Zh(_a.cube.uniforms),vertexShader:_a.cube.vertexShader,fragmentShader:_a.cube.fragmentShader,side:Tr,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(b,T,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=y,l.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(h!==y||d!==y.version||p!==e.toneMapping)&&(l.material.needsUpdate=!0,h=y,d=y.version,p=e.toneMapping),v.unshift(l,l.geometry,l.material,0,0,null)):y&&y.isTexture&&(o===void 0&&(o=new Ai(new Wv(2,2),new zi({name:"BackgroundMaterial",uniforms:Zh(_a.background.uniforms),vertexShader:_a.background.vertexShader,fragmentShader:_a.background.fragmentShader,side:dl,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),o.material.uniforms.uvTransform.value.copy(y.matrix),(h!==y||d!==y.version||p!==e.toneMapping)&&(o.material.needsUpdate=!0,h=y,d=y.version,p=e.toneMapping),v.unshift(o,o.geometry,o.material,0,0,null))}function m(v,w){r.buffers.color.setClear(v.r,v.g,v.b,w,n)}return{getClearColor:function(){return s},setClearColor:function(v,w=1){s.set(v),a=w,m(s,a)},getClearAlpha:function(){return a},setClearAlpha:function(v){a=v,m(s,a)},render:f}}function Uj(e,t,r,i){let n=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=w(null),h=l;function d(V,k,G,$,W){let H=!1;if(a){let X=v($,G,k);h!==X&&(h=X,f(h.object)),H=S($,W),H&&y($,W)}else{let X=k.wireframe===!0;(h.geometry!==$.id||h.program!==G.id||h.wireframe!==X)&&(h.geometry=$.id,h.program=G.id,h.wireframe=X,H=!0)}V.isInstancedMesh===!0&&(H=!0),W!==null&&r.update(W,34963),H&&(M(V,k,G,$),W!==null&&e.bindBuffer(34963,r.get(W).buffer))}function p(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function f(V){return i.isWebGL2?e.bindVertexArray(V):s.bindVertexArrayOES(V)}function m(V){return i.isWebGL2?e.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function v(V,k,G){let $=G.wireframe===!0,W=o[V.id];W===void 0&&(W={},o[V.id]=W);let H=W[k.id];H===void 0&&(H={},W[k.id]=H);let X=H[$];return X===void 0&&(X=w(p()),H[$]=X),X}function w(V){let k=[],G=[],$=[];for(let W=0;W<n;W++)k[W]=0,G[W]=0,$[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:G,attributeDivisors:$,object:V,attributes:{},index:null}}function S(V,k){let G=h.attributes,$=V.attributes,W=0;for(let H in $){let X=G[H],J=$[H];if(X===void 0||X.attribute!==J||X.data!==J.data)return!0;W++}return h.attributesNum!==W||h.index!==k}function y(V,k){let G={},$=V.attributes,W=0;for(let H in $){let X=$[H],J={};J.attribute=X,X.data&&(J.data=X.data),G[H]=J,W++}h.attributes=G,h.attributesNum=W,h.index=k}function g(){let V=h.newAttributes;for(let k=0,G=V.length;k<G;k++)V[k]=0}function _(V){b(V,0)}function b(V,k){let G=h.newAttributes,$=h.enabledAttributes,W=h.attributeDivisors;G[V]=1,$[V]===0&&(e.enableVertexAttribArray(V),$[V]=1),W[V]!==k&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,k),W[V]=k)}function T(){let V=h.newAttributes,k=h.enabledAttributes;for(let G=0,$=k.length;G<$;G++)k[G]!==V[G]&&(e.disableVertexAttribArray(G),k[G]=0)}function A(V,k,G,$,W,H){i.isWebGL2===!0&&(G===5124||G===5125)?e.vertexAttribIPointer(V,k,G,W,H):e.vertexAttribPointer(V,k,G,$,W,H)}function M(V,k,G,$){if(i.isWebGL2===!1&&(V.isInstancedMesh||$.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;g();let W=$.attributes,H=G.getAttributes(),X=k.defaultAttributeValues;for(let J in H){let Y=H[J];if(Y>=0){let ee=W[J];if(ee!==void 0){let ie=ee.normalized,ue=ee.itemSize,we=r.get(ee);if(we===void 0)continue;let q=we.buffer,Se=we.type,me=we.bytesPerElement;if(ee.isInterleavedBufferAttribute){let re=ee.data,K=re.stride,ne=ee.offset;re&&re.isInstancedInterleavedBuffer?(b(Y,re.meshPerAttribute),$._maxInstanceCount===void 0&&($._maxInstanceCount=re.meshPerAttribute*re.count)):_(Y),e.bindBuffer(34962,q),A(Y,ue,Se,ie,K*me,ne*me)}else ee.isInstancedBufferAttribute?(b(Y,ee.meshPerAttribute),$._maxInstanceCount===void 0&&($._maxInstanceCount=ee.meshPerAttribute*ee.count)):_(Y),e.bindBuffer(34962,q),A(Y,ue,Se,ie,0,0)}else if(J==="instanceMatrix"){let ie=r.get(V.instanceMatrix);if(ie===void 0)continue;let ue=ie.buffer,we=ie.type;b(Y+0,1),b(Y+1,1),b(Y+2,1),b(Y+3,1),e.bindBuffer(34962,ue),e.vertexAttribPointer(Y+0,4,we,!1,64,0),e.vertexAttribPointer(Y+1,4,we,!1,64,16),e.vertexAttribPointer(Y+2,4,we,!1,64,32),e.vertexAttribPointer(Y+3,4,we,!1,64,48)}else if(J==="instanceColor"){let ie=r.get(V.instanceColor);if(ie===void 0)continue;let ue=ie.buffer,we=ie.type;b(Y,1),e.bindBuffer(34962,ue),e.vertexAttribPointer(Y,3,we,!1,12,0)}else if(X!==void 0){let ie=X[J];if(ie!==void 0)switch(ie.length){case 2:e.vertexAttrib2fv(Y,ie);break;case 3:e.vertexAttrib3fv(Y,ie);break;case 4:e.vertexAttrib4fv(Y,ie);break;default:e.vertexAttrib1fv(Y,ie)}}}}T()}function L(){N();for(let V in o){let k=o[V];for(let G in k){let $=k[G];for(let W in $)m($[W].object),delete $[W];delete k[G]}delete o[V]}}function D(V){if(o[V.id]===void 0)return;let k=o[V.id];for(let G in k){let $=k[G];for(let W in $)m($[W].object),delete $[W];delete k[G]}delete o[V.id]}function C(V){for(let k in o){let G=o[k];if(G[V.id]===void 0)continue;let $=G[V.id];for(let W in $)m($[W].object),delete $[W];delete G[V.id]}}function N(){U(),h!==l&&(h=l,f(h.object))}function U(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:N,resetDefaultState:U,dispose:L,releaseStatesOfGeometry:D,releaseStatesOfProgram:C,initAttributes:g,enableAttribute:_,disableUnusedAttributes:T}}function kj(e,t,r,i){let n=i.isWebGL2,s;function a(h){s=h}function o(h,d){e.drawArrays(s,h,d),r.update(d,s,1)}function l(h,d,p){if(p===0)return;let f,m;if(n)f=e,m="drawArraysInstanced";else if(f=t.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[m](s,h,d,p),r.update(d,s,p)}this.setMode=a,this.render=o,this.renderInstances=l}function Hj(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let M=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(M){if(M==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";M="mediump"}return M==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&e instanceof WebGL2ComputeRenderingContext,o=r.precision!==void 0?r.precision:"highp",l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let h=a||t.has("WEBGL_draw_buffers"),d=r.logarithmicDepthBuffer===!0,p=e.getParameter(34930),f=e.getParameter(35660),m=e.getParameter(3379),v=e.getParameter(34076),w=e.getParameter(34921),S=e.getParameter(36347),y=e.getParameter(36348),g=e.getParameter(36349),_=f>0,b=a||t.has("OES_texture_float"),T=_&&b,A=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:n,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:v,maxAttributes:w,maxVertexUniforms:S,maxVaryings:y,maxFragmentUniforms:g,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:T,maxSamples:A}}function Gj(e){let t=this,r=null,i=0,n=!1,s=!1,a=new Gs,o=new Nr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,f,m){let v=p.length!==0||f||i!==0||n;return n=f,r=d(p,m,0),i=p.length,v},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,h()},this.setState=function(p,f,m){let v=p.clippingPlanes,w=p.clipIntersection,S=p.clipShadows,y=e.get(p);if(!n||v===null||v.length===0||s&&!S)s?d(null):h();else{let g=s?0:i,_=g*4,b=y.clippingState||null;l.value=b,b=d(v,f,_,m);for(let T=0;T!==_;++T)b[T]=r[T];y.clippingState=b,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=g}};function h(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function d(p,f,m,v){let w=p!==null?p.length:0,S=null;if(w!==0){if(S=l.value,v!==!0||S===null){let y=m+w*4,g=f.matrixWorldInverse;o.getNormalMatrix(g),(S===null||S.length<y)&&(S=new Float32Array(y));for(let _=0,b=m;_!==w;++_,b+=4)a.copy(p[_]).applyMatrix4(g,o),a.normal.toArray(S,b),S[b+3]=a.constant}l.value=S,l.needsUpdate=!0}return t.numPlanes=w,t.numIntersection=0,S}}function Vj(e){let t=new WeakMap;function r(a,o){return o===Cx?a.mapping=Fp:o===Lx&&(a.mapping=Up),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===Cx||o===Lx)if(t.has(a)){let l=t.get(a).texture;return r(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let h=e.getRenderTarget(),d=new ZO(l.height/2);return d.fromEquirectangularTexture(e,a),t.set(a,d),e.setRenderTarget(h),a.addEventListener("dispose",n),r(d.texture,a.mapping)}else return null}}return a}function n(a){let o=a.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var Jv=class extends pu{constructor(e=-1,t=1,r=1,i=-1,n=.1,s=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,s=r+e,a=i+t,o=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,a-=h*this.view.offsetY,o=a-h*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};Jv.prototype.isOrthographicCamera=!0;var Yv=class extends zi{constructor(e){super(e);this.type="RawShaderMaterial"}};Yv.prototype.isRawShaderMaterial=!0;var Fh=4,rl=8,ga=Math.pow(2,rl),e3=[.125,.215,.35,.446,.526,.582],t3=rl-Fh+1+e3.length,qu=20,Ta={[Bi]:0,[Hp]:1,[Gv]:2,[E_]:3,[T_]:4,[C_]:5,[Gp]:6},Gl=new ou({side:Tr,depthWrite:!1,depthTest:!1}),jj=new Ai(new fl,Gl),d1=new Jv,{_lodPlanes:td,_sizeLods:zE,_sigmas:fm}=Yj(),FE=new Ue,p1=null,Vl=(1+Math.sqrt(5))/2,Xu=1/Vl,UE=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,Vl,Xu),new O(0,Vl,-Xu),new O(Xu,0,Vl),new O(-Xu,0,Vl),new O(Vl,Xu,0),new O(-Vl,Xu,0)];function kE(e){let t=Math.max(e.r,e.g,e.b),r=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return e.multiplyScalar(Math.pow(2,-r)),(r+128)/255}var Wj=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=qj(qu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){p1=this._renderer.getRenderTarget();let n=this._allocateTargets();return this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=VE(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=GE(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<td.length;e++)td[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(p1),e.scissorTest=!1,mm(e,0,0,e.width,e.height)}_fromTexture(e){p1=this._renderer.getRenderTarget();let t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){let t={magFilter:Zr,minFilter:Zr,generateMipmaps:!1,type:Mi,format:YG,encoding:Jj(e)?e.encoding:Gv,depthBuffer:!1},r=HE(t);return r.depthBuffer=!e,this._pingPongRenderTarget=HE(t),r}_compileMaterial(e){let t=new Ai(td[0],e);this._renderer.compile(t,d1)}_sceneToCubeUV(e,t,r,i){let n=90,s=1,a=new Di(n,s,t,r),o=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.outputEncoding,f=h.toneMapping;h.getClearColor(FE),h.toneMapping=$l,h.outputEncoding=Bi,h.autoClear=!1;let m=!1,v=e.background;if(v){if(v.isColor){Gl.color.copy(v).convertSRGBToLinear(),e.background=null;let w=kE(Gl.color);Gl.opacity=w,m=!0}}else{Gl.color.copy(FE).convertSRGBToLinear();let w=kE(Gl.color);Gl.opacity=w,m=!0}for(let w=0;w<6;w++){let S=w%3;S==0?(a.up.set(0,o[w],0),a.lookAt(l[w],0,0)):S==1?(a.up.set(0,0,o[w]),a.lookAt(0,l[w],0)):(a.up.set(0,o[w],0),a.lookAt(0,0,l[w])),mm(i,S*ga,w>2?ga:0,ga,ga),h.setRenderTarget(i),m&&h.render(jj,a),h.render(e,a)}h.toneMapping=f,h.outputEncoding=p,h.autoClear=d}_textureToCubeUV(e,t){let r=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=VE()):this._equirectShader==null&&(this._equirectShader=GE());let i=e.isCubeTexture?this._cubemapShader:this._equirectShader,n=new Ai(td[0],i),s=i.uniforms;s.envMap.value=e,e.isCubeTexture||s.texelSize.value.set(1/e.image.width,1/e.image.height),s.inputEncoding.value=Ta[e.encoding],s.outputEncoding.value=Ta[t.texture.encoding],mm(t,0,0,3*ga,2*ga),r.setRenderTarget(t),r.render(n,d1)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<t3;i++){let n=Math.sqrt(fm[i]*fm[i]-fm[i-1]*fm[i-1]),s=UE[(i-1)%UE.length];this._blur(e,i-1,i,n,s)}t.autoClear=r}_blur(e,t,r,i,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",n),this._halfBlur(s,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,s,a){let o=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let h=3,d=new Ai(td[i],l),p=l.uniforms,f=zE[r]-1,m=isFinite(n)?Math.PI/(2*f):2*Math.PI/(2*qu-1),v=n/m,w=isFinite(n)?1+Math.floor(h*v):qu;w>qu&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${qu}`);let S=[],y=0;for(let T=0;T<qu;++T){let A=T/v,M=Math.exp(-A*A/2);S.push(M),T==0?y+=M:T<w&&(y+=2*M)}for(let T=0;T<S.length;T++)S[T]=S[T]/y;p.envMap.value=e.texture,p.samples.value=w,p.weights.value=S,p.latitudinal.value=s==="latitudinal",a&&(p.poleAxis.value=a),p.dTheta.value=m,p.mipInt.value=rl-r,p.inputEncoding.value=Ta[e.texture.encoding],p.outputEncoding.value=Ta[e.texture.encoding];let g=zE[i],_=3*Math.max(0,ga-2*g),b=(i===0?0:2*ga)+2*g*(i>rl-Fh?i-rl+Fh:0);mm(t,_,b,3*g,2*g),o.setRenderTarget(t),o.render(d,d1)}};function Jj(e){return e===void 0||e.type!==Mi?!1:e.encoding===Bi||e.encoding===Hp||e.encoding===Gp}function Yj(){let e=[],t=[],r=[],i=rl;for(let n=0;n<t3;n++){let s=Math.pow(2,i);t.push(s);let a=1/s;n>rl-Fh?a=e3[n-rl+Fh-1]:n==0&&(a=0),r.push(a);let o=1/(s-1),l=-o/2,h=1+o/2,d=[l,l,h,l,h,h,l,l,h,h,l,h],p=6,f=6,m=3,v=2,w=1,S=new Float32Array(m*f*p),y=new Float32Array(v*f*p),g=new Float32Array(w*f*p);for(let b=0;b<p;b++){let T=b%3*2/3-1,A=b>2?0:-1,M=[T,A,0,T+2/3,A,0,T+2/3,A+1,0,T,A,0,T+2/3,A+1,0,T,A+1,0];S.set(M,m*f*b),y.set(d,v*f*b);let L=[b,b,b,b,b,b];g.set(L,w*f*b)}let _=new st;_.setAttribute("position",new dt(S,m)),_.setAttribute("uv",new dt(y,v)),_.setAttribute("faceIndex",new dt(g,w)),e.push(_),i>Fh&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:r}}function HE(e){let t=new li(3*ga,3*ga,e);return t.texture.mapping=kp,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function mm(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function qj(e){let t=new Float32Array(e),r=new O(0,1,0);return new Yv({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:Ta[Bi]},outputEncoding:{value:Ta[Bi]}},vertexShader:P_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${D_()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ni,depthTest:!1,depthWrite:!1})}function GE(){let e=new Q(1,1);return new Yv({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Ta[Bi]},outputEncoding:{value:Ta[Bi]}},vertexShader:P_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${D_()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ni,depthTest:!1,depthWrite:!1})}function VE(){return new Yv({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Ta[Bi]},outputEncoding:{value:Ta[Bi]}},vertexShader:P_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${D_()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Ni,depthTest:!1,depthWrite:!1})}function P_(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function D_(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function Xj(e){let t=new WeakMap,r=null;function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let l=o.mapping,h=l===Cx||l===Lx,d=l===Fp||l===Up;if(h||d){if(t.has(o))return t.get(o).texture;{let p=o.image;if(h&&p&&p.height>0||d&&p&&n(p)){let f=e.getRenderTarget();r===null&&(r=new Wj(e));let m=h?r.fromEquirectangular(o):r.fromCubemap(o);return t.set(o,m),e.setRenderTarget(f),o.addEventListener("dispose",s),m.texture}else return null}}}return o}function n(o){let l=0,h=6;for(let d=0;d<h;d++)o[d]!==void 0&&l++;return l===h}function s(o){let l=o.target;l.removeEventListener("dispose",s);let h=t.get(l);h!==void 0&&(h.delete(l),h.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:a}}function Qj(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function Kj(e,t,r,i){let n={},s=new WeakMap;function a(p){let f=p.target;f.index!==null&&t.remove(f.index);for(let v in f.attributes)t.remove(f.attributes[v]);f.removeEventListener("dispose",a),delete n[f.id];let m=s.get(f);m&&(t.remove(m),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,r.memory.geometries--}function o(p,f){return n[f.id]===!0||(f.addEventListener("dispose",a),n[f.id]=!0,r.memory.geometries++),f}function l(p){let f=p.attributes;for(let v in f)t.update(f[v],34962);let m=p.morphAttributes;for(let v in m){let w=m[v];for(let S=0,y=w.length;S<y;S++)t.update(w[S],34962)}}function h(p){let f=[],m=p.index,v=p.attributes.position,w=0;if(m!==null){let g=m.array;w=m.version;for(let _=0,b=g.length;_<b;_+=3){let T=g[_+0],A=g[_+1],M=g[_+2];f.push(T,A,A,M,M,T)}}else{let g=v.array;w=v.version;for(let _=0,b=g.length/3-1;_<b;_+=3){let T=_+0,A=_+1,M=_+2;f.push(T,A,A,M,M,T)}}let S=new(KO(f)>65535?Fd:QO)(f,1);S.version=w;let y=s.get(p);y&&t.remove(y),s.set(p,S)}function d(p){let f=s.get(p);if(f){let m=p.index;m!==null&&f.version<m.version&&h(p)}else h(p);return s.get(p)}return{get:o,update:l,getWireframeAttribute:d}}function Zj(e,t,r,i){let n=i.isWebGL2,s;function a(f){s=f}let o,l;function h(f){o=f.type,l=f.bytesPerElement}function d(f,m){e.drawElements(s,m,o,f*l),r.update(m,s,1)}function p(f,m,v){if(v===0)return;let w,S;if(n)w=e,S="drawElementsInstanced";else if(w=t.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[S](s,m,o,f*l,v),r.update(m,s,v)}this.setMode=a,this.setIndex=h,this.render=d,this.renderInstances=p}function $j(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(r.calls++,a){case 4:r.triangles+=o*(s/3);break;case 1:r.lines+=o*(s/2);break;case 3:r.lines+=o*(s-1);break;case 2:r.lines+=o*s;break;case 0:r.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function eW(e,t){return e[0]-t[0]}function tW(e,t){return Math.abs(t[1])-Math.abs(e[1])}function rW(e){let t={},r=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function n(s,a,o,l){let h=s.morphTargetInfluences,d=h===void 0?0:h.length,p=t[a.id];if(p===void 0||p.length!==d){p=[];for(let S=0;S<d;S++)p[S]=[S,0];t[a.id]=p}for(let S=0;S<d;S++){let y=p[S];y[0]=S,y[1]=h[S]}p.sort(tW);for(let S=0;S<8;S++)S<d&&p[S][1]?(i[S][0]=p[S][0],i[S][1]=p[S][1]):(i[S][0]=Number.MAX_SAFE_INTEGER,i[S][1]=0);i.sort(eW);let f=a.morphAttributes.position,m=a.morphAttributes.normal,v=0;for(let S=0;S<8;S++){let y=i[S],g=y[0],_=y[1];g!==Number.MAX_SAFE_INTEGER&&_?(f&&a.getAttribute("morphTarget"+S)!==f[g]&&a.setAttribute("morphTarget"+S,f[g]),m&&a.getAttribute("morphNormal"+S)!==m[g]&&a.setAttribute("morphNormal"+S,m[g]),r[S]=_,v+=_):(f&&a.hasAttribute("morphTarget"+S)===!0&&a.deleteAttribute("morphTarget"+S),m&&a.hasAttribute("morphNormal"+S)===!0&&a.deleteAttribute("morphNormal"+S),r[S]=0)}let w=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(e,"morphTargetBaseInfluence",w),l.getUniforms().setValue(e,"morphTargetInfluences",r)}return{update:n}}function iW(e,t,r,i){let n=new WeakMap;function s(l){let h=i.render.frame,d=l.geometry,p=t.get(l,d);return n.get(p)!==h&&(t.update(p),n.set(p,h)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),p}function a(){n=new WeakMap}function o(l){let h=l.target;h.removeEventListener("dispose",o),r.remove(h.instanceMatrix),h.instanceColor!==null&&r.remove(h.instanceColor)}return{update:s,dispose:a}}var r3=class extends Ir{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=Si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}};r3.prototype.isDataTexture2DArray=!0;var i3=class extends Ir{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=Si,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}};i3.prototype.isDataTexture3D=!0;var n3=new Ir,nW=new r3,sW=new i3,s3=new Vp,jE=[],WE=[],JE=new Float32Array(16),YE=new Float32Array(9),qE=new Float32Array(4);function _c(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,s=jE[n];if(s===void 0&&(s=new Float32Array(n),jE[n]=s),t!==0){i.toArray(s,0);for(let a=1,o=0;a!==t;++a)o+=r,e[a].toArray(s,o)}return s}function ln(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function en(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function a3(e,t){let r=WE[t];r===void 0&&(r=new Int32Array(t),WE[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function aW(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function oW(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(ln(r,t))return;e.uniform2fv(this.addr,t),en(r,t)}}function lW(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(ln(r,t))return;e.uniform3fv(this.addr,t),en(r,t)}}function uW(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(ln(r,t))return;e.uniform4fv(this.addr,t),en(r,t)}}function hW(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(ln(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),en(r,t)}else{if(ln(r,i))return;qE.set(i),e.uniformMatrix2fv(this.addr,!1,qE),en(r,i)}}function cW(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(ln(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),en(r,t)}else{if(ln(r,i))return;YE.set(i),e.uniformMatrix3fv(this.addr,!1,YE),en(r,i)}}function dW(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(ln(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),en(r,t)}else{if(ln(r,i))return;JE.set(i),e.uniformMatrix4fv(this.addr,!1,JE),en(r,i)}}function pW(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function fW(e,t){let r=this.cache;ln(r,t)||(e.uniform2iv(this.addr,t),en(r,t))}function mW(e,t){let r=this.cache;ln(r,t)||(e.uniform3iv(this.addr,t),en(r,t))}function gW(e,t){let r=this.cache;ln(r,t)||(e.uniform4iv(this.addr,t),en(r,t))}function vW(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function yW(e,t){let r=this.cache;ln(r,t)||(e.uniform2uiv(this.addr,t),en(r,t))}function xW(e,t){let r=this.cache;ln(r,t)||(e.uniform3uiv(this.addr,t),en(r,t))}function wW(e,t){let r=this.cache;ln(r,t)||(e.uniform4uiv(this.addr,t),en(r,t))}function _W(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.safeSetTexture2D(t||n3,n)}function SW(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||sW,n)}function bW(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.safeSetTextureCube(t||s3,n)}function AW(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||nW,n)}function MW(e){switch(e){case 5126:return aW;case 35664:return oW;case 35665:return lW;case 35666:return uW;case 35674:return hW;case 35675:return cW;case 35676:return dW;case 5124:case 35670:return pW;case 35667:case 35671:return fW;case 35668:case 35672:return mW;case 35669:case 35673:return gW;case 5125:return vW;case 36294:return yW;case 36295:return xW;case 36296:return wW;case 35678:case 36198:case 36298:case 36306:case 35682:return _W;case 35679:case 36299:case 36307:return SW;case 35680:case 36300:case 36308:case 36293:return bW;case 36289:case 36303:case 36311:case 36292:return AW}}function EW(e,t){e.uniform1fv(this.addr,t)}function TW(e,t){let r=_c(t,this.size,2);e.uniform2fv(this.addr,r)}function CW(e,t){let r=_c(t,this.size,3);e.uniform3fv(this.addr,r)}function LW(e,t){let r=_c(t,this.size,4);e.uniform4fv(this.addr,r)}function OW(e,t){let r=_c(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function PW(e,t){let r=_c(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function DW(e,t){let r=_c(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function RW(e,t){e.uniform1iv(this.addr,t)}function NW(e,t){e.uniform2iv(this.addr,t)}function IW(e,t){e.uniform3iv(this.addr,t)}function BW(e,t){e.uniform4iv(this.addr,t)}function zW(e,t){e.uniform1uiv(this.addr,t)}function FW(e,t){e.uniform2uiv(this.addr,t)}function UW(e,t){e.uniform3uiv(this.addr,t)}function kW(e,t){e.uniform4uiv(this.addr,t)}function HW(e,t,r){let i=t.length,n=a3(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.safeSetTexture2D(t[s]||n3,n[s])}function GW(e,t,r){let i=t.length,n=a3(r,i);e.uniform1iv(this.addr,n);for(let s=0;s!==i;++s)r.safeSetTextureCube(t[s]||s3,n[s])}function VW(e){switch(e){case 5126:return EW;case 35664:return TW;case 35665:return CW;case 35666:return LW;case 35674:return OW;case 35675:return PW;case 35676:return DW;case 5124:case 35670:return RW;case 35667:case 35671:return NW;case 35668:case 35672:return IW;case 35669:case 35673:return BW;case 5125:return zW;case 36294:return FW;case 36295:return UW;case 36296:return kW;case 35678:case 36198:case 36298:case 36306:case 35682:return HW;case 35680:case 36300:case 36308:case 36293:return GW}}function jW(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=MW(t.type)}function o3(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=VW(t.type)}o3.prototype.updateCache=function(e){let t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),en(t,e)};function l3(e){this.id=e,this.seq=[],this.map={}}l3.prototype.setValue=function(e,t,r){let i=this.seq;for(let n=0,s=i.length;n!==s;++n){let a=i[n];a.setValue(e,t[a.id],r)}};var f1=/(\w+)(\])?(\[|\.)?/g;function XE(e,t){e.seq.push(t),e.map[t.id]=t}function WW(e,t,r){let i=e.name,n=i.length;for(f1.lastIndex=0;;){let s=f1.exec(i),a=f1.lastIndex,o=s[1],l=s[2]==="]",h=s[3];if(l&&(o=o|0),h===void 0||h==="["&&a+2===n){XE(r,h===void 0?new jW(o,e,t):new o3(o,e,t));break}else{let d=r.map[o];d===void 0&&(d=new l3(o),XE(r,d)),r=d}}}function il(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),s=e.getUniformLocation(t,n.name);WW(n,s,this)}}il.prototype.setValue=function(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)};il.prototype.setOptional=function(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)};il.upload=function(e,t,r,i){for(let n=0,s=t.length;n!==s;++n){let a=t[n],o=r[a.id];o.needsUpdate!==!1&&a.setValue(e,o.value,i)}};il.seqWithValue=function(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let s=e[i];s.id in t&&r.push(s)}return r};function QE(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var JW=0;function YW(e){let t=e.split(`
`);for(let r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join(`
`)}function u3(e){switch(e){case Bi:return["Linear","( value )"];case Hp:return["sRGB","( value )"];case Gv:return["RGBE","( value )"];case E_:return["RGBM","( value, 7.0 )"];case T_:return["RGBM","( value, 16.0 )"];case C_:return["RGBD","( value, 256.0 )"];case Gp:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case NV:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function KE(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let s=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+r+`
`+n+YW(s)}function Qu(e,t){let r=u3(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function qW(e,t){let r=u3(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function XW(e,t){let r;switch(t){case NG:r="Linear";break;case IG:r="Reinhard";break;case BG:r="OptimizedCineon";break;case zG:r="ACESFilmic";break;case FG:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function QW(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Md).join(`
`)}function KW(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function ZW(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let s=e.getActiveAttrib(t,n).name;r[s]=e.getAttribLocation(t,s)}return r}function Md(e){return e!==""}function ZE(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function $E(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var $W=/^[ \t]*#include +<([\w\d./]+)>/gm;function Rx(e){return e.replace($W,e9)}function e9(e,t){let r=It[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return Rx(r)}var t9=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,r9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eT(e){return e.replace(r9,h3).replace(t9,i9)}function i9(e,t,r,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),h3(e,t,r,i)}function h3(e,t,r,i){let n="";for(let s=parseInt(t);s<parseInt(r);s++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function tT(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function n9(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===zO?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===FO?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Ad&&(t="SHADOWMAP_TYPE_VSM"),t}function s9(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Fp:case Up:t="ENVMAP_TYPE_CUBE";break;case kp:case Hv:t="ENVMAP_TYPE_CUBE_UV";break}return t}function a9(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Up:case Hv:t="ENVMAP_MODE_REFRACTION";break}return t}function o9(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case kv:t="ENVMAP_BLENDING_MULTIPLY";break;case DG:t="ENVMAP_BLENDING_MIX";break;case RG:t="ENVMAP_BLENDING_ADD";break}return t}function l9(e,t,r,i){let n=e.getContext(),s=r.defines,a=r.vertexShader,o=r.fragmentShader,l=n9(r),h=s9(r),d=a9(r),p=o9(r),f=e.gammaFactor>0?e.gammaFactor:1,m=r.isWebGL2?"":QW(r),v=KW(s),w=n.createProgram(),S,y,g=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(S=[v].filter(Md).join(`
`),S.length>0&&(S+=`
`),y=[m,v].filter(Md).join(`
`),y.length>0&&(y+=`
`)):(S=[tT(r),"#define SHADER_NAME "+r.shaderName,v,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularTintMap?"#define USE_SPECULARTINTMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Md).join(`
`),y=[m,tT(r),"#define SHADER_NAME "+r.shaderName,v,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+d:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularTintMap?"#define USE_SPECULARTINTMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==$l?"#define TONE_MAPPING":"",r.toneMapping!==$l?It.tonemapping_pars_fragment:"",r.toneMapping!==$l?XW("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",It.encodings_pars_fragment,r.map?Qu("mapTexelToLinear",r.mapEncoding):"",r.matcap?Qu("matcapTexelToLinear",r.matcapEncoding):"",r.envMap?Qu("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMap?Qu("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.specularTintMap?Qu("specularTintMapTexelToLinear",r.specularTintMapEncoding):"",r.lightMap?Qu("lightMapTexelToLinear",r.lightMapEncoding):"",qW("linearToOutputTexel",r.outputEncoding),r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Md).join(`
`)),a=Rx(a),a=ZE(a,r),a=$E(a,r),o=Rx(o),o=ZE(o,r),o=$E(o,r),a=eT(a),o=eT(o),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,S=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,y=["#define varying in",r.glslVersion===ME?"":"out highp vec4 pc_fragColor;",r.glslVersion===ME?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);let _=g+S+a,b=g+y+o,T=QE(n,35633,_),A=QE(n,35632,b);if(n.attachShader(w,T),n.attachShader(w,A),r.index0AttributeName!==void 0?n.bindAttribLocation(w,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(w,0,"position"),n.linkProgram(w),e.debug.checkShaderErrors){let D=n.getProgramInfoLog(w).trim(),C=n.getShaderInfoLog(T).trim(),N=n.getShaderInfoLog(A).trim(),U=!0,V=!0;if(n.getProgramParameter(w,35714)===!1){U=!1;let k=KE(n,T,"vertex"),G=KE(n,A,"fragment");console.error("THREE.WebGLProgram: shader error: ",n.getError(),"35715",n.getProgramParameter(w,35715),"gl.getProgramInfoLog",D,k,G)}else D!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",D):(C===""||N==="")&&(V=!1);V&&(this.diagnostics={runnable:U,programLog:D,vertexShader:{log:C,prefix:S},fragmentShader:{log:N,prefix:y}})}n.deleteShader(T),n.deleteShader(A);let M;this.getUniforms=function(){return M===void 0&&(M=new il(n,w)),M};let L;return this.getAttributes=function(){return L===void 0&&(L=ZW(n,w)),L},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(w),this.program=void 0},this.name=r.shaderName,this.id=JW++,this.cacheKey=t,this.usedTimes=1,this.program=w,this.vertexShader=T,this.fragmentShader=A,this}function u9(e,t,r,i,n,s,a){let o=[],l=n.isWebGL2,h=n.logarithmicDepthBuffer,d=n.floatVertexTextures,p=n.maxVertexUniforms,f=n.vertexTextures,m=n.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},w=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function S(M){let L=M.skeleton.bones;if(d)return 1024;{let D=Math.floor((p-20)/4),C=Math.min(D,L.length);return C<L.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+L.length+" bones. This GPU supports "+C+"."),0):C}}function y(M){let L;return M&&M.isTexture?L=M.encoding:M&&M.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),L=M.texture.encoding):L=Bi,L}function g(M,L,D,C,N){let U=C.fog,V=M.isMeshStandardMaterial?C.environment:null,k=(M.isMeshStandardMaterial?r:t).get(M.envMap||V),G=v[M.type],$=N.isSkinnedMesh?S(N):0;M.precision!==null&&(m=n.getMaxPrecision(M.precision),m!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",m,"instead."));let W,H;if(G){let J=_a[G];W=J.vertexShader,H=J.fragmentShader}else W=M.vertexShader,H=M.fragmentShader;let X=e.getRenderTarget();return{isWebGL2:l,shaderID:G,shaderName:M.type,vertexShader:W,fragmentShader:H,defines:M.defines,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:m,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:f,outputEncoding:X!==null?y(X.texture):e.outputEncoding,map:!!M.map,mapEncoding:y(M.map),matcap:!!M.matcap,matcapEncoding:y(M.matcap),envMap:!!k,envMapMode:k&&k.mapping,envMapEncoding:y(k),envMapCubeUV:!!k&&(k.mapping===kp||k.mapping===Hv),lightMap:!!M.lightMap,lightMapEncoding:y(M.lightMap),aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,emissiveMapEncoding:y(M.emissiveMap),bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===BV,tangentSpaceNormalMap:M.normalMapType===yc,clearcoatMap:!!M.clearcoatMap,clearcoatRoughnessMap:!!M.clearcoatRoughnessMap,clearcoatNormalMap:!!M.clearcoatNormalMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularTintMap:!!M.specularTintMap,specularTintMapEncoding:y(M.specularTintMap),alphaMap:!!M.alphaMap,gradientMap:!!M.gradientMap,sheen:!!M.sheen,transmission:!!M.transmission,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!N.geometry&&!!N.geometry.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!N.geometry&&!!N.geometry.attributes.color&&N.geometry.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularTintMap,uvsVertexOnly:!(!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatNormalMap||!!M.transmission||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularTintMap)&&!!M.displacementMap,fog:!!U,useFog:M.fog,fogExp2:U&&U.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:h,skinning:N.isSkinnedMesh===!0&&$>0,maxBones:$,useVertexTexture:d,morphTargets:!!N.geometry&&!!N.geometry.morphAttributes.position,morphNormals:!!N.geometry&&!!N.geometry.morphAttributes.normal,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:e.shadowMap.enabled&&D.length>0,shadowMapType:e.shadowMap.type,toneMapping:M.toneMapped?e.toneMapping:$l,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,alphaTest:M.alphaTest,doubleSided:M.side===bi,flipSided:M.side===Tr,depthPacking:M.depthPacking!==void 0?M.depthPacking:!1,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function _(M){let L=[];if(M.shaderID?L.push(M.shaderID):(L.push(M.fragmentShader),L.push(M.vertexShader)),M.defines!==void 0)for(let D in M.defines)L.push(D),L.push(M.defines[D]);if(M.isRawShaderMaterial===!1){for(let D=0;D<w.length;D++)L.push(M[w[D]]);L.push(e.outputEncoding),L.push(e.gammaFactor)}return L.push(M.customProgramCacheKey),L.join()}function b(M){let L=v[M.type],D;if(L){let C=_a[L];D=wc.clone(C.uniforms)}else D=M.uniforms;return D}function T(M,L){let D;for(let C=0,N=o.length;C<N;C++){let U=o[C];if(U.cacheKey===L){D=U,++D.usedTimes;break}}return D===void 0&&(D=new l9(e,L,M,s),o.push(D)),D}function A(M){if(--M.usedTimes==0){let L=o.indexOf(M);o[L]=o[o.length-1],o.pop(),M.destroy()}}return{getParameters:g,getProgramCacheKey:_,getUniforms:b,acquireProgram:T,releaseProgram:A,programs:o}}function h9(){let e=new WeakMap;function t(s){let a=e.get(s);return a===void 0&&(a={},e.set(s,a)),a}function r(s){e.delete(s)}function i(s,a,o){e.get(s)[a]=o}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function c9(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function rT(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function iT(e){let t=[],r=0,i=[],n=[],s=[],a={id:-1};function o(){r=0,i.length=0,n.length=0,s.length=0}function l(m,v,w,S,y,g){let _=t[r],b=e.get(w);return _===void 0?(_={id:m.id,object:m,geometry:v,material:w,program:b.program||a,groupOrder:S,renderOrder:m.renderOrder,z:y,group:g},t[r]=_):(_.id=m.id,_.object=m,_.geometry=v,_.material=w,_.program=b.program||a,_.groupOrder=S,_.renderOrder=m.renderOrder,_.z=y,_.group=g),r++,_}function h(m,v,w,S,y,g){let _=l(m,v,w,S,y,g);w.transmission>0?n.push(_):w.transparent===!0?s.push(_):i.push(_)}function d(m,v,w,S,y,g){let _=l(m,v,w,S,y,g);w.transmission>0?n.unshift(_):w.transparent===!0?s.unshift(_):i.unshift(_)}function p(m,v){i.length>1&&i.sort(m||c9),n.length>1&&n.sort(v||rT),s.length>1&&s.sort(v||rT)}function f(){for(let m=r,v=t.length;m<v;m++){let w=t[m];if(w.id===null)break;w.id=null,w.object=null,w.geometry=null,w.material=null,w.program=null,w.group=null}}return{opaque:i,transmissive:n,transparent:s,init:o,push:h,unshift:d,finish:f,sort:p}}function d9(e){let t=new WeakMap;function r(n,s){let a;return t.has(n)===!1?(a=new iT(e),t.set(n,[a])):s>=t.get(n).length?(a=new iT(e),t.get(n).push(a)):a=t.get(n)[s],a}function i(){t=new WeakMap}return{get:r,dispose:i}}function p9(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new O,color:new Ue};break;case"SpotLight":r={position:new O,direction:new O,color:new Ue,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new O,color:new Ue,distance:0,decay:0};break;case"HemisphereLight":r={direction:new O,skyColor:new Ue,groundColor:new Ue};break;case"RectAreaLight":r={color:new Ue,position:new O,halfWidth:new O,halfHeight:new O};break}return e[t.id]=r,r}}}function f9(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var m9=0;function g9(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function v9(e,t){let r=new p9,i=f9(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)n.probe.push(new O);let s=new O,a=new Ge,o=new Ge;function l(d){let p=0,f=0,m=0;for(let M=0;M<9;M++)n.probe[M].set(0,0,0);let v=0,w=0,S=0,y=0,g=0,_=0,b=0,T=0;d.sort(g9);for(let M=0,L=d.length;M<L;M++){let D=d[M],C=D.color,N=D.intensity,U=D.distance,V=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)p+=C.r*N,f+=C.g*N,m+=C.b*N;else if(D.isLightProbe)for(let k=0;k<9;k++)n.probe[k].addScaledVector(D.sh.coefficients[k],N);else if(D.isDirectionalLight){let k=r.get(D);if(k.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){let G=D.shadow,$=i.get(D);$.shadowBias=G.bias,$.shadowNormalBias=G.normalBias,$.shadowRadius=G.radius,$.shadowMapSize=G.mapSize,n.directionalShadow[v]=$,n.directionalShadowMap[v]=V,n.directionalShadowMatrix[v]=D.shadow.matrix,_++}n.directional[v]=k,v++}else if(D.isSpotLight){let k=r.get(D);if(k.position.setFromMatrixPosition(D.matrixWorld),k.color.copy(C).multiplyScalar(N),k.distance=U,k.coneCos=Math.cos(D.angle),k.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),k.decay=D.decay,D.castShadow){let G=D.shadow,$=i.get(D);$.shadowBias=G.bias,$.shadowNormalBias=G.normalBias,$.shadowRadius=G.radius,$.shadowMapSize=G.mapSize,n.spotShadow[S]=$,n.spotShadowMap[S]=V,n.spotShadowMatrix[S]=D.shadow.matrix,T++}n.spot[S]=k,S++}else if(D.isRectAreaLight){let k=r.get(D);k.color.copy(C).multiplyScalar(N),k.halfWidth.set(D.width*.5,0,0),k.halfHeight.set(0,D.height*.5,0),n.rectArea[y]=k,y++}else if(D.isPointLight){let k=r.get(D);if(k.color.copy(D.color).multiplyScalar(D.intensity),k.distance=D.distance,k.decay=D.decay,D.castShadow){let G=D.shadow,$=i.get(D);$.shadowBias=G.bias,$.shadowNormalBias=G.normalBias,$.shadowRadius=G.radius,$.shadowMapSize=G.mapSize,$.shadowCameraNear=G.camera.near,$.shadowCameraFar=G.camera.far,n.pointShadow[w]=$,n.pointShadowMap[w]=V,n.pointShadowMatrix[w]=D.shadow.matrix,b++}n.point[w]=k,w++}else if(D.isHemisphereLight){let k=r.get(D);k.skyColor.copy(D.color).multiplyScalar(N),k.groundColor.copy(D.groundColor).multiplyScalar(N),n.hemi[g]=k,g++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Fe.LTC_FLOAT_1,n.rectAreaLTC2=Fe.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Fe.LTC_HALF_1,n.rectAreaLTC2=Fe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=p,n.ambient[1]=f,n.ambient[2]=m;let A=n.hash;(A.directionalLength!==v||A.pointLength!==w||A.spotLength!==S||A.rectAreaLength!==y||A.hemiLength!==g||A.numDirectionalShadows!==_||A.numPointShadows!==b||A.numSpotShadows!==T)&&(n.directional.length=v,n.spot.length=S,n.rectArea.length=y,n.point.length=w,n.hemi.length=g,n.directionalShadow.length=_,n.directionalShadowMap.length=_,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=T,n.spotShadowMap.length=T,n.directionalShadowMatrix.length=_,n.pointShadowMatrix.length=b,n.spotShadowMatrix.length=T,A.directionalLength=v,A.pointLength=w,A.spotLength=S,A.rectAreaLength=y,A.hemiLength=g,A.numDirectionalShadows=_,A.numPointShadows=b,A.numSpotShadows=T,n.version=m9++)}function h(d,p){let f=0,m=0,v=0,w=0,S=0,y=p.matrixWorldInverse;for(let g=0,_=d.length;g<_;g++){let b=d[g];if(b.isDirectionalLight){let T=n.directional[f];T.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(y),f++}else if(b.isSpotLight){let T=n.spot[v];T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(y),T.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(y),v++}else if(b.isRectAreaLight){let T=n.rectArea[w];T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(y),o.identity(),a.copy(b.matrixWorld),a.premultiply(y),o.extractRotation(a),T.halfWidth.set(b.width*.5,0,0),T.halfHeight.set(0,b.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),w++}else if(b.isPointLight){let T=n.point[m];T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(y),m++}else if(b.isHemisphereLight){let T=n.hemi[S];T.direction.setFromMatrixPosition(b.matrixWorld),T.direction.transformDirection(y),T.direction.normalize(),S++}}}return{setup:l,setupView:h,state:n}}function nT(e,t){let r=new v9(e,t),i=[],n=[];function s(){i.length=0,n.length=0}function a(d){i.push(d)}function o(d){n.push(d)}function l(){r.setup(i)}function h(d){r.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:h,pushLight:a,pushShadow:o}}function y9(e,t){let r=new WeakMap;function i(s,a=0){let o;return r.has(s)===!1?(o=new nT(e,t),r.set(s,[o])):a>=r.get(s).length?(o=new nT(e,t),r.get(s).push(o)):o=r.get(s)[a],o}function n(){r=new WeakMap}return{get:i,dispose:n}}var c3=class extends rn{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=Vv,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}};c3.prototype.isMeshDepthMaterial=!0;var d3=class extends rn{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new O,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};d3.prototype.isMeshDistanceMaterial=!0;var x9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,w9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function p3(e,t,r){let i=new jv,n=new Q,s=new Q,a=new Et,o=new c3({depthPacking:IV}),l=new d3,h={},d=r.maxTextureSize,p={0:Tr,1:dl,2:bi},f=new zi({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Q},radius:{value:4}},vertexShader:w9,fragmentShader:x9}),m=f.clone();m.defines.HORIZONTAL_PASS=1;let v=new st;v.setAttribute("position",new dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let w=new Ai(v,f),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zO,this.render=function(b,T,A){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||b.length===0)return;let M=e.getRenderTarget(),L=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),C=e.state;C.setBlending(Ni),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);for(let N=0,U=b.length;N<U;N++){let V=b[N],k=V.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;n.copy(k.mapSize);let G=k.getFrameExtents();if(n.multiply(G),s.copy(k.mapSize),(n.x>d||n.y>d)&&(n.x>d&&(s.x=Math.floor(d/G.x),n.x=s.x*G.x,k.mapSize.x=s.x),n.y>d&&(s.y=Math.floor(d/G.y),n.y=s.y*G.y,k.mapSize.y=s.y)),k.map===null&&!k.isPointLightShadow&&this.type===Ad){let W={minFilter:ar,magFilter:ar,format:mi};k.map=new li(n.x,n.y,W),k.map.texture.name=V.name+".shadowMap",k.mapPass=new li(n.x,n.y,W),k.camera.updateProjectionMatrix()}if(k.map===null){let W={minFilter:Zr,magFilter:Zr,format:mi};k.map=new li(n.x,n.y,W),k.map.texture.name=V.name+".shadowMap",k.camera.updateProjectionMatrix()}e.setRenderTarget(k.map),e.clear();let $=k.getViewportCount();for(let W=0;W<$;W++){let H=k.getViewport(W);a.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),C.viewport(a),k.updateMatrices(V,W),i=k.getFrustum(),_(T,A,k.camera,V,this.type)}!k.isPointLightShadow&&this.type===Ad&&y(k,A),k.needsUpdate=!1}S.needsUpdate=!1,e.setRenderTarget(M,L,D)};function y(b,T){let A=t.update(w);f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,e.setRenderTarget(b.mapPass),e.clear(),e.renderBufferDirect(T,null,A,f,w,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,e.setRenderTarget(b.map),e.clear(),e.renderBufferDirect(T,null,A,m,w,null)}function g(b,T,A,M,L,D,C){let N=null,U=M.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(U!==void 0?N=U:N=M.isPointLight===!0?l:o,e.localClippingEnabled&&A.clipShadows===!0&&A.clippingPlanes.length!==0){let V=N.uuid,k=A.uuid,G=h[V];G===void 0&&(G={},h[V]=G);let $=G[k];$===void 0&&($=N.clone(),G[k]=$),N=$}return N.visible=A.visible,N.wireframe=A.wireframe,C===Ad?N.side=A.shadowSide!==null?A.shadowSide:A.side:N.side=A.shadowSide!==null?A.shadowSide:p[A.side],N.clipShadows=A.clipShadows,N.clippingPlanes=A.clippingPlanes,N.clipIntersection=A.clipIntersection,N.wireframeLinewidth=A.wireframeLinewidth,N.linewidth=A.linewidth,M.isPointLight===!0&&N.isMeshDistanceMaterial===!0&&(N.referencePosition.setFromMatrixPosition(M.matrixWorld),N.nearDistance=L,N.farDistance=D),N}function _(b,T,A,M,L){if(b.visible===!1)return;if(b.layers.test(T.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&L===Ad)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,b.matrixWorld);let C=t.update(b),N=b.material;if(Array.isArray(N)){let U=C.groups;for(let V=0,k=U.length;V<k;V++){let G=U[V],$=N[G.materialIndex];if($&&$.visible){let W=g(b,C,$,M,A.near,A.far,L);e.renderBufferDirect(A,null,C,W,b,G)}}}else if(N.visible){let U=g(b,C,N,M,A.near,A.far,L);e.renderBufferDirect(A,null,C,U,b,null)}}let D=b.children;for(let C=0,N=D.length;C<N;C++)_(D[C],T,A,M,L)}}function _9(e,t,r){let i=r.isWebGL2;function n(){let te=!1,Ie=new Et,Me=null,je=new Et(0,0,0,0);return{setMask:function(Be){Me!==Be&&!te&&(e.colorMask(Be,Be,Be,Be),Me=Be)},setLocked:function(Be){te=Be},setClear:function(Be,at,kt,yr,Ei){Ei===!0&&(Be*=yr,at*=yr,kt*=yr),Ie.set(Be,at,kt,yr),je.equals(Ie)===!1&&(e.clearColor(Be,at,kt,yr),je.copy(Ie))},reset:function(){te=!1,Me=null,je.set(-1,0,0,0)}}}function s(){let te=!1,Ie=null,Me=null,je=null;return{setTest:function(Be){Be?ue(2929):we(2929)},setMask:function(Be){Ie!==Be&&!te&&(e.depthMask(Be),Ie=Be)},setFunc:function(Be){if(Me!==Be){if(Be)switch(Be){case MG:e.depthFunc(512);break;case EG:e.depthFunc(519);break;case TG:e.depthFunc(513);break;case Tx:e.depthFunc(515);break;case CG:e.depthFunc(514);break;case LG:e.depthFunc(518);break;case OG:e.depthFunc(516);break;case PG:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);Me=Be}},setLocked:function(Be){te=Be},setClear:function(Be){je!==Be&&(e.clearDepth(Be),je=Be)},reset:function(){te=!1,Ie=null,Me=null,je=null}}}function a(){let te=!1,Ie=null,Me=null,je=null,Be=null,at=null,kt=null,yr=null,Ei=null;return{setTest:function($t){te||($t?ue(2960):we(2960))},setMask:function($t){Ie!==$t&&!te&&(e.stencilMask($t),Ie=$t)},setFunc:function($t,gi,ki){(Me!==$t||je!==gi||Be!==ki)&&(e.stencilFunc($t,gi,ki),Me=$t,je=gi,Be=ki)},setOp:function($t,gi,ki){(at!==$t||kt!==gi||yr!==ki)&&(e.stencilOp($t,gi,ki),at=$t,kt=gi,yr=ki)},setLocked:function($t){te=$t},setClear:function($t){Ei!==$t&&(e.clearStencil($t),Ei=$t)},reset:function(){te=!1,Ie=null,Me=null,je=null,Be=null,at=null,kt=null,yr=null,Ei=null}}}let o=new n,l=new s,h=new a,d={},p=null,f={},m=null,v=!1,w=null,S=null,y=null,g=null,_=null,b=null,T=null,A=!1,M=null,L=null,D=null,C=null,N=null,U=e.getParameter(35661),V=!1,k=0,G=e.getParameter(7938);G.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(G)[1]),V=k>=1):G.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),V=k>=2);let $=null,W={},H=e.getParameter(3088),X=e.getParameter(2978),J=new Et().fromArray(H),Y=new Et().fromArray(X);function ee(te,Ie,Me){let je=new Uint8Array(4),Be=e.createTexture();e.bindTexture(te,Be),e.texParameteri(te,10241,9728),e.texParameteri(te,10240,9728);for(let at=0;at<Me;at++)e.texImage2D(Ie+at,0,6408,1,1,0,6408,5121,je);return Be}let ie={};ie[3553]=ee(3553,3553,1),ie[34067]=ee(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),h.setClear(0),ue(2929),l.setFunc(Tx),fe(!1),pe(lE),ue(2884),ne(Ni);function ue(te){d[te]!==!0&&(e.enable(te),d[te]=!0)}function we(te){d[te]!==!1&&(e.disable(te),d[te]=!1)}function q(te){te!==p&&(e.bindFramebuffer(36160,te),p=te)}function Se(te,Ie){return Ie===null&&p!==null&&(Ie=p),f[te]!==Ie?(e.bindFramebuffer(te,Ie),f[te]=Ie,i&&(te===36009&&(f[36160]=Ie),te===36160&&(f[36009]=Ie)),!0):!1}function me(te){return m!==te?(e.useProgram(te),m=te,!0):!1}let re={[lh]:32774,[fG]:32778,[mG]:32779};if(i)re[dE]=32775,re[pE]=32776;else{let te=t.get("EXT_blend_minmax");te!==null&&(re[dE]=te.MIN_EXT,re[pE]=te.MAX_EXT)}let K={[gG]:0,[vG]:1,[yG]:768,[kO]:770,[AG]:776,[SG]:774,[wG]:772,[xG]:769,[HO]:771,[bG]:775,[_G]:773};function ne(te,Ie,Me,je,Be,at,kt,yr){if(te===Ni){v===!0&&(we(3042),v=!1);return}if(v===!1&&(ue(3042),v=!0),te!==pG){if(te!==w||yr!==A){if((S!==lh||_!==lh)&&(e.blendEquation(32774),S=lh,_=lh),yr)switch(te){case Nh:e.blendFuncSeparate(1,771,1,771);break;case uE:e.blendFunc(1,1);break;case hE:e.blendFuncSeparate(0,0,769,771);break;case cE:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}else switch(te){case Nh:e.blendFuncSeparate(770,771,1,771);break;case uE:e.blendFunc(770,1);break;case hE:e.blendFunc(0,769);break;case cE:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",te);break}y=null,g=null,b=null,T=null,w=te,A=yr}return}Be=Be||Ie,at=at||Me,kt=kt||je,(Ie!==S||Be!==_)&&(e.blendEquationSeparate(re[Ie],re[Be]),S=Ie,_=Be),(Me!==y||je!==g||at!==b||kt!==T)&&(e.blendFuncSeparate(K[Me],K[je],K[at],K[kt]),y=Me,g=je,b=at,T=kt),w=te,A=null}function ae(te,Ie){te.side===bi?we(2884):ue(2884);let Me=te.side===Tr;Ie&&(Me=!Me),fe(Me),te.blending===Nh&&te.transparent===!1?ne(Ni):ne(te.blending,te.blendEquation,te.blendSrc,te.blendDst,te.blendEquationAlpha,te.blendSrcAlpha,te.blendDstAlpha,te.premultipliedAlpha),l.setFunc(te.depthFunc),l.setTest(te.depthTest),l.setMask(te.depthWrite),o.setMask(te.colorWrite);let je=te.stencilWrite;h.setTest(je),je&&(h.setMask(te.stencilWriteMask),h.setFunc(te.stencilFunc,te.stencilRef,te.stencilFuncMask),h.setOp(te.stencilFail,te.stencilZFail,te.stencilZPass)),Ae(te.polygonOffset,te.polygonOffsetFactor,te.polygonOffsetUnits),te.alphaToCoverage===!0?ue(32926):we(32926)}function fe(te){M!==te&&(te?e.frontFace(2304):e.frontFace(2305),M=te)}function pe(te){te!==cG?(ue(2884),te!==L&&(te===lE?e.cullFace(1029):te===dG?e.cullFace(1028):e.cullFace(1032))):we(2884),L=te}function xe(te){te!==D&&(V&&e.lineWidth(te),D=te)}function Ae(te,Ie,Me){te?(ue(32823),(C!==Ie||N!==Me)&&(e.polygonOffset(Ie,Me),C=Ie,N=Me)):we(32823)}function F(te){te?ue(3089):we(3089)}function B(te){te===void 0&&(te=33984+U-1),$!==te&&(e.activeTexture(te),$=te)}function de(te,Ie){$===null&&B();let Me=W[$];Me===void 0&&(Me={type:void 0,texture:void 0},W[$]=Me),(Me.type!==te||Me.texture!==Ie)&&(e.bindTexture(te,Ie||ie[te]),Me.type=te,Me.texture=Ie)}function Oe(){let te=W[$];te!==void 0&&te.type!==void 0&&(e.bindTexture(te.type,null),te.type=void 0,te.texture=void 0)}function Ce(){try{e.compressedTexImage2D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Re(){try{e.texImage2D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function ze(){try{e.texImage3D.apply(e,arguments)}catch(te){console.error("THREE.WebGLState:",te)}}function Ke(te){J.equals(te)===!1&&(e.scissor(te.x,te.y,te.z,te.w),J.copy(te))}function We(te){Y.equals(te)===!1&&(e.viewport(te.x,te.y,te.z,te.w),Y.copy(te))}function qe(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},$=null,W={},p=null,f={},m=null,v=!1,w=null,S=null,y=null,g=null,_=null,b=null,T=null,A=!1,M=null,L=null,D=null,C=null,N=null,J.set(0,0,e.canvas.width,e.canvas.height),Y.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),h.reset()}return{buffers:{color:o,depth:l,stencil:h},enable:ue,disable:we,bindFramebuffer:Se,bindXRFramebuffer:q,useProgram:me,setBlending:ne,setMaterial:ae,setFlipSided:fe,setCullFace:pe,setLineWidth:xe,setPolygonOffset:Ae,setScissorTest:F,activeTexture:B,bindTexture:de,unbindTexture:Oe,compressedTexImage2D:Ce,texImage2D:Re,texImage3D:ze,scissor:Ke,viewport:We,reset:qe}}function S9(e,t,r,i,n,s,a){let o=n.isWebGL2,l=n.maxTextures,h=n.maxCubemapSize,d=n.maxTextureSize,p=n.maxSamples,f=new WeakMap,m,v=!1;try{v=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(F,B){return v?new OffscreenCanvas(F,B):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function S(F,B,de,Oe){let Ce=1;if((F.width>Oe||F.height>Oe)&&(Ce=Oe/Math.max(F.width,F.height)),Ce<1||B===!0)if(typeof HTMLImageElement!="undefined"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&F instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&F instanceof ImageBitmap){let Re=B?YO:Math.floor,ze=Re(Ce*F.width),Ke=Re(Ce*F.height);m===void 0&&(m=w(ze,Ke));let We=de?w(ze,Ke):m;return We.width=ze,We.height=Ke,We.getContext("2d").drawImage(F,0,0,ze,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+ze+"x"+Ke+")."),We}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function y(F){return Dx(F.width)&&Dx(F.height)}function g(F){return o?!1:F.wrapS!==Si||F.wrapT!==Si||F.minFilter!==Zr&&F.minFilter!==ar}function _(F,B){return F.generateMipmaps&&B&&F.minFilter!==Zr&&F.minFilter!==ar}function b(F,B,de,Oe,Ce=1){e.generateMipmap(F);let Re=i.get(B);Re.__maxMipLevel=Math.log2(Math.max(de,Oe,Ce))}function T(F,B,de){if(o===!1)return B;if(F!==null){if(e[F]!==void 0)return e[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Oe=B;return B===6403&&(de===5126&&(Oe=33326),de===5131&&(Oe=33325),de===5121&&(Oe=33321)),B===6407&&(de===5126&&(Oe=34837),de===5131&&(Oe=34843),de===5121&&(Oe=32849)),B===6408&&(de===5126&&(Oe=34836),de===5131&&(Oe=34842),de===5121&&(Oe=32856)),(Oe===33325||Oe===33326||Oe===34842||Oe===34836)&&t.get("EXT_color_buffer_float"),Oe}function A(F){return F===Zr||F===Ox||F===Px?9728:9729}function M(F){let B=F.target;B.removeEventListener("dispose",M),D(B),B.isVideoTexture&&f.delete(B),a.memory.textures--}function L(F){let B=F.target;B.removeEventListener("dispose",L),C(B)}function D(F){let B=i.get(F);B.__webglInit!==void 0&&(e.deleteTexture(B.__webglTexture),i.remove(F))}function C(F){let B=F.texture,de=i.get(F),Oe=i.get(B);if(F){if(Oe.__webglTexture!==void 0&&(e.deleteTexture(Oe.__webglTexture),a.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++)e.deleteFramebuffer(de.__webglFramebuffer[Ce]),de.__webglDepthbuffer&&e.deleteRenderbuffer(de.__webglDepthbuffer[Ce]);else e.deleteFramebuffer(de.__webglFramebuffer),de.__webglDepthbuffer&&e.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&e.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer&&e.deleteRenderbuffer(de.__webglColorRenderbuffer),de.__webglDepthRenderbuffer&&e.deleteRenderbuffer(de.__webglDepthRenderbuffer);if(F.isWebGLMultipleRenderTargets)for(let Ce=0,Re=B.length;Ce<Re;Ce++){let ze=i.get(B[Ce]);ze.__webglTexture&&(e.deleteTexture(ze.__webglTexture),a.memory.textures--),i.remove(B[Ce])}i.remove(B),i.remove(F)}}let N=0;function U(){N=0}function V(){let F=N;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),N+=1,F}function k(F,B){let de=i.get(F);if(F.isVideoTexture&&ae(F),F.version>0&&de.__version!==F.version){let Oe=F.image;if(Oe===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(de,F,B);return}}r.activeTexture(33984+B),r.bindTexture(3553,de.__webglTexture)}function G(F,B){let de=i.get(F);if(F.version>0&&de.__version!==F.version){ee(de,F,B);return}r.activeTexture(33984+B),r.bindTexture(35866,de.__webglTexture)}function $(F,B){let de=i.get(F);if(F.version>0&&de.__version!==F.version){ee(de,F,B);return}r.activeTexture(33984+B),r.bindTexture(32879,de.__webglTexture)}function W(F,B){let de=i.get(F);if(F.version>0&&de.__version!==F.version){ie(de,F,B);return}r.activeTexture(33984+B),r.bindTexture(34067,de.__webglTexture)}let H={[Qh]:10497,[Si]:33071,[zg]:33648},X={[Zr]:9728,[Ox]:9984,[Px]:9986,[ar]:9729,[VO]:9985,[du]:9987};function J(F,B,de){if(de?(e.texParameteri(F,10242,H[B.wrapS]),e.texParameteri(F,10243,H[B.wrapT]),(F===32879||F===35866)&&e.texParameteri(F,32882,H[B.wrapR]),e.texParameteri(F,10240,X[B.magFilter]),e.texParameteri(F,10241,X[B.minFilter])):(e.texParameteri(F,10242,33071),e.texParameteri(F,10243,33071),(F===32879||F===35866)&&e.texParameteri(F,32882,33071),(B.wrapS!==Si||B.wrapT!==Si)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(F,10240,A(B.magFilter)),e.texParameteri(F,10241,A(B.minFilter)),B.minFilter!==Zr&&B.minFilter!==ar&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Oe=t.get("EXT_texture_filter_anisotropic");if(B.type===Yl&&t.has("OES_texture_float_linear")===!1||o===!1&&B.type===Ih&&t.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(e.texParameterf(F,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,n.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function Y(F,B){F.__webglInit===void 0&&(F.__webglInit=!0,B.addEventListener("dispose",M),F.__webglTexture=e.createTexture(),a.memory.textures++)}function ee(F,B,de){let Oe=3553;B.isDataTexture2DArray&&(Oe=35866),B.isDataTexture3D&&(Oe=32879),Y(F,B),r.activeTexture(33984+de),r.bindTexture(Oe,F.__webglTexture),e.pixelStorei(37440,B.flipY),e.pixelStorei(37441,B.premultiplyAlpha),e.pixelStorei(3317,B.unpackAlignment),e.pixelStorei(37443,0);let Ce=g(B)&&y(B.image)===!1,Re=S(B.image,Ce,!1,d),ze=y(Re)||o,Ke=s.convert(B.format),We=s.convert(B.type),qe=T(B.internalFormat,Ke,We);J(Oe,B,ze);let te,Ie=B.mipmaps;if(B.isDepthTexture)qe=6402,o?B.type===Yl?qe=36012:B.type===Id?qe=33190:B.type===Bh?qe=35056:qe=33189:B.type===Yl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===zh&&qe===6402&&B.type!==Fg&&B.type!==Id&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=Fg,We=s.convert(B.type)),B.format===Kh&&qe===6402&&(qe=34041,B.type!==Bh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Bh,We=s.convert(B.type))),r.texImage2D(3553,0,qe,Re.width,Re.height,0,Ke,We,null);else if(B.isDataTexture)if(Ie.length>0&&ze){for(let Me=0,je=Ie.length;Me<je;Me++)te=Ie[Me],r.texImage2D(3553,Me,qe,te.width,te.height,0,Ke,We,te.data);B.generateMipmaps=!1,F.__maxMipLevel=Ie.length-1}else r.texImage2D(3553,0,qe,Re.width,Re.height,0,Ke,We,Re.data),F.__maxMipLevel=0;else if(B.isCompressedTexture){for(let Me=0,je=Ie.length;Me<je;Me++)te=Ie[Me],B.format!==mi&&B.format!==$i?Ke!==null?r.compressedTexImage2D(3553,Me,qe,te.width,te.height,0,te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,Me,qe,te.width,te.height,0,Ke,We,te.data);F.__maxMipLevel=Ie.length-1}else if(B.isDataTexture2DArray)r.texImage3D(35866,0,qe,Re.width,Re.height,Re.depth,0,Ke,We,Re.data),F.__maxMipLevel=0;else if(B.isDataTexture3D)r.texImage3D(32879,0,qe,Re.width,Re.height,Re.depth,0,Ke,We,Re.data),F.__maxMipLevel=0;else if(Ie.length>0&&ze){for(let Me=0,je=Ie.length;Me<je;Me++)te=Ie[Me],r.texImage2D(3553,Me,qe,Ke,We,te);B.generateMipmaps=!1,F.__maxMipLevel=Ie.length-1}else r.texImage2D(3553,0,qe,Ke,We,Re),F.__maxMipLevel=0;_(B,ze)&&b(Oe,B,Re.width,Re.height),F.__version=B.version,B.onUpdate&&B.onUpdate(B)}function ie(F,B,de){if(B.image.length!==6)return;Y(F,B),r.activeTexture(33984+de),r.bindTexture(34067,F.__webglTexture),e.pixelStorei(37440,B.flipY),e.pixelStorei(37441,B.premultiplyAlpha),e.pixelStorei(3317,B.unpackAlignment),e.pixelStorei(37443,0);let Oe=B&&(B.isCompressedTexture||B.image[0].isCompressedTexture),Ce=B.image[0]&&B.image[0].isDataTexture,Re=[];for(let Me=0;Me<6;Me++)!Oe&&!Ce?Re[Me]=S(B.image[Me],!1,!0,h):Re[Me]=Ce?B.image[Me].image:B.image[Me];let ze=Re[0],Ke=y(ze)||o,We=s.convert(B.format),qe=s.convert(B.type),te=T(B.internalFormat,We,qe);J(34067,B,Ke);let Ie;if(Oe){for(let Me=0;Me<6;Me++){Ie=Re[Me].mipmaps;for(let je=0;je<Ie.length;je++){let Be=Ie[je];B.format!==mi&&B.format!==$i?We!==null?r.compressedTexImage2D(34069+Me,je,te,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+Me,je,te,Be.width,Be.height,0,We,qe,Be.data)}}F.__maxMipLevel=Ie.length-1}else{Ie=B.mipmaps;for(let Me=0;Me<6;Me++)if(Ce){r.texImage2D(34069+Me,0,te,Re[Me].width,Re[Me].height,0,We,qe,Re[Me].data);for(let je=0;je<Ie.length;je++){let Be=Ie[je].image[Me].image;r.texImage2D(34069+Me,je+1,te,Be.width,Be.height,0,We,qe,Be.data)}}else{r.texImage2D(34069+Me,0,te,We,qe,Re[Me]);for(let je=0;je<Ie.length;je++){let Be=Ie[je];r.texImage2D(34069+Me,je+1,te,We,qe,Be.image[Me])}}F.__maxMipLevel=Ie.length}_(B,Ke)&&b(34067,B,ze.width,ze.height),F.__version=B.version,B.onUpdate&&B.onUpdate(B)}function ue(F,B,de,Oe,Ce){let Re=s.convert(de.format),ze=s.convert(de.type),Ke=T(de.internalFormat,Re,ze);Ce===32879||Ce===35866?r.texImage3D(Ce,0,Ke,B.width,B.height,B.depth,0,Re,ze,null):r.texImage2D(Ce,0,Ke,B.width,B.height,0,Re,ze,null),r.bindFramebuffer(36160,F),e.framebufferTexture2D(36160,Oe,Ce,i.get(de).__webglTexture,0),r.bindFramebuffer(36160,null)}function we(F,B,de){if(e.bindRenderbuffer(36161,F),B.depthBuffer&&!B.stencilBuffer){let Oe=33189;if(de){let Ce=B.depthTexture;Ce&&Ce.isDepthTexture&&(Ce.type===Yl?Oe=36012:Ce.type===Id&&(Oe=33190));let Re=ne(B);e.renderbufferStorageMultisample(36161,Re,Oe,B.width,B.height)}else e.renderbufferStorage(36161,Oe,B.width,B.height);e.framebufferRenderbuffer(36160,36096,36161,F)}else if(B.depthBuffer&&B.stencilBuffer){if(de){let Oe=ne(B);e.renderbufferStorageMultisample(36161,Oe,35056,B.width,B.height)}else e.renderbufferStorage(36161,34041,B.width,B.height);e.framebufferRenderbuffer(36160,33306,36161,F)}else{let Oe=B.isWebGLMultipleRenderTargets===!0?B.texture[0]:B.texture,Ce=s.convert(Oe.format),Re=s.convert(Oe.type),ze=T(Oe.internalFormat,Ce,Re);if(de){let Ke=ne(B);e.renderbufferStorageMultisample(36161,Ke,ze,B.width,B.height)}else e.renderbufferStorage(36161,ze,B.width,B.height)}e.bindRenderbuffer(36161,null)}function q(F,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,F),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),k(B.depthTexture,0);let de=i.get(B.depthTexture).__webglTexture;if(B.depthTexture.format===zh)e.framebufferTexture2D(36160,36096,3553,de,0);else if(B.depthTexture.format===Kh)e.framebufferTexture2D(36160,33306,3553,de,0);else throw new Error("Unknown depthTexture format")}function Se(F){let B=i.get(F),de=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture){if(de)throw new Error("target.depthTexture not supported in Cube render targets");q(B.__webglFramebuffer,F)}else if(de){B.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)r.bindFramebuffer(36160,B.__webglFramebuffer[Oe]),B.__webglDepthbuffer[Oe]=e.createRenderbuffer(),we(B.__webglDepthbuffer[Oe],F,!1)}else r.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=e.createRenderbuffer(),we(B.__webglDepthbuffer,F,!1);r.bindFramebuffer(36160,null)}function me(F){let B=F.texture,de=i.get(F),Oe=i.get(B);F.addEventListener("dispose",L),F.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture=e.createTexture(),Oe.__version=B.version,a.memory.textures++);let Ce=F.isWebGLCubeRenderTarget===!0,Re=F.isWebGLMultipleRenderTargets===!0,ze=F.isWebGLMultisampleRenderTarget===!0,Ke=B.isDataTexture3D||B.isDataTexture2DArray,We=y(F)||o;if(o&&B.format===$i&&(B.type===Yl||B.type===Ih)&&(B.format=mi,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ce){de.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)de.__webglFramebuffer[qe]=e.createFramebuffer()}else if(de.__webglFramebuffer=e.createFramebuffer(),Re)if(n.drawBuffers){let qe=F.texture;for(let te=0,Ie=qe.length;te<Ie;te++){let Me=i.get(qe[te]);Me.__webglTexture===void 0&&(Me.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(ze)if(o){de.__webglMultisampledFramebuffer=e.createFramebuffer(),de.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,de.__webglColorRenderbuffer);let qe=s.convert(B.format),te=s.convert(B.type),Ie=T(B.internalFormat,qe,te),Me=ne(F);e.renderbufferStorageMultisample(36161,Me,Ie,F.width,F.height),r.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,de.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),F.depthBuffer&&(de.__webglDepthRenderbuffer=e.createRenderbuffer(),we(de.__webglDepthRenderbuffer,F,!0)),r.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ce){r.bindTexture(34067,Oe.__webglTexture),J(34067,B,We);for(let qe=0;qe<6;qe++)ue(de.__webglFramebuffer[qe],F,B,36064,34069+qe);_(B,We)&&b(34067,B,F.width,F.height),r.bindTexture(34067,null)}else if(Re){let qe=F.texture;for(let te=0,Ie=qe.length;te<Ie;te++){let Me=qe[te],je=i.get(Me);r.bindTexture(3553,je.__webglTexture),J(3553,Me,We),ue(de.__webglFramebuffer,F,Me,36064+te,3553),_(Me,We)&&b(3553,Me,F.width,F.height)}r.bindTexture(3553,null)}else{let qe=3553;Ke&&(o?qe=B.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),r.bindTexture(qe,Oe.__webglTexture),J(qe,B,We),ue(de.__webglFramebuffer,F,B,36064,qe),_(B,We)&&b(qe,B,F.width,F.height,F.depth),r.bindTexture(qe,null)}F.depthBuffer&&Se(F)}function re(F){let B=y(F)||o,de=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Oe=0,Ce=de.length;Oe<Ce;Oe++){let Re=de[Oe];if(_(Re,B)){let ze=F.isWebGLCubeRenderTarget?34067:3553,Ke=i.get(Re).__webglTexture;r.bindTexture(ze,Ke),b(ze,Re,F.width,F.height),r.bindTexture(ze,null)}}}function K(F){if(F.isWebGLMultisampleRenderTarget)if(o){let B=F.width,de=F.height,Oe=16384;F.depthBuffer&&(Oe|=256),F.stencilBuffer&&(Oe|=1024);let Ce=i.get(F);r.bindFramebuffer(36008,Ce.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,Ce.__webglFramebuffer),e.blitFramebuffer(0,0,B,de,0,0,B,de,Oe,9728),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,Ce.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function ne(F){return o&&F.isWebGLMultisampleRenderTarget?Math.min(p,F.samples):0}function ae(F){let B=a.render.frame;f.get(F)!==B&&(f.set(F,B),F.update())}let fe=!1,pe=!1;function xe(F,B){F&&F.isWebGLRenderTarget&&(fe===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),fe=!0),F=F.texture),k(F,B)}function Ae(F,B){F&&F.isWebGLCubeRenderTarget&&(pe===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),pe=!0),F=F.texture),W(F,B)}this.allocateTextureUnit=V,this.resetTextureUnits=U,this.setTexture2D=k,this.setTexture2DArray=G,this.setTexture3D=$,this.setTextureCube=W,this.setupRenderTarget=me,this.updateRenderTargetMipmap=re,this.updateMultisampleRenderTarget=K,this.safeSetTexture2D=xe,this.safeSetTextureCube=Ae}function b9(e,t,r){let i=r.isWebGL2;function n(s){let a;if(s===Mi)return 5121;if(s===GG)return 32819;if(s===VG)return 32820;if(s===jG)return 33635;if(s===UG)return 5120;if(s===kG)return 5122;if(s===Fg)return 5123;if(s===HG)return 5124;if(s===Id)return 5125;if(s===Yl)return 5126;if(s===Ih)return i?5131:(a=t.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===WG)return 6406;if(s===$i)return 6407;if(s===mi)return 6408;if(s===jO)return 6409;if(s===JG)return 6410;if(s===zh)return 6402;if(s===Kh)return 34041;if(s===qG)return 6403;if(s===XG)return 36244;if(s===QG)return 33319;if(s===KG)return 33320;if(s===ZG)return 36248;if(s===$G)return 36249;if(s===fE||s===mE||s===gE||s===vE)if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===fE)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===mE)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===gE)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===vE)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===yE||s===xE||s===wE||s===_E)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===yE)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===xE)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===wE)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===_E)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===eV)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===SE||s===bE)&&(a=t.get("WEBGL_compressed_texture_etc"),a!==null)){if(s===SE)return a.COMPRESSED_RGB8_ETC2;if(s===bE)return a.COMPRESSED_RGBA8_ETC2_EAC}if(s===tV||s===rV||s===iV||s===nV||s===sV||s===aV||s===oV||s===lV||s===uV||s===hV||s===cV||s===dV||s===pV||s===fV||s===gV||s===vV||s===yV||s===xV||s===wV||s===_V||s===SV||s===bV||s===AV||s===MV||s===EV||s===TV||s===CV||s===LV)return a=t.get("WEBGL_compressed_texture_astc"),a!==null?s:null;if(s===mV)return a=t.get("EXT_texture_compression_bptc"),a!==null?s:null;if(s===Bh)return i?34042:(a=t.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:n}}var f3=class extends Di{constructor(e=[]){super();this.cameras=e}};f3.prototype.isArrayCamera=!0;var vh=class extends Rt{constructor(){super();this.type="Group"}};vh.prototype.isGroup=!0;var A9={type:"move"},m1=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new vh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new vh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new vh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(i=t.getPose(e.targetRaySpace,r),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(A9))),l&&e.hand){s=!0;for(let v of e.hand.values()){let w=t.getJointPose(v,r);if(l.joints[v.jointName]===void 0){let y=new vh;y.matrixAutoUpdate=!1,y.visible=!1,l.joints[v.jointName]=y,l.add(y)}let S=l.joints[v.jointName];w!==null&&(S.matrix.fromArray(w.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.jointRadius=w.radius),S.visible=w!==null}let h=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],p=h.position.distanceTo(d.position),f=.02,m=.005;l.inputState.pinching&&p>f+m?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&p<=f-m&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));return a!==null&&(a.visible=i!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=s!==null),this}},M9=class extends Kn{constructor(e,t){super();let r=this,i=e.state,n=null,s=1,a=null,o="local-floor",l=null,h=null,d=null,p=null,f=null,m=[],v=new Map,w=new Di;w.layers.enable(1),w.viewport=new Et;let S=new Di;S.layers.enable(2),S.viewport=new Et;let y=[w,S],g=new f3;g.layers.enable(1),g.layers.enable(2);let _=null,b=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let $=m[G];return $===void 0&&($=new m1,m[G]=$),$.getTargetRaySpace()},this.getControllerGrip=function(G){let $=m[G];return $===void 0&&($=new m1,m[G]=$),$.getGripSpace()},this.getHand=function(G){let $=m[G];return $===void 0&&($=new m1,m[G]=$),$.getHandSpace()};function T(G){let $=v.get(G.inputSource);$&&$.dispatchEvent({type:G.type,data:G.inputSource})}function A(){v.forEach(function(G,$){G.disconnect($)}),v.clear(),_=null,b=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),k.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){s=G,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){o=G,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return n},this.setSession=async function(G){if(n=G,n!==null){n.addEventListener("select",T),n.addEventListener("selectstart",T),n.addEventListener("selectend",T),n.addEventListener("squeeze",T),n.addEventListener("squeezestart",T),n.addEventListener("squeezeend",T),n.addEventListener("end",A),n.addEventListener("inputsourceschange",M);let $=t.getContextAttributes();if($.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0){let W={antialias:$.antialias,alpha:$.alpha,depth:$.depth,stencil:$.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(n,t,W),n.updateRenderState({baseLayer:f})}else{let W=0;if($.antialias){let H={antialias:!0,alpha:$.alpha,depth:$.depth,stencil:$.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(n,t,H),n.updateRenderState({layers:[f]})}else{$.depth&&(W=$.stencil?34041:6402);let H={colorFormat:$.alpha?6408:6407,depthFormat:W,scaleFactor:s};h=new XRWebGLBinding(n,t),p=h.createProjectionLayer(H),d=t.createFramebuffer(),n.updateRenderState({layers:[p]})}}a=await n.requestReferenceSpace(o),k.setContext(n),k.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function M(G){let $=n.inputSources;for(let W=0;W<m.length;W++)v.set($[W],m[W]);for(let W=0;W<G.removed.length;W++){let H=G.removed[W],X=v.get(H);X&&(X.dispatchEvent({type:"disconnected",data:H}),v.delete(H))}for(let W=0;W<G.added.length;W++){let H=G.added[W],X=v.get(H);X&&X.dispatchEvent({type:"connected",data:H})}}let L=new O,D=new O;function C(G,$,W){L.setFromMatrixPosition($.matrixWorld),D.setFromMatrixPosition(W.matrixWorld);let H=L.distanceTo(D),X=$.projectionMatrix.elements,J=W.projectionMatrix.elements,Y=X[14]/(X[10]-1),ee=X[14]/(X[10]+1),ie=(X[9]+1)/X[5],ue=(X[9]-1)/X[5],we=(X[8]-1)/X[0],q=(J[8]+1)/J[0],Se=Y*we,me=Y*q,re=H/(-we+q),K=re*-we;$.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(K),G.translateZ(re),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert();let ne=Y+re,ae=ee+re,fe=Se-K,pe=me+(H-K),xe=ie*ee/ae*ne,Ae=ue*ee/ae*ne;G.projectionMatrix.makePerspective(fe,pe,xe,Ae,ne,ae)}function N(G,$){$===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices($.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(n===null)return;g.near=S.near=w.near=G.near,g.far=S.far=w.far=G.far,(_!==g.near||b!==g.far)&&(n.updateRenderState({depthNear:g.near,depthFar:g.far}),_=g.near,b=g.far);let $=G.parent,W=g.cameras;N(g,$);for(let X=0;X<W.length;X++)N(W[X],$);g.matrixWorld.decompose(g.position,g.quaternion,g.scale),G.position.copy(g.position),G.quaternion.copy(g.quaternion),G.scale.copy(g.scale),G.matrix.copy(g.matrix),G.matrixWorld.copy(g.matrixWorld);let H=G.children;for(let X=0,J=H.length;X<J;X++)H[X].updateMatrixWorld(!0);W.length===2?C(g,w,S):g.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return g},this.getFoveation=function(){if(p!==null)return p.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(G){p!==null&&(p.fixedFoveation=G),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=G)};let U=null;function V(G,$){if(l=$.getViewerPose(a),l!==null){let H=l.views;f!==null&&i.bindXRFramebuffer(f.framebuffer);let X=!1;H.length!==g.cameras.length&&(g.cameras.length=0,X=!0);for(let J=0;J<H.length;J++){let Y=H[J],ee=null;if(f!==null)ee=f.getViewport(Y);else{let ue=h.getViewSubImage(p,Y);i.bindXRFramebuffer(d),ue.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,36096,3553,ue.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,ue.colorTexture,0),ee=ue.viewport}let ie=y[J];ie.matrix.fromArray(Y.transform.matrix),ie.projectionMatrix.fromArray(Y.projectionMatrix),ie.viewport.set(ee.x,ee.y,ee.width,ee.height),J===0&&g.matrix.copy(ie.matrix),X===!0&&g.cameras.push(ie)}}let W=n.inputSources;for(let H=0;H<m.length;H++){let X=m[H],J=W[H];X.update(J,$,a)}U&&U(G,$)}let k=new $O;k.setAnimationLoop(V),this.setAnimationLoop=function(G){U=G},this.dispose=function(){}}};function E9(e){function t(y,g){y.fogColor.value.copy(g.color),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function r(y,g,_,b,T){g.isMeshBasicMaterial?i(y,g):g.isMeshLambertMaterial?(i(y,g),l(y,g)):g.isMeshToonMaterial?(i(y,g),d(y,g)):g.isMeshPhongMaterial?(i(y,g),h(y,g)):g.isMeshStandardMaterial?(i(y,g),g.isMeshPhysicalMaterial?f(y,g,T):p(y,g)):g.isMeshMatcapMaterial?(i(y,g),m(y,g)):g.isMeshDepthMaterial?(i(y,g),v(y,g)):g.isMeshDistanceMaterial?(i(y,g),w(y,g)):g.isMeshNormalMaterial?(i(y,g),S(y,g)):g.isLineBasicMaterial?(n(y,g),g.isLineDashedMaterial&&s(y,g)):g.isPointsMaterial?a(y,g,_,b):g.isSpriteMaterial?o(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map),g.alphaMap&&(y.alphaMap.value=g.alphaMap),g.specularMap&&(y.specularMap.value=g.specularMap);let _=e.get(g).envMap;if(_){y.envMap.value=_,y.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.refractionRatio.value=g.refractionRatio;let A=e.get(_).__maxMipLevel;A!==void 0&&(y.maxMipLevel.value=A)}g.lightMap&&(y.lightMap.value=g.lightMap,y.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity);let b;g.map?b=g.map:g.specularMap?b=g.specularMap:g.displacementMap?b=g.displacementMap:g.normalMap?b=g.normalMap:g.bumpMap?b=g.bumpMap:g.roughnessMap?b=g.roughnessMap:g.metalnessMap?b=g.metalnessMap:g.alphaMap?b=g.alphaMap:g.emissiveMap?b=g.emissiveMap:g.clearcoatMap?b=g.clearcoatMap:g.clearcoatNormalMap?b=g.clearcoatNormalMap:g.clearcoatRoughnessMap?b=g.clearcoatRoughnessMap:g.specularIntensityMap?b=g.specularIntensityMap:g.specularTintMap&&(b=g.specularTintMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),y.uvTransform.value.copy(b.matrix));let T;g.aoMap?T=g.aoMap:g.lightMap&&(T=g.lightMap),T!==void 0&&(T.isWebGLRenderTarget&&(T=T.texture),T.matrixAutoUpdate===!0&&T.updateMatrix(),y.uv2Transform.value.copy(T.matrix))}function n(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity}function s(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function a(y,g,_,b){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*_,y.scale.value=b*.5,g.map&&(y.map.value=g.map),g.alphaMap&&(y.alphaMap.value=g.alphaMap);let T;g.map?T=g.map:g.alphaMap&&(T=g.alphaMap),T!==void 0&&(T.matrixAutoUpdate===!0&&T.updateMatrix(),y.uvTransform.value.copy(T.matrix))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map),g.alphaMap&&(y.alphaMap.value=g.alphaMap);let _;g.map?_=g.map:g.alphaMap&&(_=g.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),y.uvTransform.value.copy(_.matrix))}function l(y,g){g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap)}function h(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,g.side===Tr&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),g.side===Tr&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}function d(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,g.side===Tr&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),g.side===Tr&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}function p(y,g){y.roughness.value=g.roughness,y.metalness.value=g.metalness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,g.side===Tr&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),g.side===Tr&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),e.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function f(y,g,_){p(y,g),y.reflectivity.value=g.reflectivity,y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.sheen&&y.sheen.value.copy(g.sheen),g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),y.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Tr&&y.clearcoatNormalScale.value.negate()),y.transmission.value=g.transmission,g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap),g.transmission>0&&(y.transmissionSamplerMap.value=_.texture,y.transmissionSamplerSize.value.set(_.width,_.height)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap),y.attenuationDistance.value=g.attenuationDistance,y.attenuationTint.value.copy(g.attenuationTint),y.specularIntensity.value=g.specularIntensity,y.specularTint.value.copy(g.specularTint),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap),g.specularTintMap&&(y.specularTintMap.value=g.specularTintMap)}function m(y,g){g.matcap&&(y.matcap.value=g.matcap),g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,g.side===Tr&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),g.side===Tr&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}function v(y,g){g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}function w(y,g){g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),y.referencePosition.value.copy(g.referencePosition),y.nearDistance.value=g.nearDistance,y.farDistance.value=g.farDistance}function S(y,g){g.bumpMap&&(y.bumpMap.value=g.bumpMap,y.bumpScale.value=g.bumpScale,g.side===Tr&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,y.normalScale.value.copy(g.normalScale),g.side===Tr&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function T9(){let e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function cr(e={}){let t=e.canvas!==void 0?e.canvas:T9(),r=e.context!==void 0?e.context:null,i=e.alpha!==void 0?e.alpha:!1,n=e.depth!==void 0?e.depth:!0,s=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,o=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,h=e.powerPreference!==void 0?e.powerPreference:"default",d=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,p=null,f=null,m=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Bi,this.physicallyCorrectLights=!1,this.toneMapping=$l,this.toneMappingExposure=1;let w=this,S=!1,y=0,g=0,_=null,b=-1,T=null,A=new Et,M=new Et,L=null,D=t.width,C=t.height,N=1,U=null,V=null,k=new Et(0,0,D,C),G=new Et(0,0,D,C),$=!1,W=[],H=new jv,X=!1,J=!1,Y=null,ee=new Ge,ie=new O,ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function we(){return _===null?N:1}let q=r;function Se(z,he){for(let oe=0;oe<z.length;oe++){let ve=z[oe],Pe=t.getContext(ve,he);if(Pe!==null)return Pe}return null}try{let z={alpha:i,depth:n,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:h,failIfMajorPerformanceCaveat:d};if(t.addEventListener("webglcontextlost",kt,!1),t.addEventListener("webglcontextrestored",yr,!1),q===null){let he=["webgl2","webgl","experimental-webgl"];if(w.isWebGL1Renderer===!0&&he.shift(),q=Se(he,z),q===null)throw Se(he)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}q.getShaderPrecisionFormat===void 0&&(q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let me,re,K,ne,ae,fe,pe,xe,Ae,F,B,de,Oe,Ce,Re,ze,Ke,We,qe,te,Ie,Me,je;function Be(){me=new Qj(q),re=new Hj(q,me,e),me.init(re),Me=new b9(q,me,re),K=new _9(q,me,re),W[0]=1029,ne=new $j(q),ae=new h9,fe=new S9(q,me,K,ae,re,Me,ne),pe=new Vj(w),xe=new Xj(w),Ae=new g6(q,re),je=new Uj(q,me,Ae,re),F=new Kj(q,Ae,ne,je),B=new iW(q,F,Ae,ne),qe=new rW(q),ze=new Gj(ae),de=new u9(w,pe,xe,me,re,je,ze),Oe=new E9(ae),Ce=new d9(ae),Re=new y9(me,re),We=new Fj(w,pe,K,B,o),Ke=new p3(w,B,re),te=new kj(q,me,ne,re),Ie=new Zj(q,me,ne,re),ne.programs=de.programs,w.capabilities=re,w.extensions=me,w.properties=ae,w.renderLists=Ce,w.shadowMap=Ke,w.state=K,w.info=ne}Be();let at=new M9(w,q);this.xr=at,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){let z=me.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){let z=me.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(z){z!==void 0&&(N=z,this.setSize(D,C,!1))},this.getSize=function(z){return z.set(D,C)},this.setSize=function(z,he,oe){if(at.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=z,C=he,t.width=Math.floor(z*N),t.height=Math.floor(he*N),oe!==!1&&(t.style.width=z+"px",t.style.height=he+"px"),this.setViewport(0,0,z,he)},this.getDrawingBufferSize=function(z){return z.set(D*N,C*N).floor()},this.setDrawingBufferSize=function(z,he,oe){D=z,C=he,N=oe,t.width=Math.floor(z*oe),t.height=Math.floor(he*oe),this.setViewport(0,0,z,he)},this.getCurrentViewport=function(z){return z.copy(A)},this.getViewport=function(z){return z.copy(k)},this.setViewport=function(z,he,oe,ve){z.isVector4?k.set(z.x,z.y,z.z,z.w):k.set(z,he,oe,ve),K.viewport(A.copy(k).multiplyScalar(N).floor())},this.getScissor=function(z){return z.copy(G)},this.setScissor=function(z,he,oe,ve){z.isVector4?G.set(z.x,z.y,z.z,z.w):G.set(z,he,oe,ve),K.scissor(M.copy(G).multiplyScalar(N).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(z){K.setScissorTest($=z)},this.setOpaqueSort=function(z){U=z},this.setTransparentSort=function(z){V=z},this.getClearColor=function(z){return z.copy(We.getClearColor())},this.setClearColor=function(){We.setClearColor.apply(We,arguments)},this.getClearAlpha=function(){return We.getClearAlpha()},this.setClearAlpha=function(){We.setClearAlpha.apply(We,arguments)},this.clear=function(z,he,oe){let ve=0;(z===void 0||z)&&(ve|=16384),(he===void 0||he)&&(ve|=256),(oe===void 0||oe)&&(ve|=1024),q.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",kt,!1),t.removeEventListener("webglcontextrestored",yr,!1),Ce.dispose(),Re.dispose(),ae.dispose(),pe.dispose(),xe.dispose(),B.dispose(),je.dispose(),at.dispose(),at.removeEventListener("sessionstart",Ls),at.removeEventListener("sessionend",Lr),Y&&(Y.dispose(),Y=null),Gi.stop()};function kt(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function yr(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;let z=ne.autoReset,he=Ke.enabled,oe=Ke.autoUpdate,ve=Ke.needsUpdate,Pe=Ke.type;Be(),ne.autoReset=z,Ke.enabled=he,Ke.autoUpdate=oe,Ke.needsUpdate=ve,Ke.type=Pe}function Ei(z){let he=z.target;he.removeEventListener("dispose",Ei),$t(he)}function $t(z){gi(z),ae.remove(z)}function gi(z){let he=ae.get(z).programs;he!==void 0&&he.forEach(function(oe){de.releaseProgram(oe)})}function ki(z,he){z.render(function(oe){w.renderBufferImmediate(oe,he)})}this.renderBufferImmediate=function(z,he){je.initAttributes();let oe=ae.get(z);z.hasPositions&&!oe.position&&(oe.position=q.createBuffer()),z.hasNormals&&!oe.normal&&(oe.normal=q.createBuffer()),z.hasUvs&&!oe.uv&&(oe.uv=q.createBuffer()),z.hasColors&&!oe.color&&(oe.color=q.createBuffer());let ve=he.getAttributes();z.hasPositions&&(q.bindBuffer(34962,oe.position),q.bufferData(34962,z.positionArray,35048),je.enableAttribute(ve.position),q.vertexAttribPointer(ve.position,3,5126,!1,0,0)),z.hasNormals&&(q.bindBuffer(34962,oe.normal),q.bufferData(34962,z.normalArray,35048),je.enableAttribute(ve.normal),q.vertexAttribPointer(ve.normal,3,5126,!1,0,0)),z.hasUvs&&(q.bindBuffer(34962,oe.uv),q.bufferData(34962,z.uvArray,35048),je.enableAttribute(ve.uv),q.vertexAttribPointer(ve.uv,2,5126,!1,0,0)),z.hasColors&&(q.bindBuffer(34962,oe.color),q.bufferData(34962,z.colorArray,35048),je.enableAttribute(ve.color),q.vertexAttribPointer(ve.color,3,5126,!1,0,0)),je.disableUnusedAttributes(),q.drawArrays(4,0,z.count),z.count=0},this.renderBufferDirect=function(z,he,oe,ve,Pe,Ze){he===null&&(he=ue);let Xe=Pe.isMesh&&Pe.matrixWorld.determinant()<0,mt=qt(z,he,ve,Pe);K.setMaterial(ve,Xe);let Tt=oe.index,or=oe.attributes.position;if(Tt===null){if(or===void 0||or.count===0)return}else if(Tt.count===0)return;let bt=1;ve.wireframe===!0&&(Tt=F.getWireframeAttribute(oe),bt=2),(oe.morphAttributes.position!==void 0||oe.morphAttributes.normal!==void 0)&&qe.update(Pe,oe,ve,mt),je.setup(Pe,ve,mt,oe,Tt);let Dt,gt=te;Tt!==null&&(Dt=Ae.get(Tt),gt=Ie,gt.setIndex(Dt));let Os=Tt!==null?Tt.count:or.count,es=oe.drawRange.start*bt,oa=oe.drawRange.count*bt,Vi=Ze!==null?Ze.start*bt:0,Va=Ze!==null?Ze.count*bt:1/0,On=Math.max(es,Vi),ti=Math.min(Os,es+oa,Vi+Va)-1,ts=Math.max(0,ti-On+1);if(ts!==0){if(Pe.isMesh)ve.wireframe===!0?(K.setLineWidth(ve.wireframeLinewidth*we()),gt.setMode(1)):gt.setMode(4);else if(Pe.isLine){let hi=ve.linewidth;hi===void 0&&(hi=1),K.setLineWidth(hi*we()),Pe.isLineSegments?gt.setMode(1):Pe.isLineLoop?gt.setMode(2):gt.setMode(3)}else Pe.isPoints?gt.setMode(0):Pe.isSprite&&gt.setMode(4);if(Pe.isInstancedMesh)gt.renderInstances(On,ts,Pe.count);else if(oe.isInstancedBufferGeometry){let hi=Math.min(oe.instanceCount,oe._maxInstanceCount);gt.renderInstances(On,ts,hi)}else gt.render(On,ts)}},this.compile=function(z,he){f=Re.get(z),f.init(),v.push(f),z.traverseVisible(function(oe){oe.isLight&&oe.layers.test(he.layers)&&(f.pushLight(oe),oe.castShadow&&f.pushShadow(oe))}),f.setupLights(),z.traverse(function(oe){let ve=oe.material;if(ve)if(Array.isArray(ve))for(let Pe=0;Pe<ve.length;Pe++){let Ze=ve[Pe];_t(Ze,z,oe)}else _t(ve,z,oe)}),v.pop(),f=null};let aa=null;function Hi(z){aa&&aa(z)}function Ls(){Gi.stop()}function Lr(){Gi.start()}let Gi=new $O;Gi.setAnimationLoop(Hi),typeof window!="undefined"&&Gi.setContext(window),this.setAnimationLoop=function(z){aa=z,at.setAnimationLoop(z),z===null?Gi.stop():Gi.start()},at.addEventListener("sessionstart",Ls),at.addEventListener("sessionend",Lr),this.render=function(z,he){if(he!==void 0&&he.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;z.autoUpdate===!0&&z.updateMatrixWorld(),he.parent===null&&he.updateMatrixWorld(),at.enabled===!0&&at.isPresenting===!0&&(at.cameraAutoUpdate===!0&&at.updateCamera(he),he=at.getCamera()),z.isScene===!0&&z.onBeforeRender(w,z,he,_),f=Re.get(z,v.length),f.init(),v.push(f),ee.multiplyMatrices(he.projectionMatrix,he.matrixWorldInverse),H.setFromProjectionMatrix(ee),J=this.localClippingEnabled,X=ze.init(this.clippingPlanes,J,he),p=Ce.get(z,m.length),p.init(),m.push(p),ei(z,he,0,w.sortObjects),p.finish(),w.sortObjects===!0&&p.sort(U,V),X===!0&&ze.beginShadows();let oe=f.state.shadowsArray;Ke.render(oe,z,he),f.setupLights(),f.setupLightsView(he),X===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset(),We.render(p,z);let ve=p.opaque,Pe=p.transmissive,Ze=p.transparent;ve.length>0&&yt(ve,z,he),Pe.length>0&&ht(ve,Pe,z,he),Ze.length>0&&yt(Ze,z,he),_!==null&&(fe.updateMultisampleRenderTarget(_),fe.updateRenderTargetMipmap(_)),z.isScene===!0&&z.onAfterRender(w,z,he),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1),je.resetDefaultState(),b=-1,T=null,v.pop(),v.length>0?f=v[v.length-1]:f=null,m.pop(),m.length>0?p=m[m.length-1]:p=null};function ei(z,he,oe,ve){if(z.visible===!1)return;if(z.layers.test(he.layers)){if(z.isGroup)oe=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(he);else if(z.isLight)f.pushLight(z),z.castShadow&&f.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||H.intersectsSprite(z)){ve&&ie.setFromMatrixPosition(z.matrixWorld).applyMatrix4(ee);let Ze=B.update(z),Xe=z.material;Xe.visible&&p.push(z,Ze,Xe,oe,ie.z,null)}}else if(z.isImmediateRenderObject)ve&&ie.setFromMatrixPosition(z.matrixWorld).applyMatrix4(ee),p.push(z,null,z.material,oe,ie.z,null);else if((z.isMesh||z.isLine||z.isPoints)&&(z.isSkinnedMesh&&z.skeleton.frame!==ne.render.frame&&(z.skeleton.update(),z.skeleton.frame=ne.render.frame),!z.frustumCulled||H.intersectsObject(z))){ve&&ie.setFromMatrixPosition(z.matrixWorld).applyMatrix4(ee);let Ze=B.update(z),Xe=z.material;if(Array.isArray(Xe)){let mt=Ze.groups;for(let Tt=0,or=mt.length;Tt<or;Tt++){let bt=mt[Tt],Dt=Xe[bt.materialIndex];Dt&&Dt.visible&&p.push(z,Ze,Dt,oe,ie.z,bt)}}else Xe.visible&&p.push(z,Ze,Xe,oe,ie.z,null)}}let Pe=z.children;for(let Ze=0,Xe=Pe.length;Ze<Xe;Ze++)ei(Pe[Ze],he,oe,ve)}function ht(z,he,oe,ve){if(Y===null){let Xe=a===!0&&re.isWebGL2===!0?op:li;Y=new Xe(1024,1024,{generateMipmaps:!0,type:Me.convert(Ih)!==null?Ih:Mi,minFilter:du,magFilter:Zr,wrapS:Si,wrapT:Si})}let Pe=w.getRenderTarget();w.setRenderTarget(Y),w.clear();let Ze=w.toneMapping;w.toneMapping=$l,yt(z,oe,ve),w.toneMapping=Ze,fe.updateMultisampleRenderTarget(Y),fe.updateRenderTargetMipmap(Y),w.setRenderTarget(Pe),yt(he,oe,ve)}function yt(z,he,oe){let ve=he.isScene===!0?he.overrideMaterial:null;if(oe.isArrayCamera){let Pe=oe.cameras;for(let Ze=0,Xe=Pe.length;Ze<Xe;Ze++){let mt=Pe[Ze];K.viewport(A.copy(mt.viewport)),f.setupLightsView(mt);for(let Tt=0,or=z.length;Tt<or;Tt++){let bt=z[Tt],Dt=bt.object,gt=bt.geometry,Os=ve===null?bt.material:ve,es=bt.group;Dt.layers.test(mt.layers)&&xt(Dt,he,mt,gt,Os,es)}}}else for(let Pe=0,Ze=z.length;Pe<Ze;Pe++){let Xe=z[Pe],mt=Xe.object,Tt=Xe.geometry,or=ve===null?Xe.material:ve,bt=Xe.group;xt(mt,he,oe,Tt,or,bt)}}function xt(z,he,oe,ve,Pe,Ze){if(z.onBeforeRender(w,he,oe,ve,Pe,Ze),z.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),z.isImmediateRenderObject){let Xe=qt(oe,he,Pe,z);K.setMaterial(Pe),je.reset(),ki(z,Xe)}else Pe.transparent===!0&&Pe.side===bi?(Pe.side=Tr,Pe.needsUpdate=!0,w.renderBufferDirect(oe,he,ve,Pe,z,Ze),Pe.side=dl,Pe.needsUpdate=!0,w.renderBufferDirect(oe,he,ve,Pe,z,Ze),Pe.side=bi):w.renderBufferDirect(oe,he,ve,Pe,z,Ze);z.onAfterRender(w,he,oe,ve,Pe,Ze)}function _t(z,he,oe){he.isScene!==!0&&(he=ue);let ve=ae.get(z),Pe=f.state.lights,Ze=f.state.shadowsArray,Xe=Pe.state.version,mt=de.getParameters(z,Pe.state,Ze,he,oe),Tt=de.getProgramCacheKey(mt),or=ve.programs;ve.environment=z.isMeshStandardMaterial?he.environment:null,ve.fog=he.fog,ve.envMap=(z.isMeshStandardMaterial?xe:pe).get(z.envMap||ve.environment),or===void 0&&(z.addEventListener("dispose",Ei),or=new Map,ve.programs=or);let bt=or.get(Tt);if(bt!==void 0){if(ve.currentProgram===bt&&ve.lightsStateVersion===Xe)return Pt(z,mt),bt}else mt.uniforms=de.getUniforms(z),z.onBuild(mt,w),z.onBeforeCompile(mt,w),bt=de.acquireProgram(mt,Tt),or.set(Tt,bt),ve.uniforms=mt.uniforms;let Dt=ve.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(Dt.clippingPlanes=ze.uniform),Pt(z,mt),ve.needsLights=er(z),ve.lightsStateVersion=Xe,ve.needsLights&&(Dt.ambientLightColor.value=Pe.state.ambient,Dt.lightProbe.value=Pe.state.probe,Dt.directionalLights.value=Pe.state.directional,Dt.directionalLightShadows.value=Pe.state.directionalShadow,Dt.spotLights.value=Pe.state.spot,Dt.spotLightShadows.value=Pe.state.spotShadow,Dt.rectAreaLights.value=Pe.state.rectArea,Dt.ltc_1.value=Pe.state.rectAreaLTC1,Dt.ltc_2.value=Pe.state.rectAreaLTC2,Dt.pointLights.value=Pe.state.point,Dt.pointLightShadows.value=Pe.state.pointShadow,Dt.hemisphereLights.value=Pe.state.hemi,Dt.directionalShadowMap.value=Pe.state.directionalShadowMap,Dt.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,Dt.spotShadowMap.value=Pe.state.spotShadowMap,Dt.spotShadowMatrix.value=Pe.state.spotShadowMatrix,Dt.pointShadowMap.value=Pe.state.pointShadowMap,Dt.pointShadowMatrix.value=Pe.state.pointShadowMatrix);let gt=bt.getUniforms(),Os=il.seqWithValue(gt.seq,Dt);return ve.currentProgram=bt,ve.uniformsList=Os,bt}function Pt(z,he){let oe=ae.get(z);oe.outputEncoding=he.outputEncoding,oe.instancing=he.instancing,oe.skinning=he.skinning,oe.morphTargets=he.morphTargets,oe.morphNormals=he.morphNormals,oe.numClippingPlanes=he.numClippingPlanes,oe.numIntersection=he.numClipIntersection,oe.vertexAlphas=he.vertexAlphas,oe.vertexTangents=he.vertexTangents}function qt(z,he,oe,ve){he.isScene!==!0&&(he=ue),fe.resetTextureUnits();let Pe=he.fog,Ze=oe.isMeshStandardMaterial?he.environment:null,Xe=_===null?w.outputEncoding:_.texture.encoding,mt=(oe.isMeshStandardMaterial?xe:pe).get(oe.envMap||Ze),Tt=oe.vertexColors===!0&&!!ve.geometry&&!!ve.geometry.attributes.color&&ve.geometry.attributes.color.itemSize===4,or=!!ve.geometry&&!!ve.geometry.attributes.tangent,bt=!!ve.geometry&&!!ve.geometry.morphAttributes.position,Dt=!!ve.geometry&&!!ve.geometry.morphAttributes.normal,gt=ae.get(oe),Os=f.state.lights;if(X===!0&&(J===!0||z!==T)){let hi=z===T&&oe.id===b;ze.setState(oe,z,hi)}let es=!1;oe.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==Os.state.version||gt.outputEncoding!==Xe||ve.isInstancedMesh&&gt.instancing===!1||!ve.isInstancedMesh&&gt.instancing===!0||ve.isSkinnedMesh&&gt.skinning===!1||!ve.isSkinnedMesh&&gt.skinning===!0||gt.envMap!==mt||oe.fog&&gt.fog!==Pe||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==ze.numPlanes||gt.numIntersection!==ze.numIntersection)||gt.vertexAlphas!==Tt||gt.vertexTangents!==or||gt.morphTargets!==bt||gt.morphNormals!==Dt)&&(es=!0):(es=!0,gt.__version=oe.version);let oa=gt.currentProgram;es===!0&&(oa=_t(oe,he,ve));let Vi=!1,Va=!1,On=!1,ti=oa.getUniforms(),ts=gt.uniforms;if(K.useProgram(oa.program)&&(Vi=!0,Va=!0,On=!0),oe.id!==b&&(b=oe.id,Va=!0),Vi||T!==z){if(ti.setValue(q,"projectionMatrix",z.projectionMatrix),re.logarithmicDepthBuffer&&ti.setValue(q,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),T!==z&&(T=z,Va=!0,On=!0),oe.isShaderMaterial||oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshStandardMaterial||oe.envMap){let hi=ti.map.cameraPosition;hi!==void 0&&hi.setValue(q,ie.setFromMatrixPosition(z.matrixWorld))}(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&ti.setValue(q,"isOrthographic",z.isOrthographicCamera===!0),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial||oe.isShadowMaterial||ve.isSkinnedMesh)&&ti.setValue(q,"viewMatrix",z.matrixWorldInverse)}if(ve.isSkinnedMesh){ti.setOptional(q,ve,"bindMatrix"),ti.setOptional(q,ve,"bindMatrixInverse");let hi=ve.skeleton;hi&&(re.floatVertexTextures?(hi.boneTexture===null&&hi.computeBoneTexture(),ti.setValue(q,"boneTexture",hi.boneTexture,fe),ti.setValue(q,"boneTextureSize",hi.boneTextureSize)):ti.setOptional(q,hi,"boneMatrices"))}return(Va||gt.receiveShadow!==ve.receiveShadow)&&(gt.receiveShadow=ve.receiveShadow,ti.setValue(q,"receiveShadow",ve.receiveShadow)),Va&&(ti.setValue(q,"toneMappingExposure",w.toneMappingExposure),gt.needsLights&&Ht(ts,On),Pe&&oe.fog&&Oe.refreshFogUniforms(ts,Pe),Oe.refreshMaterialUniforms(ts,oe,N,C,Y),il.upload(q,gt.uniformsList,ts,fe)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(il.upload(q,gt.uniformsList,ts,fe),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&ti.setValue(q,"center",ve.center),ti.setValue(q,"modelViewMatrix",ve.modelViewMatrix),ti.setValue(q,"normalMatrix",ve.normalMatrix),ti.setValue(q,"modelMatrix",ve.matrixWorld),oa}function Ht(z,he){z.ambientLightColor.needsUpdate=he,z.lightProbe.needsUpdate=he,z.directionalLights.needsUpdate=he,z.directionalLightShadows.needsUpdate=he,z.pointLights.needsUpdate=he,z.pointLightShadows.needsUpdate=he,z.spotLights.needsUpdate=he,z.spotLightShadows.needsUpdate=he,z.rectAreaLights.needsUpdate=he,z.hemisphereLights.needsUpdate=he}function er(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return _},this.setRenderTarget=function(z,he=0,oe=0){_=z,y=he,g=oe,z&&ae.get(z).__webglFramebuffer===void 0&&fe.setupRenderTarget(z);let ve=null,Pe=!1,Ze=!1;if(z){let Xe=z.texture;(Xe.isDataTexture3D||Xe.isDataTexture2DArray)&&(Ze=!0);let mt=ae.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(ve=mt[he],Pe=!0):z.isWebGLMultisampleRenderTarget?ve=ae.get(z).__webglMultisampledFramebuffer:ve=mt,A.copy(z.viewport),M.copy(z.scissor),L=z.scissorTest}else A.copy(k).multiplyScalar(N).floor(),M.copy(G).multiplyScalar(N).floor(),L=$;if(K.bindFramebuffer(36160,ve)&&re.drawBuffers){let Xe=!1;if(z)if(z.isWebGLMultipleRenderTargets){let mt=z.texture;if(W.length!==mt.length||W[0]!==36064){for(let Tt=0,or=mt.length;Tt<or;Tt++)W[Tt]=36064+Tt;W.length=mt.length,Xe=!0}}else(W.length!==1||W[0]!==36064)&&(W[0]=36064,W.length=1,Xe=!0);else(W.length!==1||W[0]!==1029)&&(W[0]=1029,W.length=1,Xe=!0);Xe&&(re.isWebGL2?q.drawBuffers(W):me.get("WEBGL_draw_buffers").drawBuffersWEBGL(W))}if(K.viewport(A),K.scissor(M),K.setScissorTest(L),Pe){let Xe=ae.get(z.texture);q.framebufferTexture2D(36160,36064,34069+he,Xe.__webglTexture,oe)}else if(Ze){let Xe=ae.get(z.texture),mt=he||0;q.framebufferTextureLayer(36160,36064,Xe.__webglTexture,oe||0,mt)}},this.readRenderTargetPixels=function(z,he,oe,ve,Pe,Ze,Xe){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mt=ae.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Xe!==void 0&&(mt=mt[Xe]),mt){K.bindFramebuffer(36160,mt);try{let Tt=z.texture,or=Tt.format,bt=Tt.type;if(or!==mi&&Me.convert(or)!==q.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Dt=bt===Ih&&(me.has("EXT_color_buffer_half_float")||re.isWebGL2&&me.has("EXT_color_buffer_float"));if(bt!==Mi&&Me.convert(bt)!==q.getParameter(35738)&&!(bt===Yl&&(re.isWebGL2||me.has("OES_texture_float")||me.has("WEBGL_color_buffer_float")))&&!Dt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}q.checkFramebufferStatus(36160)===36053?he>=0&&he<=z.width-ve&&oe>=0&&oe<=z.height-Pe&&q.readPixels(he,oe,ve,Pe,Me.convert(or),Me.convert(bt),Ze):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{let Tt=_!==null?ae.get(_).__webglFramebuffer:null;K.bindFramebuffer(36160,Tt)}}},this.copyFramebufferToTexture=function(z,he,oe=0){let ve=Math.pow(2,-oe),Pe=Math.floor(he.image.width*ve),Ze=Math.floor(he.image.height*ve),Xe=Me.convert(he.format);re.isWebGL2&&(Xe===6407&&(Xe=32849),Xe===6408&&(Xe=32856)),fe.setTexture2D(he,0),q.copyTexImage2D(3553,oe,Xe,z.x,z.y,Pe,Ze,0),K.unbindTexture()},this.copyTextureToTexture=function(z,he,oe,ve=0){let Pe=he.image.width,Ze=he.image.height,Xe=Me.convert(oe.format),mt=Me.convert(oe.type);fe.setTexture2D(oe,0),q.pixelStorei(37440,oe.flipY),q.pixelStorei(37441,oe.premultiplyAlpha),q.pixelStorei(3317,oe.unpackAlignment),he.isDataTexture?q.texSubImage2D(3553,ve,z.x,z.y,Pe,Ze,Xe,mt,he.image.data):he.isCompressedTexture?q.compressedTexSubImage2D(3553,ve,z.x,z.y,he.mipmaps[0].width,he.mipmaps[0].height,Xe,he.mipmaps[0].data):q.texSubImage2D(3553,ve,z.x,z.y,Xe,mt,he.image),ve===0&&oe.generateMipmaps&&q.generateMipmap(3553),K.unbindTexture()},this.copyTextureToTexture3D=function(z,he,oe,ve,Pe=0){if(w.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Ze=z.max.x-z.min.x+1,Xe=z.max.y-z.min.y+1,mt=z.max.z-z.min.z+1,Tt=Me.convert(ve.format),or=Me.convert(ve.type),bt;if(ve.isDataTexture3D)fe.setTexture3D(ve,0),bt=32879;else if(ve.isDataTexture2DArray)fe.setTexture2DArray(ve,0),bt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}q.pixelStorei(37440,ve.flipY),q.pixelStorei(37441,ve.premultiplyAlpha),q.pixelStorei(3317,ve.unpackAlignment);let Dt=q.getParameter(3314),gt=q.getParameter(32878),Os=q.getParameter(3316),es=q.getParameter(3315),oa=q.getParameter(32877),Vi=oe.isCompressedTexture?oe.mipmaps[0]:oe.image;q.pixelStorei(3314,Vi.width),q.pixelStorei(32878,Vi.height),q.pixelStorei(3316,z.min.x),q.pixelStorei(3315,z.min.y),q.pixelStorei(32877,z.min.z),oe.isDataTexture||oe.isDataTexture3D?q.texSubImage3D(bt,Pe,he.x,he.y,he.z,Ze,Xe,mt,Tt,or,Vi.data):oe.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),q.compressedTexSubImage3D(bt,Pe,he.x,he.y,he.z,Ze,Xe,mt,Tt,Vi.data)):q.texSubImage3D(bt,Pe,he.x,he.y,he.z,Ze,Xe,mt,Tt,or,Vi),q.pixelStorei(3314,Dt),q.pixelStorei(32878,gt),q.pixelStorei(3316,Os),q.pixelStorei(3315,es),q.pixelStorei(32877,oa),Pe===0&&ve.generateMipmaps&&q.generateMipmap(bt),K.unbindTexture()},this.initTexture=function(z){fe.setTexture2D(z,0),K.unbindTexture()},this.resetState=function(){y=0,g=0,_=null,K.reset(),je.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var C9=class extends cr{};C9.prototype.isWebGL1Renderer=!0;var R_=class{constructor(e,t=1,r=1e3){this.name="",this.color=new Ue(e),this.near=t,this.far=r}clone(){return new R_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}};R_.prototype.isFog=!0;var Ra=class extends Rt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};Ra.prototype.isScene=!0;var fu=class{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=sp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};fu.prototype.isInterleavedBuffer=!0;var Jr=new O,lu=class{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Jr.x=this.getX(t),Jr.y=this.getY(t),Jr.z=this.getZ(t),Jr.applyMatrix4(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jr.x=this.getX(t),Jr.y=this.getY(t),Jr.z=this.getZ(t),Jr.applyNormalMatrix(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jr.x=this.getX(t),Jr.y=this.getY(t),Jr.z=this.getZ(t),Jr.transformDirection(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new dt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};lu.prototype.isInterleavedBufferAttribute=!0;var m3=class extends rn{constructor(e){super();this.type="SpriteMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}};m3.prototype.isSpriteMaterial=!0;var Ku,rd=new O,Zu=new O,$u=new O,eh=new Q,id=new Q,g3=new Ge,gm=new O,nd=new O,vm=new O,sT=new Q,g1=new Q,aT=new Q,L9=class extends Rt{constructor(e){super();if(this.type="Sprite",Ku===void 0){Ku=new st;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new fu(t,5);Ku.setIndex([0,1,2,0,2,3]),Ku.setAttribute("position",new lu(r,3,0,!1)),Ku.setAttribute("uv",new lu(r,2,3,!1))}this.geometry=Ku,this.material=e!==void 0?e:new m3,this.center=new Q(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zu.setFromMatrixScale(this.matrixWorld),g3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),$u.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zu.multiplyScalar(-$u.z);let r=this.material.rotation,i,n;r!==0&&(n=Math.cos(r),i=Math.sin(r));let s=this.center;ym(gm.set(-.5,-.5,0),$u,s,Zu,i,n),ym(nd.set(.5,-.5,0),$u,s,Zu,i,n),ym(vm.set(.5,.5,0),$u,s,Zu,i,n),sT.set(0,0),g1.set(1,0),aT.set(1,1);let a=e.ray.intersectTriangle(gm,nd,vm,!1,rd);if(a===null&&(ym(nd.set(-.5,.5,0),$u,s,Zu,i,n),g1.set(0,1),a=e.ray.intersectTriangle(gm,vm,nd,!1,rd),a===null))return;let o=e.ray.origin.distanceTo(rd);o<e.near||o>e.far||t.push({distance:o,point:rd.clone(),uv:ai.getUV(rd,gm,nd,vm,sT,g1,aT,new Q),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};L9.prototype.isSprite=!0;function ym(e,t,r,i,n,s){eh.subVectors(e,r).addScalar(.5).multiply(i),n!==void 0?(id.x=s*eh.x-n*eh.y,id.y=n*eh.x+s*eh.y):id.copy(eh),e.copy(t),e.x+=id.x,e.y+=id.y,e.applyMatrix4(g3)}var oT=new O,lT=new Et,uT=new Et,O9=new O,hT=new Ge,v3=class extends Ai{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ge,this.bindMatrixInverse=new Ge}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new Et,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);let n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){let r=this.skeleton,i=this.geometry;lT.fromBufferAttribute(i.attributes.skinIndex,e),uT.fromBufferAttribute(i.attributes.skinWeight,e),oT.fromBufferAttribute(i.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let s=uT.getComponent(n);if(s!==0){let a=lT.getComponent(n);hT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(O9.copy(oT).applyMatrix4(hT),s)}}return t.applyMatrix4(this.bindMatrixInverse)}};v3.prototype.isSkinnedMesh=!0;var P9=class extends Rt{constructor(){super();this.type="Bone"}};P9.prototype.isBone=!0;var D9=class extends Ir{constructor(e=null,t=1,r=1,i,n,s,a,o,l=Zr,h=Zr,d,p){super(null,s,a,o,l,h,i,n,d,p);this.image={data:e,width:t,height:r},this.magFilter=l,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}};D9.prototype.isDataTexture=!0;var cT=new Ge,dT=new Ge,xm=[],sd=new Ai,R9=class extends Ai{constructor(e,t,r){super(e,t);this.instanceMatrix=new dt(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let r=this.matrixWorld,i=this.count;if(sd.geometry=this.geometry,sd.material=this.material,sd.material!==void 0)for(let n=0;n<i;n++){this.getMatrixAt(n,cT),dT.multiplyMatrices(r,cT),sd.matrixWorld=dT,sd.raycast(e,xm);for(let s=0,a=xm.length;s<a;s++){let o=xm[s];o.instanceId=n,o.object=this,t.push(o)}xm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new dt(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}};R9.prototype.isInstancedMesh=!0;var Ts=class extends rn{constructor(e){super();this.type="LineBasicMaterial",this.color=new Ue(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}};Ts.prototype.isLineBasicMaterial=!0;var pT=new O,fT=new O,mT=new Ge,v1=new bl,wm=new ea,$h=class extends Rt{constructor(e=new st,t=new Ts){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.isBufferGeometry)if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)pT.fromBufferAttribute(t,i-1),fT.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=pT.distanceTo(fT);e.setAttribute("lineDistance",new Je(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),wm.copy(r.boundingSphere),wm.applyMatrix4(i),wm.radius+=n,e.ray.intersectsSphere(wm)===!1)return;mT.copy(i).invert(),v1.copy(e.ray).applyMatrix4(mT);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new O,h=new O,d=new O,p=new O,f=this.isLineSegments?2:1;if(r.isBufferGeometry){let m=r.index,v=r.attributes.position;if(m!==null){let w=Math.max(0,s.start),S=Math.min(m.count,s.start+s.count);for(let y=w,g=S-1;y<g;y+=f){let _=m.getX(y),b=m.getX(y+1);if(l.fromBufferAttribute(v,_),h.fromBufferAttribute(v,b),v1.distanceSqToSegment(l,h,p,d)>o)continue;p.applyMatrix4(this.matrixWorld);let T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{let w=Math.max(0,s.start),S=Math.min(v.count,s.start+s.count);for(let y=w,g=S-1;y<g;y+=f){if(l.fromBufferAttribute(v,y),h.fromBufferAttribute(v,y+1),v1.distanceSqToSegment(l,h,p,d)>o)continue;p.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(p);_<e.near||_>e.far||t.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){let a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}else{let t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}};$h.prototype.isLine=!0;var gT=new O,vT=new O,Al=class extends $h{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.isBufferGeometry)if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)gT.fromBufferAttribute(t,i),vT.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+gT.distanceTo(vT);e.setAttribute("lineDistance",new Je(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}};Al.prototype.isLineSegments=!0;var N9=class extends $h{constructor(e,t){super(e,t);this.type="LineLoop"}};N9.prototype.isLineLoop=!0;var y3=class extends rn{constructor(e){super();this.type="PointsMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}};y3.prototype.isPointsMaterial=!0;var yT=new Ge,Nx=new bl,_m=new ea,Sm=new O,I9=class extends Rt{constructor(e=new st,t=new y3){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),_m.copy(r.boundingSphere),_m.applyMatrix4(i),_m.radius+=n,e.ray.intersectsSphere(_m)===!1)return;yT.copy(i).invert(),Nx.copy(e.ray).applyMatrix4(yT);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(r.isBufferGeometry){let l=r.index,h=r.attributes.position;if(l!==null){let d=Math.max(0,s.start),p=Math.min(l.count,s.start+s.count);for(let f=d,m=p;f<m;f++){let v=l.getX(f);Sm.fromBufferAttribute(h,v),xT(Sm,v,o,i,e,t,this)}}else{let d=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let f=d,m=p;f<m;f++)Sm.fromBufferAttribute(h,f),xT(Sm,f,o,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){let a=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=n}}}}else{let t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}};I9.prototype.isPoints=!0;function xT(e,t,r,i,n,s,a){let o=Nx.distanceSqToPoint(e);if(o<r){let l=new O;Nx.closestPointToPoint(e,l),l.applyMatrix4(i);let h=n.ray.origin.distanceTo(l);if(h<n.near||h>n.far)return;s.push({distance:h,distanceToRay:Math.sqrt(o),point:l,index:t,face:null,object:a})}}var x3=class extends Ir{constructor(e,t,r,i,n,s,a,o,l){super(e,t,r,i,n,s,a,o,l);this.format=a!==void 0?a:$i,this.minFilter=s!==void 0?s:ar,this.magFilter=n!==void 0?n:ar,this.generateMipmaps=!1;let h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};x3.prototype.isVideoTexture=!0;var B9=class extends Ir{constructor(e,t,r,i,n,s,a,o,l,h,d,p){super(null,s,a,o,l,h,i,n,d,p);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}};B9.prototype.isCompressedTexture=!0;var z9=class extends Ir{constructor(e,t,r,i,n,s,a,o,l){super(e,t,r,i,n,s,a,o,l);this.needsUpdate=!0}};z9.prototype.isCanvasTexture=!0;var qv=class extends Ir{constructor(e,t,r,i,n,s,a,o,l,h){if(h=h!==void 0?h:zh,h!==zh&&h!==Kh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===zh&&(r=Fg),r===void 0&&h===Kh&&(r=Bh);super(null,i,n,s,a,o,h,r,l);this.image={width:e,height:t},this.magFilter=a!==void 0?a:Zr,this.minFilter=o!==void 0?o:Zr,this.flipY=!1,this.generateMipmaps=!1}};qv.prototype.isDepthTexture=!0;var N_=class extends st{constructor(e=1,t=1,r=1,i=8,n=1,s=!1,a=0,o=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:o};let l=this;i=Math.floor(i),n=Math.floor(n);let h=[],d=[],p=[],f=[],m=0,v=[],w=r/2,S=0;y(),s===!1&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(h),this.setAttribute("position",new Je(d,3)),this.setAttribute("normal",new Je(p,3)),this.setAttribute("uv",new Je(f,2));function y(){let _=new O,b=new O,T=0,A=(t-e)/r;for(let M=0;M<=n;M++){let L=[],D=M/n,C=D*(t-e)+e;for(let N=0;N<=i;N++){let U=N/i,V=U*o+a,k=Math.sin(V),G=Math.cos(V);b.x=C*k,b.y=-D*r+w,b.z=C*G,d.push(b.x,b.y,b.z),_.set(k,A,G).normalize(),p.push(_.x,_.y,_.z),f.push(U,1-D),L.push(m++)}v.push(L)}for(let M=0;M<i;M++)for(let L=0;L<n;L++){let D=v[L][M],C=v[L+1][M],N=v[L+1][M+1],U=v[L][M+1];h.push(D,C,U),h.push(C,N,U),T+=6}l.addGroup(S,T,0),S+=T}function g(_){let b=m,T=new Q,A=new O,M=0,L=_===!0?e:t,D=_===!0?1:-1;for(let N=1;N<=i;N++)d.push(0,w*D,0),p.push(0,D,0),f.push(.5,.5),m++;let C=m;for(let N=0;N<=i;N++){let U=N/i*o+a,V=Math.cos(U),k=Math.sin(U);A.x=L*k,A.y=w*D,A.z=L*V,d.push(A.x,A.y,A.z),p.push(0,D,0),T.x=V*.5+.5,T.y=k*.5*D+.5,f.push(T.x,T.y),m++}for(let N=0;N<i;N++){let U=b+N,V=C+N;_===!0?h.push(V,V+1,U):h.push(V+1,V,U),M+=3}l.addGroup(S,M,_===!0?1:2),S+=M}}static fromJSON(e){return new N_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},w3=class extends N_{constructor(e=1,t=1,r=8,i=1,n=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,n,s,a);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:s,thetaLength:a}}static fromJSON(e){return new w3(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},I_=class extends st{constructor(e,t,r=1,i=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],s=[];a(i),l(r),h(),this.setAttribute("position",new Je(n,3)),this.setAttribute("normal",new Je(n.slice(),3)),this.setAttribute("uv",new Je(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(y){let g=new O,_=new O,b=new O;for(let T=0;T<t.length;T+=3)f(t[T+0],g),f(t[T+1],_),f(t[T+2],b),o(g,_,b,y)}function o(y,g,_,b){let T=b+1,A=[];for(let M=0;M<=T;M++){A[M]=[];let L=y.clone().lerp(_,M/T),D=g.clone().lerp(_,M/T),C=T-M;for(let N=0;N<=C;N++)N===0&&M===T?A[M][N]=L:A[M][N]=L.clone().lerp(D,N/C)}for(let M=0;M<T;M++)for(let L=0;L<2*(T-M)-1;L++){let D=Math.floor(L/2);L%2==0?(p(A[M][D+1]),p(A[M+1][D]),p(A[M][D])):(p(A[M][D+1]),p(A[M+1][D+1]),p(A[M+1][D]))}}function l(y){let g=new O;for(let _=0;_<n.length;_+=3)g.x=n[_+0],g.y=n[_+1],g.z=n[_+2],g.normalize().multiplyScalar(y),n[_+0]=g.x,n[_+1]=g.y,n[_+2]=g.z}function h(){let y=new O;for(let g=0;g<n.length;g+=3){y.x=n[g+0],y.y=n[g+1],y.z=n[g+2];let _=w(y)/2/Math.PI+.5,b=S(y)/Math.PI+.5;s.push(_,1-b)}m(),d()}function d(){for(let y=0;y<s.length;y+=6){let g=s[y+0],_=s[y+2],b=s[y+4],T=Math.max(g,_,b),A=Math.min(g,_,b);T>.9&&A<.1&&(g<.2&&(s[y+0]+=1),_<.2&&(s[y+2]+=1),b<.2&&(s[y+4]+=1))}}function p(y){n.push(y.x,y.y,y.z)}function f(y,g){let _=y*3;g.x=e[_+0],g.y=e[_+1],g.z=e[_+2]}function m(){let y=new O,g=new O,_=new O,b=new O,T=new Q,A=new Q,M=new Q;for(let L=0,D=0;L<n.length;L+=9,D+=6){y.set(n[L+0],n[L+1],n[L+2]),g.set(n[L+3],n[L+4],n[L+5]),_.set(n[L+6],n[L+7],n[L+8]),T.set(s[D+0],s[D+1]),A.set(s[D+2],s[D+3]),M.set(s[D+4],s[D+5]),b.copy(y).add(g).add(_).divideScalar(3);let C=w(b);v(T,D+0,y,C),v(A,D+2,g,C),v(M,D+4,_,C)}}function v(y,g,_,b){b<0&&y.x===1&&(s[g]=y.x-1),_.x===0&&_.z===0&&(s[g]=b/2/Math.PI+.5)}function w(y){return Math.atan2(y.z,-y.x)}function S(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new I_(e.vertices,e.indices,e.radius,e.details)}},_3=class extends I_{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _3(e.radius,e.detail)}};new O;new O;new O;new ai;var As=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,s;t?s=t:s=e*r[n-1];let a=0,o=n-1,l;for(;a<=o;)if(i=Math.floor(a+(o-a)/2),l=r[i]-s,l<0)a=i+1;else if(l>0)o=i-1;else{o=i;break}if(i=o,r[i]===s)return i/(n-1);let h=r[i],d=r[i+1]-h,p=(s-h)/d;return(i+p)/(n-1)}getTangent(e,t){let r=1e-4,i=e-r,n=e+r;i<0&&(i=0),n>1&&(n=1);let s=this.getPoint(i),a=this.getPoint(n),o=t||(s.isVector2?new Q:new O);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new O,i=[],n=[],s=[],a=new O,o=new Ge;for(let f=0;f<=e;f++){let m=f/e;i[f]=this.getTangentAt(m,new O),i[f].normalize()}n[0]=new O,s[0]=new O;let l=Number.MAX_VALUE,h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=l&&(l=h,r.set(1,0,0)),d<=l&&(l=d,r.set(0,1,0)),p<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],a),s[0].crossVectors(i[0],n[0]);for(let f=1;f<=e;f++){if(n[f]=n[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();let m=Math.acos(Pi(i[f-1].dot(i[f]),-1,1));n[f].applyMatrix4(o.makeRotationAxis(a,m))}s[f].crossVectors(i[f],n[f])}if(t===!0){let f=Math.acos(Pi(n[0].dot(n[e]),-1,1));f/=e,i[0].dot(a.crossVectors(n[0],n[e]))>0&&(f=-f);for(let m=1;m<=e;m++)n[m].applyMatrix4(o.makeRotationAxis(i[m],f*m)),s[m].crossVectors(i[m],n[m])}return{tangents:i,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},jp=class extends As{constructor(e=0,t=0,r=1,i=1,n=0,s=Math.PI*2,a=!1,o=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){let r=t||new Q,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(s?n=0:n=i),this.aClockwise===!0&&!s&&(n===i?n=-i:n=n-i);let a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=o-this.aX,f=l-this.aY;o=p*h-f*d+this.aX,l=p*d+f*h+this.aY}return r.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};jp.prototype.isEllipseCurve=!0;var S3=class extends jp{constructor(e,t,r,i,n,s){super(e,t,r,r,i,n,s);this.type="ArcCurve"}};S3.prototype.isArcCurve=!0;function B_(){let e=0,t=0,r=0,i=0;function n(s,a,o,l){e=s,t=o,r=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,h){n(a,o,h*(o-s),h*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,h,d,p){let f=(a-s)/h-(o-s)/(h+d)+(o-a)/d,m=(o-a)/d-(l-a)/(d+p)+(l-o)/p;f*=d,m*=d,n(a,o,f,m)},calc:function(s){let a=s*s,o=a*s;return e+t*s+r*a+i*o}}}var bm=new O,y1=new B_,x1=new B_,w1=new B_,b3=class extends As{constructor(e=[],t=!1,r="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new O){let r=t,i=this.points,n=i.length,s=(n-(this.closed?0:1))*e,a=Math.floor(s),o=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:o===0&&a===n-1&&(a=n-2,o=1);let l,h;this.closed||a>0?l=i[(a-1)%n]:(bm.subVectors(i[0],i[1]).add(i[0]),l=bm);let d=i[a%n],p=i[(a+1)%n];if(this.closed||a+2<n?h=i[(a+2)%n]:(bm.subVectors(i[n-1],i[n-2]).add(i[n-1]),h=bm),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,m=Math.pow(l.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(p),f),w=Math.pow(p.distanceToSquared(h),f);v<1e-4&&(v=1),m<1e-4&&(m=v),w<1e-4&&(w=v),y1.initNonuniformCatmullRom(l.x,d.x,p.x,h.x,m,v,w),x1.initNonuniformCatmullRom(l.y,d.y,p.y,h.y,m,v,w),w1.initNonuniformCatmullRom(l.z,d.z,p.z,h.z,m,v,w)}else this.curveType==="catmullrom"&&(y1.initCatmullRom(l.x,d.x,p.x,h.x,this.tension),x1.initCatmullRom(l.y,d.y,p.y,h.y,this.tension),w1.initCatmullRom(l.z,d.z,p.z,h.z,this.tension));return r.set(y1.calc(o),x1.calc(o),w1.calc(o)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new O().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};b3.prototype.isCatmullRomCurve3=!0;function wT(e,t,r,i,n){let s=(i-t)*.5,a=(n-r)*.5,o=e*e,l=e*o;return(2*r-2*i+s+a)*l+(-3*r+3*i-2*s-a)*o+s*e+r}function F9(e,t){let r=1-e;return r*r*t}function U9(e,t){return 2*(1-e)*e*t}function k9(e,t){return e*e*t}function Ud(e,t,r,i){return F9(e,t)+U9(e,r)+k9(e,i)}function H9(e,t){let r=1-e;return r*r*r*t}function G9(e,t){let r=1-e;return 3*r*r*e*t}function V9(e,t){return 3*(1-e)*e*e*t}function j9(e,t){return e*e*e*t}function kd(e,t,r,i,n){return H9(e,t)+G9(e,r)+V9(e,i)+j9(e,n)}var Ys=class extends As{constructor(e=new Q,t=new Q,r=new Q,i=new Q){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Q){let r=t,i=this.v0,n=this.v1,s=this.v2,a=this.v3;return r.set(kd(e,i.x,n.x,s.x,a.x),kd(e,i.y,n.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}};Ys.prototype.isCubicBezierCurve=!0;var A3=class extends As{constructor(e=new O,t=new O,r=new O,i=new O){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new O){let r=t,i=this.v0,n=this.v1,s=this.v2,a=this.v3;return r.set(kd(e,i.x,n.x,s.x,a.x),kd(e,i.y,n.y,s.y,a.y),kd(e,i.z,n.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}};A3.prototype.isCubicBezierCurve3=!0;var Ks=class extends As{constructor(e=new Q,t=new Q){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Q){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new Q;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};Ks.prototype.isLineCurve=!0;var M3=class extends As{constructor(e=new O,t=new O){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new O){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},ml=class extends As{constructor(e=new Q,t=new Q,r=new Q){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Q){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(Ud(e,i.x,n.x,s.x),Ud(e,i.y,n.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};ml.prototype.isQuadraticBezierCurve=!0;var E3=class extends As{constructor(e=new O,t=new O,r=new O){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new O){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(Ud(e,i.x,n.x,s.x),Ud(e,i.y,n.y,s.y),Ud(e,i.z,n.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};E3.prototype.isQuadraticBezierCurve3=!0;var Xv=class extends As{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new Q){let r=t,i=this.points,n=(i.length-1)*e,s=Math.floor(n),a=n-s,o=i[s===0?s:s-1],l=i[s],h=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(wT(a,o.x,l.x,h.x,d.x),wT(a,o.y,l.y,h.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new Q().fromArray(i))}return this}};Xv.prototype.isSplineCurve=!0;var T3=Object.freeze({__proto__:null,ArcCurve:S3,CatmullRomCurve3:b3,CubicBezierCurve:Ys,CubicBezierCurve3:A3,EllipseCurve:jp,LineCurve:Ks,LineCurve3:M3,QuadraticBezierCurve:ml,QuadraticBezierCurve3:E3,SplineCurve:Xv}),W9={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,s=C3(e,0,n,r,!0),a=[];if(!s||s.next===s.prev)return a;let o,l,h,d,p,f,m;if(i&&(s=Q9(e,t,s,r)),e.length>80*r){o=h=e[0],l=d=e[1];for(let v=r;v<n;v+=r)p=e[v],f=e[v+1],p<o&&(o=p),f<l&&(l=f),p>h&&(h=p),f>d&&(d=f);m=Math.max(h-o,d-l),m=m!==0?1/m:0}return lp(s,a,r,o,l,m),a}};function C3(e,t,r,i,n){let s,a;if(n===o7(e,t,r,i)>0)for(s=t;s<r;s+=i)a=_T(s,e[s],e[s+1],a);else for(s=r-i;s>=t;s-=i)a=_T(s,e[s],e[s+1],a);return a&&Qv(a,a.next)&&(hp(a),a=a.next),a}function gl(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(Qv(r,r.next)||Rr(r.prev,r,r.next)===0)){if(hp(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function lp(e,t,r,i,n,s,a){if(!e)return;!a&&s&&t7(e,i,n,s);let o=e,l,h;for(;e.prev!==e.next;){if(l=e.prev,h=e.next,s?Y9(e,i,n,s):J9(e)){t.push(l.i/r),t.push(e.i/r),t.push(h.i/r),hp(e),e=h.next,o=h.next;continue}if(e=h,e===o){a?a===1?(e=q9(gl(e),t,r),lp(e,t,r,i,n,s,2)):a===2&&X9(e,t,r,i,n,s):lp(gl(e),t,r,i,n,s,1);break}}}function J9(e){let t=e.prev,r=e,i=e.next;if(Rr(t,r,i)>=0)return!1;let n=e.next.next;for(;n!==e.prev;){if(yh(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Rr(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Y9(e,t,r,i){let n=e.prev,s=e,a=e.next;if(Rr(n,s,a)>=0)return!1;let o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,l=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,h=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,d=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,p=Ix(o,l,t,r,i),f=Ix(h,d,t,r,i),m=e.prevZ,v=e.nextZ;for(;m&&m.z>=p&&v&&v.z<=f;){if(m!==e.prev&&m!==e.next&&yh(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&Rr(m.prev,m,m.next)>=0||(m=m.prevZ,v!==e.prev&&v!==e.next&&yh(n.x,n.y,s.x,s.y,a.x,a.y,v.x,v.y)&&Rr(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;m&&m.z>=p;){if(m!==e.prev&&m!==e.next&&yh(n.x,n.y,s.x,s.y,a.x,a.y,m.x,m.y)&&Rr(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;v&&v.z<=f;){if(v!==e.prev&&v!==e.next&&yh(n.x,n.y,s.x,s.y,a.x,a.y,v.x,v.y)&&Rr(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function q9(e,t,r){let i=e;do{let n=i.prev,s=i.next.next;!Qv(n,s)&&L3(n,i,i.next,s)&&up(n,s)&&up(s,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(s.i/r),hp(i),hp(i.next),i=e=s),i=i.next}while(i!==e);return gl(i)}function X9(e,t,r,i,n,s){let a=e;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&n7(a,o)){let l=O3(a,o);a=gl(a,a.next),l=gl(l,l.next),lp(a,t,r,i,n,s),lp(l,t,r,i,n,s);return}o=o.next}a=a.next}while(a!==e)}function Q9(e,t,r,i){let n=[],s,a,o,l,h;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,h=C3(e,o,l,i,!1),h===h.next&&(h.steiner=!0),n.push(i7(h));for(n.sort(K9),s=0;s<n.length;s++)Z9(n[s],r),r=gl(r,r.next);return r}function K9(e,t){return e.x-t.x}function Z9(e,t){if(t=$9(e,t),t){let r=O3(t,e);gl(t,t.next),gl(r,r.next)}}function $9(e,t){let r=t,i=e.x,n=e.y,s=-1/0,a;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){let f=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(f<=i&&f>s){if(s=f,f===i){if(n===r.y)return r;if(n===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!a)return null;if(i===s)return a;let o=a,l=a.x,h=a.y,d=1/0,p;r=a;do i>=r.x&&r.x>=l&&i!==r.x&&yh(n<h?i:s,n,l,h,n<h?s:i,n,r.x,r.y)&&(p=Math.abs(n-r.y)/(i-r.x),up(r,e)&&(p<d||p===d&&(r.x>a.x||r.x===a.x&&e7(a,r)))&&(a=r,d=p)),r=r.next;while(r!==o);return a}function e7(e,t){return Rr(e.prev,e,t.prev)<0&&Rr(t.next,e,e.next)<0}function t7(e,t,r,i){let n=e;do n.z===null&&(n.z=Ix(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,r7(n)}function r7(e){let t,r,i,n,s,a,o,l,h=1;do{for(r=e,e=null,s=null,a=0;r;){for(a++,i=r,o=0,t=0;t<h&&(o++,i=i.nextZ,!!i);t++);for(l=h;o>0||l>0&&i;)o!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,h*=2}while(a>1);return e}function Ix(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function i7(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function yh(e,t,r,i,n,s,a,o){return(n-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(i-o)-(r-a)*(t-o)>=0&&(r-a)*(s-o)-(n-a)*(i-o)>=0}function n7(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!s7(e,t)&&(up(e,t)&&up(t,e)&&a7(e,t)&&(Rr(e.prev,e,t.prev)||Rr(e,t.prev,t))||Qv(e,t)&&Rr(e.prev,e,e.next)>0&&Rr(t.prev,t,t.next)>0)}function Rr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Qv(e,t){return e.x===t.x&&e.y===t.y}function L3(e,t,r,i){let n=Mm(Rr(e,t,r)),s=Mm(Rr(e,t,i)),a=Mm(Rr(r,i,e)),o=Mm(Rr(r,i,t));return!!(n!==s&&a!==o||n===0&&Am(e,r,t)||s===0&&Am(e,i,t)||a===0&&Am(r,e,i)||o===0&&Am(r,t,i))}function Am(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Mm(e){return e>0?1:e<0?-1:0}function s7(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&L3(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function up(e,t){return Rr(e.prev,e,e.next)<0?Rr(e,t,e.next)>=0&&Rr(e,e.prev,t)>=0:Rr(e,t,e.prev)<0||Rr(e,e.next,t)<0}function a7(e,t){let r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function O3(e,t){let r=new Bx(e.i,e.x,e.y),i=new Bx(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function _T(e,t,r,i){let n=new Bx(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function hp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Bx(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function o7(e,t,r,i){let n=0;for(let s=t,a=r-i;s<r;s+=i)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}var nl=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return nl.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];ST(e),bT(r,e);let s=e.length;t.forEach(ST);for(let o=0;o<t.length;o++)i.push(s),s+=t[o].length,bT(r,t[o]);let a=W9.triangulate(r,i);for(let o=0;o<a.length;o+=3)n.push(a.slice(o,o+3));return n}};function ST(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function bT(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var Wp=class extends st{constructor(e,t){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let r=this,i=[],n=[];for(let a=0,o=e.length;a<o;a++){let l=e[a];s(l)}this.setAttribute("position",new Je(i,3)),this.setAttribute("uv",new Je(n,2)),this.computeVertexNormals();function s(a){let o=[],l=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:100,p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:6,m=t.bevelSize!==void 0?t.bevelSize:f-2,v=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3,S=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:l7;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let g,_=!1,b,T,A,M;S&&(g=S.getSpacedPoints(h),_=!0,p=!1,b=S.computeFrenetFrames(h,!1),T=new O,A=new O,M=new O),p||(w=0,f=0,m=0,v=0);let L=a.extractPoints(l),D=L.shape,C=L.holes;if(!nl.isClockWise(D)){D=D.reverse();for(let K=0,ne=C.length;K<ne;K++){let ae=C[K];nl.isClockWise(ae)&&(C[K]=ae.reverse())}}let N=nl.triangulateShape(D,C),U=D;for(let K=0,ne=C.length;K<ne;K++){let ae=C[K];D=D.concat(ae)}function V(K,ne,ae){return ne||console.error("THREE.ExtrudeGeometry: vec does not exist"),ne.clone().multiplyScalar(ae).add(K)}let k=D.length,G=N.length;function $(K,ne,ae){let fe,pe,xe,Ae=K.x-ne.x,F=K.y-ne.y,B=ae.x-K.x,de=ae.y-K.y,Oe=Ae*Ae+F*F,Ce=Ae*de-F*B;if(Math.abs(Ce)>Number.EPSILON){let Re=Math.sqrt(Oe),ze=Math.sqrt(B*B+de*de),Ke=ne.x-F/Re,We=ne.y+Ae/Re,qe=ae.x-de/ze,te=ae.y+B/ze,Ie=((qe-Ke)*de-(te-We)*B)/(Ae*de-F*B);fe=Ke+Ae*Ie-K.x,pe=We+F*Ie-K.y;let Me=fe*fe+pe*pe;if(Me<=2)return new Q(fe,pe);xe=Math.sqrt(Me/2)}else{let Re=!1;Ae>Number.EPSILON?B>Number.EPSILON&&(Re=!0):Ae<-Number.EPSILON?B<-Number.EPSILON&&(Re=!0):Math.sign(F)===Math.sign(de)&&(Re=!0),Re?(fe=-F,pe=Ae,xe=Math.sqrt(Oe)):(fe=Ae,pe=F,xe=Math.sqrt(Oe/2))}return new Q(fe/xe,pe/xe)}let W=[];for(let K=0,ne=U.length,ae=ne-1,fe=K+1;K<ne;K++,ae++,fe++)ae===ne&&(ae=0),fe===ne&&(fe=0),W[K]=$(U[K],U[ae],U[fe]);let H=[],X,J=W.concat();for(let K=0,ne=C.length;K<ne;K++){let ae=C[K];X=[];for(let fe=0,pe=ae.length,xe=pe-1,Ae=fe+1;fe<pe;fe++,xe++,Ae++)xe===pe&&(xe=0),Ae===pe&&(Ae=0),X[fe]=$(ae[fe],ae[xe],ae[Ae]);H.push(X),J=J.concat(X)}for(let K=0;K<w;K++){let ne=K/w,ae=f*Math.cos(ne*Math.PI/2),fe=m*Math.sin(ne*Math.PI/2)+v;for(let pe=0,xe=U.length;pe<xe;pe++){let Ae=V(U[pe],W[pe],fe);we(Ae.x,Ae.y,-ae)}for(let pe=0,xe=C.length;pe<xe;pe++){let Ae=C[pe];X=H[pe];for(let F=0,B=Ae.length;F<B;F++){let de=V(Ae[F],X[F],fe);we(de.x,de.y,-ae)}}}let Y=m+v;for(let K=0;K<k;K++){let ne=p?V(D[K],J[K],Y):D[K];_?(A.copy(b.normals[0]).multiplyScalar(ne.x),T.copy(b.binormals[0]).multiplyScalar(ne.y),M.copy(g[0]).add(A).add(T),we(M.x,M.y,M.z)):we(ne.x,ne.y,0)}for(let K=1;K<=h;K++)for(let ne=0;ne<k;ne++){let ae=p?V(D[ne],J[ne],Y):D[ne];_?(A.copy(b.normals[K]).multiplyScalar(ae.x),T.copy(b.binormals[K]).multiplyScalar(ae.y),M.copy(g[K]).add(A).add(T),we(M.x,M.y,M.z)):we(ae.x,ae.y,d/h*K)}for(let K=w-1;K>=0;K--){let ne=K/w,ae=f*Math.cos(ne*Math.PI/2),fe=m*Math.sin(ne*Math.PI/2)+v;for(let pe=0,xe=U.length;pe<xe;pe++){let Ae=V(U[pe],W[pe],fe);we(Ae.x,Ae.y,d+ae)}for(let pe=0,xe=C.length;pe<xe;pe++){let Ae=C[pe];X=H[pe];for(let F=0,B=Ae.length;F<B;F++){let de=V(Ae[F],X[F],fe);_?we(de.x,de.y+g[h-1].y,g[h-1].x+ae):we(de.x,de.y,d+ae)}}}ee(),ie();function ee(){let K=i.length/3;if(p){let ne=0,ae=k*ne;for(let fe=0;fe<G;fe++){let pe=N[fe];q(pe[2]+ae,pe[1]+ae,pe[0]+ae)}ne=h+w*2,ae=k*ne;for(let fe=0;fe<G;fe++){let pe=N[fe];q(pe[0]+ae,pe[1]+ae,pe[2]+ae)}}else{for(let ne=0;ne<G;ne++){let ae=N[ne];q(ae[2],ae[1],ae[0])}for(let ne=0;ne<G;ne++){let ae=N[ne];q(ae[0]+k*h,ae[1]+k*h,ae[2]+k*h)}}r.addGroup(K,i.length/3-K,0)}function ie(){let K=i.length/3,ne=0;ue(U,ne),ne+=U.length;for(let ae=0,fe=C.length;ae<fe;ae++){let pe=C[ae];ue(pe,ne),ne+=pe.length}r.addGroup(K,i.length/3-K,1)}function ue(K,ne){let ae=K.length;for(;--ae>=0;){let fe=ae,pe=ae-1;pe<0&&(pe=K.length-1);for(let xe=0,Ae=h+w*2;xe<Ae;xe++){let F=k*xe,B=k*(xe+1),de=ne+fe+F,Oe=ne+pe+F,Ce=ne+pe+B,Re=ne+fe+B;Se(de,Oe,Ce,Re)}}}function we(K,ne,ae){o.push(K),o.push(ne),o.push(ae)}function q(K,ne,ae){me(K),me(ne),me(ae);let fe=i.length/3,pe=y.generateTopUV(r,i,fe-3,fe-2,fe-1);re(pe[0]),re(pe[1]),re(pe[2])}function Se(K,ne,ae,fe){me(K),me(ne),me(fe),me(ne),me(ae),me(fe);let pe=i.length/3,xe=y.generateSideWallUV(r,i,pe-6,pe-3,pe-2,pe-1);re(xe[0]),re(xe[1]),re(xe[3]),re(xe[1]),re(xe[2]),re(xe[3])}function me(K){i.push(o[K*3+0]),i.push(o[K*3+1]),i.push(o[K*3+2])}function re(K){n.push(K.x),n.push(K.y)}}}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return u7(t,r,e)}static fromJSON(e,t){let r=[];for(let n=0,s=e.shapes.length;n<s;n++){let a=t[e.shapes[n]];r.push(a)}let i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new T3[i.type]().fromJSON(i)),new Wp(r,e.options)}},l7={generateTopUV:function(e,t,r,i,n){let s=t[r*3],a=t[r*3+1],o=t[i*3],l=t[i*3+1],h=t[n*3],d=t[n*3+1];return[new Q(s,a),new Q(o,l),new Q(h,d)]},generateSideWallUV:function(e,t,r,i,n,s){let a=t[r*3],o=t[r*3+1],l=t[r*3+2],h=t[i*3],d=t[i*3+1],p=t[i*3+2],f=t[n*3],m=t[n*3+1],v=t[n*3+2],w=t[s*3],S=t[s*3+1],y=t[s*3+2];return Math.abs(o-d)<Math.abs(a-h)?[new Q(a,1-l),new Q(h,1-p),new Q(f,1-v),new Q(w,1-y)]:[new Q(o,1-l),new Q(d,1-p),new Q(m,1-v),new Q(S,1-y)]}};function u7(e,t,r){if(r.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){let s=e[i];r.shapes.push(s.uuid)}else r.shapes.push(e.uuid);return t.extrudePath!==void 0&&(r.options.extrudePath=t.extrudePath.toJSON()),r}var P3=class extends I_{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new P3(e.radius,e.detail)}},D3=class extends st{constructor(e,t=12,r=0,i=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Pi(i,0,Math.PI*2);let n=[],s=[],a=[],o=1/t,l=new O,h=new Q;for(let d=0;d<=t;d++){let p=r+d*o*i,f=Math.sin(p),m=Math.cos(p);for(let v=0;v<=e.length-1;v++)l.x=e[v].x*f,l.y=e[v].y,l.z=e[v].x*m,s.push(l.x,l.y,l.z),h.x=d/t,h.y=v/(e.length-1),a.push(h.x,h.y)}for(let d=0;d<t;d++)for(let p=0;p<e.length-1;p++){let f=p+d*e.length,m=f,v=f+e.length,w=f+e.length+1,S=f+1;n.push(m,v,S),n.push(v,w,S)}if(this.setIndex(n),this.setAttribute("position",new Je(s,3)),this.setAttribute("uv",new Je(a,2)),this.computeVertexNormals(),i===Math.PI*2){let d=this.attributes.normal.array,p=new O,f=new O,m=new O,v=t*e.length*3;for(let w=0,S=0;w<e.length;w++,S+=3)p.x=d[S+0],p.y=d[S+1],p.z=d[S+2],f.x=d[v+S+0],f.y=d[v+S+1],f.z=d[v+S+2],m.addVectors(p,f).normalize(),d[S+0]=d[v+S+0]=m.x,d[S+1]=d[v+S+1]=m.y,d[S+2]=d[v+S+2]=m.z}}static fromJSON(e){return new D3(e.points,e.segments,e.phiStart,e.phiLength)}},z_=class extends st{constructor(e,t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let r=[],i=[],n=[],s=[],a=0,o=0;if(Array.isArray(e)===!1)l(e);else for(let h=0;h<e.length;h++)l(e[h]),this.addGroup(a,o,h),a+=o,o=0;this.setIndex(r),this.setAttribute("position",new Je(i,3)),this.setAttribute("normal",new Je(n,3)),this.setAttribute("uv",new Je(s,2));function l(h){let d=i.length/3,p=h.extractPoints(t),f=p.shape,m=p.holes;nl.isClockWise(f)===!1&&(f=f.reverse());for(let w=0,S=m.length;w<S;w++){let y=m[w];nl.isClockWise(y)===!0&&(m[w]=y.reverse())}let v=nl.triangulateShape(f,m);for(let w=0,S=m.length;w<S;w++){let y=m[w];f=f.concat(y)}for(let w=0,S=f.length;w<S;w++){let y=f[w];i.push(y.x,y.y,0),n.push(0,0,1),s.push(y.x,y.y)}for(let w=0,S=v.length;w<S;w++){let y=v[w],g=y[0]+d,_=y[1]+d,b=y[2]+d;r.push(g,_,b),o+=3}}}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return h7(t,e)}static fromJSON(e,t){let r=[];for(let i=0,n=e.shapes.length;i<n;i++){let s=t[e.shapes[i]];r.push(s)}return new z_(r,e.curveSegments)}};function h7(e,t){if(t.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){let n=e[r];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}var F_=class extends st{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,s=0,a=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let o=Math.min(s+a,Math.PI),l=0,h=[],d=new O,p=new O,f=[],m=[],v=[],w=[];for(let S=0;S<=r;S++){let y=[],g=S/r,_=0;S==0&&s==0?_=.5/t:S==r&&o==Math.PI&&(_=-.5/t);for(let b=0;b<=t;b++){let T=b/t;d.x=-e*Math.cos(i+T*n)*Math.sin(s+g*a),d.y=e*Math.cos(s+g*a),d.z=e*Math.sin(i+T*n)*Math.sin(s+g*a),m.push(d.x,d.y,d.z),p.copy(d).normalize(),v.push(p.x,p.y,p.z),w.push(T+_,1-g),y.push(l++)}h.push(y)}for(let S=0;S<r;S++)for(let y=0;y<t;y++){let g=h[S][y+1],_=h[S][y],b=h[S+1][y],T=h[S+1][y+1];(S!==0||s>0)&&f.push(g,_,T),(S!==r-1||o<Math.PI)&&f.push(_,b,T)}this.setIndex(f),this.setAttribute("position",new Je(m,3)),this.setAttribute("normal",new Je(v,3)),this.setAttribute("uv",new Je(w,2))}static fromJSON(e){return new F_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},R3=class extends st{constructor(e=1,t=.4,r=64,i=8,n=2,s=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:s},r=Math.floor(r),i=Math.floor(i);let a=[],o=[],l=[],h=[],d=new O,p=new O,f=new O,m=new O,v=new O,w=new O,S=new O;for(let g=0;g<=r;++g){let _=g/r*n*Math.PI*2;y(_,n,s,e,f),y(_+.01,n,s,e,m),w.subVectors(m,f),S.addVectors(m,f),v.crossVectors(w,S),S.crossVectors(v,w),v.normalize(),S.normalize();for(let b=0;b<=i;++b){let T=b/i*Math.PI*2,A=-t*Math.cos(T),M=t*Math.sin(T);d.x=f.x+(A*S.x+M*v.x),d.y=f.y+(A*S.y+M*v.y),d.z=f.z+(A*S.z+M*v.z),o.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(g/r),h.push(b/i)}}for(let g=1;g<=r;g++)for(let _=1;_<=i;_++){let b=(i+1)*(g-1)+(_-1),T=(i+1)*g+(_-1),A=(i+1)*g+_,M=(i+1)*(g-1)+_;a.push(b,T,M),a.push(T,A,M)}this.setIndex(a),this.setAttribute("position",new Je(o,3)),this.setAttribute("normal",new Je(l,3)),this.setAttribute("uv",new Je(h,2));function y(g,_,b,T,A){let M=Math.cos(g),L=Math.sin(g),D=b/_*g,C=Math.cos(D);A.x=T*(2+C)*.5*M,A.y=T*(2+C)*L*.5,A.z=T*Math.sin(D)*.5}}static fromJSON(e){return new R3(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},c7=class extends rn{constructor(e){super();this.type="ShadowMaterial",this.color=new Ue(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}};c7.prototype.isShadowMaterial=!0;var N3=class extends rn{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ue(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}};N3.prototype.isMeshStandardMaterial=!0;var d7=class extends N3{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Q(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Pi(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Ue(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Ue(1,1,1),this.specularTintMap=null,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Ue).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}};d7.prototype.isMeshPhysicalMaterial=!0;var p7=class extends rn{constructor(e){super();this.type="MeshPhongMaterial",this.color=new Ue(16777215),this.specular=new Ue(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}};p7.prototype.isMeshPhongMaterial=!0;var f7=class extends rn{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ue(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};f7.prototype.isMeshToonMaterial=!0;var m7=class extends rn{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}};m7.prototype.isMeshNormalMaterial=!0;var g7=class extends rn{constructor(e){super();this.type="MeshLambertMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};g7.prototype.isMeshLambertMaterial=!0;var v7=class extends rn{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ue(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yc,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}};v7.prototype.isMeshMatcapMaterial=!0;var y7=class extends Ts{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};y7.prototype.isLineDashedMaterial=!0;var Er={arraySlice:function(e,t,r){return Er.isTypedArray(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(n,s){return e[n]-e[s]}let r=e.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i},sortedArray:function(e,t,r){let i=e.length,n=new e.constructor(i);for(let s=0,a=0;a!==i;++s){let o=r[s]*t;for(let l=0;l!==t;++l)n[a++]=e[o+l]}return n},flattenJSON:function(e,t,r,i){let n=1,s=e[0];for(;s!==void 0&&s[i]===void 0;)s=e[n++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(t.push(s.time),r.push.apply(r,a)),s=e[n++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(t.push(s.time),a.toArray(r,r.length)),s=e[n++];while(s!==void 0);else do a=s[i],a!==void 0&&(t.push(s.time),r.push(a)),s=e[n++];while(s!==void 0)},subclip:function(e,t,r,i,n=30){let s=e.clone();s.name=t;let a=[];for(let l=0;l<s.tracks.length;++l){let h=s.tracks[l],d=h.getValueSize(),p=[],f=[];for(let m=0;m<h.times.length;++m){let v=h.times[m]*n;if(!(v<r||v>=i)){p.push(h.times[m]);for(let w=0;w<d;++w)f.push(h.values[m*d+w])}}p.length!==0&&(h.times=Er.convertArray(p,h.times.constructor),h.values=Er.convertArray(f,h.values.constructor),a.push(h))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,r=e,i=30){i<=0&&(i=30);let n=r.tracks.length,s=t/i;for(let a=0;a<n;++a){let o=r.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;let h=e.tracks.find(function(y){return y.name===o.name&&y.ValueTypeName===l});if(h===void 0)continue;let d=0,p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let f=0,m=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);let v=o.times.length-1,w;if(s<=o.times[0]){let y=d,g=p-d;w=Er.arraySlice(o.values,y,g)}else if(s>=o.times[v]){let y=v*p+d,g=y+p-d;w=Er.arraySlice(o.values,y,g)}else{let y=o.createInterpolant(),g=d,_=p-d;y.evaluate(s),w=Er.arraySlice(y.resultBuffer,g,_)}l==="quaternion"&&new Gr().fromArray(w).normalize().conjugate().toArray(w);let S=h.times.length;for(let y=0;y<S;++y){let g=y*m+f;if(l==="quaternion")Gr.multiplyQuaternionsFlat(h.values,g,w,0,h.values,g);else{let _=m-f*2;for(let b=0;b<_;++b)h.values[g+b]-=w[b]}}}return e.blendMode=WO,e}},vl=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{let s;r:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,n)}if(r===a)break;if(n=i,i=t[++r],e<i)break t}s=t.length;break r}if(!(e>=n)){let a=t[1];e<a&&(r=2,n=a);for(let o=r-2;;){if(n===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===o)break;if(i=n,n=t[--r-1],e>=n)break t}s=r,r=0;break r}break e}for(;r<s;){let a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],n=t[r-1],n===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,n,e)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let s=0;s!==i;++s)t[s]=r[n+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}};vl.prototype.beforeStart_=vl.prototype.copySampleValue_;vl.prototype.afterEnd_=vl.prototype.copySampleValue_;var x7=class extends vl{constructor(e,t,r,i){super(e,t,r,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:mh,endingEnd:mh}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,s=e+1,a=i[n],o=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case gh:n=e,a=2*t-r;break;case Ug:n=i.length-2,a=t+i[n]-i[n+1];break;default:n=e,a=r}if(o===void 0)switch(this.getSettings_().endingEnd){case gh:s=e,o=2*r-t;break;case Ug:s=1,o=r+i[1]-i[0];break;default:s=e-1,o=t}let l=(r-t)*.5,h=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-r),this._offsetPrev=n*h,this._offsetNext=s*h}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,f=this._weightNext,m=(r-t)/(i-t),v=m*m,w=v*m,S=-p*w+2*p*v-p*m,y=(1+p)*w+(-1.5-2*p)*v+(-.5+p)*m+1,g=(-1-f)*w+(1.5+f)*v+.5*m,_=f*w-f*v;for(let b=0;b!==a;++b)n[b]=S*s[h+b]+y*s[l+b]+g*s[o+b]+_*s[d+b];return n}},I3=class extends vl{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=(r-t)/(i-t),d=1-h;for(let p=0;p!==a;++p)n[p]=s[l+p]*d+s[o+p]*h;return n}},w7=class extends vl{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},ka=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Er.convertArray(t,this.TimeBufferType),this.values=Er.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Er.convertArray(e.times,Array),values:Er.convertArray(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new w7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new I3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new x7(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ip:t=this.InterpolantFactoryMethodDiscrete;break;case np:t=this.InterpolantFactoryMethodLinear;break;case Hy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ip;case this.InterpolantFactoryMethodLinear:return np;case this.InterpolantFactoryMethodSmooth:return Hy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,s=i-1;for(;n!==i&&r[n]<e;)++n;for(;s!==-1&&r[s]>t;)--s;if(++s,n!==0||s!==i){n>=s&&(s=Math.max(s,1),n=s-1);let a=this.getValueSize();this.times=Er.arraySlice(r,n,s),this.values=Er.arraySlice(this.values,n*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==n;a++){let o=r[a];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),e=!1;break}if(s!==null&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),e=!1;break}s=o}if(i!==void 0&&Er.isTypedArray(i))for(let a=0,o=i.length;a!==o;++a){let l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=Er.arraySlice(this.times),t=Er.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===Hy,n=e.length-1,s=1;for(let a=1;a<n;++a){let o=!1,l=e[a],h=e[a+1];if(l!==h&&(a!==1||l!==e[0]))if(i)o=!0;else{let d=a*r,p=d-r,f=d+r;for(let m=0;m!==r;++m){let v=t[d+m];if(v!==t[p+m]||v!==t[f+m]){o=!0;break}}}if(o){if(a!==s){e[s]=e[a];let d=a*r,p=s*r;for(let f=0;f!==r;++f)t[p+f]=t[d+f]}++s}}if(n>0){e[s]=e[n];for(let a=n*r,o=s*r,l=0;l!==r;++l)t[o+l]=t[a+l];++s}return s!==e.length?(this.times=Er.arraySlice(e,0,s),this.values=Er.arraySlice(t,0,s*r)):(this.times=e,this.values=t),this}clone(){let e=Er.arraySlice(this.times,0),t=Er.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};ka.prototype.TimeBufferType=Float32Array;ka.prototype.ValueBufferType=Float32Array;ka.prototype.DefaultInterpolation=np;var Sc=class extends ka{};Sc.prototype.ValueTypeName="bool";Sc.prototype.ValueBufferType=Array;Sc.prototype.DefaultInterpolation=ip;Sc.prototype.InterpolantFactoryMethodLinear=void 0;Sc.prototype.InterpolantFactoryMethodSmooth=void 0;var B3=class extends ka{};B3.prototype.ValueTypeName="color";var Hg=class extends ka{};Hg.prototype.ValueTypeName="number";var _7=class extends vl{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(r-t)/(i-t),l=e*a;for(let h=l+a;l!==h;l+=4)Gr.slerpFlat(n,0,s,l-a,s,l,o);return n}},Jp=class extends ka{InterpolantFactoryMethodLinear(e){return new _7(this.times,this.values,this.getValueSize(),e)}};Jp.prototype.ValueTypeName="quaternion";Jp.prototype.DefaultInterpolation=np;Jp.prototype.InterpolantFactoryMethodSmooth=void 0;var bc=class extends ka{};bc.prototype.ValueTypeName="string";bc.prototype.ValueBufferType=Array;bc.prototype.DefaultInterpolation=ip;bc.prototype.InterpolantFactoryMethodLinear=void 0;bc.prototype.InterpolantFactoryMethodSmooth=void 0;var Gg=class extends ka{};Gg.prototype.ValueTypeName="vector";var AT=class{constructor(e,t=-1,r,i=M_){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Qs(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(b7(r[s]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,s=r.length;n!==s;++n)t.push(ka.toJSON(r[n]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,s=[];for(let a=0;a<n;a++){let o=[],l=[];o.push((a+n-1)%n,a,(a+1)%n),l.push(0,1,0);let h=Er.getKeyframeOrder(o);o=Er.sortedArray(o,1,h),l=Er.sortedArray(l,1,h),!i&&o[0]===0&&(o.push(n),l.push(l[0])),s.push(new Hg(".morphTargetInfluences["+t[a].name+"]",o,l).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){let l=e[a],h=l.name.match(n);if(h&&h.length>1){let d=h[1],p=i[d];p||(i[d]=p=[]),p.push(l)}}let s=[];for(let a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(h,d,p,f,m){if(p.length!==0){let v=[],w=[];Er.flattenJSON(p,v,w,f),v.length!==0&&m.push(new h(d,v,w))}},i=[],n=e.name||"default",s=e.fps||30,a=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let h=0;h<l.length;h++){let d=l[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){let p={},f;for(f=0;f<d.length;f++)if(d[f].morphTargets)for(let m=0;m<d[f].morphTargets.length;m++)p[d[f].morphTargets[m]]=-1;for(let m in p){let v=[],w=[];for(let S=0;S!==d[f].morphTargets.length;++S){let y=d[f];v.push(y.time),w.push(y.morphTarget===m?1:0)}i.push(new Hg(".morphTargetInfluence["+m+"]",v,w))}o=p.length*(s||1)}else{let p=".bones["+t[h].name+"]";r(Gg,p+".position",d,"pos",i),r(Jp,p+".quaternion",d,"rot",i),r(Gg,p+".scale",d,"scl",i)}}return i.length===0?null:new this(n,o,i,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function S7(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hg;case"vector":case"vector2":case"vector3":case"vector4":return Gg;case"color":return B3;case"quaternion":return Jp;case"bool":case"boolean":return Sc;case"string":return bc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function b7(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=S7(e.type);if(e.times===void 0){let r=[],i=[];Er.flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var ec={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},U_=class{constructor(e,t,r){let i=this,n=!1,s=0,a=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,n===!1&&i.onStart!==void 0&&i.onStart(h,s,a),n=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,a),s===a&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return o?o(h):h},this.setURLModifier=function(h){return o=h,this},this.addHandler=function(h,d){return l.push(h,d),this},this.removeHandler=function(h){let d=l.indexOf(h);return d!==-1&&l.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=l.length;d<p;d+=2){let f=l[d],m=l[d+1];if(f.global&&(f.lastIndex=0),f.test(h))return m}return null}}},A7=new U_,ia=class{constructor(e){this.manager=e!==void 0?e:A7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Fs={},k_=class extends ia{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,s=ec.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;if(Fs[e]!==void 0){Fs[e].push({onLoad:t,onProgress:r,onError:i});return}let a=/^data:(.*?)(;base64)?,(.*)$/,o=e.match(a),l;if(o){let h=o[1],d=!!o[2],p=o[3];p=decodeURIComponent(p),d&&(p=atob(p));try{let f,m=(this.responseType||"").toLowerCase();switch(m){case"arraybuffer":case"blob":let v=new Uint8Array(p.length);for(let w=0;w<p.length;w++)v[w]=p.charCodeAt(w);m==="blob"?f=new Blob([v.buffer],{type:h}):f=v.buffer;break;case"document":f=new DOMParser().parseFromString(p,h);break;case"json":f=JSON.parse(p);break;default:f=p;break}setTimeout(function(){t&&t(f),n.manager.itemEnd(e)},0)}catch(f){setTimeout(function(){i&&i(f),n.manager.itemError(e),n.manager.itemEnd(e)},0)}}else{Fs[e]=[],Fs[e].push({onLoad:t,onProgress:r,onError:i}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(h){let d=this.response,p=Fs[e];if(delete Fs[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),ec.add(e,d);for(let f=0,m=p.length;f<m;f++){let v=p[f];v.onLoad&&v.onLoad(d)}n.manager.itemEnd(e)}else{for(let f=0,m=p.length;f<m;f++){let v=p[f];v.onError&&v.onError(h)}n.manager.itemError(e),n.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(h){let d=Fs[e];for(let p=0,f=d.length;p<f;p++){let m=d[p];m.onProgress&&m.onProgress(h)}},!1),l.addEventListener("error",function(h){let d=Fs[e];delete Fs[e];for(let p=0,f=d.length;p<f;p++){let m=d[p];m.onError&&m.onError(h)}n.manager.itemError(e),n.manager.itemEnd(e)},!1),l.addEventListener("abort",function(h){let d=Fs[e];delete Fs[e];for(let p=0,f=d.length;p<f;p++){let m=d[p];m.onError&&m.onError(h)}n.manager.itemError(e),n.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(let h in this.requestHeader)l.setRequestHeader(h,this.requestHeader[h]);l.send(null)}return n.manager.itemStart(e),l}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},z3=class extends ia{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,s=ec.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;let a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),ec.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(h){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),i&&i(h),n.manager.itemError(e),n.manager.itemEnd(e)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(e),a.src=e,a}},M7=class extends ia{constructor(e){super(e)}load(e,t,r,i){let n=new Vp,s=new z3(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(l){s.load(e[l],function(h){n.images[l]=h,a++,a===6&&(n.needsUpdate=!0,t&&t(n))},void 0,i)}for(let l=0;l<e.length;++l)o(l);return n}},E7=class extends ia{constructor(e){super(e)}load(e,t,r,i){let n=new Ir,s=new z3(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){n.image=a;let o=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;n.format=o?$i:mi,n.needsUpdate=!0,t!==void 0&&t(n)},r,i),n}},T7=class extends As{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ks(t,e))}getPoint(e){let t=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=t){let n=r[i]-t,s=this.curves[i],a=s.getLength(),o=a===0?0:1-n/a;return s.getPointAt(o)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let s=n[i],a=s&&s.isEllipseCurve?e*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let l=0;l<o.length;l++){let h=o[l];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new T3[i.type]().fromJSON(i))}return this}},Vg=class extends T7{constructor(e){super();this.type="Path",this.currentPoint=new Q,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new Ks(this.currentPoint.clone(),new Q(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new ml(this.currentPoint.clone(),new Q(e,t),new Q(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,s){let a=new Ys(this.currentPoint.clone(),new Q(e,t),new Q(r,i),new Q(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new Xv(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,s){let a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,r,i,n,s),this}absarc(e,t,r,i,n,s){return this.absellipse(e,t,r,r,i,n,s),this}ellipse(e,t,r,i,n,s,a,o){let l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+l,t+h,r,i,n,s,a,o),this}absellipse(e,t,r,i,n,s,a,o){let l=new jp(e,t,r,i,n,s,a,o);if(this.curves.length>0){let d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);let h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},fo=class extends Vg{constructor(e){super(e);this.uuid=Qs(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new Vg().fromJSON(i))}return this}},ta=class extends Rt{constructor(e,t=1){super();this.type="Light",this.color=new Ue(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};ta.prototype.isLight=!0;var jg=class extends ta{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(Rt.DefaultUp),this.updateMatrix(),this.groundColor=new Ue(t)}copy(e){return ta.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}};jg.prototype.isHemisphereLight=!0;var MT=new Ge,ET=new O,TT=new O,H_=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Q(512,512),this.map=null,this.mapPass=null,this.matrix=new Ge,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jv,this._frameExtents=new Q(1,1),this._viewportCount=1,this._viewports=[new Et(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;ET.setFromMatrixPosition(e.matrixWorld),t.position.copy(ET),TT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(TT),t.updateMatrixWorld(),MT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MT),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},F3=class extends H_{constructor(){super(new Di(50,1,.5,500));this.focus=1}updateMatrices(e){let t=this.camera,r=ap*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}};F3.prototype.isSpotLightShadow=!0;var U3=class extends ta{constructor(e,t,r=0,i=Math.PI/3,n=0,s=1){super(e,t);this.type="SpotLight",this.position.copy(Rt.DefaultUp),this.updateMatrix(),this.target=new Rt,this.distance=r,this.angle=i,this.penumbra=n,this.decay=s,this.shadow=new F3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};U3.prototype.isSpotLight=!0;var CT=new Ge,ad=new O,_1=new O,k3=class extends H_{constructor(){super(new Di(90,1,.5,500));this._frameExtents=new Q(4,2),this._viewportCount=6,this._viewports=[new Et(2,1,1,1),new Et(0,1,1,1),new Et(3,1,1,1),new Et(1,1,1,1),new Et(3,0,1,1),new Et(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),ad.setFromMatrixPosition(e.matrixWorld),r.position.copy(ad),_1.copy(r.position),_1.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(_1),r.updateMatrixWorld(),i.makeTranslation(-ad.x,-ad.y,-ad.z),CT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CT)}};k3.prototype.isPointLightShadow=!0;var H3=class extends ta{constructor(e,t,r=0,i=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new k3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}};H3.prototype.isPointLight=!0;var G3=class extends H_{constructor(){super(new Jv(-5,5,5,-5,.5,500))}};G3.prototype.isDirectionalLightShadow=!0;var V3=class extends ta{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(Rt.DefaultUp),this.updateMatrix(),this.target=new Rt,this.shadow=new G3}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};V3.prototype.isDirectionalLight=!0;var C7=class extends ta{constructor(e,t){super(e,t);this.type="AmbientLight"}};C7.prototype.isAmbientLight=!0;var L7=class extends ta{constructor(e,t,r=10,i=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=i}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}};L7.prototype.isRectAreaLight=!0;var j3=class{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new O)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let r=e.x,i=e.y,n=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*n),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*n)),t.addScaledVector(s[6],.315392*(3*n*n-1)),t.addScaledVector(s[7],1.092548*(r*n)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){let r=e.x,i=e.y,n=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*n),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*n),t.addScaledVector(s[6],.743125*n*n-.247708),t.addScaledVector(s[7],2*.429043*r*n),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){let r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){let r=e.x,i=e.y,n=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*n,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*n,t[6]=.315392*(3*n*n-1),t[7]=1.092548*r*n,t[8]=.546274*(r*r-i*i)}};j3.prototype.isSphericalHarmonics3=!0;var G_=class extends ta{constructor(e=new j3,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}};G_.prototype.isLightProbe=!0;var O7=class{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}},W3=class extends st{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){let e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};W3.prototype.isInstancedBufferGeometry=!0;var J3=class extends dt{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,r);this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};J3.prototype.isInstancedBufferAttribute=!0;var V_=class extends ia{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new k_(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(o){i?i(o):console.error(o),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(p,f){if(t[f]!==void 0)return t[f];let m=p.interleavedBuffers[f],v=n(p,m.buffer),w=nm(m.type,v),S=new fu(w,m.stride);return S.uuid=m.uuid,t[f]=S,S}function n(p,f){if(r[f]!==void 0)return r[f];let m=p.arrayBuffers[f],v=new Uint32Array(m).buffer;return r[f]=v,v}let s=e.isInstancedBufferGeometry?new W3:new st,a=e.data.index;if(a!==void 0){let p=nm(a.type,a.array);s.setIndex(new dt(p,1))}let o=e.data.attributes;for(let p in o){let f=o[p],m;if(f.isInterleavedBufferAttribute){let v=i(e.data,f.data);m=new lu(v,f.itemSize,f.offset,f.normalized)}else{let v=nm(f.type,f.array),w=f.isInstancedBufferAttribute?J3:dt;m=new w(v,f.itemSize,f.normalized)}f.name!==void 0&&(m.name=f.name),f.usage!==void 0&&m.setUsage(f.usage),f.updateRange!==void 0&&(m.updateRange.offset=f.updateRange.offset,m.updateRange.count=f.updateRange.count),s.setAttribute(p,m)}let l=e.data.morphAttributes;if(l)for(let p in l){let f=l[p],m=[];for(let v=0,w=f.length;v<w;v++){let S=f[v],y;if(S.isInterleavedBufferAttribute){let g=i(e.data,S.data);y=new lu(g,S.itemSize,S.offset,S.normalized)}else{let g=nm(S.type,S.array);y=new dt(g,S.itemSize,S.normalized)}S.name!==void 0&&(y.name=S.name),m.push(y)}s.morphAttributes[p]=m}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let p=0,f=h.length;p!==f;++p){let m=h[p];s.addGroup(m.start,m.count,m.materialIndex)}let d=e.data.boundingSphere;if(d!==void 0){let p=new O;d.center!==void 0&&p.fromArray(d.center),s.boundingSphere=new ea(p,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},P7=class extends ia{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,s=ec.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(o){return o.blob()}).then(function(o){return createImageBitmap(o,Object.assign(n.options,{colorSpaceConversion:"none"}))}).then(function(o){ec.add(e,o),t&&t(o),n.manager.itemEnd(e)}).catch(function(o){i&&i(o),n.manager.itemError(e),n.manager.itemEnd(e)}),n.manager.itemStart(e)}};P7.prototype.isImageBitmapLoader=!0;var D7=class{constructor(){this.type="ShapePath",this.color=new Ue,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Vg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,s){return this.currentPath.bezierCurveTo(e,t,r,i,n,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(y){let g=[];for(let _=0,b=y.length;_<b;_++){let T=y[_],A=new fo;A.curves=T.curves,g.push(A)}return g}function i(y,g){let _=g.length,b=!1;for(let T=_-1,A=0;A<_;T=A++){let M=g[T],L=g[A],D=L.x-M.x,C=L.y-M.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(M=g[A],D=-D,L=g[T],C=-C),y.y<M.y||y.y>L.y)continue;if(y.y===M.y){if(y.x===M.x)return!0}else{let N=C*(y.x-M.x)-D*(y.y-M.y);if(N===0)return!0;if(N<0)continue;b=!b}}else{if(y.y!==M.y)continue;if(L.x<=y.x&&y.x<=M.x||M.x<=y.x&&y.x<=L.x)return!0}}return b}let n=nl.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return r(s);let a,o,l,h=[];if(s.length===1)return o=s[0],l=new fo,l.curves=o.curves,h.push(l),h;let d=!n(s[0].getPoints());d=e?!d:d;let p=[],f=[],m=[],v=0,w;f[v]=void 0,m[v]=[];for(let y=0,g=s.length;y<g;y++)o=s[y],w=o.getPoints(),a=n(w),a=e?!a:a,a?(!d&&f[v]&&v++,f[v]={s:new fo,p:w},f[v].s.curves=o.curves,d&&v++,m[v]=[]):m[v].push({h:o,p:w[0]});if(!f[0])return r(s);if(f.length>1){let y=!1,g=[];for(let _=0,b=f.length;_<b;_++)p[_]=[];for(let _=0,b=f.length;_<b;_++){let T=m[_];for(let A=0;A<T.length;A++){let M=T[A],L=!0;for(let D=0;D<f.length;D++)i(M.p,f[D].p)&&(_!==D&&g.push({froms:_,tos:D,hole:A}),L?(L=!1,p[D].push(M)):y=!0);L&&p[_].push(M)}}g.length>0&&(y||(m=p))}let S;for(let y=0,g=f.length;y<g;y++){l=f[y].s,h.push(l),S=m[y];for(let _=0,b=S.length;_<b;_++)l.holes.push(S[_].h)}return h}},Y3=class{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){let r=[],i=R7(e,t,this.data);for(let n=0,s=i.length;n<s;n++)Array.prototype.push.apply(r,i[n].toShapes());return r}};function R7(e,t,r){let i=Array.from(e),n=t/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n,a=[],o=0,l=0;for(let h=0;h<i.length;h++){let d=i[h];if(d===`
`)o=0,l-=s;else{let p=N7(d,n,o,l,r);o+=p.offsetX,a.push(p.path)}}return a}function N7(e,t,r,i,n){let s=n.glyphs[e]||n.glyphs["?"];if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+n.familyName+".");return}let a=new D7,o,l,h,d,p,f,m,v;if(s.o){let w=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let S=0,y=w.length;S<y;)switch(w[S++]){case"m":o=w[S++]*t+r,l=w[S++]*t+i,a.moveTo(o,l);break;case"l":o=w[S++]*t+r,l=w[S++]*t+i,a.lineTo(o,l);break;case"q":h=w[S++]*t+r,d=w[S++]*t+i,p=w[S++]*t+r,f=w[S++]*t+i,a.quadraticCurveTo(p,f,h,d);break;case"b":h=w[S++]*t+r,d=w[S++]*t+i,p=w[S++]*t+r,f=w[S++]*t+i,m=w[S++]*t+r,v=w[S++]*t+i,a.bezierCurveTo(p,f,m,v,h,d);break}}return{offsetX:s.ha*t,path:a}}Y3.prototype.isFont=!0;var I7=class extends ia{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new k_(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){let o;try{o=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),o=JSON.parse(a.substring(65,a.length-2))}let l=n.parse(o);t&&t(l)},r,i)}parse(e){return new Y3(e)}},Em,B7={getContext:function(){return Em===void 0&&(Em=new(window.AudioContext||window.webkitAudioContext)),Em},setContext:function(e){Em=e}},z7=class extends ia{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new k_(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{let o=a.slice(0);B7.getContext().decodeAudioData(o,function(l){t(l)})}catch(o){i?i(o):console.error(o),n.manager.itemError(e)}},r,i)}},F7=class extends G_{constructor(e,t,r=1){super(void 0,r);let i=new Ue().set(e),n=new Ue().set(t),s=new O(i.r,i.g,i.b),a=new O(n.r,n.g,n.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(l)}};F7.prototype.isHemisphereLightProbe=!0;var U7=class extends G_{constructor(e,t=1){super(void 0,t);let r=new Ue().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}};U7.prototype.isAmbientLightProbe=!0;var k7=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=LT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=LT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function LT(){return(typeof performance=="undefined"?Date:performance).now()}var H7=class extends Rt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},G7=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,n,s;switch(t){case"quaternion":i=this._slerp,n=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,n=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[n+a]=r[a];s=t}else{s+=t;let a=t/s;this._mixBufferRegion(r,n,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let o=t*this._origIndex;this._mixBufferRegion(r,i,o,1-n,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(r[o]!==r[o+t]){a.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let n=r,s=i;n!==s;++n)t[n]=t[i+n%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let s=0;s!==n;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Gr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let s=this._workIndex*n;Gr.multiplyQuaternionsFlat(e,s,e,t,e,r),Gr.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,n){let s=1-i;for(let a=0;a!==n;++a){let o=t+a;e[o]=e[o]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,n){for(let s=0;s!==n;++s){let a=t+s;e[a]=e[a]+e[r+s]*i}}},j_="\\[\\]\\.:\\/",V7=new RegExp("["+j_+"]","g"),W_="[^"+j_+"]",j7="[^"+j_.replace("\\.","")+"]",W7=/((?:WC+[\/:])*)/.source.replace("WC",W_),J7=/(WCOD+)?/.source.replace("WCOD",j7),Y7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",W_),q7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",W_),X7=new RegExp("^"+W7+J7+Y7+q7+"$"),Q7=["material","materials","bones"],K7=class{constructor(e,t,r){let i=r||Xt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Xt=class{constructor(e,t,r){this.path=t,this.parsedPath=r||Xt.parseTrackName(t),this.node=Xt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Xt.Composite(e,t,r):new Xt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(V7,"")}static parseTrackName(e){let t=X7.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let n=r.nodeName.substring(i+1);Q7.indexOf(n)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(n){for(let s=0;s<n.length;s++){let a=n[s];if(a.name===t||a.uuid===t)return a;let o=r(a.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=Xt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===l){l=h;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let s=e[i];if(s===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(n!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else s.fromArray!==void 0&&s.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Xt.Composite=K7;Xt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Xt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Xt.prototype.GetterByBindingType=[Xt.prototype._getValue_direct,Xt.prototype._getValue_array,Xt.prototype._getValue_arrayElement,Xt.prototype._getValue_toArray];Xt.prototype.SetterByBindingTypeAndVersioning=[[Xt.prototype._setValue_direct,Xt.prototype._setValue_direct_setNeedsUpdate,Xt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_array,Xt.prototype._setValue_array_setNeedsUpdate,Xt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_arrayElement,Xt.prototype._setValue_arrayElement_setNeedsUpdate,Xt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xt.prototype._setValue_fromArray,Xt.prototype._setValue_fromArray_setNeedsUpdate,Xt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Z7=class{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;let n=t.tracks,s=n.length,a=new Array(s),o={endingStart:mh,endingEnd:mh};for(let l=0;l!==s;++l){let h=n[l].createInterpolant(null);a[l]=h,h.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PV,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let i=this._clip.duration,n=e._clip.duration,s=n/i,a=i/n;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);let o=a.parameterPositions,l=a.sampleValues;return o[0]=n,o[1]=n+r,l[0]=e/s,l[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let o=(e-n)*r;if(o<0||r===0)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);let s=this._updateTime(t),a=this._updateWeight(e);if(a>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case WO:for(let h=0,d=o.length;h!==d;++h)o[h].evaluate(s),l[h].accumulateAdditive(a);break;case M_:default:for(let h=0,d=o.length;h!==d;++h)o[h].evaluate(s),l[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,s=r===DV;if(e===0)return n===-1?i:s&&(n&1)==1?t-i:i;if(r===OV){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){let a=Math.floor(i/t);i-=t*a,n+=Math.abs(a);let o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(n&1)==1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=gh,i.endingEnd=gh):(e?i.endingStart=this.zeroSlopeAtStart?gh:mh:i.endingStart=Ug,t?i.endingEnd=this.zeroSlopeAtEnd?gh:mh:i.endingEnd=Ug)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,o=s.sampleValues;return a[0]=n,o[0]=t,a[1]=n+e,o[1]=r,this}},$7=class extends Kn{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,s=e._propertyBindings,a=e._interpolants,o=r.uuid,l=this._bindingsByRootAndName,h=l[o];h===void 0&&(h={},l[o]=h);for(let d=0;d!==n;++d){let p=i[d],f=p.name,m=h[f];if(m!==void 0)s[d]=m;else{if(m=s[d],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,o,f));continue}let v=t&&t._propertyBindings[d].binding.parsedPath;m=new G7(Xt.create(r,f,v),p.ValueTypeName,p.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,o,f),s[d]=m}a[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,r)}let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];n.useCount++==0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.useCount==0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,s=n[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,s=this._actionsByClip,a=s[n],o=a.knownActions,l=o[o.length-1],h=e._byClipCacheIndex;l._byClipCacheIndex=h,o[h]=l,o.pop(),e._byClipCacheIndex=null;let d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],o.length===0&&delete s[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.referenceCount==0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[n],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new I3(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,s=typeof e=="string"?AT.findByName(i,e):e,a=s!==null?s.uuid:e,o=this._actionsByClip[a],l=null;if(r===void 0&&(s!==null?r=s.blendMode:r=M_),o!==void 0){let d=o.actionByRoot[n];if(d!==void 0&&d.blendMode===r)return d;l=o.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let h=new Z7(this,s,t,r);return this._bindAction(h,l),this._addInactiveAction(h,a,n),h}existingAction(e,t){let r=t||this._root,i=r.uuid,n=typeof e=="string"?AT.findByName(r,e):e,s=n?n.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,n,s);let a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(n!==void 0){let s=n.knownActions;for(let a=0,o=s.length;a!==o;++a){let l=s[a];this._deactivateAction(l);let h=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let s in r){let a=r[s].actionByRoot,o=a[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let i=this._bindingsByRootAndName,n=i[t];if(n!==void 0)for(let s in n){let a=n[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}};$7.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var $e=class{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new $e(this.value.clone===void 0?this.value:this.value.clone())}},eJ=class extends fu{constructor(e,t,r=1){super(e,t);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}};eJ.prototype.isInstancedInterleavedBuffer=!0;var tJ=class{constructor(e,t,r=0,i=1/0){this.ray=new bl(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new qO,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!1,r=[]){return zx(e,this,r,t),r.sort(OT),r}intersectObjects(e,t=!1,r=[]){for(let i=0,n=e.length;i<n;i++)zx(e[i],this,r,t);return r.sort(OT),r}};function OT(e,t){return e.distance-t.distance}function zx(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let s=0,a=n.length;s<a;s++)zx(n[s],t,r,!0)}}var PT=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){let e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Pi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};new Q;var DT=new O,Tm=new O,Un=class{constructor(e=new O,t=new O){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){DT.subVectors(e,this.start),Tm.subVectors(this.end,this.start);let r=Tm.dot(Tm),i=Tm.dot(DT)/r;return t&&(i=Pi(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},rJ=class extends Rt{constructor(e){super();this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}};rJ.prototype.isImmediateRenderObject=!0;var RT=new O,iJ=class extends Rt{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let r=new st,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){let l=s/o*Math.PI*2,h=a/o*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Je(i,3));let n=new Ts({fog:!1,toneMapped:!1});this.cone=new Al(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),RT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(RT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Go=new O,Cm=new Ge,S1=new Ge,nJ=class extends Al{constructor(e){let t=q3(e),r=new st,i=[],n=[],s=new Ue(0,0,1),a=new Ue(0,1,0);for(let l=0;l<t.length;l++){let h=t[l];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(s.r,s.g,s.b),n.push(a.r,a.g,a.b))}r.setAttribute("position",new Je(i,3)),r.setAttribute("color",new Je(n,3));let o=new Ts({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,o);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,r=this.geometry,i=r.getAttribute("position");S1.copy(this.root.matrixWorld).invert();for(let n=0,s=0;n<t.length;n++){let a=t[n];a.parent&&a.parent.isBone&&(Cm.multiplyMatrices(S1,a.matrixWorld),Go.setFromMatrixPosition(Cm),i.setXYZ(s,Go.x,Go.y,Go.z),Cm.multiplyMatrices(S1,a.parent.matrixWorld),Go.setFromMatrixPosition(Cm),i.setXYZ(s+1,Go.x,Go.y,Go.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}};function q3(e){let t=[];e&&e.isBone&&t.push(e);for(let r=0;r<e.children.length;r++)t.push.apply(t,q3(e.children[r]));return t}var sJ=class extends Ai{constructor(e,t,r){let i=new F_(t,4,2),n=new ou({wireframe:!0,fog:!1,toneMapped:!1});super(i,n);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},aJ=class extends Al{constructor(e=10,t=10,r=4473924,i=8947848){r=new Ue(r),i=new Ue(i);let n=t/2,s=e/t,a=e/2,o=[],l=[];for(let p=0,f=0,m=-a;p<=t;p++,m+=s){o.push(-a,0,m,a,0,m),o.push(m,0,-a,m,0,a);let v=p===n?r:i;v.toArray(l,f),f+=3,v.toArray(l,f),f+=3,v.toArray(l,f),f+=3,v.toArray(l,f),f+=3}let h=new st;h.setAttribute("position",new Je(o,3)),h.setAttribute("color",new Je(l,3));let d=new Ts({vertexColors:!0,toneMapped:!1});super(h,d);this.type="GridHelper"}},NT=new O,Lm=new O,IT=new O,oJ=class extends Rt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new st;i.setAttribute("position",new Je([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Ts({fog:!1,toneMapped:!1});this.lightPlane=new $h(i,n),this.add(this.lightPlane),i=new st,i.setAttribute("position",new Je([0,0,0,0,0,1],3)),this.targetLine=new $h(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){NT.setFromMatrixPosition(this.light.matrixWorld),Lm.setFromMatrixPosition(this.light.target.matrixWorld),IT.subVectors(Lm,NT),this.lightPlane.lookAt(Lm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Lm),this.targetLine.scale.z=IT.length()}},Om=new O,Fr=new pu,Ko=class extends Al{constructor(e){let t=new st,r=new Ts({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={},a=new Ue(16755200),o=new Ue(16711680),l=new Ue(43775),h=new Ue(16777215),d=new Ue(3355443);p("n1","n2",a),p("n2","n4",a),p("n4","n3",a),p("n3","n1",a),p("f1","f2",a),p("f2","f4",a),p("f4","f3",a),p("f3","f1",a),p("n1","f1",a),p("n2","f2",a),p("n3","f3",a),p("n4","f4",a),p("p","n1",o),p("p","n2",o),p("p","n3",o),p("p","n4",o),p("u1","u2",l),p("u2","u3",l),p("u3","u1",l),p("c","t",h),p("p","c",d),p("cn1","cn2",d),p("cn3","cn4",d),p("cf1","cf2",d),p("cf3","cf4",d);function p(m,v,w){f(m,w),f(v,w)}function f(m,v){i.push(0,0,0),n.push(v.r,v.g,v.b),s[m]===void 0&&(s[m]=[]),s[m].push(i.length/3-1)}t.setAttribute("position",new Je(i,3)),t.setAttribute("color",new Je(n,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;Fr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Yr("c",t,e,Fr,0,0,-1),Yr("t",t,e,Fr,0,0,1),Yr("n1",t,e,Fr,-r,-i,-1),Yr("n2",t,e,Fr,r,-i,-1),Yr("n3",t,e,Fr,-r,i,-1),Yr("n4",t,e,Fr,r,i,-1),Yr("f1",t,e,Fr,-r,-i,1),Yr("f2",t,e,Fr,r,-i,1),Yr("f3",t,e,Fr,-r,i,1),Yr("f4",t,e,Fr,r,i,1),Yr("u1",t,e,Fr,r*.7,i*1.1,-1),Yr("u2",t,e,Fr,-r*.7,i*1.1,-1),Yr("u3",t,e,Fr,0,i*2,-1),Yr("cf1",t,e,Fr,-r,0,1),Yr("cf2",t,e,Fr,r,0,1),Yr("cf3",t,e,Fr,0,-i,1),Yr("cf4",t,e,Fr,0,i,1),Yr("cn1",t,e,Fr,-r,0,-1),Yr("cn2",t,e,Fr,r,0,-1),Yr("cn3",t,e,Fr,0,-i,-1),Yr("cn4",t,e,Fr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Yr(e,t,r,i,n,s,a){Om.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let h=0,d=o.length;h<d;h++)l.setXYZ(o[h],Om.x,Om.y,Om.z)}}var Pm=class extends Al{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new st;n.setIndex(new dt(r,1)),n.setAttribute("position",new Je(i,3));super(n,new Ts({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},lJ=class extends Al{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new st;i.setAttribute("position",new Je(t,3)),i.setAttribute("color",new Je(r,3));let n=new Ts({vertexColors:!0,toneMapped:!1});super(i,n);this.type="AxesHelper"}setColors(e,t,r){let i=new Ue,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},uJ=new Float32Array(1);new Int32Array(uJ.buffer);As.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(As.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Vg.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)};aJ.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};nJ.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};ia.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),O7.extractUrlBase(e)};ia.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Ui.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Ui.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ui.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)};Ui.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)};Ui.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)};ea.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};jv.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)};Un.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Nr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)};Nr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)};Nr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Nr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)};Nr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Nr.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()};Ge.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)};Ge.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)};Ge.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new O().setFromMatrixColumn(this,3)};Ge.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)};Ge.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Ge.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};Ge.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};Ge.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ge.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)};Ge.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};Ge.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ge.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Ge.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ge.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ge.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ge.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)};Ge.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ge.prototype.makeFrustum=function(e,t,r,i,n,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,r,n,s)};Ge.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()};Gs.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Gr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Gr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};bl.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)};bl.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)};bl.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)};ai.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};ai.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)};ai.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)};ai.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)};ai.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)};ai.barycoordFromPoint=function(e,t,r,i,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ai.getBarycoord(e,t,r,i,n)};ai.normal=function(e,t,r,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ai.getNormal(e,t,r,i)};fo.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)};fo.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Wp(this,e)};fo.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new z_(this,e)};Q.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)};Q.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)};Q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};O.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};O.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};O.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)};O.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)};O.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)};O.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)};O.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)};O.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)};O.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Et.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)};Et.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Rt.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)};Rt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Rt.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)};Rt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Rt.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)};Object.defineProperties(Rt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Ai.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Ai.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),JO},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});v3.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Di.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(ta.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(dt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===kg},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(kg)}}});dt.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?kg:sp),this};dt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},dt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};st.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)};st.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new dt(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)};st.prototype.addDrawCall=function(e,t,r){r!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)};st.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};st.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};st.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)};st.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)};Object.defineProperties(st.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});fu.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?kg:sp),this};fu.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Wp.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Wp.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Wp.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Ra.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};$e.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(rn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ue}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===UO}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(zi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});cr.prototype.clearTarget=function(e,t,r,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,i)};cr.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)};cr.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};cr.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};cr.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};cr.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};cr.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};cr.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};cr.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};cr.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};cr.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};cr.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};cr.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};cr.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};cr.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)};cr.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};cr.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};cr.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};cr.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};cr.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};cr.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};cr.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};cr.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};cr.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};cr.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(cr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?Hp:Bi}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(p3.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(li.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});H7.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");let t=this;return new z7().load(e,function(r){t.setBuffer(r)}),this};O_.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};O_.prototype.clear=function(e,t,r,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,r,i)};xc.crossOrigin=void 0;xc.loadTexture=function(e,t,r,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");let n=new E7;n.setCrossOrigin(this.crossOrigin);let s=n.load(e,r,void 0,i);return t&&(s.mapping=t),s};xc.loadTextureCube=function(e,t,r,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");let n=new M7;n.setCrossOrigin(this.crossOrigin);let s=n.load(e,r,void 0,i);return t&&(s.mapping=t),s};xc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};xc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:BO}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=BO);var hJ=()=>typeof window=="undefined"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),cJ=()=>typeof window=="undefined"?!1:window.navigator.platform.toUpperCase().includes("MAC"),dJ=()=>typeof window=="undefined"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0;hJ();var J_=cJ(),pJ=dJ();function fJ(e){return Array.isArray(e)?e:[e]}function Dm(e){return J_?e.metaKey:e.ctrlKey}var mJ=typeof global=="object"&&global&&global.Object===Object&&global,X3=mJ,gJ=typeof self=="object"&&self&&self.Object===Object&&self,vJ=X3||gJ||Function("return this")(),na=vJ,yJ=na.Symbol,za=yJ,Q3=Object.prototype,xJ=Q3.hasOwnProperty,wJ=Q3.toString,od=za?za.toStringTag:void 0;function _J(e){var t=xJ.call(e,od),r=e[od];try{e[od]=void 0;var i=!0}catch{}var n=wJ.call(e);return i&&(t?e[od]=r:delete e[od]),n}var SJ=_J,bJ=Object.prototype,AJ=bJ.toString;function MJ(e){return AJ.call(e)}var EJ=MJ,TJ="[object Null]",CJ="[object Undefined]",BT=za?za.toStringTag:void 0;function LJ(e){return e==null?e===void 0?CJ:TJ:BT&&BT in Object(e)?SJ(e):EJ(e)}var mu=LJ;function OJ(e){return e!=null&&typeof e=="object"}var Ml=OJ,PJ="[object Symbol]";function DJ(e){return typeof e=="symbol"||Ml(e)&&mu(e)==PJ}var Kv=DJ;function RJ(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var K3=RJ,NJ=Array.isArray,yo=NJ,IJ=1/0,zT=za?za.prototype:void 0,FT=zT?zT.toString:void 0;function Z3(e){if(typeof e=="string")return e;if(yo(e))return K3(e,Z3)+"";if(Kv(e))return FT?FT.call(e):"";var t=e+"";return t=="0"&&1/e==-IJ?"-0":t}var BJ=Z3,zJ=/\s/;function FJ(e){for(var t=e.length;t--&&zJ.test(e.charAt(t)););return t}var UJ=FJ,kJ=/^\s+/;function HJ(e){return e&&e.slice(0,UJ(e)+1).replace(kJ,"")}var GJ=HJ;function VJ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ra=VJ,UT=0/0,jJ=/^[-+]0x[0-9a-f]+$/i,WJ=/^0b[01]+$/i,JJ=/^0o[0-7]+$/i,YJ=parseInt;function qJ(e){if(typeof e=="number")return e;if(Kv(e))return UT;if(ra(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ra(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=GJ(e);var r=WJ.test(e);return r||JJ.test(e)?YJ(e.slice(2),r?2:8):jJ.test(e)?UT:+e}var kT=qJ;function XJ(e){return e}var $3=XJ,QJ="[object AsyncFunction]",KJ="[object Function]",ZJ="[object GeneratorFunction]",$J="[object Proxy]";function eY(e){if(!ra(e))return!1;var t=mu(e);return t==KJ||t==ZJ||t==QJ||t==$J}var Y_=eY,tY=na["__core-js_shared__"],b1=tY,HT=function(){var e=/[^.]+$/.exec(b1&&b1.keys&&b1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function rY(e){return!!HT&&HT in e}var iY=rY,nY=Function.prototype,sY=nY.toString;function aY(e){if(e!=null){try{return sY.call(e)}catch{}try{return e+""}catch{}}return""}var gu=aY,oY=/[\\^$.*+?()[\]{}|]/g,lY=/^\[object .+?Constructor\]$/,uY=Function.prototype,hY=Object.prototype,cY=uY.toString,dY=hY.hasOwnProperty,pY=RegExp("^"+cY.call(dY).replace(oY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fY(e){if(!ra(e)||iY(e))return!1;var t=Y_(e)?pY:lY;return t.test(gu(e))}var mY=fY;function gY(e,t){return e==null?void 0:e[t]}var vY=gY;function yY(e,t){var r=vY(e,t);return mY(r)?r:void 0}var vu=yY,xY=vu(na,"WeakMap"),Fx=xY,GT=Object.create,wY=function(){function e(){}return function(t){if(!ra(t))return{};if(GT)return GT(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),_Y=wY;function SY(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var bY=SY;function AY(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var eP=AY,MY=800,EY=16,TY=Date.now;function CY(e){var t=0,r=0;return function(){var i=TY(),n=EY-(i-r);if(r=i,n>0){if(++t>=MY)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var LY=CY;function OY(e){return function(){return e}}var PY=OY,DY=function(){try{var e=vu(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Wg=DY,RY=Wg?function(e,t){return Wg(e,"toString",{configurable:!0,enumerable:!1,value:PY(t),writable:!0})}:$3,NY=RY,IY=LY(NY),tP=IY;function BY(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var zY=BY,FY=9007199254740991,UY=/^(?:0|[1-9]\d*)$/;function kY(e,t){var r=typeof e;return t=t==null?FY:t,!!t&&(r=="number"||r!="symbol"&&UY.test(e))&&e>-1&&e%1==0&&e<t}var rP=kY;function HY(e,t,r){t=="__proto__"&&Wg?Wg(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var q_=HY;function GY(e,t){return e===t||e!==e&&t!==t}var Zv=GY,VY=Object.prototype,jY=VY.hasOwnProperty;function WY(e,t,r){var i=e[t];(!(jY.call(e,t)&&Zv(i,r))||r===void 0&&!(t in e))&&q_(e,t,r)}var iP=WY;function JY(e,t,r,i){var n=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=i?i(r[o],e[o],o,r,e):void 0;l===void 0&&(l=e[o]),n?q_(r,o,l):iP(r,o,l)}return r}var Ac=JY,VT=Math.max;function YY(e,t,r){return t=VT(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=VT(i.length-t,0),a=Array(s);++n<s;)a[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(a),bY(e,this,o)}}var nP=YY;function qY(e,t){return tP(nP(e,t,$3),e+"")}var XY=qY,QY=9007199254740991;function KY(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=QY}var sP=KY;function ZY(e){return e!=null&&sP(e.length)&&!Y_(e)}var $v=ZY;function $Y(e,t,r){if(!ra(r))return!1;var i=typeof t;return(i=="number"?$v(r)&&rP(t,r.length):i=="string"&&t in r)?Zv(r[t],e):!1}var eq=$Y;function tq(e){return XY(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&eq(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}var rq=tq,iq=Object.prototype;function nq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||iq;return e===r}var X_=nq;function sq(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var aq=sq,oq="[object Arguments]";function lq(e){return Ml(e)&&mu(e)==oq}var jT=lq,aP=Object.prototype,uq=aP.hasOwnProperty,hq=aP.propertyIsEnumerable,cq=jT(function(){return arguments}())?jT:function(e){return Ml(e)&&uq.call(e,"callee")&&!hq.call(e,"callee")},Jg=cq;function dq(){return!1}var pq=dq,oP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,WT=oP&&typeof module=="object"&&module&&!module.nodeType&&module,fq=WT&&WT.exports===oP,JT=fq?na.Buffer:void 0,mq=JT?JT.isBuffer:void 0,gq=mq||pq,Q_=gq,vq="[object Arguments]",yq="[object Array]",xq="[object Boolean]",wq="[object Date]",_q="[object Error]",Sq="[object Function]",bq="[object Map]",Aq="[object Number]",Mq="[object Object]",Eq="[object RegExp]",Tq="[object Set]",Cq="[object String]",Lq="[object WeakMap]",Oq="[object ArrayBuffer]",Pq="[object DataView]",Dq="[object Float32Array]",Rq="[object Float64Array]",Nq="[object Int8Array]",Iq="[object Int16Array]",Bq="[object Int32Array]",zq="[object Uint8Array]",Fq="[object Uint8ClampedArray]",Uq="[object Uint16Array]",kq="[object Uint32Array]",_r={};_r[Dq]=_r[Rq]=_r[Nq]=_r[Iq]=_r[Bq]=_r[zq]=_r[Fq]=_r[Uq]=_r[kq]=!0;_r[vq]=_r[yq]=_r[Oq]=_r[xq]=_r[Pq]=_r[wq]=_r[_q]=_r[Sq]=_r[bq]=_r[Aq]=_r[Mq]=_r[Eq]=_r[Tq]=_r[Cq]=_r[Lq]=!1;function Hq(e){return Ml(e)&&sP(e.length)&&!!_r[mu(e)]}var Gq=Hq;function Vq(e){return function(t){return e(t)}}var K_=Vq,lP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hd=lP&&typeof module=="object"&&module&&!module.nodeType&&module,jq=Hd&&Hd.exports===lP,A1=jq&&X3.process,Wq=function(){try{var e=Hd&&Hd.require&&Hd.require("util").types;return e||A1&&A1.binding&&A1.binding("util")}catch{}}(),tc=Wq,YT=tc&&tc.isTypedArray,Jq=YT?K_(YT):Gq,uP=Jq,Yq=Object.prototype,qq=Yq.hasOwnProperty;function Xq(e,t){var r=yo(e),i=!r&&Jg(e),n=!r&&!i&&Q_(e),s=!r&&!i&&!n&&uP(e),a=r||i||n||s,o=a?aq(e.length,String):[],l=o.length;for(var h in e)(t||qq.call(e,h))&&!(a&&(h=="length"||n&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||rP(h,l)))&&o.push(h);return o}var hP=Xq;function Qq(e,t){return function(r){return e(t(r))}}var cP=Qq,Kq=cP(Object.keys,Object),Zq=Kq,$q=Object.prototype,eX=$q.hasOwnProperty;function tX(e){if(!X_(e))return Zq(e);var t=[];for(var r in Object(e))eX.call(e,r)&&r!="constructor"&&t.push(r);return t}var rX=tX;function iX(e){return $v(e)?hP(e):rX(e)}var Z_=iX;function nX(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var sX=nX,aX=Object.prototype,oX=aX.hasOwnProperty;function lX(e){if(!ra(e))return sX(e);var t=X_(e),r=[];for(var i in e)i=="constructor"&&(t||!oX.call(e,i))||r.push(i);return r}var uX=lX;function hX(e){return $v(e)?hP(e,!0):uX(e)}var Yp=hX,cX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dX=/^\w*$/;function pX(e,t){if(yo(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Kv(e)?!0:dX.test(e)||!cX.test(e)||t!=null&&e in Object(t)}var fX=pX,mX=vu(Object,"create"),cp=mX;function gX(){this.__data__=cp?cp(null):{},this.size=0}var vX=gX;function yX(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xX=yX,wX="__lodash_hash_undefined__",_X=Object.prototype,SX=_X.hasOwnProperty;function bX(e){var t=this.__data__;if(cp){var r=t[e];return r===wX?void 0:r}return SX.call(t,e)?t[e]:void 0}var AX=bX,MX=Object.prototype,EX=MX.hasOwnProperty;function TX(e){var t=this.__data__;return cp?t[e]!==void 0:EX.call(t,e)}var CX=TX,LX="__lodash_hash_undefined__";function OX(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=cp&&t===void 0?LX:t,this}var PX=OX;function Mc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Mc.prototype.clear=vX;Mc.prototype.delete=xX;Mc.prototype.get=AX;Mc.prototype.has=CX;Mc.prototype.set=PX;var qT=Mc;function DX(){this.__data__=[],this.size=0}var RX=DX;function NX(e,t){for(var r=e.length;r--;)if(Zv(e[r][0],t))return r;return-1}var e0=NX,IX=Array.prototype,BX=IX.splice;function zX(e){var t=this.__data__,r=e0(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():BX.call(t,r,1),--this.size,!0}var FX=zX;function UX(e){var t=this.__data__,r=e0(t,e);return r<0?void 0:t[r][1]}var kX=UX;function HX(e){return e0(this.__data__,e)>-1}var GX=HX;function VX(e,t){var r=this.__data__,i=e0(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var jX=VX;function Ec(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ec.prototype.clear=RX;Ec.prototype.delete=FX;Ec.prototype.get=kX;Ec.prototype.has=GX;Ec.prototype.set=jX;var t0=Ec,WX=vu(na,"Map"),dp=WX;function JX(){this.size=0,this.__data__={hash:new qT,map:new(dp||t0),string:new qT}}var YX=JX;function qX(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var XX=qX;function QX(e,t){var r=e.__data__;return XX(t)?r[typeof t=="string"?"string":"hash"]:r.map}var r0=QX;function KX(e){var t=r0(this,e).delete(e);return this.size-=t?1:0,t}var ZX=KX;function $X(e){return r0(this,e).get(e)}var eQ=$X;function tQ(e){return r0(this,e).has(e)}var rQ=tQ;function iQ(e,t){var r=r0(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var nQ=iQ;function Tc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Tc.prototype.clear=YX;Tc.prototype.delete=ZX;Tc.prototype.get=eQ;Tc.prototype.has=rQ;Tc.prototype.set=nQ;var $_=Tc,sQ="Expected a function";function eS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(sQ);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(eS.Cache||$_),r}eS.Cache=$_;var aQ=eS,oQ=500;function lQ(e){var t=aQ(e,function(i){return r.size===oQ&&r.clear(),i}),r=t.cache;return t}var uQ=lQ,hQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cQ=/\\(\\)?/g,dQ=uQ(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hQ,function(r,i,n,s){t.push(n?s.replace(cQ,"$1"):i||r)}),t}),pQ=dQ;function fQ(e){return e==null?"":BJ(e)}var mQ=fQ;function gQ(e,t){return yo(e)?e:fX(e,t)?[e]:pQ(mQ(e))}var tS=gQ,vQ=1/0;function yQ(e){if(typeof e=="string"||Kv(e))return e;var t=e+"";return t=="0"&&1/e==-vQ?"-0":t}var dP=yQ;function xQ(e,t){t=tS(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[dP(t[r++])];return r&&r==i?e:void 0}var wQ=xQ;function _Q(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var rS=_Q,XT=za?za.isConcatSpreadable:void 0;function SQ(e){return yo(e)||Jg(e)||!!(XT&&e&&e[XT])}var bQ=SQ;function pP(e,t,r,i,n){var s=-1,a=e.length;for(r||(r=bQ),n||(n=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?pP(o,t-1,r,i,n):rS(n,o):i||(n[n.length]=o)}return n}var AQ=pP;function MQ(e){var t=e==null?0:e.length;return t?AQ(e,1):[]}var EQ=MQ;function TQ(e){return tP(nP(e,void 0,EQ),e+"")}var CQ=TQ,LQ=cP(Object.getPrototypeOf,Object),iS=LQ,OQ="[object Object]",PQ=Function.prototype,DQ=Object.prototype,fP=PQ.toString,RQ=DQ.hasOwnProperty,NQ=fP.call(Object);function IQ(e){if(!Ml(e)||mu(e)!=OQ)return!1;var t=iS(e);if(t===null)return!0;var r=RQ.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&fP.call(r)==NQ}var mP=IQ;function BQ(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++i<n;)s[i]=e[i+t];return s}var zQ=BQ;function FQ(){this.__data__=new t0,this.size=0}var UQ=FQ;function kQ(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var HQ=kQ;function GQ(e){return this.__data__.get(e)}var VQ=GQ;function jQ(e){return this.__data__.has(e)}var WQ=jQ,JQ=200;function YQ(e,t){var r=this.__data__;if(r instanceof t0){var i=r.__data__;if(!dp||i.length<JQ-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new $_(i)}return r.set(e,t),this.size=r.size,this}var qQ=YQ;function Cc(e){var t=this.__data__=new t0(e);this.size=t.size}Cc.prototype.clear=UQ;Cc.prototype.delete=HQ;Cc.prototype.get=VQ;Cc.prototype.has=WQ;Cc.prototype.set=qQ;var gP=Cc;function XQ(e,t){return e&&Ac(t,Z_(t),e)}var QQ=XQ;function KQ(e,t){return e&&Ac(t,Yp(t),e)}var ZQ=KQ,vP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QT=vP&&typeof module=="object"&&module&&!module.nodeType&&module,$Q=QT&&QT.exports===vP,KT=$Q?na.Buffer:void 0,ZT=KT?KT.allocUnsafe:void 0;function eK(e,t){if(t)return e.slice();var r=e.length,i=ZT?ZT(r):new e.constructor(r);return e.copy(i),i}var yP=eK;function tK(e,t){for(var r=-1,i=e==null?0:e.length,n=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[n++]=a)}return s}var rK=tK;function iK(){return[]}var xP=iK,nK=Object.prototype,sK=nK.propertyIsEnumerable,$T=Object.getOwnPropertySymbols,aK=$T?function(e){return e==null?[]:(e=Object(e),rK($T(e),function(t){return sK.call(e,t)}))}:xP,nS=aK;function oK(e,t){return Ac(e,nS(e),t)}var lK=oK,uK=Object.getOwnPropertySymbols,hK=uK?function(e){for(var t=[];e;)rS(t,nS(e)),e=iS(e);return t}:xP,wP=hK;function cK(e,t){return Ac(e,wP(e),t)}var dK=cK;function pK(e,t,r){var i=t(e);return yo(e)?i:rS(i,r(e))}var _P=pK;function fK(e){return _P(e,Z_,nS)}var mK=fK;function gK(e){return _P(e,Yp,wP)}var SP=gK,vK=vu(na,"DataView"),Ux=vK,yK=vu(na,"Promise"),kx=yK,xK=vu(na,"Set"),Hx=xK,eC="[object Map]",wK="[object Object]",tC="[object Promise]",rC="[object Set]",iC="[object WeakMap]",nC="[object DataView]",_K=gu(Ux),SK=gu(dp),bK=gu(kx),AK=gu(Hx),MK=gu(Fx),jl=mu;(Ux&&jl(new Ux(new ArrayBuffer(1)))!=nC||dp&&jl(new dp)!=eC||kx&&jl(kx.resolve())!=tC||Hx&&jl(new Hx)!=rC||Fx&&jl(new Fx)!=iC)&&(jl=function(e){var t=mu(e),r=t==wK?e.constructor:void 0,i=r?gu(r):"";if(i)switch(i){case _K:return nC;case SK:return eC;case bK:return tC;case AK:return rC;case MK:return iC}return t});var sS=jl,EK=Object.prototype,TK=EK.hasOwnProperty;function CK(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&TK.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var LK=CK,OK=na.Uint8Array,sC=OK;function PK(e){var t=new e.constructor(e.byteLength);return new sC(t).set(new sC(e)),t}var aS=PK;function DK(e,t){var r=t?aS(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var RK=DK,NK=/\w*$/;function IK(e){var t=new e.constructor(e.source,NK.exec(e));return t.lastIndex=e.lastIndex,t}var BK=IK,aC=za?za.prototype:void 0,oC=aC?aC.valueOf:void 0;function zK(e){return oC?Object(oC.call(e)):{}}var FK=zK;function UK(e,t){var r=t?aS(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var bP=UK,kK="[object Boolean]",HK="[object Date]",GK="[object Map]",VK="[object Number]",jK="[object RegExp]",WK="[object Set]",JK="[object String]",YK="[object Symbol]",qK="[object ArrayBuffer]",XK="[object DataView]",QK="[object Float32Array]",KK="[object Float64Array]",ZK="[object Int8Array]",$K="[object Int16Array]",eZ="[object Int32Array]",tZ="[object Uint8Array]",rZ="[object Uint8ClampedArray]",iZ="[object Uint16Array]",nZ="[object Uint32Array]";function sZ(e,t,r){var i=e.constructor;switch(t){case qK:return aS(e);case kK:case HK:return new i(+e);case XK:return RK(e,r);case QK:case KK:case ZK:case $K:case eZ:case tZ:case rZ:case iZ:case nZ:return bP(e,r);case GK:return new i;case VK:case JK:return new i(e);case jK:return BK(e);case WK:return new i;case YK:return FK(e)}}var aZ=sZ;function oZ(e){return typeof e.constructor=="function"&&!X_(e)?_Y(iS(e)):{}}var AP=oZ,lZ="[object Map]";function uZ(e){return Ml(e)&&sS(e)==lZ}var hZ=uZ,lC=tc&&tc.isMap,cZ=lC?K_(lC):hZ,dZ=cZ,pZ="[object Set]";function fZ(e){return Ml(e)&&sS(e)==pZ}var mZ=fZ,uC=tc&&tc.isSet,gZ=uC?K_(uC):mZ,vZ=gZ,yZ=1,xZ=2,wZ=4,MP="[object Arguments]",_Z="[object Array]",SZ="[object Boolean]",bZ="[object Date]",AZ="[object Error]",EP="[object Function]",MZ="[object GeneratorFunction]",EZ="[object Map]",TZ="[object Number]",TP="[object Object]",CZ="[object RegExp]",LZ="[object Set]",OZ="[object String]",PZ="[object Symbol]",DZ="[object WeakMap]",RZ="[object ArrayBuffer]",NZ="[object DataView]",IZ="[object Float32Array]",BZ="[object Float64Array]",zZ="[object Int8Array]",FZ="[object Int16Array]",UZ="[object Int32Array]",kZ="[object Uint8Array]",HZ="[object Uint8ClampedArray]",GZ="[object Uint16Array]",VZ="[object Uint32Array]",gr={};gr[MP]=gr[_Z]=gr[RZ]=gr[NZ]=gr[SZ]=gr[bZ]=gr[IZ]=gr[BZ]=gr[zZ]=gr[FZ]=gr[UZ]=gr[EZ]=gr[TZ]=gr[TP]=gr[CZ]=gr[LZ]=gr[OZ]=gr[PZ]=gr[kZ]=gr[HZ]=gr[GZ]=gr[VZ]=!0;gr[AZ]=gr[EP]=gr[DZ]=!1;function yg(e,t,r,i,n,s){var a,o=t&yZ,l=t&xZ,h=t&wZ;if(r&&(a=n?r(e,i,n,s):r(e)),a!==void 0)return a;if(!ra(e))return e;var d=yo(e);if(d){if(a=LK(e),!o)return eP(e,a)}else{var p=sS(e),f=p==EP||p==MZ;if(Q_(e))return yP(e,o);if(p==TP||p==MP||f&&!n){if(a=l||f?{}:AP(e),!o)return l?dK(e,ZQ(a,e)):lK(e,QQ(a,e))}else{if(!gr[p])return n?e:{};a=aZ(e,p,o)}}s||(s=new gP);var m=s.get(e);if(m)return m;s.set(e,a),vZ(e)?e.forEach(function(S){a.add(yg(S,t,r,S,e,s))}):dZ(e)&&e.forEach(function(S,y){a.set(y,yg(S,t,r,y,e,s))});var v=h?l?SP:mK:l?Yp:Z_,w=d?void 0:v(e);return zY(w||e,function(S,y){w&&(y=S,S=e[y]),iP(a,y,yg(S,t,r,y,e,s))}),a}var jZ=yg;function WZ(e){return function(t,r,i){for(var n=-1,s=Object(t),a=i(t),o=a.length;o--;){var l=a[e?o:++n];if(r(s[l],l,s)===!1)break}return t}}var JZ=WZ,YZ=JZ(),qZ=YZ,XZ=function(){return na.Date.now()},M1=XZ,QZ="Expected a function",KZ=Math.max,ZZ=Math.min;function $Z(e,t,r){var i,n,s,a,o,l,h=0,d=!1,p=!1,f=!0;if(typeof e!="function")throw new TypeError(QZ);t=kT(t)||0,ra(r)&&(d=!!r.leading,p="maxWait"in r,s=p?KZ(kT(r.maxWait)||0,t):s,f="trailing"in r?!!r.trailing:f);function m(A){var M=i,L=n;return i=n=void 0,h=A,a=e.apply(L,M),a}function v(A){return h=A,o=setTimeout(y,t),d?m(A):a}function w(A){var M=A-l,L=A-h,D=t-M;return p?ZZ(D,s-L):D}function S(A){var M=A-l,L=A-h;return l===void 0||M>=t||M<0||p&&L>=s}function y(){var A=M1();if(S(A))return g(A);o=setTimeout(y,w(A))}function g(A){return o=void 0,f&&i?m(A):(i=n=void 0,a)}function _(){o!==void 0&&clearTimeout(o),h=0,i=l=n=o=void 0}function b(){return o===void 0?a:g(M1())}function T(){var A=M1(),M=S(A);if(i=arguments,n=this,l=A,M){if(o===void 0)return v(l);if(p)return clearTimeout(o),o=setTimeout(y,t),m(l)}return o===void 0&&(o=setTimeout(y,t)),a}return T.cancel=_,T.flush=b,T}var CP=$Z;function e$(e,t,r){(r!==void 0&&!Zv(e[t],r)||r===void 0&&!(t in e))&&q_(e,t,r)}var Gx=e$;function t$(e){return Ml(e)&&$v(e)}var r$=t$;function i$(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Vx=i$;function n$(e){return Ac(e,Yp(e))}var s$=n$;function a$(e,t,r,i,n,s,a){var o=Vx(e,r),l=Vx(t,r),h=a.get(l);if(h){Gx(e,r,h);return}var d=s?s(o,l,r+"",e,t,a):void 0,p=d===void 0;if(p){var f=yo(l),m=!f&&Q_(l),v=!f&&!m&&uP(l);d=l,f||m||v?yo(o)?d=o:r$(o)?d=eP(o):m?(p=!1,d=yP(l,!0)):v?(p=!1,d=bP(l,!0)):d=[]:mP(l)||Jg(l)?(d=o,Jg(o)?d=s$(o):(!ra(o)||Y_(o))&&(d=AP(l))):p=!1}p&&(a.set(l,d),n(d,l,i,s,a),a.delete(l)),Gx(e,r,d)}var o$=a$;function LP(e,t,r,i,n){e!==t&&qZ(t,function(s,a){if(n||(n=new gP),ra(s))o$(e,t,a,r,LP,i,n);else{var o=i?i(Vx(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),Gx(e,a,o)}},Yp)}var l$=LP;function u$(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var h$=u$;function c$(e,t){return t.length<2?e:wQ(e,zQ(t,0,-1))}var d$=c$,p$=rq(function(e,t,r){l$(e,t,r)}),Yg=p$;function f$(e,t){return t=tS(t,e),e=d$(e,t),e==null||delete e[dP(h$(t))]}var m$=f$;function g$(e){return mP(e)?void 0:e}var v$=g$,y$=1,x$=2,w$=4,_$=CQ(function(e,t){var r={};if(e==null)return r;var i=!1;t=K3(t,function(s){return s=tS(s,e),i||(i=s.length>1),s}),Ac(e,SP(e),r),i&&(r=jZ(r,y$|x$|w$,v$));for(var n=t.length;n--;)m$(r,t[n]);return r}),jx=_$,pp;(function(e){e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(pp||(pp={}));var fp;(function(e){e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:5e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-5e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(fp||(fp={}));var qg;(function(e){e.x="x",e.y="y",e.z="z"})(qg||(qg={}));var hC;(function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left",e.Center="center"})(hC||(hC={}));var Gd;(function(e){function t(n,s){return n[0]===s[0]&&n[1]===s[1]&&n[2]===s[2]}e.isEqual=t;function r(n,s){return[n[0]+s[0],n[1]+s[1],n[2]+s[2]]}e.add=r;function i(n,s){return[n[0]-s[0],n[1]-s[1],n[2]-s[2]]}e.sub=i})(Gd||(Gd={}));var rc;(function(e){e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(s,a){for(let o=0;o<16;o++)if(s[o]!==a[o])return!1;return!0}e.isEqual=t;function r(s){return s!=null?s:e.identity}e.simplify=r;function i(s,a){let o=a.slice(0);for(var l=0,h=a.length;l<h;l+=3){let d=1/(s[3]*a[l]+s[7]*a[l+1]+s[11]*a[l+2]+s[15]);o[l]=(s[0]*a[l]+s[4]*a[l+1]+s[8]*a[l+2]+s[12])*d,o[l+1]=(s[1]*a[l]+s[5]*a[l+1]+s[9]*a[l+2]+s[13])*d,o[l+2]=(s[2]*a[l]+s[6]*a[l+1]+s[10]*a[l+2]+s[14])*d}return o}e.applyMatrix4=i;function n(s,a){let o=a.slice(0);for(var l=0,h=a.length;l<h;l+=3)o[l]=s[0]*a[l]+s[4]*a[l+1]+s[8]*a[l+2],o[l+1]=s[1]*a[l]+s[5]*a[l+1]+s[9]*a[l+2],o[l+2]=s[2]*a[l]+s[6]*a[l+1]+s[10]*a[l+2];return o}e.applyMatrix3Components=n})(rc||(rc={}));var Vn;(function(e){e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function t(s){return{r:Math.round(s.r*255),g:Math.round(s.g*255),b:Math.round(s.b*255),a:1}}e.toRgb255a1=t;function r(s){return{r:s.r,g:s.g,b:s.b}}e.clone=r;function i(s){return s=Math.floor(s),{r:(s>>16&255)/255,g:(s>>8&255)/255,b:(s&255)/255}}e.fromHex=i;function n(s,a){return s.r===a.r&&s.g===a.g&&s.b===a.b}e.equals=n})(Vn||(Vn={}));var eu;(function(e){e.white=tt(Le({},Vn.white),{a:1});function t(s){return{r:s[0],g:s[1],b:s[2],a:s[3]}}e.from0to1=t;function r(s,a){return tt(Le({},Vn.fromHex(s)),{a})}e.fromHexAndA=r;function i(s){return{r:Math.round(s.r*255),g:Math.round(s.g*255),b:Math.round(s.b*255),a:s.a}}e.toRgb255a1=i;function n(s,a){return Vn.equals(s,a)&&s.a===a.a}e.equals=n})(eu||(eu={}));var Wx;(function(e){e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}})(Wx||(Wx={}));var cC;(function(e){e[e.SKIP=0]="SKIP",e[e.ADD=1]="ADD",e[e.ALPHA=2]="ALPHA",e[e.AVERAGE=3]="AVERAGE",e[e.COLOR_BURN=4]="COLOR_BURN",e[e.COLOR_DODGE=5]="COLOR_DODGE",e[e.DARKEN=6]="DARKEN",e[e.DIFFERENCE=7]="DIFFERENCE",e[e.EXCLUSION=8]="EXCLUSION",e[e.LIGHTEN=9]="LIGHTEN",e[e.MULTIPLY=10]="MULTIPLY",e[e.DIVIDE=11]="DIVIDE",e[e.NEGATION=12]="NEGATION",e[e.NORMAL=13]="NORMAL",e[e.OVERLAY=14]="OVERLAY",e[e.REFLECT=15]="REFLECT",e[e.SCREEN=16]="SCREEN",e[e.SOFT_LIGHT=17]="SOFT_LIGHT",e[e.SUBTRACT=18]="SUBTRACT"})(cC||(cC={}));var Xg;(function(e){e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING"})(Xg||(Xg={}));var dC;(function(e){e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}})(dC||(dC={}));var pC;(function(e){e.defaultData={control1:[.5,.05],control2:[.1,.3]}})(pC||(pC={}));var Jx;(function(e){function t(r,i=.1){return{type:"radial",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:qg.y,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[0,0,0],rotation:[0,0,0],position:[r[0]+r[0]*i,0,0]},grid:{count:[2,2,2],size:r.map(n=>n*(1+i)),useCenter:!0}}}e.defaultData=t})(Jx||(Jx={}));var uu;(function(e){e[e.Update=0]="Update"})(uu||(uu={}));var Sa;(function(e){e[e.Add=1]="Add",e[e.Delete=2]="Delete",e[e.Unlink=3]="Unlink"})(Sa||(Sa={}));var Vs;(function(e){e[e.Add=4]="Add",e[e.Delete=5]="Delete",e[e.Move=6]="Move"})(Vs||(Vs={}));var ys;(function(e){e[e.Add=7]="Add",e[e.Delete=8]="Delete",e[e.Move=9]="Move"})(ys||(ys={}));var tu=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i=tt(Le({},r),{[e]:t});return Object.setPrototypeOf(i,tu.prototype),i}}add(e,t){var r;let i=this.runOp({type:Sa.Add,id:e,data:t});return(r=i==null?void 0:i.data)!=null?r:this}runOp(e){let t=this;if(e.type===Sa.Add){let r=t[e.id],i;r===void 0?i={type:Sa.Delete,id:e.id}:i={type:Sa.Add,id:e.id,data:r};let{id:n,data:s}=e,a=tt(Le({},t),{[n]:s});return Object.setPrototypeOf(a,tu.prototype),{data:a,actual:e,reverse:i}}else if(e.type===Sa.Delete){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n=Le({},t);return Object.setPrototypeOf(n,tu.prototype),delete n[r],{data:n,actual:e,reverse:{type:Sa.Add,id:r,data:i}}}}throw new Error("illegal arg")}};function oS(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&oS(i)}return Object.freeze(e)}function S$(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var b$=class extends Error{};function Zo(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let i=[],n=1/(r+1);for(let s=0;s<r;s++){let a=e+(t-e)*(s+.75+Math.random()*.5)*n;i.push(a)}return i}function A$(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function M$(){return typeof process!="undefined"}function OP(e,t){for(let r of e)t(r.id,r.data),OP(r.children,t)}function PP(e,t){t(e.id,e.data);for(let r of e.children)PP(r,t)}var ic=class extends Array{constructor(...e){super(...e);Object.setPrototypeOf(this,ic.prototype)}deepFreeze(){let e=0;for(;e<this.length;)oS(this[e]),e++}fillCaches0(e,t){var r;if((r=this.objCaches)!=null&&r.has(e.id))throw new Error("duplicated item");this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&PP(r,t)}}traverse(e){OP(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(a=>a.id===e);if(n<0)throw new Error("not expected");let s=i[n];return i=[...i],i[n]=tt(Le({},s),{data:t}),this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let s=i,a=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let o=i.findIndex(l=>l.id===a);if(o<0)throw new Error;i=[...i],i[o]=tt(Le({},i[o]),{children:s})}Object.setPrototypeOf(i,ic.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case ys.Add:return this.addOp(e);case ys.Delete:return this.deleteOp(e);case ys.Move:return this.moveOp(e)}}addOp(e){let{parent:t,fi:r,id:i,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.get(i)!==void 0)return null;{let a=t,o=this.childrenArray(a),l={fi:r,id:i,data:n,children:s};return o=[...o,l],o.sort((h,d)=>h.fi-d.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(a,o),actual:e,reverse:{type:ys.Delete,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(a=>a.id===t);e.localIndex=n,i=[...i];let s=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:tt(Le({type:ys.Add},s),{parent:r})}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:ys.Delete,id:i});if(t!==null){let p=t;for(;p!==null;){if(p===void 0)throw new Error;if(p===i)throw new b$("cyclic tree");p=this.parent(p)}}let n=this.parent(i);if(n===void 0)return null;let s=n,a=this.childrenArray(n),o=a.findIndex(p=>p.id===i);a=[...a];let l=a.splice(o,1)[0],h=this.modifyArrayBy(n,a);n=t,a=h.childrenArray(n);let d=l.fi;return l=tt(Le({},l),{fi:r}),a=[...a,l],a.sort((p,f)=>p.fi-f.fi),e.localIndex=a.indexOf(l),h=h.modifyArrayBy(n,a),{data:h,actual:e,reverse:{type:ys.Move,parent:s,fi:d,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(Le(Le({},r),i))}t.sort((r,i)=>S$(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return tt(Le({},n),{sortKey:r})}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return Zo(0,r,r);{let n=i[0].fi;return Zo(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=i.find(a=>a.fi>n.fi);if(s===void 0){let a=i[i.length-1].fi;return Zo(a,a+r,r)}else return Zo(n.fi,s.fi,r)}}},Yx;(function(e){function t(r,i){if(Array.isArray(r)){let n=i.props,s={},a=[...r],o=!1;if(n)for(let l of Object.keys(n)){let h=parseInt(l);if(isNaN(h))throw new Error("wrong index");s[l]=a[h],a[h]=n[l],o=!0}return o?{data:a,actual:i,reverse:{type:uu.Update,props:s}}:null}else{let n=i.props,s={},a=Le({},r),o=!1;if(n)for(let l of Object.keys(n))s[l]=a[l],a[l]=n[l],o=!0;return o?{data:a,actual:i,reverse:{type:uu.Update,props:s}}:null}}e.runOp=t})(Yx||(Yx={}));var Mn=class extends Array{constructor(...e){super(...e);Object.setPrototypeOf(this,Mn.prototype)}deepFreeze(){let e=0;for(;e<this.length;)oS(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(s=>s.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]=tt(Le({},n),{data:t}),this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,Mn.prototype);let t=e;return M$()||t.fillCaches(),t}runOp(e){switch(e.type){case Vs.Add:return this.addOp(e);case Vs.Delete:return this.deleteOp(e);case Vs.Move:return this.moveOp(e)}}addOp(e){let{fi:t,id:r,data:i}=e,n=this,s={fi:t,id:r,data:i};return n=[...n,s],n.sort((a,o)=>a.fi-o.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:Vs.Delete,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(s=>s.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:Le({type:Vs.Add},n)}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(o=>o.id===r);if(n===-1)return null;let s=i[n].fi,a=tt(Le({},i[n]),{fi:t});return i[n]=a,i.sort((o,l)=>o.fi-l.fi),e.localIndex=i.indexOf(a),{data:this.modifyArrayBy(i),actual:e,reverse:{type:Vs.Move,fi:s,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return Zo(0,t,t);{let i=r[0].fi;return Zo(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(s=>s.fi>i.fi);if(n===void 0){let s=r[r.length-1].fi;return Zo(s,s+t,t)}else return Zo(i.fi,n.fi,t)}}},DP=Symbol(),i0=Symbol(),n0=class{reportOp(e,t){let r=this;if(t===null)return;r._current=t.data;let i=[];for(;!(r instanceof NP);){let n=r._path,s=r._current;if(n!==""&&i.splice(0,0,n),r=r._parent,r===null)return;r.update(n,s)}r.push(i,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[i0];r&&r(),delete this._children[e]}}}},E$=class extends n0{constructor(e,t,r){super();this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current=tt(Le({},this._current),{[e]:t})}runOp(e){this.reportOp(e,Yx.runOp(this._current,e))}},T$=class extends n0{constructor(e,t,r){super();this._parent=e,this._path=t,this._current=r}update(e,t){this._current=tt(Le({},this._current),{[e]:t}),Object.setPrototypeOf(this._current,tu.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},RP={get(e,t){if(t===i0)return()=>{e._parent=null};if(t===DP)return e._current;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let s=r[t],a=s0(e,t,s);return a!==s?(i===void 0&&(i={},e._children=i),i[t]=a,a):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},C$=tt(Le({},RP),{set(e,t,r){var i;let n;if(r===void 0)throw new Error("set to undefined is not supported!");return n={type:uu.Update,props:{[t]:(i=P$(r))!=null?i:r}},e.deleteChildren(t),e.runOp(n),!0},deleteProperty(e,t){throw new Error("set to undefined is not supported!")}}),L$=tt(Le({},RP),{set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:Sa.Add,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:Sa.Delete,id:t}),!0}}),lS=class extends n0{constructor(e,t,r){super();this._children={},this._parent=e,this._path=t,this._current=r,this[i0]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}data(e){var t;let{_current:r,_children:i}=this,n=i===void 0?void 0:i[e];if(n!==void 0)return n;let s=(t=r.get(e))==null?void 0:t.data,a=s0(this,e,s);return a!==s?(i===void 0&&(i={},this._children=i),i[e]=a,a):s}add(e,t,r,i,n){this.runOp({type:ys.Add,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:ys.Move,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:ys.Delete,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},uS=class extends n0{constructor(e,t,r){super();this._children={},this._parent=e,this._path=t,this._current=r,this[i0]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;e(this.data(this._current[r].id),i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return tt(Le({},this._current.get(e)),{data:this.data(e)})}data(e){var t;let{_current:r,_children:i}=this,n=i===void 0?void 0:i[e];if(n!==void 0)return n;let s=(t=r.get(e))==null?void 0:t.data,a=s0(this,e,s);return a!==s?(i===void 0&&(i={},this._children=i),i[e]=a,a):s}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:Vs.Add,fi:e,id:t,data:r})}move(e,t){this.runOp({type:Vs.Move,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:Vs.Delete,id:e})}};function E1(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===uu.Update&&t.type===uu.Update&&qx.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push(tt(Le({},t),{path:r}))}var NP=class{constructor(e){this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){E1(this.ts,t,e),E1(this.actual,r,e),E1(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function s0(e,t,r){return r instanceof ic?new lS(e,t,r):r instanceof Mn?new uS(e,t,r):r instanceof tu?new Proxy(new T$(e,t,r),L$):r!==null&&typeof r=="object"?A$(r)?r:new Proxy(new E$(e,t,r),C$):r}function O$(e){let t=new NP(e);return[s0(t,"",e),t]}function fC(e,t){let[r,i]=O$(e);return t(r),i.result()}function P$(e){return e instanceof lS||e instanceof uS?e._current:e!==null&&typeof e=="object"?e[DP]:e}var qx;(function(e){function t(n,s){if(s.length===n.length)for(var a=0;a<n.length;){if(n[a]!==s[a])return!1;a+=1}else return!1;return!0}e.equal=t;function r(n,s,a){let o=i(a,n);if(o!==void 0&&typeof o=="object"&&o!==null){let l=Le({},s);return Object.keys(o).forEach(h=>{delete l[h]}),l}else return s}e.removeOverridden=r;function i(n,s,a=0){if(s.length<=a)return n;if((n instanceof ic||n instanceof lS)&&typeof s[a]=="string"||(n instanceof Mn||n instanceof uS)&&typeof s[a]=="string")return i(n.data(s[a]),s,a+1);if(typeof s[a]=="number"&&Array.isArray(n)||typeof s[a]=="string"&&typeof n=="object")return i(n[s[a]],s,a+1)}e.zoom=i})(qx||(qx={}));var IP=class{},mC=class extends IP{constructor(e){super();this.id=e}},gC=class extends IP{constructor(e){super();this.data=e}},Xx;try{Xx=new TextDecoder}catch{}var Ve,sl,ce=0,BP=[],Qx=BP,Kx=0,xn={},Qt,$o,ms=0,ba=0,Gn,mo,un=[],rr,vC={useRecords:!1,mapsAsObjects:!0},zP=class{},FP=new zP;FP.name="MessagePack 0xC1";var nc=!1,Qg=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Ve)return jP(()=>($x(),this?this.unpack(e,t):Qg.prototype.unpack.call(vC,e,t)));sl=t>-1?t:e.length,ce=0,Kx=0,ba=0,$o=null,Qx=BP,Gn=null,Ve=e;try{rr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw Ve=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Qg){if(xn=this,this.structures)return Qt=this.structures,Rm();(!Qt||Qt.length>0)&&(Qt=[])}else xn=vC,(!Qt||Qt.length>0)&&(Qt=[]);return Rm()}unpackMultiple(e,t){let r,i=0;try{nc=!0;let n=e.length,s=this?this.unpack(e,n):o0.unpack(e,n);if(t){for(t(s);ce<n;)if(i=ce,t(Rm())===!1)return}else{for(r=[s];ce<n;)i=ce,r.push(Rm());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{nc=!1,$x()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Rm(){try{if(!xn.trusted&&!nc){let t=Qt.sharedLength||0;t<Qt.length&&(Qt.length=t)}let e=Ur();if(ce==sl)Qt.restoreStructures&&yC(),Qt=null,Ve=null,mo&&(mo=null);else if(ce>sl){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!nc)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Qt.restoreStructures&&yC(),$x(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function yC(){for(let e in Qt.restoreStructures)Qt[e]=Qt.restoreStructures[e];Qt.restoreStructures=null}function Ur(){let e=Ve[ce++];if(e<160)if(e<128){if(e<64)return e;{let t=Qt[e&63]||xn.getStructures&&UP()[e&63];return t?(t.read||(t.read=hS(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,xn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[HP()]=Ur();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ur(),Ur());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ur();return t}else if(e<192){let t=e-160;if(ba>=ce)return $o.slice(ce-ms,(ce+=t)-ms);if(ba==0&&sl<140){let r=t<16?cS(t):kP(t);if(r!=null)return r}return Zx(t)}else{let t;switch(e){case 192:return null;case 193:return Gn?(t=Ur(),t>0?Gn[1].slice(Gn.position1,Gn.position1+=t):Gn[0].slice(Gn.position0,Gn.position0-=t)):FP;case 194:return!1;case 195:return!0;case 196:return T1(Ve[ce++]);case 197:return t=rr.getUint16(ce),ce+=2,T1(t);case 198:return t=rr.getUint32(ce),ce+=4,T1(t);case 199:return Hl(Ve[ce++]);case 200:return t=rr.getUint16(ce),ce+=2,Hl(t);case 201:return t=rr.getUint32(ce),ce+=4,Hl(t);case 202:if(t=rr.getFloat32(ce),xn.useFloat32>2){let r=dS[(Ve[ce]&127)<<1|Ve[ce+1]>>7];return ce+=4,(r*t+(t>0?.5:-.5)>>0)/r}return ce+=4,t;case 203:return t=rr.getFloat64(ce),ce+=8,t;case 204:return Ve[ce++];case 205:return t=rr.getUint16(ce),ce+=2,t;case 206:return t=rr.getUint32(ce),ce+=4,t;case 207:return xn.int64AsNumber?(t=rr.getUint32(ce)*4294967296,t+=rr.getUint32(ce+4)):t=rr.getBigUint64(ce),ce+=8,t;case 208:return rr.getInt8(ce++);case 209:return t=rr.getInt16(ce),ce+=2,t;case 210:return t=rr.getInt32(ce),ce+=4,t;case 211:return xn.int64AsNumber?(t=rr.getInt32(ce)*4294967296,t+=rr.getUint32(ce+4)):t=rr.getBigInt64(ce),ce+=8,t;case 212:if(t=Ve[ce++],t==114)return bC(Ve[ce++]&63);{let r=un[t];if(r)return r.read?(ce++,r.read(Ur())):r.noBuffer?(ce++,r()):r(Ve.subarray(ce,++ce));throw new Error("Unknown extension "+t)}case 213:return t=Ve[ce],t==114?(ce++,bC(Ve[ce++]&63,Ve[ce++])):Hl(2);case 214:return Hl(4);case 215:return Hl(8);case 216:return Hl(16);case 217:return t=Ve[ce++],ba>=ce?$o.slice(ce-ms,(ce+=t)-ms):R$(t);case 218:return t=rr.getUint16(ce),ce+=2,ba>=ce?$o.slice(ce-ms,(ce+=t)-ms):N$(t);case 219:return t=rr.getUint32(ce),ce+=4,ba>=ce?$o.slice(ce-ms,(ce+=t)-ms):I$(t);case 220:return t=rr.getUint16(ce),ce+=2,wC(t);case 221:return t=rr.getUint32(ce),ce+=4,wC(t);case 222:return t=rr.getUint16(ce),ce+=2,_C(t);case 223:return t=rr.getUint32(ce),ce+=4,_C(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var D$=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function hS(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>D$.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Ur);return e.highByte===0&&(e.read=xC(t,e.read)),n()}let i={};for(let n=0,s=e.length;n<s;n++){let a=e[n];i[a]=Ur()}return i}return r.count=0,e.highByte===0?xC(t,r):r}var xC=(e,t)=>function(){let r=Ve[ce++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=Qt[i]||UP()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=hS(n,e)),n.read()};function UP(){let e=jP(()=>(Ve=null,xn.getStructures()));return Qt=xn._mergeStructures(e,Qt)}var Zx=a0,R$=a0,N$=a0,I$=a0;function a0(e){let t;if(e<16&&(t=cS(e)))return t;if(e>64&&Xx)return Xx.decode(Ve.subarray(ce,ce+=e));let r=ce+e,i=[];for(t="";ce<r;){let n=Ve[ce++];if((n&128)==0)i.push(n);else if((n&224)==192){let s=Ve[ce++]&63;i.push((n&31)<<6|s)}else if((n&240)==224){let s=Ve[ce++]&63,a=Ve[ce++]&63;i.push((n&31)<<12|s<<6|a)}else if((n&248)==240){let s=Ve[ce++]&63,a=Ve[ce++]&63,o=Ve[ce++]&63,l=(n&7)<<18|s<<12|a<<6|o;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=xi.apply(String,i),i.length=0)}return i.length>0&&(t+=xi.apply(String,i)),t}function wC(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ur();return t}function _C(e){if(xn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[HP()]=Ur();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ur(),Ur());return t}}var xi=String.fromCharCode;function kP(e){let t=ce,r=new Array(e);for(let i=0;i<e;i++){let n=Ve[ce++];if((n&128)>0){ce=t;return}r[i]=n}return xi.apply(String,r)}function cS(e){if(e<4)if(e<2){if(e===0)return"";{let t=Ve[ce++];if((t&128)>1){ce-=1;return}return xi(t)}}else{let t=Ve[ce++],r=Ve[ce++];if((t&128)>0||(r&128)>0){ce-=2;return}if(e<3)return xi(t,r);let i=Ve[ce++];if((i&128)>0){ce-=3;return}return xi(t,r,i)}else{let t=Ve[ce++],r=Ve[ce++],i=Ve[ce++],n=Ve[ce++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){ce-=4;return}if(e<6){if(e===4)return xi(t,r,i,n);{let s=Ve[ce++];if((s&128)>0){ce-=5;return}return xi(t,r,i,n,s)}}else if(e<8){let s=Ve[ce++],a=Ve[ce++];if((s&128)>0||(a&128)>0){ce-=6;return}if(e<7)return xi(t,r,i,n,s,a);let o=Ve[ce++];if((o&128)>0){ce-=7;return}return xi(t,r,i,n,s,a,o)}else{let s=Ve[ce++],a=Ve[ce++],o=Ve[ce++],l=Ve[ce++];if((s&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){ce-=8;return}if(e<10){if(e===8)return xi(t,r,i,n,s,a,o,l);{let h=Ve[ce++];if((h&128)>0){ce-=9;return}return xi(t,r,i,n,s,a,o,l,h)}}else if(e<12){let h=Ve[ce++],d=Ve[ce++];if((h&128)>0||(d&128)>0){ce-=10;return}if(e<11)return xi(t,r,i,n,s,a,o,l,h,d);let p=Ve[ce++];if((p&128)>0){ce-=11;return}return xi(t,r,i,n,s,a,o,l,h,d,p)}else{let h=Ve[ce++],d=Ve[ce++],p=Ve[ce++],f=Ve[ce++];if((h&128)>0||(d&128)>0||(p&128)>0||(f&128)>0){ce-=12;return}if(e<14){if(e===12)return xi(t,r,i,n,s,a,o,l,h,d,p,f);{let m=Ve[ce++];if((m&128)>0){ce-=13;return}return xi(t,r,i,n,s,a,o,l,h,d,p,f,m)}}else{let m=Ve[ce++],v=Ve[ce++];if((m&128)>0||(v&128)>0){ce-=14;return}if(e<15)return xi(t,r,i,n,s,a,o,l,h,d,p,f,m,v);let w=Ve[ce++];if((w&128)>0){ce-=15;return}return xi(t,r,i,n,s,a,o,l,h,d,p,f,m,v,w)}}}}}function T1(e){return xn.copyBuffers?Uint8Array.prototype.slice.call(Ve,ce,ce+=e):Ve.subarray(ce,ce+=e)}function Hl(e){let t=Ve[ce++];if(un[t])return un[t](Ve.subarray(ce,ce+=e));throw new Error("Unknown extension type "+t)}var SC=new Array(4096);function HP(){let e=Ve[ce++];if(e>=160&&e<192){if(e=e-160,ba>=ce)return $o.slice(ce-ms,(ce+=e)-ms);if(!(ba==0&&sl<180))return Zx(e)}else return ce--,Ur();let t=(e<<5^(e>1?rr.getUint16(ce):e>0?Ve[ce]:0))&4095,r=SC[t],i=ce,n=ce+e-3,s,a=0;if(r&&r.bytes==e){for(;i<n;){if(s=rr.getUint32(i),s!=r[a++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(s=Ve[i++],s!=r[a++]){i=1879048192;break}if(i===n)return ce=i,r.string;n-=3,i=ce}for(r=[],SC[t]=r,r.bytes=e;i<n;)s=rr.getUint32(i),r.push(s),i+=4;for(n+=3;i<n;)s=Ve[i++],r.push(s);let o=e<16?cS(e):kP(e);return o!=null?r.string=o:r.string=Zx(e)}var bC=(e,t)=>{var r=Ur();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=Qt[e];return n&&n.isShared&&((Qt.restoreStructures||(Qt.restoreStructures=[]))[e]=n),Qt[e]=r,r.read=hS(r,i),r.read()},GP=typeof self=="object"?self:global;un[0]=()=>{};un[0].noBuffer=!0;un[101]=()=>{let e=Ur();return(GP[e[0]]||Error)(e[1])};un[105]=e=>{let t=rr.getUint32(ce-4);mo||(mo=new Map);let r=Ve[ce],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};mo.set(t,n);let s=Ur();return n.used?Object.assign(i,s):(n.target=s,s)};un[112]=e=>{let t=rr.getUint32(ce-4),r=mo.get(t);return r.used=!0,r.target};un[115]=()=>new Set(Ur());var VP=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");un[116]=e=>{let t=e[0],r=VP[t];if(!r)throw new Error("Could not find typed array for code "+t);return new GP[r](Uint8Array.prototype.slice.call(e,1).buffer)};un[120]=()=>{let e=Ur();return new RegExp(e[0],e[1])};un[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=ce;ce+=t-4,Gn=[Ur(),Ur()],Gn.position0=0,Gn.position1=0;let i=ce;ce=r;try{return Ur()}finally{ce=i}};un[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function jP(e){let t=sl,r=ce,i=Kx,n=ms,s=ba,a=$o,o=Qx,l=mo,h=Gn,d=new Uint8Array(Ve.slice(0,sl)),p=Qt,f=Qt.slice(0,Qt.length),m=xn,v=nc,w=e();return sl=t,ce=r,Kx=i,ms=n,ba=s,$o=a,Qx=o,mo=l,Gn=h,Ve=d,nc=v,Qt=p,Qt.splice(0,Qt.length,...f),xn=m,rr=new DataView(Ve.buffer,Ve.byteOffset,Ve.byteLength),w}function $x(){Ve=null,mo=null,Qt=null}function B$(e){e.unpack?un[e.type]=e.unpack:un[e.type]=e}var dS=new Array(147);for(let e=0;e<256;e++)dS[e]=+("1e"+Math.floor(45.15-e*.30103));var o0=new Qg({useRecords:!1});o0.unpack;o0.unpackMultiple;o0.unpack;var z$=new Float32Array(1);new Uint8Array(z$.buffer,0,4);var xg;try{xg=new TextEncoder}catch{}var Kg,pS,l0=typeof Buffer!="undefined",C1=l0?Buffer.allocUnsafeSlow:Uint8Array,WP=l0?Buffer:Uint8Array,AC=l0?4294967296:2144337920,be,qr,ge=0,ca,da=null,F$=/[\u0080-\uFFFF]/,ld=Symbol("record-id"),JP=class extends Qg{constructor(e){super(e);this.offset=0;let t,r,i,n,s,a=0,o=WP.prototype.utf8Write?function(A,M,L){return be.utf8Write(A,M,L)}:xg&&xg.encodeInto?function(A,M){return xg.encodeInto(A,be.subarray(M)).written}:!1,l=this;e||(e={});let h=e&&e.sequential,d=e.structures||e.saveStructures,p=e.maxSharedStructures;if(p==null&&(p=d?32:0),p>8160)throw new Error("Maximum maxSharedStructure is 8160");let f=e.maxOwnStructures;f==null&&(f=d?32:64),h&&!e.saveStructures&&(this.structures=[]);let m=p>32||f+p>64,v=p+64,w=p+f+64;if(w>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let S=[],y=0,g=0;this.pack=this.encode=function(A,M){if(be||(be=new C1(8192),qr=new DataView(be.buffer,0,8192),ge=0),ca=be.length-10,ca-ge<2048?(be=new C1(be.length),qr=new DataView(be.buffer,0,be.length),ca=be.length-10,ge=0):ge=ge+7&2147483640,t=ge,s=l.structuredClone?new Map:null,l.bundleStrings?(da=["",""],be[ge++]=214,be[ge++]=98,da.position=ge-t,ge+=4):da=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let L=r.sharedLength||0;if(L>p)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let D=0;D<L;D++){let C=r[D];if(!C)continue;let N,U=r.transitions;for(let V=0,k=C.length;V<k;V++){let G=C[V];N=U[G],N||(N=U[G]=Object.create(null)),U=N}U[ld]=D+64}a=L}h||(r.nextId=L+64)}i&&(i=!1),n=r||[];try{if(_(A),da){qr.setUint32(da.position+t,ge-da.position-t);let L=da;da=null,_(L[0]),_(L[1])}if(l.offset=ge,s&&s.idsToInsert){ge+=s.idsToInsert.length*6,ge>ca&&T(ge),l.offset=ge;let L=k$(be.subarray(t,ge),s.idsToInsert);return s=null,L}return M&H$?(be.start=t,be.end=ge,be):be.subarray(t,ge)}finally{if(r){if(g<10&&g++,y>1e4)r.transitions=null,g=0,y=0,S.length>0&&(S=[]);else if(S.length>0&&!h){for(let L=0,D=S.length;L<D;L++)S[L][ld]=0;S=[]}if(i&&l.saveStructures){let L=r.sharedLength||p;r.length>L&&(r=r.slice(0,L));let D=be.subarray(t,ge);return l.saveStructures(r,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(A)):(a=L,D)}}M&G$&&(ge=t)}};let _=A=>{ge>ca&&(be=T(ge));var M=typeof A,L;if(M==="string"){let D=A.length;if(da&&D>=8&&D<4096){let U=F$.test(A);da[U?0:1]+=A,be[ge++]=193,_(U?-D:D);return}let C;D<32?C=1:D<256?C=2:D<65536?C=3:C=5;let N=D*3;if(ge+N>ca&&(be=T(ge+N)),D<64||!o){let U,V,k,G=ge+C;for(U=0;U<D;U++)V=A.charCodeAt(U),V<128?be[G++]=V:V<2048?(be[G++]=V>>6|192,be[G++]=V&63|128):(V&64512)==55296&&((k=A.charCodeAt(U+1))&64512)==56320?(V=65536+((V&1023)<<10)+(k&1023),U++,be[G++]=V>>18|240,be[G++]=V>>12&63|128,be[G++]=V>>6&63|128,be[G++]=V&63|128):(be[G++]=V>>12|224,be[G++]=V>>6&63|128,be[G++]=V&63|128);L=G-ge-C}else L=o(A,ge+C,N);L<32?be[ge++]=160|L:L<256?(C<2&&be.copyWithin(ge+2,ge+1,ge+1+L),be[ge++]=217,be[ge++]=L):L<65536?(C<3&&be.copyWithin(ge+3,ge+2,ge+2+L),be[ge++]=218,be[ge++]=L>>8,be[ge++]=L&255):(C<5&&be.copyWithin(ge+5,ge+3,ge+3+L),be[ge++]=219,qr.setUint32(ge,L),ge+=4),ge+=L}else if(M==="number")if(A>>>0===A)A<64?be[ge++]=A:A<256?(be[ge++]=204,be[ge++]=A):A<65536?(be[ge++]=205,be[ge++]=A>>8,be[ge++]=A&255):(be[ge++]=206,qr.setUint32(ge,A),ge+=4);else if(A>>0===A)A>=-32?be[ge++]=256+A:A>=-128?(be[ge++]=208,be[ge++]=A+256):A>=-32768?(be[ge++]=209,qr.setInt16(ge,A),ge+=2):(be[ge++]=210,qr.setInt32(ge,A),ge+=4);else{let D;if((D=this.useFloat32)>0&&A<4294967296&&A>=-2147483648){be[ge++]=202,qr.setFloat32(ge,A);let C;if(D<4||(C=A*dS[(be[ge]&127)<<1|be[ge+1]>>7])>>0===C){ge+=4;return}else ge--}be[ge++]=203,qr.setFloat64(ge,A),ge+=8}else if(M==="object")if(!A)be[ge++]=192;else{if(s){let C=s.get(A);if(C){if(!C.id){let N=s.idsToInsert||(s.idsToInsert=[]);C.id=N.push(C)}be[ge++]=214,be[ge++]=112,qr.setUint32(ge,C.id),ge+=4;return}else s.set(A,{offset:ge-t})}let D=A.constructor;if(D===Object)b(A,!0);else if(D===Array){L=A.length,L<16?be[ge++]=144|L:L<65536?(be[ge++]=220,be[ge++]=L>>8,be[ge++]=L&255):(be[ge++]=221,qr.setUint32(ge,L),ge+=4);for(let C=0;C<L;C++)_(A[C])}else if(D===Map){L=A.size,L<16?be[ge++]=128|L:L<65536?(be[ge++]=222,be[ge++]=L>>8,be[ge++]=L&255):(be[ge++]=223,qr.setUint32(ge,L),ge+=4);for(let[C,N]of A)_(C),_(N)}else{for(let C=0,N=Kg.length;C<N;C++){let U=pS[C];if(A instanceof U){let V=Kg[C];if(V.write){V.type&&(be[ge++]=212,be[ge++]=V.type,be[ge++]=0),_(V.write.call(this,A));return}let k=be,G=qr,$=ge;be=null;let W;try{W=V.pack.call(this,A,H=>(be=k,k=null,ge+=H,ge>ca&&T(ge),{target:be,targetView:qr,position:ge-H}),_)}finally{k&&(be=k,qr=G,ge=$,ca=be.length-10)}W&&(W.length+ge>ca&&T(W.length+ge),ge=U$(W,be,ge,V.type));return}}b(A,!A.hasOwnProperty)}}else if(M==="boolean")be[ge++]=A?195:194;else if(M==="bigint"){if(A<BigInt(1)<<BigInt(63)&&A>=-(BigInt(1)<<BigInt(63)))be[ge++]=211,qr.setBigInt64(ge,A);else if(A<BigInt(1)<<BigInt(64)&&A>0)be[ge++]=207,qr.setBigUint64(ge,A);else if(this.largeBigIntToFloat)be[ge++]=203,qr.setFloat64(ge,Number(A));else throw new RangeError(A+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ge+=8}else if(M==="undefined")this.encodeUndefinedAsNil?be[ge++]=192:(be[ge++]=212,be[ge++]=0,be[ge++]=0);else if(M==="function")_(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+M)},b=this.useRecords===!1?this.variableMapSize?A=>{let M=Object.keys(A),L=M.length;L<16?be[ge++]=128|L:L<65536?(be[ge++]=222,be[ge++]=L>>8,be[ge++]=L&255):(be[ge++]=223,qr.setUint32(ge,L),ge+=4);let D;for(let C=0;C<L;C++)_(D=M[C]),_(A[D])}:(A,M)=>{be[ge++]=222;let L=ge-t;ge+=2;let D=0;for(let C in A)(M||A.hasOwnProperty(C))&&(_(C),_(A[C]),D++);be[L+++t]=D>>8,be[L+t]=D&255}:A=>{let M=Object.keys(A),L,D=n.transitions||(n.transitions=Object.create(null)),C=0;for(let U=0,V=M.length;U<V;U++){let k=M[U];L=D[k],L||(L=D[k]=Object.create(null),C++),D=L}let N=D[ld];if(N)N>=96&&m?(be[ge++]=((N-=96)&31)+96,be[ge++]=N>>5):be[ge++]=N;else{N=n.nextId,N||(N=64),N<v&&this.shouldShareStructure&&!this.shouldShareStructure(M)?(N=n.nextOwnId,N<w||(N=v),n.nextOwnId=N+1):(N>=w&&(N=v),n.nextId=N+1);let U=M.highByte=N>=96&&m?N-96>>5:-1;D[ld]=N,n[N-64]=M,N<v?(M.isShared=!0,n.sharedLength=N-63,i=!0,U>=0?(be[ge++]=(N&31)+96,be[ge++]=U):be[ge++]=N):(U>=0?(be[ge++]=213,be[ge++]=114,be[ge++]=(N&31)+96,be[ge++]=U):(be[ge++]=212,be[ge++]=114,be[ge++]=N),C&&(y+=g*C),S.length>=f&&(S.shift()[ld]=0),S.push(D),_(M))}for(let U=0,V=M.length;U<V;U++)_(A[M[U]])},T=A=>{let M;if(A>16777216){if(A-t>AC)throw new Error("Packed buffer would be larger than maximum buffer size");M=Math.min(AC,Math.round(Math.max((A-t)*(A>67108864?1.25:2),4194304)/4096)*4096)}else M=(Math.max(A-t<<2,be.length-1)>>12)+1<<12;let L=new C1(M);return qr=new DataView(L.buffer,0,M),be.copy?be.copy(L,0,t,A):L.set(be.slice(t,A)),ge-=t,t=0,ca=L.length-10,be=L}}useBuffer(e){be=e,qr=new DataView(be.buffer,be.byteOffset,be.byteLength),ge=0}};pS=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,zP];Kg=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:s,position:a}=t(6);n[a++]=214,n[a++]=255,s.setUint32(a,i)}else if(i>0&&i<17179869184){let{target:n,targetView:s,position:a}=t(10);n[a++]=215,n[a++]=255,s.setUint32(a,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(a+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:s,position:a}=t(3);n[a++]=212,n[a++]=255,n[a++]=255}else{let{target:n,targetView:s,position:a}=t(15);n[a++]=199,n[a++]=12,n[a++]=255,s.setUint32(a,e.getMilliseconds()*1e6),s.setBigInt64(a+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?MC(e,16,t):EC(l0?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==WP&&this.structuredClone?MC(e,VP.indexOf(r.name),t):EC(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function MC(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=r(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=r(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=r(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function EC(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:s}=t(r+5);i[n++]=198,s.setUint32(n,r),n+=4}i.set(e,n)}function U$(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function k$(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((s,a)=>s.offset>a.offset?1:-1);r=t.pop();){let s=r.offset,a=r.id;e.copyWithin(s+i,s,n),i-=6;let o=s+i;e[o++]=214,e[o++]=105,e[o++]=a>>24,e[o++]=a>>16&255,e[o++]=a>>8&255,e[o++]=a&255,n=s}return e}function qp(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");pS.unshift(e.Class),Kg.unshift(e)}B$(e)}var YP=new JP({useRecords:!1});YP.pack;YP.pack;var H$=512,G$=1024,TC=new JP({structuredClone:!0});qp({Class:tu.prototype.constructor,type:1,write(e){return Le({},e)},read(e){return Object.setPrototypeOf(e,tu.prototype),e}});qp({Class:Mn.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Mn.prototype),e}});qp({Class:ic.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,ic.prototype),e}});qp({Class:mC.prototype.constructor,type:4,write(e){return e.id},read(e){return new mC(e)}});qp({Class:gC.prototype.constructor,type:5,write(e){return e.data},read(e){return new gC(e)}});function V$(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}var ew;(function(e){function t(n){return TC.pack(n)}e.serialize=t;function r(n){return TC.unpack(n)}e.deserialize=r;function i(n){return V$(t(n)).toString()}e.checksum=i})(ew||(ew={}));var Zg;(function(e){e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(Zg||(Zg={}));var tw;(function(e){function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:eu.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:2500,helper:!0};if(i==="SpotLight")return{type:i,color:eu.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:2500,helper:!0};if(i==="DirectionalLight")return{type:i,color:eu.white,intensity:1,shadows:!0,size:2500,depth:2500,helper:!0};throw new Error("not implemented")}})(tw||(tw={}));var $g;(function(e){e[e.Front=0]="Front",e[e.Back=1]="Back",e[e.Double=2]="Double"})($g||($g={}));var rw;(function(e){e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(rw||(rw={}));var iw;(function(e){e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(iw||(iw={}));var nw;(function(e){e.defaultData=tt(Le(Le({},iw.defaultData),rw.defaultData),{cloner:null})})(nw||(nw={}));var ps;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Center=3]="Center",e[e.Justify=4]="Justify"})(ps||(ps={}));var Xl;(function(e){e[e.Top=1]="Top",e[e.Center=2]="Center",e[e.Bottom=3]="Bottom"})(Xl||(Xl={}));var Uh;(function(e){e[e.None=1]="None",e[e.Upper=2]="Upper",e[e.Lower=3]="Lower"})(Uh||(Uh={}));var sw;(function(e){e.defaultData={width:100,height:100,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.5,letterSpacing:1,text:"",textTransform:1,color:eu.fromHexAndA(6974058,1),alpha:1,font:"roboto_regular"}})(sw||(sw={}));var aw;(function(e){e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay"})(aw||(aw={}));var CC;(function(e){e[e.Linear=0]="Linear",e[e.Radial=1]="Radial",e[e.Polar=2]="Polar"})(CC||(CC={}));var LC;(function(e){e[e.RepeatWrapping=1e3]="RepeatWrapping",e[e.ClampToEdgeWrapping=1001]="ClampToEdgeWrapping",e[e.MirroredRepeatWrapping=1002]="MirroredRepeatWrapping"})(LC||(LC={}));var OC;(function(e){e[e.UV=0]="UV",e[e.Planar=1]="Planar",e[e.Spherical=2]="Spherical",e[e.Cylindrical=3]="Cylindrical"})(OC||(OC={}));var PC;(function(e){e[e.Simplex=0]="Simplex",e[e.SimplexFractal=1]="SimplexFractal",e[e.Ashima=2]="Ashima",e[e.Fbm=3]="Fbm",e[e.Perlin=4]="Perlin"})(PC||(PC={}));var xh;(function(e){function t(n,s){return n==="light"&&s?r(s):i(n)}e.defaultData=t;function r(n){switch(n){case"basic":return{type:"light",category:"basic",alpha:1,visible:!0,mode:0};case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:.2,g:.2,b:.2,a:1},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}function i(n){switch(n){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:qg.x,type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Vn.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:tt(Le({},Vn.fromHex(6710886)),{a:1}),colorB:tt(Le({},Vn.fromHex(6710886)),{a:1}),colorC:tt(Le({},Vn.fromHex(16777215)),{a:1}),colorD:tt(Le({},Vn.fromHex(16777215)),{a:1}),distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:eu.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}})(xh||(xh={}));var ev;(function(e){function t(a){return!a.layers.some(o=>{if(o.data.type==="texture"&&o.data.projection!==0||o.data.type==="depth"&&!o.data.isWorldSpace||o.data.type==="noise"||o.data.type==="displace")return!0})}e.isMergable=t;function r(){return{layers:new Mn}}e.defaultEmptyData=r;function i(a="layer1",o="layer2"){return n("phong",a,o)}e.defaultData=i;function n(a,o="layer1",l="layer2"){let h=new Mn;return h.push({fi:0,data:xh.defaultData("light",a),id:o}),h.push({fi:1,data:xh.defaultData("color"),id:l}),{layers:h}}e.defaultTwoLayerData=n;function s(a,o="basic",l="layer1",h="layer2"){let d=xh.defaultData("texture");Object.assign(d.texture,{image:a});let p=new Mn;return p.push({fi:0,data:d,id:l}),p.push({fi:1,data:xh.defaultData("light",o),id:h}),{layers:p}}e.defaultTwoLayerTextureData=s})(ev||(ev={}));var tv;(function(e){function t(){return{points:new Mn,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t;function r(n,s){let{points:a}=s;if(a){for(let o of a)if(o.data.position[0]===n[0]&&o.data.position[1]===n[1])return!0}return!1}e.isOverlappingExistingPoint=r;function i(n,s){let a=n.controlNext,o=s.controlPrevious;return n.position[0]===a.position[0]&&n.position[1]===a.position[1]&&s.position[0]===o.position[0]&&s.position[1]===o.position[1]}e.isStraightLine=i})(tv||(tv={}));var ow;(function(e){function t(r){return r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"}e.is2DParametricMesh=t})(ow||(ow={}));var lw;(function(e){function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1};if(r==="VectorGeometry")return{width:100,height:100,type:r,subdivisions:12,shape:tv.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1};throw new Error("not implemented")}e.defaultData=t})(lw||(lw={}));var mp;(function(e){e.identity=tt(Le({},Wx.identity),{hiddenMatrix:rc.identity});function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,s){return{position:Gd.isEqual(n.position,s.position)?null:s.position,rotation:Gd.isEqual(n.rotation,s.rotation)?null:s.rotation,scale:Gd.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:rc.isEqual(n.hiddenMatrix,s.hiddenMatrix)?null:s.hiddenMatrix}}e.diff=i})(mp||(mp={}));var yl;(function(e){e.defaultData=Le({states:new Mn,events:new Mn,visible:!0,raycastLock:!1},mp.identity)})(yl||(yl={}));var DC;(function(e){e.defaultData=Le({type:"Empty"},yl.defaultData)})(DC||(DC={}));var uw;(function(e){e.defaultData=Le(Le({type:"Mesh"},yl.defaultData),nw.defaultData)})(uw||(uw={}));var RC;(function(e){e.defaultData=Le(Le({type:"TextFrame"},yl.defaultData),sw.defaultData)})(RC||(RC={}));var hw;(function(e){e.defaultData=Le(Le(Le({},yl.defaultData),mp.identity),fp.defaultData)})(hw||(hw={}));var NC;(function(e){function t(r){return Le(Le({},yl.defaultData),tw.defaultData(r))}e.defaultData=t})(NC||(NC={}));var IC;(function(e){e.defaultCamera=Le({position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:rc.identity,name:"Play Camera",visible:!0,raycastLock:!1,states:new Mn,events:new Mn},fp.defaultData),e.defaultMeshObject=tt(Le(Le({name:"Rectangle"},yl.defaultData),uw.defaultData),{geometry:lw.defaultData("RectangleGeometry"),material:ev.defaultTwoLayerData("basic","layer1","layer2")})})(IC||(IC={}));var rv;(function(e){function t(i,n){if(n===void 0)return i;let s=Le({},i);return"material"in s&&"material"in n&&n.material&&(s.material=fC(s.material,a=>{if(typeof a!="string")for(let[o,l]of Object.entries(n.material.layers)){let h=a.layers.data(o);h&&Yg(h,l)}}).data),s.materials&&n.materials&&(s.materials=fC(s.materials,a=>{var o,l;for(let h=0;h<s.materials.length;h++){let d=n.materials[h];if(typeof d!="string")for(let[p,f]of Object.entries(d.layers)){let m=(l=(o=a[h])==null?void 0:o.layers)==null?void 0:l.data(p);m&&Yg(m,f)}}}).data),s}e.patchMaterialState=t;function r(i,n){var s,a;if(n===void 0)return i;let o=Le({},i);if(Object.assign(o,mp.merge(o,n)),pp.is(i.type)){o.orthographic=Le({},o.orthographic),o.perspective=Le({},o.perspective);let l=n;((s=l.orthographic)==null?void 0:s.zoom)!==void 0&&(o.orthographic.zoom=l.orthographic.zoom),((a=l.perspective)==null?void 0:a.zoom)!==void 0&&(o.perspective.zoom=l.perspective.zoom)}else if(i.type==="Mesh")o.geometry=Le({},o.geometry),Object.assign(o.geometry,n.geometry),o=t(o,n);else if(Zg.is(i.type)){let l=n;o.intensity!==void 0&&(o.intensity=l.intensity),l.color!==void 0&&(o.color=Vn.clone(l.color))}return o}e.patch=r})(rv||(rv={}));var gn;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.VERTICAL=1]="VERTICAL",e[e.HORIZONTAL=2]="HORIZONTAL",e[e.BOTH=3]="BOTH"})(gn||(gn={}));var va;(function(e){e[e.OFF=0]="OFF",e[e.ROTATE=1]="ROTATE",e[e.PAN=2]="PAN"})(va||(va={}));var ya;(function(e){e[e.NONE=0]="NONE",e[e.EASE=1]="EASE",e[e.BOUNCE=2]="BOUNCE"})(ya||(ya={}));var BC;(function(e){e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,preventScroll:!1,isTouchZoom:!0,orbitTouches:2,panTouches:3}})(BC||(BC={}));var j$=class{static computeTangents(e){e.computeTangents(),console.warn("THREE.BufferGeometryUtils: .computeTangents() has been removed. Use BufferGeometry.computeTangents() instead.")}static mergeBufferGeometries(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},a={},o=e[0].morphTargetsRelative,l=new st,h=0;for(let d=0;d<e.length;++d){let p=e[d],f=0;if(r!==(p.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let m in p.attributes){if(!i.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;s[m]===void 0&&(s[m]=[]),s[m].push(p.attributes[m]),f++}if(f!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". Make sure all geometries have the same number of attributes."),null;if(o!==p.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let m in p.morphAttributes){if(!n.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+".  .morphAttributes must be consistent throughout all geometries."),null;a[m]===void 0&&(a[m]=[]),a[m].push(p.morphAttributes[m])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(p.userData),t){let m;if(r)m=p.index.count;else if(p.attributes.position!==void 0)m=p.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+d+". The geometry must have either an index or a position attribute"),null;l.addGroup(h,m,d),h+=m}}if(r){let d=0,p=[];for(let f=0;f<e.length;++f){let m=e[f].index;for(let v=0;v<m.count;++v)p.push(m.getX(v)+d);d+=e[f].attributes.position.count}l.setIndex(p)}for(let d in s){let p=this.mergeBufferAttributes(s[d]);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" attribute."),null;l.setAttribute(d,p)}for(let d in a){let p=a[d][0].length;if(p===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(let f=0;f<p;++f){let m=[];for(let w=0;w<a[d].length;++w)m.push(a[d][w][f]);let v=this.mergeBufferAttributes(m);if(!v)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+d+" morphAttribute."),null;l.morphAttributes[d].push(v)}}return l}static mergeBufferAttributes(e){let t,r,i,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),a=0;for(let o=0;o<e.length;++o)s.set(e[o].array,a),a+=e[o].array.length;return new dt(s,r,i)}static interleaveAttributes(e){let t,r=0,i=0;for(let h=0,d=e.length;h<d;++h){let p=e[h];if(t===void 0&&(t=p.array.constructor),t!==p.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;r+=p.array.length,i+=p.itemSize}let n=new fu(new t(r),i),s=0,a=[],o=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let h=0,d=e.length;h<d;h++){let p=e[h],f=p.itemSize,m=p.count,v=new lu(n,f,s,p.normalized);a.push(v),s+=f;for(let w=0;w<m;w++)for(let S=0;S<f;S++)v[l[S]](w,p[o[S]](w))}return a}static estimateBytesUsed(e){let t=0;for(let i in e.attributes){let n=e.getAttribute(i);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}let r=e.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}static mergeVertices(e,t=1e-4){t=Math.max(t,Number.EPSILON);let r={},i=e.getIndex(),n=e.getAttribute("position"),s=i?i.count:n.count,a=0,o=Object.keys(e.attributes),l={},h={},d=[],p=["getX","getY","getZ","getW"];for(let w=0,S=o.length;w<S;w++){let y=o[w];l[y]=[];let g=e.morphAttributes[y];g&&(h[y]=new Array(g.length).fill().map(()=>[]))}let f=Math.log10(1/t),m=Math.pow(10,f);for(let w=0;w<s;w++){let S=i?i.getX(w):w,y="";for(let g=0,_=o.length;g<_;g++){let b=o[g],T=e.getAttribute(b),A=T.itemSize;for(let M=0;M<A;M++)y+=`${~~(T[p[M]](S)*m)},`}if(y in r)d.push(r[y]);else{for(let g=0,_=o.length;g<_;g++){let b=o[g],T=e.getAttribute(b),A=e.morphAttributes[b],M=T.itemSize,L=l[b],D=h[b];for(let C=0;C<M;C++){let N=p[C];if(L.push(T[N](S)),A)for(let U=0,V=A.length;U<V;U++)D[U].push(A[U][N](S))}}r[y]=a,d.push(a),a++}}let v=e.clone();for(let w=0,S=o.length;w<S;w++){let y=o[w],g=e.getAttribute(y),_=new g.array.constructor(l[y]),b=new dt(_,g.itemSize,g.normalized);if(v.setAttribute(y,b),y in h)for(let T=0;T<h[y].length;T++){let A=e.morphAttributes[y][T],M=new A.array.constructor(h[y][T]),L=new dt(M,A.itemSize,A.normalized);v.morphAttributes[y][T]=L}}return v.setIndex(d),v}static toTrianglesDrawMode(e,t){if(t===JO)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===AE||t===RV){let r=e.getIndex();if(r===null){let a=[],o=e.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);e.setIndex(a),r=e.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e}let i=r.count-2,n=[];if(t===AE)for(let a=1;a<=i;a++)n.push(r.getX(0)),n.push(r.getX(a)),n.push(r.getX(a+1));else for(let a=0;a<i;a++)a%2==0?(n.push(r.getX(a)),n.push(r.getX(a+1)),n.push(r.getX(a+2))):(n.push(r.getX(a+2)),n.push(r.getX(a+1)),n.push(r.getX(a)));n.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=e.clone();return s.setIndex(n),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}static computeMorphedAttributes(e){if(e.geometry.isBufferGeometry!==!0)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;let t=new O,r=new O,i=new O,n=new O,s=new O,a=new O,o=new O,l=new O,h=new O;function d(J,Y,ee,ie,ue,we,q,Se,me){t.fromBufferAttribute(ee,we),r.fromBufferAttribute(ee,q),i.fromBufferAttribute(ee,Se);let re=J.morphTargetInfluences;if(Y.morphTargets&&ie&&re){o.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(let K=0,ne=ie.length;K<ne;K++){let ae=re[K],fe=ie[K];ae!==0&&(n.fromBufferAttribute(fe,we),s.fromBufferAttribute(fe,q),a.fromBufferAttribute(fe,Se),ue?(o.addScaledVector(n,ae),l.addScaledVector(s,ae),h.addScaledVector(a,ae)):(o.addScaledVector(n.sub(t),ae),l.addScaledVector(s.sub(r),ae),h.addScaledVector(a.sub(i),ae)))}t.add(o),r.add(l),i.add(h)}J.isSkinnedMesh&&(J.boneTransform(we,t),J.boneTransform(q,r),J.boneTransform(Se,i)),me[we*3+0]=t.x,me[we*3+1]=t.y,me[we*3+2]=t.z,me[q*3+0]=r.x,me[q*3+1]=r.y,me[q*3+2]=r.z,me[Se*3+0]=i.x,me[Se*3+1]=i.y,me[Se*3+2]=i.z}let p=e.geometry,f=e.material,m,v,w,S=p.index,y=p.attributes.position,g=p.morphAttributes.position,_=p.morphTargetsRelative,b=p.attributes.normal,T=p.morphAttributes.position,A=p.groups,M=p.drawRange,L,D,C,N,U,V,k,G,$=new Float32Array(y.count*y.itemSize),W=new Float32Array(b.count*b.itemSize);if(S!==null)if(Array.isArray(f))for(L=0,C=A.length;L<C;L++)for(U=A[L],V=f[U.materialIndex],k=Math.max(U.start,M.start),G=Math.min(U.start+U.count,M.start+M.count),D=k,N=G;D<N;D+=3)m=S.getX(D),v=S.getX(D+1),w=S.getX(D+2),d(e,V,y,g,_,m,v,w,$),d(e,V,b,T,_,m,v,w,W);else for(k=Math.max(0,M.start),G=Math.min(S.count,M.start+M.count),L=k,C=G;L<C;L+=3)m=S.getX(L),v=S.getX(L+1),w=S.getX(L+2),d(e,f,y,g,_,m,v,w,$),d(e,f,b,T,_,m,v,w,W);else if(y!==void 0)if(Array.isArray(f))for(L=0,C=A.length;L<C;L++)for(U=A[L],V=f[U.materialIndex],k=Math.max(U.start,M.start),G=Math.min(U.start+U.count,M.start+M.count),D=k,N=G;D<N;D+=3)m=D,v=D+1,w=D+2,d(e,V,y,g,_,m,v,w,$),d(e,V,b,T,_,m,v,w,W);else for(k=Math.max(0,M.start),G=Math.min(y.count,M.start+M.count),L=k,C=G;L<C;L+=3)m=L,v=L+1,w=L+2,d(e,f,y,g,_,m,v,w,$),d(e,f,b,T,_,m,v,w,W);let H=new Je($,3),X=new Je(W,3);return{positionAttribute:y,normalAttribute:b,morphedPositionAttribute:H,morphedNormalAttribute:X}}},L1={type:"change"},zC={type:"changeZoom"},W$={type:"changePan"},th={type:"start"},ud={type:"end"},FC=/iPad|iPhone|iPod/.test(navigator.userAgent)||J_&&"ontouchend"in document,O1=new Gr,J$=new Q,Y$=2*Math.PI,q$=1e-8,X$=.01,UC=2,P1=.125,kC=2,D1=1,R1=1,N1=.1,HC;(function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.ROTATE=3]="ROTATE",e[e.DOLLY=4]="DOLLY",e[e.PAN=5]="PAN"})(HC||(HC={}));var GC;(function(e){e[e.NONE=-1]="NONE",e[e.ROTATE=0]="ROTATE",e[e.DOLLY=1]="DOLLY",e[e.PAN=2]="PAN",e[e.TOUCH_ROTATE=3]="TOUCH_ROTATE",e[e.TOUCH_PAN=4]="TOUCH_PAN",e[e.TOUCH_DOLLY_PAN=5]="TOUCH_DOLLY_PAN",e[e.TOUCH_DOLLY_ROTATE=6]="TOUCH_DOLLY_ROTATE"})(GC||(GC={}));var Q$=class extends Kn{constructor(e,t){super();this.object=e,this.domElement=t,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=gn.DEFAULT,this.panLimitsMode=gn.DEFAULT,this.rotationSoftLimit=ya.BOUNCE,this.panSoftLimit=ya.BOUNCE,this.hoverRotatePanMode=va.OFF,this.zoomLimitsEnabled=!1,this.preventScroll=!0,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,hs.DOLLY_ROTATE,hs.PAN],this.offset=new O,this.eye=new O,this.lastPosition=new O,this.lastQuaternion=new Gr,this.current=new Q,this.overShoot=new Q,this.overRatio=new Q,this.spherical=new PT,this.sphericalDelta=new PT,this.panOffset=new O,this.panLeftV=new O,this.panUpV=new O,this.panV=new O,this.rotateStart=new Q,this.rotateEnd=new Q,this.rotateDelta=new Q,this.panStart=new Q,this.panEnd=new Q,this.panDelta=new Q,this.dollyStart=new Q,this.dollyEnd=new Q,this.dollyDelta=new Q,this.rotationRangeFactor=new Q,this.panRangeFactor=new Q,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isFirstHover=!0,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.update=()=>{let r=this.object.position;this.offset.copy(r).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==gn.DEFAULT&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==gn.HORIZONTAL&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==gn.VERTICAL||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==gn.DEFAULT&&(this.target.applyQuaternion(O1.copy(this.object.quaternion).invert()),this.panOffset.applyQuaternion(O1),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(this.object.quaternion),this.panOffset.applyQuaternion(this.object.quaternion)),this.panLimitsMode===gn.HORIZONTAL&&(this.panOffset.y=0),this.panLimitsMode===gn.VERTICAL&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-P1),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),r.copy(this.target).add(this.offset);let i=this.spherical.phi%Y$;return this.eye.copy(this.offset).normalize(),this.object.up.copy(Rt.DefaultUp).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-P1,this.sphericalDelta.phi*=1-P1):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>X$||8*(1-this.lastQuaternion.dot(this.object.quaternion))>q$?(this.dispatchEvent(L1),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=r=>{this.enabled!==!1&&(this.isPointerDown=!0,jt.length===0&&(this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)),Z$(r),r.pointerType==="touch"?this.onPointerDownTouch(r):this.onPointerDownMouse(r))},this.onPointerMove=r=>{this.enabled!==!1&&(r.pointerType==="touch"?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r))},this.onPointerUp=r=>{jC(r),this.isPointerDown=!1,jt.length===0&&(this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)),this.dispatchEvent(ud),this.state=-1},this.onPointerCancel=r=>{jC(r)},this.onPointerDownMouse=r=>{let i;switch(this.useKeyEvents?i=this.mouseButtons[r.button]:i=this.mouseButtonsPlay[r.button],i){case 0:if(r.altKey===!0&&!r.shiftKey&&!Dm(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(Dm(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(Dm(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(th)},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}},this.onPointerDownTouch=r=>{switch(WC(r),this.touches[jt.length-1]){case hs.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case hs.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case hs.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case hs.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}this.state!==-1&&this.dispatchEvent(th)},this.onPointerMoveTouch=r=>{switch(WC(r),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=CP(()=>this.dispatchEvent(ud),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||((this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth||this.preventScroll)&&r.preventDefault(),this.dispatchEvent(th),this.handleMouseWheel(r),this.dispatchEndDebounced())},this.onGesture=r=>{if(this.enabled!==!1)if(r.preventDefault(),r.type==="gesturechange"){if(this.enableZoom===!1)return;this.dispatchEvent(th),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update()}else this.dispatchEvent(ud)},this.onContextMenu=r=>{this.enabled!==!1&&r.preventDefault()},this.onTouchMove=r=>{(r.touches.length>1||this.preventScroll)&&r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key)},this.onKeyUp=()=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&this.onPointerUp(jt[0]))},this.onPointerHover=r=>{if(!(pJ||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===va.PAN&&this.isPanOverShoot||this.hoverRotatePanMode===va.ROTATE&&this.isRotateOverShoot)){if(window.clearTimeout(this.timerHover),this.isPointerDown=!0,this.isFirstHover){let i={clientX:window.innerWidth/2,clientY:window.innerHeight/2};this.hoverRotatePanMode===va.PAN?this.handleMouseDownPan(i):this.hoverRotatePanMode===va.ROTATE&&this.handleMouseDownRotate(i),this.isFirstHover=!1}this.hoverRotatePanMode===va.PAN?this.handleMouseMovePan(r,N1):this.hoverRotatePanMode===va.ROTATE&&this.handleMouseMoveRotate(r,N1),this.timerHover=window.setTimeout(()=>{this.isPointerDown=!1},30)}},this.object=e,this.domElement=t,this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.connect(),this.update()}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(L1),this.isFirstHover=!0,this.update(),this.state=-1}resetTo(e,t,r){this.target.copy(e),this.object.position.copy(t),this.object.zoom=r,this.object.updateProjectionMatrix(),this.dispatchEvent(L1),this.update(),this.state=-1}fromJSON(e){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.isFirstHover=!0,this.hoverRotatePanMode!==va.OFF&&this.domElement.addEventListener("pointermove",this.onPointerHover),N1=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,UC=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let t=this.object.getTarget().applyQuaternion(O1.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+t.y,this.maxV=e.panVerticalOffset.max+t.y,this.minH=-e.panHorizontalOffset.min+t.x,this.maxH=e.panHorizontalOffset.max+t.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Vo(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Vo(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Vo(this.spherical.theta-e.rotationHorizontalOffset.min),this.maxTheta=Vo(this.spherical.theta+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,this.preventScroll=e.preventScroll,e.orbitTouches===1&&(this.touches[0]=hs.ROTATE),e.panTouches===1&&(this.touches[0]=hs.PAN),e.orbitTouches===2&&(this.touches[1]=hs.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=hs.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=hs.ROTATE),e.panTouches===3&&(this.touches[2]=hs.PAN)}connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),FC||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchmove",this.onTouchMove),this.domElement.addEventListener("touchend",this.onTouchEnd)}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointercancel",this.onPointerCancel),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),FC||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,s,a,o){this.overShoot.set(0,0);let l,h,d;e instanceof O?(l=e.x,h=e.y,this.current.set(this.target.x,this.target.y),d=!0):(l=e.theta,h=e.phi,this.current.set(Vo(this.spherical.theta),Vo(this.spherical.phi)),d=!1),r===ya.NONE&&(this.current.x+=l,this.current.y+=h),(t===gn.BOTH||t===gn.HORIZONTAL)&&(!d&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x),i===n&&(l=0)),(t===gn.BOTH||t===gn.VERTICAL)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y),s===a&&(h=0)),d||(this.overShoot.x=Vo(this.overShoot.x),this.overShoot.y=Vo(this.overShoot.y)),r!==ya.NONE?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===ya.EASE&&(this.overRatio.x=VC(Math.abs(this.overRatio.x)),this.overRatio.y=VC(Math.abs(this.overRatio.y))),this.isPointerDown||r===ya.EASE?r===ya.BOUNCE&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(l*this.overShoot.x<0&&(l*=1-this.overRatio.x),h*this.overShoot.y<0&&(h*=1-this.overRatio.y)):r===ya.BOUNCE&&(!d&&(this.overRatio.x>.002||this.overRatio.y>.002)||d&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(l=this.overShoot.x*.05,h=this.overShoot.y*.05,d?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):d?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,h+=this.overShoot.y),e instanceof O?(e.x=l,e.y=h):(e.theta=l,e.phi=h)}setEnableDampingSpeed(e){this.enableDamping=e,D1=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*UC}getZoomScale(){return Math.pow(.95,kC)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrix),this.panUp(2*t*n/r.clientHeight,this.object.matrix)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix));this.dispatchEvent(W$)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(zC)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(zC)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(th),this.dollyOut(e),this.dispatchEvent(ud)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(th),this.dollyIn(e),this.dispatchEvent(ud)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(D1*t).rotateAround(J$,-this.object.angleOffsetFromUp);let r=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/r.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/r.clientHeight),this.rotateStart.copy(this.rotateEnd),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(R1*t),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd),this.update()}handleMouseWheel(e){if(!this.gesture)this.gesture=!0,this.isTrackpadScroll=K$(e),this.isPointerDown=!0;else{if(this.isTrackpadScroll===!1||Dm(e)){if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale())}else{if(this.enablePan===!1)return;this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(R1),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y)}this.update()}window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.isPointerDown=!1,this.gesture=!1,this.isTrackpadScroll=!1},30)}handleTouchStartRotate(){if(jt.length===2){let e=.5*(jt[0].pageX+jt[1].pageX),t=.5*(jt[0].pageY+jt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(jt[0].pageX,jt[0].pageY)}handleTouchStartPan(){if(jt.length===2){let e=.5*(jt[0].pageX+jt[1].pageX),t=.5*(jt[0].pageY+jt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(jt[0].pageX,jt[0].pageY)}handleTouchStartDolly(){let e=jt[0].pageX-jt[1].pageX,t=jt[0].pageY-jt[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(jt.length===2){let r=I1(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==jt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(D1);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(jt.length===2){let t=I1(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==jt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(R1),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=I1(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,kC)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}};function Vo(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function VC(e){return 1-Math.pow(1-e,4)}function K$(e){return e.wheelDeltaY===0||e.deltaY===0?J_&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var jt=[],iv={};function Z$(e){jt.push(e)}function jC(e){delete iv[e.pointerId];for(let t=0;t<jt.length;t++)if(jt[t].pointerId===e.pointerId){jt.splice(t,1);return}}function WC(e){let t=iv[e.pointerId];t===void 0&&(t=new Q,iv[e.pointerId]=t),t.set(e.pageX,e.pageY)}function I1(e){let t=e.pointerId===jt[0].pointerId?jt[1]:jt[0];return iv[t.pointerId]}var $$=3,Ms=5855577,eee=2857471,JC=15711266,tee=class extends tJ{constructor(){super();this.layers.enable($$)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new Ts({color:65280,linewidth:10}),t=new O(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new O(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new O().addVectors(t,r.multiplyScalar(i)),s=new st;return s.setFromPoints([t,n]),new $h(s,e)}},ri=class extends Ai{constructor({char:e,originalChar:t,fontFamily:r,letterSpacing:i,fontSize:n,LOD:s=16},a=new ou({color:0,opacity:1,visible:!0,transparent:!0,side:bi})){let o=ri.loadChar(e,r,s);super(o.geometry,a);this.char=e,this.originalChar=t!=null?t:e,this.fontFamily=r,this.letterSpacing=i,this.fontSize=n,this.LOD=s,this.resolution=o.resolution,this.glyphsHa=o.glyphsHa,this.localPosition=new Q,this.charSize=0,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}static get FONTS_PATH(){return ri._fontPath}static set FONTS_PATH(e){ri._fontPath=e}updatePosition(e,t){this.localPosition.copy(e);let r=new O(this.localPosition.x,-this.localPosition.y,0);this.position.copy(r).add(t)}updateFontSize(e){let t=e/this.resolution;this.fontSize=e,this.scale.set(this.fontSize,this.fontSize,1),this.charSize=this.glyphsHa*t*this.letterSpacing}updateFontFamily(e){if(this.fontFamily===e)return;this.fontFamily=e;let t=ri.loadChar(this.char,e,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateChar(e){if(this.char===e)return;this.char=e;let t=ri.loadChar(e,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateLetterSpacing(e){this.letterSpacing!==e&&(this.letterSpacing=e,this.updateFontSize(this.fontSize))}updateLOD(e){if(this.LOD===e)return;this.LOD=e;let t=ri.loadChar(this.char,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}clone(){let e={char:this.char,originalChar:this.originalChar,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,LOD:this.LOD};return new ri(e).copy(this)}static loadFont(e){return new Promise(function(t,r){ri.fontCache[e]?t(ri.fontCache[e]):new I7().load(ri.FONTS_PATH+e+".json",i=>{ri.fontCache[e]=i,t(i)},void 0,r)})}static loadChar(e,t,r){if(ri.charCache[e]){if(ri.charCache[e][r]&&ri.charCache[e][r].fontFamily===t)return ri.charCache[e][r]}else ri.charCache[e]={};let i=ri.fontCache[t],n=i.generateShapes(e,1);return ri.charCache[e][r]={geometry:new z_(n,r),fontFamily:t,resolution:i.data.resolution,glyphsHa:i.data.glyphs[e].ha},ri.charCache[e][r]}},kn=ri;kn.charCache={},kn.fontCache={},kn._fontPath="/_assets/_fonts/";var ree=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a;let o=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),l=o.width/2,h=(i=o.radiusTop)!=null?i:l,d=(n=o.radiusBottom)!=null?n:l;return h===d?(h=l,d=l):h>d?(h=l,d=d*l/h):(h=h*l/d,d=l),{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs((s=o.height)!=null?s:o.width),depth:Math.abs((a=o.depth)!=null?a:o.width),radiusTop:h,radiusBottom:d})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,radiusTop:h,radiusBottom:d,cornerRadius:p,cornerSegments:f,hollow:m}=e.parameters,v;return p||m?v=new qP(h,d,i,n,s,a,o,l*Math.PI/180,p,p,f,m):v=new N_(h,d,i,n,s,a,o,l*Math.PI/180),v.scale(1,1,r/t),Object.assign(v,{userData:tt(Le({},e),{type:"CylinderGeometry"})})}};function jo(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function YC(e){return new Q(e.y,-e.x)}var qP=class extends st{constructor(e,t,r,i,n,s,a,o,l,h,d,p,f=!1){super();this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,s&&(l=0,h=0);let m=[],v=[],w=[],S=[],y=0,g=r/2,_=new O,b=new O;f&&e==0&&(e=l),f&&t==0&&(t=h);let T=new Q(e,g),A=new Q(t,-g),M=null,L=null,D=null,C=null,N=T.clone().sub(A),U=0,V=0,k=0;p>0&&(U=Math.min(e,t)*(1-p),V=e-U,k=t-U);let G=T.clone();G.x-=U;let $=Math.PI-N.angle(),W=N.angle(),H=Math.tan(W/2),X=Math.tan($/2),J=H+X,Y=p?J:X,ee=p?J:H;if(l=Math.min(l,(e-V)/Y,N.length()/J),h=Math.min(h,(t-k)/ee,N.length()/J),l>0){let me=l/H;M=T.clone().sub(new Q(me,l)),p&&(D=M.clone(),D.x-=U-J*l),T.sub(N.clone().setLength(me))}if(h>0){let me=h/X;L=A.clone().sub(new Q(me,-h)),A.add(N.clone().setLength(me)),p&&(C=L.clone(),C.x-=U-J*h,G.sub(N.clone().setLength(me)))}N=T.clone().sub(A);let ie=N.length()<.5,ue=[];for(let me=0;me<=i;me++){let re=[],K=me/i,ne=K*o+a,ae=new Q(Math.sin(ne),Math.cos(ne));C&&L?(we(re,K,ae,$,h,C,-1,!0),we(re,K,ae,W,h,L,-1,!1)):L?(q(re,ae,L.x,0,-1),we(re,K,ae,W,h,L,-1,!1)):s||q(re,ae,t,k,-1);let fe=YC(N).normalize();if(jo(fe,ae,_),!ie)for(let pe=0;pe<=n;pe++){let xe=pe/n,Ae=N.clone().multiplyScalar(xe).add(A);jo(Ae,ae,b),v.push(b.x,b.y,b.z),w.push(_.x,_.y,_.z),S.push(K,.5+b.y/r),re.push(y++)}if(D&&M?(we(re,K,ae,$,l,M,1,!1),we(re,K,ae,W,l,D,1,!0)):M?(we(re,K,ae,$,l,M,1,!1),q(re,ae,M.x,0,1)):s||q(re,ae,e,V,1),p&&!ie){let pe=YC(N).multiplyScalar(-1).normalize();jo(pe,ae,_);for(let xe=0;xe<=n;xe++){let Ae=xe/n,F=N.clone().multiplyScalar(-Ae).add(G);jo(F,ae,b),v.push(b.x,b.y,b.z),w.push(_.x,_.y,_.z),S.push(K,.5+b.y/r),re.push(y++)}}p&&!s&&re.push(re[0]),ue.push(re)}for(let me=0;me<ue.length-1;me++)for(let re=0;re<ue[0].length-1;re++){if(s&&p&&re==n)continue;let K=ue[me][re],ne=ue[me+1][re],ae=ue[me+1][re+1],fe=ue[me][re+1],pe=v[ae*3+0],xe=v[ae*3+2];m.push(K,ne,fe),(pe!=0||xe!=0)&&m.push(ne,ae,fe)}o<Math.PI*2&&(Se(-1,ue[0],a),Se(1,ue[ue.length-1],a+o)),this.setIndex(m),this.setAttribute("position",new Je(v,3)),this.setAttribute("normal",new Je(w,3)),this.setAttribute("uv",new Je(S,2));function we(me,re,K,ne,ae,fe,pe,xe){for(let Ae=0;Ae<d+1;Ae++){let F=Ae/d,B=pe<0?F:1-F;xe&&(B-=1),B*=ne;let de=new Q(Math.sin(B),Math.cos(B)*pe),Oe=de.clone().multiplyScalar(ae).add(fe);jo(Oe,K,b),v.push(b.x,b.y,b.z),jo(de,K,_),w.push(_.x,_.y,_.z),S.push(re,.5+b.y/r),me.push(y++)}}function q(me,re,K,ne,ae){let fe=new O,pe=new Q,xe=[K,ne];ae<0&&xe.reverse();for(let Ae of xe)pe.set(Ae,g*ae),jo(pe,re,fe),v.push(fe.x,fe.y,fe.z),w.push(0,ae,0),S.push(.5,.5),me.push(y++)}function Se(me,re,K){let ne=new Q(Math.sin(K),Math.cos(K)),ae=new Q(-Math.cos(K),Math.sin(K)),fe=new O,pe=me<0?(F,B,de)=>m.push(F,B,de):(F,B,de)=>m.push(F,de,B),xe=new Q((e+t+V+k)/4,0);jo(xe,ne,fe),v.push(fe.x,fe.y,fe.z),w.push(ae.x,0,ae.y),S.push(.5,.5);let Ae=y++;for(let F of re){let B=v.slice(F*3,F*3+3);v.push(...B),w.push(ae.x,0,ae.y);let de=S.slice(F*2,F*2+2);S.push(...de),y++}for(let F=Ae+1;F<y-1;F++)pe(Ae,F,F+1);pe(Ae,y-1,Ae+1)}}},iee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,cornerRadiusTop:h,cornerRadiusBottom:d,cornerSegments:p}=e.parameters,f;return h>0||d>0||l<360?f=new qP(0,t/2,i,n,s,a,o,l*Math.PI/180,h,d,p,0,!0):f=new w3(t/2,i,n,s,a),f.scale(1,1,r/t),Object.assign(f,{userData:tt(Le({},e),{type:"ConeGeometry"})})}},nee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:s,depthSegments:a,cornerRadius:o,cornerSegments:l}=e.parameters,h;return o==0?h=new fl(t,r,i,n,s,a):h=new see(t,r,i,n,s,a,o,l),Object.assign(h,{userData:tt(Le({},e),{type:"CubeGeometry"})})}},B1=Math.PI/2,see=class extends st{constructor(e=1,t=1,r=1,i=1,n=1,s=1,a=0,o=4){super();this.type="BoxBufferGeometry";let l=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),a=Math.min(a,e/2,t/2,r/2);let h=[],d=[],p=[],f=[],m=0,v=0;w("z","y","x",-1,-1,r,t,e,s,n,0),w("z","y","x",1,-1,r,t,-e,s,n,1),w("x","z","y",1,1,e,r,t,i,s,2),w("x","z","y",1,-1,e,r,-t,i,s,3),w("x","y","z",1,-1,e,t,r,i,n,4),w("x","y","z",-1,-1,e,t,-r,i,n,5),a>0&&(S("z","y","x",-1,-1,1,r,t,e,s,0),S("z","y","x",1,-1,-1,r,t,e,s,1),S("z","y","x",-1,1,-1,r,t,e,s,1),S("z","y","x",1,1,1,r,t,e,s,0),S("x","y","z",-1,-1,-1,e,t,r,i,0),S("x","y","z",1,-1,1,e,t,r,i,1),S("x","y","z",-1,1,1,e,t,r,i,0),S("x","y","z",1,1,-1,e,t,r,i,1),S("y","x","z",-1,-1,1,t,e,r,n,0),S("y","x","z",1,-1,-1,t,e,r,n,1),S("y","x","z",1,1,1,t,e,r,n,1),S("y","x","z",-1,1,-1,t,e,r,n,0),y(1,1,1),y(-1,1,1),y(1,-1,1),y(-1,-1,1),y(1,1,-1),y(-1,1,-1),y(1,-1,-1),y(-1,-1,-1)),this.setIndex(h),this.setAttribute("position",new Je(d,3)),this.setAttribute("normal",new Je(p,3)),this.setAttribute("uv",new Je(f,2));function w(g,_,b,T,A,M,L,D,C,N,U){let V=(M-2*a)/C,k=(L-2*a)/N,G=M/2-a,$=L/2-a,W=D/2,H=C+1,X=N+1,J=0,Y=0,ee=new O;for(let ie=0;ie<X;ie++){let ue=ie*k-$;for(let we=0;we<H;we++){let q=we*V-G;ee[g]=q*T,ee[_]=ue*A,ee[b]=W,d.push(ee.x,ee.y,ee.z),ee[g]=0,ee[_]=0,ee[b]=D>0?1:-1,p.push(ee.x,ee.y,ee.z),f.push(we/C),f.push(1-ie/N),J+=1}}for(let ie=0;ie<N;ie++)for(let ue=0;ue<C;ue++){let we=m+ue+H*ie,q=m+ue+H*(ie+1),Se=m+(ue+1)+H*(ie+1),me=m+(ue+1)+H*ie;h.push(we,q,me),h.push(q,Se,me),Y+=6}l.addGroup(v,Y,U),v+=Y,m+=J}function S(g,_,b,T,A,M,L,D,C,N,U){let V=(L-2*a)/N,k=L/2-a,G=D/2-a,$=C/2,W=N+1,H=0,X=0,J=new O,Y=new O;for(let ee=0;ee<o+1;ee++){let ie=ee/o*B1,ue=Math.sin(ie)*a,we=(1-Math.cos(ie))*a,q=Math.sin(ie),Se=Math.cos(ie);J[_]=(G+ue)*A,J[b]=($-we)*M,Y[g]=0,Y[_]=q*Math.sign(J[_]),Y[b]=Se*Math.sign(J[b]);for(let me=0;me<W;me++){let re=me*V-k;J[g]=re*T,d.push(J.x,J.y,J.z),p.push(Y.x,Y.y,Y.z),f.push(me/N),f.push(0),H+=1}}for(let ee=0;ee<o;ee++)for(let ie=0;ie<N;ie++){let ue=m+ie+W*ee,we=m+ie+W*(ee+1),q=m+(ie+1)+W*(ee+1),Se=m+(ie+1)+W*ee;h.push(ue,we,Se),h.push(we,q,Se),X+=6}l.addGroup(v,X,U),v+=X,m+=H}function y(g,_,b){let T=new O,A=new O(e/2,t/2,r/2);A.subScalar(a);let M=[],L=g*_*b>0?(C,N,U)=>h.push(C,N,U):(C,N,U)=>h.push(C,U,N);for(let C=0;C<=o;C++){let N=[],U=B1*(1-C/o),V=Math.cos(U),k=Math.sin(U),G=0;for(let $=0;$<=C;$++){let W=Math.cos(G),H=Math.sin(G);T.x=V*W,T.y=k,T.z=V*H;let X=A.clone().addScaledVector(T,a);d.push(g*X.x,_*X.y,b*X.z),p.push(g*T.x,_*T.y,b*T.z),f.push(0,0),N.push(m++),G+=B1/C}M.push(N)}let D=M.length-1;for(let C=0;C<D;C++){let N=M[C],U=M[C+1],V=N.length-1;L(N[0],U[1],U[0]);for(let k=1;k<=V;k++)L(N[k-1],N[k],U[k]),L(N[k],U[k+1],U[k])}}}},fS=class extends st{constructor(e,t,r,i=1,n=.2,s=4){super();this.type="PolyhedronGeometryRound";let a=[],o=[],l=[];h(),d(),this.setAttribute("position",new Je(a,3)),this.setAttribute("normal",new Je(l,3)),this.setAttribute("uv",new Je(o,2));return;function h(){var p;n=Math.min(1-1e-5,n),n==0&&(s=0);let f={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],m=new O,v=m.clone(),w=new ai,S=n*i,y=i-S,g=s+1,_=new O,b=(H,X)=>_.subVectors(H,X).normalize(),T=(H,X)=>Array(H).fill(void 0).map(X),A=T(e.length/3,(H,X)=>new O().fromArray(e,X*3).setLength(i)),M=[],L=1e6;for(let H=0;H<A.length;H++){let X=A[H],J=[],Y,ee,ie,ue=1e10,we=-1;for(;(we=t.indexOf(H,we+1))!=-1;){let re=we-we%3;Y=t[re+(we+1)%3],ee=t[re+(we+2)%3],ie=X.distanceToSquared(A[Y]),ue=Math.min(ue,ie),J.push([Y,ee,ie])}ue+=1e-6;let q=[],Se=0,me=J.length;for(let re=0;re<me;re++){[Y,ee,ie]=J[Se];let K=((p=M[Y])==null?void 0:p.includes(H))==!0;ie<=ue&&q.push(Y+ +K*L),Se=J.findIndex(ne=>ne[0]==ee)}M.push(q)}let D=[];{let H=0,X=0,J,Y,ee=f==3;for(let ie=0;ie<=s;ie++){J=ie*(ie+1)/2,Y=(ie+1)*(ie+2)/2;for(let ue=0;ue<s-ie;ue++)[H,X]=[J+ue+ie+2,Y+ue+ie+3],D.push(J,Y,...ee?[X,J]:[H,Y],X,H),[J,Y]=[H,X];D.push(J,Y,J+s+2)}}let C=m.clone(),N=m.clone(),U=m.clone(),V=m.clone(),k=m.clone(),G=[],$=T(A.length,()=>T(f,()=>m.clone()));for(let H=0;H<A.length;H++){m.copy(A[H]).normalize(),C.copy(m).multiplyScalar(y);let X=M[H];for(let q=0;q<X.length;q++){let Se=X[q],me=X[(q+1)%f];w.setFromPointsAndIndices(A,H,Se%L,me%L),w.b.sub(w.a).setLength(1e10).add(w.a),w.c.sub(w.a).setLength(1e10).add(w.a),w.closestPointToPoint(C,$[H][q])}let J=[],Y=[],ee=[],ie=new O;s==0&&[...$[H]].reduce((q,Se)=>q.add(Se),ie).multiplyScalar(1/f);for(let q=0;q<f;q++){let Se=[],me=(q-1+f)%f,re=$[H][me],K=$[H][q];m.copy(re).sub(C),v.copy(K).sub(C);let ne=C.angleTo(m),ae=m.angleTo(v),fe=Math.cos(ne)*S;s==0?N.copy(ie):N.copy(C).setLength(y+fe),Y.push(fe);let pe=[N,re,K];for(let xe=0;xe<2;xe++){let Ae=pe[xe],F=pe[xe+1];V.subVectors(Ae,C),k.subVectors(F,C),U.crossVectors(V,k).normalize();for(let B=0;B<g;B++){let de=[ne,ae][xe]*B/g;m.copy(V).applyAxisAngle(U,de).add(C),J.push(m.clone()),xe&&(b(m,C),Se.push([B==0?Ae:m.clone(),_.clone()]))}xe&&(b(F,C),Se.push([F,_.clone()]))}ee.push(Se)}G.push(ee);let ue=2*g,we=2;for(let q=0;q<f;q++){let Se=ue*q,me=ue*((q+1)%f),re=[J[Se]];for(let ne=1;ne<g;ne++){V=J[Se+ne],k=J[me+ne],re.push(V);for(let ae=1,fe=ne-we+1;ae<=fe;ae++)m.lerpVectors(V,k,ae/(fe+1)),m.sub(C).setLength(Y[q]).add(C),re.push(m.clone());re.push(k)}for(let ne=0;ne<g;ne++)re.push(J[ne+g+Se]);re.push(J[me+g]);let K=D.map(ne=>re[ne]);a.push(...K.map(ne=>[ne.x,ne.y,ne.z]).flat()),l.push(...K.map(ne=>(b(ne,C),[_.x,_.y,_.z])).flat())}}let W=[];for(let H=0;H<M.length;H++)for(let X=0;X<f;X++){let J=M[H][X];if(J<L){let Y=M[J].findIndex(ue=>ue%L==H),ee=G[H][X],ie=G[J][Y];for(let ue=0;ue<g;ue++){let we=ee[ue],q=ie[g-ue],Se=ee[ue+1],me=ie[g-(ue+1)];[we,q,Se,Se,q,me].forEach(re=>{a.push(re[0].x,re[0].y,re[0].z),l.push(re[1].x,re[1].y,re[1].z)})}W.push(ee[0][0],ie[g][0],ee[g][0],ie[0][0])}}for(;W.length;){let H,X,J,Y;[H,X]=W.splice(0,2);let ee=[H];for(;H!=X;)ee.push(X),J=W.indexOf(X),Y=J%2,X=W.splice(J-Y,2)[1-Y];_.subVectors(ee[0],ee[1]).cross(m.subVectors(ee[0],ee[2])).normalize();let ie=_.dot(ee[0])<0;ie&&_.negate();for(let ue=1;ue<=ee.length-2;ue++)[ee[ue+ +ie],ee[ue+1-+ie],ee[0]].forEach(we=>{a.push(we.x,we.y,we.z),l.push(_.x,_.y,_.z)})}}function d(){let p=new O;for(let A=0;A<a.length;A+=3){p.x=a[A+0],p.y=a[A+1],p.z=a[A+2];let M=b(p)/2/Math.PI+.5,L=T(p)/Math.PI+.5;o.push(M,1-L)}let f=new O,m=new O,v=new O,w=new O,S=new Q,y=new Q,g=new Q,_=(A,M,L,D)=>{D<0&&A.x===1&&(o[M]=A.x-1),L.x===0&&L.z===0&&(o[M]=D/2/Math.PI+.5)};for(let A=0,M=0;A<a.length;A+=9,M+=6){f.set(a[A+0],a[A+1],a[A+2]),m.set(a[A+3],a[A+4],a[A+5]),v.set(a[A+6],a[A+7],a[A+8]),S.set(o[M+0],o[M+1]),y.set(o[M+2],o[M+3]),g.set(o[M+4],o[M+5]),w.copy(f).add(m).add(v).divideScalar(3);let L=b(w);_(S,M+0,f,L),_(y,M+2,m,L),_(g,M+4,v,L)}for(let A=0;A<o.length;A+=6){let M=o[A+0],L=o[A+2],D=o[A+4],C=Math.max(M,L,D),N=Math.min(M,L,D);C>.9&&N<.1&&(M<.2&&(o[A+0]+=1),L<.2&&(o[A+2]+=1),D<.2&&(o[A+4]+=1))}function b(A){return Math.atan2(A.z,-A.x)}function T(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}}static fromJSON(e){return new fS(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},aee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new XP(t*.5,s,a):new _3(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:tt(Le({},e),{type:"DodecahedronGeometry"})})}},XP=class extends fS{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(s,a,o,e,t,r);this.type=o}static fromJSON(e){return new XP(e.radius,e.corner,e.cornerSides)}},hd=1e-12,mS=class{constructor(e){this.position=new Q,this.startPosition=new Q,this.uuid=sr.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new mS(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},cw=class extends mS{constructor(e){super(e.position);this.parent=e}copy(e){return super.copy(e),this}clone(){return new cw(this.parent).copy(this)}},kh=class extends mS{constructor(e,t){super(t);this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new cw(this),new cw(this))}static create(e,t){let r=new kh(e,new Q(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new kh(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}},gS=e=>e,Xp=new Q,vS=new Q,oee=new Q,lee=new Q,uee=new Q,hee=new Q,QP=new O,KP=new O;function cee(e){let t=new Q;t.addVectors(e.v0,Xp.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new Q;return r.addVectors(e.v2,vS.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Ys(e.v0,t,r,e.v2)}function Ed(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function dee(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function pee(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function ZP(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),s=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-s*s)/(2*n*i))}function fee(e,t,r,i,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(e.y-t.y)/s,h=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return i.set(o+l,a+h),n.set(o-l,a-h),[i,n]}function mee(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function gee(e,t,r,i,n,s){let a=t.x-e.x,o=t.y-e.y,l=r.x-e.x,h=r.y-e.y,d=Math.sqrt((a+l)*(a+l)+(o+h)*(o+h)),p;return ZP(t,e,r)>Math.PI&&(d*=-1),Ed(h,o)?p=(o+h)*(i/d-.5)*8/3/(a-l):p=(a+l)*(i/d-.5)*8/3/(h-o),n.set(t.x-p*o,t.y+p*a),s.set(r.x+p*h,r.y-p*l),[n,s]}function qC(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function vee(e,t,r,i,n=.5){let s=Xp.subVectors(t,e).multiplyScalar(n).add(e),a=vS.subVectors(r,t).multiplyScalar(n).add(t),o=oee.subVectors(i,r).multiplyScalar(n).add(r),l=s,h=lee.subVectors(a,s).multiplyScalar(n).add(s),d=uee.subVectors(o,a).multiplyScalar(n).add(a),p=o,f=hee.subVectors(d,h).multiplyScalar(n).add(h);return[e.x,e.y,l.x,l.y,h.x,h.y,f.x,f.y,d.x,d.y,p.x,p.y,i.x,i.y]}function yee(e,t,r=12,i=!0){let n=KP.set(0,0,0),s,a=0;for(let o=0;o<t.length;o++){let l=gS(t[o]),h=Xp,d=ru(l,r);for(let p=0;p<=d;p++)if(l instanceof Ys||l instanceof ml||l instanceof Ks){if(l.getPoint(p/d,h),n.set(h.x,h.y,0),s!==void 0&&pee(s,n))continue;s===void 0&&(s=QP),s.copy(n),e.setXYZ(a,n.x,n.y,n.z),a++}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function xee(e,t,r,i=12,n=!0){let s=KP.set(0,0,0),a=0,o=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let h,d=gS(t[l]),p=Xp,f=ru(d,i);o.push(f);for(let m=0;m<=f;m++)if(d instanceof Ys||d instanceof ml||d instanceof Ks){if(d.getPoint(m/f,p),s.set(p.x,p.y,0),h==null?void 0:h.equals(s))continue;h===void 0?h=QP:(e.setXYZ(a,h.x,h.y,h.z),a++,e.setXYZ(a,s.x,s.y,s.z),a++),h.copy(s)}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),o}function XC(e,t=12,r=!1){let i=[];for(let n=0,s=e.length;n<s;n++){let a=e[n],o=0;if(r&&a.roundedCurveCorner!==void 0){let l=ru(a.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),o+=l}a.curveAfter!==void 0&&(o+=ru(a.curveAfter,t)),i.push(o)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=ru(e[0].roundedCurveCorner,t)*.5),i}function ru(e,t=12){return e&&e instanceof jp?t*2:e&&(e instanceof Ks||e instanceof M3)?1:e&&e instanceof Xv?t*e.points.length:t}function wee(e,t,r=12,i=!0){let n,s=0;for(let a=0;a<t.length;a++){let o=gS(t[a]),l=ru(o,r),h=Xp;for(let d=0;d<=l;d++)if(o instanceof Ys||o instanceof ml||o instanceof Ks){if(o.getPoint(d/l,h),n!==void 0&&dee(n,h,hd))continue;n===void 0&&(n=vS),n.copy(h),e.push(h.x,h.y),s++}}return Ed(e[0],e[e.length-2],hd)&&Ed(e[1],e[e.length-1],hd)&&(e.pop(),e.pop()),i&&s>1&&!(Ed(e[s-1],e[1],hd)&&Ed(e[s-2],e[0],hd))&&(e.push(e[0],e[1]),s++),e}var z1=new Q,_ee=new Q,See=new Q,bee=new Q,Aee=new Q,Mee=new Q,kr=class extends fo{constructor(e=100,t=100){super();this.points=[],this.shapeHoles=[],this.eventDispatcher=new Kn,this.plane=new Gs(new O(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=sr.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new kr;return i.isClosed=e.isClosed,i.points=e.points.map(n=>kh.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>kr.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){return this.points.findIndex(t=>t.uuid===e)}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0)for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t],n=e-this.points.length;if(n<=i.points.length-1)return i.points[n]}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this.applyScale(e/this.width,t/this.height),this._width=e,this._height=t}applyScale(e,t){let r=z1.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];s.position.multiply(r),s.controls[0].position.multiply(r),s.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update(!1)}createPoint(e,t=0,r=sr.generateUUID()){let i;e instanceof Q?i=e:i=new Q(e,t);let n=new kh(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(e=!0){for(let t=0,r=this.shapeHoles.length;t<r;t++)this.shapeHoles[t].update(!1);this._update(e)}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return yee(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=XC(this.points,e,!1),this.roundedCurveDivisions=XC(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return xee(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),wee(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=ru(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=i.reduce((a,o)=>a+o,0));for(let a=0,o=i.length;a<o;a++){let l=i[a];if(s<r+l)return[a,(s-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,a=s[e];if(qC(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(z1.set(r.x,r.y))/l}let o=0;for(let l=0;l<e;l++)o+=s[l];return(t-o)/a}dispose(){this.eventDispatcher=null}_applyCurveForPoint(e,t){qC(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(e=!0){var t;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];if(i===0)this.moveTo(s.position.x,s.position.y);else{let a=this.points[i-1];this._applyCurveForPoint(s,a)}}let r=this.getLastPoint();if(r!=null&&r.curveAfter&&(r.curveAfter=void 0),this.isClosed){let i=this.points[0],n=this.points[this.points.length-1];this._applyCurveForPoint(i,n)}if(this.points.length>2){let i=0;for(let n=0,s=this.points.length;n<s;n++){let a=this.points[n],o=a.roundness;if(!a.controlsMoved()&&o>0){let l=a.curveBefore,h=a.curveAfter;if(l===void 0||h===void 0)continue;let d=a.roundedCurveBefore,p=a.roundedCurveAfter,f=l.getLength(),m=h.getLength(),v=Math.min(o,f*.499),w=Math.min(o,m*.499),S=Math.min(v,w),y=1-S/f,g=S/m,_=l.getPointAt(y,z1),b=h.getPointAt(g,_ee);this._subSplitCurve(l,d,y,_,void 0),this._subSplitCurve(h,p,g,void 0,b);let T;if(this.useCubicForRoundedCorners){let A=ZP(_,a.position,b)/2,M=Math.tan(A)*_.distanceTo(a.position),[L,D]=fee(_,b,M,See,bee),C=mee(L,D,a.position),[N,U]=gee(C,_,b,M,Aee,Mee);T=new Ys(_.clone(),N.clone(),U.clone(),b.clone())}else T=new ml(_.clone(),a.position.clone(),b.clone());a.roundedCurveCorner=T,this.roundedCurves.splice(n+i,0,T),i++}}}e&&((t=this.eventDispatcher)==null||t.dispatchEvent({type:"update"}))}_subSplitCurve(e,t,r,i,n){if(e instanceof Ks)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let s=e,a=t,o=s.getUtoTmapping(r,0),l=vee(s.v0,s.v1,s.v2,s.v3,o);return i!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),n!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new kr(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var t;this.points=[],this.pointIDs=0;let r=e.points.length/7;for(let i=0;i<r;i++){let n=i*7,s=e.points[n+0],a=e.points[n+1],o=e.points[n+2],l=e.points[n+3],h=e.points[n+4],d=e.points[n+5],p=e.points[n+6],f=new kh(sr.generateUUID(),new Q(s,a));f.controls[0].position.set(o,l),f.controls[1].position.set(h,d),f.roundness=p,this.points.push(f)}return this.shapeHoles=(t=e.shapeHoles)!=null&&t.length?e.shapeHoles.map(i=>{let n=new kr;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(i,n)=>{n instanceof Ys&&n.v3.equals(i.position)&&i.controls[0].position.copy(n.v2)},r=i=>{let n=[],s,a;for(s=0,a=i.length;s<a;s++)i[s]instanceof ml&&(i[s]=cee(i[s]));for(s=0,a=i.length;s<a;s++){let h=i[s],d=s>0?i[s-1]:null,p;h instanceof Ys?(p=this.createPoint(h.v0),p.controls[1].position.copy(h.v1)):h instanceof Ks&&(p=this.createPoint(h.v1)),p!==void 0&&(d!==null&&t(p,d),n.push(p))}let o=i[i.length-1],l=!1;return o instanceof Ys?o.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(o.v2),l=!0):o instanceof Ks&&o.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=r(e.curves),e instanceof fo&&(this.shapeHoles=e.holes.map(i=>{let n=new kr;return n.fromShape(i),n})),this.update(),this}},dw=Math.PI*2;function F1({x:e,y:t},r,i,n,s){return{x:e*r+n,y:t*i+s}}function Eee(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),a=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:s+a*r,y:a-s*r},{x:s,y:a}]}function QC(e,t,r,i){let n=e*i-t*r<0?-1:1,s=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(s)}function Tee(e,t,r,i,n,s,a,o,l,h){let d=Math.pow(n,2),p=Math.pow(s,2),f=Math.pow(a,2),m=Math.pow(o,2),v=d*p-d*m-p*f;v<0&&(v=0),v/=d*m+p*f,v=Math.sqrt(v)*(l===h?-1:1);let w=v*n/s*o,S=v*-s/n*a,y=w+(e+r)/2,g=S+(t+i)/2,_=(a-w)/n,b=(o-S)/s,T=(-a-w)/n,A=(-o-S)/s,M=QC(1,0,_,b),L=QC(_,b,T,A);return!h&&L>0&&(L-=dw),h&&L<0&&(L+=dw),{centerx:y,centery:g,ang1:M,ang2:L}}function Cee({px:e,py:t,cx:r,cy:i,rx:n,ry:s,largeArcFlag:a,sweepFlag:o}){let l=[];if(n===0||s===0)return[];let h=(e-r)/2,d=(t-i)/2;if(h===0&&d===0)return[];n=Math.abs(n),s=Math.abs(s);let p=Math.pow(h,2)/Math.pow(n,2)+Math.pow(d,2)/Math.pow(s,2);p>1&&(n*=Math.sqrt(p),s*=Math.sqrt(p));let f=Tee(e,t,r,i,n,s,h,d,a,o),{ang1:m,ang2:v}=f,{centerx:w,centery:S}=f,y=Math.abs(v)/(dw/4);Math.abs(1-y)<1e-7&&(y=1);let g=Math.max(Math.ceil(y),1);v/=g;for(let _=0;_<g;_++)l.push(Eee(m,v)),m+=v;return l.map(_=>{let{x:b,y:T}=F1(_[0],n,s,w,S),{x:A,y:M}=F1(_[1],n,s,w,S),{x:L,y:D}=F1(_[2],n,s,w,S);return{x1:b,y1:T,x2:A,y2:M,x:L,y:D}})}var Hr;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Hr||(Hr={}));var Ri;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Ri||(Ri={}));function lt(e,t){if(!e)throw t||"Assertion Failed!"}var it=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){lt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?n<s?r.t-t.t+(t.t-i.t)*(n/(n+s)):r.t-i.t+(i.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,r,i){lt(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?(r.t-i.t)*n+(r.t-t.t)*s:0},e.transEval=function(t,r,i){lt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?n<s?r.s-t.s+(t.s-i.s)*(n/(n+s)):r.s-i.s+(i.s-t.s)*(s/(n+s)):0},e.transSign=function(t,r,i){lt(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?(r.s-i.s)*n+(r.s-t.s)*s:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,s){var a,o,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(a=e.edgeEval(t,i,r),o=e.edgeEval(i,r,n),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,r.s)):(a=e.edgeSign(t,i,r),o=-e.edgeSign(t,n,r),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,n.s)):s.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(a=e.transEval(t,i,r),o=e.transEval(i,r,n),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,r.t)):(a=e.transSign(t,i,r),o=-e.transSign(t,n,r),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,n.t)):s.t=(i.t+r.t)/2},e}(),cd=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),Nm=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),uh=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),KC=function(){function e(){var t=new uh,r=new cd,i=new Nm(0),n=new Nm(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new Nm(0),i=new Nm(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;lt(n,"Vertex can't be null!");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r;var a=r;do a.Org=n,a=a.Onext;while(a!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;lt(n,"Face can't be null");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var a=r;do a.Lface=n,a=a.Lnext;while(a!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.makeEdge=function(){var t=new uh,r=new uh,i=new cd,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var s=new uh;this.makeVertex_(s,r,t.Org),t.Org.anEdge=t}if(!i){var a=new cd;this.makeFace_(a,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new cd;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new uh;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),s=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,r),n.Org=t.Dst,s.Org=r.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!i){var a=new cd;this.makeFace_(a,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,s,a,o;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=r);a=t.prev,o=t.next,o.prev=a,a.next=o},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,s,a,o,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,a=i.Org;n=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(o=this.countFaceVerts_(r),l=this.countFaceVerts_(s.Lface),o+l-2<=t&&it.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&it.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===a);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,s,a,o,l,h;for(s=t,s=t;(n=s.next)!==t;s=n){lt(n.prev===s),l=n.anEdge;do lt(l.Sym!==l),lt(l.Sym.Sym===l),lt(l.Lnext.Onext.Sym===l),lt(l.Onext.Sym.Lnext===l),lt(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(lt(n.prev===s&&n.anEdge===null),o=r,o=r;(a=o.next)!==r;o=a){lt(a.prev===o),l=a.anEdge;do lt(l.Sym!==l),lt(l.Sym.Sym===l),lt(l.Lnext.Onext.Sym===l),lt(l.Onext.Sym.Lnext===l),lt(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for(lt(a.prev===o&&a.anEdge===null),h=i,h=i;(l=h.next)!==i;h=l)lt(l.Sym.next===h.Sym),lt(l.Sym!==l),lt(l.Sym.Sym===l),lt(l.Org!==null),lt(l.Dst!==null),lt(l.Lnext.Onext.Sym===l),lt(l.Onext.Sym.Lnext===l);lt(l.Sym.next===h.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),ZC=function(){function e(){this.handle=null}return e}(),$C=function(){function e(){this.key=null,this.node=0}return e}(),Lee=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new ZC,this.handles[i]=new $C;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t<<1,a<this.size&&this.leq(i[r[a+1].handle].key,i[r[a].handle].key)&&++a,lt(a<=this.max),s=r[a].handle,a>this.size||this.leq(i[n].key,i[s].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t>>1,s=r[a].handle,a===0||this.leq(i[s].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new ZC;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new $C}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;lt(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),U1=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),e2=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),Oee=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new e2,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new e2;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Pee=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,s=r.eUp,a=i.eUp;if(s.Dst===n)return a.Dst===n?it.vertLeq(s.Org,a.Org)?it.edgeSign(a.Dst,s.Org,a.Org)<=0:it.edgeSign(s.Dst,a.Org,s.Org)>=0:it.edgeSign(a.Dst,n,a.Org)<=0;if(a.Dst===n)return it.edgeSign(s.Dst,n,s.Org)>=0;var o=it.edgeEval(s.Dst,n,s.Org),l=it.edgeEval(a.Dst,n,a.Org);return o>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&lt(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){lt(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new U1;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case Hr.ODD:return(r&1)!=0;case Hr.NONZERO:return r!==0;case Hr.POSITIVE:return r>0;case Hr.NEGATIVE:return r<0;case Hr.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,s=null,a=r,o=r.eUp;a!==i;){if(a.fixUpperEdge=!1,s=e.regionBelow(a),n=s.eUp,n.Org!=o.Org){if(!s.fixUpperEdge){e.finishRegion(t,a);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,a),o=s.eUp,a=s}return o},e.addRightEdges=function(t,r,i,n,s,a){var o,l,h,d,p=!0;h=i;do lt(it.vertLeq(h.Org,h.Dst)),e.addRegionBelow(t,r,h.Sym),h=h.Onext;while(h!==n);for(s===null&&(s=e.regionBelow(r).eUp.Rprev),l=r,d=s;o=e.regionBelow(l),h=o.eUp.Sym,h.Org===d.Org;)h.Onext!==d&&(t.mesh.splice(h.Oprev,h),t.mesh.splice(d.Oprev,h)),o.windingNumber=l.windingNumber-h.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!p&&e.checkForRightSplice(t,l)&&(e.addWinding(h,d),e.deleteRegion(t,l),t.mesh.delete(d)),p=!1,l=o,d=h;l.dirty=!0,lt(l.windingNumber-h.winding===o.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=it.vertL1dist(r,t),s=it.vertL1dist(i,t),a=.5*s/(n+s),o=.5*n/(n+s);t.coords[0]+=a*r.coords[0]+o*i.coords[0],t.coords[1]+=a*r.coords[1]+o*i.coords[1],t.coords[2]+=a*r.coords[2]+o*i.coords[2]},e.getIntersectData=function(t,r,i,n,s,a){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,s,a)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp;if(it.vertLeq(n.Org,s.Org)){if(it.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;it.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),r.dirty=i.dirty=!0)}else{if(it.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a;if(lt(!it.vertEq(n.Dst,s.Dst)),it.vertLeq(n.Dst,s.Dst)){if(it.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,a=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,a),a.Lface.inside=r.inside}else{if(it.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;r.dirty=i.dirty=!0,a=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),a.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a=n.Org,o=s.Org,l=n.Dst,h=s.Dst,d,p,f=new uh,m,v;if(lt(!it.vertEq(h,l)),lt(it.edgeSign(l,t.event,a)<=0),lt(it.edgeSign(h,t.event,o)>=0),lt(a!==t.event&&o!==t.event),lt(!r.fixUpperEdge&&!i.fixUpperEdge),a===o||(d=Math.min(a.t,l.t),p=Math.max(o.t,h.t),d>p))return!1;if(it.vertLeq(a,o)){if(it.edgeSign(h,a,o)>0)return!1}else if(it.edgeSign(l,o,a)<0)return!1;return e.debugEvent(t),it.intersect(l,a,h,o,f),lt(Math.min(a.t,l.t)<=f.t),lt(f.t<=Math.max(o.t,h.t)),lt(Math.min(h.s,l.s)<=f.s),lt(f.s<=Math.max(o.s,a.s)),it.vertLeq(f,t.event)&&(f.s=t.event.s,f.t=t.event.t),m=it.vertLeq(a,o)?a:o,it.vertLeq(m,f)&&(f.s=m.s,f.t=m.t),it.vertEq(f,a)||it.vertEq(f,o)?(e.checkForRightSplice(t,r),!1):!it.vertEq(l,t.event)&&it.edgeSign(l,t.event,f)>=0||!it.vertEq(h,t.event)&&it.edgeSign(h,t.event,f)<=0?h===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),i=r,r=e.topRightRegion(r),v=e.regionBelow(r).eUp.Rprev,i.eUp=s.Oprev,s=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,s.Onext,n.Rprev,v,!0),!0):(it.edgeSign(l,t.event,f)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),it.edgeSign(h,t.event,f)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=f.s,n.Org.t=f.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,a,l,o,h),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,s;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,s=i.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(s),i=e.regionBelow(r),s=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,s=i.Onext,a=e.regionBelow(r),o=r.eUp,l=a.eUp,h=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,r),it.vertEq(o.Org,t.event)&&(t.mesh.splice(s.Oprev,o),r=e.topLeftRegion(t,r),s=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),a),h=!0),it.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,a,null),h=!0),h){e.addRightEdges(t,r,i.Onext,s,s,!0);return}it.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,s,a,o,l;if(n=r.eUp,it.vertEq(n.Org,i)){lt(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!it.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}lt(!1),r=e.topRightRegion(r),l=e.regionBelow(r),a=l.eUp.Sym,s=o=a.Onext,l.fixUpperEdge&&(lt(s!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=s.Oprev),t.mesh.splice(i.anEdge,a),it.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,r,a.Onext,o,s,!0)},e.connectLeftVertex=function(t,r){var i,n,s,a,o,l,h=new U1;if(h.eUp=r.anEdge.Sym,i=t.dict.search(h).key,n=e.regionBelow(i),!!n){if(a=i.eUp,o=n.eUp,it.edgeSign(a.Dst,r,a.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(s=it.vertLeq(o.Dst,a.Dst)?i:n,i.inside||s.fixUpperEdge){if(s===i)l=t.mesh.connect(r.anEdge.Sym,a.Lnext);else{var d=t.mesh.connect(o.Dnext,r.anEdge);l=d.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);lt(n!==null);var s=e.regionBelow(n),a=s.eUp,o=e.finishLeftRegions(t,s,null);o.Onext===a?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,a,a,!0)},e.addSentinel=function(t,r,i,n){var s=new U1,a=t.mesh.makeEdge();a.Org.s=i,a.Org.t=n,a.Dst.s=r,a.Dst.t=n,t.event=a.Dst,s.eUp=a,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new Oee(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,s=t.bmax[0]+r,a=t.bmin[1]-i,o=t.bmax[1]+i;e.addSentinel(t,n,s,a),e.addSentinel(t,n,s,o)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(lt(r.fixUpperEdge),lt(++i==1)),lt(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,s=t.mesh.eHead;for(r=s.next;r!==s;r=i)i=r.next,n=r.Lnext,it.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,s=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)s++;for(s+=8,r=t.pq=new Lee(s,it.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,s;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,s=i.anEdge,lt(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!it.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),Dee=function(){function e(){this.mesh=new KC,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Hr.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,s,a,o,l=[0,0,0],h=[0,0,0],d=[0,0,0],p=[0,0,0],f=[0,0,0],m=[null,null,null],v=[null,null,null],w=this.mesh.vHead;r=w.next;for(var S=0;S<3;++S)s=r.coords[S],h[S]=s,v[S]=r,l[S]=s,m[S]=r;for(r=w.next;r!==w;r=r.next)for(var y=0;y<3;++y)s=r.coords[y],s<h[y]&&(h[y]=s,v[y]=r),s>l[y]&&(l[y]=s,m[y]=r);var g=0;if(l[1]-h[1]>l[0]-h[0]&&(g=1),l[2]-h[2]>l[g]-h[g]&&(g=2),h[g]>=l[g]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,i=v[g],n=m[g],d[0]=i.coords[0]-n.coords[0],d[1]=i.coords[1]-n.coords[1],d[2]=i.coords[2]-n.coords[2],r=w.next;r!==w;r=r.next)p[0]=r.coords[0]-n.coords[0],p[1]=r.coords[1]-n.coords[1],p[2]=r.coords[2]-n.coords[2],f[0]=d[1]*p[2]-d[2]*p[1],f[1]=d[2]*p[0]-d[0]*p[2],f[2]=d[0]*p[1]-d[1]*p[0],a=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],a>o&&(o=a,t[0]=f[0],t[1]=f[1],t[2]=f[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(d)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,s=0,a=t.next;a!==t;a=a.next)if(n=a.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==a.anEdge);if(s<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,s=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),s=!0),i=this.sUnit,n=this.tUnit;var a=this.longAxis_(r);i[a]=0,i[(a+1)%3]=1,i[(a+2)%3]=0,n[a]=0,n[(a+1)%3]=0,n[(a+2)%3]=r[a]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,i),o.t=this.dot_(o.coords,n);s&&this.checkOrientation_();for(var l=!0,h=t.next;h!==t;h=h.next)l?(this.bmin[0]=this.bmax[0]=h.s,this.bmin[1]=this.bmax[1]=h.t,l=!1):(h.s<this.bmin[0]&&(this.bmin[0]=h.s),h.s>this.bmax[0]&&(this.bmax[0]=h.s),h.t<this.bmin[1]&&(this.bmin[1]=h.t),h.t>this.bmax[1]&&(this.bmax[1]=h.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;it.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;it.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var s=void 0;i.Lnext!==n;)if(it.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(it.edgeGoesLeft(n.Lnext)||it.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(it.edgeGoesRight(i.Lprev)||it.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=t.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?r:-r:i?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var s,a=0,o=0,l;i>3&&t.mergeConvexFaces(i);for(var h=t.vHead.next;h!==t.vHead;h=h.next)h.n=-1;for(var d=t.fHead.next;d!==t.fHead;d=d.next)if(d.n=-1,!!d.inside){s=d.anEdge,l=0;do{var h=s.Org;h.n===-1&&(h.n=o,o++),l++,s=s.Lnext}while(s!==d.anEdge);if(l>i)throw"Face vertex greater that support polygon";d.n=a,++a}this.elementCount=a,r===Ri.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*i,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var h=t.vHead.next;h!==t.vHead;h=h.next)if(h.n!==-1){var p=h.n*n;this.vertices[p+0]=h.coords[0],this.vertices[p+1]=h.coords[1],n>2&&(this.vertices[p+2]=h.coords[2]),this.vertexIndices[h.n]=h.idx}for(var f=0,d=t.fHead.next;d!==t.fHead;d=d.next)if(d.inside){s=d.anEdge,l=0;do{var h=s.Org;this.elements[f++]=h.n,l++,s=s.Lnext}while(s!==d.anEdge);for(var m=l;m<i;++m)this.elements[f++]=-1;if(r===Ri.CONNECTED_POLYGONS){s=d.anEdge;do this.elements[f++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==d.anEdge);for(var v=l;v<i;++v)this.elements[f++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,s=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=i=o.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,h=0,d=0;s=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){a=0,n=i=o.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[h++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,a++,i=i.Lnext;while(i!==n);this.elements[d++]=s,this.elements[d++]=a,s+=a}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new KC),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,s,a){if(t===void 0&&(t=Hr.ODD),r===void 0&&(r=Ri.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),Pee.computeInterior(this,a);var o=this.mesh;return r===Ri.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),r===Ri.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,r,i,n),!0},e}();function Td(e){var t=e.windingRule,r=t===void 0?Hr.ODD:t,i=e.elementType,n=i===void 0?Ri.POLYGONS:i,s=e.polySize,a=s===void 0?3:s,o=e.vertexSize,l=o===void 0?2:o,h=e.normal,d=h===void 0?[0,0,1]:h,p=e.contours,f=p===void 0?[]:p,m=e.strict,v=m===void 0?!0:m,w=e.debug,S=w===void 0?!1:w;if(!f&&v)throw new Error("Contours can't be empty");if(f){var y=new Dee;e.edgeCreateCallback&&(y.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(y.vertexIdCallback=e.vertexIdCallback);for(var g=0;g<f.length;g++)y.addContour(l||2,f[g]);return y.tesselate(r,n,a,l,d,v),{vertices:y.vertices,vertexIndices:y.vertexIndices,vertexCount:y.vertexCount,elements:y.elements,elementCount:y.elementCount,mesh:S?y.mesh:void 0}}}Hr.ODD;Hr.NONZERO;Hr.POSITIVE;Hr.NEGATIVE;Hr.ABS_GEQ_TWO;Ri.POLYGONS;Ri.CONNECTED_POLYGONS;Ri.BOUNDARY_CONTOURS;var $P=class extends st{constructor(e,t=12,r=100,i={}){super();this.type="ShapeGeometry",this.windingRule=Hr.ODD,this.elementType=Ri.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._drawCount=0,this._shape=e,this._curveSegments=t,this._maxCount=r,this._maxDrawCount=r*3,this._triangulationOptions=Object.assign({windingRule:Hr.ODD,elementType:Ri.POLYGONS,polySize:3,vertexSize:2,strict:!0},i),this._positionAttribute=new dt(new Float32Array(r*3),3),this._normalAttribute=new dt(new Float32Array(r*3),3),this._uvAttribute=new dt(new Float32Array(r*2),2),this._indexAttribute=new dt(new Uint32Array(r*3),1),this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.updateFromShape()}copy(e){return this._drawCount=e.drawCount,this._maxDrawCount=e._maxDrawCount,this._maxCount=e.maxCount,super.copy(e)}get curveSegments(){return this._curveSegments}set curveSegments(e){this._curveSegments=e,this.updateFromShape()}get drawCount(){return this._drawCount}get maxDrawCount(){return this._maxDrawCount}get maxCount(){return this._maxCount}updateFromShape(){let e=this._shape.extractShapePointsToFlatArray([],this._curveSegments),t=this._shape.shapeHoles.map(o=>o.extractShapePointsToFlatArray([],this._curveSegments)),r,i=!0,n=!0,s,a;for(let o=0,l=e.length/2;o<l;o++){let h=o*2,d=e[h+0],p=e[h+1];if(s!==void 0&&d!==s&&(i=!1),a!==void 0&&p!==a&&(n=!1),s=d,a=p,!i&&!n)break}if(!i&&!n&&(r=Td({contours:[e,...t],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})),this._positionAttribute.array.fill(0),this._normalAttribute.array.fill(0),this._uvAttribute.array.fill(0),this._indexAttribute.array.fill(0),this._drawCount=0,r){let o=1/0,l=-1/0,h=1/0,d=-1/0;for(let m=0,v=r.vertexCount;m<v;m++){let w=m*2,S=r.vertices[w+0],y=r.vertices[w+1];S<o&&(o=S),S>l&&(l=S),y<h&&(h=y),y>d&&(d=y)}let p=l-o,f=d-h;for(let m=0,v=r.vertexCount;m<v;m++){let w=m*2,S=r.vertices[w+0],y=r.vertices[w+1],g=(S-o)/p,_=(y-h)/f;this._positionAttribute.setXYZ(m,S,y,0),this._normalAttribute.setXYZ(m,0,0,1),this._uvAttribute.setXY(m,g,_)}for(let m=0,v=r.elementCount;m<v;m++){let w=m*3,S=r.elements[w+0],y=r.elements[w+1],g=r.elements[w+2];this._indexAttribute.setX(w+0,S),this._indexAttribute.setX(w+1,y),this._indexAttribute.setX(w+2,g),this._drawCount+=3}}return this._positionAttribute.needsUpdate=!0,this._normalAttribute.needsUpdate=!0,this._uvAttribute.needsUpdate=!0,this._indexAttribute.needsUpdate=!0,this.setDrawRange(0,this._drawCount),this._drawCount>this._maxDrawCount}},pw=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*pw.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${e}`);let r=e*pw.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,s=0,a=new Float32Array(i,s*n,3*e);s+=3*e;let o=new Float32Array(i,s*n,3*e);s+=3*e;let l=new Float32Array(i,s*n,2*e);a.set(this.positions.slice(0,this.size*3)),o.set(this.normals.slice(0,this.size*3)),l.set(this.uvs.slice(0,this.size*2)),this.buffer=i,this.positions=a,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},eD=pw;eD.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var k1=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),Ree=class extends st{constructor(e,t,r=0,i=12,n=3){super();this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,r<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(r,t/2-1e-12),this._bevelSegments=Math.floor(n));let s=this._shape.extractShapePointsToFlatArray([],i),a=this._shape.shapeHoles.map(T=>{let A=T.extractShapePointsToFlatArray([],i),M=[];for(let L=A.length-1;L>=1;L-=2){let D=A[L-1],C=A[L-0];M.push(D,C)}return M}),o=Td({windingRule:Hr.ODD,elementType:Ri.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]}),l=Td({windingRule:Hr.ODD,elementType:Ri.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]});if(!o)throw new Error("error generating geometry");let h=o.elementCount;if(l){o.elementCount+=l.elementCount;for(let T=0;T<l.elements.length;T++){let A=l.elements[T],M=T%2==0?o.vertexCount:0;o.elements.push(A+M)}for(let T=0;T<l.vertexIndices.length;T++){let A=l.vertexIndices[T],M=o.vertexCount;o.vertexIndices.push(A+M)}for(let T=0;T<l.vertices.length;T++){let A=l.vertices[T];o.vertices.push(A)}}let d=1/0,p=-1/0,f=1/0,m=-1/0;for(let T=0,A=o.vertexCount;T<A;T++){let M=T*2,L=o.vertices[M+0],D=o.vertices[M+1];L<d&&(d=L),L>p&&(p=L),D<f&&(f=D),D>m&&(m=D)}this._minX=d,this._minY=f,this._width=p-d,this._height=m-f;let v=o.vertexCount*2*(2+this._bevelSegments);this._buffer=new eD(v);let w=[],S=[];for(let T=o.elementCount-1,A=o.elementCount;T>=0;T--){let M=T>=h,L=T*2,D=o.elements[L+0],C=o.elements[L+1],N=D+C,U={start:D,count:C,normals:[],continuous:[],concave:[]},V=D,k=N-1,G=D+1,$=this._shape.roundedCurves.length;do{let J=V-D,Y=o.vertices[k*2+0],ee=o.vertices[k*2+1],ie=o.vertices[V*2+0],ue=o.vertices[V*2+1],we=o.vertices[G*2+0],q=o.vertices[G*2+1],Se=ie-Y,me=ue-ee,re=Math.sqrt(Se*Se+me*me);Se/=re,me/=re;let K=ie-we,ne=ue-q,ae=Math.sqrt(K*K+ne*ne);K/=ae,ne/=ae,U.normals[J*2+0]=-ne,U.normals[J*2+1]=K,U.concave[J]=Se*ne-me*K>0;let fe=o.vertexIndices[V];if(Array.isArray(fe))U.continuous[J]=!1;else{let[pe,xe]=this._shape.getCurveIndexFromVertexId(fe-1,!0);if(xe>0&&xe<1)U.continuous[J]=!0;else{let Ae=xe===1?pe+1:pe-1;Ae=(Ae+$)%$;let F=xe===1?0:1,B=this._shape.roundedCurves[pe].getTangent(xe),de=this._shape.roundedCurves[Ae].getTangent(F);U.continuous[J]=B.dot(de)>.95}}M&&(U.normals[J*2+0]*=-1,U.normals[J*2+1]*=-1),[k,V,G]=[V,G,G+1],G>=N&&(G-=C)}while(G!==D+1);let W=[];W.push({bevelI:0,angle:0,size:0,boundary:{vertices:o.vertices.slice(D*2,N*2),vertexCount:C,vertexIndices:new Array(C).fill(!0).map((J,Y)=>[Y,Y]),elements:[0,C],elementCount:1,mesh:null},reverseMap:[],insetPoints:o.vertices.slice(D*2,N*2)});for(let J=1;J<=this._bevelSegments;J++){let Y=J/this._bevelSegments*Math.PI/2,ee=(1-Math.cos(Y))*this._bevelSize,ie=[],ue=[],we=[],q=[],Se=0;for(let re=0;re<C;re++){let K=re*2,ne=(re-1+C)%C*2,ae=o.vertices[U.start*2+K+0],fe=o.vertices[U.start*2+K+1],pe=-U.normals[ne+0]*ee,xe=-U.normals[ne+1]*ee,Ae=-U.normals[K+0]*ee,F=-U.normals[K+1]*ee;if(U.concave[re]||!U.concave[re]&&M){let B=Math.atan2(xe,pe),de=Math.atan2(F,Ae);de>B&&(de-=Math.PI*2);let Oe=de-B;if(U.continuous[re]||M){let Ce=B+Oe/2,Re=Math.cos(Ce)*ee,ze=Math.sin(Ce)*ee;ie[2*Se+0]=ae+Re*(M?-1:1),ie[2*Se+1]=fe+ze*(M?-1:1),q[Se]=re,Se++}else{let Ce=Math.max(1,Math.floor(i/4*Math.abs(Oe)/Math.PI));for(let Re=0;Re<=Ce;Re++){let ze=B+Oe*(Re/Ce),Ke=Math.cos(ze)*ee,We=Math.sin(ze)*ee;ie[2*Se+0]=ae+Ke,ie[2*Se+1]=fe+We,q[Se]=re,Se++}}}else ie[2*Se+0]=ae+pe,ie[2*Se+1]=fe+xe,q[Se]=re,ue[re]=Se,Se++,ie[2*Se+0]=ae,ie[2*Se+1]=fe,q[Se]=re,Se++,ie[2*Se+0]=ae+Ae,ie[2*Se+1]=fe+F,q[Se]=re,we[re]=Se,Se++}let me=Td({windingRule:Hr.POSITIVE,elementType:Ri.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[ie],edgeCreateCallback:re=>{let K=re.Org.idx,ne=q[K],ae=q[(K+1)%q.length];re.idx=[ne,ae],re.Sym.idx=[ae,ne]},vertexIdCallback:re=>{let K=re.Lprev.idx;return[K?K[1]:0,re.idx[0]]}});if(!me)throw console.log("Error"),new Error(`error generating bevel geometry for ${J}'th loop`);if(!me.vertexCount)break;for(let re=0;re<me.vertexIndices.length;re++){let[K,ne]=me.vertexIndices[re];if(K===ne)continue;let ae=ne;ne<K&&(ae+=C);for(let fe=K;fe<ae;fe++){let pe=fe%C,xe=(fe+1)%C;if(!U.continuous[pe]||!U.continuous[xe]){me.vertexIndices[re]=[K,pe],me.vertexIndices.splice(re+1,0,[xe,ne]),me.vertices.splice((re+1)*2,0,me.vertices[re*2],me.vertices[re*2+1]);break}}}W.push({bevelI:J,angle:Y,size:ee,boundary:me,reverseMap:q,insetPoints:ie})}let H=(J,Y,ee)=>{let ie=0,ue=J.boundary.vertexIndices.length;for(;ie<ue&&ee(J.boundary.vertexIndices[Y]);)Y=(Y+1)%ue,ie++;return ie},X=w.length;for(let J=1;J<W.length;J++){let Y=W[J-1],ee=W[J],ie=Y.boundary.vertexIndices.length,ue=ee.boundary.vertexIndices.length;if(!ie||!ue)break;let we=U.concave.length,q=0,Se=k1(q,C);for(;!Y.boundary.vertexIndices.filter(Se).length||!ee.boundary.vertexIndices.filter(Se).length;)q++,Se=k1(q,C);let me=Y.boundary.vertexIndices.findIndex(Se),re=ee.boundary.vertexIndices.findIndex(Se);do me=(me+1)%ie;while(Se(Y.boundary.vertexIndices[me]));do re=(re+1)%ue;while(Se(ee.boundary.vertexIndices[re]));q=(q+1)%C;let K=q,ne=this.buildBevelVert(U,Y,(me-1+ie)%ie),ae=this.buildBevelVert(U,ee,(re-1+ue)%ue),fe=ne,pe=ae,xe,Ae,F=!1;do{Se=k1(q,C);let B=H(Y,me,Se),de=H(ee,re,Se),Oe=F;if(F=!1,B&&!de){for(let Ce=0;Ce<B;Ce++)xe=this.buildBevelVert(U,Y,(me+Ce)%ie,Ce/(B-1)),w.push(fe.topN,xe.topP,pe.topN),w.push(xe.bottomP,fe.bottomN,pe.bottomN),fe=xe;F=!0}else if(!B&&de)for(let Ce=0;Ce<de;Ce++)Ae=this.buildBevelVert(U,ee,(re+Ce)%ue,Ce/(de-1)),w.push(pe.topN,fe.topP,Ae.topP),w.push(fe.bottomP,pe.bottomN,Ae.bottomP),pe=Ae;else if(B&&de)if(xe=this.buildBevelVert(U,Y,me,0),Ae=this.buildBevelVert(U,ee,re,0),Oe?(w.push(fe.topN,Ae.topP,pe.topN),w.push(fe.topN,xe.topP,Ae.topP),w.push(Ae.bottomP,fe.bottomN,pe.bottomN),w.push(xe.bottomP,fe.bottomN,Ae.bottomP)):(w.push(fe.topN,xe.topP,pe.topN),w.push(pe.topN,xe.topP,Ae.topP),w.push(xe.bottomP,fe.bottomN,pe.bottomN),w.push(xe.bottomP,pe.bottomN,Ae.bottomP)),fe=xe,pe=Ae,B===de)for(let Ce=1;Ce<B;Ce++)xe=this.buildBevelVert(U,Y,(me+Ce)%ie,Ce/(B-1)),Ae=this.buildBevelVert(U,ee,(re+Ce)%ue,Ce/(de-1)),w.push(fe.topN,xe.topP,pe.topN),w.push(pe.topN,xe.topP,Ae.topP),w.push(xe.bottomP,fe.bottomN,pe.bottomN),w.push(xe.bottomP,pe.bottomN,Ae.bottomP),fe=xe,pe=Ae;else if(B>de){let Ce=B/de,Re=0;for(let ze=1;ze<B;ze++)xe=this.buildBevelVert(U,Y,(me+ze)%ie,ze/(B-1)),w.push(fe.topN,xe.topP,pe.topN),w.push(xe.bottomP,fe.bottomN,pe.bottomN),fe=xe,ze>(Re+1)*Ce&&(Re++,Ae=this.buildBevelVert(U,ee,(re+Re)%ue,Re/(de-1)),w.push(pe.topN,xe.topP,Ae.topP),w.push(xe.bottomP,pe.bottomN,Ae.bottomP),pe=Ae)}else{let Ce=de/B,Re=0;for(let ze=1;ze<de;ze++)Ae=this.buildBevelVert(U,ee,(re+ze)%ue,ze/(de-1)),w.push(pe.topN,xe.topP,Ae.topP),w.push(xe.bottomP,pe.bottomN,Ae.bottomP),pe=Ae,ze>(Re+1)*Ce&&(Re++,xe=this.buildBevelVert(U,Y,(me+Re)%ie,Re/(B-1)),w.push(fe.topN,xe.topP,pe.topN),w.push(xe.bottomP,fe.bottomN,pe.bottomN),fe=xe)}me=(me+B)%ie,re=(re+de)%ue,q=(q+1)%we}while(q!==K)}{let J=W[0];for(let Y=0,ee=J.boundary.vertexCount;Y<ee;Y++){let ie=this.buildBevelVert(U,J,Y),ue=this.buildBevelVert(U,J,(Y+1)%ee);w.push(ue.topP,ie.topN,ie.bottomN),w.push(ue.topP,ie.bottomN,ue.bottomP)}}if(M){let J=[];for(let Y=w.length-1;Y>=X+2;Y-=3){let ee=w[Y-2],ie=w[Y-1],ue=w[Y-0];J.push(ue,ie,ee)}w.splice(X,w.length-X,...J)}if(M){let J=[];for(let Y=W[W.length-1].boundary.vertices.length-1;Y>=1;Y-=2){let ee=W[W.length-1].boundary.vertices[Y-1],ie=W[W.length-1].boundary.vertices[Y-0];J.push(ee,ie)}S.push(J)}if(!M){let J=W[W.length-1],Y=Td({windingRule:W.length>1?Hr.POSITIVE:Hr.ODD,elementType:Ri.POLYGONS,vertexSize:2,strict:!0,contours:[J.insetPoints,...S]});if(!Y)throw new Error("Error generating geometry for surface");for(let ee=0;ee<Y.elementCount*3;ee+=3){let ie=this.buildSurfaceVert(Y,Y.elements[ee+0]),ue=this.buildSurfaceVert(Y,Y.elements[ee+1]),we=this.buildSurfaceVert(Y,Y.elements[ee+2]);w.push(ie.top,ue.top,we.top),w.push(we.bottom,ue.bottom,ie.bottom)}}this.vertexCache={}}this._buffer.shrink();let y=new dt(Uint32Array.from(w),1),g=new dt(this._buffer.positions,3),_=new dt(this._buffer.normals,3),b=new dt(this._buffer.uvs,2);g.needsUpdate=!0,_.needsUpdate=!0,b.needsUpdate=!0,y.needsUpdate=!0,this.setAttribute("position",g),this.setAttribute("normal",_),this.setAttribute("uv",b),this.setIndex(y)}buildSurfaceVert(e,t){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let i=e.vertices[t*2+0],n=e.vertices[t*2+1],s=(i-this._minX)/this._width,a=(n-this._minY)/this._height,o=this._buffer.get(2),l=o*3,h=o*2,d={top:o+0,bottom:o+1};return this._buffer.positions[l+0]=i,this._buffer.positions[l+1]=n,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[h+0]=s,this._buffer.uvs[h+1]=a,this._buffer.positions[l+3]=i,this._buffer.positions[l+4]=n,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[h+2]=s,this._buffer.uvs[h+3]=a,this.vertexCache[r]=d,d}buildBevelVert(e,t,r,i=1){let n=`${t.bevelI}:${r}`;if(n in this.vertexCache)return this.vertexCache[n];let[s,a]=t.boundary.vertexIndices[r],o,l,h,d;s!==a?(l=s,o=a,d=!1,h=e.continuous[l]&&e.continuous[o]):(o=s,l=(o-1+e.count)%e.count,d=e.concave[o]&&t.bevelI>0,h=e.continuous[o]||d);let p=Math.cos(t.angle),f=Math.sin(t.angle),m=r*2,v=o*2,w=l*2,S=t.boundary.vertices[m+0],y=t.boundary.vertices[m+1],g=(1-f)*this._bevelSize,_=(S-this._minX)/this._width,b=(y-this._minY)/this._height,T=e.normals[v+0],A=e.normals[v+1],M=e.normals[w+0],L=e.normals[w+1];if(d){let V=M-T,k=L-A;T=T+V*(1-i),A=A+k*(1-i);let G=Math.sqrt(T*T+A*A);T/=G,A/=G}let D=this._buffer.get(h?2:4),C=D*3,N=D*2,U={i:r,fi:o,topP:D+0,topN:D+0,bottomP:D+1,bottomN:D+1};return this._buffer.positions[C+0]=S,this._buffer.positions[C+1]=y,this._buffer.positions[C+2]=this._depth-g,this._buffer.normals[C+0]=T*p,this._buffer.normals[C+1]=A*p,this._buffer.normals[C+2]=f,this._buffer.uvs[N+0]=_,this._buffer.uvs[N+1]=b,this._buffer.positions[C+3]=S,this._buffer.positions[C+4]=y,this._buffer.positions[C+5]=g,this._buffer.normals[C+3]=T*p,this._buffer.normals[C+4]=A*p,this._buffer.normals[C+5]=-f,this._buffer.uvs[N+2]=b,this._buffer.uvs[N+3]=_,h||(D+=2,C+=6,N+=4,U.topP=D+0,U.bottomP=D+1,this._buffer.positions[C+0]=S,this._buffer.positions[C+1]=y,this._buffer.positions[C+2]=this._depth-g,this._buffer.normals[C+0]=M*p,this._buffer.normals[C+1]=L*p,this._buffer.normals[C+2]=f,this._buffer.uvs[N+0]=_,this._buffer.uvs[N+1]=b,this._buffer.positions[C+3]=S,this._buffer.positions[C+4]=y,this._buffer.positions[C+5]=g,this._buffer.normals[C+3]=M*p,this._buffer.normals[C+4]=L*p,this._buffer.normals[C+5]=-f,this._buffer.uvs[N+2]=b,this._buffer.uvs[N+3]=_),this.vertexCache[n]=U,U}},xo=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a,o,l;let h=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,subdivisions:40,roundness:0,extrudeDepth:0,surfaceMaxCount:100,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),d=Math.abs(h.width),p=Math.abs((i=h.height)!=null?i:h.width),f=Math.abs(h.depth!==void 0&&h.depth===0&&h.extrudeDepth>0?h.extrudeDepth:(n=h.depth)!=null?n:0),m=(s=e.shape)!=null?s:t==null?void 0:t.shape,v=(a=m==null?void 0:m.roundness)!=null?a:h.roundness;m!==void 0&&(m instanceof kr?(m.width!==d||m.height!==p)&&m.applySize(d,p):m=new kr(d,p).fromJSON(m),((o=e.parameters)==null?void 0:o.roundness)!==void 0&&((l=e.parameters)==null?void 0:l.roundness)>0&&m.update(!1));let w=m!=null?m:new kr(d,p);return{parameters:Object.assign(h,{width:d,height:p,depth:f,extrudeDepth:f,roundness:v}),shape:w}}static build(e){let{extrudeDepth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:s,surfaceMaxCount:a}=e.parameters;e.shape.roundness=s;let o;return t<=0?o=new $P(e.shape,n,a):o=new Ree(e.shape,t,r,n,i),Object.assign(o,{userData:tt(Le({},e),{type:"VectorGeometry"})})}},tD=Math.PI*2,Nee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1e3},e.parameters);return{shape:e.shape&&e.shape instanceof kr?e.shape:new kr,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs(s.depth!==void 0&&s.depth===0&&s.extrudeDepth>0?s.extrudeDepth:(n=s.depth)!=null?n:0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l,surfaceMaxCount:h}=e.parameters,d=e.shape,p=t*.5,f=r*.5,m=Iee(d,p,f,n*Math.PI/180,i,s);d.isClosed=!0,d.update();let v=xo.create({shape:d,parameters:{subdivisions:m,surfaceMaxCount:h,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(v,{userData:tt(Le({},e),{type:"EllipseGeometry"})})}};function Iee(e,t,r,i,n,s){if(i>=tD)return n>30||n%4==0?(zee(e,t,r,s),Math.round(n/4)):t2(e,i,n,t,r,s);let a={x:0,y:r},o=i+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*r},h=Cee({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%h.length==0?Bee(e,a.x,a.y,h,n,t,r,s):t2(e,i,n,t,r,s)}function Bee(e,t,r,i,n,s,a,o){let l=Math.round(n/i.length);e.addPoint(Hh(t,r));for(let h=0,d=i.length;h<d;h++){let p=i[h],f=e.points[h],m=Hh(p.x,p.y);f.controls[1].position.set(p.x1,p.y1),m.controls[0].position.set(p.x2,p.y2),e.addPoint(m)}return o>0?rD(e,s,a,o):e.addPoint(Hh(0,0)),l}function t2(e,t,r,i,n,s){let a=-t/r;for(let o=0;o<=r;o++){let l=a*o,h=Math.sin(l)*i,d=Math.cos(l)*n;e.addPoint(Hh(h,d))}return t<tD?s>0?rD(e,i,n,s):e.addPoint(Hh(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&iD(e,i,n,s)),1}function zee(e,t,r,i=0,n=0,s=0){let a=.5522847498,o=t*a,l=r*a;e.addPoint(Im(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(Im(n,s+r,n-o,s+r,n+o,s+r)),e.addPoint(Im(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(Im(n,s-r,n+o,s-r,n-o,s-r)),i>0&&iD(e,t,r,i)}function Hh(e,t){return new kh(sr.generateUUID(),new Q(e,t))}function Im(e,t,r,i,n,s){let a=Hh(e,t);return a.controls[0].position.set(r,i),a.controls[1].position.set(n,s),a}function rD(e,t,r,i){nD(e,t,r,i).forEach(n=>e.addPoint(n))}function iD(e,t,r,i){let n=nD(e,t,r,i),s=new kr;n.forEach(a=>s.addPoint(a)),s.isClosed=!0,e.shapeHoles.push(s)}function nD(e,t,r,i){let n=i*t/100,s=n*(Math.abs(r)/Math.abs(t)),a=new Q(n/t,s/r),o=e.points.map(l=>{let h=l.clone();return h.uuid=sr.generateUUID(),h}).reverse();return o.forEach(l=>{l.position.multiply(a);let h=l.controls[0].position.clone().multiply(a),d=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(d),l.controls[1].position.copy(h)}),o}var Fee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),a=Math.abs(s.width),o=Math.abs((i=s.height)!=null?i:a),l=Math.abs((n=s.depth)!=null?n:a),h=Math.abs(Math.min(a,l))/2;return{parameters:Object.assign(s,{width:a,height:o,depth:l,radius:h,segments:Math.round(s.segments),pathSegments:Math.round(s.pathSegments),cornerSegments:Math.round(s.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:s,segments:a,pathRadius:o,pathType:l,pathSegments:h,cornerRadius:d,cornerSegments:p}=e.parameters,f=new sD(!1,t,r,i,n,s,a,o,l,h,d,p);return Object.assign(f,{userData:tt(Le({},e),{type:"HelixGeometry"})})}},sD=class extends st{constructor(e,t,r,i,n,s,a,o,l,h,d,p){super();let f=e&&s===1;f&&(p=0),d>100&&(d=100);let m=()=>new O,v=new O,w=m(),S=m(),y=m(),g,_,b,T,A,M,L,D,C=m(),N=m(),U=m(),V=m(),k=m(),G=m(),$=m(),W=m(),H=r-2*o+.001,X=H/s,J=Math.ceil(a*s),Y=J+1,ee=H/J,ie=-H/2,ue=h+1,we=2*Math.PI/h,q=Math.PI/2/p,Se=.01,me=Math.min((1-d/100)*o,o-Se),re=o-me,K=0,ne=2,ae=p*ne+ne,fe=ue*ae/ne,pe=fe+ue*Y,xe=ue*(Y+ae),[Ae,F,B]=[3,3,2].map(Be=>Array(xe*Be).fill(0)),de=[],Oe=n-o;function Ce(Be,at){let kt=Math.PI/2;M=at*ee,D=2*Math.PI*(M%X)/X+kt,M+=ie,L=Math.sin(D)*Oe,A=Math.cos(D)*Oe,e?Be.set(A,L,M):Be.set(A,M,L)}Ce(v,-1e-10),Ce(w,0),C.copy(v),Ce(v,1);let Re=v.distanceTo(w),ze=re+me,Ke=Re*J+2*ze,We=me,qe=Ke-ze;for(let Be=0;Be<=J;Be++){Ce(S,Be),W.subVectors(S,C).normalize(),C.copy(S),G.copy(S).setComponent(+e+1,0).normalize(),$.crossVectors(W,G).normalize();let at=Be===0,kt=Be===J,yr=at?3*Math.PI/2:q,Ei=at?We:qe,$t=at?ue:pe,gi=at?0:xe-ue,ki=W.clone().multiplyScalar(at?-re:re).add(S),aa=W.clone().multiplyScalar(at?-1:1).normalize();for(let Hi=0;Hi<ue;Hi++){let Ls=Hi*we;if(N.addVectors(v.copy(G).multiplyScalar(o*Math.cos(Ls)),w.copy($).multiplyScalar(o*Math.sin(Ls))),U.copy(N).normalize(),at||kt){f||(K=gi+Hi,[0,1,2].forEach(Lr=>{Ae[K*3+Lr]=ki.getComponent(Lr),F[K*3+Lr]=aa.getComponent(Lr)}),B[K*2]=+kt,B[K*2+1]=Hi/h),w.copy(U).multiplyScalar(me),y.addVectors(S,w);for(let Lr=0;Lr<p;Lr++){let Gi=Lr*q+yr;V.addVectors(v.copy(W).multiplyScalar(re*Math.sin(Gi)),w.copy(U).multiplyScalar(re*Math.cos(Gi))),k.copy(V).normalize(),w.addVectors(y,V),V.normalize(),K=$t+Lr*ue+Hi,[0,1,2].forEach(ht=>{Ae[K*3+ht]=w.getComponent(ht),F[K*3+ht]=k.getComponent(ht)});let ei=+at+Math.sin(Gi);B[K*2]=(Ei+re*ei)/Ke,B[K*2+1]=Hi/h}}w.addVectors(S,N),K=fe+Be*ue+Hi,[0,1,2].forEach(Lr=>{Ae[K*3+Lr]=w.getComponent(Lr),F[K*3+Lr]=U.getComponent(Lr)}),B[K*2]=(ze+Be*Re)/Ke,B[K*2+1]=Hi/h}}let te=Y+2*p+ne,Ie=1,[Me,je]=f?[Ie,Ie+Y-1]:[0,te-1];for(let Be=Me;Be<=je-1;Be++){let at=f&&Be===je-1;for(let kt=0;kt<ue-1;kt++)g=Be*ue+kt,_=g+1,b=(at?kt:g)+ue,T=(at?kt+1:_)+ue,Be===0?de.push(_,T,b):Be===te-2?de.push(g,_,b):de.push(g,_,b,_,T,b)}this.setIndex(de),this.setAttribute("position",new Je(Ae,3)),this.setAttribute("normal",new Je(F,3)),this.setAttribute("uv",new Je(B,2))}},Uee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new aD(t*.5,s,a):new P3(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:tt(Le({},e),{type:"IcosahedronGeometry"})})}},aD=class extends fS{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(n,s,a,e,t,r);this.type=a}static fromJSON(e){return new aD(e.radius,e.corner,e.cornerSides)}},kee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a;((i=(r=e.parameters)==null?void 0:r.points)!=null?i:[]).forEach(l=>{Array.isArray(l)&&(l.x=l[0],l.y=l[1])});let o=Object.assign({},(n=t==null?void 0:t.parameters)!=null?n:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs((s=o.height)!=null?s:o.width),depth:Math.abs((a=o.depth)!=null?a:o.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new fo;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new D3(n.extractPoints(i).shape,r);return s.rotateZ(Math.PI),Object.assign(s,{userData:tt(Le({},e),{type:"LatheGeometry"})})}},pa=new Ge,H1=new Rt,Bm=new O,nv=class extends Kn{constructor(){super();this.uuid=sr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Nr().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let s=0,a=n.vertexNormals.length;s<a;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return pa.makeRotationX(e),this.applyMatrix4(pa),this}rotateY(e){return pa.makeRotationY(e),this.applyMatrix4(pa),this}rotateZ(e){return pa.makeRotationZ(e),this.applyMatrix4(pa),this}translate(e,t,r){return pa.makeTranslation(e,t,r),this.applyMatrix4(pa),this}scale(e,t,r){return pa.makeScale(e,t,r),this.applyMatrix4(pa),this}lookAt(e){return H1.lookAt(e),H1.updateMatrix(),this.applyMatrix4(H1.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,s=i.normal,a=i.color,o=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let p=0;p<n.count;p++)t.vertices.push(new O().fromBufferAttribute(n,p)),a!==void 0&&t.colors.push(new Ue().fromBufferAttribute(a,p));function h(p,f,m,v){let w=a===void 0?[]:[t.colors[p].clone(),t.colors[f].clone(),t.colors[m].clone()],S=s===void 0?[]:[new O().fromBufferAttribute(s,p),new O().fromBufferAttribute(s,f),new O().fromBufferAttribute(s,m)],y=new fw(p,f,m,S,w,v);t.faces.push(y),o!==void 0&&t.faceVertexUvs[0].push([new Q().fromBufferAttribute(o,p),new Q().fromBufferAttribute(o,f),new Q().fromBufferAttribute(o,m)]),l!==void 0&&t.faceVertexUvs[1].push([new Q().fromBufferAttribute(l,p),new Q().fromBufferAttribute(l,f),new Q().fromBufferAttribute(l,m)])}let d=e.groups;if(d.length>0)for(let p=0;p<d.length;p++){let f=d[p],m=f.start,v=f.count;for(let w=m,S=m+v;w<S;w+=3)r!==void 0?h(r.getX(w),r.getX(w+1),r.getX(w+2),f.materialIndex):h(w,w+1,w+2,f.materialIndex)}else if(r!==void 0)for(let p=0;p<r.count;p+=3)h(r.getX(p),r.getX(p+1),r.getX(p+2));else for(let p=0;p<n.count;p+=3)h(p,p+1,p+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bm).negate(),this.translate(Bm.x,Bm.y,Bm.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new Ge;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new O,t=new O;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new O;if(e){let r=new O,i=new O;for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=this.vertices[a.a],l=this.vertices[a.b],h=this.vertices[a.c];r.subVectors(h,l),i.subVectors(o,l),r.cross(i),t[a.a].add(r),t[a.b].add(r),t[a.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,s=i.vertexNormals.length;n<s;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new nv;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let a=0,o=this.faces.length;a<o;a++){let l=new O,h={a:new O,b:new O,c:new O};n.push(l),s.push(h)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=i.faceNormals[n],l=i.vertexNormals[n];o.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ui),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ea),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,h=this.colors,d=e.colors;t!==void 0&&(i=new Nr().getNormalMatrix(t));for(let p=0,f=a.length;p<f;p++){let m=a[p].clone();t!==void 0&&m.applyMatrix4(t),s.push(m)}for(let p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(let p=0,f=l.length;p<f;p++){let m=l[p],v,w,S=m.vertexNormals,y=m.vertexColors,g=new fw(m.a+n,m.b+n,m.c+n);g.normal.copy(m.normal),i!==void 0&&g.normal.applyMatrix3(i).normalize();for(let _=0,b=S.length;_<b;_++)v=S[_].clone(),i!==void 0&&v.applyMatrix3(i).normalize(),g.vertexNormals.push(v);g.color.copy(m.color);for(let _=0,b=y.length;_<b;_++)w=y[_],g.vertexColors.push(w.clone());g.materialIndex=m.materialIndex+r,o.push(g)}for(let p=0,f=e.faceVertexUvs.length;p<f;p++){let m=e.faceVertexUvs[p];this.faceVertexUvs[p]===void 0&&(this.faceVertexUvs[p]=[]);for(let v=0,w=m.length;v<w;v++){let S=m[v],y=[];for(let g=0,_=S.length;g<_;g++)y.push(S[g].clone());this.faceVertexUvs[p].push(y)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let h=this.vertices[o],d=Math.round(h.x*n)+"_"+Math.round(h.y*n)+"_"+Math.round(h.z*n);t[d]===void 0?(t[d]=o,r.push(this.vertices[o]),i[o]=r.length-1):i[o]=i[t[d]]}let s=[];for(let o=0,l=this.faces.length;o<l;o++){let h=this.faces[o];h.a=i[h.a],h.b=i[h.b],h.c=i[h.c];let d=[h.a,h.b,h.c];for(let p=0;p<3;p++)if(d[p]===d[(p+1)%3]){s.push(o);break}}for(let o=s.length-1;o>=0;o--){let l=s[o];this.faces.splice(l,1);for(let h=0,d=this.faceVertexUvs.length;h<d;h++)this.faceVertexUvs[h].splice(l,1)}let a=this.vertices.length-r.length;return this.vertices=r,a}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new O(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function r(o,l){return o.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,a;i&&i.length===t&&(s=[]),n&&n.length===t&&(a=[]);for(let o=0;o<t;o++){let l=e[o]._id;s&&s.push(i[l]),a&&a.push(n[l])}s&&(this.faceVertexUvs[0]=s),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let m=this.parameters;for(let v in m)m[v]!==void 0&&(e[v]=m[v]);return e}let t=[];for(let m=0;m<this.vertices.length;m++){let v=this.vertices[m];t.push(v.x,v.y,v.z)}let r=[],i=[],n={},s=[],a={},o=[],l={};for(let m=0;m<this.faces.length;m++){let v=this.faces[m],w=!0,S=!1,y=this.faceVertexUvs[0][m]!==void 0,g=v.normal.length()>0,_=v.vertexNormals.length>0,b=v.color.r!==1||v.color.g!==1||v.color.b!==1,T=v.vertexColors.length>0,A=0;if(A=h(A,0,0),A=h(A,1,w),A=h(A,2,S),A=h(A,3,y),A=h(A,4,g),A=h(A,5,_),A=h(A,6,b),A=h(A,7,T),r.push(A),r.push(v.a,v.b,v.c),r.push(v.materialIndex),y){let M=this.faceVertexUvs[0][m];r.push(f(M[0]),f(M[1]),f(M[2]))}if(g&&r.push(d(v.normal)),_){let M=v.vertexNormals;r.push(d(M[0]),d(M[1]),d(M[2]))}if(b&&r.push(p(v.color)),T){let M=v.vertexColors;r.push(p(M[0]),p(M[1]),p(M[2]))}}function h(m,v,w){return w?m|1<<v:m&~(1<<v)}function d(m){let v=m.x.toString()+m.y.toString()+m.z.toString();return n[v]!==void 0||(n[v]=i.length/3,i.push(m.x,m.y,m.z)),n[v]}function p(m){let v=m.r.toString()+m.g.toString()+m.b.toString();return a[v]!==void 0||(a[v]=s.length,s.push(m.getHex())),a[v]}function f(m){let v=m.x.toString()+m.y.toString();return l[v]!==void 0||(l[v]=o.length/2,o.push(m.x,m.y)),l[v]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),o.length>0&&(e.data.uvs=[o]),e.data.faces=r,e}clone(){return new nv().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let p=0,f=t.length;p<f;p++)this.vertices.push(t[p].clone());let r=e.colors;for(let p=0,f=r.length;p<f;p++)this.colors.push(r[p].clone());let i=e.faces;for(let p=0,f=i.length;p<f;p++)this.faces.push(i[p].clone());for(let p=0,f=e.faceVertexUvs.length;p<f;p++){let m=e.faceVertexUvs[p];this.faceVertexUvs[p]===void 0&&(this.faceVertexUvs[p]=[]);for(let v=0,w=m.length;v<w;v++){let S=m[v],y=[];for(let g=0,_=S.length;g<_;g++){let b=S[g];y.push(b.clone())}this.faceVertexUvs[p].push(y)}}let n=e.morphTargets;for(let p=0,f=n.length;p<f;p++){let m={};if(m.name=n[p].name,n[p].vertices!==void 0){m.vertices=[];for(let v=0,w=n[p].vertices.length;v<w;v++)m.vertices.push(n[p].vertices[v].clone())}if(n[p].normals!==void 0){m.normals=[];for(let v=0,w=n[p].normals.length;v<w;v++)m.normals.push(n[p].normals[v].clone())}this.morphTargets.push(m)}let s=e.morphNormals;for(let p=0,f=s.length;p<f;p++){let m={};if(s[p].vertexNormals!==void 0){m.vertexNormals=[];for(let v=0,w=s[p].vertexNormals.length;v<w;v++){let S=s[p].vertexNormals[v],y={};y.a=S.a.clone(),y.b=S.b.clone(),y.c=S.c.clone(),m.vertexNormals.push(y)}}if(s[p].faceNormals!==void 0){m.faceNormals=[];for(let v=0,w=s[p].faceNormals.length;v<w;v++)m.faceNormals.push(s[p].faceNormals[v].clone())}this.morphNormals.push(m)}let a=e.skinWeights;for(let p=0,f=a.length;p<f;p++)this.skinWeights.push(a[p].clone());let o=e.skinIndices;for(let p=0,f=o.length;p<f;p++)this.skinIndices.push(o[p].clone());let l=e.lineDistances;for(let p=0,f=l.length;p<f;p++)this.lineDistances.push(l[p]);let h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());let d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new Hee().fromGeometry(this),t=new st,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",new dt(r,3).copyVector3sArray(e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",new dt(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",new dt(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",new dt(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",new dt(i,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],s=e.morphTargets[i];for(let a=0,o=s.length;a<o;a++){let l=s[a],h=new Je(l.data.length*3,3);h.name=l.name,n.push(h.copyVector3sArray(l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new Je(e.skinIndices.length*4,4);t.setAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){let i=new Je(e.skinWeights.length*4,4);t.setAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new st,r=e.geometry;if(e.isPoints||e.isLine){let i=new Je(r.vertices.length*3,3),n=new Je(r.colors.length*3,3);if(t.setAttribute("position",i.copyVector3sArray(r.vertices)),t.setAttribute("color",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let s=new Je(r.lineDistances.length,1);t.setAttribute("lineDistance",s.copyArray(r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};nv.prototype.isGeometry=!0;var Hee=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,s=e.faces;for(i=0;i<s.length;i++){let a=s[i];a.materialIndex!==n&&(n=a.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,a=e.morphTargets,o=a.length,l;if(o>0){l=[];for(let S=0;S<o;S++)l[S]={name:a[S].name,data:[]};this.morphTargets.position=l}let h=e.morphNormals,d=h.length,p;if(d>0){p=[];for(let S=0;S<d;S++)p[S]={name:h[S].name,data:[]};this.morphTargets.normal=p}let f=e.skinIndices,m=e.skinWeights,v=f.length===r.length,w=m.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let S=0;S<t.length;S++){let y=t[S];this.vertices.push(r[y.a],r[y.b],r[y.c]);let g=y.vertexNormals;if(g.length===3)this.normals.push(g[0],g[1],g[2]);else{let b=y.normal;this.normals.push(b,b,b)}let _=y.vertexColors;if(_.length===3)this.colors.push(_[0],_[1],_[2]);else{let b=y.color;this.colors.push(b,b,b)}if(n===!0){let b=i[0][S];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",S),this.uvs.push(new Q,new Q,new Q))}if(s===!0){let b=i[1][S];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",S),this.uvs2.push(new Q,new Q,new Q))}for(let b=0;b<o;b++){let T=a[b].vertices;l[b].data.push(T[y.a],T[y.b],T[y.c])}for(let b=0;b<d;b++){let T=h[b].vertexNormals[S];p[b].data.push(T.a,T.b,T.c)}v&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),w&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},fw=class{constructor(e,t,r,i,n,s=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new O,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new Ue,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},Gee=["a","b","c"];function Vee(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function G1(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),s=i+"_"+n;return r.get(s)}function V1(e,t,r,i,n,s){let a=Math.min(e,t),o=Math.max(e,t),l=a+"_"+o,h;if(i.has(l))h=i.get(l);else{let d=r[a],p=r[o];h={a:d,b:p,newEdge:null,faces:[]},i.set(l,h)}h.faces.push(n),s[e].edges.push(h),s[t].edges.push(h)}function jee(e,t,r,i){let n,s,a;for(n=0,s=e.length;n<s;n++)r[n]={edges:[]};for(n=0,s=t.length;n<s;n++)a=t[n],V1(a.a,a.b,e,i,a,r),V1(a.b,a.c,e,i,a,r),V1(a.c,a.a,e,i,a,r)}function zm(e,t,r,i,n){e.push(new fw(t,r,i,void 0,void 0,n))}function rh(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function Fm(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var Wee=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof st?e=new nv().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new O,r,i,n,s,a,o=e.vertices,l=e.faces,h=e.faceVertexUvs[0],d=h!==void 0&&h.length>0,p=[],f=new Map;jee(o,l,p,f);let m=[],v,w,S,y,g,_,b;for(let Se of Array.from(f.keys())){for(w=f.get(Se),S=new O,g=3/8,_=1/8,b=w.faces.length,b!=2&&(g=.5,_=0,b!=1),S.addVectors(w.a,w.b).multiplyScalar(g),t.set(0,0,0),s=0;s<b;s++){for(y=w.faces[s],a=0;a<3&&(v=o[Vee(y,Gee[a])],!(v!==w.a&&v!==w.b));a++);v&&t.add(v)}t.multiplyScalar(_),S.add(t),w.newEdge=m.length,m.push(S)}let T,A,M,L,D,C,N,U=[];for(i=0,n=o.length;i<n;i++){for(C=o[i],D=p[i].edges,r=D.length,r==3?T=3/16:r>3&&(T=3/(8*r)),A=1-r*Number(T),M=T,r<=2&&(r==2?(A=3/4,M=1/8):r==1||r==0),N=C.clone().multiplyScalar(A),t.set(0,0,0),s=0;s<r;s++)L=D[s],v=L.a!==C?L.a:L.b,t.add(v);t.multiplyScalar(Number(M)),N.add(t),U.push(N)}let V=U.concat(m),k=U.length,G,$,W,H=[],X=[],J,Y,ee,ie,ue=new Q,we=new Q,q=new Q;for(i=0,n=l.length;i<n;i++)y=l[i],G=Number(G1(y.a,y.b,f).newEdge)+k,$=Number(G1(y.b,y.c,f).newEdge)+k,W=Number(G1(y.c,y.a,f).newEdge)+k,zm(H,G,$,W,y.materialIndex),zm(H,y.a,G,W,y.materialIndex),zm(H,y.b,$,G,y.materialIndex),zm(H,y.c,W,$,y.materialIndex),d&&(J=h[i],Y=J[0],ee=J[1],ie=J[2],ue.set(rh(Y.x,ee.x),rh(Y.y,ee.y)),we.set(rh(ee.x,ie.x),rh(ee.y,ie.y)),q.set(rh(Y.x,ie.x),rh(Y.y,ie.y)),Fm(X,ue,we,q),Fm(X,Y,ue,q),Fm(X,ee,we,ue),Fm(X,ie,q,we));e.vertices=V,e.faces=H,d&&(e.faceVertexUvs[0]=X)}},pi=new O,Jee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i;let n=(i=(r=e.geometry)!=null?r:t==null?void 0:t.geometry)!=null?i:new st().copy(new fl(100,100,100)),s;t===void 0?(n.computeBoundingBox(),n.boundingBox.getSize(pi),s={width:pi.x,height:pi.y,depth:pi.z,subdivisions:0}):s=t.parameters;let a=Le(Le({},s),e.parameters);return{parameters:{width:Math.abs(a.width),height:Math.abs(a.height),depth:Math.abs(a.depth),subdivisions:Math.abs(a.subdivisions)},geometry:n}}static build(e){var t;let{width:r,height:i,depth:n,subdivisions:s}=e.parameters,a=(t=e.geometry)!=null?t:new st().copy(new fl(100,100,100)),o=a.userData.parameters;o===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(pi)):pi.set(o.width,o.height,o.depth),(r!==pi.x||i!==pi.y||n!==pi.z)&&a.scale(pi.x===0?1:r/pi.x,pi.y===0?1:i/pi.y,pi.z===0?1:n/pi.z);let l=a.originalGeometry;return s>0?(l===void 0||(o==null?void 0:o.subdivisions)!==s)&&(l===void 0&&(l=a),a=new Wee(s).modify(l).toBufferGeometry()):(l!==void 0&&(a=l),l=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()),l!==void 0&&Object.assign(a,{originalGeometry:l}),delete e.geometry,Object.assign(a,{userData:tt(Le({},e),{type:"NonParametricGeometry"})})}static loadFromUrl(e,t,r){new V_(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(pi);let s=100/pi.x;Object.assign(n.parameters,{width:100,height:pi.y*s,depth:pi.z*s}),t(this.build(n))})}},Yee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof kr?e.shape:new kr,parameters:Object.assign(a,{surfaceMaxCount:((i=a.surfaceMaxCount)!=null?i:a.cornerRadius>0)?1e3:100,width:Math.abs(a.width),height:Math.abs((n=a.height)!=null?n:a.width),depth:Math.abs(a.depth!==void 0&&a.depth===0&&a.extrudeDepth>0?a.extrudeDepth:(s=a.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o,surfaceMaxCount:l}=e.parameters,h=e.shape,d=t*.5,p=r*.5,f=0,m=0,v=2*Math.PI/i;for(let S=0;S<i;S++){let y=v*S,g=f+Math.sin(y)*d,_=m+Math.cos(y)*p;h.addPoint(h.createPoint(g,_))}h.isClosed=!0;for(let S=0,y=h.points.length;S<y;S++)h.points[S].roundness=n;h.roundness=n,h.update();let w=xo.create({shape:h,parameters:{surfaceMaxCount:l,roundness:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(w,{userData:tt(Le({},e),{type:"PolygonGeometry"})})}},qee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:s,openEnded:a,cornerRadius:o,cornerSegments:l}=e.parameters,h=new Qee(t*.5,r,n,s,a,o,l);return h.scale(1,1,i/t),Object.assign(h,{userData:tt(Le({},e),{type:"PyramidGeometry"})})}};function dd(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function j1(e,t,r,i,n,s){let a=t.clone().sub(e),o=r.clone().sub(e),l=a.angleTo(o);if(a.normalize(),o.normalize(),i===n){let h=a.add(o).normalize();s.copy(e).addScaledVector(h,i/Math.sin(l/2))}else{let h=a.angleTo(o);s.copy(e),s.addScaledVector(a,n/Math.sin(h)),s.addScaledVector(o,i/Math.sin(h))}}function Xee(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var Qee=class extends st{constructor(e=.5,t=1,r=4,i=1,n=!1,s=0,a=4){super();r=Math.floor(Math.max(3,r)),i=Math.floor(i),a=Math.floor(a);let o=[],l=[],h=[],d=[],p=0,f=t/2,m=Math.PI/r,v=e*Math.cos(Math.PI/r),w=2*Math.PI/r,S=(r-2)*Math.PI/r,y=Math.PI-S,g=new O(0,-f,0),_=new O(0,f,0),b=new Q(e,-f),T=new Q(v,-f),A=new Q(0,_.y).sub(T),M=new Q(0,_.y).sub(b),L=new Q(A.y,-A.x).normalize(),D=new Q(M.y,-M.x).normalize(),C=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-A.angle())/2)-1e-8;s=Math.min(s,C);let N;{let W=new O(L.x,L.y,0),H=new O(Math.cos(w)*W.x,W.y,Math.sin(w)*W.x);N=W.angleTo(H)}let U=s/Math.tan((Math.PI-A.angle())/2),V=s/Math.tan((Math.PI-N)/2),k=new O;if(!n){l.push(g.x,g.y,g.z),h.push(0,-1,0),d.push(0,0);let W=p++,H=[],X=b.clone(),J=U/Math.cos(Math.PI/r);X.x-=J;for(let Y=0;Y<r;Y++){let ee=Y/r*Math.PI*2+m,ie=new Q(Math.sin(ee),Math.cos(ee));dd(X,ie,k),l.push(k.x,k.y,k.z),h.push(0,-1,0),d.push(0,0),H.push(p++)}for(let Y=0;Y<H.length;Y++)o.push(H[Y],W,H[(Y+1)%H.length])}{let W=new O,H=new O,X=new O,J=new O,Y=new O,ee=new O;for(let ie=0;ie<r;ie++){let ue=ie/r*Math.PI*2+m,we=(ie+.5)/r*Math.PI*2+m,q=(ie+1)/r*Math.PI*2+m,Se=new Q(Math.sin(ue),Math.cos(ue)),me=new Q(Math.sin(we),Math.cos(we)),re=new Q(Math.sin(q),Math.cos(q));dd(b,Se,H),dd(b,re,X),dd(L,me,W),j1(_,H,X,V,V,J),l.push(J.x,J.y,J.z),j1(H,_,X,V,U,Y),l.push(Y.x,Y.y,Y.z),j1(X,H,_,U,V,ee),l.push(ee.x,ee.y,ee.z),h.push(W.x,W.y,W.z),h.push(W.x,W.y,W.z),h.push(W.x,W.y,W.z),d.push(0,0),d.push(0,0),d.push(0,0);let K=p++,ne=p++,ae=p++;if(o.push(K,ne,ae),s>0){{let xe=H.clone().add(X).multiplyScalar(.5),Ae=_.clone().sub(xe).normalize(),F=g.clone().sub(xe).normalize().add(Ae).normalize().multiplyScalar(-1),B=ee.clone().sub(Y);G(xe,B,F,A.angle())}let fe,pe;{let xe=new O;dd(D,re,xe);let Ae=ee.clone().add(J).multiplyScalar(.5);Ae=Xee(Ae,X,_);let F=ee.clone().sub(J);[fe,pe]=G(Ae,F,xe,N,J.y)}{let xe=fe,Ae=xe.clone().setY(0).normalize(),F=new O(0,-1,0),B=Ae.clone().cross(F);$(xe,Ae,F,B)}{let xe=A.angle(),Ae=Math.PI-xe,F=_.clone();F.y-=s/Math.sin(xe-Math.PI/2);let B=new O,de=[];for(let Ce=0;Ce<a;Ce++){let Re=[],ze=Math.PI/2-Ae*Ce/a,Ke=Math.cos(ze),We=Math.sin(ze),qe=we;for(let te=0;te<=Ce;te++){let Ie=Math.cos(qe),Me=Math.sin(qe);W.x=Ke*Me,W.y=We,W.z=Ke*Ie,B.copy(F).addScaledVector(W,s),l.push(B.x,B.y,B.z),h.push(W.x,W.y,W.z),d.push(0,0),Re.push(p++),qe+=Math.PI*2/Ce/r}de.push(Re)}pe.reverse(),de.push(pe);let Oe=de.length-1;for(let Ce=0;Ce<Oe;Ce++){let Re=de[Ce],ze=de[Ce+1],Ke=Re.length-1;o.push(ze[1],Re[0],ze[0]);for(let We=1;We<=Ke;We++)o.push(Re[We],Re[We-1],ze[We]),o.push(ze[We+1],Re[We],ze[We])}}}}}this.setIndex(o),this.setAttribute("position",new Je(l,3)),this.setAttribute("normal",new Je(h,3)),this.setAttribute("uv",new Je(d,2));function G(W,H,X,J,Y){let ee=-J/2,ie=(Math.PI-J)/2,ue=H.clone().normalize().cross(X);W.addScaledVector(X,-s/Math.sin(ie));let we=new O,q=new O,Se=1,me=p,re=[];for(let K=0;K<=a;K++){let ne=ee+K/a*J;q.set(0,0,0),q.addScaledVector(ue,Math.sin(ne)),q.addScaledVector(X,Math.cos(ne));for(let ae=0;ae<=Se;ae++){let fe=ae/Se-.5;if(we.copy(W),we.addScaledVector(H,fe),we.addScaledVector(q,s),Y!=null){let pe=Math.max(0,we.y-Y);we.addScaledVector(H,-pe/H.y)}l.push(we.x,we.y,we.z),h.push(q.x,q.y,q.z),d.push(0,0),ae===0&&re.push(p),p++}}for(let K=0;K<a;K++)for(let ne=0;ne<Se;ne++){let ae=me+ne+(Se+1)*K,fe=ae+(Se+1),pe=fe+1,xe=ae+1;o.push(ae,fe,xe),o.push(fe,pe,xe)}return[W.clone().addScaledVector(H,.5),re]}function $(W,H,X,J){let Y=Math.PI/2,ee=M.angle()-Y,ie=[],ue=new O,we=new O;for(let Se=0;Se<=a;Se++){let me=[],re=Se/a;for(let K=0;K<=Se;K++){let ne=((Se?K/Se:0)-.5)*y,ae=Math.cos(ne),fe=Math.sin(ne),pe=Math.atan(Math.tan(ee)*ae),xe=(Y+pe)*re,Ae=Math.cos(xe),F=Math.sin(xe);ue.set(0,0,0),ue.addScaledVector(H,F*ae),ue.addScaledVector(X,Ae),ue.addScaledVector(J,F*fe),we.copy(W).addScaledVector(ue,s),l.push(we.x,we.y,we.z),h.push(ue.x,ue.y,ue.z),d.push(0,0),me.push(p++)}ie.push(me)}let q=ie.length-1;for(let Se=0;Se<q;Se++){let me=ie[Se],re=ie[Se+1],K=me.length-1;o.push(me[0],re[1],re[0]);for(let ne=1;ne<=K;ne++)o.push(me[ne-1],me[ne],re[ne]),o.push(me[ne],re[ne+1],re[ne])}}}},oD=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s,a;let o=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),l=Object.assign((i=t==null?void 0:t.ui)!=null?i:{enabledIndieCorners:!1},e.ui),h=o.cornerRadius.reduce((d,p)=>d+p,0);return{shape:e.shape&&e.shape instanceof kr?e.shape:new kr,parameters:Object.assign(o,{surfaceMaxCount:((n=o.surfaceMaxCount)!=null?n:h>0)?1e3:100,width:Math.abs(o.width),height:Math.abs((s=o.height)!=null?s:o.width),depth:Math.abs(o.depth!==void 0&&o.depth===0&&o.extrudeDepth>0?o.extrudeDepth:(a=o.depth)!=null?a:0)}),ui:l}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l,surfaceMaxCount:h}=e.parameters,d={x:r*.5,y:i*.5},p={x:-d.x,y:-d.y},f={x:d.x,y:d.y};function m(T,A,M){return A>r&&M>i?Math.min(T*r/A,T*i/M):A>r?T*r/A:M>i?T*i/M:T}let v=[];v[0]=n[0]===0?0:m(n[0],n[0]+n[3],n[0]+n[1]),v[1]=n[1]===0?0:m(n[1],n[1]+n[2],n[1]+n[0]),v[2]=n[2]===0?0:m(n[2],n[2]+n[1],n[2]+n[3]),v[3]=n[3]===0?0:m(n[3],n[3]+n[0],n[3]+n[2]);let w=p.x,S=f.x,y=f.y,g=p.y;t.addPoint(t.createPoint(w,y)),t.addPoint(t.createPoint(S,y)),t.addPoint(t.createPoint(S,g)),t.addPoint(t.createPoint(w,g)),t.isClosed=!0;let _=!0;for(let T=0,A=t.points.length;T<A;T++)t.points[T].roundness=v[T],T>0&&v[T]!==v[T-1]&&(_=!1);_&&(t.roundness=v[0]),t.useCubicForRoundedCorners=s!==1,t.update();let b=xo.create({shape:t,parameters:{surfaceMaxCount:h,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(b,{userData:tt(Le({},e),{type:"RectangleGeometry"})})}},Kee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:s.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:s=64,phiStart:a,phiLength:o,thetaStart:l,thetaLength:h}=e.parameters,d=new F_(.5*t,n,s,a,o,l,h);return d.scale(1,r/t,i/t),Object.assign(d,{userData:tt(Le({},e),{type:"SphereGeometry"})})}},Zee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i;let n=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs((i=n.height)!=null?i:n.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,s=new Wv(t,r,i,n);return s.scale(1,1,1),Object.assign(s,{userData:tt(Le({},e),{type:"PlaneGeometry"})})}},$ee=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof kr?e.shape:new kr,parameters:Object.assign(a,{surfaceMaxCount:((i=a.surfaceMaxCount)!=null?i:a.cornerRadius>0)?1e3:100,width:Math.abs(a.width),height:Math.abs((n=a.height)!=null?n:a.width),depth:Math.abs(a.depth!==void 0&&a.depth===0&&a.extrudeDepth>0?a.extrudeDepth:(s=a.depth)!=null?s:0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:s,angle:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h,surfaceMaxCount:d}=e.parameters,p=e.shape,f=t*.5,m=r*.5,v=0,w=0,S=a*Math.PI/360/n,y=Math.PI/2*3*-1,g=f*i/100,_=m*i/100;if(n==3&&i==50){S=2*Math.PI/n;for(let T=0;T<n;T++){let A=S*T,M=v+Math.sin(A)*f,L=w+Math.cos(A)*m;p.addPoint(p.createPoint(M,L))}}else for(let T=0;T<n;T++){let A=v+Math.cos(y)*f,M=w+Math.sin(y)*m;p.addPoint(p.createPoint(A,M)),y+=S,A=v+Math.cos(y)*g,M=w+Math.sin(y)*_,p.addPoint(p.createPoint(A,M)),y+=S}p.isClosed=!0;for(let T=0,A=p.points.length;T<A;T++)p.points[T].roundness=s;p.roundness=s,p.update();let b=xo.create({shape:p,parameters:{surfaceMaxCount:d,roundness:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h}});return Object.assign(b,{userData:tt(Le({},e),{type:"StarGeometry"})})}},lD=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs((i=s.height)!=null?i:s.width),depth:Math.abs((n=s.depth)!=null?n:0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new Wv(t,r);return Object.assign(i,{userData:tt(Le({},e),{type:"TextFrameGeometry"})})}},ete=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n;let s=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),a=Math.abs(s.width),o=Math.abs((i=s.height)!=null?i:s.width),l=Math.abs((n=s.depth)!=null?n:s.width*.25);return{parameters:Object.assign(s,{width:a,height:o,depth:l})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:s,arc:a,cornerRadius:o,cornerSegments:l}=e.parameters,h=tte(t,r,i,t*.5,a,s,0,0,n,o,l);return h.scale(1,r/t,1),Object.assign(h,{userData:tt(Le({},e),{type:"TorusGeometry"})})}};function tte(e,t,r,i,n,s,a,o,l,h,d){return[t,r]=[r,t],a=t/2,n/=2*Math.PI,n==1&&(h=0),new sD(!0,e,t,r,i,n,s,a,o,l,h,d)}var rte=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs((i=a.height)!=null?i:a.width),depth:Math.abs((n=a.depth)!=null?n:a.width),tube:(s=a.tube)!=null?s:a.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:s,q:a}=e.parameters,o=t*.5;o!==r&&(o-=r);let l=new R3(o,r,i,n,s,a);return Object.assign(l,{userData:tt(Le({},e),{type:"TorusKnotGeometry"})})}},ite=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,i,n,s;let a=Object.assign({},(r=t==null?void 0:t.parameters)!=null?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof kr?e.shape:new kr,parameters:Object.assign(a,{surfaceMaxCount:((i=a.surfaceMaxCount)!=null?i:a.cornerRadius>0)?1e3:100,width:Math.abs(a.width),height:Math.abs((n=a.height)!=null?n:a.width*(a.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(a.depth!==void 0&&a.depth===0&&a.extrudeDepth>0?a.extrudeDepth:(s=a.depth)!=null?s:0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,isRect:o,surfaceMaxCount:l}=e.parameters,h=e.shape,d=t*.5,p=r*.5;o?(h.addPoint(h.createPoint(-d,p)),h.addPoint(h.createPoint(d,-p)),h.addPoint(h.createPoint(-d,-p))):(h.addPoint(h.createPoint(0,p)),h.addPoint(h.createPoint(d,-p)),h.addPoint(h.createPoint(-d,-p))),h.isClosed=!0;for(let m=0,v=h.points.length;m<v;m++)h.points[m].roundness=i;h.roundness=i,h.update();let f=xo.create({shape:h,parameters:{surfaceMaxCount:l,roundness:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a}});return Object.assign(f,{userData:tt(Le({},e),{type:"TriangleGeometry"})})}},uD={};oG(uD,{addBarycentricAttribute:()=>ate,fixUvs:()=>lte,loadFromUrl:()=>ote,resizeGeometry:()=>ste,roundShapePolygon:()=>nte});var r2=function(e,t){let r=t.x-e.x,i=t.y-e.y,n=Math.sqrt(r*r+i*i),s=r/n,a=i/n,o=Math.atan2(a,s);return{x:r,y:i,len:n,nx:s,ny:a,ang:o}},nte=(e,t,r)=>{let i,n,s,a,o,l,h,d,p,f,m,v,w,S,y=t.length;for(a=t[y-2],e.curves=[],i=1;i<y-1;i++){o=t[i%y],l=t[(i+1)%y];let g=r2(o,a),_=r2(o,l);h=g.nx*_.ny-g.ny*_.nx,d=g.nx*_.nx-g.ny*-_.ny,m=Math.asin(h),p=1,f=!1,d<0?m<0?m=Math.PI+m:(m=Math.PI-m,p=-1,f=!0):m>0&&(p=-1,f=!0),v=m/2,S=Math.abs(Math.cos(v)*r/Math.sin(v)),S>Math.min(g.len/2,_.len/2)?(S=Math.min(g.len/2,_.len/2),w=Math.abs(S*Math.sin(v)/Math.cos(v))):w=r,n=o.x+_.nx*S,s=o.y+_.ny*S,n+=-_.ny*w*p,s+=_.nx*w*p,e.absarc(n,s,w,g.ang+Math.PI/2*p,_.ang-Math.PI/2*p,f),a=o,o=l}e.closePath()},ste=(e,{width:t,height:r,depth:i})=>{t=Math.abs(t),r=Math.abs(r),i=Math.abs(i);let n=e.userData.parameters,s,a,o;t===0?(t=n.width,s=1):s=t/n.width,r===0?(r=n.height,a=1):a=r/n.height,i===0?(i=n.depth,o=1):o=i/n.depth,e.scale(s,a,o),n.width=t,n.height=r,n.depth=i},ate=(e,t)=>{let r=[new O(1,0,0),new O(0,1,0),new O(0,0,1)],i=e.attributes.position,n=new Float32Array(i.count*3);for(let s=0,a=i.count;s<a;s++)r[s%3].toArray(n,s*3);e.setAttribute(t,new Je(n,3))},ote=e=>new Promise(t=>{new V_().load(e,r=>t(r))}),lte=(e,t,r)=>{let i=e.getAttribute("uv");if(i)for(let n=0;n<i.count;n++){let s=i.getX(n),a=i.getY(n);i.setXY(n,(s+t/2)/t,1-(a-r/2)/r*-1)}},hD=new Promise(e=>{}),ot;hD.then(e=>{ot=e});var js=class{static build(e,t,r,i,n){let s,a,o;return e===void 0?(s=js.allocate(n,r),ot.set_destination_refinement_level(s,0),a=js.buildLevel(s,!0,i)):e.positionWASM!==void 0?(t&&t!==0&&(ot.free_bvh(t),ot.free_subdivision_surface(t)),s=js.allocate(n,void 0,e),ot.set_destination_refinement_level(s,0),a=js.buildLevel(s,!0,i)):s=t,e!==void 0&&e.subdivisions!==void 0&&(ot.set_destination_refinement_level(s,e.subdivisions),e.subdivisions>0?o=js.buildLevel(s,!1,i):o=null),{subdivPointer:s,originalGeometry:a,subdividedGeometry:o}}static allocate(e,t,r){var i;let n,s,a,o=[],l=[];if(r)r.positionWASM.length>0?(n=r.positionWASM,s=r.indexWASM,a=r.verticesPerFaceWASM):(n=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),s=new Uint32Array([0,1,2,3]),a=new Uint8Array([4]));else{t.deleteAttribute("normal"),t.deleteAttribute("uv");let T=j$.mergeVertices(t);n=T.attributes.position.array;let A=T.getIndex().array,M=A.length;switch(t.userData.type==="TorusGeometry"&&(t==null?void 0:t.userData.parameters.arc)===Math.PI*2&&(t.userData.type="ClosedTorusGeometry"),t.userData.type){case"ClosedTorusGeometry":case"PlaneGeometry":case"TorusKnotGeometry":case"CubeGeometry":s=new Uint32Array(M/3*2),a=new Uint8Array(M/6).fill(4);for(let k=0,G=0;k<M;k+=6)s[G++]=A[k],s[G++]=A[k+1],s[G++]=A[k+4],s[G++]=A[k+5];break;case"TorusGeometry":case"SphereGeometry":case"HelixGeometry":case"CylinderGeometry":case"ConeGeometry":let L,D,C;if(t.userData.type==="SphereGeometry")D=t.parameters.heightSegments,L=t.parameters.widthSegments,t.parameters.thetaLength!==Math.PI&&(C=!0);else if(t.userData.type==="CylinderGeometry")D=t.parameters.heightSegments+2,L=t.parameters.radialSegments;else if(t.userData.type==="ConeGeometry")D=t.parameters.heightSegments+1,L=t.parameters.radialSegments;else if(t.userData.type==="TorusGeometry"){let k=t.userData.parameters;D=Math.ceil(k.tubularSegments*k.arc/(2*Math.PI))+2,L=k.radialSegments}else{let{pathSegments:k,segments:G,revolutions:$}=t.userData.parameters;D=Math.ceil(G*$)+2,L=k}C?(s=new Uint32Array(1*L*3+(D-1)*L*4),a=new Uint8Array(1*L+(D-1)*L)):(s=new Uint32Array(2*L*3+(D-2)*L*4),a=new Uint8Array(2*L+(D-2)*L));let N=0,U=0,V=0;if(t.userData.type==="SphereGeometry"||t.userData.type==="HelixGeometry"||t.userData.type==="TorusGeometry"){for(;U<3*L;)s[U++]=A[N++],s[U++]=A[N++],s[U++]=A[N++],a[V++]=3;let k=C?s.length:3*L+4*(D-2)*L;for(;U<k;N+=6)s[U++]=A[N],s[U++]=A[N+1],s[U++]=A[N+4],s[U++]=A[N+5],a[V++]=4}else for(;U<4*(D-2)*L;N+=6)s[U++]=A[N],s[U++]=A[N+1],s[U++]=A[N+4],s[U++]=A[N+5],a[V++]=4;for(;U<s.length;)s[U++]=A[N++],s[U++]=A[N++],s[U++]=A[N++],a[V++]=3;break;default:s=A,a=new Uint8Array(M/3).fill(3);break}}let h=n.length,d=s.length,p=a.length,f=n.length+o.length+l.length,m=s.length+a.length,v=f*Float32Array.BYTES_PER_ELEMENT+m*Uint32Array.BYTES_PER_ELEMENT,w=f*Float32Array.BYTES_PER_ELEMENT,S=ot._malloc(v),y=new Float32Array(ot.HEAPF32.buffer,S,f),g=new Uint32Array(ot.HEAPU32.buffer,S+w,m);y.set(n,0),y.set(o,n.length),y.set(l,n.length+o.length),g.set(s,0),g.set(a,s.length);let _;(i=r==null?void 0:r.scaleBaked)!=null&&i.some(T=>T!==1)&&(_=new Ge().makeScale(...r.scaleBaked)),e&&(_?_.premultiply(e):_=e);let b=_?ot.alloc_subdivision_surface2(S,h,S+w,d,S+w+s.length*Uint32Array.BYTES_PER_ELEMENT,p,_.elements):ot.alloc_subdivision_surface(S,h,S+w,d,S+w+s.length*Uint32Array.BYTES_PER_ELEMENT,p);return ot._free(S),b}static buildLevel(e,t,r,i,n){let s=n?ot.get_mesh_data2(e,t?ot.Level.CONTROL:ot.Level.REFINED,r!=null?r:!t,n.elements):ot.get_mesh_data(e,t?ot.Level.CONTROL:ot.Level.REFINED,r!=null?r:!t),a=8,o=ot.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(4,4+4),h=0,d=ot.HEAPU32[o[h]>>2],p=ot.HEAPF32.subarray(d>>2,(d>>2)+l[h]);h++;let f=ot.HEAPU32[o[h]>>2],m=ot.HEAPF32.subarray(f>>2,(f>>2)+l[h]);h++;let v=ot.HEAPU32[o[h]>>2],w=ot.HEAPU32.subarray(v>>2,(v>>2)+l[h]);h++;let S=ot.HEAPU32[o[h]>>2],y=ot.HEAPU32.subarray(S>>2,(S>>2)+l[h]);if(h++,i===void 0){let g=new st;if(g.setIndex(new Fd(y,1)),g.setAttribute("position",new Je(p,3)),g.setAttribute("normal",new Je(m,3)),t){g.setAttribute("faceMap",new Fd(w,1));let _=new Float32Array(m.length/3*4).fill(0);g.setAttribute("color",new dt(_,4))}return ot.free_mesh_data(s),g.userData.type="SubdivGeometry",g}i.getAttribute("position").copyArray(p),i.getAttribute("normal").copyArray(m),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,ot.free_mesh_data(s)}static buildControlCageWireframe(e,t,r){let i=ot.get_wireframe_data_for_base_level(e),n=4,s=ot.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(2,2+2),o=0,l=ot.HEAPU32[s[o]>>2],h=ot.HEAPF32.subarray(l>>2,(l>>2)+a[o]);o++;let d=ot.HEAPU32[s[o]>>2],p=ot.HEAPU32.subarray(d>>2,(d>>2)+a[o]);if(t===void 0){let f=new st;f.setAttribute("position",new Je(h,3));let m=new Float32Array(h.length);for(let v=0,w=h.length;v<w;)m[v++]=r.r,m[v++]=r.g,m[v++]=r.b;return f.setAttribute("color",new dt(m,3)),f.setIndex(new Fd(p,1)),ot.free_wireframe_data_for_base_level(i),f}t.getAttribute("position").copyArray(h),t.attributes.position.needsUpdate=!0,ot.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){t||ot.set_destination_refinement_level(e,1);let i=r?ot.get_topological_data2(e,t?ot.Level.CONTROL:ot.Level.REFINED,r.elements):ot.get_topological_data(e,t?ot.Level.CONTROL:ot.Level.REFINED),n=6,s=ot.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(3,3+3),o=0,l=ot.HEAPU32[s[o]>>2],h=new Float32Array(ot.HEAPF32.subarray(l>>2,(l>>2)+a[o]));o++;let d=ot.HEAPU32[s[o]>>2],p=new Uint32Array(ot.HEAPU32.subarray(d>>2,(d>>2)+a[o]));o++;let f=ot.HEAPU32[s[o]>>2],m=new Uint8Array(ot.HEAPU32.subarray(f>>2,(f>>2)+a[o]));return ot.free_topological_data(i),{positions:h,indices:p,verticesPerFace:m}}},cD={ConeGeometry:iee,CubeGeometry:nee,CylinderGeometry:ree,DodecahedronGeometry:aee,EllipseGeometry:Nee,HelixGeometry:Fee,IcosahedronGeometry:Uee,LatheGeometry:kee,NonParametricGeometry:Jee,PolygonGeometry:Yee,PyramidGeometry:qee,RectangleGeometry:oD,SphereGeometry:Kee,PlaneGeometry:Zee,StarGeometry:$ee,TextFrameGeometry:lD,TorusGeometry:ete,TorusKnotGeometry:rte,TriangleGeometry:ite,VectorGeometry:xo},mw=e=>cD[e.type].create(e),Na=class extends Ue{constructor(e,t,r,i){super(e,t,r);this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}};function Zi(e,t){let r;if(typeof e=="string"){let i=t==null?void 0:t.getColor(e);i?r=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),r=new Na(0,0,0,0))}else return"a"in e?new Na(e.r,e.g,e.b,e.a):new Na(e.r,e.g,e.b,1);return r}var W1=e=>"isEntity"in e,dD=e=>"isAbstractMesh"in e,Qp=e=>"objectHelper"in e;function pD(e,t){var r;let i=!1;t.position&&(e.position.fromArray(t.position),i=!0),t.rotation&&(e.rotation.fromArray(t.rotation),i=!0),t.scale&&(i=!0,e.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&"hiddenMatrix"in e&&(i=!0,e.hiddenMatrix.fromArray((r=t.hiddenMatrix)!=null?r:rc.identity)),i&&e.updateMatrix(),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&e.updateWorldMatrix(!1,!0),e.objectType==="CombinedCamera"&&(t.isUpVectorFlipped!==void 0&&(e.isUpVectorFlipped=t.isUpVectorFlipped),e.updateUp())}function ute(e,t){pD(e,t),t.name!==void 0&&(e.name=t.name),t.visible!==void 0&&(e.isEntity?e.visibility=t.visible:e.visible=t.visible)}function hte(e,t,r){ute(e,t),t.color!==void 0&&(e.color=Zi(t.color,r)),t.intensity!==void 0&&(e.intensity=t.intensity),t.shadows!==void 0&&!(e instanceof jg)&&(e.castShadow=t.shadows),e.shadow&&!(e instanceof jg)&&t.depth!==void 0&&(e.shadow.camera.far=t.depth,e.shadow.needsUpdate=!0),t.helper!==void 0&&Qp(e)&&(e.enableHelper=t.helper,e.gizmos.shadowmap.visible=t.helper)}function cte(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var ih=new Ui,Oi=new O,nt=new O,ni=new Ge;function dte(e,t,r=0,i=t.count){let n=1/0,s=1/0,a=1/0,o=-1/0,l=-1/0,h=-1/0;for(let d=r;d<i;d++){let p=t.getX(d),f=t.getY(d),m=t.getZ(d);p<n&&(n=p),f<s&&(s=f),m<a&&(a=m),p>o&&(o=p),f>l&&(l=f),m>h&&(h=m)}return e.min.set(n,s,a),e.max.set(o,l,h),e}var i2=(e,t,r,i)=>{var n;if(dD(e)){let s=e.geometry.userData.parameters,a=e.geometry.getAttribute("position");e.geometry.userData.type==="SubdivGeometry"?Oi.copy(e.originalGeometry.boundingSphere.center):(dte(ih,a,e.geometry.drawRange.start,e.geometry.drawRange.count<1/0?e.geometry.drawRange.count:a.count),ih.getCenter(Oi)),e.forceComputeSize?ih.getSize(nt).multiplyScalar(.5):nt.set(s.width,s.height,(n=s.depth)!=null?n:0).multiplyScalar(.5)}else if(Qp(e)&&i===!0){let s=e.geometryHelper.getAttribute("position");ih.setFromArray(s.array),ih.getCenter(Oi),ih.getSize(nt).multiplyScalar(.5)}else Oi.setScalar(0),nt.setScalar(0);ni.copy(t).multiply(e.matrixWorld),nt.x===0&&nt.y===0&&nt.z===0?r.push(new O(Oi.x,Oi.y,Oi.z).applyMatrix4(ni)):r.push(new O(-nt.x,nt.y,nt.z).add(Oi).applyMatrix4(ni),new O(-nt.x,-nt.y,nt.z).add(Oi).applyMatrix4(ni),new O(nt.x,-nt.y,nt.z).add(Oi).applyMatrix4(ni),new O(nt.x,nt.y,nt.z).add(Oi).applyMatrix4(ni),new O(-nt.x,nt.y,-nt.z).add(Oi).applyMatrix4(ni),new O(-nt.x,-nt.y,-nt.z).add(Oi).applyMatrix4(ni),new O(nt.x,-nt.y,-nt.z).add(Oi).applyMatrix4(ni),new O(nt.x,nt.y,-nt.z).add(Oi).applyMatrix4(ni))},n2=class extends Ui{constructor(){super(...arguments);this.matrix=new Ge,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new Ge().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>i2(n,t,i,e.enableHelper===!0)):i2(e,t,i,e.enableHelper===!0),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(ni.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(nt).multiplyScalar(.5),this.getCenter(Oi),ni.copy(this.matrix).setPosition(Oi),this.vertices=[new O(-nt.x,nt.y,nt.z).applyMatrix4(ni),new O(-nt.x,-nt.y,nt.z).applyMatrix4(ni),new O(nt.x,-nt.y,nt.z).applyMatrix4(ni),new O(nt.x,nt.y,nt.z).applyMatrix4(ni),new O(-nt.x,nt.y,-nt.z).applyMatrix4(ni),new O(-nt.x,-nt.y,-nt.z).applyMatrix4(ni),new O(nt.x,-nt.y,-nt.z).applyMatrix4(ni),new O(nt.x,nt.y,-nt.z).applyMatrix4(ni)]}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=[new Un(this.vertices[0],this.vertices[3]),new Un(this.vertices[1],this.vertices[2]),new Un(this.vertices[5],this.vertices[6]),new Un(this.vertices[4],this.vertices[7]),new Un(this.vertices[0],this.vertices[1]),new Un(this.vertices[3],this.vertices[2]),new Un(this.vertices[7],this.vertices[6]),new Un(this.vertices[4],this.vertices[5]),new Un(this.vertices[0],this.vertices[4]),new Un(this.vertices[1],this.vertices[5]),new Un(this.vertices[2],this.vertices[6]),new Un(this.vertices[3],this.vertices[7])],this.centerEdges=this.edges.map(e=>e.getCenter(new O))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=[new O().copy(this.vertices[0]).sub(this.vertices[2]).multiplyScalar(.5).add(this.vertices[2]),new O().copy(this.vertices[7]).sub(this.vertices[5]).multiplyScalar(.5).add(this.vertices[5]),new O().copy(this.vertices[4]).sub(this.vertices[1]).multiplyScalar(.5).add(this.vertices[1]),new O().copy(this.vertices[3]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6]),new O().copy(this.vertices[4]).sub(this.vertices[3]).multiplyScalar(.5).add(this.vertices[3]),new O().copy(this.vertices[1]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6])]}};function pte(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let d=1-i;return r.w=d*e.w+i*t.w,r.x=d*e.x+i*t.x,r.y=d*e.y+i*t.y,r.z=d*e.z+i*t.z,r.normalize(),r}let a=Math.sqrt(s),o=Math.atan2(a,n),l=Math.sin((1-i)*o)/a,h=Math.sin(i*o)/a;return r.w=e.w*l+t.w*h,r.x=e.x*l+t.x*h,r.y=e.y*l+t.y*h,r.z=e.z*l+t.z*h,r}var s2=class{constructor(e){e=e!=null?e:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},zt=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=sr.generateUUID(),this.type=e,this.name="",this.userData={}}analyze(e,t){t=t!=null?t:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r!=null?r:{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r!=null?r:{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t!=null?t:this.getType(e,t);let i=e.getNodeData(r!=null?r:this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,s){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getJSONNode(e){if((e==null?void 0:e.materials)&&(e==null?void 0:e.materials[this.uuid])!==void 0)return e.materials[this.uuid]}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof zt&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}copy(e){return this.name=e.name,e.type&&(this.type=e.type),e.frameId&&(this.frameId=e.frameId),e.hashProperties&&(this.hashProperties=e.hashProperties.map(t=>t)),this.userData=JSON.parse(JSON.stringify(e.userData)),this.shortcuts=JSON.parse(JSON.stringify(e.shortcuts)),this}clone(){return new this.constructor().copy(this)}createJSONNode(e){let t=e===void 0||typeof e=="string";if(typeof this.type!="string")throw new Error("Node does not allow serialization.");let r={};return r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),!t&&e&&(e.nodes[this.uuid]=r),r}toJSON(e){var t;return(t=this.getJSONNode(e))!=null?t:this.createJSONNode(e)}fromJSON(e,t){return this.uuid=e.uuid,this.type=e.type,e.name&&(this.name=e.name),e.userData&&(this.userData=e.userData),this}},fte=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},wn=new fte,br=class extends zt{constructor(e,t){super(e);this.scope="",t=t!=null?t:{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t!=null?t:this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=sr.generateUUID()),r=e.getUUID(r!=null?r:this.getUUID(),!n);let s=e.getNodeData(r),a=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return s.name=s.name||super.build(e,t,r),s.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||s.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let o=this.getTemp(e,r);if(o)return e.format(o,a,t);{o=super.generate(e,t,r,s.output,i);let l=this.generate(e,a,r);return e.addNodeCode(o+" = "+l+";"),e.format(o,a,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r!=null?r:this.uuid,e.getTempVar(r,i!=null?i:this.getType(e),n,this.getLabel()).name}},Cs=class extends br{constructor(e,t){t=t!=null?t:{},t.shared=t.shared!==void 0?t.shared:!1;super(e,t);this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}createJSONNode(e){let t=super.createJSONNode(e);return this.readonly===!0&&(t.readonly=this.readonly),t}fromJSON(e,t){return super.fromJSON(e,t),e.readonly!==void 0&&this.setReadonly(e.readonly),this}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let a=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}copy(e){return super.copy(e),this.readonly=e.readonly,this}},fs=class extends Cs{constructor(e=0,t){super("v2");this.nodeType="Vector2",this.value=e instanceof Q?e:new Q(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.x=this.value.x,t.y=this.value.y,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.x&&(this.value.x=e.x),e.y&&(this.value.y=e.y),this}},gs=class extends Cs{constructor(e=0,t,r){super("v3");this.nodeType="Vector3",this.value=e instanceof O?e:new O(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.x=this.value.x,t.y=this.value.y,t.z=this.value.z,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.x&&(this.value.x=e.x),e.y&&(this.value.y=e.y),e.z&&(this.value.z=e.z),this}},wh=class extends Cs{constructor(e){super("v4");this.nodeType="Vector4",this.value=e instanceof Na?e:new Na(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}},mte=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,a2=/[a-z_0-9]+/gi,rt=class extends br{constructor(e,t,r,i,n){super(n);this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let s,a=0,o=this.src;if(this.includes)for(let h=0;h<this.includes.length;h++)e.include(this.includes[h],this);for(let h in this.extensions)e.extensions[h]=!0;let l=[];for(;s=a2.exec(this.src);)l.push(s);for(let h=0;h<l.length;h++){let d=l[h],p=d[0],f=this.isMethod?!this.getInputByName(p):!0,m=p;if(this.keywords[p]||this.useKeywords&&f&&wn.containsKeyword(p)){let v=this.keywords[p];if(!v){let w=wn.getKeywordData(p);w.cache&&(v=e.keywords[p]),v=v||wn.getKeyword(p,e),w.cache&&(e.keywords[p]=v)}m=v.build(e)}p!==m&&(o=o.substring(0,d.index+a)+m+o.substring(d.index+p.length+a),a+=m.length-p.length),this.getIncludeByName(m)===void 0&&wn.contains(m)&&e.include(wn.get(m))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t!=null?t:[],this.extensions=r!=null?r:{},this.keywords=i!=null?i:{},this.isMethod){let n=mte.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(a2);if(s){let a=0;for(;a<s.length;){let o=s[a++],l;o==="in"||o==="out"||o==="inout"?l=s[a++]:(l=o,o="");let h=s[a++];this.inputs.push({name:h,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}copy(e){return super.copy(e),this.isMethod=e.isMethod,this.useKeywords=e.useKeywords,e.type!==void 0&&(this.type=e.type),this.parse(e.src,e.includes,e.extensions,e.keywords),this}toJSON(e){var t;let r=this.getJSONNode(e);if(!r){r=this.createJSONNode(e),r.src=this.src,r.isMethod=this.isMethod,r.useKeywords=this.useKeywords,this.isMethod||(r.type=this.type),r.extensions=JSON.parse(JSON.stringify(this.extensions));let i={};for(let n in this.keywords)i[n]=this.keywords[n].toJSON(e).uuid;if(r.keywords=i,(t=this.includes)==null?void 0:t.length){let n=[];for(let s=0;s<this.includes.length;s++)n.push(this.includes[s].toJSON(e).uuid);r.includes=n}r.isMethod=this.isMethod,r.inputs=this.inputs}return r.nodeType=this.nodeType,r}fromJSON(e,t){if(super.fromJSON(e,t),e.inputs!==void 0&&(this.inputs=e.inputs),e.isMethod!==void 0&&(this.isMethod=e.isMethod),e.src&&(this.src=e.src),e.isMethod&&(this.isMethod=e.isMethod),e.useKeywords&&(this.useKeywords=e.useKeywords),e.type&&(this.type=e.type),e.extensions&&(this.extensions=e.extensions),e.keywords&&t){this.keywords={};for(let r in e.keywords)this.keywords[r]=t.getNode(e.keywords[r])}return e.includes&&t&&(this.includes=e.includes.map(r=>t.getNode(r))),this}},gte=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,fD=class extends br{constructor(e="",t){super();this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||fD.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let s,a,o="",l=gte.exec(e);this.useDefine=n!=null?n:this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],s=l[2],o=l[3]):(s=this.src,a="f"),this.name=s,this.type=a,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}copy(e){return super.copy(e),this.parse(e.src,void 0,void 0,void 0,e.useDefine),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.src=this.src,t.useDefine=this.useDefine,t.value=this.value,t.name=this.name),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.src&&(this.src=e.src),e.value&&(this.value=e.value),e.name&&(this.name=e.name),e.useDefine!==void 0&&(this.useDefine=e.useDefine),this}},Wt=fD;Wt.PI="PI",Wt.PI2="PI2",Wt.RECIPROCAL_PI="RECIPROCAL_PI",Wt.RECIPROCAL_PI2="RECIPROCAL_PI2",Wt.LOG2="LOG2",Wt.EPSILON="EPSILON";var vte=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),yte=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),mD=class extends br{constructor(e=""){super();this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=vte.exec(e);if(t){let r=t[2],i;for(;i=yte.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.src=this.src),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.src&&(this.src=e.src,this.parse(this.src)),this}},yS=class extends br{constructor(e){super("v2",{shared:!1});this.nodeType="UV",this.index=e!=null?e:0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}copy(e){return super.copy(e),this.index=e.index,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.index=this.index),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.index&&(this.index=e.index),this}};wn.addKeyword("uv",function(){return new yS});wn.addKeyword("uv2",function(){return new yS(1)});var Qe=class extends Cs{constructor(e){super("f");this.nodeType="Float",this.value=e!=null?e:0}generateReadonly(e,t,r,i,n,s){return e.format(this.value+(this.value%1?"":".0"),i,t)}copy(e){return super.copy(e),this.value=e.value,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value),this}},Pr=class extends rt{constructor(e="",t,r,i,n){super(e,n,i,r,t);this.nodeType="Expression"}},hh=class extends br{constructor(e=new zt,t){super("v4");this.nodeType="ColorSpace",this.factor=new zt,this.input=e,this.method=t!=null?t:hh.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Bi:return["Linear"];case Hp:return["sRGB"];case Gv:return["RGBE"];case E_:return["RGBM",new Qe(7).setReadonly(!0)];case T_:return["RGBM",new Qe(16).setReadonly(!0)];case C_:return["RGBD",new Qe(256).setReadonly(!0)];case Gp:return["Gamma",new Pr("float( GAMMA_FACTOR )","f")];default:return[]}}generate(e,t){let r=this.input.build(e,"v4"),i=this.getType(e),n=hh.Nodes[this.method],s=e.include(n);if(s===hh.LINEAR_TO_LINEAR)return e.format(r,i,t);if(n.inputs.length===2){let a=this.factor.build(e,"f");return e.format(s+"( "+r+", "+a+" )",i,t)}else return e.format(s+"( "+r+" )",i,t)}fromEncoding(e){let t=hh.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=hh.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}copy(e){return super.copy(e),this.input.copy(e.input),this.method=e.method,this.factor.copy(e.factor),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.input=this.input.toJSON(e).uuid,t.factor=this.factor.toJSON(e).uuid,t.method=this.method),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.input&&(this.input=t.getNode(e.input)),e.factor&&(this.factor=t.getNode(e.factor)),e.method&&(this.method=e.method),this}},ii=hh;ii.Nodes={LinearToLinear:new rt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),GammaToLinear:new rt(["vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {","	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );","}"].join(`
`)),LinearToGamma:new rt(["vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {","	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );","}"].join(`
`)),sRGBToLinear:new rt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new rt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`)),RGBEToLinear:new rt(["vec4 RGBEToLinear( in vec4 value ) {","	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );","}"].join(`
`)),LinearToRGBE:new rt(["vec4 LinearToRGBE( in vec4 value ) {","	float maxComponent = max( max( value.r, value.g ), value.b );","	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );","	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );","}"].join(`
`)),RGBMToLinear:new rt(["vec3 RGBMToLinear( in vec4 value, in float maxRange ) {","	return vec4( value.xyz * value.w * maxRange, 1.0 );","}"].join(`
`)),LinearToRGBM:new rt(["vec3 LinearToRGBM( in vec4 value, in float maxRange ) {","	float maxRGB = max( value.x, max( value.g, value.b ) );","	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );","	M            = ceil( M * 255.0 ) / 255.0;","	return vec4( value.rgb / ( M * maxRange ), M );","}"].join(`
`)),RGBDToLinear:new rt(["vec3 RGBDToLinear( in vec4 value, in float maxRange ) {","	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );","}"].join(`
`)),LinearToRGBD:new rt(["vec3 LinearToRGBD( in vec4 value, in float maxRange ) {","	float maxRGB = max( value.x, max( value.g, value.b ) );","	float D      = max( maxRange / maxRGB, 1.0 );","	D            = clamp( floor( D ) / 255.0, 0.0, 1.0 );","	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );","}"].join(`
`)),cLogLuvM:new Wt("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),LinearToLogLuv:new rt(["vec4 LinearToLogLuv( in vec4 value ) {","	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;","	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));","	vec4 vResult;","	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;","	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;","	vResult.w = fract(Le);","	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;","	return vResult;","}"].join(`
`),[new Wt("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );")]),cLogLuvInverseM:new Wt("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );"),LogLuvToLinear:new rt(["vec4 LogLuvToLinear( in vec4 value ) {","	float Le = value.z * 255.0 + value.w;","	vec3 Xp_Y_XYZp;","	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);","	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;","	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;","	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;","	return vec4( max(vRGB, 0.0), 1.0 );","}"].join(`
`),[new Wt("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );")])},ii.LINEAR_TO_LINEAR="LinearToLinear",ii.GAMMA_TO_LINEAR="GammaToLinear",ii.LINEAR_TO_GAMMA="LinearToGamma",ii.SRGB_TO_LINEAR="sRGBToLinear",ii.LINEAR_TO_SRGB="LinearTosRGB",ii.RGBE_TO_LINEAR="RGBEToLinear",ii.LINEAR_TO_RGBE="LinearToRGBE",ii.RGBM_TO_LINEAR="RGBMToLinear",ii.LINEAR_TO_RGBM="LinearToRGBM",ii.RGBD_TO_LINEAR="RGBDToLinear",ii.LINEAR_TO_RGBD="LinearToRGBD",ii.LINEAR_TO_LOG_LUV="LinearToLogLuv",ii.LOG_LUV_TO_LINEAR="LogLuvToLinear";var ch=class extends Ir{toJSON(e){let t=super.toJSON(e),r=e===void 0||typeof e=="string";if(this.image!==void 0&&!r){let i=this.image;if(Array.isArray(i)){e.images[i.uuid].url=[];for(let n=0;n<i.length;n++)e.images[i.uuid].url[n]=o2(i[n])}else e.images[i.uuid].url=o2(i)}return t}};function o2(e){return typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?xte(e):(console.warn("THREE.Texture: Unable to serialize Texture."),"")}var nh;function xte(e){if(/^data:/i.test(e.src))return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{nh===void 0&&(nh=document.createElement("canvas")),nh.width=e.width,nh.height=e.height;let i=nh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=nh}let r=e.src.startsWith("blob:")?e.fileName:e.src;return/\.jpe?g$/i.test(r)?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}var Aa=class extends Cs{constructor(e=new ch,t,r,i){super("v4",{shared:!0});this.nodeType="Texture",this.value=e,this.uv=t!=null?t:new yS,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var r;if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),n=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let a,o;this.project?a="texture2DProj":a=s?"tex2DBias":"tex2D",s?o=a+"( "+i+", "+n+", "+s+" )":o=a+"( "+i+", "+n+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},h=this.getType(e);return e.addContext(l),this.colorSpace=(r=this.colorSpace)!=null?r:new ii(new Pr("",h)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,h),e.removeContext(),e.format(o,h,t)}copy(e){return super.copy(e),e.value.isRenderTargetTexture?this.value=e.value:this.value.copy(e.value),this.uv.copy(e.uv),e.bias?this.bias?this.bias.copy(e.bias):this.bias=e.bias.clone():this.bias=void 0,e.colorSpace?this.colorSpace?this.colorSpace.copy(e.colorSpace):this.colorSpace=e.colorSpace.clone():this.colorSpace=void 0,this.project=e.project,e.value.isRenderTargetTexture||(this.value.updateMatrix(),this.value.needsUpdate=!0),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.toJSON(e).uuid),t.uv=this.uv.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),this.project=e.project,e.value&&(this.value=t.getTexture(e.value),this.value.updateMatrix()),e.uv&&(this.uv=t.getNode(e.uv)),e.bias&&(this.bias=t.getNode(e.bias)),this}},l2=class extends br{constructor(e,t){super();this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t!=null?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let s=this.value,a=s.build(e,t)+"( ",o=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let h=s.inputs[l],d=this.inputs[l]||this.inputs[h.name];o.push(d.build(e,e.getTypeByFormat(h.type)))}a+=o.join(", ")+" )"}return e.format(a,i,t)}copy(e){return super.copy(e),this.value.copy(e.value),this.inputs=e.inputs.map(t=>t.clone()),this}toJSON(e){var t;let r=this.getJSONNode(e);if(!r){let i=this.value;if(r=this.createJSONNode(e),r.value=this.value.toJSON(e).uuid,(t=i.inputs)==null?void 0:t.length){r.inputs={};for(let n=0;n<i.inputs.length;n++){let s=i.inputs[n],a=this.inputs[n];r.inputs[s.name]=a.toJSON(e).uuid}}}return r}},_h;(function(e){e.ADD="+",e.SUB="-",e.MUL="*",e.DIV="/"})(_h||(_h={}));var gD=class extends br{constructor(e=new zt,t=new zt,r=gD.ADD){super();this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b.copy(e.b),this.op=e.op,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.a&&(this.a=t.getNode(e.a)),e.b&&(this.b=t.getNode(e.b)),e.op&&(this.op=e.op),this}},Ca=gD;Ca.ADD=_h.ADD,Ca.SUB=_h.SUB,Ca.MUL=_h.MUL,Ca.DIV=_h.DIV;var Lt;(function(e){e.RAD="radians",e.DEG="degrees",e.EXP="exp",e.EXP2="exp2",e.LOG="log",e.LOG2="log2",e.SQRT="sqrt",e.INV_SQRT="inversesqrt",e.FLOOR="floor",e.CEIL="ceil",e.NORMALIZE="normalize",e.FRACT="fract",e.SATURATE="saturate",e.SIN="sin",e.COS="cos",e.TAN="tan",e.ASIN="asin",e.ACOS="acos",e.ARCTAN="atan",e.ABS="abs",e.SIGN="sign",e.LENGTH="length",e.NEGATE="negate",e.INVERT="invert",e.MIN="min",e.MAX="max",e.MOD="mod",e.STEP="step",e.REFLECT="reflect",e.DISTANCE="distance",e.DOT="dot",e.CROSS="cross",e.POW="pow",e.MIX="mix",e.CLAMP="clamp",e.REFRACT="refract",e.SMOOTHSTEP="smoothstep",e.FACEFORWARD="faceforward"})(Lt||(Lt={}));var ur=class extends br{constructor(e=new zt,t=ur.ABS,r,i){super();this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case ur.MIX:case ur.CLAMP:case ur.REFRACT:case ur.SMOOTHSTEP:case ur.FACEFORWARD:return 3;case ur.MIN:case ur.MAX:case ur.MOD:case ur.STEP:case ur.REFLECT:case ur.DISTANCE:case ur.DOT:case ur.CROSS:case ur.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case ur.LENGTH:case ur.DISTANCE:case ur.DOT:return"f";case ur.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),h=this.getType(e);switch(this.type=h,this.method){case ur.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case ur.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case ur.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case ur.STEP:r=this.a.build(e,s===1?"f":l),i=this.b.build(e,l);break;case ur.MIN:case ur.MAX:case ur.MOD:r=this.a.build(e,l),i=this.b.build(e,a===1?"f":l);break;case ur.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case ur.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let d=[];d.push(r),i&&d.push(i),n&&d.push(n);let p=this.getNumInputs(e);if(d.length!==p)throw Error(`Arguments not match used in "${this.method}". Require ${p}, currently ${d.length}.`);return e.format(this.method+"( "+d.join(", ")+" )",h,t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b=e.b instanceof zt?e.b.clone():e.b,this.c=e.c instanceof zt?e.c.clone():e.c,this.method=e.method,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.a=this.a.toJSON(e).uuid,this.b&&(t.b=this.b.toJSON(e).uuid),this.c&&(t.c=this.c.toJSON(e).uuid),t.method=this.method),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.a&&(this.a=t.getNode(e.a)),e.b&&(this.b=t.getNode(e.b)),e.c&&(this.c=t.getNode(e.c)),e.method&&(this.method=e.method),this}},vt=ur;vt.RAD=Lt.RAD,vt.DEG=Lt.DEG,vt.EXP=Lt.EXP,vt.EXP2=Lt.EXP2,vt.LOG=Lt.LOG,vt.LOG2=Lt.LOG2,vt.SQRT=Lt.SQRT,vt.INV_SQRT=Lt.INV_SQRT,vt.FLOOR=Lt.FLOOR,vt.CEIL=Lt.CEIL,vt.NORMALIZE=Lt.NORMALIZE,vt.FRACT=Lt.FRACT,vt.SATURATE=Lt.SATURATE,vt.SIN=Lt.SIN,vt.COS=Lt.COS,vt.TAN=Lt.TAN,vt.ASIN=Lt.ASIN,vt.ACOS=Lt.ACOS,vt.ARCTAN=Lt.ARCTAN,vt.ABS=Lt.ABS,vt.SIGN=Lt.SIGN,vt.LENGTH=Lt.LENGTH,vt.NEGATE=Lt.NEGATE,vt.INVERT=Lt.INVERT,vt.MIN=Lt.MIN,vt.MAX=Lt.MAX,vt.MOD=Lt.MOD,vt.STEP=Lt.STEP,vt.REFLECT=Lt.REFLECT,vt.DISTANCE=Lt.DISTANCE,vt.DOT=Lt.DOT,vt.CROSS=Lt.CROSS,vt.POW=Lt.POW,vt.MIX=Lt.MIX,vt.CLAMP=Lt.CLAMP,vt.REFRACT=Lt.REFRACT,vt.SMOOTHSTEP=Lt.SMOOTHSTEP,vt.FACEFORWARD=Lt.FACEFORWARD;var Cd=class extends br{constructor(e=new zt,t=new zt,r=new zt){super("v4");this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){var n,s,a,o;let l=new l2(Cd.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=(n=this.colorSpaceTL)!=null?n:new ii(new Pr("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(l.build(e)+".tl"),this.colorSpaceTR=(s=this.colorSpaceTR)!=null?s:new ii(new Pr("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(l.build(e)+".tr"),this.colorSpaceBL=(a=this.colorSpaceBL)!=null?a:new ii(new Pr("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(l.build(e)+".bl"),this.colorSpaceBR=(o=this.colorSpaceBR)!=null?o:new ii(new Pr("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(l.build(e)+".br");let h={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(h),this.colorSpaceTLExp=new Pr(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Pr(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Pr(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Pr(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let d=new Pr("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return d.keywords.cubeUV_TL=this.colorSpaceTLExp,d.keywords.cubeUV_TR=this.colorSpaceTRExp,d.keywords.cubeUV_BL=this.colorSpaceBLExp,d.keywords.cubeUV_BR=this.colorSpaceBRExp,d.keywords.cubeUV=l,d}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new l2(Cd.Nodes.roughnessToMip,[i]),s=new vt(n,Cd.Nodes.m0,Cd.Nodes.cubeUV_maxMipLevel,vt.CLAMP),a=new vt(s,vt.FLOOR),o=new vt(s,vt.FRACT),l=this.bilinearCubeUV(e,this.value,r,a),h=this.bilinearCubeUV(e,this.value,r,new Ca(a,new Qe(1).setReadonly(!0),Ca.ADD)),d=new vt(l,h,o,vt.MIX);return e.format(d.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.uv.copy(e.uv),this.bias.copy(e.bias),this.value.copy(e.value),e.colorSpaceTL?this.colorSpaceTL?this.colorSpaceTL.copy(e.colorSpaceTL):this.colorSpaceTL=e.colorSpaceTL.clone():this.colorSpaceTL=void 0,e.colorSpaceTR?this.colorSpaceTR?this.colorSpaceTR.copy(e.colorSpaceTR):this.colorSpaceTR=e.colorSpaceTR.clone():this.colorSpaceTR=void 0,e.colorSpaceBL?this.colorSpaceBL?this.colorSpaceBL.copy(e.colorSpaceBL):this.colorSpaceBL=e.colorSpaceBL.clone():this.colorSpaceBL=void 0,e.colorSpaceBR?this.colorSpaceBR?this.colorSpaceBR.copy(e.colorSpaceBR):this.colorSpaceBR=e.colorSpaceBR.clone():this.colorSpaceBR=void 0,e.colorSpaceTLExp?this.colorSpaceTLExp?this.colorSpaceTLExp.copy(e.colorSpaceTLExp):this.colorSpaceTLExp=e.colorSpaceTLExp.clone():this.colorSpaceTLExp=void 0,e.colorSpaceTRExp?this.colorSpaceTRExp?this.colorSpaceTRExp.copy(e.colorSpaceTRExp):this.colorSpaceTRExp=e.colorSpaceTRExp.clone():this.colorSpaceTRExp=void 0,e.colorSpaceBLExp?this.colorSpaceBLExp?this.colorSpaceBLExp.copy(e.colorSpaceBLExp):this.colorSpaceBLExp=e.colorSpaceBLExp.clone():this.colorSpaceBLExp=void 0,e.colorSpaceBRExp?this.colorSpaceBRExp?this.colorSpaceBRExp.copy(e.colorSpaceBRExp):this.colorSpaceBRExp=e.colorSpaceBRExp.clone():this.colorSpaceBRExp=void 0,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid,this.colorSpaceTL&&this.colorSpaceTL.toJSON(e).uuid,this.colorSpaceTR&&this.colorSpaceTR.toJSON(e).uuid,this.colorSpaceBL&&this.colorSpaceBL.toJSON(e).uuid,this.colorSpaceBR&&this.colorSpaceBR.toJSON(e).uuid,this.colorSpaceTLExp&&this.colorSpaceTLExp.toJSON(e).uuid,this.colorSpaceTRExp&&this.colorSpaceTRExp.toJSON(e).uuid,this.colorSpaceBLExp&&this.colorSpaceBLExp.toJSON(e).uuid,this.colorSpaceBRExp&&this.colorSpaceBRExp.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getNode(e.value)),e.uv&&(this.uv=t.getNode(e.uv)),e.bias&&(this.bias=t.getNode(e.bias)),e.colorSpaceTL&&(this.colorSpaceTL=t.getNode(e.colorSpaceTL)),e.colorSpaceTR&&(this.colorSpaceTR=t.getNode(e.colorSpaceTR)),e.colorSpaceBL&&(this.colorSpaceBL=t.getNode(e.colorSpaceBL)),e.colorSpaceBR&&(this.colorSpaceBR=t.getNode(e.colorSpaceBR)),e.colorSpaceTLExp&&(this.colorSpaceTLExp=t.getNode(e.colorSpaceTLExp)),e.colorSpaceTRExp&&(this.colorSpaceTRExp=t.getNode(e.colorSpaceTRExp)),e.colorSpaceBLExp&&(this.colorSpaceBLExp=t.getNode(e.colorSpaceBLExp)),e.colorSpaceBRExp&&(this.colorSpaceBRExp=t.getNode(e.colorSpaceBRExp)),this}},gw=Cd;gw.Nodes=function(){let e=new mD(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new Wt("float cubeUV_maxMipLevel 8.0",!0),r=new Wt("float cubeUV_minMipLevel 4.0",!0),i=new Wt("float cubeUV_maxTileSize 256.0",!0),n=new Wt("float cubeUV_minTileSize 16.0",!0),s=new rt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let a=new rt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let o=new rt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,a,t,r,i,n]);o.useKeywords=!1;let l=new Wt("float r0 1.0",!0),h=new Wt("float v0 0.339",!0),d=new Wt("float m0 -2.0",!0),p=new Wt("float r1 0.8",!0),f=new Wt("float v1 0.276",!0),m=new Wt("float m1 -1.0",!0),v=new Wt("float r4 0.4",!0),w=new Wt("float v4 0.046",!0),S=new Wt("float m4 2.0",!0),y=new Wt("float r5 0.305",!0),g=new Wt("float v5 0.016",!0),_=new Wt("float m5 3.0",!0),b=new Wt("float r6 0.21",!0),T=new Wt("float v6 0.0038",!0),A=new Wt("float m6 4.0",!0),M=[l,h,d,p,f,m,v,w,S,y,g,_,b,T,A],L=new rt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,M);return{bilinearCubeUV:o,roughnessToMip:L,m0:d,cubeUV_maxMipLevel:t}}();var dh=class extends br{constructor(e){super("v3");this.nodeType="Normal",this.scope=e!=null?e:dh.VIEW}getShared(){return this.scope===dh.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let s;switch(this.scope){case dh.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case dh.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case dh.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},An=dh;An.LOCAL="local",An.WORLD="world",An.VIEW="view",An.NORMAL="normal";wn.addKeyword("viewNormal",function(){return new An(An.VIEW)});wn.addKeyword("localNormal",function(){return new An(An.NORMAL)});wn.addKeyword("worldNormal",function(){return new An(An.WORLD)});var so=class extends br{constructor(e){super("v3");this.nodeType="Position",this.scope=e!=null?e:so.LOCAL}getType(){switch(this.scope){case so.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case so.LOCAL:case so.WORLD:return!1}return!0}generate(e,t,r,i,n){let s;switch(this.scope){case so.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case so.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case so.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case so.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},Wn=so;Wn.LOCAL="local",Wn.WORLD="world",Wn.VIEW="view",Wn.PROJECTION="projection";wn.addKeyword("position",function(){return new Wn});wn.addKeyword("worldPosition",function(){return new Wn(Wn.WORLD)});wn.addKeyword("viewPosition",function(){return new Wn(Wn.VIEW)});var fa=class extends br{constructor(e){super("v3");this.nodeType="Reflect",this.scope=e!=null?e:fa.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case fa.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case fa.VECTOR:{let n=new An(An.VIEW),s=e.context.roughness,a=n.build(e,"v3"),o=new Wn(Wn.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,h=`reflect( -normalize( ${o} ), ${a} )`;l&&(h=`normalize( mix( ${h}, ${a}, ${l} * ${l} ) )`);let d=`inverseTransformDirection( ${h}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${d};`),i="reflectVec"):i=d;break}case fa.CUBE:{let n=new fa(fa.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case fa.SPHERE:{let n=new fa(fa.VECTOR).build(e,"v3"),s="normalize( ( viewMatrix * vec4( "+n+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${s};`),i="reflectSphereVec"):i=s;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},Gh=fa;Gh.CUBE="cube",Gh.SPHERE="sphere",Gh.VECTOR="vector";var wte=class extends br{constructor(e=new Aa,t,r){super("v4");this.nodeType="TextureCube",this.value=e,this.radianceNode=new gw(this.value,t!=null?t:new Gh(Gh.VECTOR),r),this.irradianceNode=new gw(this.value,new An(An.WORLD),new Qe(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}copy(e){return super.copy(e),this.value.copy(e.value),this.radianceNode.copy(e.radianceNode),this.irradianceNode.copy(e.irradianceNode),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.toJSON(e).uuid,this.radianceNode&&(t.radianceNode=this.radianceNode.toJSON(e).uuid),this.irradianceNode&&(t.irradianceNode=this.irradianceNode.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getNode(e.value)),e.radianceNode&&(this.radianceNode=t.getNode(e.radianceNode)),e.irradianceNode&&(this.irradianceNode=t.getNode(e.irradianceNode)),this}},_te=class extends Cs{constructor(e=new Vp,t,r){super("v4",{shared:!0});this.nodeType="CubeTexture",this.value=e,this.uv=t!=null?t:new Gh,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var r,i;if(t==="samplerCube")return this.getTexture(e,t);let n=this.getTexture(e,t),s=(r=this.uv)==null?void 0:r.build(e,"v3"),a=this.bias?this.bias.build(e,"f"):void 0;a===void 0&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f"));let o;a?o="texCubeBias( "+n+", "+s+", "+a+" )":o="texCube( "+n+", "+s+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},h=this.getType(e);return e.addContext(l),this.colorSpace=(i=this.colorSpace)!=null?i:new ii(new Pr("",h)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,h),e.removeContext(),e.format(o,h,t)}copy(e){return super.copy(e),this.value.copy(e.value),e.uv?this.uv?this.uv.copy(e.uv):this.uv=e.uv.clone():this.uv=void 0,e.bias?this.bias?this.bias.copy(e.bias):this.bias=e.bias.clone():this.bias=void 0,this}toJSON(e){var t;let r=this.getJSONNode(e);return r||(r=this.createJSONNode(e),this.value&&(r.value=this.value.uuid),r.uv=(t=this.uv)==null?void 0:t.toJSON(e).uuid,this.bias&&(r.bias=this.bias.toJSON(e).uuid)),r.nodeType=this.nodeType,r}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getTexture(e.value)),e.uv&&(this.uv=t.getNode(e.uv)),e.bias&&(this.bias=t.getNode(e.bias)),this}},u2=["x","y","z","w"],Ste=["float","vec2","vec3","vec4"],bte={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Ate={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Mte=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let s=0;s<i.length;s++)i[s].src&&(n+=i[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.requires={uv:[],color:[],lights:!1,fog:!1,transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e!=null?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t!=null?t:this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t!=null?t:this.shader]+=e+`
`}clearNodeCode(e){e=e!=null?e:this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t!=null?t:this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t!=null?t:this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",s=""){let a=this.getVars(i),o=a[e];if(!o){let l=a.length;o={name:r||"node"+n+l+(s?"_"+s:""),type:t},a.push(o),a[e]=o}return o}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t!=null?t:"";let r="";for(let i=0,n=e.length;i<n;++i){let s=e[i],a=s.type,o=s.name,l=s.size,h=this.getFormatByType(a);if(h===void 0)throw new Error("Node pars "+h+" not found.");h.includes("[]")?r+=t+" "+h.substring(0,h.length-2)+" "+o+`[${l}];
`:r+=t+" "+h+" "+o+`;
`}return r}getVars(e){return this.inputs.vars[e!=null?e:this.shader]}getNodeData(e){let t=e instanceof zt?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,s){if(t.includes("[]")){let a=this.inputs.arrayUniforms,o=a.list.length,l=new s2({type:t,size:r.size,name:i||"nodeUA"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,o=a.list.length,l=new s2({type:t,name:i||"nodeU"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var i;let n;if(e=typeof e=="string"?wn.get(e):e,this.context.include===!1)return e.name;e instanceof rt?n=this.includes.functions:e instanceof Wt?n=this.includes.consts:e instanceof mD&&(n=this.includes.structs);let s=n[this.shader]=n[this.shader]||[];if(e){let a=s[e.name];if(a||(a=s[e.name]={node:e,deps:[]},s.push(a),a.src=e.build(this,"source")),e instanceof rt&&t&&s[t.name]&&s[t.name].deps.indexOf(e)==-1&&(s[t.name].deps.push(e),(i=e.includes)==null?void 0:i.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return r&&(a.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return Ste[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case Fp:case Up:return new _te(r);case kp:case Hv:return new wte(new Aa(r));default:return new Aa(r)}else{if(r.isVector2)return new fs(r);if(r.isVector3)return new gs(r);if(r.isVector4)return new wh(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return bte[e]||e}getFormatByType(e){return Ate[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return u2[e]}getIndexByElement(e){return u2.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Bi,t===Bi&&this.context.gamma&&(t=Gp),t}},h2=class extends zt{constructor(e=new zt){super("v4");this.nodeType="Raw",this.value=e}generate(e){let t=this.value.analyzeAndFlow(e,this.type),r=t.code+`
`;return e.isShader("vertex")?r+="gl_Position = "+t.result+";":r+="gl_FragColor = "+t.result+";",r}copy(e){return super.copy(e),this.value.copy(e.value),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=t.getNode(e.value)),this}},Qr=class extends Cs{constructor(e=0,t,r,i){super("c");this.nodeType="Color",this.value=e instanceof Na?e:new Na(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,s){r=e.getUUID(r!=null?r:this.getUUID()),i=i!=null?i:this.getType(e);let a=e.getNodeData(r),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},nr=class extends Cs{constructor(e){super("i");this.nodeType="Int",this.value=Math.floor(e!=null?e:0)}generateReadonly(e,t,r,i,n,s){return e.format(this.value.toString(),i,t)}copy(e){return super.copy(e),this.value=e.value,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value),this}},Gt;(function(e){e.POSITION="position",e.LIGHTING="light",e.COLOR="color",e.GRADIENT="gradient",e.NORMAL="normal",e.DEPTH="depth",e.TEXTURE="texture",e.NOISE="noise",e.FRESNEL="fresnel",e.RAINBOW="rainbow",e.TRANSMISSION="transmission",e.POINTS="points",e.MATCAP="matcap",e.LINES="lines",e.DISPLACE="displace"})(Gt||(Gt={}));var Mr;(function(e){e.POSITION="position",e.LIGHTING="light",e.COLOR="color"})(Mr||(Mr={}));var Xr=class{constructor(e,t,r,i){if(this.next=void 0,this.uniforms={},this.textures={},this.defines={},this.backLayer=void 0,this.isBack=!1,this.id=e,this.uuid=t,r){this.type=r.type;for(let n in r)n!=="type"&&n!=="calpha"&&(this.uniforms[`f${this.id}_${n}`]=r[n]);for(let n in i)this.defines[n]=i[n]}}copy(e){this.id=e.id,this.type=e.type,this.defines=Le({},e.defines);for(let t in e.uniforms)this.getName(t)==="transmissionSamplerMap"||this.getName(t)==="transmissionDepthMap"||(this.uniforms[t]?this.uniforms[t].copy(e.uniforms[t]):this.uniforms[t]=e.uniforms[t].clone());return this}clone(){return new Xr(this.id).copy(this)}fromJSON(e,t){this.id=e.id,this.defines=Le({},e.defines);for(let r in e.uniforms)this.uniforms[r]=t.getNode(e.uniforms[r]);if(e.type===Gt.TEXTURE){if(!(`f${this.id}_textureSize`in this.uniforms)){let r=this.uniforms[`f${this.id}_texture`].value.image;this.uniforms[`f${e.id}_textureSize`]=new gs(r.width,r.height)}`f${this.id}_size`in this.uniforms||(this.uniforms[`f${e.id}_size`]=new fs(200,200)),`f${e.id}_axis`in this.uniforms||(this.uniforms[`f${e.id}_axis`]=new nr(0)),`f${e.id}_projection`in this.uniforms||(this.uniforms[`f${e.id}_projection`]=new nr(0))}else e.type===Gt.NOISE?(`f${e.id}_noiseType`in this.uniforms||(this.uniforms[`f${e.id}_noiseType`]=new nr(0)),`f${e.id}_size`in this.uniforms||(this.uniforms[`f${e.id}_size`]=new gs(-1,-1,-1))):e.type===Gt.DEPTH&&(`f${e.id}_isWorldSpace`in this.uniforms||(this.uniforms[`f${e.id}_isWorldSpace`]=new Qe(1)));return this}toJSON(e){let t={};for(let r in this.uniforms)t[r]=this.uniforms[r].toJSON(e).uuid;return{id:this.id,type:this.type,defines:JSON.parse(JSON.stringify(this.defines)),uniforms:t,next:this.next==null?void 0:this.next.toJSON(e)}}copyUniforms(e){for(let t in this.uniforms){let r=this.getName(t);r!==void 0&&e.uniforms[`f${e.id}_${r}`]&&r!=="transmissionDepthMap"&&r!=="transmissionSamplerMap"&&this.uniforms[t].copy(e.uniforms[`f${e.id}_${r}`])}return this}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getValues(){let e={type:this.type};for(let t in this.uniforms){let r=this.getName(t);if(r===void 0)continue;let i=this.uniforms[`f${this.id}_${r}`].value;i!==void 0&&(Array.isArray(i)?e[r]=i.map(n=>n.clone?n.clone():n):e[r]=i.clone?i.clone():i)}return e}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}isEqual(e){for(let t in e.uniforms){let r=e.getName(t);if(!r)return!1;let i=this.getValue(r),n=e.uniforms[t].value;if(n.value instanceof Ir){if(i.image!==n.image)return!1}else if(Array.isArray(n)){let s=i;for(let a=0,o=s.length;a<o;++a)if(s[a]!==n[a])return!1}else{let s=i;if(s.equals){if(!s.equals(n))return!1}else if(i!==n)return!1}}return!0}dispose(){}},c2=function(e,t){let r=e.id,i=e.type;return new Xr(r,void 0,{type:i}).fromJSON(e,t)};function vD(e){let t=e instanceof Xr?e.type:e;return t==="texture"||t==="displace_map"||t==="matcap"}var d2=class extends Cs{constructor(e){super("b");this.nodeType="Bool",this.value=e!=null?e:!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}copy(e){return super.copy(e),this.value=e.value,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value,this.getReadonly()===!0&&(t.readonly=!0)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value),this}},Ld=class extends Cs{constructor(e=1,t){super("v4[]");this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Et?new Array(e).fill(t):new Array(e).fill(new Et(0))}copy(e){return super.copy(e),this.value=e.value.map(t=>t.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.value=this.value.map(r=>({x:r.x,y:r.y,z:r.z,w:r.w}))),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=e.value.map(r=>new Et(r.x,r.y,r.z,r.w)),this.size=this.value.length),this}},Um=class extends Cs{constructor(e=1,t){super("f[]");this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}copy(e){return super.copy(e),this.size=e.size,this.value=[...e.value],this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.size=this.size,t.value=[...this.value]),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.value&&(this.value=[...e.value]),e.size?this.size=e.size:e.value&&(this.size=this.value.length),this}},sv=class extends Cs{constructor(e){super("m3");this.nodeType="Matrix3",this.value=e!=null?e:new Nr}generateReadonly(e,t,r,i,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}copy(e){return super.copy(e),this.elements=e.elements,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.elements=this.value.elements.concat()),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.elements&&(this.elements=e.elements),this}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},p2;(function(e){e[e.UV=0]="UV",e[e.PLANAR=1]="PLANAR",e[e.SPHERICAL=2]="SPHERICAL",e[e.CYLINDRICAL=3]="CYLINDRICAL"})(p2||(p2={}));var wg=class extends br{constructor(e=new Aa,t,r,i,n,s,a,o){super("v3");this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.size=s,this.mat=new sv(this.texture.value.matrix),this.alpha=a,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r;switch(this.projection.value){case 3:r=e.include(wg.Nodes.cylindrical);break;case 2:r=e.include(wg.Nodes.spherical);break;case 1:let n=new rt(`
		vec3 g${this.uuid.toString().replace(/-/g,"")}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( (g${this.uuid.toString().replace(/-/g,"")}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);r=e.include(n);break;default:r=e.include(wg.Nodes.uv);break}if(this.projection.value===1&&this.firstTime){let n=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexParsCode(`varying vec2 ${n}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${n}_vCustomUv;`),e.addVertexFinalCode(`
                        vec3 ${n}_posN = transformed;
${this.axis.value===0?`
									   float ${n}_u = (1. + (${n}_posN.z)) / 2.;
									   float ${n}_v = (1. + (${n}_posN.y)) / 2.;
									   `:""}

${this.axis.value===1?`
									   float ${n}_u = (1. + (${n}_posN.x)) / 2.;
									   float ${n}_v = (1. - (${n}_posN.z)) / 2.;
									   `:""}

${this.axis.value===2?`
									   float ${n}_u = (1. + (${n}_posN.x)) / 2.;
									   float ${n}_v = (1. + (${n}_posN.y)) / 2.;
									   `:""}

                        ${n}_vCustomUv = vec2(${n}_u, ${n}_v);
                    `)}e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.texture.getTexture(e,"t")),i.push(this.textureSize.build(e,"v2")),i.push(this.crop.build(e,"f")),i.push(this.mat.build(e,"mat3")),i.push(this.size.build(e,"v2")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+i.join(",")+")",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.texture=this.texture.toJSON(e).uuid,t.textureSize=this.textureSize.toJSON(e).uuid,t.crop=this.crop.toJSON(e).uuid,t.projection=this.projection.toJSON(e).uuid,t.axis=this.axis.toJSON(e).uuid,t.size=this.size.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.texture&&(this.texture=t.getNode(e.texture),this.texture.value.updateMatrix(),this.mat=new sv(this.texture.value.matrix)),e.textureSize&&(this.textureSize=t.getNode(e.textureSize)),e.crop&&(this.crop=t.getNode(e.crop)),e.projection&&(this.projection=t.getNode(e.projection)),e.axis&&(this.axis=t.getNode(e.axis)),e.size&&(this.size=t.getNode(e.size)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.mode&&(this.mode=t.getNode(e.mode)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.texture.copy(e.texture),this.textureSize=e.textureSize.clone(),this.crop=e.crop.clone(),this.projection=e.projection.clone(),this.axis=e.axis.clone(),this.size=e.size.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this}},yD=wg;yD.Nodes=function(){let e=new rt(`
vec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),t=new rt(`
vec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}
`),r=new rt(`vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {

				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return col;
			}`);return{cylindrical:e,spherical:t,uv:r}}();var xD=class extends br{constructor(e,t,r,i,n,s,a){super("v3");this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.alpha=s,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(xD.Nodes.fresnel),i=[];return i.push(this.color.build(e,"c")),i.push(this.bias.build(e,"f")),i.push(this.scale.build(e,"f")),i.push(this.intensity.build(e,"f")),i.push(this.factor.build(e,"f")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.color=this.color.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid,t.intensity=this.intensity.toJSON(e).uuid,t.factor=this.factor.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.color&&(this.color=t.getNode(e.color)),e.bias&&(this.bias=t.getNode(e.bias)),e.scale&&(this.scale=t.getNode(e.scale)),e.intensity&&(this.intensity=t.getNode(e.intensity)),e.factor&&(this.factor=t.getNode(e.factor)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.mode&&(this.mode=t.getNode(e.mode)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.color=e.color.clone(),this.bias=e.bias.clone(),this.scale=e.scale.clone(),this.intensity=e.intensity.clone(),this.factor=e.factor.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this.calpha=e.calpha,this}},wD=xD;wD.Nodes=function(){return{fresnel:new rt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {
				float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

				float lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;
				calpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;
				return color;
			}`)}}();var av;(function(e){e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin"})(av||(av={}));var Js=function(){let e=5,t=new rt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),r=new rt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);r.keywords.F3=new Wt("float F3 0.3333333"),r.keywords.G3=new Wt("float G3 0.1666667");let i=new rt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[r]),n=new rt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),s=new rt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new rt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,s]),o=new rt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),l=new rt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),h=new rt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[l]),d=new rt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[h]);d.keywords.NUM_OCTAVES=new Wt(`int NUM_OCTAVES ${e}`);let p=new rt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),f=new rt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,s,p]);return{simplex:r,simplexFractal:i,simplexAshima:a,fbm:d,perlin:f}}(),_D=class extends br{constructor(e,t,r,i,n,s,a){super("v3");this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=s,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(_D.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.filmThickness=this.filmThickness.toJSON(e).uuid,t.movement=this.movement.toJSON(e).uuid,t.wavelengths=this.wavelengths.toJSON(e).uuid,t.noiseStrength=this.noiseStrength.toJSON(e).uuid,t.noiseScale=this.noiseScale.toJSON(e).uuid,t.offset=this.offset.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.filmThickness&&(this.filmThickness=t.getNode(e.filmThickness)),e.movement&&(this.movement=t.getNode(e.movement)),e.wavelengths&&(this.wavelengths=t.getNode(e.wavelengths)),e.noiseStrength&&(this.noiseStrength=t.getNode(e.noiseStrength)),e.noiseScale&&(this.noiseScale=t.getNode(e.noiseScale)),e.offset&&(this.offset=t.getNode(e.offset)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.filmThickness=e.filmThickness.clone(),this.movement=e.movement.clone(),this.wavelengths=e.wavelengths.clone(),this.noiseStrength=e.noiseStrength.clone(),this.noiseScale=e.noiseScale.clone(),this.offset=e.offset.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},SD=_D;SD.Nodes=function(){let e=new rt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 viewDir = normalize(-(cameraPosition + offset));
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vObjectNormal), viewDir)) + movement);
             }`,[Js.simplex]);return{rainbow:new rt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {
                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);
                 float lalpha = alpha * rainbowContribution;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

                 return res;
             }`,[e])}}();var bD=class extends br{constructor(e,t,r,i,n,s,a,o){super("v3");this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(bD.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.thickness=this.thickness.toJSON(e).uuid,t.ior=this.ior.toJSON(e).uuid,t.roughness=this.roughness.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.thickness&&(this.thickness=t.getNode(e.thickness)),e.ior&&(this.ior=t.getNode(e.ior)),e.roughness&&(this.roughness=t.getNode(e.roughness)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(this),this.thickness=e.thickness.clone(),this.ior=e.ior.clone(),this.roughness=e.roughness.clone(),this.transmissionSamplerSize=e.transmissionSamplerSize.clone(),this.transmissionSamplerMap=e.transmissionSamplerMap,this.transmissionDepthMap=e.transmissionDepthMap,this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},AD=bD;AD.Nodes=function(){let e=new rt(`
            float gaussian(vec2 i) {
                const float sigma = float(NUM_SAMPLES) * .25;
                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );
            }`),t=new rt(`
            vec4 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

                const int LOD = 2;
                const int sLOD = 4; // tile size = 2^LOD

                vec4 O = vec4(0);
                const int s = NUM_SAMPLES/sLOD;
                for ( int i = 0; i < s*s; i++ ) {
                    int modulo = (i)-((i)/(s))*(s);
                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;
                    vec2 uv = U + (scale * aspectRatio) * d;
                    // What is the depth of the opaque object we're trying to sample
                    float opaqueDepth = texture2D(dm, uv).r;
                    if (opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
		            #ifdef TEXTURE_LOD_EXT
                    O += gaussian(d) * texture2DLodEXT( sp, uv, lod);
                    #else
                    O += gaussian(d) * textureLod( sp, uv, lod);
                    #endif
                }
                return O / O.a;
            }`,[e]),r=new rt(`
            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        // Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		        // The thickness is specified in local space.
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new rt(`
float applyIorToRoughness( float roughness, float ior ) {
		// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
		// an IOR of 1.5 results in the default amount of microfacet refraction.
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	} `),n=new rt(`
vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
        float lod = applyIorToRoughness(roughness, ior);

        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
	}`,[i,t]),s=new rt(`
vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
        vec3 refractedRayExit = position + transmissionRay;

        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
        vec2 refractionCoords = ndcPos.xy / ndcPos.w;
        refractionCoords += 1.0;
        refractionCoords /= 2.0;

        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
        unrefractedCoords += 1.0;
        unrefractedCoords /= 2.0;

        // Sample framebuffer to get pixel the refracted ray hits.
        vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
        // Get the specular component.
        return vec4( ( 1.0 ) * transmittedLight.rgb, transmittedLight.a );
    }`,[n,r]);return{transmission:new rt(`
            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec4 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                float lalpha = alpha;

                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
                 return transmission.rgb;
            }`,[s])}}();var MD=class extends br{constructor(e,t){super("v3");this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let r=e.include(MD.Nodes.customNormal),i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.alpha.build(e,"f")),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.cnormal=this.cnormal.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.cnormal&&(this.cnormal=t.getNode(e.cnormal)),e.alpha&&(this.alpha=t.getNode(e.alpha)),this}copy(e){return super.copy(e),this.cnormal.copy(e.cnormal),this.alpha.copy(e.alpha),this}},ED=MD;ED.Nodes=function(){return{customNormal:new rt(`vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return normal;
			}`)}}();var TD=class extends br{constructor(e,t,r,i,n,s,a,o){super("v3");this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=s,this.angle=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(TD.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.gradientType=this.gradientType.toJSON(e).uuid,t.smooth=this.smooth.toJSON(e).uuid,t.colors=this.colors.toJSON(e).uuid,t.steps=this.steps.toJSON(e).uuid,t.offset=this.offset.toJSON(e).uuid,t.morph=this.morph.toJSON(e).uuid,t.angle=this.angle.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}copy(e){return super.copy(e),this.gradientType=e.gradientType.clone(),this.smooth=e.smooth.clone(),this.colors=e.colors.clone(),this.steps=e.steps.clone(),this.offset=e.offset.clone(),this.morph=e.morph.clone(),this.angle=e.angle.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}fromJSON(e,t){return super.fromJSON(e,t),e.calpha&&(this.calpha=e.calpha),e.gradientType&&(this.gradientType=t.getNode(e.gradientType)),e.smooth&&(this.smooth=t.getNode(e.smooth)),e.colors&&(this.colors=t.getNode(e.colors)),e.steps&&(this.steps=t.getNode(e.steps)),e.offset&&(this.offset=t.getNode(e.offset)),e.morph&&(this.morph=t.getNode(e.morph)),e.angle&&(this.angle=t.getNode(e.angle)),e.alpha&&(this.alpha=t.getNode(e.alpha)),this}},CD=TD;CD.Nodes=function(){return{gradient:new rt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return color.xyz;
			}`)}}();var ql;(function(e){e.NOISE="noise",e.MAP="map"})(ql||(ql={}));var LD=class extends br{constructor(e=new nr(0),t,r,i,n,s){super("v3");this.nodeType="VertexDisplacement",this.displacementTypeIndex=e,this.intensity=t,this.movementOrTexture=r,Object.values(ql)[this.displacementTypeIndex.value]===ql.MAP&&(this.mat=new sv(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=n,this.noiseFunctionIndex=s}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(ql)[this.displacementTypeIndex.value]){case ql.MAP:{r=e.include(LD.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case ql.NOISE:{let n=Object.values(av)[this.noiseFunctionIndex.value],s=new rt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=new rt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {
							return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
						}`,[Js.simplex,Js.simplexFractal,Js.simplexAshima,Js.fbm,Js.perlin]),o=new rt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[a,s]);r=e.include(o),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){var t;let r=this.getJSONNode(e);return r||(r=this.createJSONNode(e),r.intensity=this.intensity.toJSON(e).uuid,r.scale=(t=this.scale)==null?void 0:t.toJSON(e).uuid,r.movementOrTexture=this.movementOrTexture.toJSON(e).uuid,r.cropOrOffset=this.cropOrOffset.toJSON(e).uuid),r.displacementTypeIndex=this.displacementTypeIndex,r.noiseFunctionIndex=this.noiseFunctionIndex,r.nodeType=this.nodeType,r}fromJSON(e,t){return super.fromJSON(e,t),this.displacementTypeIndex=e.displacementTypeIndex,this.noiseFunctionIndex=e.noiseFunctionIndex,e.cropOrOffset&&(this.cropOrOffset=t.getNode(e.cropOrOffset)),e.intensity&&(this.intensity=t.getNode(e.intensity)),e.movementOrTexture&&(this.displacementTypeIndex.value===1?(this.movementOrTexture=t.getNode(e.movementOrTexture),this.movementOrTexture.value.updateMatrix(),this.mat=new sv(this.movementOrTexture.value.matrix)):this.displacementTypeIndex.value===0&&(this.movementOrTexture=t.getNode(e.movementOrTexture))),e.scale&&(this.scale=t.getNode(e.scale)),this}copy(e){var t,r;return super.copy(e),this.noiseFunctionIndex=(t=e.noiseFunctionIndex)==null?void 0:t.clone(),this.scale=(r=e.scale)==null?void 0:r.clone(),this.cropOrOffset=e.cropOrOffset.clone(),this.intensity=e.intensity.clone(),this.movementOrTexture=e.movementOrTexture.clone(),this}},vw=LD;vw.Nodes=function(){let e=new rt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new rt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new rt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var OD=class extends br{constructor(e=new zt,t=new zt,r=new zt,i=new zt,n=new zt,s=new zt,a=new zt,o=new zt,l=new zt,h=new zt,d=new zt,p=new zt){super("v3");this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=s,this.colorA=a,this.colorB=o,this.colorC=l,this.colorD=h,this.alpha=d,this.noiseType=p,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(av)[this.noiseType.value],a=new rt(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {
                vec3 st = position / size;
				st /= scale;
				vec3 q = vec3(${s}(st),
							  ${s}(st + vec3(1.0)),
							  ${s}(st + vec3(1.0)));
				vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
							  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
							  ${s}(st * q));
				float f = ${s}(st + r);
				vec4 color;
				color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
				color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
				color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));

                float lalpha = alpha * color.a;
                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				return clamp(color, 0.0, 1.0).rgb;
			}`,[Js.simplex,Js.simplexFractal,Js.simplexAshima,Js.fbm,Js.perlin]),o=e.include(a),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(o+"("+l.join(",")+")",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scale=this.scale.toJSON(e).uuid,t.size=this.size.toJSON(e).uuid,t.move=this.move.toJSON(e).uuid,t.fA=this.fA.toJSON(e).uuid,t.fB=this.fB.toJSON(e).uuid,t.distortion=this.distortion.toJSON(e).uuid,t.colorA=this.colorA.toJSON(e).uuid,t.colorB=this.colorB.toJSON(e).uuid,t.colorC=this.colorC.toJSON(e).uuid,t.colorD=this.colorD.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.noiseType=this.noiseType,t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scale&&(this.scale=t.getNode(e.scale)),e.size&&(this.size=t.getNode(e.size)),e.move&&(this.move=t.getNode(e.move)),e.fA&&(this.fA=t.getNode(e.fA)),e.fB&&(this.fB=t.getNode(e.fB)),e.distortion&&(this.distortion=t.getNode(e.distortion)),e.colorA&&(this.colorA=t.getNode(e.colorA)),e.colorB&&(this.colorB=t.getNode(e.colorB)),e.colorC&&(this.colorC=t.getNode(e.colorC)),e.colorD&&(this.colorD=t.getNode(e.colorD)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.noiseType&&(this.noiseType=t.getNode(e.noiseType)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.scale.copy(e.scale),this.size.copy(e.size),this.move.copy(e.move),this.fA.copy(e.fA),this.fB.copy(e.fB),this.distortion.copy(e.distortion),this.colorA.copy(e.colorA),this.colorB.copy(e.colorB),this.colorC.copy(e.colorC),this.colorD.copy(e.colorD),this.alpha.copy(e.alpha),this.calpha=e.calpha,this.noiseType.copy(e.noiseType),this}};OD.numOctaves=5;var f2=class extends br{constructor(e=new zt,t=new zt,r=new zt,i=new zt){super("v3");this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b.copy(e.b),this.alpha.copy(e.alpha),this.mode.copy(e.mode),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.a&&(this.a=t.getNode(e.a)),e.b&&(this.b=t.getNode(e.b)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.mode&&(this.mode=t.getNode(e.mode)),this}},PD=class extends br{constructor(e,t,r,i,n,s,a,o,l,h,d){super("v3");this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=s,this.origin=a,this.direction=o,this.colors=l,this.steps=h,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("MAX_COLORS",10),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let r=e.include(PD.Nodes.sdepth),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.near.build(e,"f")),i.push(this.far.build(e,"f")),i.push(this.isVector.build(e,"f")),i.push(this.isWorldSpace.build(e,"f")),i.push(this.origin.build(e,"v3")),i.push(this.direction.build(e,"v3")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.gradientType=this.gradientType.toJSON(e).uuid,t.smooth=this.smooth.toJSON(e).uuid,t.near=this.near.toJSON(e).uuid,t.far=this.far.toJSON(e).uuid,t.isVector=this.isVector.toJSON(e).uuid,t.isWorldSpace=this.isWorldSpace.toJSON(e).uuid,t.origin=this.origin.toJSON(e).uuid,t.direction=this.direction.toJSON(e).uuid,t.colors=this.colors.toJSON(e).uuid,t.steps=this.steps.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.gradientType&&(this.gradientType=t.getNode(e.gradientType)),e.smooth&&(this.smooth=t.getNode(e.smooth)),e.near&&(this.near=t.getNode(e.near)),e.far&&(this.far=t.getNode(e.far)),e.isVector&&(this.isVector=t.getNode(e.isVector)),e.isWorldSpace&&(this.isWorldSpace=t.getNode(e.isWorldSpace)),e.origin&&(this.origin=t.getNode(e.origin)),e.direction&&(this.direction=t.getNode(e.direction)),e.colors&&(this.colors=t.getNode(e.colors)),e.steps&&(this.steps=t.getNode(e.steps)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.calpha&&(this.calpha=e.calpha),this}copy(e){return super.copy(e),this.gradientType=e.gradientType.clone(),this.smooth=e.smooth.clone(),this.near=e.near.clone(),this.far=e.far.clone(),this.isVector=e.isVector.clone(),this.isWorldSpace=e.isWorldSpace.clone(),this.origin=e.origin.clone(),this.direction=e.direction.clone(),this.colors=e.colors.clone(),this.steps=e.steps.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},DD=PD;DD.Nodes=function(){return{sdepth:new rt(`vec3 sdepth(int gradientType, bool smoothed, float near, float far, float isVector, float isWorldSpace, vec3 origin, vec3 direction, vec4 colors[MAX_COLORS], float steps[MAX_COLORS], float alpha, out float calpha) {
               vec4 color = colors[0];
               float dist;
               if (isVector > 0.5) {
                   if (gradientType == 0) {
                      vec3 n = normalize(direction);

                      dist = (isWorldSpace > 0.5)
                          ? (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z))
                          : (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));

                   } else {
                      dist = (isWorldSpace > 0.5) ? length(vWPosition - origin) : length(position - origin);
                   }
               } else {
                   dist = length (vWPosition - cameraPosition);
               }
			   float dep = ( dist - near ) / ( far - near );

			  float p;
              if (smoothed) {
				for ( int i = 1; i < MAX_COLORS; i++ ) {
						p = clamp( ( dep - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

               } else {
                for ( int i = 1; i < MAX_COLORS; i++ ) {
                   p = clamp(( dep - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
               }
               float lalpha = alpha * color.a;
               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );

			   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
               return color.rgb;
			}`)}}();var RD=class extends br{constructor(e,t,r,i){super("v3");this.nodeType="Matcap",this.color=e,this.texture=t,this.alpha=r,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(RD.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.color.build(e,"v3")),i.push(this.texture.getTexture(e,"t")),i.push("normal"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.texture=e.texture.clone(),this.color=e.color.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this.calpha=e.calpha,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.texture=this.texture.toJSON(e).uuid,t.color=this.color.toJSON(e).uuid,t.alpha=this.alpha.toJSON(e).uuid,t.mode=this.mode.toJSON(e).uuid,t.calpha=this.calpha),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.calpha&&(this.calpha=e.calpha),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.texture&&(this.texture=t.getNode(e.texture)),e.color&&(this.color=t.getNode(e.color)),e.mode&&(this.mode=t.getNode(e.mode)),this}},ND=RD;ND.Nodes=function(){return{matcap:new rt(`vec3 matcap(vec3 color, sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {
                vec3 viewDir = normalize( vViewPosition );
                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
                vec3 y = cross( viewDir, x );
                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
                vec4 matcapColor = texture2D( matcapTex, uv );
                // matcapColor = matcapTexelToLinear( matcapColor );
                matcapColor.rgb *= color;
                
                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;
                
                return matcapColor.rgb;
            }
            `)}}();var yu=class{constructor(e){this.id=2,this.layerCount=2,this.uuid=sr.generateUUID(),this.needsUpdate=!1,this._material=e,this._layerNodes=[];let t=this._createLayer({id:0,type:Gt.COLOR});this._material.color=t.color,this._material.alpha===void 0&&(this._material.alpha=new Qe(1));let r=new Qe(1),i=new nr(0);"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=r,this._material.shadingBlend=i),this._layerNodes.push({id:0,type:Mr.COLOR,color:t.color,alpha:t.alpha,mode:t.mode}),this._layerNodes.push({id:1,type:Mr.LIGHTING,alpha:r,mode:i}),this.head=t.layer,this.head.next=new Xr(1,void 0,{type:Gt.LIGHTING,alpha:r,mode:i}),this.attachLightNodes()}get material(){return this._material}set material(e){this._material=e;let t,r,i=this.head;for(;i!==void 0;){if(i.type===Gt.LIGHTING){t=i.uniforms[`f${i.id}_alpha`],r=i.uniforms[`f${i.id}_mode`];break}i=i.next}"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=t,this._material.shadingBlend=r),this.attachLightNodes(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}getLayersOfType(e){let t=[],r=this.head;for(;r;)r.type===e&&t.push(r),r=r.next;return t}addLayer(e){var t;if(e.id=(t=e.id)!=null?t:++this.id,this.layerCount++,e.type===Gt.LIGHTING){let n=this.createLightLayer(e);return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}let r=this._createLayer(e),i=r.layer;if(this.head===void 0)this.head=i;else{let n=this.head;for(;n.next!=null;)n=n.next;n.next=i}return r.color&&this._layerNodes.push({id:i.id,type:Mr.COLOR,color:r.color,alpha:r.alpha,mode:r.mode}),r.position&&this._layerNodes.push({id:i.id,type:Mr.POSITION,position:r.position}),this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),i}addLayerBeforeAt(e,t){var r;let i=this.head;e.id=(r=e.id)!=null?r:++this.id,this.layerCount++;let n=this._createLayer(e),s=n.layer;s.next=t;let a=0;if(i===t)this.head=s,n.color&&this._layerNodes.splice(0,0,{id:s.id,type:Mr.COLOR,color:n.color,alpha:n.alpha,mode:n.mode}),n.position&&this._layerNodes.splice(0,0,{id:s.id,type:Mr.POSITION,position:n.position});else{for(a=1;(i==null?void 0:i.next)!==t;)i=i==null?void 0:i.next,a++;i.next=s,n.color&&this._layerNodes.splice(a,0,{id:s.id,type:Mr.COLOR,color:n.color,alpha:n.alpha,mode:n.mode}),n.position&&this._layerNodes.splice(a,0,{id:s.id,type:Mr.POSITION,position:n.position})}return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),s}addLayerAt(e,t){var r;t.id=(r=t.id)!=null?r:++this.id,this.layerCount++;let i=this._createLayer(t),n=i.layer;if(i.color&&this._layerNodes.splice(e,0,{id:n.id,type:Mr.COLOR,color:i.color,alpha:i.alpha,mode:i.mode}),i.position&&this._layerNodes.splice(e,0,{id:n.id,type:Mr.POSITION,position:i.position}),e==0)n.next=this.head,this.head=n;else{let s=this.head,a=this.head.next;for(let o=0;o<e-1;o++)s=a,a=a.next;n.next=a,s.next=n}return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}removeLayer(e){let t=this.head,r,i=0;if((t==null?void 0:t.id)==e)this.head=t.next;else for(i=1,r=t,t=t==null?void 0:t.next;t!=null;){if(t.id==e){r.next=t.next;break}i++,r=t,t=t.next}return this.cleanupChangedLayer(t),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.uuid=sr.generateUUID(),this.layerCount--,i}changeLayer(e,t){let r,i=this.head,n;if((i==null?void 0:i.id)==e){let s=this._createLayer(Le({id:e,uuid:i.uuid},t));n=s.layer,n.next=i.next,this.head=n,s.color&&(this._layerNodes[0]={id:n.id,type:Mr.COLOR,color:s.color,alpha:s.alpha,mode:s.mode}),s.position&&(this._layerNodes[0]={id:n.id,type:Mr.POSITION,position:s.position}),n.uniforms[`f${e}_mode`].value=i.uniforms[`f${e}_mode`].value,n.uniforms[`f${e}_alpha`].value=i.uniforms[`f${e}_alpha`].value}else{r=i,i=i.next;let s=1;for(;i!=null;){if(i.id==e){let a=this._createLayer(Le({id:e,uuid:i.uuid},t));n=a.layer,r.next=n,n.next=i.next,a.color&&(this._layerNodes[s]={id:e,type:Mr.COLOR,color:a.color,alpha:a.alpha,mode:a.mode}),a.position&&(this._layerNodes[s]={id:e,type:Mr.POSITION,position:a.position}),n.uniforms[`f${e}_mode`].value=i.uniforms[`f${e}_mode`].value,n.uniforms[`f${e}_alpha`].value=i.uniforms[`f${e}_alpha`].value;break}r=i,i=i.next,s++}}return this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}getLayer(e){let t=this.head;for(;t!=null&&t.id!=e;)t=t.next;return t}getLayerByUuid(e){let t=this.head;for(;t!==void 0;){if(t.uuid===e)return t;t=t.next}}getLayers(){let e=[],t=this.head;for(;t!=null;)e.push(t),t=t.next;return e}getLayerPosition(e){let t=this.head,r=0;for(;t!==void 0&&t.id!=e;)r++,t=t.next;return r}getDefines(){}getBeforeProgram(){}getLightingProgram(){}getAfterProgram(){}getVarPrograms(){}getUniforms(){}moveLayer(e,t){let r,i=this.head,n;if(e==0)r=this.head,this.head=r.next;else{for(let a=0;a<e;a++)n=i,i=i.next;n.next=i.next,r=i}if(i=this.head,n=void 0,t==0)r.next=this.head,this.head=r;else{for(let a=0;a<t-1;a++)i=i.next;r.next=i==null?void 0:i.next,i.next=r}let s=this._layerNodes.splice(e,1)[0];this._layerNodes.splice(t,0,s),this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors()}updateLayerUniform(){this.uuid=sr.generateUUID(),this.blendColors(),this.blendAfterColors()}copy(e){this.needsUpdate=!1,this.layerCount=e.layerCount,this._layerNodes=[],this.layerCount=0,this.head=void 0,this.rebuildLayerNodes(this.head,e.head);let t=e.head,r=this.head;for(;t.next!=null;)this.rebuildLayerNodes(r,t.next),r=r.next,t=t.next;return this.id=e.id,this.uuid=e.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}createLightLayer(e){let t=new Qe(e.alpha),r=new nr(e.mode);this._material.shadingAlpha=t,this._material.shadingBlend=r,this._layerNodes.push({id:e.id,type:Mr.LIGHTING,alpha:t,mode:r});let i=new Xr(e.id,void 0,{type:Gt.LIGHTING,alpha:t,mode:r});if(this.head===void 0)this.head=i;else{let n=this.head;for(;n.next!=null;)n=n.next;n.next=i}return this.attachLightNodes(),i}rebuildLayerNodes(e,t,r=!1){if(t.type===Gt.LIGHTING){let i=r?t.uniforms[`f${t.id}_alpha`]:new Qe(t.uniforms[`f${t.id}_alpha`].value),n=r?t.uniforms[`f${t.id}_mode`]:new nr(t.uniforms[`f${t.id}_mode`].value);this._material.shadingAlpha=i,this._material.shadingBlend=n,this._layerNodes.push({id:t.id,type:Mr.LIGHTING,alpha:i,mode:n}),this.head===void 0?this.head=new Xr(t.id,t.uuid,{type:Gt.LIGHTING,alpha:i,mode:n}):e&&(e.next=new Xr(t.id,t.uuid,{type:Gt.LIGHTING,alpha:i,mode:n})),this.attachLightNodes(t)}else{let i={type:t.type,id:t.id};for(let n in t.uniforms){let s=t.getName(n);if(!s)continue;let a=`f${t.id}_${s}`;if(Array.isArray(t.uniforms[a].value))i[s]=t.uniforms[a].value.map(o=>o.clone&&!r?o.clone():o);else{let o=t.uniforms[a].value;if(s==="transmissionDepthMap"){i[s]=o;continue}o!=null&&(i[s]=o.clone&&!r&&!o.isRenderTargetTexture?o.clone():o)}}this.addLayer(i)}}attachLightNodes(e){var t,r,i,n,s,a,o,l,h,d,p;let f={},m=this.getLightLayer();switch(this._material.userData.category){case"Lambert":f.emissive=new Qr((r=(t=e==null?void 0:e.getValue("emissive"))==null?void 0:t.clone())!=null?r:0);break;case"Phong":f.shininess=new Qe((i=e==null?void 0:e.getValue("shininess"))!=null?i:30),f.specular=new Qr((s=(n=e==null?void 0:e.getValue("specular"))==null?void 0:n.clone())!=null?s:1118481);break;case"Toon":f.shininess=new Qe((a=e==null?void 0:e.getValue("shininess"))!=null?a:30),f.specular=new Qr((l=(o=e==null?void 0:e.getValue("specular"))==null?void 0:o.clone())!=null?l:1118481);break;case"Physical":f.roughness=new Qe((h=e==null?void 0:e.getValue("roughness"))!=null?h:.3),f.metalness=new Qe((d=e==null?void 0:e.getValue("metalness"))!=null?d:0),f.reflectivity=new Qe((p=e==null?void 0:e.getValue("reflectivity"))!=null?p:.5);break}Object.keys(f).forEach(v=>{this._material[v]=f[v],m.uniforms[`f${m.id}_${v}`]=f[v]})}clone(e){return new yu(e).copy(this)}toJSON(e){return{id:this.id,uuid:this.uuid,head:this.head.toJSON(e)}}fromJSON(e,t,r){let i=new Xr(e.head.id,void 0,{type:e.head.type}).fromJSON(e.head,t),n=e.head.next,s=i;for(;n!=null;)s.next=new Xr(n.id,void 0,{type:n.type}).fromJSON(n,t),n=n.next,s=s.next;this._layerNodes=[],this.head=void 0,this.rebuildLayerNodes(this.head,i,!0);let a=i;for(s=this.head;a.next!=null;)this.rebuildLayerNodes(s,a.next,!0),s=s.next,a=a.next;return this._material=r,this.id=e.id,this.uuid=e.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}getLightLayer(){var e;let t=this.head;for(;t!==void 0&&t.type!=="light";)t=(e=t.next)!=null?e:t;return t}dispose(){let e=this.head;for(this._layerNodes=[],this.layerCount=0;e!==void 0;)e.hasOwnProperty("dispose")===!0&&e.dispose(),e=e.next;this.head=void 0}_createLayer(e){var t,r,i,n,s,a,o,l,h,d,p,f,m,v,w,S,y,g,_,b,T,A,M,L,D,C,N,U,V,k,G,$,W,H,X,J,Y,ee,ie,ue,we,q,Se,me,re,K,ne,ae,fe,pe,xe,Ae,F,B,de,Oe,Ce,Re,ze,Ke,We,qe,te,Ie,Me,je,Be,at,kt,yr,Ei,$t,gi,ki,aa,Hi,Ls,Lr,Gi;let ei=e.type;switch(ei){case Gt.COLOR:{let ht=new Qr((t=e.color)!=null?t:Ms),yt=new Qe((r=e.alpha)!=null?r:1),xt=new Pr("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");xt.keywords.alpha=yt;let _t=new nr((i=e.mode)!=null?i:0);return ht.alpha=yt,{layer:new Xr(e.id,e.uuid,{type:ei,color:ht,alpha:yt,calpha:xt,mode:_t}),color:ht,alpha:xt,mode:_t}}case Gt.TEXTURE:{let ht=(n=e.texture)!=null?n:new ch,yt=ht.matrix;e.mat&&yt.copy(e.mat),ht.needsUpdate=!0;let xt=new Qe((s=e.crop)!=null?s:0),_t=new nr((a=e.projection)!=null?a:0),Pt=new nr((o=e.axis)!=null?o:0),qt=new fs(e.size?new Q(e.size[0],e.size[1]):new Q(100,100)),Ht=new Qe((l=e.alpha)!=null?l:1),er=new nr((h=e.mode)!=null?h:0),z=new Aa(ht),he=new gs((d=e.textureSize)!=null?d:new O(ht.image?ht.image.width:0,ht.image?ht.image.height:0)),oe=new yD(z,he,xt,_t,Pt,qt,Ht,er),ve=new Pr(oe.calpha,"f");return{layer:new Xr(e.id,e.uuid,{type:ei,texture:z,textureSize:he,crop:xt,projection:_t,axis:Pt,size:qt,mat:oe.mat,alpha:Ht,calpha:ve,mode:er}),color:oe,alpha:ve,mode:er}}case Gt.MATCAP:{let ht=new Qr((p=e.color)!=null?p:16777215),yt=(f=e.texture)!=null?f:new ch;yt.needsUpdate=!0;let xt=new Qe((m=e.alpha)!=null?m:1),_t=new Aa(yt),Pt=new nr((v=e.mode)!=null?v:0),qt=new ND(ht,_t,xt,Pt),Ht=new Pr(qt.calpha,"f");return{layer:new Xr(e.id,e.uuid,{type:ei,texture:_t,color:ht,alpha:xt,calpha:Ht,mode:Pt}),color:qt,alpha:Ht,mode:Pt}}case Gt.FRESNEL:{let ht=new Qr((w=e.color)!=null?w:16777215),yt=new Qe((S=e.bias)!=null?S:.1),xt=new Qe((y=e.scale)!=null?y:1),_t=new Qe((g=e.intensity)!=null?g:2),Pt=new Qe((_=e.factor)!=null?_:1),qt=new Qe((b=e.alpha)!=null?b:1),Ht=new nr((T=e.mode)!=null?T:0),er=new wD(ht,yt,xt,_t,Pt,qt,Ht),z=new Pr(er.calpha,"f");return{layer:new Xr(e.id,e.uuid,{type:ei,color:ht,bias:yt,scale:xt,intensity:_t,factor:Pt,alpha:qt,calpha:z,mode:Ht}),color:er,alpha:z,mode:Ht}}case Gt.RAINBOW:{let ht=new Qe((A=e.filmThickness)!=null?A:30),yt=new Qe((M=e.movement)!=null?M:0),xt=new gs((L=e.wavelengths)!=null?L:new O(0,0,0)),_t=new Qe((D=e.noiseStrength)!=null?D:0),Pt=new Qe((C=e.noiseScale)!=null?C:1),qt=new gs((N=e.offset)!=null?N:new O(0,0,0)),Ht=new Qe((U=e.alpha)!=null?U:1),er=new SD(ht,yt,xt,_t,Pt,qt,Ht),z=new Pr(er.calpha,"f"),he=new nr((V=e.mode)!=null?V:0);return{layer:new Xr(e.id,e.uuid,{type:ei,filmThickness:ht,movement:yt,wavelengths:xt,noiseStrength:_t,noiseScale:Pt,offset:qt,alpha:Ht,calpha:z,mode:he}),color:er,alpha:z,mode:he}}case Gt.TRANSMISSION:{let ht=new Qe((k=e.thickness)!=null?k:10),yt=new Qe((G=e.ior)!=null?G:1.5),xt=new Qe(($=e.roughness)!=null?$:.5),_t=new fs((W=e.transmissionSamplerSize)!=null?W:new Q(2048,2048)),Pt=(H=e.transmissionSamplerMap)!=null?H:new ch,qt=(X=e.transmissionDepthMap)!=null?X:new ch,Ht=new Aa(Pt),er=new Aa(qt),z=window.innerWidth,he=window.innerHeight,oe=z>=he?new fs(he/z,1):new fs(1,z/he),ve=new Qe((J=e.alpha)!=null?J:1),Pe=new AD(ht,yt,xt,_t,Ht,er,oe,ve),Ze=new Pr(Pe.calpha,"f"),Xe=new nr((Y=e.mode)!=null?Y:0);return{layer:new Xr(e.id,e.uuid,{type:ei,thickness:ht,ior:yt,roughness:xt,transmissionSamplerSize:_t,transmissionSamplerMap:Ht,transmissionDepthMap:er,aspectRatio:oe,alpha:ve,calpha:Ze,mode:Xe}),color:Pe,alpha:Ze,mode:Xe}}case Gt.DEPTH:{let ht=new nr((ee=e.gradientType)!=null?ee:0),yt=new d2((ie=e.smooth)!=null?ie:!1),xt=new Qe((ue=e.near)!=null?ue:50),_t=new Qe((we=e.far)!=null?we:200),Pt=new Qe((q=e.isVector)!=null?q:1),qt=new Qe((Se=e.isWorldSpace)!=null?Se:0),Ht=new gs((me=e.origin)!=null?me:new O),er=new gs((re=e.direction)!=null?re:new O),z;e.colors?z=new Ld(e.colors.length,e.colors):(z=new Ld(10,new Et(0,0,0,1)),z.value[1]=new Et(1,1,1,1));let he;e.steps?he=new Um(e.steps.length,e.steps):(he=new Um(10,1),he.value[0]=0);let oe=new Qe((K=e.alpha)!=null?K:1),ve=new nr((ne=e.mode)!=null?ne:0),Pe=new DD(ht,yt,xt,_t,Pt,qt,Ht,er,z,he,oe),Ze=new Pr(Pe.calpha,"f");return{layer:new Xr(e.id,e.uuid,{type:ei,gradientType:ht,smooth:yt,near:xt,far:_t,isVector:Pt,isWorldSpace:qt,origin:Ht,direction:er,colors:z,steps:he,alpha:oe,calpha:Ze,mode:ve}),color:Pe,alpha:Ze,mode:ve}}case Gt.NOISE:{let ht=new Qe((ae=e.scale)!=null?ae:1),yt=new gs((fe=e.size)!=null?fe:new O(100,100,100)),xt=new Qe((pe=e.move)!=null?pe:1),_t=new fs((xe=e.fA)!=null?xe:new Q(1.7,9.2)),Pt=new fs((Ae=e.fB)!=null?Ae:new Q(8.3,2.8)),qt=new fs((F=e.distortion)!=null?F:new Q(1,1)),Ht=new wh(e.colorA),er=new wh(e.colorB),z=new wh(e.colorC),he=new wh(e.colorD),oe=new Qe((B=e.alpha)!=null?B:1),ve=new nr((de=e.mode)!=null?de:0),Pe=new nr((Oe=e.noiseType)!=null?Oe:0),Ze=new OD(ht,yt,xt,_t,Pt,qt,Ht,er,z,he,oe,Pe),Xe=new Pr(Ze.calpha,"f");return{layer:new Xr(e.id,e.uuid,{type:ei,scale:ht,size:yt,move:xt,fA:_t,fB:Pt,distortion:qt,colorA:Ht,colorB:er,colorC:z,colorD:he,alpha:oe,calpha:Xe,mode:ve,noiseType:Pe}),color:Ze,alpha:Xe,mode:ve}}case Gt.NORMAL:{let ht=new gs((Ce=e.cnormal)!=null?Ce:new O(1,1,1)),yt=new Qe((Re=e.alpha)!=null?Re:1),xt=new nr((ze=e.mode)!=null?ze:0),_t=new ED(ht,yt),Pt=new Pr("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return Pt.keywords.alpha=yt,{layer:new Xr(e.id,e.uuid,{type:ei,cnormal:ht,alpha:yt,calpha:Pt,mode:xt}),color:_t,alpha:Pt,mode:xt}}case Gt.GRADIENT:{let ht=new nr((Ke=e.gradientType)!=null?Ke:0),yt=new d2((We=e.smooth)!=null?We:!1),xt;e.colors?xt=new Ld(e.colors.length,e.colors):(xt=new Ld(10,new Et(0,0,0,1)),xt.value[1]=new Et(1,1,1,1));let _t;e.steps?_t=new Um(e.steps.length,e.steps):(_t=new Um(10,1),_t.value[0]=0);let Pt=new fs((qe=e.offset)!=null?qe:new Q(0,0)),qt=new fs((te=e.morph)!=null?te:new Q(0,0)),Ht=new Qe((Ie=e.angle)!=null?Ie:0),er=new Qe((Me=e.alpha)!=null?Me:1),z=new nr((je=e.mode)!=null?je:0),he=new CD(ht,yt,xt,_t,Pt,qt,Ht,er),oe=new Pr(he.calpha,"f");return{layer:new Xr(e.id,e.uuid,{type:ei,gradientType:ht,smooth:yt,colors:xt,steps:_t,offset:Pt,morph:qt,angle:Ht,alpha:er,calpha:oe,mode:z}),color:he,alpha:oe,mode:z}}case Gt.DISPLACE:{let ht=new nr((Be=e.displacementType)!=null?Be:0);if(ht.value===0){let yt=new gs((at=e.offset)!=null?at:new O(0,0,0)),xt=new Qe((kt=e.scale)!=null?kt:10),_t=new Qe((yr=e.intensity)!=null?yr:8),Pt=new Qe((Ei=e.movement)!=null?Ei:1),qt=new Qe(($t=e.alpha)!=null?$t:1),Ht=new nr((gi=e.mode)!=null?gi:0),er=new nr((ki=e.noiseType)!=null?ki:0),z=new vw(ht,_t,Pt,yt,xt,er);return{layer:new Xr(e.id,e.uuid,{displacementType:ht,type:ei,offset:yt,scale:xt,intensity:_t,movement:Pt,alpha:qt,mode:Ht,noiseType:er}),position:z}}else if(ht.value===1){let yt=(aa=e.texture)!=null?aa:new ch,xt=yt.matrix;e.mat&&xt.copy(e.mat),yt.needsUpdate=!0;let _t=new Qe((Hi=e.intensity)!=null?Hi:8),Pt=new Aa(yt),qt=new Qe((Ls=e.crop)!=null?Ls:0),Ht=new Qe((Lr=e.alpha)!=null?Lr:1),er=new nr((Gi=e.mode)!=null?Gi:0),z=new vw(ht,_t,Pt,qt);return{layer:new Xr(e.id,e.uuid,{displacementType:ht,type:ei,intensity:_t,texture:Pt,crop:qt,mat:z.mat,alpha:Ht,mode:er}),position:z}}return{}}}return{}}blendColors(){let e=this._layerNodes.findIndex(r=>r.type===Mr.COLOR),t=this._layerNodes.findIndex(r=>r.type===Mr.LIGHTING);if(e!==-1&&e<t){let r=this._layerNodes[e].color;for(let i=e+1;i<t;++i){let n=this._layerNodes[i];n.type===Mr.COLOR&&(r=new f2(r,n.color,n.alpha,n.mode))}this._material.color=r}else this._material.color=void 0}blendAfterColors(){let e=new Pr("outgoingLight","f"),t=this._layerNodes.findIndex(r=>r.type===Mr.LIGHTING);if(this._layerNodes.length>t+1){for(let r=t+1;r<this._layerNodes.length;++r){let i=this._layerNodes[r];i.type===Mr.COLOR&&(e=new f2(e,i.color,i.alpha,i.mode))}"afterColor"in this._material&&(this._material.afterColor=e)}else"afterColor"in this._material&&(this._material.afterColor=void 0)}blendPositions(){let e=this._layerNodes.filter(t=>t.type===Mr.POSITION);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new Ca(t,e[r].position,Ca.ADD),t=new Ca(t,new Qe(.5).setReadonly(!0),Ca.MUL));this._material.position=t}else this._material.position=void 0}cleanupChangedLayer(e){switch(this._layerNodes=this._layerNodes.filter(t=>t.id!==e.id),e.type){case Gt.DISPLACE:{this.blendPositions();break}default:{this.blendColors(),this.blendAfterColors();break}}}},Lc=class extends zi{constructor(e,t,r){super(r);this.isNodeMaterial=!0,this.type="NodeMaterial",this.wireframeLinecap="",this.wireframeLinejoin="",this.uniformsBackup={},this.userData={type:"",category:"",nodeType:""},this.fog=!0,this.vertex=e!=null?e:new h2(new Wn(Wn.PROJECTION)),this.fragment=t!=null?t:new h2(new Qr(Ms)),this.updaters=[],this.isDetached=!0,this.dithering=!0,this.onBeforeCompile=this._onBeforeCompile}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}_onBeforeCompile(e,t){this.build({renderer:t}),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}_getLayerStack(e){let t=new yu(this);return e&&(async()=>{for(;e.image===void 0;)await new Promise(r=>requestAnimationFrame(r));t.addLayerAt(1,{type:Gt.TEXTURE,texture:e}),this.dispose()})(),t}clampUniformsForPreview(e,t){let r=(i,n,s)=>Math.min(Math.max(i,n),s);if(this.userData.layers){for(let i of this.userData.layers.getLayers())if(i.type==Gt.DISPLACE){this.uniformsBackup[`f${i.id}_intensity`]=i.uniforms[`f${i.id}_intensity`].value;let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}}restoreClampedUniforms(){if(this.userData.layers)for(let e of this.userData.layers.getLayers())e.type==Gt.DISPLACE&&(e.uniforms[`f${e.id}_intensity`].value=this.uniformsBackup[`f${e.id}_intensity`])}customProgramCacheKey(){return this.getHash()}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(e){var t;e=e!=null?e:{};let r=(t=e.builder)!=null?t:new Mte;return r.setMaterial(this,e.renderer),r.build(this.vertex,this.fragment),this.vertexShader=r.getCode("vertex"),this.fragmentShader=r.getCode("fragment"),this.defines=r.defines,this.uniforms=r.uniforms,this.extensions=r.extensions,this.updaters=r.updaters,this.fog=r.requires.fog,this.lights=r.requires.lights,this.transparent=r.requires.transparent||this.blending>Nh,this}getHash(){let e="{";return e+='"vertex":'+this.vertex.getHash()+",",e+='"fragment":'+this.fragment.getHash(),e+="}",e}copy(e){let t=this.uuid;for(let r in e)this[r]=e[r];return this.uuid=t,e.userData!==void 0&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this}toJSON(e){let t=this.userData.layers;this.userData.layers=void 0;let r=super.toJSON(e);return r.type="ShaderMaterial",r.userData={type:this.userData.type,category:this.userData.category,nodeType:this.type,layers:t.toJSON(e)},r.vertex=this.vertex.toJSON(e).uuid,r.fragment=this.fragment.toJSON(e).uuid,delete r.vertexShader,delete r.fragmentShader,delete r.color,delete r.shininess,delete r.specular,delete r.roughness,delete r.metalness,delete r.uniforms,e&&!e.materials[this.uuid]&&(e.materials[this.uuid]=r),this.userData.layers=t,r}fromJSON(e,t){var r;this.defines=(r=e.defines)!=null?r:{},this.depthFunc=e.depthFunc,this.depthWrite=e.depthWrite,this.side=e.side!==void 0?e.side:dl,this.transparent=e.transparent,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.wireframe=e.wireframe,this.userData.layers.fromJSON(e.userData.layers,t,this)}};Object.defineProperties(Lc.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){e===!0&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}});var Ete=class extends zt{constructor(){super("basic");this.nodeType="Basic",this.color=new Qr(Ms)}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(wc.merge([Fe.fog])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif","#include <fog_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED"," vNormal = normalize( transformedNormal );","#endif",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Qr(Ms)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif"].join(`
`));let s=["#include <normal_fragment_begin>",r.code];i&&s.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),n?s.push(n.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${n.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${r.result};`),i?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} );`):s.push("gl_FragColor = vec4("+r.result+", 1.0 );"),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),e.position&&(this.position=e.position.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.color&&(t.color=this.color.toJSON(e).uuid),this.position&&(t.position=this.position.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid),this.shadingAlpha&&(t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid),this.shadingBlend&&(t.shadingBlend=this.shadingBlend.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),this}},Tte=class extends Lc{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}constructor(e=new Ete,t){super(e,e,t);this.type="BasicNodeMaterial",this.fragment=e}},wo=class extends Tte{constructor(e,t,r){super(t,e);this.userData.type="BasicMaterial",this.userData.category="Basic",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof yu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new wo(void 0,i);return n.fromJSON(t,r),n}static fromMaterial(e){let t=new wo(e.map?{map:e.map}:{}),r=t.fragment;return r.color.value.copy(e.color),r.alpha.value=e.opacity,t}dispose(){super.dispose()}},Cte=class extends zt{constructor(){super("phong");this.nodeType="Phong",this.color=new Qr(Ms),this.specular=new Qr(1118481),this.shininess=new Qe(30),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(wc.merge([Fe.fog,Fe.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Qr(Ms)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.specular=e.specular.clone(),this.shininess=e.shininess.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid,t.shadingBlend=this.shadingBlend.toJSON(e).uuid,this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.specular&&(this.specular=t.getNode(e.specular)),e.shininess&&(this.shininess=t.getNode(e.shininess)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),this}},Lte=class extends Lc{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get specular(){return this.fragment.specular}set specular(e){this.fragment.specular=e}get shininess(){return this.fragment.shininess}set shininess(e){this.fragment.shininess=e}constructor(e=new Cte,t){super(e,e,t);this.type="PhongNodeMaterial",this.fragment=e}},sc=class extends Lte{constructor(e,t,r){super(t,e);this.userData.type="PhongMaterial",this.userData.category="Phong",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof yu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new sc(void 0,i);return n.fromJSON(t,r),n}static fromMaterial(e){let t=new sc(e.map?{map:e.map}:{}),r=t.fragment;return r.color.value.copy(e.color),r.alpha.value=e.opacity,t}dispose(){super.dispose()}},Ote=class extends zt{constructor(){super("lambert");this.nodeType="Lambert",this.color=new Qr(Ms),this.emissive=new Qr(0),this.emissiveIntensity=new Qe(1),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(wc.merge([Fe.fog,Fe.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = PI * directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = PI * directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = PI * directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Qr(Ms)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];h.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += (isFrontFacing) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = (isFrontFacing) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&h.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}copy(e){return super.copy(e),this.emissiveIntensity=e.emissiveIntensity.clone(),e.color&&(this.color=e.color.clone()),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),e.emissive&&(this.emissive=e.emissive.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.emissiveIntensity=this.emissiveIntensity.toJSON(e).uuid,t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid,t.shadingBlend=this.shadingBlend.toJSON(e).uuid,this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.emissiveIntensity&&(this.emissiveIntensity=t.getNode(e.emissiveIntensity)),this}},Pte=class extends Lc{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get emissive(){return this.fragment.emissive}set emissive(e){this.fragment.emissive=e}get emissiveIntensity(){return this.fragment.emissiveIntensity}set emissiveIntensity(e){this.fragment.emissiveIntensity=e}constructor(e=new Ote,t){super(e,e,t);this.type="LambertNodeMaterial",this.fragment=e}},ID=class extends Pte{constructor(e,t,r){super(t,e);this.userData.type="LambertMaterial",this.userData.category="Lambert",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof yu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new ID(void 0,i);return n.fromJSON(t,r),n}dispose(){super.dispose()}},Dte=class extends zt{constructor(){super("toon");this.nodeType="Toon",this.color=new Qr(Ms),this.specular=new Qr(1118481),this.shininess=new Qe(30),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(wc.merge([Fe.fog,Fe.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Qr(Ms)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					#ifndef FLAT_SHADED
						varying vec3 vNormal;
					#endif
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
						#ifndef PHYSICALLY_CORRECT_LIGHTS
							irradiance *= PI;
						#endif
						reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let h=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];h.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&h.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h.push("material.diffuseColor = diffuseColor;"),h.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),h.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result}, ${a.result} );
				}
				`),o&&h.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.specular=e.specular.clone(),this.shininess=e.shininess.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.shadingAlpha&&(t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid),this.shadingBlend&&(t.shadingBlend=this.shadingBlend.toJSON(e).uuid),this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.specular&&(this.specular=t.getNode(e.specular)),e.shininess&&(this.shininess=t.getNode(e.shininess)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),this}},Rte=class extends Lc{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get specular(){return this.fragment.specular}set specular(e){this.fragment.specular=e}get shininess(){return this.fragment.shininess}set shininess(e){this.fragment.shininess=e}constructor(e=new Dte,t){super(e,e,t);this.type="ToonNodeMaterial",this.fragment=e}},BD=class extends Rte{constructor(e,t,r){super(t,e);this.userData.type="ToonMaterial",this.userData.category="Toon",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof yu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new BD(void 0,i);return n.fromJSON(t,r),n}dispose(){super.dispose()}},Nte=class extends zt{constructor(){super("standard");this.nodeType="Standard",this.color=new Qr(Ms),this.roughness=new Qe(.3),this.metalness=new Qe(0),this.reflectivity=new Qe(.5),this.shadingAlpha=new Qe(1),this.shadingBlend=new nr(0)}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(wc.merge([Fe.fog,Fe.lights])),Fe.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=i.join(`
`)}else{let r={gamma:!0};this.color===void 0&&(this.color=new Qr(Ms)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let i=this.color.flow(e,"c",{slot:"color",context:r}),n=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let p=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];p.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	float roughnessFactor = "+n.result+";",s.code,"	float metalnessFactor = "+s.result+";"),h&&p.push(h.code,"#ifdef ALPHATEST","	if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.specularRoughness = max( roughnessFactor, 0.0525 );","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?p.push(d.code,"material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),p.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${o.result} );
				}
				`),l&&p.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join(`
`)}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.roughness=e.roughness.clone(),this.metalness=e.metalness.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.reflectivity&&(this.reflectivity=e.reflectivity.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),this.color&&(t.color=this.color.toJSON(e).uuid),t.roughness=this.roughness.toJSON(e).uuid,t.metalness=this.metalness.toJSON(e).uuid,this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.reflectivity&&(t.reflectivity=this.reflectivity.toJSON(e).uuid),this.shadingAlpha&&(t.shadingAlpha=this.shadingAlpha.toJSON(e).uuid),this.shadingBlend&&(t.shadingBlend=this.shadingBlend.toJSON(e).uuid),this.afterColor&&(t.afterColor=this.afterColor.toJSON(e).uuid)),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.position&&(this.position=t.getNode(e.position)),e.color&&(this.color=t.getNode(e.color)),e.roughness&&(this.roughness=t.getNode(e.roughness)),e.metalness&&(this.metalness=t.getNode(e.metalness)),e.alpha&&(this.alpha=t.getNode(e.alpha)),e.reflectivity&&(this.reflectivity=t.getNode(e.reflectivity)),e.shadingAlpha&&(this.shadingAlpha=t.getNode(e.shadingAlpha)),e.shadingBlend&&(this.shadingBlend=t.getNode(e.shadingBlend)),e.afterColor&&(this.afterColor=t.getNode(e.afterColor)),this}},Ite=class extends Lc{get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get roughness(){return this.fragment.roughness}set roughness(e){this.fragment.roughness=e}get metalness(){return this.fragment.metalness}set metalness(e){this.fragment.metalness=e}get reflectivity(){return this.fragment.reflectivity}set reflectivity(e){this.fragment.reflectivity=e}constructor(e=new Nte,t){super(e,e,t);this.type="StandardNodeMaterial",this.fragment=e}},zD=class extends Ite{constructor(e,t,r){super(t,e);this.userData.type="PhysicalMaterial",this.userData.category="Physical",this.userData.layers=r!=null?r:this._getLayerStack(e==null?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(e.userData.layers!==void 0&&e.userData.layers instanceof yu){let t=e.userData.layers,r=e.fragment;super.copy(e);let i=r.clone();this.fragment=i,this.vertex=i;let n=t.clone(this);this.userData.layers=n,i.shadingAlpha.value=r.shadingAlpha.value,i.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let i=r.getNode(t.vertex),n=new zD(void 0,i);return n.fromJSON(t,r),n}dispose(){super.dispose()}};function FD(e,t){switch(e.data.type){case"light":return sa(e);case"fresnel":return zte(e,t);case"gradient":return Fte(e);case"depth":return Ute(e);case"normal":return kte(e);case"noise":return Hte(e,t);case"texture":return Gte(e,t);case"rainbow":return Vte(e);case"transmission":return jte(e,t);case"matcap":return Wte(e,t);case"displace":return Jte(e);case"color":default:return Bte(e,t)}}function UD(e){return{type:e.data.type}}function sa(e){let{alpha:t,mode:r}=e.data;return tt(Le({},UD(e)),{alpha:t,mode:r})}function Bte(e,t){return tt(Le({},sa(e)),{color:Zi(e.data.color,t)})}function zte(e,t){let{bias:r,scale:i,intensity:n,factor:s,color:a}=e.data;return tt(Le({},sa(e)),{color:Zi(a,t),bias:r,scale:i,intensity:n,factor:s})}function Fte(e){let{gradientType:t,smooth:r,colors:i,steps:n,angle:s,offset:a,morph:o}=e.data;return tt(Le({},sa(e)),{gradientType:t,smooth:r,colors:i.map(l=>new Et(l[0],l[1],l[2],l[3])),num:i.length,steps:n,offset:new Q(...a),morph:new Q(...o),angle:s})}function Ute(e){let{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:a,direction:o,colors:l,steps:h,smooth:d}=e.data;return tt(Le({},sa(e)),{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:new O(...a),direction:o?new O(...o):new O(1,0,0),num:l.length,colors:l.map(p=>new Et(p[0],p[1],p[2],p[3])),steps:h,smooth:d})}function kte(e){let{cnormal:t}=e.data;return tt(Le({},sa(e)),{cnormal:new O(t[0],t[1],t[2])})}function Hte(e,t){let{data:r}=e;return tt(Le({},sa(e)),{scale:r.scale,move:r.move,fA:new Q(...r.fA),fB:new Q(...r.fB),distortion:new Q(...r.distortion),colorA:Zi(r.colorA,t),colorB:Zi(r.colorB,t),colorC:Zi(r.colorC,t),colorD:Zi(r.colorD,t),noiseType:r.noiseType})}function Gte(e,t){let{projection:r,axis:i,crop:n,size:s}=e.data,{image:a,wrapping:o,repeat:l,offset:h}=e.data.texture,d=new Ir,p;if(typeof a=="string")p=t==null?void 0:t.getImage(a);else{let f=new Image;f.src=a.data,f.onload=()=>{t!=null&&t.onImageLoad&&(t==null||t.onImageLoad(a.data))},p=f}return d.image=p,d.wrapS=d.wrapT=o,tt(Le({},sa(e)),{texture:d,mat:new Nr().setUvTransform(h[0],h[1],l[0],l[1],0,0,0),crop:n,projection:r,axis:["x","y","z"].indexOf(i),size:s})}function Vte(e){let{data:t}=e;return tt(Le({},sa(e)),{filmThickness:t.filmThickness,movement:t.movement,wavelengths:new O(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new O(...t.offset)})}function jte(e,t){let{data:r}=e;return tt(Le({},sa(e)),{thickness:r.thickness,ior:r.ior,roughness:r.roughness,transmissionSamplerMap:t.transmissionSamplerMap,transmissionDepthMap:t.transmissionDepthMap})}function Wte(e,t){let r=new Ir,{image:i}=e.data.texture,n;if(typeof i=="string")n=t==null?void 0:t.getImage(i);else{let a=new Image;a.src=i.data,a.onload=()=>{t!=null&&t.onImageLoad&&(t==null||t.onImageLoad(i.data))},n=a}r.image=n;let s=16777215;return tt(Le({},sa(e)),{color:s,texture:r})}function Jte(e){let{data:t}=e,r=tt(Le({},UD(e)),{intensity:t.intensity});if(t.displacementType==="noise")return tt(Le({},r),{offset:new O(...t.offset),scale:t.scale,movement:t.movement,noiseType:t.noiseType});{let i=new Ir,n=new Nr().setUvTransform(0,0,1,1,0,0,0);return tt(Le({},r),{texture:i,mat:n,crop:t.crop})}}function kD(e,t,r){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];return i?(i.value=r.alpha*(r.visible?1:0),i):void 0}}var Vd;(function(e){function t(r){return new Ue(r.x,r.y,r.z).getHex()}e.getHex=t})(Vd||(Vd={}));var m2;(function(e){function t(r){return new Et(r.r,r.g,r.b,r.a)}e.getThreeVector4=t})(m2||(m2={}));var g2;(function(e){function t(i,n){i.setRGB(n.r,n.g,n.b)}e.setThreeColor=t;function r(i){return new Ue(i.r,i.g,i.b).getHex()}e.getHex=r})(g2||(g2={}));function gp(e,t){return typeof e=="string"?t.getMaterialOrDeletedPlaceholder(e):HD(e,t)}function Yte(e,t){return e.map(r=>gp(r,t))}function HD(e,t){var r;let i=(r=e.layers)!=null?r:ev.defaultTwoLayerData("phong").layers,n=qte(i),s;switch(n.category){case"basic":s=new wo;break;case"lambert":{s=new ID;break}case"toon":{s=new BD;break}case"physical":s=new zD;break;case"phong":default:{s=new sc;break}}let a=s.userData.layers;Xte(a);for(let o=i.length-1;o>=0;o--)Qte(a,i[o],t);switch(n.category){case"basic":break;case"lambert":{let h=s,d=Zi(n.emissive,t);d instanceof Ue?h.emissive.value=d:h.emissive.value.setHex(Vd.getHex(d));break}case"toon":{let h=s,d=n;h.shininess.value=d.shininess;let p=Zi(d.specular,t);p instanceof Ue?h.specular.value=p:h.specular.value.setHex(Vd.getHex(p));break}case"physical":let o=s,l=n;o.metalness.value=l.metalness,o.roughness.value=l.roughness,o.reflectivity.value=l.reflectivity;break;case"phong":default:{let h=s,d=n;h.shininess.value=d.shininess;let p=Zi(d.specular,t);p instanceof Ue?h.specular.value=p:h.specular.value.setHex(Vd.getHex(p));break}}return a.blendColors(),a.blendAfterColors(),a.blendPositions(),s}function qte(e){for(let t of e)if(t.data.type==="light")return t.data;return{type:"light",category:"basic",visible:!0,alpha:1,mode:aw.Normal}}function Xte(e){for(let t of e.getLayers())e.removeLayer(t.id)}function Qte(e,t,r){let i=FD(t,r);i.type==="transmission"&&(i.transmissionSamplerMap=r==null?void 0:r.transmissionSamplerMap,i.transmissionDepthMap=r==null?void 0:r.transmissionDepthMap);let n=e.addLayer(i);n.uuid=t.id;for(let s in t.data)kD(s,n,t.data)}var jd=new Set,ao;(function(e){e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING"})(ao||(ao={}));var vp=class{constructor(){this.easing=4,this.duration=1e3,this.delay=0,this.cubicControls=[.5,.05,.1,.3],this.springParameters={mass:1,stiffness:80,damping:10,velocity:0},this.repeat=!1,this.cycle=!1,this.rewind=!1}static create(e){let t=new vp,r=e;return t.easing=e.easing,t.duration=e.duration,t.delay=e.delay,r.easing===Xg.CUBIC?t.cubicControls=[...r.control1,...r.control2]:r.easing===Xg.SPRING&&(t.springParameters={mass:r.mass,stiffness:r.stiffness,damping:r.damping,velocity:r.velocity}),t.repeat=e.repeat,t.cycle=e.cycle,t.rewind=e.rewind,t}get sp_mass(){return this.springParameters.mass}set sp_mass(e){this.springParameters.mass=e}get sp_stiffness(){return this.springParameters.stiffness}set sp_stiffness(e){this.springParameters.stiffness=e}get sp_damping(){return this.springParameters.damping}set sp_damping(e){this.springParameters.damping=e}get sp_velocity(){return this.springParameters.velocity}set sp_velocity(e){this.springParameters.velocity=e}copy(e){return this.easing=e.easing,this.duration=e.duration,this.delay=e.delay,this.cubicControls=[...e.cubicControls],this.springParameters=Le({},e.springParameters),this.repeat=e.repeat,this.cycle=e.cycle,this.rewind=e.rewind,this}clone(){return new vp().copy(this)}toJSON(){let e={easing:this.easing,duration:this.duration,delay:this.delay,cubicControls:this.cubicControls,springParameters:Le({},this.springParameters)};return this.repeat===!0&&(e.repeat=!0),this.cycle===!0&&(e.cycle=!0),this.rewind===!0&&(e.rewind=!0),this.object!==void 0&&(e.object=this.object.uuid),this.state!==void 0&&(e.state=this.state.uuid),e}fromJSON(e,t,r){return this.easing=e.easing,this.duration=e.duration,this.delay=e.delay,this.cubicControls=[...e.cubicControls],this.springParameters.mass=e.springParameters.mass,this.springParameters.stiffness=e.springParameters.stiffness,this.springParameters.damping=e.springParameters.damping,this.springParameters.velocity=e.springParameters.velocity,e.repeat!==void 0&&(this.repeat=e.repeat),e.cycle!==void 0&&(this.cycle=e.cycle),e.rewind!==void 0&&(this.rewind=e.rewind),e.object!==void 0&&(this.object=t[e.object]),e.state!==void 0&&(this.state=r[e.state]),this}};function Kte(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Mt;(function(e){e[e.MOUSE_DOWN=0]="MOUSE_DOWN",e[e.MOUSE_UP=1]="MOUSE_UP",e[e.MOUSE_HOVER=2]="MOUSE_HOVER",e[e.MOUSE_ENTER=3]="MOUSE_ENTER",e[e.MOUSE_LEAVE=4]="MOUSE_LEAVE",e[e.KEY_DOWN=5]="KEY_DOWN",e[e.KEY_UP=6]="KEY_UP",e[e.START=7]="START",e[e.OPEN_LINK=8]="OPEN_LINK",e[e.LOOK_AT=9]="LOOK_AT",e[e.FOLLOW=10]="FOLLOW",e[e.SCROLL=11]="SCROLL"})(Mt||(Mt={}));var ov=class{constructor(e,t){this.targets=[],this._type=e,this.key=t}get type(){return this._type}set type(e){this._type=e,e===9?this.distance=1e3:this.distance=void 0,e!==5&&e!==6&&(this.key=void 0)}newTarget(e){let t=new vp;if(t.object=e,e!==void 0){let r=e.interaction.states;r.length>0&&(t.state=r[r.length-1])}return this.targets.push(t),jd.add(t),t}addTarget(e,t=0){this.targets.splice(t,0,e),jd.add(e)}removeTarget(e){jd.delete(this.targets[e]),this.targets.splice(e,1)}dispatchReverse(){for(let e=0,t=this.targets.length;e<t;++e){let r=this.targets[e];r.state!==void 0&&r.object!==void 0&&r.object.interaction.reverse(r)}}dispatch(e){this.url!==void 0&&(this._type===8||this._type===0||this._type===1||this._type===5||this._type===6)&&(Kte()?window.location.assign(this.url):window.open(this.url,"_blank"));for(let t=0,r=this.targets.length;t<r;++t){let i=this.targets[t];i.state!==void 0&&i.object!==void 0&&(this._type===11?i.object.interaction.seek(i,e,this.steps):i.object.interaction.play(i))}}copy(e){return this._type=e.type,this.key=e.key,this.url=e.url,this.distance=e.distance,this}clone(){return new ov().copy(this)}toJSON(){let e={type:this._type,key:this.key,ui:{isCollapsed:!1}};if(this.url!==void 0&&(e.url=this.url),this.distance!==void 0&&(e.distance=this.distance),this.targets.length>0){e.targets=[];for(let t=0,r=this.targets.length;t<r;++t)e.targets.push(this.targets[t].toJSON())}return e}fromJSON(e,t,r){if(this._type=e.type,this.key=e.key,this.targets=[],this.url=e.url,e.distance!==void 0&&(this.distance=e.distance),e.targets!==void 0)for(let i=0,n=e.targets.length;i<n;++i)this.addTarget(new vp().fromJSON(e.targets[i],t,r),i);return this}},ac=class{constructor(){this.uuid=sr.generateUUID(),this.name="",this.position=new O,this.rotation=new pl,this.scale=new O,this.hiddenMatrix=new Ge}static create(e,t,r){let i=new ac;if(i.uuid=e,i.position.fromArray(t.position),i.scale.fromArray(t.scale),i.rotation.fromArray(t.rotation),i.hiddenMatrix.fromArray(t.hiddenMatrix),"geometry"in t&&(i.geometry=t.geometry),"material"in t&&(i.material={layersList:gp(t.material,r).layersList.getLayers()}),"materials"in t&&(i.material=t.materials.map(n=>({layersList:gp(n,r).layersList.getLayers()}))),"perspective"in t&&(i.camera={zoomOrtho:t.orthographic.zoom,zoomPersp:t.perspective.zoom,targetOffset:t.targetOffset}),Zg.is(t.type)){let n=t;i.light={intensity:n.intensity,color:Zi(n.color,r)}}return i}update(e){this.updateMatrix(e),"geometry"in e&&this.updateGeometry(e),"material"in e&&this.updateMaterial(e),e.objectType==="CombinedCamera"?this.updateCamera(e):(e.objectType==="LightDirectional"||e.objectType==="LightPoint"||e.objectType==="LightSpot")&&this.updateLight(e)}updateCamera(e){this.camera={zoomPersp:e.perspCamera.zoom,zoomOrtho:e.orthoCamera.zoom,targetOffset:e.targetOffset}}updateLight(e){let t=e.color;this.light={intensity:e.intensity,color:{r:t.r,g:t.g,b:t.b}}}updateMatrix(e){this.position.copy(e.position),this.rotation.copy(e.rotation),this.scale.copy(e.scale),"hiddenMatrix"in e&&this.hiddenMatrix.copy(e.hiddenMatrix)}updateGeometry(e){if("geometry"in e&&this.geometry!==void 0){let{width:t,height:r,depth:i}=e.geometry.userData.parameters;this.geometry={width:t,height:r,depth:i}}}updateMaterial(e){if("material"in e&&this.material!==void 0)if(e.material instanceof Array){this.material=[];for(let t=0,r=e.material.length;t<r;++t){let i=e.material[t],n=[],s=i.layersList.head;for(;s;)n.push(s.clone()),s=s.next;this.material.push({layersList:n})}}else{let t=e.material,r=[],i=t.layersList.head;for(;i;)r.push(i.clone()),i=i.next;this.material={layersList:r}}}execute(e){if(e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale),e.updateMatrix(),"hiddenMatrix"in e&&e.hiddenMatrix.copy(this.hiddenMatrix),"geometry"in e&&this.geometry!==void 0){let t=e.geometry.userData.parameters,r=this.geometry;(r.width!==t.width||r.height!==t.height||r.depth!==t.depth)&&e.updateGeometry({parameters:{width:r.width,height:r.height,depth:r.depth}})}if("material"in e&&this.material!==void 0){let t=e.material;if(t instanceof Array){let r=this.material;for(let i=0,n=r.length;i<n;++i){let s=t[i].layersList.head,a=r[i].layersList,o=0;for(;s;)s.copy(a[o++]),s=s.next;t[i].dispose()}}else{if(t.userData.isAsset)return;let r=0,i=t.layersList.head,n=this.material.layersList;for(;i;)i.copyUniforms(n[r++]),i=i.next;t.dispose()}}if(this.camera&&e.objectType==="CombinedCamera"&&(e=e,e.zoom=e.cameraType==="OrthographicCamera"?this.camera.zoomOrtho:this.camera.zoomPersp,e.targetOffset=this.camera.targetOffset,e.updateProjectionMatrix()),this.light&&(e.objectType==="LightDirectional"||e.objectType==="LightPoint"||e.objectType==="LightSpot")){e=e,e.intensity=this.light.intensity;let t=this.light.color;e.color.setRGB(t.r,t.g,t.b)}}copy(e){if(this.name=e.name,this.position.copy(e.position),this.rotation.copy(e.rotation),this.scale.copy(e.scale),this.hiddenMatrix.copy(e.hiddenMatrix),e.geometry!==void 0&&(this.geometry={width:e.geometry.width,height:e.geometry.height,depth:e.geometry.depth}),e.material!==void 0)if(e.material instanceof Array){this.material=[];for(let t=0,r=e.material.length;t<r;++t)this.material.push({layersList:e.material[t].layersList.map(i=>i.clone())})}else this.material={layersList:e.material.layersList.map(t=>t.clone())};return e.camera!==void 0&&(this.camera={zoomPersp:e.camera.zoomPersp,zoomOrtho:e.camera.zoomOrtho,targetOffset:e.camera.targetOffset}),e.light!==void 0&&(this.light={intensity:e.light.intensity,color:Vn.clone(e.light.color)}),this}clone(){return new ac().copy(this)}toJSON(e){let t={uuid:this.uuid,name:this.name,position:this.position.toArray(),rotation:this.rotation.toArray(),scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};if(this.geometry!==void 0&&(t.geometry={width:this.geometry.width,height:this.geometry.height,depth:this.geometry.depth}),this.material!==void 0)if(this.material instanceof Array){t.material=[];for(let r=0,i=this.material.length;r<i;++r)t.material.push({layersList:this.material[r].layersList.map(n=>n.toJSON(e))})}else t.material={layersList:this.material.layersList.map(r=>r.toJSON(e))};return this.camera!==void 0&&(t.camera={zoomPersp:this.camera.zoomPersp,zoomOrtho:this.camera.zoomOrtho,targetOffset:this.camera.targetOffset}),t}fromJSON(e,t){var r;if(this.uuid=e.uuid,this.name=e.name,this.position.fromArray(e.position),this.rotation.fromArray(e.rotation),this.scale.fromArray(e.scale),this.hiddenMatrix.fromArray(e.hiddenMatrix),e.geometry!==void 0&&(this.geometry={width:e.geometry.width,height:e.geometry.height,depth:e.geometry.depth}),e.material!==void 0)if(e.material instanceof Array){this.material=[];for(let i=0,n=e.material.length;i<n;++i)this.material.push({layersList:e.material[i].layersList.map(s=>c2(s,t))})}else this.material={layersList:e.material.layersList.map(i=>c2(i,t))};return e.camera!==void 0&&(this.camera={zoomPersp:e.camera.zoomPersp,zoomOrtho:e.camera.zoomOrtho,targetOffset:(r=e.camera.targetOffset)!=null?r:-1}),this}},GD={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},xS={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Zte=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],lv={CSS:{},springs:{}};function La(e,t,r){return Math.min(Math.max(e,t),r)}function Wd(e,t){return e.indexOf(t)>-1}function J1(e,t){return e.apply(null,t)}var ut={arr:function(e){return Array.isArray(e)},obj:function(e){return Wd(Object.prototype.toString.call(e),"Object")},pth:function(e){return ut.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||ut.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e=="undefined"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ut.hex(e)||ut.rgb(e)||ut.hsl(e)},key:function(e){return!GD.hasOwnProperty(e)&&!xS.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function VD(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function jD(e,t){var r=VD(e),i=La(ut.und(r[0])?1:r[0],.1,100),n=La(ut.und(r[1])?100:r[1],.1,100),s=La(ut.und(r[2])?10:r[2],.1,100),a=La(ut.und(r[3])?0:r[3],.1,100),o=Math.sqrt(n/i),l=s/(2*Math.sqrt(n*i)),h=l<1?o*Math.sqrt(1-l*l):0,d=1,p=l<1?(l*o+-a)/h:-a+o;function f(v){var w=t?t*v/1e3:v;return l<1?w=Math.exp(-w*l*o)*(d*Math.cos(h*w)+p*Math.sin(h*w)):w=(d+p*w)*Math.exp(-w*o),v===0||v===1?v:1-w}function m(){var v=lv.springs[e];if(v)return v;for(var w=1/6,S=0,y=0;;)if(S+=w,f(S)===1){if(y++,y>=16)break}else y=0;var g=S*w*1e3;return lv.springs[e]=g,g}return t?f:m}function $te(e){return e===void 0&&(e=10),function(t){return Math.ceil(La(t,1e-6,1)*e)*(1/e)}}var ere=function(){var e=11,t=1/(e-1);function r(d,p){return 1-3*p+3*d}function i(d,p){return 3*p-6*d}function n(d){return 3*d}function s(d,p,f){return((r(p,f)*d+i(p,f))*d+n(p))*d}function a(d,p,f){return 3*r(p,f)*d*d+2*i(p,f)*d+n(p)}function o(d,p,f,m,v){var w,S,y=0;do S=p+(f-p)/2,w=s(S,m,v)-d,w>0?f=S:p=S;while(Math.abs(w)>1e-7&&++y<10);return S}function l(d,p,f,m){for(var v=0;v<4;++v){var w=a(p,f,m);if(w===0)return p;var S=s(p,f,m)-d;p-=S/w}return p}function h(d,p,f,m){if(!(0<=d&&d<=1&&0<=f&&f<=1))return;var v=new Float32Array(e);if(d!==p||f!==m)for(var w=0;w<e;++w)v[w]=s(w*t,d,f);function S(y){for(var g=0,_=1,b=e-1;_!==b&&v[_]<=y;++_)g+=t;--_;var T=(y-v[_])/(v[_+1]-v[_]),A=g+T*t,M=a(A,d,f);return M>=.001?l(y,A,d,f):M===0?A:o(y,g,g+t,d,f)}return function(y){return d===p&&f===m||y===0||y===1?y:s(S(y),p,m)}}return h}(),WD=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=La(i,1,10),a=La(n,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-a/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/a)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,a){return function(o){return 1-n(s,a)(1-o)}},e["easeInOut"+i]=function(s,a){return function(o){return o<.5?n(s,a)(o*2)/2:1-n(s,a)(o*-2+2)/2}}}),e}();function wS(e,t){if(ut.fnc(e))return e;var r=e.split("(")[0],i=WD[r],n=VD(e);switch(r){case"spring":return jD(e,t);case"cubicBezier":return J1(ere,n);case"steps":return J1($te,n);default:return J1(i,n)}}function JD(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function u0(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var a=e[s];t.call(i,a,s,e)&&n.push(a)}return n}function h0(e){return e.reduce(function(t,r){return t.concat(ut.arr(r)?h0(r):r)},[])}function v2(e){return ut.arr(e)?e:(ut.str(e)&&(e=JD(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function _S(e,t){return e.some(function(r){return r===t})}function SS(e){var t={};for(var r in e)t[r]=e[r];return t}function yw(e,t){var r=SS(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function c0(e,t){var r=SS(e);for(var i in t)r[i]=ut.und(e[i])?t[i]:e[i];return r}function tre(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function rre(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(o,l,h,d){return l+l+h+h+d+d}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),a=parseInt(i[3],16);return"rgba("+n+","+s+","+a+",1)"}function ire(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function a(f,m,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?f+(m-f)*6*v:v<1/2?m:v<2/3?f+(m-f)*(2/3-v)*6:f}var o,l,h;if(i==0)o=l=h=n;else{var d=n<.5?n*(1+i):n+i-n*i,p=2*n-d;o=a(p,d,r+1/3),l=a(p,d,r),h=a(p,d,r-1/3)}return"rgba("+o*255+","+l*255+","+h*255+","+s+")"}function nre(e){if(ut.rgb(e))return tre(e);if(ut.hex(e))return rre(e);if(ut.hsl(e))return ire(e)}function go(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function sre(e){if(Wd(e,"translate")||e==="perspective")return"px";if(Wd(e,"rotate")||Wd(e,"skew"))return"deg"}function xw(e,t){return ut.fnc(e)?e(t.target,t.id,t.total):e}function Oa(e,t){return e.getAttribute(t)}function bS(e,t,r){var i=go(t);if(_S([r,"deg","rad","turn"],i))return t;var n=lv.CSS[t+r];if(!ut.und(n))return n;var s=100,a=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=s+r;var l=s/a.offsetWidth;o.removeChild(a);var h=l*parseFloat(t);return lv.CSS[t+r]=h,h}function YD(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?bS(e,n,r):n}}function AS(e,t){if(ut.dom(e)&&!ut.inp(e)&&(Oa(e,t)||ut.svg(e)&&e[t]))return"attribute";if(ut.dom(e)&&_S(Zte,t))return"transform";if(ut.dom(e)&&t!=="transform"&&YD(e,t))return"css";if(e[t]!=null)return"object"}function qD(e){if(ut.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function are(e,t,r,i){var n=Wd(t,"scale")?1:0+sre(t),s=qD(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?bS(e,s,i):s}function MS(e,t,r,i){switch(AS(e,t)){case"transform":return are(e,t,i,r);case"css":return YD(e,t,r);case"attribute":return Oa(e,t);default:return e[t]||0}}function ES(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=go(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function XD(e,t){if(ut.col(e))return nre(e);if(/\s/g.test(e))return e;var r=go(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function TS(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ore(e){return Math.PI*2*Oa(e,"r")}function lre(e){return Oa(e,"width")*2+Oa(e,"height")*2}function ure(e){return TS({x:Oa(e,"x1"),y:Oa(e,"y1")},{x:Oa(e,"x2"),y:Oa(e,"y2")})}function QD(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=TS(i,s)),i=s}return r}function hre(e){var t=e.points;return QD(e)+TS(t.getItem(t.numberOfItems-1),t.getItem(0))}function KD(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return ore(e);case"rect":return lre(e);case"line":return ure(e);case"polyline":return QD(e);case"polygon":return hre(e)}}function cre(e){var t=KD(e);return e.setAttribute("stroke-dasharray",t),t}function dre(e){for(var t=e.parentNode;ut.svg(t)&&ut.svg(t.parentNode);)t=t.parentNode;return t}function ZD(e,t){var r=t||{},i=r.el||dre(e),n=i.getBoundingClientRect(),s=Oa(i,"viewBox"),a=n.width,o=n.height,l=r.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:o/l[3]}}function pre(e,t){var r=ut.str(e)?JD(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:ZD(r),totalLength:KD(r)*(i/100)}}}function fre(e,t){function r(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var i=ZD(e.el,e.svg),n=r(),s=r(-1),a=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(a.y-s.y,a.x-s.x)*180/Math.PI}}function y2(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=XD(ut.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:ut.str(e)||t?i.split(r):[]}}function $D(e){var t=e?h0(ut.arr(e)?e.map(v2):v2(e)):[];return u0(t,function(r,i,n){return n.indexOf(r)===i})}function eR(e){var t=$D(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:qD(r)}}})}function mre(e,t){var r=SS(t);if(/^spring/.test(r.easing)&&(r.duration=jD(r.easing)),ut.arr(e)){var i=e.length,n=i===2&&!ut.obj(e[0]);n?e={value:e}:ut.fnc(t.duration)||(r.duration=t.duration/i)}var s=ut.arr(e)?e:[e];return s.map(function(a,o){var l=ut.obj(a)&&!ut.pth(a)?a:{value:a};return ut.und(l.delay)&&(l.delay=o?0:t.delay),ut.und(l.endDelay)&&(l.endDelay=o===s.length-1?t.endDelay:0),l}).map(function(a){return c0(a,r)})}function gre(e){for(var t=u0(h0(e.map(function(s){return Object.keys(s)})),function(s){return ut.key(s)}).reduce(function(s,a){return s.indexOf(a)<0&&s.push(a),s},[]),r={},i=function(s){var a=t[s];r[a]=e.map(function(o){var l={};for(var h in o)ut.key(h)?h==a&&(l.value=o[h]):l[h]=o[h];return l})},n=0;n<t.length;n++)i(n);return r}function vre(e,t){var r=[],i=t.keyframes;i&&(t=c0(gre(i),t));for(var n in t)ut.key(n)&&r.push({name:n,tweens:mre(t[n],e)});return r}function yre(e,t){var r={};for(var i in e){var n=xw(e[i],t);ut.arr(n)&&(n=n.map(function(s){return xw(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function xre(e,t){var r;return e.tweens.map(function(i){var n=yre(i,t),s=n.value,a=ut.arr(s)?s[1]:s,o=go(a),l=MS(t.target,e.name,o,t),h=r?r.to.original:l,d=ut.arr(s)?s[0]:h,p=go(d)||go(l),f=o||p;return ut.und(a)&&(a=h),n.from=y2(d,f),n.to=y2(ES(a,d),f),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=wS(n.easing,n.duration),n.isPath=ut.pth(s),n.isColor=ut.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var tR={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(a,o){s+=o+"("+a+") "}),e.style.transform=s}}};function rR(e,t){var r=eR(e);r.forEach(function(i){for(var n in t){var s=xw(t[n],i),a=i.target,o=go(s),l=MS(a,n,o,i),h=o||go(l),d=ES(XD(s,h),l),p=AS(a,n);tR[p](a,n,d,i.transforms,!0)}})}function wre(e,t){var r=AS(e.target,t.name);if(r){var i=xre(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function _re(e,t){return u0(h0(e.map(function(r){return t.map(function(i){return wre(r,i)})})),function(r){return!ut.und(r)})}function iR(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){return i(s)+s.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){return i(s)+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){return i(s)+s.duration-s.endDelay})):t.endDelay,n}var x2=0;function Sre(e){var t=yw(GD,e),r=yw(xS,e),i=vre(r,e),n=eR(e.targets),s=_re(n,i),a=iR(s,r),o=x2;return x2++,c0(t,{id:o,children:[],animatables:n,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}var _n=[],w2=[],_g,bre=function(){function e(){_g=requestAnimationFrame(t)}function t(r){var i=_n.length;if(i){for(var n=0;n<i;){var s=_n[n];if(!s.paused)s.tick(r);else{var a=_n.indexOf(s);a>-1&&(_n.splice(a,1),i=_n.length)}n++}e()}else _g=cancelAnimationFrame(_g)}return e}();function Are(){document.hidden?(_n.forEach(function(e){return e.pause()}),w2=_n.slice(0),ui.running=_n=[]):w2.forEach(function(e){return e.play()})}typeof document!="undefined"&&document.addEventListener("visibilitychange",Are);function ui(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s=0,a=null;function o(g){var _=window.Promise&&new Promise(function(b){return a=b});return g.finished=_,_}var l=Sre(e);o(l);function h(){var g=l.direction;g!=="alternate"&&(l.direction=g!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(_){return _.reversed=l.reversed})}function d(g){return l.reversed?l.duration-g:g}function p(){t=0,r=d(l.currentTime)*(1/ui.speed)}function f(g,_){_&&_.seek(g-_.timelineOffset)}function m(g){if(l.reversePlayback)for(var _=s;_--;)f(g,n[_]);else for(var b=0;b<s;b++)f(g,n[b])}function v(g){var _=0,b=l.animations,T=b.length;for(l.reversePlayback===!0&&l.rewind===!1&&(g=l.duration-g);_<T;){var A=b[_],M=A.animatable,L=A.tweens,D=L.length-1,C=L[D];D&&(C=u0(L,function(q){return g<q.end})[0]||C);for(var N=La(g-C.start-C.delay,0,C.duration)/C.duration,U=isNaN(N)?1:C.easing(N),V=C.to.strings,k=C.round,G=[],$=C.to.numbers.length,W=void 0,H=0;H<$;H++){var X=void 0;if(l.reversePlayback===!0&&l.rewind===!1)var Y=C.to.numbers[H],J=C.from.numbers[H]||0;else var J=C.to.numbers[H],Y=C.from.numbers[H]||0;C.isPath?X=fre(C.value,U*J):X=Y+U*(J-Y),k&&(C.isColor&&H>2||(X=Math.round(X*k)/k)),G.push(X)}var ee=V.length;if(!ee)W=G[0];else{W=V[0];for(var ie=0;ie<ee;ie++){V[ie];var ue=V[ie+1],we=G[ie];isNaN(we)||(ue?W+=we+ue:W+=we+" ")}}tR[A.type](M.target,A.property,W,M.transforms),A.currentValue=W,_++}}function w(g){l[g]&&!l.passThrough&&l[g](l)}function S(){l.remaining&&l.remaining!==!0&&l.remaining--}function y(g){var _=l.duration,b=l.delay,T=_-l.endDelay,A=d(g);l.progress=La(A/_*100,0,100),l.reversePlayback=A<l.currentTime,n&&m(A),!l.began&&l.currentTime>=0&&(l.began=!0,w("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,w("loopBegin")),A<=b&&l.currentTime!==0&&v(0),(A>=T&&l.currentTime!==_||!_)&&v(_),A>b&&A<T?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,w("changeBegin")),w("change"),v(A)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,w("changeComplete")),l.currentTime=La(A,0,_),l.began&&w("update"),g>=_&&(r=0,S(),l.remaining?(t=i,w("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&h()):(l.paused=!0,l.completed||(l.completed=!0,w("loopComplete"),w("complete"),!l.passThrough&&"Promise"in window&&(a(),o(l)))))}return l.reset=function(){var g=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=g==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var _=s;_--;)l.children[_].reset();(l.reversed&&l.loop!==!0||g==="alternate"&&l.loop===1)&&l.remaining++,v(l.reversed?l.duration:0)},l.set=function(g,_){return rR(g,_),l},l.tick=function(g){i=g,t||(t=i),y((i+(r-t))*ui.speed)},l.seek=function(g){y(d(g))},l.pause=function(){l.paused=!0,p()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,_n.push(l),p(),_g||bre())},l.reverse=function(){h(),l.completed=!l.reversed,p()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function _2(e,t){for(var r=t.length;r--;)_S(e,t[r].animatable.target)&&t.splice(r,1)}function Mre(e){for(var t=$D(e),r=_n.length;r--;){var i=_n[r],n=i.animations,s=i.children;_2(t,n);for(var a=s.length;a--;){var o=s[a],l=o.animations;_2(t,l),!l.length&&!o.children.length&&s.splice(a,1)}!n.length&&!s.length&&i.pause()}}function Ere(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?wS(t.easing):null,n=t.grid,s=t.axis,a=t.from||0,o=a==="first",l=a==="center",h=a==="last",d=ut.arr(e),p=parseFloat(d?e[0]:e),f=d?parseFloat(e[1]):0,m=go(d?e[1]:e)||0,v=t.start||0+(d?p:0),w=[],S=0;return function(y,g,_){if(o&&(a=0),l&&(a=(_-1)/2),h&&(a=_-1),!w.length){for(var b=0;b<_;b++){if(!n)w.push(Math.abs(a-b));else{var T=l?(n[0]-1)/2:a%n[0],A=l?(n[1]-1)/2:Math.floor(a/n[0]),M=b%n[0],L=Math.floor(b/n[0]),D=T-M,C=A-L,N=Math.sqrt(D*D+C*C);s==="x"&&(N=-D),s==="y"&&(N=-C),w.push(N)}S=Math.max.apply(Math,w)}i&&(w=w.map(function(V){return i(V/S)*S})),r==="reverse"&&(w=w.map(function(V){return s?V<0?V*-1:-V:Math.abs(S-V)}))}var U=d?(f-p)/S:p;return v+U*(Math.round(w[g]*100)/100)+m}}function Tre(e){e===void 0&&(e={});var t=ui(e);return t.duration=0,t.add=function(r,i){var n=_n.indexOf(t),s=t.children;n>-1&&_n.splice(n,1);function a(f){f.passThrough=!0}for(var o=0;o<s.length;o++)a(s[o]);var l=c0(r,yw(xS,e));l.targets=l.targets||e.targets;var h=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=ut.und(i)?h:ES(i,h),a(t),l.rewind=t.rewind,t.seek(l.timelineOffset);var d=ui(l);a(d),s.push(d);var p=iR(s,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}ui.version="3.2.0";ui.speed=1;ui.running=_n;ui.remove=Mre;ui.get=MS;ui.set=rR;ui.convertPx=bS;ui.path=pre;ui.setDashoffset=cre;ui.stagger=Ere;ui.timeline=Tre;ui.easing=wS;ui.penner=WD;ui.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var km=ui,CS=class{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Bre(e)}),this.register(function(e){return new zre(e)}),this.register(function(e){return new Fre(e)}),this.register(function(e){return new Ure(e)}),this.register(function(e){return new kre(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r){let i=new Ire,n=[];for(let s=0,a=this.pluginCallbacks.length;s<a;s++)n.push(this.pluginCallbacks[s](i));i.setPlugins(n),i.write(e,t,r)}},dr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Jn={};Jn[Zr]=dr.NEAREST;Jn[Ox]=dr.NEAREST_MIPMAP_NEAREST;Jn[Px]=dr.NEAREST_MIPMAP_LINEAR;Jn[ar]=dr.LINEAR;Jn[VO]=dr.LINEAR_MIPMAP_NEAREST;Jn[du]=dr.LINEAR_MIPMAP_LINEAR;Jn[Si]=dr.CLAMP_TO_EDGE;Jn[Qh]=dr.REPEAT;Jn[zg]=dr.MIRRORED_REPEAT;var S2={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},b2=12,Cre=1179937895,Lre=2,A2=8,Ore=1313821514,Pre=5130562;function Od(e,t){return e.length===t.length&&e.every(function(r,i){return r===t[i]})}function Dre(e){if(window.TextEncoder!==void 0)return new TextEncoder().encode(e).buffer;let t=new Uint8Array(new ArrayBuffer(e.length));for(let r=0,i=e.length;r<i;r++){let n=e.charCodeAt(r);t[r]=n>255?32:n}return t.buffer}function Rre(e){return Od(e.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Nre(e,t,r){let i={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let n=t;n<t+r;n++)for(let s=0;s<e.itemSize;s++){let a;e.itemSize>4?a=e.array[n*e.itemSize+s]:s===0?a=e.getX(n):s===1?a=e.getY(n):s===2?a=e.getZ(n):s===3&&(a=e.getW(n)),i.min[s]=Math.min(i.min[s],a),i.max[s]=Math.max(i.max[s],a)}return i}function nR(e){return Math.ceil(e/4)*4}function Y1(e,t=0){let r=nR(e.byteLength);if(r!==e.byteLength){let i=new Uint8Array(r);if(i.set(new Uint8Array(e)),t!==0)for(let n=e.byteLength;n<r;n++)i[n]=t;return i.buffer}return e}var M2=null,Ire=class{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}write(e,t,r){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e);let i=this;Promise.all(this.pending).then(function(){let n=i.buffers,s=i.json,a=i.options,o=i.extensionsUsed,l=new Blob(n,{type:"application/octet-stream"}),h=Object.keys(o);if(h.length>0&&(s.extensionsUsed=h),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=l.size),a.binary===!0){let d=new window.FileReader;d.readAsArrayBuffer(l),d.onloadend=function(){let p=Y1(d.result),f=new DataView(new ArrayBuffer(A2));f.setUint32(0,p.byteLength,!0),f.setUint32(4,Pre,!0);let m=Y1(Dre(JSON.stringify(s)),32),v=new DataView(new ArrayBuffer(A2));v.setUint32(0,m.byteLength,!0),v.setUint32(4,Ore,!0);let w=new ArrayBuffer(b2),S=new DataView(w);S.setUint32(0,Cre,!0),S.setUint32(4,Lre,!0);let y=b2+v.byteLength+m.byteLength+f.byteLength+p.byteLength;S.setUint32(8,y,!0);let g=new Blob([w,v,m,f,p],{type:"application/octet-stream"}),_=new window.FileReader;_.readAsArrayBuffer(g),_.onloadend=function(){t(_.result)}}}else if(s.buffers&&s.buffers.length>0){let d=new window.FileReader;d.readAsDataURL(l),d.onloadend=function(){let p=d.result;s.buffers[0].uri=p,t(s)}}else t(s)})}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;let r=this.options,i=this.extensionsUsed;try{let n=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&n.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(let s in n.gltfExtensions)t.extensions[s]=n.gltfExtensions[s],i[s]=!0;delete n.gltfExtensions}Object.keys(n).length>0&&(t.extras=n)}catch(n){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+n.message)}}getUID(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;let t=new O;for(let r=0,i=e.count;r<i;r++)if(Math.abs(t.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);let r=e.clone(),i=new O;for(let n=0,s=r.count;n<s;n++)i.fromBufferAttribute(r,n),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(n,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1,i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}processBuffer(e){let t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,n){let s=this.json;s.bufferViews||(s.bufferViews=[]);let a;t===dr.UNSIGNED_BYTE?a=1:t===dr.UNSIGNED_SHORT?a=2:a=4;let o=nR(i*e.itemSize*a),l=new DataView(new ArrayBuffer(o)),h=0;for(let p=r;p<r+i;p++)for(let f=0;f<e.itemSize;f++){let m;e.itemSize>4?m=e.array[p*e.itemSize+f]:f===0?m=e.getX(p):f===1?m=e.getY(p):f===2?m=e.getZ(p):f===3&&(m=e.getW(p)),t===dr.FLOAT?l.setFloat32(h,m,!0):t===dr.UNSIGNED_INT?l.setUint32(h,m,!0):t===dr.UNSIGNED_SHORT?l.setUint16(h,m,!0):t===dr.UNSIGNED_BYTE&&l.setUint8(h,m),h+=a}let d={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:o};return n!==void 0&&(d.target=n),n===dr.ARRAY_BUFFER&&(d.byteStride=e.itemSize*a),this.byteOffset+=o,s.bufferViews.push(d),{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){let t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){let n=new window.FileReader;n.readAsArrayBuffer(e),n.onloadend=function(){let s=Y1(n.result),a={buffer:t.processBuffer(s),byteOffset:t.byteOffset,byteLength:s.byteLength};t.byteOffset+=s.byteLength,i(r.bufferViews.push(a)-1)}})}processAccessor(e,t,r,i){let n=this.options,s=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"},o;if(e.array.constructor===Float32Array)o=dr.FLOAT;else if(e.array.constructor===Uint32Array)o=dr.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)o=dr.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)o=dr.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),n.truncateDrawRange&&t!==void 0&&t.index===null){let f=r+i,m=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;r=Math.max(r,t.drawRange.start),i=Math.min(f,m)-r,i<0&&(i=0)}if(i===0)return null;let l=Nre(e,r,i),h;t!==void 0&&(h=e===t.index?dr.ELEMENT_ARRAY_BUFFER:dr.ARRAY_BUFFER);let d=this.processBufferView(e,o,r,i,h),p={bufferView:d.id,byteOffset:d.byteOffset,componentType:o,count:i,max:l.max,min:l.min,type:a[e.itemSize]};return e.normalized===!0&&(p.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(p)-1}processImage(e,t,r){let i=this,n=i.cache,s=i.json,a=i.options,o=i.pending;n.images.has(e)||n.images.set(e,{});let l=n.images.get(e),h=t===mi?"image/png":"image/jpeg",d=h+":flipY/"+r.toString();if(l[d]!==void 0)return l[d];s.images||(s.images=[]);let p={mimeType:h};if(a.embedImages){let m=M2=M2||document.createElement("canvas");m.width=Math.min(e.width,a.maxTextureSize),m.height=Math.min(e.height,a.maxTextureSize);let v=m.getContext("2d");if(r===!0&&(v.translate(0,m.height),v.scale(1,-1)),typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap)v.drawImage(e,0,0,m.width,m.height);else{t!==mi&&t!==$i&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>a.maxTextureSize||e.height>a.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);let w=new Uint8ClampedArray(e.height*e.width*4);if(t===mi)for(let S=0;S<w.length;S+=4)w[S+0]=e.data[S+0],w[S+1]=e.data[S+1],w[S+2]=e.data[S+2],w[S+3]=e.data[S+3];else for(let S=0,y=0;S<w.length;S+=4,y+=3)w[S+0]=e.data[y+0],w[S+1]=e.data[y+1],w[S+2]=e.data[y+2],w[S+3]=255;v.putImageData(new ImageData(w,e.width,e.height),0,0)}a.binary===!0?o.push(new Promise(function(w){m.toBlob(function(S){i.processBufferViewImage(S).then(function(y){p.bufferView=y,w()})},h)})):p.uri=m.toDataURL(h)}else p.uri=e.src;let f=s.images.push(p)-1;return l[d]=f,f}processSampler(e){let t=this.json;t.samplers||(t.samplers=[]);let r={magFilter:Jn[e.magFilter],minFilter:Jn[e.minFilter],wrapS:Jn[e.wrapS],wrapT:Jn[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){let t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(i.name=e.name),this._invokeAll(function(s){s.writeTexture&&s.writeTexture(e,i)});let n=r.textures.push(i)-1;return t.textures.set(e,n),n}processMaterial(e){let t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);let i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let n=e.color.toArray().concat([e.opacity]);if(Od(n,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=n),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){let a={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(a,e.metalnessMap),i.pbrMetallicRoughness.metallicRoughnessTexture=a}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){let a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){let a=e.emissive.clone().multiplyScalar(e.emissiveIntensity),o=Math.max(a.r,a.g,a.b);if(o>1&&(a.multiplyScalar(1/o),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),o>0&&(i.emissiveFactor=a.toArray()),e.emissiveMap){let l={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(l,e.emissiveMap),i.emissiveTexture=l}}if(e.normalMap){let a={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){let a={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===bi&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});let s=r.materials.push(i)-1;return t.materials.set(e,s),s}processMesh(e){let t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let g=0,_=e.material.length;g<_;g++)i.push(e.material[g].uuid);else i.push(e.material.uuid);let n=i.join(":");if(t.meshes.has(n))return t.meshes.get(n);let s=e.geometry,a;if(e.isLineSegments?a=dr.LINES:e.isLineLoop?a=dr.LINE_LOOP:e.isLine?a=dr.LINE_STRIP:e.isPoints?a=dr.POINTS:a=e.material.wireframe?dr.LINES:dr.TRIANGLES,s.isBufferGeometry!==!0)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");let o={},l={},h=[],d=[],p={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},f=s.getAttribute("normal");f!==void 0&&!this.isNormalizedNormalAttribute(f)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(f)));let m=null;for(let g in s.attributes){if(g.substr(0,5)==="morph")continue;let _=s.attributes[g];if(g=p[g]||g.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(g)||(g="_"+g),t.attributes.has(this.getUID(_))){l[g]=t.attributes.get(this.getUID(_));continue}m=null;let b=_.array;g==="JOINTS_0"&&!(b instanceof Uint16Array)&&!(b instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new dt(new Uint16Array(b),_.itemSize,_.normalized));let T=this.processAccessor(m||_,s);T!==null&&(l[g]=T,t.attributes.set(this.getUID(_),T))}if(f!==void 0&&s.setAttribute("normal",f),Object.keys(l).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){let g=[],_=[],b={};if(e.morphTargetDictionary!==void 0)for(let T in e.morphTargetDictionary)b[e.morphTargetDictionary[T]]=T;for(let T=0;T<e.morphTargetInfluences.length;++T){let A={},M=!1;for(let L in s.morphAttributes){if(L!=="position"&&L!=="normal"){M||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),M=!0);continue}let D=s.morphAttributes[L][T],C=L.toUpperCase(),N=s.attributes[L];if(t.attributes.has(this.getUID(D))){A[C]=t.attributes.get(this.getUID(D));continue}let U=D.clone();if(!s.morphTargetsRelative)for(let V=0,k=D.count;V<k;V++)U.setXYZ(V,D.getX(V)-N.getX(V),D.getY(V)-N.getY(V),D.getZ(V)-N.getZ(V));A[C]=this.processAccessor(U,s),t.attributes.set(this.getUID(N),A[C])}d.push(A),g.push(e.morphTargetInfluences[T]),e.morphTargetDictionary!==void 0&&_.push(b[T])}o.weights=g,_.length>0&&(o.extras={},o.extras.targetNames=_)}let v=Array.isArray(e.material);if(v&&s.groups.length===0)return null;let w=v?e.material:[e.material],S=v?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let g=0,_=S.length;g<_;g++){let b={mode:a,attributes:l};if(this.serializeUserData(s,b),d.length>0&&(b.targets=d),s.index!==null){let A=this.getUID(s.index);(S[g].start!==void 0||S[g].count!==void 0)&&(A+=":"+S[g].start+":"+S[g].count),t.attributes.has(A)?b.indices=t.attributes.get(A):(b.indices=this.processAccessor(s.index,s,S[g].start,S[g].count),t.attributes.set(A,b.indices)),b.indices===null&&delete b.indices}let T=this.processMaterial(w[S[g].materialIndex]);T!==null&&(b.material=T),h.push(b)}o.primitives=h,r.meshes||(r.meshes=[]),this._invokeAll(function(g){g.writeMesh&&g.writeMesh(e,o)});let y=r.meshes.push(o)-1;return t.meshes.set(n,y),y}processCamera(e){let t=this.json;t.cameras||(t.cameras=[]);let r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:sr.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){let r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=CS.Utils.mergeMorphTargetTracks(e.clone(),t);let n=e.tracks,s=[],a=[];for(let o=0;o<n.length;++o){let l=n[o],h=Xt.parseTrackName(l.name),d=Xt.findNode(t,h.nodeName),p=S2[h.propertyName];if(h.objectName==="bones"&&(d.isSkinnedMesh===!0?d=d.skeleton.getBoneByName(h.objectIndex):d=void 0),!d||!p)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;let f=1,m=l.values.length/l.times.length;p===S2.morphTargetInfluences&&(m/=d.morphTargetInfluences.length);let v;l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(v="CUBICSPLINE",m/=3):l.getInterpolation()===ip?v="STEP":v="LINEAR",a.push({input:this.processAccessor(new dt(l.times,f)),output:this.processAccessor(new dt(l.values,m)),interpolation:v}),s.push({sampler:a.length-1,target:{node:i.get(d),path:p}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:s}),r.animations.length-1}processSkin(e){let t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],n=e.skeleton;if(n===void 0)return null;let s=e.skeleton.bones[0];if(s===void 0)return null;let a=[],o=new Float32Array(n.bones.length*16),l=new Ge;for(let h=0;h<n.bones.length;++h)a.push(r.get(n.bones[h])),l.copy(n.boneInverses[h]),l.multiply(e.bindMatrix).toArray(o,h*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new dt(o,16)),joints:a,skeleton:r.get(s)}),i.skin=t.skins.length-1}processNode(e){let t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);let n={};if(r.trs){let a=e.quaternion.toArray(),o=e.position.toArray(),l=e.scale.toArray();Od(a,[0,0,0,1])||(n.rotation=a),Od(o,[0,0,0])||(n.translation=o),Od(l,[1,1,1])||(n.scale=l)}else e.matrixAutoUpdate&&e.updateMatrix(),Rre(e.matrix)===!1&&(n.matrix=e.matrix.elements);if(e.name!==""&&(n.name=String(e.name)),this.serializeUserData(e,n),e.isMesh||e.isLine||e.isPoints){let a=this.processMesh(e);a!==null&&(n.mesh=a)}else e.isCamera&&(n.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){let a=[];for(let o=0,l=e.children.length;o<l;o++){let h=e.children[o];if(h.visible||r.onlyVisible===!1){let d=this.processNode(h);d!==null&&a.push(d)}}a.length>0&&(n.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,n)});let s=t.nodes.push(n)-1;return i.set(e,s),s}processScene(e){let t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);let i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);let n=[];for(let s=0,a=e.children.length;s<a;s++){let o=e.children[s];if(o.visible||r.onlyVisible===!1){let l=this.processNode(o);l!==null&&n.push(l)}}n.length>0&&(i.nodes=n),this.serializeUserData(e,i)}processObjects(e){let t=new Ra;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){let t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});let r=[];for(let i=0;i<e.length;i++)e[i]instanceof Ra?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}},Bre=class{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}let r=this.writer,i=r.json,n=r.extensionsUsed,s={};e.name&&(s.name=e.name),s.color=e.color.toArray(),s.intensity=e.intensity,e.isDirectionalLight?s.type="directional":e.isPointLight?(s.type="point",e.distance>0&&(s.range=e.distance)):e.isSpotLight&&(s.type="spot",e.distance>0&&(s.range=e.distance),s.spot={},s.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,s.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),n[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},n[this.name]=!0);let a=i.extensions[this.name].lights;a.push(s),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}},zre=class{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;let r=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}},Fre=class{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;let r=this.writer,i=r.extensionsUsed,n={};t.pbrMetallicRoughness.baseColorFactor&&(n.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);let s=[1,1,1];if(e.specular.toArray(s,0),n.specularFactor=s,n.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(n.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){let a={index:r.processTexture(e.specularMap)};r.applyTextureTransform(a,e.specularMap),n.specularGlossinessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}},Ure=class{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;let r=this.writer,i=r.extensionsUsed,n={};if(n.transmissionFactor=e.transmission,e.transmissionMap){let s={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(s,e.transmissionMap),n.transmissionTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}},kre=class{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.thickness===0)return;let r=this.writer,i=r.extensionsUsed,n={};if(n.thicknessFactor=e.thickness,e.thicknessMap){let s={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(s,e.thicknessMap),n.thicknessTexture=s}n.attenuationDistance=e.attenuationDistance,n.attenuationColor=e.attenuationTint.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}};CS.Utils={insertKeyframe:function(e,t){let r=.001,i=e.getValueSize(),n=new e.TimeBufferType(e.times.length+1),s=new e.ValueBufferType(e.values.length+i),a=e.createInterpolant(new e.ValueBufferType(i)),o;if(e.times.length===0){n[0]=t;for(let l=0;l<i;l++)s[l]=0;o=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<r)return 0;n[0]=t,n.set(e.times,1),s.set(a.evaluate(t),0),s.set(e.values,i),o=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<r)return e.times.length-1;n[n.length-1]=t,n.set(e.times,0),s.set(e.values,0),s.set(a.evaluate(t),e.values.length),o=n.length-1}else for(let l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<r)return l;if(e.times[l]<t&&e.times[l+1]>t){n.set(e.times.slice(0,l+1),0),n[l+1]=t,n.set(e.times.slice(l+1),l+2),s.set(e.values.slice(0,(l+1)*i),0),s.set(a.evaluate(t),(l+1)*i),s.set(e.values.slice((l+1)*i),(l+2)*i),o=l+1;break}}return e.times=n,e.values=s,o},mergeMorphTargetTracks:function(e,t){let r=[],i={},n=e.tracks;for(let s=0;s<n.length;++s){let a=n[s],o=Xt.parseTrackName(a.name),l=Xt.findNode(t,o.nodeName);if(o.propertyName!=="morphTargetInfluences"||o.propertyIndex===void 0){r.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(np)}let h=l.morphTargetInfluences.length,d=l.morphTargetDictionary[o.propertyIndex];if(d===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let p;if(i[l.uuid]===void 0){p=a.clone();let m=new p.ValueBufferType(h*p.times.length);for(let v=0;v<p.times.length;v++)m[v*h+d]=p.values[v];p.name=(o.nodeName||"")+".morphTargetInfluences",p.values=m,i[l.uuid]=p,r.push(p);continue}let f=a.createInterpolant(new a.ValueBufferType(1));p=i[l.uuid];for(let m=0;m<p.times.length;m++)p.values[m*h+d]=f.evaluate(p.times[m]);for(let m=0;m<a.times.length;m++){let v=this.insertKeyframe(p,a.times[m]);p.values[v*h+d]=a.values[m]}}return e.tracks=r,e}};new Promise(e=>{});IO(uG());function ww(e,t,r){return e[t.uuid]===void 0&&(e[t.uuid]=t.toJSON(r)),t.uuid}new CS;function Hre(e,t,r){if(e[t.uuid]===void 0)if(t.userData.type==="NonParametricGeometry"||t.userData.type==="SubdivGeometry"){if(t.userData.type==="SubdivGeometry"){let n=t.originalGeometry;if(n){let s=t.userData;t=n.clone(),t.userData=s}else t=t.clone();delete t.attributes.color,delete t.attributes.faceMap,delete t.attributes.position,delete t.attributes.normal,t.index=null}let i=t.originalGeometry;if(i!==void 0){let n=t.userData;t=i,t.userData=n}e[t.uuid]=t.toJSON()}else{let i=t.userData;if(i.type==="VectorGeometry"){let n=t.userData.shape;i=Object.assign({},i,{shape:n.toJSON()})}e[t.uuid]={uuid:t.uuid,userData:i}}return t.uuid}function pd(e){let t=[];for(let r in e){let i=e[r];delete i.metadata,t.push(i)}return t}function Gre(e){let t=[];for(let r in e)t.push(e[r]);return t}var E2=new O,Vre=new O,T2;(function(e){e[e.started=0]="started",e[e.ended=1]="ended",e[e.once=2]="once"})(T2||(T2={}));var ma=class{constructor(e){this.object=e,this.uuid=sr.generateUUID(),this.states=[],this.events=[],this._scrollCounter=null,this._interpolateMaterialBetweenValues=(t,r,i,n=r.getNames())=>{var s,a,o,l,h;for(let d=0,p=n.length;d<p;++d){let f=n[d],m=`f${r.id}_${f}`,v=`f${i.id}_${f}`,w=r.uniforms[m],S=i.uniforms[v];if(!(!w||w.value===void 0||S===void 0)){if(f==="mode"){w.value!==S.value&&(w.value=S.value);continue}if(typeof w.value=="boolean"){w.value!==S.value&&(w.value=S.value);continue}if(typeof w.value=="number"){w.value!==S.value&&((s=this._animation)==null||s.add({targets:w,value:Number(S.value)},0));continue}if("isVector2"in w.value){w.value.equals(S.value)===!1&&((a=this._animation)==null||a.add({targets:w,x:S.value.x,y:S.value.y},0));continue}if("isVector3"in w.value){w.value.equals(S.value)===!1&&((o=this._animation)==null||o.add({targets:w,x:S.value.x,y:S.value.y,z:S.value.z},0));continue}if("isColor"in w.value){w.value.equals(S.value)===!1&&((l=this._animation)==null||l.add({targets:w.value,r:S.value.r,g:S.value.g,b:S.value.b},0));continue}}}if(r.backLayer){let d=`f${r.backLayer.id}_alpha`,p=r.backLayer.uniforms[d];(h=this._animation)==null||h.add({targets:p,value:0},0)}},this._interpolateMaterialBetweenLayers=(t,r,i)=>{var n,s,a;let o=t.layersList;if(r.backLayer===void 0){let f=i.getValues();f.alpha=0,r.backLayer=o.addLayerBeforeAt(f,r),r.backLayer.isBack=!0,t.dispose()}let l=`f${r.id}_alpha`,h=`f${(n=r.backLayer)==null?void 0:n.id}_alpha`,d=r.uniforms[l],p=(s=r.backLayer)==null?void 0:s.uniforms[h];(a=this._animation)==null||a.add({targets:d,value:0},0).add({targets:p,value:i.uniforms[`f${i.id}_alpha`].value},0)},this._interpolateMaterialTexture=(t,r,i)=>{var n;let s=`f${r.id}_texture`,a=r.uniforms[s].value,o=i.uniforms[`f${i.id}_texture`].value,l=r.uniforms[`f${r.id}_crop`],h=i.uniforms[`f${i.id}_crop`];l&&h&&l.value!==h.value&&(l.value=Number(h.value)),(a.wrapS!==o.wrapS||a.wrapT!==o.wrapT)&&(a.wrapS=o.wrapS,a.wrapT=o.wrapT,a.needsUpdate=!0);let d=a.matrix,p=o.matrix;if(d.equals(p)===!1){let m={repeatX:a.repeat.x,repeatY:a.repeat.y,offsetX:a.offset.x,offsetY:a.offset.y};(n=this._animation)==null||n.add({targets:m,repeatX:o.repeat.x,repeatY:o.repeat.y,offsetX:o.offset.x,offsetY:o.offset.y,update:()=>{a.repeat.set(m.repeatX,m.repeatY),a.offset.set(m.offsetX,m.offsetY),a.updateMatrix(),a.needsUpdate=!0}},0)}let f=["alpha","mode"];r.type==="displace_map"&&f.push("intensity"),this._interpolateMaterialBetweenValues(t,r,i,f)},this._interpolateMaterialGradient=(t,r,i)=>{var n;let s=10,a=`f${r.id}_steps`,o=`f${i.id}_steps`,l=r.uniforms[a],h=i.uniforms[o],d=`f${r.id}_colors`,p=`f${i.id}_colors`,f=r.uniforms[d],m=i.uniforms[p];for(let v=0;v<s;++v){let w=f.value[v],S=m.value[v];if(l.value[v]!==h.value[v]||!w.equals(S)){let y={value:l.value[v]};(n=this._animation)==null||n.add({targets:[y,w],value:h.value[v],x:S.x,y:S.y,z:S.z,w:S.w,update:()=>{l.value[v]=y.value}},0)}}this._interpolateMaterialBetweenValues(t,r,i,["alpha","mode","gradientType","smooth","offset","morph","angle","origin","direction","near","far"])}}static get isAllAnimationsEnded(){let e;for(let t in ma.isAnimating){if(ma.isAnimating[t]===2)return ma.isAnimating[t]=1,!1;if(ma.isAnimating[t]===0)return!1;e=!0}return e}computeCache(){return this.cache={mouseDown:this.events.find(e=>e.type===Mt.MOUSE_DOWN),mouseUp:this.events.find(e=>e.type===Mt.MOUSE_UP),mouseHover:this.events.find(e=>e.type===Mt.MOUSE_HOVER),start:this.events.find(e=>e.type===Mt.START),lookAt:this.events.find(e=>e.type===Mt.LOOK_AT),follow:this.events.find(e=>e.type===Mt.FOLLOW),keyDown:this.events.filter(e=>e.type===Mt.KEY_DOWN),keyUp:this.events.filter(e=>e.type===Mt.KEY_UP),scroll:this.events.find(e=>e.type===Mt.SCROLL)},this.cache}newState(e){let t=new ac;return t.name=e,t.update(this.object),this.states.push(t),t}addState(e,t){this.states.splice(t,0,e)}removeState(e){this.states.splice(e,1)}selectState(e){e!==void 0&&this.states[e].execute(this.object)}hasEventType(e,t){return e===Mt.KEY_DOWN||e===Mt.KEY_UP?t===void 0?!1:this.events.some(r=>r.type===e&&r.key===t):this.events.some(r=>r.type===e)}newEvent(){let e=[Mt.MOUSE_DOWN,Mt.MOUSE_UP,Mt.MOUSE_HOVER,Mt.KEY_DOWN].find(r=>this.hasEventType(r)===!1),t=new ov(e);return this.events.push(t),t}addEvent(e,t){this.events.splice(t,0,e);let r=this.events[t].targets;for(let i=0,n=r.length;i<n;++i)r[i].object!==void 0&&jd.add(r[i])}removeEvent(e){let t=this.events[e].targets;for(let r=0,i=t.length;r<i;++r)t[r].object!==void 0&&jd.delete(t[r]);this.events.splice(e,1)}copy(e){for(let t=0,r=e.states.length;t<r;++t)this.addState(e.states[t].clone(),t);for(let t=0,r=e.events.length;t<r;++t){this.addEvent(e.events[t].clone(),t);let i=e.events[t].targets;for(let n=0,s=i.length;n<s;++n){let a=i[n].clone();i[n].object===e.object?(a.object=this.object,a.state=this.states[e.states.indexOf(i[n].state)]):(a.object=i[n].object,a.state=i[n].state),this.events[t].addTarget(a,n)}}return this}clone(e){return new ma(e).copy(this)}toJSON(e){e===void 0&&(e={nodes:{},geometries:{},materials:{},textures:{},images:{},interactionStates:{}});let t={uuid:this.uuid};if(this.states.length>0){t.states=[];for(let r=0,i=this.states.length;r<i;++r)t.states.push(ww(e.interactionStates,this.states[r],e))}if(this.events.length>0){t.events=[];for(let r=0,i=this.events.length;r<i;++r)t.events.push(this.events[r].toJSON())}return t}fromJSON(e,t,r){var i;if(this.uuid=e.uuid,this.states=[],this.events=[],e.states!==void 0)for(let n=0,s=e.states.length;n<s;++n){let a=r[e.states[n]];this.states.push(a),((i=a.camera)==null?void 0:i.targetOffset)===-1&&(a.camera.targetOffset=this.object.getDistanceToTarget())}if(e.events!==void 0)for(let n=0,s=e.events.length;n<s;++n)this.events.push(new ov().fromJSON(e.events[n],t,r));return this}start(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0,this._scrollCounter=null,this._removeBackLayer()),this.states.length>1?(this.states[0].execute(this.object),this._currentState=this.states[0],this._prevState=void 0):this._state0!==void 0?this._state0.execute(this.object):this.events.some(e=>e.type===Mt.LOOK_AT||e.type===Mt.FOLLOW)&&(this._state0=new ac,this._state0.update(this.object))}end(){this._animation!==void 0&&(this._animation.pause(),this._animation=void 0,this._removeBackLayer()),this.states.length>1?this.states[0].execute(this.object):this._state0!==void 0&&(this._state0.execute(this.object),this._state0=void 0),this._currentState=void 0,this._prevState=void 0}lookAt(e){var t;this.object.lookAt(e),this.object.updateMatrix(),(t=this._animation)==null||t.finished.then(()=>{this.lookAt(e),this.object.updateMatrix()})}follow(e){this.object.position.copy(e),this.object.parent!==null&&this.object.position.applyMatrix4(new Ge().copy(this.object.parent.matrixWorld).invert()),this.object.position.applyMatrix4(new Ge().copy(this.object.hiddenMatrix).invert()),this.object.updateMatrix()}play(e){this.object.visible&&e.state!==void 0&&this.animate(e.state,e)}seek(e,t,r){var i;this._scrollCounter===null&&(this.object.visible&&e.state!==void 0&&this.animate(e.state,e,!0),this._scrollCounter=0),this._scrollCounter+=t,this._scrollCounter=Math.min(Math.max(this._scrollCounter,0),r),ma.isAnimating[e.state.uuid]=2,(i=this._animation)==null||i.seek(this._scrollCounter/r*e.duration)}reverse(e){this.object.visible&&this._prevState!==void 0&&this.animate(this._prevState,e)}_removeBackLayer(){if("material"in this.object){let e=this.object.material;if(e instanceof Array)for(let t=0,r=e.length;t<r;++t){let i=e[t].layersList,n=i.head;for(;n;)if(n.backLayer){delete n.backLayer;let s=n.next;i.removeLayer(n.id),n=s}else n.isBack&&(n.isBack=!1),n=n.next}else{let t=e.layersList,r=t.head;for(;r;)for(;r;)if(r.backLayer){delete r.backLayer;let i=r.next;t.removeLayer(r.id),r=i}else r.isBack&&(r.isBack=!1),r=r.next}}}getTimingFunction(e,t,r){switch(e){case ao.LINEAR:return"cubicBezier( 0, 0, 1, 1 )";case ao.EASE:return"cubicBezier( .25, .1, .25, 1 )";case ao.EASE_IN:return"cubicBezier( .42, 0, 1, 1 )";case ao.EASE_OUT:return"cubicBezier( 0, 0, .58, 1 )";case ao.EASE_IN_OUT:return"cubicBezier( .42, 0, .58, 1 )";case ao.CUBIC:return`cubicBezier( ${t[0]}, ${t[1]}, ${t[2]}, ${t[3]} )`;case ao.SPRING:return`spring( ${r.mass}, ${r.stiffness}, ${r.damping}, ${r.velocity} )`}}animate(e,t,r=!1){var i,n,s,a,o,l;if(ma.isAnimating[e.uuid]=0,this._currentState===e){if((i=this._animation)!=null&&i.reversed){let h=(s=(n=this._animation)==null?void 0:n.currentTime)!=null?s:0;(a=this._animation)==null||a.reset(),(o=this._animation)==null||o.seek(h),(l=this._animation)==null||l.play()}}else this._prevState=this._currentState,this._currentState=e,this._animation!==void 0&&(ma.isAnimating[this._prevState.uuid]=1,this._animation.pause()),this._removeBackLayer(),t.cycle===!0&&t.repeat===!0?this._animation=km.timeline({duration:t.duration,delay:t.delay/2,endDelay:t.delay/2,direction:"alternate",loop:!0,rewind:t.rewind,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}):t.cycle===!0&&t.repeat===!1?this._animation=km.timeline({duration:t.duration,delay:t.delay,endDelay:t.delay/2,direction:"alternate",rewind:t.rewind,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}):t.cycle===!1&&t.repeat===!0?this._animation=km.timeline({duration:t.duration,delay:t.delay,direction:"normal",loop:!0,easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}):this._animation=km.timeline({duration:t.duration,delay:t.delay,direction:"normal",easing:this.getTimingFunction(t.easing,t.cubicControls,t.springParameters),autoplay:!r}),this._animation.finished.then(()=>{r||(this._removeBackLayer(),this._animation=void 0,ma.isAnimating[e.uuid]=1)}),this.animateMatrix(e),this.animateGeometry(e),this.animateMaterial(e),this.animateCamera(e),this.animateLight(e.light)}animateMatrix(e){var t,r,i,n,s;if(this.object.position.equals(e.position)===!1){let h=this.object.position.clone(),d={t:0};(t=this._animation)==null||t.add({targets:d,t:1,update:()=>{this.object.position.lerpVectors(h,e.position,d.t),this.object.updateMatrix()}},0)}if(this.object.scale.equals(e.scale)===!1){let h=this.object.scale.clone(),d={t:0};(r=this._animation)==null||r.add({targets:d,t:1,update:()=>{this.object.scale.lerpVectors(h,e.scale,d.t),this.object.updateMatrix()}},0)}if(this.object.rotation.equals(e.rotation)===!1){let h=(this._prevState?this._prevState.rotation:this.object.rotation).toVector3(E2),d=e.rotation.toVector3(Vre).sub(h),p={t:0};if(Object.values(d).every(f=>Math.abs(f)<2*Math.PI)){let f=this.object.quaternion.clone(),m=new Gr().setFromEuler(e.rotation);(i=this._animation)==null||i.add({targets:p,t:1,update:()=>{pte(f,m,this.object.quaternion,p.t),this.object.updateMatrix()}},0)}else{let f=this.object.rotation.toVector3(),m=e.rotation.toVector3().sub(f);(n=this._animation)==null||n.add({targets:p,t:1,update:()=>{this.object.rotation.setFromVector3(E2.copy(m).multiplyScalar(p.t).add(f)),this.object.updateMatrix()}},0)}}let a=new O,o=new Gr,l=new O;if(e.hiddenMatrix.decompose(a,o,l),"hiddenMatrix"in this.object){let h=new O,d=new Gr,p=new O;if(this.object.hiddenMatrix.decompose(h,d,p),this.object.hiddenMatrix.equals(e.hiddenMatrix)===!1){let f=new O,m=new Gr,v=new O,w={t:0},S=this.object.hiddenMatrix;(s=this._animation)==null||s.add({targets:w,t:1,update:()=>{m.slerpQuaternions(d,o,w.t),f.lerpVectors(h,a,w.t),v.lerpVectors(p,l,w.t),S.compose(f,m,v)}},0)}}}animateGeometry(e){var t;if("geometry"in this.object&&e.geometry!==void 0){let r=this.object.geometry.userData.parameters,i=e.geometry;if(i.width!==r.width||i.height!==r.height||i.depth!==r.depth){let n=this.object;(t=this._animation)==null||t.add({targets:r,width:i.width,height:i.height,depth:i.depth,update:()=>{n.updateGeometry({parameters:{width:r.width,height:r.height,depth:r.depth}})}},0)}}}animateMaterial(e){if("material"in this.object&&e.material!==void 0)if(this.object.material instanceof Array)for(let t=0,r=this.object.material.length;t<r;++t)this._interpolateMaterial(this.object.material[t],e.material[t]);else{if(this.object.material.userData.isAsset)return;this._interpolateMaterial(this.object.material,e.material)}}animateCamera(e){var t,r;if(this.object.objectType==="CombinedCamera"&&e.camera!==void 0){let i=this.object,n=i.cameraType==="OrthographicCamera"?e.camera.zoomOrtho:e.camera.zoomPersp;i.zoom!==n&&((t=this._animation)==null||t.add({targets:i,zoom:n,update:()=>{i.updateProjectionMatrix()}},0)),i.targetOffset!==e.camera.targetOffset&&((r=this._animation)==null||r.add({targets:i,targetOffset:e.camera.targetOffset},0))}}animateLight(e){var t,r;if(e!==void 0&&(this.object.objectType==="LightDirectional"||this.object.objectType==="LightSpot"||this.object.objectType==="LightPoint")){let i=this.object;i.intensity!==e.intensity&&((t=this._animation)==null||t.add({targets:i,intensity:e.intensity},0)),Vn.equals(i.color,e.color)||(r=this._animation)==null||r.add({targets:i.color,r:e.color.r,g:e.color.g,b:e.color.b},0)}}_interpolateMaterial(e,t){let r=e.layersList.head,i=0;for(;r;){if(r.isBack===!0){r=r.next;continue}let n=t.layersList[i++];if(vD(r)){let s=r.uniforms[`f${r.id}_texture`].value,a=n.uniforms[`f${n.id}_texture`].value;s.image===a.image?this._interpolateMaterialTexture(e,r,n):this._interpolateMaterialBetweenLayers(e,r,n)}else r.type==="gradient"||r.type==="depth"?r.uniforms[`f${r.id}_gradientType`].value===n.uniforms[`f${n.id}_gradientType`].value?this._interpolateMaterialGradient(e,r,n):this._interpolateMaterialBetweenLayers(e,r,n):this._interpolateMaterialBetweenValues(e,r,n);r=r.next}}},d0=ma;d0.isAnimating={};var sR=e=>class extends e{hasEntityChild(){return this.children.some(t=>W1(t))}isDescendantOf(t){t instanceof Rt&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new Ge().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),W1(t)?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let i=0;i<t.children.length;i++){let n=t.children[i];this.add(n.clone())}return this}toJSON(t){let r=t===void 0,i={object:{uuid:"",objectType:""}};t===void 0&&(t={geometries:{},materials:{},textures:{},images:{},interactionStates:{},nodes:{}},i.metadata={version:1.5,type:"Object",generator:"Object3D.toJSON"});let n={uuid:this.uuid,objectType:this.type};if(this.name!==""&&(n.name=this.name),n.matrix=this.matrix.toArray(),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),n.layers=this.layers.mask,JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),this.children.length>0){n.children=[];for(let s of this.children)(W1(s)||s instanceof ta)&&n.children.push(s.toJSON(t).object)}if(r){let s=pd(t.geometries),a=pd(t.materials),o=pd(t.textures),l=pd(t.images),h=pd(t.interactionStates),d=Gre(t.nodes);s.length>0&&(i.geometries=s),a.length>0&&(i.materials=a),o.length>0&&(i.textures=o),l.length>0&&(i.images=l),h.length>0&&(i.interactionStates=h),d.length>0&&(i.nodes=d)}return i.object=n,i}fromJSON(t){return this.uuid=t.uuid,t.name!==void 0&&(this.name=t.name),t.matrix!==void 0?(this.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(this.matrixAutoUpdate=t.matrixAutoUpdate),this.matrixAutoUpdate&&this.matrix.decompose(this.position,this.quaternion,this.scale)):(t.position!==void 0&&this.position.fromArray(t.position),t.rotation!==void 0&&this.rotation.fromArray(t.rotation),t.quaternion!==void 0&&this.quaternion.fromArray(t.quaternion),t.scale!==void 0&&this.scale.fromArray(t.scale)),this.castShadow=t.castShadow!==void 0,this.receiveShadow=t.receiveShadow!==void 0,t.visible!==void 0&&(this.visible=t.visible),t.frustumCulled!==void 0&&(this.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(this.renderOrder=t.renderOrder),t.layers!==void 0&&(this.layers.mask=t.layers),t.userData!==void 0&&(this.userData=t.userData),this}},Ws=e=>"isEntity"in e,jre=e=>"isAbstractMesh"in e,Oc=e=>class extends sR(e){constructor(){super(...arguments);this.objectType="",this.isEntity=!0,this.raycastLock=!1,this.scaleLock=!1,this.hiddenMatrix=new Ge,this.interaction=new d0(this),this._singleBBox=new n2,this._recursiveBBox=new n2,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.forceComputeSize=!1}set visibility(t){this.visible=t;for(let r of this.children)Ws(r)&&r.traverseEntity(i=>{Qp(i)&&i.visible&&(i.objectHelper.visible=t)})}get visibility(){return this.visible}get interactionCache(){return this.interaction.cache===void 0&&this.interaction.computeCache(),this.interaction.cache}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors(t=>{Ws(t)&&(t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0)}),this.traverseEntity(t=>{t.singleBBoxNeedsUpdate=!0,t.recursiveBBoxNeedsUpdate=!0})}traverseEntity(t){t(this);for(let r of this.children)Ws(r)&&r.traverseEntity(t)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}shallowClone(t){return new this.constructor().shallowCopy(this,t)}shallowCopy(t,r=!0){if(super.copy(t,!1),this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),t.interaction!==void 0&&this.interaction.copy(t.interaction),r===!0)for(let i of t.children)Ws(i)&&this.add(i.shallowClone());return this}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(super.copy(t,!1),this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),t.interaction!==void 0&&this.interaction.copy(t.interaction),r===!0)for(let i of t.children)Ws(i)&&this.add(i.clone());return this}keepChildrenMatrixWorld(){let t=new Ge,r=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),t.copy(this.matrixWorld).invert(),t.multiply(r);for(let i of this.children)Ws(i)&&i.hiddenMatrix.premultiply(t)}toJSON(t){let r=super.toJSON(t),i=r.object;return this.raycastLock===!0&&(i.raycastLock=!0),this.scaleLock===!0&&(i.scaleLock=!0),i.hiddenMatrix=this.hiddenMatrix.toArray(),this.interaction!==void 0&&(i.interaction=this.interaction.toJSON(t)),r}fromJSON(t){return super.fromJSON(t),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.scaleLock!==void 0&&(this.scaleLock=t.scaleLock),this.hiddenMatrix.fromArray(t.hiddenMatrix),this}fromObject3D(t){let r=t.children;return t.children=[],Object.assign(t,{raycastLock:!1,scaleLock:!1,hiddenMatrix:new Ge}),this.copy(t),t.children=r,this}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return jx(r,t)}fromObjectTransformState(t){return t.position&&this.position.fromArray(t.position),t.rotation&&this.rotation.fromArray(t.rotation),t.scale&&this.scale.fromArray(t.scale),t.hiddenMatrix&&this.hiddenMatrix.fromArray(t.hiddenMatrix),this.updateMatrix(),this}toState(t=[]){let r=Le({name:this.name,visible:this.visible,raycastLock:this.raycastLock},this.toObjectTransformState(t));return jx(r,t)}fromState(t,r){return t.name&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.type!=="OrthographicCamera"&&t.type!=="PerspectiveCamera"&&(this.matrixAutoUpdate=!1),t.visible!==void 0&&(this.visibility=t.visible),this.fromObjectTransformState(t),this}},C2=class extends Rt{constructor(e,t={}){super();this.object=e;let r=e.recursiveBBox.getSize(new O),i=.1;this.parameters=Jx.defaultData(r.toArray(),i),Yg(this.parameters,t),this.update(),this.setHideBase(this.parameters.hideBase)}refreshMaterial(){if("material"in this.object)for(let e of this.children)e.material=this.object.material}setHideBase(e){if("material"in this.object){if(Array.isArray(this.object.material)){if(this.children.length>0){for(let t of this.object.material)t.visible=!0;if(e){let t=this.object.material.map(r=>r.clone());for(let r of this.children)r.material=t}else for(let t of this.children)t.material=this.object.material}for(let t of this.object.material)t.visible=!e}else{if(this.children.length>0)if(this.object.material.visible=!0,e){let t=this.object.material.clone();for(let r of this.children)r.material=t}else for(let t of this.children)t.material=this.object.material;this.object.material.visible=!e}this.parameters.hideBase=e}}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach(e=>e.updateMatrix())}_updateCount(){let e=this.parameters.type==="grid"?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==e)if(this.children.length<e)for(let t=0,r=e-this.children.length;t<r;++t){let i=this.object.shallowClone(!1);i.visible=!0,this.add(i),this.parameters.hideBase&&this.setHideBase(!0)}else for(let t=0,r=this.children.length-e;t<r;++t)this.remove(this.children[0])}_updateRadial(e){let t=e.radial,r=t.start*sr.DEG2RAD,i=t.end*sr.DEG2RAD,n=r-i,s=new pl(t.rotation[0]*sr.DEG2RAD,t.rotation[1]*sr.DEG2RAD,t.rotation[2]*sr.DEG2RAD),a;switch(t.axis){case"z":a=new O(0,0,1);break;case"y":a=new O(0,1,0);break;default:case"x":a=new O(1,0,0);break}for(let[o,l]of this.children.entries()){l.hiddenMatrix.identity(),l.scale.x=t.scale[0]+1,l.scale.y=t.scale[1]+1,l.scale.z=t.scale[2]+1,l.position.setScalar(0);let h=n/e.count*o-r;switch(t.axis){case"x":l.rotation.set(0,h,0);break;case"y":l.rotation.set(0,0,h);break;case"z":l.rotation.set(h,0,0);break}l.translateOnAxis(a,t.radius),l.position.x+=t.position[0],l.position.y+=t.position[1],l.position.z+=t.position[2],t.alignment===!0?(l.rotation.x+=s.x,l.rotation.y+=s.y,l.rotation.z+=s.z):l.rotation.copy(s)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new pl(t.rotation[0]*sr.DEG2RAD,t.rotation[1]*sr.DEG2RAD,t.rotation[2]*sr.DEG2RAD);for(let[i,n]of this.children.entries())n.hiddenMatrix.identity(),n.scale.x=t.scale[0]*i+1,n.scale.y=t.scale[1]*i+1,n.scale.z=t.scale[2]*i+1,n.rotation.x=r.x*i,n.rotation.y=r.y*i,n.rotation.z=r.z*i,n.position.x=t.position[0]*i,n.position.y=t.position[1]*i,n.position.z=t.position[2]*i}_updateGrid(e){let t=0,r=e.grid;if(r.useCenter===!0){let i={x:r.count[0]%2==0?2:1,y:r.count[1]%2==0?2:1,z:r.count[2]%2==0?2:1},n=new O(r.size[0]*(r.count[0]-i.x)*.5,r.size[1]*(r.count[1]-i.y)*.5,r.size[2]*(r.count[2]-i.z)*.5);for(let s=0;s<r.count[0];s++)for(let a=0;a<r.count[1];a++)for(let o=0;o<r.count[2];o++){let l=this.children[t++];l.hiddenMatrix.identity(),l.scale.setScalar(1),l.rotation.set(0,0,0),l.position.x=r.size[0]*s-n.x,l.position.y=r.size[1]*a-n.y,l.position.z=r.size[2]*o-n.z}}else for(let i=0;i<r.count[0];i++)for(let n=0;n<r.count[1];n++)for(let s=0;s<r.count[2];s++){let a=this.children[t++];a.hiddenMatrix.identity(),a.scale.setScalar(1),a.rotation.set(0,0,0),a.position.x=r.size[0]*i,a.position.y=-r.size[1]*n,a.position.z=-r.size[2]*s}}fromJSON(e){return this}toJSON(){return{}}fromClonerState(e){return e.hideBase!==void 0&&this.setHideBase(e.hideBase),Yg(this.parameters,e),this.update(),this}},Fa=class extends Oc(Ai){constructor(e,t){super(e,t);this.isAbstractMesh=!0,Array.isArray(t)&&(this.selectedMaterial=0,e.groups.length===0&&e.addGroup(0,e.getAttribute("position").count,0))}get cloner(){return this._cloner}set cloner(e){this._cloner&&this.remove(this._cloner),e&&this.add(e),this._cloner=e}getSelectedMaterial(e){return Array.isArray(this.material)?(this.selectedMaterial===void 0&&(this.selectedMaterial=e!=null?e:0),this.material[e!=null?e:this.selectedMaterial]):this.material}setSelectedMaterial(e,t){Array.isArray(this.material)?(this.selectedMaterial===void 0&&(this.selectedMaterial=t!=null?t:0),t=t!=null?t:this.selectedMaterial,this.material[t].dispose(),this.material[t]=e):(this.material.dispose(),this.material=e)}updateGeometry(e){let t=this.geometry,r=cD[t.userData.type],i=this.objectType==="NonParametric"?Object.assign({},t.userData,{geometry:t}):t.userData,n=r.build(r.normalizeInputs(e,i)),s=t.uuid;if(this.geometry.dispose(),this.geometry=n,this.geometry.uuid=s,this.geometry.computeBoundingSphere(),this.cloner)for(let a of this.cloner.children)a.geometry=this.geometry}resizeGeometry(e,t,r){uD.resizeGeometry(this.geometry,{width:e,height:t,depth:r})}shallowClone(e){return new this.constructor(this.geometry,this.material).shallowCopy(this,e)}clone(e){let t=this.objectType==="NonParametric"?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,r=mw(t),i=Array.isArray(this.material)?this.material.map(n=>n.clone()):this.material.clone();return new this.constructor(r,i).copy(this,e)}copy(e,t=!0){return super.copy(e,t),e.cloner&&(this.cloner=new C2(e,e.cloner.parameters),this.add(this.cloner)),this}toJSON(e){let t=super.toJSON(e),r=t.object;if(r.geometry=Hre(e.geometries,this.geometry,this.material),Array.isArray(this.material)){let i=[];for(let n=0,s=this.material.length;n<s;n++)i.push(ww(e.materials,this.material[n],e));r.material=i}else r.material=ww(e.materials,this.material,e);return t}fromJSON(e){return super.fromJSON(e),e.selectedMaterial!==void 0&&(this.selectedMaterial=e.selectedMaterial),this}setFromClonerState(e){e===null?this.cloner=void 0:(this.cloner===void 0&&(this.cloner=new C2(this)),this.cloner.fromClonerState(e))}fromState(e,t){var r,i;return super.fromState(e),e.type==="Mesh"&&(this.setFromClonerState(e.cloner),this.castShadow=(r=e.castShadow)!=null?r:!0,this.receiveShadow=(i=e.receiveShadow)!=null?i:!0),this}},Hm=new Q,Sg=class{constructor(e,t,r){this.message=[],this.endLine=!0,this.yLinePos=e,this.lineHeight=t,this.maxCharSize=r,this.nextChar3DPos=new Q(0,this.yLinePos+this.maxCharSize*this.lineHeight),this.align=ps.Left}addChar3D(e,t,r=this.message.length){this.message.splice(r,0,e),e.fontSize>this.maxCharSize?(this.maxCharSize=e.fontSize,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight,this.fullUpdate(t)):(e.updatePosition(this.nextChar3DPos,t),this.nextChar3DPos.x+=e.charSize)}deleteChar3D(e=this.message.length-1){let t=this.message[e];if(t)return this.message.splice(e,1),this.nextChar3DPos.x-=t.charSize,t}isEndLine(e){this.endLine=e}fullUpdate(e,t=0){this.nextChar3DPos.x=0;for(let r=t,i=this.message.length;r<i;r+=1)this.message[r].updatePosition(this.nextChar3DPos,e),this.nextChar3DPos.x+=this.message[r].charSize}checkOverFlow(e){let t,r=this.message.length-1;if(r<=0)return!1;for(;r>=0;){if(this.message[r].char!==" "){t=this.message[r];break}r-=1}return!!(r>=0&&t&&t.localPosition.x+t.charSize>e)}containSpaceOverFlow(e=this.message.length-1){for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}containSpace(e=this.message.length-1){if(this.endLine)return!0;for(let t=e;t>=0;t-=1)if(this.message[t].char===" ")return!0;return!1}popWord(e=this.message.length-1){let t=[],r=!0,i;for(i=e;i>=0;i-=1)if(this.message[i].char===" "){r=!1,t.length===0&&(i-=1,t.splice(0,0,this.message[i]));break}else t.splice(0,0,this.message[i]);return r?t=[]:this.message.splice(i+1,t.length),t}getWord(e=0,t=1){let r=[],i=e;for(i=e;;i+=t){if(!this.message[i]||this.message[i].char===" "){r.length===0&&this.message[i]&&(r.push(this.message[i]),this.message.splice(i,1));break}t>0?(r.push(this.message[i]),this.message.splice(i,1),i-=t):(r.splice(0,0,this.message[i]),this.message.splice(i,1))}return r}getWordAtIndex(e){let t=[];for(let r=e;r<this.message.length&&this.message[r].char!==" ";r++)t.push(this.message[r]);for(let r=e-1;r>=0&&this.message[r].char!==" ";r--)t.splice(0,0,this.message[r]);return t}wordSize(e=0,t=-1){let r=0,i=e;for(;i>=0&&i<this.message.length;){if(this.message[i].char===" "){r===0&&(r=this.message[i].charSize);break}r+=this.message[i].charSize,i+=t}return(i<0||i>=this.message.length)&&!this.endLine?this.message[e]?this.message[e].charSize:999999999:r===0?999999999:r}spaceLeft(e){return e-this.nextChar3DPos.x}popChar(e=this.message.length-1){return this.nextChar3DPos.x-=this.message[e].charSize,this.message.splice(e,1)}isEmpty(){return!this.message.length}updateNextCharPosY(){this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}updateYLinePos(e){this.yLinePos=e,this.updateNextCharPosY()}updatelineHeight(e){this.lineHeight=e,this.updateNextCharPosY()}updateFontSize(e,t=0,r=this.message.length-1){for(let i=t;i<=r;i+=1)this.message[i].updateFontSize(e);this.maxCharSize=e,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}countSpaces(){let e=0;for(let t=0;t<this.message.length;t++)this.message[t].char===" "&&(e+=1);return e}alignText(e,t,r,i,n){switch(r){case ps.Left:this.leftAlign(e,n);break;case ps.Center:this.centerAlign(this.spaceLeft(t),e,n);break;case ps.Right:this.rightAlign(this.spaceLeft(t),e,n);break;case ps.Justify:this.justifyAlign(this.spaceLeft(t),e,n);break}}offsetCharacters(e,t,r){Hm.set(t,r);let i=this.message.length;for(let n=0;n<i;n++)this.message[n].updatePosition(this.message[n].localPosition.add(Hm),e)}leftAlign(e,t){this.align=ps.Left,this.offsetCharacters(e,0,t)}centerAlign(e,t,r){this.align=ps.Center,this.offsetCharacters(t,e/2,r)}rightAlign(e,t,r){this.align=ps.Right,this.offsetCharacters(t,e,r)}justifyAlign(e,t,r){if(this.align=ps.Justify,this.endLine){this.offsetCharacters(t,0,r);return}let i=this.countSpaces();if(i===0){this.offsetCharacters(t,0,r);return}let n=e/i,s=0;for(let a=0;a<this.message.length;a++)this.message[a].char===" "&&(s+=n),Hm.set(s,r),this.message[a].updatePosition(this.message[a].localPosition.add(Hm),t)}clone(){let e=new Sg(this.yLinePos,this.lineHeight,this.maxCharSize);e.nextChar3DPos=this.nextChar3DPos.clone(),e.align=this.align,e.endLine=this.endLine;for(let t=0;t<this.message.length;t++)e.message.push(this.message[t].clone());return e}},Wre=new O(0,0,1),L2=new O,O2=new O,P2=new Nr,LS=class extends Fa{constructor(e=xo.create({}),t=new wo({side:bi})){super(e,t);this.recursiveSelection=!1,this.objectType="VectorObject",this.eventDispatcher=new Kn,this._onShapeUpdate=()=>{if(this.geometry instanceof $P){if(this.geometry.updateFromShape()){let i=this.geometry.drawCount,n=this.geometry.userData;this.updateGeometry(Object.assign(this.geometry.userData,{parameters:Object.assign(n.parameters,{surfaceMaxCount:i+1e3})}))}}else this.updateGeometry({});this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox()};var r;this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!0,this.shape=e.userData.shape,(r=this.shape.eventDispatcher)==null||r.addEventListener("update",this._onShapeUpdate)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="VectorObject",t}fromState(e){return super.fromState(e),this.shape.update(),this}setHelperVisibility(){}updateGeometry(e){if(super.updateGeometry(e),"userData"in this.geometry){let t=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:t})}}setShape(e){var t,r;this.shape&&((t=this.shape.eventDispatcher)==null||t.removeEventListener("update",this._onShapeUpdate)),this.shape=e,(r=this.shape.eventDispatcher)==null||r.addEventListener("update",this._onShapeUpdate)}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),P2.getNormalMatrix(this.matrixWorld),L2.copy(Wre).applyMatrix3(P2).normalize(),O2.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(L2,O2)}clone(e){let t=this.shape.clone(),r=this.material.clone(),i=this.geometry.userData,n=xo.create(Object.assign({},i,{shape:t})),s=new LS(n,r).copy(this,e);return s.shape=t,t.update(),s}raycast(e,t){Fa.prototype.raycast.call(this,e,t)}},Kp=e=>{var t;return t=class extends e{constructor(){super(...arguments);this.isObjectHelper=!0}},t.geometryHelper=new fl(30,30,30),t},Gm=new bl,q1=new ea,D2=new Ge,Zp=(e,t,r,i,n=!1)=>{let s=t,a=e.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),q1.copy(s.boundingSphere),q1.applyMatrix4(a),r.ray.intersectsSphere(q1)===!1||(D2.copy(a).invert(),Gm.copy(r.ray).applyMatrix4(D2),s.boundingBox!==null&&Gm.intersectsBox(s.boundingBox)===!1))return;let o,l,h,d,p=s.index,f=s.attributes.position,m=s.drawRange,v,w;if(n===!1){let y=Math.max(0,m.start),g=Math.min(p.count,m.start+m.count);for(v=y,w=g;v<w;v+=3)if(l=p.getX(v),h=p.getX(v+1),d=p.getX(v+2),o=S(e,r,Gm,f,l,h,d),o){o.faceIndex=Math.floor(v/3),i.push(o);return}}else{let y=s.attributes.position,g=new O,_=new O,b=new O,T=new O,A=2,M=1/((e.scale.x+e.scale.y+e.scale.z)/3),L=M*M,D=Math.max(0,m.start),C=Math.min(y.count,m.start+m.count);for(let N=D,U=C-1;N<U;N+=A){if(g.fromBufferAttribute(y,N),_.fromBufferAttribute(y,N+1),Gm.distanceSqToSegment(g,_,T,b)>L)continue;T.applyMatrix4(e.matrixWorld);let V=r.ray.origin.distanceTo(T);V<r.near||V>r.far||i.push({distance:V,point:b.clone().applyMatrix4(e.matrixWorld),object:e})}}function S(y,g,_,b,T,A,M){let L=new O,D=new O,C=new O,N=new O,U=new O;if(L.fromBufferAttribute(b,T),D.fromBufferAttribute(b,A),C.fromBufferAttribute(b,M),_.intersectTriangle(L,D,C,!1,N)===null)return null;U.copy(N),U.applyMatrix4(y.matrixWorld);let V=g.ray.origin.distanceTo(U);return V<g.near||V>g.far?null:{faceIndex:1,distance:V,point:U.clone(),object:y}}},Vm=new O,ds=new pu,Jre=class extends Al{constructor(e){let t=new st,r=new Ts({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={},a=new Ue(JC),o=new Ue(JC),l=new Ue(eee);h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",o),h("p","n2",o),h("p","n3",o),h("p","n4",o),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l);function h(p,f,m){d(p,m),d(f,m)}function d(p,f){i.push(0,0,0),n.push(f.r,f.g,f.b),s[p]===void 0&&(s[p]=[]),s[p].push(i.length/3-1)}t.setAttribute("position",new Je(i,3)),t.setAttribute("color",new Je(n,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;ds.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;Us("n1",t,e,ds,-r,-i,n),Us("n2",t,e,ds,r,-i,n),Us("n3",t,e,ds,-r,i,n),Us("n4",t,e,ds,r,i,n);let s=n;Us("f1",t,e,ds,-r,-i,s),Us("f2",t,e,ds,r,-i,s),Us("f3",t,e,ds,-r,i,s),Us("f4",t,e,ds,r,i,s);let a=s,o=.5;Us("u1",t,e,ds,r*.7*o,i*1.1,a),Us("u2",t,e,ds,-r*.7*o,i*1.1,a),Us("u3",t,e,ds,0,i*(1.1+.9*o),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Us(e,t,r,i,n,s,a){Vm.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let h=0,d=o.length;h<d;h++)l.setXYZ(o[h],Vm.x,Vm.y,Vm.z)}}var Yre=class extends Kp(Jre){constructor(e){super(e);this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Zp(this.object,this.geometry,e,t,!0)}},aR=class extends Kp(oJ){constructor(e,t=15,r=10066329){super(e,t,r);this.object=e,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Zp(this.object,aR.geometryHelper,e,t)}},oR=class extends Kp(lJ){constructor(e,t=15){super(t);this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){Zp(this.object,oR.geometryHelper,e,t)}update(){}},lR=class extends Kp(sJ){constructor(e,t=15,r=6710886){super(e,t,r);this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Zp(this.object,lR.geometryHelper,e,t)}},_w=class extends Kp(iJ){constructor(e,t=6710886){super(e,t);this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Zp(this.object,_w.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=_w._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},uR=_w;uR._vector=new O;var $p=(e,t)=>class extends e{constructor(){super(...arguments);this.objectHelper=new t(this),this.enableHelper=!1}set visibility(r){this.visible=r,this.setHelperVisibility(r),this.setHelperChildrenVisibility(r)}get visibility(){return this.visible}get geometryHelper(){return t.geometryHelper}setHelperVisibility(r){this.objectHelper.visible=r}setHelperChildrenVisibility(r){for(let i of this.children)Ws(i)&&i.traverseEntity(n=>{Qp(n)&&n.visible&&(n.objectHelper.visible=r)})}raycast(r,i){this.objectHelper.raycast(r,i)}copy(r,i=!0){return super.copy(r,i),r.enableHelper!==void 0&&(this.enableHelper=r.enableHelper),r.objectHelper!==void 0&&(this.objectHelper.visible=r.objectHelper.visible),this}toJSON(r){let i=super.toJSON(r),n=i.object;return n.enableHelper=this.enableHelper,i}fromJSON(r){return super.fromJSON(r),r.enableHelper!==void 0&&(this.enableHelper=!0),this}fromLightState(r,i){if(this.objectType==="LightDirectional"||this.objectType==="LightPoint"||this.objectType==="LightSpot"){let n=this;r.color!==void 0&&(n.color=Zi(r.color,i)),r.intensity!==void 0&&(n.intensity=r.intensity),r.depth!==void 0&&(n.shadow.camera.far=r.depth,n.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows),r.helper!==void 0&&(this.enableHelper=r.helper,n.gizmos.shadowmap.visible=r.helper)}return this}},sh=new O,X1=new O,oc=class extends $p(Oc(pu),Yre){constructor(e=window.innerWidth,t=window.innerHeight,r=45,i,n=1e5){super();this.objectType="CombinedCamera",this._cameraType="OrthographicCamera",this.targetOffset=fp.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.width=e,this.height=t,this.orthoCamera=new Jv(e*-.5,e*.5,t*.5,t*-.5,i!=null?i:-5e4,n),this.perspCamera=new Di(r,e/t,i!=null?i:50,n),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.fov=this.perspCamera.fov,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.toOrthographic(!0)}static createFromState(e,t){let r=new oc().fromState(t);return r.enableHelper=!0,r.objectHelper.update(),r.uuid=e,r}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e){super.lookAt(e),this.getWorldPosition(sh),this.targetOffset=sh.distanceTo(e)}getTarget(e=new O){return this.getWorldDirection(X1),this.getWorldPosition(sh),X1.multiplyScalar(this.targetOffset),e.copy(sh).add(X1),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(sh),sh.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new Gr),t=new O(0,0,1).applyQuaternion(e),r=new O().copy(Rt.DefaultUp);this.isUpVectorFlipped&&r.negate(),r.applyQuaternion(e);let i=new O().copy(Rt.DefaultUp).projectOnPlane(t),n=new O().crossVectors(i,r).dot(t)>=0?1:-1;this.angleOffsetFromUp=i.angleTo(r)*n}getViewFrontToObject(e){let t=e.getWorldPosition(new O),r=e.getWorldDirection(new O).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToObject(e){let t=e.getWorldPosition(new O),r=this.getWorldDirection(new O).multiplyScalar(this.targetOffset);return{position:t.clone().sub(r),target:t}}setViewplaneSize(e,t){this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5,this.aspect=e/t,this.updateProjectionMatrix()}toOrthographic(e){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",(this.enableHelper===!0||e===!0)&&this.objectHelper.update()}toPerspective(e){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",(this.enableHelper===!0||e===!0)&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,s):this.orthoCamera.setViewOffset(e,t,r,i,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(e){this._cameraType==="PerspectiveCamera"?this.toPerspective(e):this._cameraType==="OrthographicCamera"&&this.toOrthographic(e)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}fromCameraRender(e){let t={near:this.orthoCamera.near,far:this.orthoCamera.far},r={near:this.perspCamera.near,far:this.perspCamera.far};return this.copy(e),this.name="",this.enableHelper=!0,this.objectHelper.visible=!0,this.orthoCamera.near=t.near,this.orthoCamera.far=t.far,this.perspCamera.near=r.near,this.perspCamera.far=r.far,this.updateProjectionMatrix(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="CombinedCamera",r.cameraType=this.cameraType,r.targetOffset=this.targetOffset,r.isUpVectorFlipped=this.isUpVectorFlipped,r.angleOffsetFromUp=this.angleOffsetFromUp,r.left=this.left,r.right=this.right,r.top=this.top,r.bottom=this.bottom,this.view!==null&&(r.view=Object.assign({},this.view)),r.zoomOrtho=this.orthoCamera.zoom,r.nearOrtho=this.orthoCamera.near,r.far=this.far,r.aspect=this.aspect,r.fov=this.fov,r.focus=this.focus,r.filmGauge=this.filmGauge,r.filmOffset=this.filmOffset,r.zoomPersp=this.perspCamera.zoom,r.nearPersp=this.perspCamera.near,t}fromJSON(e){var t;if(super.fromJSON(e),this.cameraType=e.cameraType,e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.orbitControlsTarget!==void 0){let r=this.getWorldPosition(new O),i=new O().fromArray(e.orbitControlsTarget);this.targetOffset=i.distanceTo(r)}else e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset);return this.isUpVectorFlipped=!1,this.angleOffsetFromUp=(t=e.angleOffsetFromUp)!=null?t:0,e.left!==void 0&&(this.left=e.left),e.right!==void 0&&(this.right=e.right),e.top!==void 0&&(this.top=e.top),e.bottom!==void 0&&(this.bottom=e.bottom),e.view!==void 0&&(this.view=Object.assign({},e.view)),e.zoomOrtho!==void 0&&(this.orthoCamera.zoom=e.zoomOrtho),e.nearOrtho!==void 0&&(this.orthoCamera.near=e.nearOrtho),e.far!==void 0&&(this.far=e.far),e.aspect!==void 0&&(this.aspect=e.aspect),e.fov!==void 0&&(this.fov=e.fov),e.focus!==void 0&&(this.focus=e.focus),e.filmGauge!==void 0&&(this.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(this.filmOffset=e.filmOffset),e.zoomPersp!==void 0&&(this.perspCamera.zoom=e.zoomPersp),e.nearPersp!==void 0&&(this.perspCamera.near=e.nearPersp),this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return jx(t,e)}fromCameraState(e){let{orthographic:t,perspective:r}=e;return e.type!==void 0&&(this.cameraType=e.type),e.far!==void 0&&(this.far=e.far),t!==void 0&&(t.near!==void 0&&(this.orthoCamera.near=t.near),t.zoom!==void 0&&(this.orthoCamera.zoom=t.zoom)),r!==void 0&&(r.near!==void 0&&(this.perspCamera.near=r.near),r.fov!==void 0&&(this.perspCamera.fov=r.fov),r.zoom!==void 0&&(this.perspCamera.zoom=r.zoom)),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix(),this}toState(e){return tt(Le(Le({},super.toState(e)),this.toCameraState(e)),{type:this.cameraType})}fromState(e){return super.fromState(e),this.fromCameraState(e),this}},iu=class extends $p(Oc(vh),oR){constructor(){super(...arguments);this.objectType="EmptyObject"}static createFromState(e,t){let r=new iu().fromState(t);return r.uuid=e,r.enableHelper=!0,r.objectHelper.update(),r}toJSON(e){let t=super.toJSON(e);return t.object.objectType="EmptyObject",t}},hR=class extends $p(Oc(V3),aR){constructor(...e){super(...e);this.objectType="LightDirectional",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.top=1250,t.bottom=-1250,t.right=1250,t.left=-1250,t.near=1,t.far=2500;let r=new Ko(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let i=new hR().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ko&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ko&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ko&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.enableHelper===!0&&this.objectHelper.visible===!0&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightDirectional",r.color=this.color.getHex(),r.intensity=this.intensity,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.shadow.normalBias=(t=e.shadow.normalBias)!=null?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray(e.shadow.mapSize);let r=this.shadow.camera,i=e.shadow.camera;return r.near=i.near,r.far=i.far,r.zoom=i.zoom,r.left=i.left,r.right=i.right,r.top=i.top,r.bottom=i.bottom,i.view!==void 0&&(r.view=Object.assign({},i.view)),this}fromDirectionalLightState(e,t){let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;return super.fromLightState(e,t),e.size!==void 0&&cte(this,e.size),r&&this.update(),this}fromState(e,t){return super.fromState(e),this.fromDirectionalLightState(e,t),this}},cR=class extends $p(Oc(H3),lR){constructor(...e){super(...e);this.objectType="LightPoint",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.fov=90,t.aspect=1,t.near=100,t.far=2500;let r=new O(-t.far+this.position.x,-t.far+this.position.y,-t.far+this.position.z),i=new O(t.far+this.position.x,t.far+this.position.y,t.far+this.position.z),n=new Ui(r,i),s=new Pm(n,new Ue(16755200));s.visible=!1,this._gizmos.shadowmap=s,this.update()}static createFromState(e,t,r){let i=new cR().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Pm&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Pm&&(t.visible=!1)}}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(let e in this._gizmos){let t=this._gizmos[e];if(t instanceof Pm){let r=this.shadow.camera,i=new O(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new O(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.enableHelper===!0&&this.objectHelper.visible===!0&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightPoint",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.decay=this.decay,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t,r;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow.normalBias=(t=e.shadow.normalBias)!=null?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray((r=e.shadow.mapSize)!=null?r:[512,512]),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null);let i=this.shadow.camera,n=e.shadow.camera;return i.near=n.near,i.far=n.far,i.zoom=n.zoom,i.fov=n.fov,i.focus=n.focus,i.aspect=n.aspect,i.filmGauge=n.filmGauge,i.filmOffset=n.filmOffset,n.view!==void 0&&(i.view=Object.assign({},n.view)),this}fromPointLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromPointLightState(e,t),this}},R2=new O,N2=new O,I2=new Gr,dR=class extends $p(Oc(U3),uR){constructor(...e){super(...e);this.objectType="LightSpot",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.fov=sr.RAD2DEG*2*this.angle,t.aspect=1,t.near=100,t.far=2500;let r=new Ko(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let i=new dR().fromState(t,r);return i.uuid=e,i}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ko&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ko&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ko&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),N2.setFromMatrixPosition(this.matrixWorld),I2.setFromRotationMatrix(this.matrixWorld),R2.copy(this.up).applyQuaternion(I2).negate().multiplyScalar(this.distance),this.target.position.copy(N2).add(R2),this.target.updateMatrixWorld(),this.enableHelper===!0&&this.objectHelper.visible===!0&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightSpot",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.angle=this.angle,r.decay=this.decay,r.penumbra=this.penumbra,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.decay=e.decay,this.penumbra=e.penumbra,this.shadow.normalBias=(t=e.shadow.normalBias)!=null?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray(e.shadow.mapSize);let r=this.shadow.camera,i=e.shadow.camera;return r.near=i.near,r.far=i.far,r.zoom=i.zoom,r.fov=i.fov,r.focus=i.focus,r.aspect=i.aspect,r.filmGauge=i.filmGauge,r.filmOffset=i.filmOffset,i.view!==void 0&&(r.view=Object.assign({},i.view)),this}fromSpotLightState(e,t){return super.fromLightState(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),this}fromState(e,t){return super.fromState(e),this.fromSpotLightState(e,t),this}},B2=e=>e.tagName==="VIDEO",Sw=class{static resize(e,t,r){let i=e/t,n;if(!r.image)return;let s=r.image;B2(s)?n=s.videoWidth/s.videoHeight:n=s.width/s.height,i>n&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1*n/i):r.repeat.set(1,1*n/i)),i<n&&(r.imageType=="WEBCAM"?r.repeat.set(1*i/n*-1,1):r.repeat.set(1*i/n,1)),i==n&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1):r.repeat.set(1,1))}static resizeTextureLayer(e,t,r){let i=e/t,n=r.image!==void 0?r.image.width/r.image.height:1,s;i>n?s={x:1,y:n/i}:i<n?s={x:i/n,y:1}:s={x:1,y:1},r.repeat.set(s.x,s.y),r.updateMatrix()}static resizeTextureLayers(e,t,r){let i=r.userData.layers,n=i.getLayers();for(let s=0;s<n.length;s++){let a=n[s];vD(a)&&(Sw.resizeTextureLayer(e,t,a.uniforms[`f${a.id}_texture`].value),i.updateLayerUniform())}}static resizeComplex(e,t,r,i){let n=e/t,s,a=r.image;B2(a)?s=a.videoWidth/a.videoHeight:s=a.width/a.height,i.geometry.type.includes("Shape")?(n>s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*-1,1/t*s/n):r.repeat.set(1/e,1/t*s/n)),n<s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*n/s*-1,1/t):r.repeat.set(1/e*n/s,1/t)),n==s&&(r.imageType=="WEBCAM"?r.repeat.set(1/e*-1,1/t):r.repeat.set(1/e,1/t))):(n>s&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1*s/n):r.repeat.set(1,1*s/n)),n<s&&(r.imageType=="WEBCAM"?r.repeat.set(1*n/s*-1,1):r.repeat.set(1*n/s,1)),n==s&&(r.imageType=="WEBCAM"?r.repeat.set(-1,1):r.repeat.set(1,1)))}},pR=class extends Fa{constructor(e,t=new wo){super(e,t);this.objectType="Mesh2D",this.castShadow=!0,this.receiveShadow=!0}updateGeometry(e){super.updateGeometry(e),this.material.userData.layers&&Sw.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}resizeGeometry(e,t){super.resizeGeometry(e,t,0),this.material.userData.layers&&Sw.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="Mesh2D",t}clone(){let e=super.clone();return e.updateGeometry({}),e}static fromTexture(e){let t,r;if(e instanceof x3){let s=e.image;t=s.videoWidth*.5,r=s.videoHeight*.5}else{let s=e.image;t=s.width*.5,r=s.height*.5}let i=oD.create({parameters:{width:t,height:r}}),n=new wo;return n.layersList.changeLayer(0,{type:Gt.TEXTURE,texture:e}),n.layersList.moveLayer(0,1),n.dispose(),new pR(i,n)}},fR=class extends Fa{constructor(e,t=new sc){super(e,t);this.objectType="Mesh3D",this.castShadow=!0,this.receiveShadow=!0}toJSON(e){let t=super.toJSON(e);return t.object.objectType="Mesh3D",t}},mR=class extends fR{constructor(e,t=new sc){super(e,t);this.objectType="NonParametric"}toJSON(e){let t=super.toJSON(e);return t.object.objectType="NonParametric",t}},z2;(function(e){e[e.TO_RIGHT=1]="TO_RIGHT",e[e.TO_LEFT=-1]="TO_LEFT"})(z2||(z2={}));var gR=class extends Fa{constructor(e,t=new wo({transparent:!0,opacity:1,visible:!1,side:bi})){super(e,t);this.objectType="TextFrame",this.charContainer=new Rt,this.add(this.charContainer),this.material.visible=!1,this._geometryUserData=e.userData,this.userData.textFrame={hexColor:null,opacity:1,visible:!0,text:"",fontSize:16,lineHeight:1.5,letterSpacing:1,fontFamily:"roboto_regular",textTransform:Uh.None,horizontalAlignment:1,verticalAlignment:Xl.Top,LOD:16,maxLineSize:this._geometryUserData.parameters.width,textOrigin:new O(this._geometryUserData.parameters.width*-.5,this._geometryUserData.parameters.height*.5,0),textLines:[]},this.createTextLine()}static createFromState(e,t,r){let i=lD.create({parameters:{width:t.width,height:t.height}}),n=new gR(i).fromState(t,r);return n.uuid=e,n}async updateText(e){this.clearText();let t=this.userData.textFrame,r=t.fontFamily;await kn.loadFont(r),t.text=e;let i=t.textOrigin,n=new ou({visible:t.visible,transparent:!0,side:bi}),s=e.split(`
`),a=0;this.userData.textFrame.textLines=s.map((o,l)=>{let h=new Sg(a,t.lineHeight,t.fontSize);return h.message=o.split("").map(d=>{let p={char:d,fontFamily:r,letterSpacing:t.letterSpacing,fontSize:t.fontSize,LOD:16},f=n.clone();f.color=t.hexColor,f.opacity=t.opacity;let m=new kn(p,f);return h.addChar3D(m,i),this.charContainer.add(m),m}),a+=h.maxCharSize*h.lineHeight,h}),this.textFullUpdate(),this.checkOverFlow()}clearText(){let e=this.userData.textFrame.textLines;for(;this.charContainer.children.length;){let t=this.charContainer.children[0];this.charContainer.remove(t)}for(;e.length;)e.pop()}raycast(e,t){let r=[];if(super.raycast(e,r),r.length>0){t.push(r[0]);return}let i=[];for(let n=0,s=this.charContainer.children.length;n<s;++n)if(this.charContainer.children[n]instanceof kn&&(e.intersectObject(this.charContainer.children[n],!1,i),i.length>0)){i[0].object=this,t.push(i[0]);return}}updateGeometry(e){var t,r,i,n;let s=this.userData,a=this.geometry.userData,o=a.parameters.width,l=a.parameters.height,h=(r=(t=e.parameters)==null?void 0:t.width)!=null?r:o,d=(n=(i=e.parameters)==null?void 0:i.height)!=null?n:l,p=s.textFrame;super.updateGeometry(e),p.maxLineSize=h,p.textOrigin.set(-.5*h,.5*d,0),d!==l?(this.checkOverFlow(),this.checkCapacity()):h!==o&&(o<h?this.checkCapacity():o>h&&this.checkOverFlow())}checkOverFlow(e=0){let t=this.userData,r=t.textFrame.textOrigin,i=t.textFrame.textLines;for(let n=e;n<i.length;n++){i[n].updateYLinePos(this.getNewLinePosition(n)),i[n].fullUpdate(r);let s=[];for(;i[n].checkOverFlow(t.textFrame.maxLineSize);)i[n].containSpaceOverFlow()?s.unshift(i[n].getWord(i[n].message.length-1,-1)):s.unshift(i[n].popChar());if(s.length>0){i[n+1]===void 0?(i[n].isEndLine(!1),this.createTextLine()):i[n].endLine&&(this.createTextLine(n+1),i[n].isEndLine(!1),i[n+1].isEndLine(!0));let a=0;for(let o=0;o<s.length;o+=1)for(let l=0;l<s[o].length;l+=1)i[n+1].addChar3D(s[o][l],r,a),a+=1;i[n+1].fullUpdate(r)}i[n].fullUpdate(r)}this.textFullUpdate(e)}checkCapacity(e=0){let t=this.userData,r=t.textFrame.textOrigin,i=t.textFrame.maxLineSize,n=t.textFrame.textLines;for(let s=e;s<n.length;s+=1)if(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(r),!!n[s-1])for(;!n[s-1].endLine;){let a,o=n[s-1].spaceLeft(i);if(n[s].wordSize(0,1)<=o){n[s].containSpace()?a=n[s].getWord(0,1):a=n[s].popChar(0);for(let l=0;l<a.length;l+=1)a[l]&&n[s-1].addChar3D(a[l],r)}else{n[s].isEmpty()?(n[s].endLine&&n[s-1].isEndLine(!0),n.splice(s,1),s-=1):(n[s].updateYLinePos(this.getNewLinePosition(s)),n[s].fullUpdate(r));break}}this.textFullUpdate(e)}createTextLine(e=this.userData.textFrame.textLines.length){let t=this.userData.textFrame;t.textLines.splice(e,0,new Sg(this.getNewLinePosition(e),t.lineHeight,t.fontSize))}textFullUpdate(e=0){let t=this.userData.textFrame,r=t.textLines,i=this.getVerticalAlignmentOffSet();for(let n=e;n<r.length;n++)r[n].updateYLinePos(this.getNewLinePosition(n)),r[n].fullUpdate(t.textOrigin),r[n].alignText(t.textOrigin,t.maxLineSize,t.horizontalAlignment,t.verticalAlignment,i)}getVerticalAlignmentOffSet(){switch(this.userData.textFrame.verticalAlignment){case Xl.Top:return 0;case Xl.Center:return this.getRemainingVerticalSpace()/2;case Xl.Bottom:return this.getRemainingVerticalSpace();default:return 0}}getRemainingVerticalSpace(){let e=this.userData.textFrame.textLines;return this.geometry.userData.parameters.height-this.getNewLinePosition(e.length)}getNewLinePosition(e){let t=this.userData.textFrame.textLines,r=0;for(let i=0;i<e;i+=1)r+=t[i].maxCharSize*t[i].lineHeight;return r}updateColor(e){var t;let r=this.userData;r.textFrame.hexColor=e;let i=r.textFrame.textLines;for(let n=0;n<i.length;n++){let s=i[n].message;for(let a=0;a<s.length;a++){let o=s[a].material;(t=o.color)!=null&&t.isColor&&(o.color=e)}}}updateOpacity(e){let t=this.userData;t.textFrame.opacity=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++){let a=n[s].material;a.opacity=e}}}updateVisible(e){let t=this.userData;t.textFrame.visible=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++){let a=n[s].material;a.visible=e}}}async updateFontFamily(e){await kn.loadFont(e);let t=this.userData.textFrame,r=t.textLines;t.fontFamily=e;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)n[s].updateFontFamily(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateFontSize(e){let t=this.userData.textFrame,r=t.textLines,i=t.fontSize;t.fontSize=e;for(let n=0;n<r.length;n++)r[n].updateFontSize(e);this.textFullUpdate(),e>i?this.checkOverFlow():e<i&&this.checkCapacity()}async updateTextTransform(e){let t=this.userData.textFrame;await kn.loadFont(t.fontFamily);let r=t.textLines;switch(t.textTransform=e,e){case Uh.Upper:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].char.toUpperCase())}break;case Uh.Lower:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].char.toLowerCase())}break;default:for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)r[i].message[s].updateChar(n[s].originalChar)}}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLetterSpacing(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.letterSpacing=e;for(let i=0;i<r.length;i++){let n=r[i].message;for(let s=0;s<n.length;s++)n[s].updateLetterSpacing(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLOD(e){let t=this.userData;t.textFrame.LOD=e;let r=t.textFrame.textLines;for(let i=0;i<r.length;i++);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLineHeight(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.lineHeight=e;for(let i=0;i<r.length;i++)r[i].updatelineHeight(e);this.textFullUpdate()}updateVerticalAlignment(e){let t=this.userData;t.textFrame.verticalAlignment=e,this.textFullUpdate()}updateHorizontalAlignment(e){let t=this.userData;t.textFrame.horizontalAlignment=e,this.textFullUpdate()}toJSON(e){let t=super.toJSON(e),r=t.object;r.objectType="TextFrame";let i=this.userData.textFrame.textLines.map(n=>{let s=n.message.map(a=>({char:a.char,originalChar:a.originalChar,fontFamily:a.fontFamily,letterSpacing:a.letterSpacing,fontSize:a.fontSize,LOD:a.LOD}));return{align:n.align,endLine:n.endLine,lineHeight:n.lineHeight,maxCharSize:n.maxCharSize,yLinePos:n.yLinePos,message:s}});return r.userData.textFrame.textLinesData=i,t}async fromJSONasync(e){if(super.fromJSON(e),e.userData!==void 0){let t=e.userData.textFrame;await kn.loadFont(t.fontFamily),t.textOrigin=new O(t.textOrigin.x,t.textOrigin.y,t.textOrigin.z);let r=new ou({color:t.hexColor,opacity:t.opacity,visible:t.visible,transparent:!0,side:bi});t.textLinesData&&(t.textLines=t.textLinesData.map((i,n)=>{let s=new Sg(Number(i.yLinePos),Number(i.lineHeight),Number(i.maxCharSize)),a=i.message.map((o,l)=>{if(o.char===void 0){let p=t.textLines[n].message[l];if("geometries"in p){let f=p.geometries[0].userData.parameters;Object.assign(o,{LOD:f.lod,char:f.char,fontFamily:f.fontFamily,fontSize:f.fontSize,letterSpacing:f.letterSpacing,originalChar:f.char})}}let h={char:o.char,fontFamily:o.fontFamily,letterSpacing:Number(o.letterSpacing),fontSize:Number(o.fontSize),LOD:o.LOD},d=new kn(h,r.clone());return s.addChar3D(d,t.textOrigin),this.charContainer.add(d),d});return s.message=a,s}),this.userData.textFrame=t),this.textFullUpdate()}return this}fromTextFrameData(e,t){if(e.color!==void 0){let r=Zi(e.color,t);this.updateColor(r),this.updateOpacity(r.a)}e.alpha!==void 0&&this.updateOpacity(e.alpha),e.font!==void 0&&this.updateFontFamily(e.font),e.horizontalAlign!==void 0&&this.updateHorizontalAlignment(e.horizontalAlign),e.verticalAlign!==void 0&&this.updateVerticalAlignment(e.verticalAlign),e.textTransform!==void 0&&this.updateTextTransform(e.textTransform),e.fontSize!==void 0&&this.updateFontSize(e.fontSize),e.lineHeight!==void 0&&this.updateLineHeight(e.lineHeight),e.letterSpacing!==void 0&&this.updateLetterSpacing(e.letterSpacing),e.text!==void 0&&e.text!==""&&this.updateText(e.text),(e.width!==void 0||e.height!==void 0)&&this.updateGeometry({parameters:{width:e.width,height:e.height}})}fromState(e,t){return super.fromState(e),this.fromTextFrameData(e,t),this}convertToVector(){let{fontFamily:e,hexColor:t}=this.userData.textFrame,r=new iu;r.name="Text Shape";let i=kn.fontCache[e];for(let n of this.charContainer.children)n instanceof kn&&i.generateShapes(n.char,1).forEach(s=>{let a=new kr().fromShape(s);a.applyScale(n.scale.x,n.scale.y);let o=xo.create({shape:a}),l=new wo({side:bi});l.color=t;let h=new LS(o,l);h.name=n.char,h.position.copy(n.position),h.rotation.copy(n.rotation),r.attach(h)});return r}},bg=gR;bg.VerticalAlign=Xl,bg.HorizontalAlign=ps,bg.TextTransform=Uh;var vR={RED:0,GREEN:1,BLUE:2,ALPHA:3},ef="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",qre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,jm=class extends zi{constructor(e=!1,t=!1){super({type:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new $e(null),kernel16:new $e(null),inputBuffer:new $e(null),cocBuffer:new $e(null),texelSize:new $e(new Q),scale:new $e(1)},fragmentShader:qre,vertexShader:ef,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let o=0;o<80;++o){let l=o*e,h=Math.sqrt(o)/Math.sqrt(80),d=h*Math.cos(l),p=h*Math.sin(l);o%5==0?(r[n++]=d,r[n++]=p):(t[i++]=d,t[i++]=p)}let s=[],a=[];for(let o=0;o<128;)s.push(new Et(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)a.push(new Et(r[o++],r[o++],r[o++],r[o++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}},Xre=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focalLength;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focalLength,abs(signedDistance));gl_FragColor.rg=vec2(step(signedDistance,0.0)*magnitude,step(0.0,signedDistance)*magnitude);}`,Qre=class extends zi{constructor(e){super({type:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new $e(null),focusDistance:new $e(0),focalLength:new $e(0),cameraNear:new $e(.3),cameraFar:new $e(1e3)},fragmentShader:Xre,vertexShader:ef,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.adoptCameraSettings(e)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}adoptCameraSettings(e=null){e!==null&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Di?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Kre=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,Zre=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,$re=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <dithering_fragment>
}`,eie="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",F2=class extends zi{constructor(e=new Q){super({type:"ConvolutionMaterial",uniforms:{inputBuffer:new $e(null),texelSize:new $e(new Q),halfTexelSize:new $e(new Q),kernel:new $e(0),scale:new $e(1)},fragmentShader:$re,vertexShader:eie,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernelSize=p0.LARGE}getKernel(){return tie[this.kernelSize]}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}},tie=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],p0={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},rie=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,yR=class extends zi{constructor(){super({type:"CopyMaterial",uniforms:{inputBuffer:new $e(null),opacity:new $e(1)},fragmentShader:rie,vertexShader:ef,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1}},iie=class extends zi{constructor(e=new Q,t=OS.COLOR){super({type:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new $e(null),depthBuffer:new $e(null),predicationBuffer:new $e(null),texelSize:new $e(e)},fragmentShader:Kre,vertexShader:Zre,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.setEdgeDetectionMode(t)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setEdgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}setLocalContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}setEdgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}setPredicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}setPredicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}setPredicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},OS={DEPTH:0,LUMA:1,COLOR:2},nie={DISABLED:0,DEPTH:1,CUSTOM:2},sie=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,aie="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",oie=class extends zi{constructor(e=null,t=null,r=null,i,n=!1){super({type:"EffectMaterial",defines:{DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new $e(null),depthBuffer:new $e(null),resolution:new $e(new Q),texelSize:new $e(new Q),cameraNear:new $e(.3),cameraFar:new $e(1e3),aspect:new $e(1),time:new $e(0)},blending:Ni,depthWrite:!1,depthTest:!1,dithering:n});this.toneMapped=!1,e!==null&&this.setShaderParts(e),t!==null&&this.setDefines(t),r!==null&&this.setUniforms(r),this.adoptCameraSettings(i)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setShaderParts(e){return this.fragmentShader=sie.replace(Yt.FRAGMENT_HEAD,e.get(Yt.FRAGMENT_HEAD)).replace(Yt.FRAGMENT_MAIN_UV,e.get(Yt.FRAGMENT_MAIN_UV)).replace(Yt.FRAGMENT_MAIN_IMAGE,e.get(Yt.FRAGMENT_MAIN_IMAGE)),this.vertexShader=aie.replace(Yt.VERTEX_HEAD,e.get(Yt.VERTEX_HEAD)).replace(Yt.VERTEX_MAIN_SUPPORT,e.get(Yt.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}adoptCameraSettings(e=null){e!==null&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Di?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=Math.max(e,1),i=Math.max(t,1);this.uniforms.resolution.value.set(r,i),this.uniforms.texelSize.value.set(1/r,1/i),this.uniforms.aspect.value=r/i}},Yt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},lie=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,uie=class extends zi{constructor(e=!1,t=null){let r=t!==null;super({type:"LuminanceMaterial",uniforms:{inputBuffer:new $e(null),threshold:new $e(0),smoothing:new $e(1),range:new $e(r?t:new Q)},fragmentShader:lie,vertexShader:ef,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.colorOutput=e,this.useThreshold=!0,this.useRange=r}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.uniforms.threshold.value=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.uniforms.smoothing.value=e}get useThreshold(){return this.defines.THRESHOLD!==void 0}set useThreshold(e){e?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.needsUpdate=!0}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.defines.RANGE!==void 0}set useRange(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}get luminanceRange(){return this.useRange}set luminanceRange(e){this.useRange=e}setLuminanceRangeEnabled(e){this.useRange=e}},hie=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,cie=class extends zi{constructor(e=null){super({type:"MaskMaterial",uniforms:{maskTexture:new $e(e),inputBuffer:new $e(null),strength:new $e(1)},fragmentShader:hie,vertexShader:ef,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1,this.colorChannel=vR.RED,this.maskFunction=xR.DISCARD}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Mi&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}},xR={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},die=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,pie="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",fie=class extends zi{constructor(e=new Q,t=new Q){super({type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new $e(null),areaTexture:new $e(null),searchTexture:new $e(null),texelSize:new $e(e),resolution:new $e(t)},fragmentShader:die,vertexShader:pie,blending:Ni,depthWrite:!1,depthTest:!1});this.toneMapped=!1}setOrthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setCornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}get cornerRounding(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerRounding(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},mie=new pu,Wo=null;function gie(){if(Wo===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Wo=new st,Wo.setAttribute!==void 0?(Wo.setAttribute("position",new dt(e,3)),Wo.setAttribute("uv",new dt(t,2))):(Wo.addAttribute("position",new dt(e,3)),Wo.addAttribute("uv",new dt(t,2)))}return Wo}var bo=class{constructor(e="Pass",t=new Ra,r=mie){this.name=e,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}getFullscreenMaterial(){return this.screen!==null?this.screen.material:null}setFullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Ai(gie(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Ra),this.scene.add(t),this.screen=t)}getDepthTexture(){return null}setDepthTexture(e,t=0){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){let e=this.getFullscreenMaterial();e!==null&&e.dispose();for(let t of Object.keys(this)){let r=this[t];if(r!==null&&typeof r.dispose=="function"){if(r instanceof Ra)continue;this[t].dispose()}}}},vie=class extends bo{constructor(e,t=!0){super("SavePass");this.setFullscreenMaterial(new yR),this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new li(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="SavePass.Target"),this.resize=t}get texture(){return this.renderTarget.texture}render(e,t,r,i,n){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){if(this.resize){let r=Math.max(e,1),i=Math.max(t,1);this.renderTarget.setSize(r,i)}}initialize(e,t,r){if(!t&&r===Mi&&(this.renderTarget.texture.format=$i),r!==void 0&&(this.renderTarget.texture.type=r,r!==Mi)){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},no=-1,qs=class{constructor(e,t=no,r=no,i=1){this.resizable=e,this.base=new Q(1,1),this.target=new Q(t,r),this.s=i}get scale(){return this.s}set scale(e){this.s=e,this.target.x=no,this.target.y=no,this.resizable.setSize(this.base.x,this.base.y)}get width(){let e=this.base,t=this.target,r;return t.x!==no?r=t.x:t.y!==no?r=Math.round(t.y*(e.x/e.y)):r=Math.round(e.x*this.s),r}set width(e){this.target.x=e,this.resizable.setSize(this.base.x,this.base.y)}get height(){let e=this.base,t=this.target,r;return t.y!==no?r=t.y:t.x!==no?r=Math.round(t.x/(e.x/e.y)):r=Math.round(e.y*this.s),r}set height(e){this.target.y=e,this.resizable.setSize(this.base.x,this.base.y)}static get AUTO_SIZE(){return no}},wR=class extends bo{constructor({resolutionScale:e=.5,width:t=qs.AUTO_SIZE,height:r=qs.AUTO_SIZE,kernelSize:i=p0.LARGE}={}){super("BlurPass");this.renderTargetA=new li(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.resolution=new qs(this,t,r,e),this.convolutionMaterial=new F2,this.ditheredConvolutionMaterial=new F2,this.ditheredConvolutionMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get scale(){return this.convolutionMaterial.uniforms.scale.value}set scale(e){this.convolutionMaterial.uniforms.scale.value=e,this.ditheredConvolutionMaterial.uniforms.scale.value=e}get kernelSize(){return this.convolutionMaterial.kernelSize}set kernelSize(e){this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,h=this.convolutionMaterial,d=h.uniforms,p=h.getKernel(),f=t,m,v,w;for(this.setFullscreenMaterial(h),v=0,w=p.length-1;v<w;++v)m=(v&1)==0?o:l,d.kernel.value=p[v],d.inputBuffer.value=f.texture,e.setRenderTarget(m),e.render(s,a),f=m;this.dithering&&(h=this.ditheredConvolutionMaterial,d=h.uniforms,this.setFullscreenMaterial(h)),d.kernel.value=p[v],d.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(s,a)}setSize(e,t){let r=this.resolution;r.base.set(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.convolutionMaterial.setTexelSize(1/i,1/n),this.ditheredConvolutionMaterial.setTexelSize(1/i,1/n)}initialize(e,t,r){if(!t&&r===Mi&&(this.renderTargetA.texture.format=$i,this.renderTargetB.texture.format=$i),r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==Mi)){let i=this.convolutionMaterial,n=this.ditheredConvolutionMaterial;i.defines.FRAMEBUFFER_PRECISION_HIGH="1",n.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}static get AUTO_SIZE(){return qs.AUTO_SIZE}},yie=class extends bo{constructor(){super("ClearMaskPass",null,null);this.needsSwap=!1}render(e,t,r,i,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},Q1=new Ue,PS=class extends bo{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null);this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}render(e,t,r,i,n){let s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=s!==null,h=a>=0;l?(Q1.copy(e.getClearColor(Q1)),e.setClearColor(s,h?a:o)):h&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Q1,o):h&&e.setClearAlpha(o)}},K1=!1,U2=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case bi:r=this.materialsFlatShadedDoubleSide;break;case Tr:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case bi:r=this.materialsDoubleSide;break;case Tr:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=dl;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Tr,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=bi,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Tr,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=bi,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,K1){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return K1}static set workaroundEnabled(e){K1=e}},k2=class extends bo{constructor(e,t,r=null){super("RenderPass",e,t);this.needsSwap=!1,this.clearPass=new PS,this.overrideMaterialManager=r===null?null:new U2(r)}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new U2(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=s.background,l=this.renderToScreen?null:t;this.clear&&(this.clearPass.overrideClearColor!==null&&(s.background=null),this.clearPass.render(e,t)),e.setRenderTarget(l),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,a):e.render(s,a),s.background!==o&&(s.background=o)}},Jt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},xie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",wie="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",_ie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Sie="float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",bie="float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Aie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Mie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Eie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Tie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Cie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Lie="float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Oie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Pie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Die="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Rie="float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Nie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Iie="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Bie="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",zie=new Map([[Jt.SKIP,null],[Jt.ADD,xie],[Jt.ALPHA,wie],[Jt.AVERAGE,_ie],[Jt.COLOR_BURN,Sie],[Jt.COLOR_DODGE,bie],[Jt.DARKEN,Aie],[Jt.DIFFERENCE,Mie],[Jt.EXCLUSION,Eie],[Jt.LIGHTEN,Tie],[Jt.MULTIPLY,Cie],[Jt.DIVIDE,Lie],[Jt.NEGATION,Oie],[Jt.NORMAL,Pie],[Jt.OVERLAY,Die],[Jt.REFLECT,Rie],[Jt.SCREEN,Nie],[Jt.SOFT_LIGHT,Iie],[Jt.SUBTRACT,Bie]]),Fie=class extends Kn{constructor(e,t=1){super();this.blendFunction=e,this.opacity=new $e(t)}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e,this.dispatchEvent({type:"change"})}getShaderCode(){return zie.get(this.blendFunction)}},Ha=class extends Kn{constructor(e,t,{attributes:r=Xs.NONE,blendFunction:i=Jt.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super();this.name=e,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=s,this.extensions=a,this.blendMode=new Fie(i),this.blendMode.addEventListener("change",l=>this.setChanged())}setChanged(){this.dispatchEvent({type:"change"})}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setDepthTexture(e,t=0){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Ra)continue;this[e].dispose()}}}},Xs={NONE:0,DEPTH:1,CONVOLUTION:2};function Z1(e,t){let r=[],i;for(;(i=e.exec(t))!==null;)r.push(i[1]);return r}function H2(e,t,r){let i,n;for(let s of t){i="$1"+e+s.charAt(0).toUpperCase()+s.slice(1),n=new RegExp("([^\\.])(\\b"+s+"\\b)","g");for(let a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(n,i))}}function Uie(e,t,r,i,n,s,a){let o=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,l=/(?:varying\s+\w+\s+(\w*))/g,h=t.blendMode,d=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),p=d.get("fragment")!==void 0&&/mainImage/.test(d.get("fragment")),f=d.get("fragment")!==void 0&&/mainUv/.test(d.get("fragment")),m=[],v=[],w=!1,S=!1;if(d.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(f&&(a&Xs.CONVOLUTION)!=0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!p&&!f)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{if(f&&(r.set(Yt.FRAGMENT_MAIN_UV,r.get(Yt.FRAGMENT_MAIN_UV)+"	"+e+`MainUv(UV);
`),w=!0),d.get("vertex")!==null&&/mainSupport/.test(d.get("vertex"))){let y="	"+e+"MainSupport(";/mainSupport *\([\w\s]*?uv\s*?\)/.test(d.get("vertex"))&&(y+="vUv"),y+=`);
`,r.set(Yt.VERTEX_MAIN_SUPPORT,r.get(Yt.VERTEX_MAIN_SUPPORT)+y),m=m.concat(Z1(l,d.get("vertex"))),v=v.concat(m).concat(Z1(o,d.get("vertex")))}if(v=v.concat(Z1(o,d.get("fragment"))).concat(Array.from(t.defines.keys()).map(y=>y.replace(/\([\w\s,]*\)/g,""))).concat(Array.from(t.uniforms.keys())),t.uniforms.forEach((y,g)=>s.set(e+g.charAt(0).toUpperCase()+g.slice(1),y)),t.defines.forEach((y,g)=>n.set(e+g.charAt(0).toUpperCase()+g.slice(1),y)),H2(e,v,n),H2(e,v,d),i.set(h.blendFunction,h),p){let y=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,g=e+"MainImage(color0, UV, ";(a&Xs.DEPTH)!=0&&y.test(d.get("fragment"))&&(g+="depth, ",S=!0),g+=`color1);
	`;let _=e+"BlendOpacity";s.set(_,h.opacity),g+="color0 = blend"+h.getBlendFunction()+"(color0, color1, "+_+`);

	`,r.set(Yt.FRAGMENT_MAIN_IMAGE,r.get(Yt.FRAGMENT_MAIN_IMAGE)+g),r.set(Yt.FRAGMENT_HEAD,r.get(Yt.FRAGMENT_HEAD)+"uniform float "+_+`;

`)}r.set(Yt.FRAGMENT_HEAD,r.get(Yt.FRAGMENT_HEAD)+d.get("fragment")+`
`),d.get("vertex")!==null&&r.set(Yt.VERTEX_HEAD,r.get(Yt.VERTEX_HEAD)+d.get("vertex")+`
`)}return{varyings:m,transformedUv:w,readDepth:S}}var $1=class extends bo{constructor(e,...t){super("EffectPass");this.setFullscreenMaterial(new oie(null,null,null,e)),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniforms=0,this.varyings=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.getFullscreenMaterial().defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){if(this.encodeOutput!==e){let t=this.getFullscreenMaterial();t.needsUpdate=!0,e?t.defines.ENCODE_OUTPUT="1":delete t.defines.ENCODE_OUTPUT}}get dithering(){return this.getFullscreenMaterial().dithering}set dithering(e){let t=this.getFullscreenMaterial();t.dithering!==e&&(t.dithering=e,t.needsUpdate=!0)}verifyResources(e){let t=e.capabilities,r=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniforms>r&&console.warn("The current rendering context doesn't support more than "+r+" uniforms, but "+this.uniforms+" were defined"),r=t.maxVaryings,this.varyings>r&&console.warn("The current rendering context doesn't support more than "+r+" varyings, but "+this.varyings+" were defined")}updateMaterial(){let e=/\bblend\b/g,t=new Map([[Yt.FRAGMENT_HEAD,""],[Yt.FRAGMENT_MAIN_UV,""],[Yt.FRAGMENT_MAIN_IMAGE,""],[Yt.VERTEX_HEAD,""],[Yt.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,s=new Set,a=0,o=0,l=0,h=!1,d=!1,p;for(let m of this.effects)if(m.blendMode.getBlendFunction()===Jt.SKIP)l|=m.getAttributes()&Xs.DEPTH;else if((l&Xs.CONVOLUTION)!=0&&(m.getAttributes()&Xs.CONVOLUTION)!=0)console.error("Convolution effects cannot be merged",m);else if(l|=m.getAttributes(),p=Uie("e"+a++,m,t,r,i,n,l),o+=p.varyings.length,h=h||p.transformedUv,d=d||p.readDepth,m.extensions!==null)for(let v of m.extensions)s.add(v);for(let m of r.values())t.set(Yt.FRAGMENT_HEAD,t.get(Yt.FRAGMENT_HEAD)+m.getShaderCode().replace(e,"blend"+m.getBlendFunction())+`
`);(l&Xs.DEPTH)!=0?(d&&t.set(Yt.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(Yt.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,h?(t.set(Yt.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(Yt.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),t.forEach((m,v,w)=>w.set(v,m.trim().replace(/^#/,`
#`))),this.uniforms=n.size,this.varyings=o,this.skipRendering=a===0,this.needsSwap=!this.skipRendering;let f=this.getFullscreenMaterial();if(f.setShaderParts(t).setDefines(i).setUniforms(n),f.extensions={},s.size>0)for(let m of s)f.extensions[m]=!0;this.needsUpdate=!1}recompile(e){this.updateMaterial(),e!==void 0&&this.verifyResources(e)}getDepthTexture(){return this.getFullscreenMaterial().uniforms.depthBuffer.value}setDepthTexture(e,t=Vv){let r=this.getFullscreenMaterial();r.uniforms.depthBuffer.value=e,r.depthPacking=t,r.needsUpdate=!0;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,r,i,n){let s=this.getFullscreenMaterial(),a=s.uniforms.time.value+i;this.needsUpdate&&this.recompile(e);for(let o of this.effects)o.update(e,t,i);(!this.skipRendering||this.renderToScreen)&&(s.uniforms.inputBuffer.value=t.texture,s.uniforms.time.value=a<=this.maxTime?a:this.minTime,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera))}setSize(e,t){this.getFullscreenMaterial().setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));if(this.updateMaterial(),this.verifyResources(e),r!==void 0&&r!==Mi){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.needsUpdate=!0;break}}},kie=class extends bo{constructor({width:e=qs.AUTO_SIZE,height:t=qs.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass");this.setFullscreenMaterial(new uie(n,i)),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new li(1,1,{minFilter:ar,magFilter:ar,format:n?mi:jO,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1),this.resolution=new qs(this,e,t)}get texture(){return this.renderTarget.texture}render(e,t,r,i,n){let s=this.getFullscreenMaterial();s.uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.base.set(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){if(r!==void 0&&r!==Mi){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},Hie=class extends bo{constructor(e,t){super("MaskPass",e,t);this.needsSwap=!1,this.clearPass=new PS(!1,!1,!0),this.inverse=!1}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}render(e,t,r,i,n){let s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,h=this.clearPass,d=this.inverse?0:1,p=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,d,4294967295),a.stencil.setClear(p),a.stencil.setLocked(!0),this.clear&&(this.renderToScreen?h.render(e,null):(h.render(e,t),h.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(r),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},lo=class extends bo{constructor(e,t="inputBuffer"){super("ShaderPass");this.setFullscreenMaterial(e),this.uniform=null,this.setInput(t)}setInput(e){let t=this.getFullscreenMaterial();if(this.uniform=null,t!==null){let r=t.uniforms;r!==void 0&&r[e]!==void 0&&(this.uniform=r[e])}}render(e,t,r,i,n){this.uniform!==null&&t!==null&&(this.uniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){if(r!==void 0&&r!==Mi){let i=this.getFullscreenMaterial();i.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},Gie=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,alpha:i=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,this.renderer!==null&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(t,r,s,n),this.outputBuffer=this.inputBuffer.clone()),this.copyPass=new lo(new yR),this.alpha=i,this.depthTexture=null,this.passes=[],this.autoRenderToScreen=!0}get multisampling(){return this.inputBuffer instanceof op?this.inputBuffer.samples:0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getRenderer(){return this.renderer}replaceRenderer(e,t=!0){let r=this.renderer;if(r!==null&&r!==e){let i=r.getSize(new Q),n=e.getSize(new Q),s=r.domElement.parentNode;this.renderer=e,this.renderer.autoClear=!1,i.equals(n)||this.setSize(),t&&s!==null&&(s.removeChild(r.domElement),s.appendChild(e.domElement))}return r}createDepthTexture(){let e=this.depthTexture=new qv;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Kh,e.type=Bh):e.type=Id,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i){let n=this.renderer,s=n.getContext(),a=n.getDrawingBufferSize(new Q),o={format:!(this.alpha||s.getContextAttributes().alpha)&&r===Mi?$i:mi,minFilter:ar,magFilter:ar,stencilBuffer:t,depthBuffer:e,type:r},l=i>0?new op(a.width,a.height,o):new li(a.width,a.height,o);return i>0&&(l.samples=i),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}addPass(e,t){let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new Q),s=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setSize(n.width,n.height),e.initialize(i,s,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let o=this.createDepthTexture();for(e of r)e.setDepthTexture(o)}else e.setDepthTexture(this.depthTexture)}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,s)=>n||s.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,s=!1,a,o,l;for(let h of this.passes)h.enabled&&(h.render(t,i,n,e,s),h.needsSwap&&(s&&(r.renderToScreen=h.renderToScreen,a=t.getContext(),o=t.state.buffers.stencil,o.setFunc(a.NOTEQUAL,1,4294967295),r.render(t,i,n,e,s),o.setFunc(a.EQUAL,1,4294967295)),l=i,i=n,n=l),h instanceof Hie?s=!0:h instanceof yie&&(s=!1))}setSize(e,t,r){let i=this.renderer;if(e===void 0||t===void 0){let s=i.getSize(new Q);e=s.width,t=s.height}else i.setSize(e,t,r);let n=i.getDrawingBufferSize(new Q);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose()}},Vie=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,jie=class extends Ha{constructor({blendFunction:e=Jt.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:s=qs.AUTO_SIZE,height:a=qs.AUTO_SIZE,kernelSize:o=p0.LARGE}={}){super("BloomEffect",Vie,{blendFunction:e,uniforms:new Map([["map",new $e(null)],["intensity",new $e(n)]])});this.renderTarget=new li(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new wR({resolutionScale:i,width:s,height:a,kernelSize:o}),this.blurPass.resolution.resizable=this,this.luminancePass=new kie({renderTarget:this.renderTarget,colorOutput:!0}),this.luminancePass.resolution=this.resolution,this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=r}get texture(){return this.renderTarget.texture}get luminanceMaterial(){return this.luminancePass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead."),1}set distinction(e){console.warn(this.name,"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){this.blurPass.setSize(e,t),this.renderTarget.setSize(this.resolution.width,this.resolution.height)}initialize(e,t,r){this.blurPass.initialize(e,t,r),!t&&r===Mi&&(this.renderTarget.texture.format=$i),r!==void 0&&(this.renderTarget.texture.type=r)}},Wie="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",Jie=class extends Ha{constructor({blendFunction:e=Jt.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",Wie,{blendFunction:e,uniforms:new Map([["brightness",new $e(t)],["contrast",new $e(r)]])})}},Yie="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}",qie=class extends Ha{constructor(e=Jt.NORMAL){super("ColorAverageEffect",Yie,{blendFunction:e})}},Xie=`varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;
#ifdef ALPHA
vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;color.r=ra.x;color.b=ba.x;color.a=max(max(ra.y,ba.y),inputColor.a);
#else
color.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;
#endif
outputColor=color;}`,Qie="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}",Kie=class extends Ha{constructor({blendFunction:e=Jt.NORMAL,offset:t=new Q(.001,5e-4)}={}){super("ChromaticAberrationEffect",Xie,{vertexShader:Qie,blendFunction:e,attributes:Xs.CONVOLUTION,uniforms:new Map([["offset",new $e(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}initialize(e,t,r){t?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA")}},Zie=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,$ie=class extends Ha{constructor(e,{blendFunction:t=Jt.NORMAL,focusDistance:r=0,focalLength:i=.1,bokehScale:n=1,width:s=qs.AUTO_SIZE,height:a=qs.AUTO_SIZE}={}){super("DepthOfFieldEffect",Zie,{blendFunction:t,attributes:Xs.DEPTH,uniforms:new Map([["nearColorBuffer",new $e(null)],["farColorBuffer",new $e(null)],["nearCoCBuffer",new $e(null)],["scale",new $e(1)]])});this.camera=e,this.renderTarget=new li(1,1,{minFilter:ar,magFilter:ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.format=$i,this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new lo(new Qre(e));let o=this.circleOfConfusionMaterial;o.uniforms.focusDistance.value=r,o.uniforms.focalLength.value=i,this.blurPass=new wR({width:s,height:a,kernelSize:p0.MEDIUM}),this.blurPass.resolution.resizable=this,this.maskPass=new lo(new cie(this.renderTargetCoC.texture));let l=this.maskPass.getFullscreenMaterial();l.maskFunction=xR.MULTIPLY,l.colorChannel=vR.GREEN,this.bokehNearBasePass=new lo(new jm(!1,!0)),this.bokehNearFillPass=new lo(new jm(!0,!0)),this.bokehFarBasePass=new lo(new jm(!1,!1)),this.bokehFarFillPass=new lo(new jm(!0,!1)),this.bokehScale=n,this.target=null}get circleOfConfusionMaterial(){return this.cocPass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].map(t=>t.getFullscreenMaterial().uniforms.scale).forEach(t=>{t.value=e}),this.maskPass.getFullscreenMaterial().uniforms.strength.value=e,this.uniforms.get("scale").value=e}calculateFocusDistance(e){let t=this.camera,r=t.far-t.near,i=t.position.distanceTo(e);return Math.min(Math.max(i/r,0),1)}setDepthTexture(e,t=Vv){let r=this.circleOfConfusionMaterial;r.uniforms.depthBuffer.value=e,r.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked,o=this.bokehFarBasePass,l=this.bokehFarFillPass,h=o.getFullscreenMaterial().uniforms,d=l.getFullscreenMaterial().uniforms,p=this.bokehNearBasePass,f=this.bokehNearFillPass,m=p.getFullscreenMaterial().uniforms,v=f.getFullscreenMaterial().uniforms;if(this.target!==null){let w=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.uniforms.focusDistance.value=w}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,a),h.cocBuffer.value=d.cocBuffer.value=n.texture,o.render(e,a,i),l.render(e,i,this.renderTargetFar),m.cocBuffer.value=v.cocBuffer.value=s.texture,p.render(e,t,i),f.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution,i=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];i.push(this.renderTargetCoC,this.renderTargetMasked),i.forEach(a=>a.setSize(e,t));let n=r.width,s=r.height;i=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],i.forEach(a=>a.setSize(n,s)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.getFullscreenMaterial().setTexelSize(1/n,1/s))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,Mi),!t&&r===Mi&&(this.renderTargetNear.texture.type=$i),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r)}};new O;new Ge;var ene="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",tne=class extends Ha{constructor({blendFunction:e=Jt.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",ene,{blendFunction:e,uniforms:new Map([["hue",new $e(new O)],["saturation",new $e(r)]])});this.setHue(t)}setHue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set(2*r,-Math.sqrt(3)*t-r,Math.sqrt(3)*t-r).addScalar(1).divideScalar(3)}};new Ue;var rne=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,ine=class extends Ha{constructor({blendFunction:e=Jt.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",rne,{blendFunction:e});this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},nne="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",sne=class extends Ha{constructor(e=30){super("PixelationEffect",nne,{uniforms:new Map([["active",new $e(!1)],["d",new $e(new Q)]])});this.resolution=new Q,this.granularity=e}getGranularity(){return this.granularity}setGranularity(e){e=Math.floor(e),e%2>0&&(e+=1);let t=this.uniforms;t.get("active").value=e>0,t.get("d").value.set(e,e).divide(this.resolution),this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.setGranularity(this.granularity)}};new O;new O;var _R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",SR="data:image/png;base64,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",ane="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",one="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",lne=class extends Ha{constructor(e,t,r=ph.HIGH,i=OS.COLOR){super("SMAAEffect",ane,{vertexShader:one,blendFunction:Jt.NORMAL,attributes:Xs.CONVOLUTION|Xs.DEPTH,uniforms:new Map([["weightMap",new $e(null)]])});this.renderTargetEdges=new li(1,1,{minFilter:ar,stencilBuffer:!1,depthBuffer:!1,format:$i}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.renderTargetWeights.texture.format=mi,this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new PS(!0,!1,!1),this.clearPass.overrideClearColor=new Ue(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new lo(new iie(new Q,i)),this.weightsPass=new lo(new fie);let n=new Ir(e);n.name="SMAA.Search",n.magFilter=Zr,n.minFilter=Zr,n.format=mi,n.generateMipmaps=!1,n.needsUpdate=!0,n.flipY=!0;let s=new Ir(t);s.name="SMAA.Area",s.magFilter=ar,s.minFilter=ar,s.format=mi,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!1;let a=this.weightsPass.getFullscreenMaterial();a.uniforms.searchTexture.value=n,a.uniforms.areaTexture.value=s,this.applyPreset(r)}get edgeDetectionMaterial(){return this.edgeDetectionPass.getFullscreenMaterial()}get colorEdgesMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.getFullscreenMaterial()}setEdgeDetectionThreshold(e){this.edgeDetectionPass.getFullscreenMaterial().setEdgeDetectionThreshold(e)}setOrthogonalSearchSteps(e){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(e)}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case ph.LOW:t.setEdgeDetectionThreshold(.15),r.setOrthogonalSearchSteps(4),r.diagonalDetection=!1,r.cornerRounding=!1;break;case ph.MEDIUM:t.setEdgeDetectionThreshold(.1),r.setOrthogonalSearchSteps(8),r.diagonalDetection=!1,r.cornerRounding=!1;break;case ph.HIGH:t.setEdgeDetectionThreshold(.1),r.setOrthogonalSearchSteps(16),r.setDiagonalSearchSteps(8),r.setCornerRounding(25),r.diagonalDetection=!0,r.cornerRounding=!0;break;case ph.ULTRA:t.setEdgeDetectionThreshold(.05),r.setOrthogonalSearchSteps(32),r.setDiagonalSearchSteps(16),r.setCornerRounding(25),r.diagonalDetection=!0,r.cornerRounding=!0;break}}setDepthTexture(e,t=Vv){let r=this.edgeDetectionMaterial;r.uniforms.depthBuffer.value=e,r.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){let r=this.edgeDetectionPass.getFullscreenMaterial(),i=this.weightsPass.getFullscreenMaterial();this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),i.uniforms.resolution.value.set(e,t),i.uniforms.texelSize.value.set(1/e,1/t),r.uniforms.texelSize.value.copy(i.uniforms.texelSize.value)}dispose(){let e=this.weightsPass.getFullscreenMaterial().uniforms;e.searchTexture.value.dispose(),e.areaTexture.value.dispose(),super.dispose()}static get searchImageDataURL(){return _R}static get areaImageDataURL(){return SR}},ph={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},une=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#ifdef ESKIL
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#else
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#endif
outputColor=vec4(color,inputColor.a);}`,hne=class extends Ha{constructor(e={}){let t=Object.assign({blendFunction:Jt.NORMAL,eskil:!1,offset:.5,darkness:.5},e);super("VignetteEffect",une,{blendFunction:t.blendFunction,uniforms:new Map([["offset",new $e(t.offset)],["darkness",new $e(t.darkness)]])});this.eskil=t.eskil}get eskil(){return this.defines.has("ESKIL")}set eskil(e){this.eskil!==e&&(e?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL"),this.setChanged())}},cne=class extends ia{load(e=()=>{},t=null){arguments.length===4?(e=arguments[1],t=arguments[3]):(arguments.length===3||typeof arguments[0]!="function")&&(e=arguments[1],t=null);let r=this.manager,i=new U_;return new Promise((n,s)=>{let a=new Image,o=new Image;i.onError=l=>{r.itemError(l),t!==null?(t(`Failed to load ${l}`),n()):s(`Failed to load ${l}`)},i.onLoad=()=>{let l=[a,o];e(l),n(l)},a.addEventListener("error",l=>{i.itemError("smaa-search")}),o.addEventListener("error",l=>{i.itemError("smaa-area")}),a.addEventListener("load",()=>{r.itemEnd("smaa-search"),i.itemEnd("smaa-search")}),o.addEventListener("load",()=>{r.itemEnd("smaa-area"),i.itemEnd("smaa-area")}),r.itemStart("smaa-search"),r.itemStart("smaa-area"),i.itemStart("smaa-search"),i.itemStart("smaa-area"),a.src=_R,o.src=SR})}},Ao=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Jt.NORMAL}toJSON(){let e=["constructor","effect","subscriptions"],t=Le({},this),r=Object.getPrototypeOf(this),i=Object.getOwnPropertyNames(r);for(let n of i){let s=Object.getOwnPropertyDescriptor(r,n);s&&typeof s.get=="function"&&(t[n]=this[n])}return e.forEach(n=>delete t[n]),t}},dne=class extends Ao{constructor(){super(jie);this.blendFunction=Jt.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},pne=class extends Ao{constructor(){super(Jie)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},fne=class extends Ao{constructor(){super(Kie);this.effect.offset=new Q(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},mne=class extends Ao{constructor(){super(qie)}},gne=class extends Ao{constructor(){super(tne);this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},vne=class extends Ao{constructor(){super(ine);this.blendFunction=Jt.OVERLAY}},yne=class extends Ao{constructor(){super(hne)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},xne=class extends Ao{constructor(e){super($ie,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},wne=class extends Ao{constructor(){super(sne)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}};function G2(e,t){return t&&t.enabled&&e.push(t.effect),e}var _ne=class{constructor(){this._scene=new Ra,this._camera=new oc,this.effects=new Map,this.loadingManager=new U_,this.smaaImageLoader=new cne(this.loadingManager),this.renderPass=new k2,this._renderToScreen=!0,this._hasSmaa=!1,this.search=null,this.area=null,this.clock=new k7,this.enabled=!1,this.debug=!1,this.effects.set("bloom",new dne),this.effects.set("chromaticAberration",new fne),this.effects.set("vignette",new yne),this.effects.set("noise",new vne),this.effects.set("colorAverage",new mne),this.effects.set("hueSaturation",new gne),this.effects.set("brightnessContrast",new pne),this.effects.set("depthOfField",new xne),this.effects.set("pixelation",new wne),this.smaaPromise=this.loadSmaaImages()}get scene(){return this._scene}set scene(e){this._scene=e}get camera(){return this._camera}set camera(e){this._camera=e}loadSmaaImages(){return new Promise(e=>{this.smaaImageLoader.load(([t,r])=>{this.search=t,this.area=r,e()})})}async _initSmaa(){if(!this.effectComposer)return;let e=this.effectComposer.passes.length;(!this.area||!this.search)&&await this.smaaPromise;let t=new lne(this.search,this.area,ph.ULTRA,OS.COLOR);t.edgeDetectionMaterial.setPredicationMode(nie.DEPTH),t.edgeDetectionMaterial.setEdgeDetectionThreshold(.05),t.edgeDetectionMaterial.setPredicationThreshold(.002),t.edgeDetectionMaterial.setPredicationScale(1),this.effectComposer.addPass(new $1(this.camera,t),e),this._hasSmaa=!0}async _initPasses(){if(!(!this.effectComposer||!this.renderer))if(this.effectComposer.removeAllPasses(),this._hasSmaa=!1,this.renderPass=new k2(this.scene,this.camera),this.enabled){this.effectComposer.addPass(this.renderPass),await this._initSmaa();let e=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(G2,[]),t=[this.effects.get("pixelation")].reduce(G2,[]);t.length>0&&this.effectComposer.addPass(new $1(this.camera,...t)),this.effectComposer.addPass(new $1(this.camera,...e))}else this.effectComposer.addPass(this.renderPass)}async reinit(){!this.renderer||(this.effectComposer=new Gie(this.renderer),await this._initPasses())}async init({renderer:e,camera:t,scene:r}){this.renderer=e,this.scene=r,this.camera=t,this._initSavePass(),await this.reinit()}_initSavePass(){if(this._savePass)return;let e=new Q;this.renderer.getDrawingBufferSize(e);let t=this.renderer.capabilities.isWebGL2?op:li;this._rt=new t(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Qh,wrapT:Qh}),this._savePass=new vie(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){var t,r;let i=this.effectComposer;!i||(e===!0?((t=this.renderer)!=null&&t.capabilities.isWebGL2&&(i.multisampling=0),i.removePass(this._savePass),i.passes[i.passes.length-1].renderToScreen=!0,i.autoRenderToScreen=!0):(((r=this.renderer)==null?void 0:r.capabilities.isWebGL2)&&!this._hasSmaa&&(i.multisampling=4),i.autoRenderToScreen=!1,i.passes[i.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,i.addPass(this._savePass)),this._renderToScreen=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}fromJSON(e){e&&(Object.keys(e).forEach(t=>{let r=e[t],i=this.effects.get(t);Object.keys(r).forEach(n=>{i[n]=r[n]})}),this.enabled=e.enabled)}toJSON(){let e={};return this.effects.forEach((t,r)=>{e[r]=t.toJSON()},e),Le({enabled:this.enabled},e)}render(){var e;(e=this.effectComposer)==null||e.render(this.clock.getDelta())}setScissor(e,t,r,i){if(!this.effectComposer||!this.renderer)return;e instanceof Et?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){!this.effectComposer||!this.renderer||(this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e))}setViewport(e,t,r,i){!this.effectComposer||(e instanceof Et?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i)))}resize(e,t){var r,i;if((r=this.effectComposer)==null||r.setSize(e,t),this._rt){let n=((i=this.renderer)==null?void 0:i.getPixelRatio())||window.devicePixelRatio;this._rt.setSize(e*n,t*n)}}dispose(){var e;(e=this.effectComposer)==null||e.dispose()}};function Sne(e,t){return bne(e)}function bne(e){let t={parameters:e,type:e.type};if(e.type==="VectorGeometry"){let i=kr.createFromState(e.shape,e.width,e.height);t.shape=i}else e.type==="NonParametricGeometry"&&(t.geometry=new V_().parse(e));let r;try{r=mw(t)}catch(i){console.error(i)}if(!r){let i=kr.createFromState(tv.defaultData(),100,100);t.shape=i,r=mw(t)}return r}var Ane=IO(hG()),bw;hD.then(e=>{bw=e});var bR=new Ge,Mne=new Ge,Ene=new Ge,ks=new Ui,Jo=new O,Tne=new Ge,Cne=new Ge,DS=class extends Fa{constructor(e,t,r,i=new sc){super(r!=null?r:t,i);this.subdivPointer=e,this.originalGeometry=t,this.subdividedGeometry=r,this.objectType="SubdivObject",this.hiddenMatrixOld=new Ge,this.smoothShading=!0,this.matrixWorldRigid=new Ge,this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!1}static createFromState(e,t,r){let{subdivPointer:i,originalGeometry:n,subdividedGeometry:s}=js.build(t.geometry,void 0,void 0,!t.flatShading),a=gp(t.material,r),o=new DS(i,n,s||void 0,a);return o.calcBoundingBox(),o.freeSubdivPointer(),o.uuid=e,o.fromState(t),o}shallowClone(e){return new mR(this.geometry,this.material).shallowCopy(this,e)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="SubdivObject",t}buildFromStore(e){var t,r,i;let{originalGeometry:n,subdividedGeometry:s,subdivPointer:a}=js.build(e,this.subdivPointer,void 0,this.smoothShading,this.shearScale);if(this.subdivPointer=a,n!==void 0&&((t=this.originalGeometry)==null||t.dispose(),this.originalGeometry=n),s!==void 0&&((r=this.subdividedGeometry)==null||r.dispose(),this.subdividedGeometry=s!=null?s:void 0),this.geometry=(i=this.subdividedGeometry)!=null?i:this.originalGeometry,this.cloner)for(let o of this.cloner.children)o.geometry=this.geometry;e.width&&(this.geometry.userData.parameters={width:e.width,height:e.height,depth:e.depth})}updateMesh(e=!1){js.buildLevel(this.subdivPointer,!0,this.smoothShading,this.originalGeometry,e?this.shearScaleInv:void 0),this.subdividedGeometry&&js.buildLevel(this.subdivPointer,!1,this.smoothShading,this.subdividedGeometry,e?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=js.buildLevel(this.subdivPointer,!0,this.smoothShading),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=js.buildLevel(this.subdivPointer,!1,this.smoothShading)),this.geometry=(e=this.subdividedGeometry)!=null?e:this.originalGeometry}raycast(e,t){var r;this.geometry=this.originalGeometry,Fa.prototype.raycast.call(this,e,t),this.geometry=(r=this.subdividedGeometry)!=null?r:this.originalGeometry}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:r,v:i,q:n}=(0,Ane.SVD)(t),s=bR.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=Mne.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),o=Ene.copy(a).transpose();this.shearScale=Tne.makeScale(n[0],n[1],n[2]).multiply(o).premultiply(a),this.shearScaleInv=Cne.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,o),n.every(l=>Math.abs(n[0]-l)<.01)&&(this.shearScale=void 0,this.shearScaleInv=void 0)}activateSVDCompensation(){this.shearScale!==void 0&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){this.shearScale!==void 0&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ea);let t=e.attributes.position,r=e.boundingSphere.center;ks.setFromBufferAttribute(t),ks.getCenter(r),e.boundingSphere.radius=r.distanceTo(ks.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),ks.getSize(Jo);let i={width:Jo.x,height:Jo.y,depth:Jo.z};return this.geometry.userData.parameters=i,i}updateBoundingBox(e){let t=this.originalGeometry;ks.min.set(e[0],e[2],e[4]),ks.max.set(e[1],e[3],e[5]),this.shearScaleInv&&(ks.min.applyMatrix4(this.shearScaleInv),ks.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new ea);let r=t.boundingSphere.center;ks.getCenter(r),t.boundingSphere.radius=r.distanceTo(ks.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),ks.getSize(Jo);let i={width:Jo.x,height:Jo.y,depth:Jo.z};return this.geometry.userData.parameters=i,i}freeSubdivPointer(){this.subdivPointer&&(bw.free_bvh(this.subdivPointer),bw.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}updateGeometry(e){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=this.geometry.userData.parameters.width===0?1:e.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=this.geometry.userData.parameters.height===0?1:e.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=this.geometry.userData.parameters.depth===0?1:e.parameters.depth/this.geometry.userData.parameters.depth,V2(this.originalGeometry.attributes,...this.geometry.userData.scale),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(V2(this.subdividedGeometry.attributes,...this.subdividedGeometry.userData.scale),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters=Le({},e.parameters)}};function V2(e,t,r,i){let n=e.position.array,s=e.normal.array,a=bR.makeScale(t,r,i).invert().elements,o,l,h;for(var d=0,p=n.length;d<p;d+=3)n[d]*=t,n[d+1]*=r,n[d+2]*=i,o=s[d],l=s[d+1],h=s[d+2],s[d]=a[0]*o+a[4]*l+a[8]*h,s[d+1]=a[1]*o+a[5]*l+a[9]*h,s[d+2]=a[2]*o+a[6]*l+a[10]*h}function j2(e,t){t.flatShading!==void 0&&(e.flatShading=t.flatShading,e.needsUpdate=!0),t.wireframe!==void 0&&(e.wireframe=t.wireframe),t.side!==void 0&&(t.side===$g.Front?e.side=dl:t.side===$g.Back?e.side=Tr:e.side=bi)}function Lne(e,t){if(Array.isArray(e.material))for(let r of e.material)j2(r,t);else{let r=e.material;j2(r,t)}e.objectType==="SubdivObject"&&t.flatShading!==void 0&&(e.material.flatShading=!1,e.smoothShading=!t.flatShading,e.updateMesh())}function One(e,t,r){let i;if(t.geometry.type==="SubdivGeometry")i=DS.createFromState(e,t,r);else{let n=Sne(t.geometry),s="materials"in t?Yte(t.materials,r):gp(t.material,r);ow.is2DParametricMesh(n.userData.type)?i=new pR(n,s):(n==null?void 0:n.userData.type)==="VectorGeometry"?i=new LS(n,s):t.geometry.type==="NonParametricGeometry"?i=new mR(n,s):i=new fR(n,s),i.uuid=e,i.fromState(t)}return Lne(i,t),i}function Pne(e,t,r){return t.type==="Mesh"?One(e,t,r):t.type==="TextFrame"?bg.createFromState(e,t,r):t.type==="Empty"?iu.createFromState(e,t):t.type==="PointLight"?cR.createFromState(e,t,r):t.type==="SpotLight"?dR.createFromState(e,t,r):t.type==="DirectionalLight"?hR.createFromState(e,t,r):pp.is(t.type)?oc.createFromState(e,t):(console.error(t),new iu)}function Dne(e,t){t.uniforms[`f${t.id}_transmissionSamplerMap`].value=e.texture,t.uniforms[`f${t.id}_transmissionDepthMap`].value=e.depthTexture}function W2(e,t,r){if(!r.userData.layers)return!1;let i=!1,n=r.userData.layers.getLayersOfType(Gt.TRANSMISSION);return n.length>0?(t.layers.set(3),i=!0,e!==void 0&&n.forEach(s=>Dne(e,s))):t.layers.set(0),i}function Rne(e,t){let r=!1;return t.traverseEntity(i=>{if(i instanceof Fa)if(Array.isArray(i.material))for(let n=0;n<i.material.length;n++)W2(e,i,i.material[n])&&(r=!0);else W2(e,i,i.material)&&(r=!0)}),r}function Nne(e,t){"material"in e&&Ine(e.material,t),"geometry"in e&&e.geometry.dispose()}function Ine(e,t){fJ(e).forEach(r=>{t.isSharedMaterial(r)||r.dispose()})}var J2=new O,AR=class extends sR(Ra){constructor(e,t){super();this.objectType="Scene",this.alpha=1,this.backupFog=new R_(16777215,.1,2e3),this.fogUseBGColor=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this._needsTransmission=!1,this._color=new Ue(1,0,0),this.bgColor=new Ue(1,1,1),this.entityByUuid={},this.postprocessing=new _ne,this.ambientLight=new jg(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.init(e,t)}needsTransmission(e){return this.needsTransmissionDirty&&(this._needsTransmission=Rne(e,this),e!==void 0&&(this.needsTransmissionDirty=!1)),this._needsTransmission}find(e){if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}get color(){return this._color}set color(e){this.fogUseBGColor===!0&&this.backupFog.color.copy(e),this._color.copy(e)}get enableFog(){return this.fog!==null}set enableFog(e){this.fog=e===!0?this.backupFog:null}init(e,t){if(this.initPostprocessing(e.postprocessing),this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(Zi(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,e.publish.playCamera!==null){let r=this.find(e.publish.playCamera);r instanceof oc&&this.switchActiveCamera(r)}}initPostprocessing(e){let t=e,{enabled:r}=t,i=aG(t,["enabled"]);for(let n of Object.entries(i)){let s=n[1],a=this.postprocessing.effects.get(n[0]);if(a){a.enabled=s.enabled;for(let[o,l]of Object.entries(s))a[o]=l}}this.postprocessing.enabled=r,this.postprocessing.reinit()}clearScene(e){this.traverseEntity(t=>{Nne(t,e)});for(let t of this.children)Ws(t)&&t.removeFromParent()}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=oc.createFromState(AR.PERSONAL_CAMERA_ID,tt(Le({},hw.defaultData),{name:"personal"}));return e.enableHelper=!1,e.objectHelper.visible=!1,delete e.isEntity,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],r=i=>{for(let n of i.children)Ws(n)&&!n.raycastLock&&n.visible&&((dD(n)||Qp(n)&&n.enableHelper&&n.objectHelper.parent)&&e.intersectObject(n,!1,t),r(n))};return r(this),t}traverseEntity(e){for(let t of this.children)Ws(t)&&t.traverseEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Zi(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}toJSON(e){return{}}fromJSON(e){return this}dispose(){this.traverseEntity(e=>{"geometry"in e&&e.geometry.dispose(),"material"in e&&(e.material instanceof Array?e.material.forEach(t=>t.dispose()):e.material.dispose())}),this.postprocessing.dispose()}updateAmbientLight(e,t){hte(this.ambientLight,e,t),e.groundColor!==void 0&&(this.ambientLight.groundColor=Zi(e.groundColor,t)),e.enabled!==void 0&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.enableHelper=!0),this.activeCamera=e,this.postprocessing.camera=e,e.enableHelper=!1}setBackgroundColor(e){this.bgColor=e,this.alpha=e.a}createChildrenObjects(e,t,r){for(let i of e)this.createChildObject(i.id,i.data,i.children,t,r)}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createChildObject(e,t,r,i,n){let s=Pne(e,t,n);return s&&(this.entityByUuid[e]=s,i.add(s),this.createChildrenObjects(r,s,n)),s}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:s,recursive:a}=e[i],o=this.find(s),l=a?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let r=new Ui;return r.setFromPoints(t),r.getCenter(J2),J2}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(e===null){t.identity();return}let i=(r=this.find(e))==null?void 0:r.parent;i?t.copy(i.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Fa)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)e(t.material[r]);else e(t.material)})}updateCanvasSize(e,t){this.activeCamera.setViewplaneSize(e,t);let r,i;e>=t?(r=t/e,i=1):(r=1,i=e/t),this.traverseMaterial(n=>{n.layersList.getLayersOfType(Gt.TRANSMISSION).forEach(s=>{s.uniforms[`f${s.id}_aspectRatio`].value.x=r,s.uniforms[`f${s.id}_aspectRatio`].value.y=i})})}},MR=AR;MR.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var Bne=class{constructor(e,t,r,i){this.isEnable=!1,this.splineEvents={},this._enableEvent={},this._map={},this._prevAncestors=[],this._raycaster=new tee,this._intersection=new O,this._plane=new Gs,this._normal=new O,this._position=new O,this._onMouseDown=n=>{this._raycaster.setFromCamera(this._getPointer(n.clientX,n.clientY),this._camera),this._handleMouseDownEvent()},this._onMouseUp=n=>{this._raycaster.setFromCamera(this._getPointer(n.clientX,n.clientY),this._camera),this._handleMouseUpEvent()},this._onMouseMove=n=>{this._raycaster.setFromCamera(this._getPointer(n.clientX,n.clientY),this._camera),this._camera.getWorldDirection(this._normal),this._normal.negate(),this._handleMouseHoverEvent(),this._handleLookAtEvent(),this._handleFollowEvent()},this._onWheel=n=>{this._handleWheelEvent(n)},this._onTouchStart=n=>{n.touches.length===1&&(this._raycaster.setFromCamera(this._getPointer(n.touches[0].clientX,n.touches[0].clientY),this._camera),this._camera.getWorldDirection(this._normal),this._normal.negate(),this._handleMouseDownEvent(),this._handleMouseHoverEvent(),this._handleLookAtEvent(),this._handleFollowEvent())},this._onTouchEnd=()=>{this._handleMouseUpEvent(),this._handleMouseHoverEvent(!0)},this._onTouchMove=n=>{n.touches.length===1&&(this._raycaster.setFromCamera(this._getPointer(n.touches[0].clientX,n.touches[0].clientY),this._camera),this._camera.getWorldDirection(this._normal),this._normal.negate(),this._handleMouseHoverEvent(),this._handleLookAtEvent(),this._handleFollowEvent())},this._onKeyDown=n=>{this._handleKeyDownEvent(n.key)},this._onKeyUp=n=>{this._handleKeyUpEvent(n.key)},this._domElement=e,this._scene=t,this._camera=r,this._app=i}activate(){this.isEnable=!0,this._scene.traverseEntity(e=>{if(e.interaction!==void 0){e.interaction.start();for(let t of e.interaction.events){let r=t.type;this._addCustomEvent(r,e),this._enableEvent[r]=!0,(r===Mt.KEY_DOWN||r===Mt.KEY_UP||r===Mt.START||r===Mt.LOOK_AT||r===Mt.FOLLOW||r===Mt.SCROLL)&&(this._map[r]===void 0&&(this._map[r]=[]),this._map[r].push(e))}}}),this._enableEvent[Mt.START]!==void 0&&this._handleStartEvent(),this._enableEvent[Mt.MOUSE_DOWN]!==void 0&&(this._domElement.addEventListener("pointerdown",this._onMouseDown,!1),this._domElement.addEventListener("touchstart",this._onTouchStart,!1)),this._enableEvent[Mt.MOUSE_UP]!==void 0&&(this._domElement.addEventListener("pointerup",this._onMouseUp,!1),this._domElement.addEventListener("touchend",this._onTouchEnd,!1)),(this._enableEvent[Mt.MOUSE_HOVER]!==void 0||this._enableEvent[Mt.LOOK_AT]!==void 0||this._enableEvent[Mt.FOLLOW]!==void 0)&&(this._domElement.addEventListener("pointermove",this._onMouseMove,!1),this._domElement.addEventListener("touchstart",this._onTouchStart,!1),this._domElement.addEventListener("touchend",this._onTouchEnd,!1),this._domElement.addEventListener("touchmove",this._onTouchMove,!1)),this._enableEvent[Mt.KEY_DOWN]!==void 0&&document.addEventListener("keydown",this._onKeyDown,!1),this._enableEvent[Mt.KEY_UP]!==void 0&&document.addEventListener("keyup",this._onKeyUp,!1),this._enableEvent[Mt.SCROLL]!==void 0&&this._domElement.addEventListener("wheel",this._onWheel,!1)}deactivate(){this._scene.traverseEntity(e=>{e.interaction!==void 0&&e.interaction.end(),e.interaction.cache=void 0}),this._domElement.removeEventListener("pointerdown",this._onMouseDown),this._domElement.removeEventListener("pointerup",this._onMouseUp),this._domElement.removeEventListener("pointermove",this._onMouseMove),this._domElement.removeEventListener("touchstart",this._onTouchStart),this._domElement.removeEventListener("touchend",this._onTouchEnd),this._domElement.removeEventListener("touchmove",this._onTouchMove),this._domElement.removeEventListener("wheel",this._onWheel),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp),this._enableEvent={},this._map={},this.isEnable=!1}reset(){this._scene.traverseEntity(e=>{e.interaction.start()}),this._handleStartEvent()}_getPointer(e,t){let r=this._domElement.getBoundingClientRect();return{x:(e-r.left)/r.width*2-1,y:-((t-r.top)/r.height)*2+1}}_handleStartEvent(){var e;(e=this._map[Mt.START])==null||e.forEach(t=>{var r;(r=t.interactionCache.start)==null||r.dispatch()})}_handleWheelEvent(e){var t;(t=this._map[Mt.SCROLL])==null||t.forEach(r=>{var i;this._dispatchDOMCustomEvent("scroll",r.uuid),(i=r.interactionCache.scroll)==null||i.dispatch(e.deltaY>0?1:-1)})}_handleMouseDownEvent(){var e;let t=this._raycastMesh(this._raycaster);for(let r=0,i=t.length;r<i;++r){let n=t[r].object;if(this._dispatchDOMCustomEvent("mouseDown",n.uuid),(e=n.interactionCache.mouseDown)==null||e.dispatch(),n.traverseAncestors(s=>{var a;s instanceof iu&&(this._dispatchDOMCustomEvent("mouseDown",s.uuid),(a=s.interactionCache.mouseDown)==null||a.dispatch())}),!n.interactionCache.follow)break}}_handleMouseUpEvent(){var e;let t=this._raycastMesh(this._raycaster);for(let r=0,i=t.length;r<i;++r){let n=t[r].object;if(this._dispatchDOMCustomEvent("mouseUp",n.uuid),(e=n.interactionCache.mouseUp)==null||e.dispatch(),n.traverseAncestors(s=>{var a;s instanceof iu&&(this._dispatchDOMCustomEvent("mouseUp",s.uuid),(a=s.interactionCache.mouseUp)==null||a.dispatch())}),!n.interactionCache.follow)break}}_handleMouseHoverEvent(e=!1){var t,r;if(this._enableEvent[Mt.MOUSE_HOVER]!==void 0){let i;if(!e){let n=this._raycastMesh(this._raycaster).find(s=>!s.object.interactionCache.follow);i=n?n.object:void 0}if(this._prevObject!==i){this._prevObject!==void 0&&((t=this._prevObject.interactionCache.mouseHover)==null||t.dispatchReverse()),i!==void 0&&(this._dispatchDOMCustomEvent("mouseHover",i.uuid),(r=i.interactionCache.mouseHover)==null||r.dispatch());let n=[];i==null||i.traverseAncestors(o=>{o instanceof iu&&o.interactionCache.mouseHover&&n.push(o)}),this._prevAncestors.filter(o=>{var l;return n.includes(o)?!1:((l=o.interactionCache.mouseHover)==null||l.dispatchReverse(),!0)});let s=n.filter(o=>{var l;return this._prevAncestors.includes(o)?!1:((l=o.interactionCache.mouseHover)==null||l.dispatch(),!0)}),a=this._prevAncestors.filter(o=>n.includes(o));this._prevAncestors=[...a,...s]}this._prevObject=i}}_handleLookAtEvent(){var e;(e=this._map[Mt.LOOK_AT])==null||e.forEach(t=>{var r;let i=(r=t.interactionCache.lookAt)==null?void 0:r.distance;this._dispatchDOMCustomEvent("lookAt",t.uuid),i!==void 0&&(this._plane.set(this._normal,-i),this._raycaster.ray.intersectPlane(this._plane,this._intersection),t.interaction.lookAt(this._intersection))}),this._app.requestRender()}_handleFollowEvent(){var e;(e=this._map[Mt.FOLLOW])==null||e.forEach(t=>{this._dispatchDOMCustomEvent("follow",t.uuid),this._plane.setFromNormalAndCoplanarPoint(this._normal,t.getWorldPosition(this._position)),this._raycaster.ray.intersectPlane(this._plane,this._intersection),t.interaction.follow(this._intersection)}),this._app.requestRender()}_handleKeyDownEvent(e){var t;(t=this._map[Mt.KEY_DOWN])==null||t.forEach(r=>{var i;let n=(i=r.interactionCache.keyDown)==null?void 0:i.find(s=>s.key===e);this._dispatchDOMCustomEvent("keyDown",r.uuid),n==null||n.dispatch()})}_handleKeyUpEvent(e){var t;(t=this._map[Mt.KEY_UP])==null||t.forEach(r=>{var i;let n=(i=r.interactionCache.keyUp)==null?void 0:i.find(s=>s.key===e);this._dispatchDOMCustomEvent("keyUp",r.uuid),n==null||n.dispatch()})}_raycastMesh(e){let t=[],r=i=>{for(let n of i.children)Ws(n)&&!n.raycastLock&&n.visible&&(jre(n)&&e.intersectObject(n,!1,t),r(n))};return r(this._scene),t}_addCustomEvent(e,t){let r=(()=>{switch(e){case 0:return"mouseDown";case 1:return"mouseUp";case 2:return"mouseHover";case 5:return"keyDown";case 6:return"keyUp";case 7:return"start";case 9:return"lookAt";case 10:return"follow";case 11:return"scroll"}})();if(r){let i=new CustomEvent(r,{bubbles:!0});Object.defineProperty(i,"target",{writable:!1,value:{id:t.uuid,name:t.name}}),this.splineEvents[r]?this.splineEvents[r][t.uuid]=i:this.splineEvents[r]={[t.uuid]:i}}}_dispatchDOMCustomEvent(e,t){var r;let i=(r=this.splineEvents[e])==null?void 0:r[t];i&&this._domElement.dispatchEvent(i)}},zne=class{constructor(e,t,r,i,n){this._aspect=1,this._renderer=e,this._camera=t,this._frameSize=new Q().copy(r),this._editorSize=new Q().copy(i),this._aspect=t.aspect,this._fov=n!=null?n:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewportForImageExport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,i=this._editorSize.y;this._aspect=e/t,this._camera.zoom*=Math.min(r/e,i/t),this._renderer.setViewport(0,0,e,t)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,i=this._editorSize.y,n=0,s=0,a=e,o=t;e<r&&(n=(r-e)*.5,n=-n,a=r),t<i&&(s=(i-t)*.5,s=-s,o=i),this._aspect=a/o,this._renderer.setViewport(n,s,a,o)}updateCamera(){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let e=this._frameSize.y,t=this._editorSize.y,r=this._fov;if(e>t){let i=Fne(e,1080,2160,1,15)/100;r*=e/t,r*=1-i}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t),this._camera.updateProjectionMatrix())}};function Fne(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var Y2=new wo,uv=class extends Na{},ER=class{constructor(e){this.materials={},this.images={},this.colors={},this.transmissionRenderTarget=new li(2048,2048,{generateMipmaps:!0,minFilter:du,magFilter:ar,wrapS:Si,wrapT:Si}),this.transmissionRenderTarget.depthTexture=new qv(2048,2048),this.reset(e)}reset(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.data);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,HD(r,this))}get transmissionSamplerMap(){return this.transmissionRenderTarget.texture}get transmissionDepthMap(){return this.transmissionRenderTarget.depthTexture}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].dispose(),delete this.materials[e])}isSharedMaterial(e){return e.uuid in this.materials||e===Y2}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return(t=this.materials[e])!=null?t:Y2}getMaterials(){return this.materials}addImage(e,t){if(this.images[e])return this.images[e].onload=()=>{this.onImageLoad&&this.onImageLoad(e)},this.images[e].src=t,!0;{let r=new Image;return r.src=t,r.onload=()=>{this.onImageLoad&&this.onImageLoad(e)},this.images[e]=r,!1}}deleteImage(e){this.images[e]&&delete this.images[e]}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]}getImages(){return this.images}addColor(e,t){return this.colors[e]?("a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new uv(t.r,t.g,t.b,t.a):this.colors[e]=new uv(t.r,t.g,t.b,1),!1)}updateColor(e,t){var r,i,n,s;if(this.colors[e]){let a=this.colors[e];return this.colors[e].r=(r=t.r)!=null?r:a.r,this.colors[e].g=(i=t.g)!=null?i:a.g,this.colors[e].b=(n=t.b)!=null?n:a.b,this.colors[e].a=(s=t.a)!=null?s:a.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this.transmissionRenderTarget.depthTexture.dispose(),this.transmissionRenderTarget.dispose(),this.onImageLoad=void 0}};function Une(e,t){switch(e.type){case Gt.NOISE:return t==="noiseType";case Gt.TEXTURE:return t==="projection"||t==="axis";case Gt.DISPLACE:return t==="noiseType";default:return!1}}function q2(e,t,r,i,n){var s;let a=!1;for(let[o,l]of Object.entries(e)){if(!o||l===void 0||kD(o,r,n))continue;let h=r.uniforms[`f${r.id}_${o}`];if(h)switch(h.constructor){case Qr:if(typeof l=="string"){let d=t.getColor(l);d&&(h.value=d);break}else{let d=l;h.value instanceof uv?h.value=new Na(d.r,d.g,d.b,d.a):h.setRGBA(d);break}case wh:if(typeof l=="string"){let d=t.getColor(l);d&&(h.value=d);break}else{let d=l;h.value instanceof uv?h.value=new Na(d.r,d.g,d.b,d.a):h.value.setRGBA(d.r,d.g,d.b,d.a);break}case fs:{let d=l;h.value.setX(d[0]),h.value.setY(d[1]);break}case gs:{let d=l;h.value.setX(d[0]),h.value.setY(d[1]),h.value.setZ(d[2]);break}case Aa:{let d=l;"image"in d&&(h.value.image=t.getImage(d.image)),"wrapping"in d&&(h.value.wrapS=h.value.wrapT=d.wrapping),"repeat"in d&&h.value.repeat.fromArray(d.repeat),"offset"in d&&h.value.offset.fromArray(d.offset),h.value.needsUpdate=!0;break}case Ld:{l.forEach((d,p)=>{h.value[p].setX(d[0]),h.value[p].setY(d[1]),h.value[p].setZ(d[2]),h.value[p].setW(d[3])});break}default:{a=a||Une(r,o),h.value=l;break}}}if(a&&n){let o=FD({id:"0",fi:0,data:n},t);(s=i.userData.layers)==null||s.changeLayer(r.id,Le({},o)),i.dispose(),i.needsUpdate=!0}}function kne(e,t,r){var i;let n=[];e.objects.traverse((s,a)=>{var o;if(a.states===void 0)return;let l=t.find(s),h=l.interaction=new d0(l);Hne(l,a,null,r),h.states.push(ac.create(s,a,r));for(let d of a.states){let p=rv.patch(a,d.data);h.states.push(ac.create(d.id,p,r))}if(a.events)for(let d of a.events){let p=d.data,f=new ov(p.type);if("key"in p&&(f.key=p.key),"url"in p&&(f.url=(o=p.url)!=null?o:void 0),"distance"in p&&(f.distance=p.distance),"steps"in p&&(f.steps=p.steps),"targets"in p)for(let{data:m}of p.targets){let v=vp.create(m);m.object?(v.object=t.find(m.object),n.push([v,m.object,m.state])):v.object=void 0,f.addTarget(v)}h.events.push(f)}});for(let[s,a,o]of n){let l=t.find(a);l&&(o?s.state=(i=l.interaction.states.find(h=>h.uuid===o))!=null?i:l.interaction.states[0]:s.state=l.interaction.states[0])}}function Hne(e,t,r,i,n=!1){if(!n&&t.states.length===0)return;let s=r===null?t:rv.patch(t,t.states.data(r));if(pD(e,s),e instanceof oc&&pp.is(s.type)){let o=s;e.setZoom("PerspectiveCamera",o.perspective.zoom),e.setZoom("OrthographicCamera",o.orthographic.zoom)}else if(e instanceof Fa&&s.type==="Mesh"){if(e instanceof DS?e.buildFromStore(s.geometry):e.updateGeometry({parameters:s.geometry}),"material"in s){if(e.material instanceof Array)return;if(typeof s.material!="string"){let o=s.material.layers;for(let l of o){let h=e.material.userData.layers.getLayerByUuid(l.id);q2(l.data,i,h,e.material,l.data)}}}else if("materials"in s){if(!(e.material instanceof Array))return;var a=0;for(let o of s.materials){if(typeof o!="string"){let l=o.layers;for(let h of l){let d=e.material[a].userData.layers.getLayerByUuid(h.id);q2(h.data,i,d,e.material[a],h.data)}}a++}}}else s.type==="DirectionalLight"?e.fromDirectionalLightState(s,i):s.type==="PointLight"?e.fromPointLightState(s,i):s.type==="SpotLight"&&e.fromSpotLightState(s,i)}var Gne=class{constructor(e){this.sharedAssets=new ER(e.shared),this.scene=new MR(e.scene,this.sharedAssets)}reset(e,t){this.scene.clearScene(this.sharedAssets),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}dispose(){this.scene.clearScene(this.sharedAssets),this.sharedAssets.dispose()}},fd=".",RS=Symbol("target"),TR=Symbol("unsubscribe");function Aw(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function Vne(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var Ma=Array.isArray;function NS(e){return typeof e=="symbol"}var jne={after:(e,t)=>Ma(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>Ma(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=fd),NS(t)?e+t.toString():e+t):e,initial:e=>{if(Ma(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(fd);return t===-1?"":e.slice(0,t)},last:e=>{if(Ma(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(fd);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(Ma(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(fd);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(fd,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},vs=jne;function Wne(e){return typeof e=="object"&&typeof e.next=="function"}function Jne(e,t,r,i,n){let s=e.next;if(t.name==="entries")e.next=function(){let a=s.call(this);return a.done===!1&&(a.value[0]=n(a.value[0],t,a.value[0],i),a.value[1]=n(a.value[1],t,a.value[0],i)),a};else if(t.name==="values"){let a=r[RS].keys();e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,a.next().value,i)),o}}else e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,a.value,i)),a};return e}function X2(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&NS(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var Yne=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],s=n||e;this._pathCache.set(s,t);let a=this._proxyCache.get(s);return a===void 0&&(a=n===void 0?new Proxy(e,r):e,this._proxyCache.set(s,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,vs.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function Mw(e){return toString.call(e)==="[object Object]"}function Wm(){return!0}function ah(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var CR=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),qne=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),LR={push:Wm,pop:Wm,shift:Wm,unshift:Wm,copyWithin:ah,reverse:ah,sort:ah,splice:ah,flat:ah,fill:ah},Xne=new Set([...CR,...qne,...Object.keys(LR)]);function Jm(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var OR=["keys","values","entries"],PR=new Set(["has","toString"]),DR={add:Jm,clear:Jm,delete:Jm,forEach:Jm},Qne=new Set([...PR,...Object.keys(DR),...OR]);function Ym(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var Kne=new Set([...PR,"get"]),RR={set:Ym,clear:Ym,delete:Ym,forEach:Ym},Zne=new Set([...Kne,...Object.keys(RR),...OR]),xl=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return CR.has(e)}_shallowClone(e){let t=e;if(Mw(e))t=Le({},e);else if(Ma(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(Ma(i)?this._onIsChanged=LR[t]:i instanceof Set?this._onIsChanged=DR[t]:i instanceof Map&&(this._onIsChanged=RR[t]),i):r}update(e,t,r){let i=vs.after(e,this._path);if(t!=="length"){let n=this.clone;vs.walk(i,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],vs.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},Q2=class extends xl{static isHandledMethod(e){return Xne.has(e)}},$ne=class extends xl{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},K2=class extends xl{static isHandledMethod(e){return Qne.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},Z2=class extends xl{static isHandledMethod(e){return Zne.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},ese=class extends xl{constructor(e,t,r,i){super(void 0,t,r,i);this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},tse=class extends xl{constructor(e,t,r,i){super(void 0,t,r,i);this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},fh=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return Mw(e)||Ma(e)||Aw(e)}static isHandledMethod(e,t){return Mw(e)?xl.isHandledMethod(t):Ma(e)?Q2.isHandledMethod(t):e instanceof Set?K2.isHandledMethod(t):e instanceof Map?Z2.isHandledMethod(t):Aw(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=xl;Ma(e)?i=Q2:e instanceof Date?i=$ne:e instanceof Set?i=K2:e instanceof Map?i=Z2:e instanceof WeakSet?i=ese:e instanceof WeakMap&&(i=tse),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=fh.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},rse={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},IS=(e,t,r={})=>{r=Le(Le({},rse),r);let i=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:a,details:o}=r,l=new Yne(n),h=typeof r.onValidate=="function",d=new fh(h),p=(g,_,b,T,A)=>!h||d.isCloning||r.onValidate(vs.concat(l.getPath(g),_),b,T,A)===!0,f=(g,_,b,T)=>{!X2(l,r,_)&&!(a&&l.isDetached(g,e))&&m(l.getPath(g),_,b,T)},m=(g,_,b,T,A)=>{d.isCloning?d.update(g,_,T):t(vs.concat(g,_),b,T,A)},v=g=>g&&(g[i]||g),w=(g,_,b,T)=>Vne(g)||b==="constructor"||s&&!fh.isHandledMethod(_,b)||X2(l,r,b)||l.isGetInvariant(_,b)||a&&l.isDetached(_,e)?g:(T===void 0&&(T=l.getPath(_)),l.getProxy(g,vs.concat(T,b),S,i)),S={get(g,_,b){if(NS(_)){if(_===i||_===RS)return g;if(_===TR&&!l.isUnsubscribed&&l.getPath(g).length===0)return l.unsubscribe(),g}let T=Aw(g)?Reflect.get(g,_):Reflect.get(g,_,b);return w(T,g,_)},set(g,_,b,T){b=v(b);let A=g[i]||g,M=A[_];if(n(M,b)&&_ in g)return!0;let L=p(g,_,b,M);return L&&l.setProperty(A,_,b,T,M)?(f(g,_,g[_],M),!0):!L},defineProperty(g,_,b){if(!l.isSameDescriptor(b,g,_)){let T=g[_];p(g,_,b.value,T)&&l.defineProperty(g,_,b,T)&&f(g,_,b.value,T)}return!0},deleteProperty(g,_){if(!Reflect.has(g,_))return!0;let b=Reflect.get(g,_),T=p(g,_,void 0,b);return T&&l.deleteProperty(g,_,b)?(f(g,_,void 0,b),!0):!T},apply(g,_,b){let T=_[i]||_;if(l.isUnsubscribed)return Reflect.apply(g,T,b);if((o===!1||o!==!0&&!o.includes(g.name))&&fh.isHandledType(T)){let A=vs.initial(l.getPath(g)),M=fh.isHandledMethod(T,g.name);d.start(T,A,b);let L=Reflect.apply(g,d.preferredThisArg(g,_,T),M?b.map(N=>v(N)):b),D=d.isChanged(T,n),C=d.stop();if(fh.isHandledType(L)&&M&&(_ instanceof Map&&g.name==="get"&&(A=vs.concat(A,b[0])),L=l.getProxy(L,A,S)),D){let N={name:g.name,args:b,result:L},U=d.isCloning?vs.initial(A):A,V=d.isCloning?vs.last(A):"";p(vs.get(e,U),V,T,C,N)?m(U,V,T,C,N):d.undo(T)}return(_ instanceof Map||_ instanceof Set)&&Wne(L)?Jne(L,g,_,A,w):L}return Reflect.apply(g,_,b)}},y=l.getProxy(e,r.pathAsArray?[]:"",S);return t=t.bind(y),h&&(r.onValidate=r.onValidate.bind(y)),y};IS.target=e=>e&&e[RS]||e;IS.unsubscribe=e=>e[TR]||e;var $2=IS,eL;(function(e){e[e.FULLSCREEN=1]="FULLSCREEN",e[e.CUSTOM=2]="CUSTOM"})(eL||(eL={}));var ise=class{constructor(e,{autoRender:t=!1}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._skipRender=!0,this.autoRender=!1,this.requestRender=()=>{this._skipRender=!1},this.render=()=>{var r;if(!this._renderer)return;this._rafId=requestAnimationFrame(this.render);let i=d0.isAllAnimationsEnded;!this.autoRender&&this._skipRender&&(i===void 0||i)||(this._controls&&(this._controls.enableDamping||this._controls.autoRotate)?this._skipRender=!this._controls.update():this._skipRender=!0,this._playmode&&!this._playmode.isEnable&&this._playmode.activate(),this._scene&&this._camera&&(this._renderer.autoClear=!1,this._transmissionRenderTarget&&(this._renderer.setRenderTarget(this._transmissionRenderTarget),this._renderer.clear(),this._camera.layers.enable(0),this._camera.layers.disable(3),this._renderer.render(this._scene,this._camera),this._renderer.setRenderTarget(null),this._camera.layers.enable(3)),(r=this._scene.postprocessing)!=null&&r.enabled?(this._renderer.autoClear=!1,this._scene.postprocessing.render()):(this._renderer.autoClear=!0,this._renderer.render(this._scene,this._camera))))},this.resize=()=>{var r,i,n,s;!this._renderer||(this._viewportMode===1&&(this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._frameView&&(this._frameView.frameSize=new Q(this._viewportWidth,this._viewportHeight))),(r=this._frameView)==null||r.updateRenderer(),(i=this._scene)!=null&&i.postprocessing&&this._scene.postprocessing.resize(this._viewportWidth,this._viewportHeight),this._viewportMode!==1&&((n=this._frameView)==null||n.updateViewport()),this._camera&&((s=this._frameView)==null||s.updateCamera(),this._camera.cameraType==="PerspectiveCamera"&&this._viewportMode===1&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),this.requestRender())},this.canvas=e,this.autoRender=t,window.addEventListener("resize",CP(this.resize,200))}async load(e){let t=await(await fetch(e)).arrayBuffer();this.start(t)}start(e){var t;let r=ew.deserialize(new Uint8Array(e));this._publishData=r.scene.publish;let i=new Gne(r).scene;this._scene=i,this._sharedAssetsManager=new ER(r.shared),this._sharedAssetsManager.onImageLoad=()=>{this.requestRender()},kne(r.scene,this._scene,this._sharedAssetsManager),this._camera=this._scene.activeCamera;let n=Object.values(r.frames)[0];n&&(n.preset==="fullscreen"?(this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight):(this._viewportMode=2,this._viewportWidth=n.size[0],this._viewportHeight=n.size[1])),(t=this._scene.postprocessing)!=null&&t.enabled?(this._renderer=new cr({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._scene.postprocessing.init({renderer:this._renderer,camera:this._camera,scene:this._scene}).then(this.requestRender)):this._renderer=new cr({canvas:this.canvas,antialias:!0,alpha:!0,stencil:!0,depth:!0,powerPreference:"high-performance"}),this._scene.needsTransmission(void 0)&&(this._transmissionRenderTarget=new li(2048,2048,{generateMipmaps:!0,minFilter:du,magFilter:ar,wrapS:Si,wrapT:Si}),this._transmissionRenderTarget.depthTexture=new qv(2048,2048),this._scene.needsTransmission(this._transmissionRenderTarget)),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this._viewportWidth,this._viewportHeight),this._scene.postprocessing&&this._scene.postprocessing.resize(this._viewportWidth,this._viewportHeight),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=FO,this._renderer.setClearColor(this._scene.bgColor,this._scene.alpha),this._frameView=new zne(this._renderer,this._camera,new Q(this._viewportWidth,this._viewportHeight),new Q(window.innerWidth,window.innerHeight)),this._controls=new Q$(this._camera,this._renderer.domElement),this._publishData&&(this._controls.fromJSON(this._publishData.orbitControls),this._controls.useKeyEvents=!1),this._controls.addEventListener("change",this.requestRender),this._controls.addEventListener("start",this.requestRender),this._playmode=new Bne(this._renderer.domElement,this._scene,this._camera,this),this.resize(),this.render()}findObjectById(e){var t;let r=(t=this._scene)==null?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(r)}findObjectByName(e){var t;let r=(t=this._scene)==null?void 0:t.getObjectByName(e);return this._createProxyObject(r)}getSplineEvents(){var e;return(e=this._playmode)==null?void 0:e.splineEvents}emitEvent(e,t){let r=this.findObjectById(t);r==null||r.emitEvent(e)}emitEventReverse(e,t){let r=this.findObjectById(t);r==null||r.emitEventReverse(e)}addEventListener(e,t){var r;(r=this._renderer)==null||r.domElement.addEventListener(e,t)}removeEventListener(e,t){var r;(r=this._renderer)==null||r.domElement.removeEventListener(e,t)}setZoom(e){var t;(t=this._controls)==null||t.zoomOut(e)}dispose(){var e,t,r,i,n,s,a;(e=this._playmode)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach(o=>{$2.unsubscribe(o)}),(r=this._renderer)==null||r.dispose(),(i=this._transmissionRenderTarget)==null||i.dispose(),(s=(n=this._transmissionRenderTarget)==null?void 0:n.depthTexture)==null||s.dispose(),(a=this._sharedAssetsManager)==null||a.dispose()}_createProxyObject(e){if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,emitEvent(i){var n;let s=(n=e.interactionCache)==null?void 0:n[i];Array.isArray(s)?s.forEach(a=>{a==null||a.dispatch()}):s==null||s.dispatch()},emitEventReverse(i){var n;let s=(n=e.interactionCache)==null?void 0:n[i];Array.isArray(s)?s.forEach(a=>{a==null||a.dispatchReverse()}):s==null||s.dispatchReverse()}},r=$2(t,(i,n)=>{var s;typeof e[i]!="object"&&((s=Object.getOwnPropertyDescriptor(e,i))==null?void 0:s.writable)&&(e[i]=n),this.requestRender(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,r),r}};kn.FONTS_PATH="_assets/_fonts/";var nse=Object.defineProperty,tL=Object.getOwnPropertySymbols,sse=Object.prototype.hasOwnProperty,ase=Object.prototype.propertyIsEnumerable,rL=(e,t,r)=>t in e?nse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ose=(e,t)=>{for(var r in t||(t={}))sse.call(t,r)&&rL(e,r,t[r]);if(tL)for(var r of tL(t))ase.call(t,r)&&rL(e,r,t[r]);return e},NR={exports:{}},tf={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var iL=Object.getOwnPropertySymbols,lse=Object.prototype.hasOwnProperty,use=Object.prototype.propertyIsEnumerable;function hse(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function cse(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}cse();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dse=xO,IR=60103;tf.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var nL=Symbol.for;IR=nL("react.element"),tf.Fragment=nL("react.fragment")}var pse=dse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fse=Object.prototype.hasOwnProperty,mse={key:!0,ref:!0,__self:!0,__source:!0};function BR(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)fse.call(t,i)&&!mse.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:IR,type:e,key:s,ref:a,props:n,_owner:pse.current}}tf.jsx=BR;tf.jsxs=BR;NR.exports=tf;const sL=NR.exports.jsx,_oe=_i.exports.forwardRef(({scene:e,id:t,style:r,className:i,onMouseDown:n,onMouseUp:s,onMouseHover:a,onKeyDown:o,onKeyUp:l,onStart:h,onLookAt:d,onFollow:p,onWheel:f,onLoad:m,autoRender:v=!1},w)=>{const S=_i.exports.useRef(null),[y,g]=_i.exports.useState(!0);return _i.exports.useEffect(()=>{g(!0);let _;const b=[{name:"mouseDown",cb:n},{name:"mouseUp",cb:s},{name:"mouseHover",cb:a},{name:"keyDown",cb:o},{name:"keyUp",cb:l},{name:"start",cb:h},{name:"lookAt",cb:d},{name:"follow",cb:p},{name:"scroll",cb:f}];if(S.current){_=new ise(S.current,{autoRender:v});async function T(){await _.load(e);for(let A of b)A.cb&&_.addEventListener(A.name,A.cb);g(!1),m==null||m(_)}T()}return()=>{for(let T of b)T.cb&&_.removeEventListener(T.name,T.cb);_.dispose()}},[e]),sL("div",{style:ose({display:`${y?"none":"flex"}`},r),className:i,ref:w,children:sL("canvas",{ref:S,id:t})})});var zR={exports:{}},Zn={},FR={exports:{}},UR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,X){var J=H.length;H.push(X);e:for(;0<J;){var Y=J-1>>>1,ee=H[Y];if(0<n(ee,X))H[Y]=X,H[J]=ee,J=Y;else break e}}function r(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var X=H[0],J=H.pop();if(J!==X){H[0]=J;e:for(var Y=0,ee=H.length,ie=ee>>>1;Y<ie;){var ue=2*(Y+1)-1,we=H[ue],q=ue+1,Se=H[q];if(0>n(we,J))q<ee&&0>n(Se,we)?(H[Y]=Se,H[q]=J,Y=q):(H[Y]=we,H[ue]=J,Y=ue);else if(q<ee&&0>n(Se,J))H[Y]=Se,H[q]=J,Y=q;else break e}}return X}function n(H,X){var J=H.sortIndex-X.sortIndex;return J!==0?J:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],h=[],d=1,p=null,f=3,m=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var X=r(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=H)i(h),X.sortIndex=X.expirationTime,t(l,X);else break;X=r(h)}}function b(H){if(w=!1,_(H),!v)if(r(l)!==null)v=!0,$(T);else{var X=r(h);X!==null&&W(b,X.startTime-H)}}function T(H,X){v=!1,w&&(w=!1,y(L),L=-1),m=!0;var J=f;try{for(_(X),p=r(l);p!==null&&(!(p.expirationTime>X)||H&&!N());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,f=p.priorityLevel;var ee=Y(p.expirationTime<=X);X=e.unstable_now(),typeof ee=="function"?p.callback=ee:p===r(l)&&i(l),_(X)}else i(l);p=r(l)}if(p!==null)var ie=!0;else{var ue=r(h);ue!==null&&W(b,ue.startTime-X),ie=!1}return ie}finally{p=null,f=J,m=!1}}var A=!1,M=null,L=-1,D=5,C=-1;function N(){return!(e.unstable_now()-C<D)}function U(){if(M!==null){var H=e.unstable_now();C=H;var X=!0;try{X=M(!0,H)}finally{X?V():(A=!1,M=null)}}else A=!1}var V;if(typeof g=="function")V=function(){g(U)};else if(typeof MessageChannel!="undefined"){var k=new MessageChannel,G=k.port2;k.port1.onmessage=U,V=function(){G.postMessage(null)}}else V=function(){S(U,0)};function $(H){M=H,A||(A=!0,V())}function W(H,X){L=S(function(){H(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,$(T))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(H){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var J=f;f=X;try{return H()}finally{f=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=f;f=H;try{return X()}finally{f=J}},e.unstable_scheduleCallback=function(H,X,J){var Y=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Y+J:Y):J=Y,H){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=J+ee,H={id:d++,callback:X,priorityLevel:H,startTime:J,expirationTime:ee,sortIndex:-1},J>Y?(H.sortIndex=J,t(h,H),r(l)===null&&H===r(h)&&(w?(y(L),L=-1):w=!0,W(b,J-Y))):(H.sortIndex=ee,t(l,H),v||m||(v=!0,$(T))),H},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(H){var X=f;return function(){var J=f;f=X;try{return H.apply(this,arguments)}finally{f=J}}}})(UR);FR.exports=UR;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR=_i.exports,Qn=FR.exports;function Ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HR=new Set,yp={};function xu(e,t){lc(e,t),lc(e+"Capture",t)}function lc(e,t){for(yp[e]=t,e=0;e<t.length;e++)HR.add(t[e])}var _o=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Ew=Object.prototype.hasOwnProperty,gse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aL={},oL={};function vse(e){return Ew.call(oL,e)?!0:Ew.call(aL,e)?!1:gse.test(e)?oL[e]=!0:(aL[e]=!0,!1)}function yse(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xse(e,t,r,i){if(t===null||typeof t=="undefined"||yse(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function cn(e,t,r,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fi[e]=new cn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fi[t]=new cn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fi[e]=new cn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fi[e]=new cn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fi[e]=new cn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fi[e]=new cn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fi[e]=new cn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fi[e]=new cn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fi[e]=new cn(e,5,!1,e.toLowerCase(),null,!1,!1)});var BS=/[\-:]([a-z])/g;function zS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(BS,zS);Fi[t]=new cn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(BS,zS);Fi[t]=new cn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(BS,zS);Fi[t]=new cn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fi[e]=new cn(e,1,!1,e.toLowerCase(),null,!1,!1)});Fi.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fi[e]=new cn(e,1,!1,e.toLowerCase(),null,!0,!0)});function FS(e,t,r,i){var n=Fi.hasOwnProperty(t)?Fi[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xse(t,r,n,i)&&(r=null),i||n===null?vse(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Mo=kR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qm=Symbol.for("react.element"),Sh=Symbol.for("react.portal"),bh=Symbol.for("react.fragment"),US=Symbol.for("react.strict_mode"),Tw=Symbol.for("react.profiler"),GR=Symbol.for("react.provider"),VR=Symbol.for("react.context"),kS=Symbol.for("react.forward_ref"),Cw=Symbol.for("react.suspense"),Lw=Symbol.for("react.suspense_list"),HS=Symbol.for("react.memo"),Yo=Symbol.for("react.lazy"),jR=Symbol.for("react.offscreen"),lL=Symbol.for("react.legacy_hidden"),uL=Symbol.iterator;function md(e){return e===null||typeof e!="object"?null:(e=uL&&e[uL]||e["@@iterator"],typeof e=="function"?e:null)}var Br=Object.assign,ex;function Pd(e){if(ex===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ex=t&&t[1]||""}return`
`+ex+e}var tx=!1;function rx(e,t){if(!e||tx)return"";tx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){i=h}e.call(t.prototype)}else{try{throw Error()}catch(h){i=h}e()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var n=h.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var l=`
`+n[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{tx=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Pd(e):""}function wse(e){switch(e.tag){case 5:return Pd(e.type);case 16:return Pd("Lazy");case 13:return Pd("Suspense");case 19:return Pd("SuspenseList");case 0:case 2:case 15:return e=rx(e.type,!1),e;case 11:return e=rx(e.type.render,!1),e;case 1:return e=rx(e.type,!0),e;default:return""}}function Ow(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bh:return"Fragment";case Sh:return"Portal";case Tw:return"Profiler";case US:return"StrictMode";case Cw:return"Suspense";case Lw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case VR:return(e.displayName||"Context")+".Consumer";case GR:return(e._context.displayName||"Context")+".Provider";case kS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case HS:return t=e.displayName||null,t!==null?t:Ow(e.type)||"Memo";case Yo:t=e._payload,e=e._init;try{return Ow(e(t))}catch{}}return null}function _se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ow(t);case 23:return"LegacyHidden";case 8:return t===US?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sse(e){var t=WR(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xm(e){e._valueTracker||(e._valueTracker=Sse(e))}function JR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=WR(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function hv(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pw(e,t){var r=t.checked;return Br({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function hL(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=wl(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function YR(e,t){t=t.checked,t!=null&&FS(e,"checked",t,!1)}function Dw(e,t){YR(e,t);var r=wl(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rw(e,t.type,r):t.hasOwnProperty("defaultValue")&&Rw(e,t.type,wl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cL(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Rw(e,t,r){(t!=="number"||hv(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Dd=Array.isArray;function Vh(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+wl(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Nw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Br({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dL(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ne(92));if(Dd(r)){if(1<r.length)throw Error(Ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:wl(r)}}function qR(e,t){var r=wl(t.value),i=wl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function pL(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function XR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Iw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?XR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qm,QR=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qm=Qm||document.createElement("div"),Qm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Jd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bse=["Webkit","ms","Moz","O"];Object.keys(Jd).forEach(function(e){bse.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jd[t]=Jd[e]})});function KR(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Jd.hasOwnProperty(e)&&Jd[e]?(""+t).trim():t+"px"}function ZR(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=KR(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var Ase=Br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bw(e,t){if(t){if(Ase[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ne(62))}}function zw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fw=null;function GS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Uw=null,jh=null,Wh=null;function fL(e){if(e=sf(e)){if(typeof Uw!="function")throw Error(Ne(280));var t=e.stateNode;t&&(t=x0(t),Uw(e.stateNode,e.type,t))}}function $R(e){jh?Wh?Wh.push(e):Wh=[e]:jh=e}function eN(){if(jh){var e=jh,t=Wh;if(Wh=jh=null,fL(e),t)for(e=0;e<t.length;e++)fL(t[e])}}function tN(e,t){return e(t)}function rN(){}var ix=!1;function iN(e,t,r){if(ix)return e(t,r);ix=!0;try{return tN(e,t,r)}finally{ix=!1,(jh!==null||Wh!==null)&&(rN(),eN())}}function wp(e,t){var r=e.stateNode;if(r===null)return null;var i=x0(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ne(231,t,typeof r));return r}var kw=!1;if(_o)try{var gd={};Object.defineProperty(gd,"passive",{get:function(){kw=!0}}),window.addEventListener("test",gd,gd),window.removeEventListener("test",gd,gd)}catch{kw=!1}function Mse(e,t,r,i,n,s,a,o,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(d){this.onError(d)}}var Yd=!1,cv=null,dv=!1,Hw=null,Ese={onError:function(e){Yd=!0,cv=e}};function Tse(e,t,r,i,n,s,a,o,l){Yd=!1,cv=null,Mse.apply(Ese,arguments)}function Cse(e,t,r,i,n,s,a,o,l){if(Tse.apply(this,arguments),Yd){if(Yd){var h=cv;Yd=!1,cv=null}else throw Error(Ne(198));dv||(dv=!0,Hw=h)}}function wu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function nN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mL(e){if(wu(e)!==e)throw Error(Ne(188))}function Lse(e){var t=e.alternate;if(!t){if(t=wu(e),t===null)throw Error(Ne(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return mL(n),e;if(s===i)return mL(n),t;s=s.sibling}throw Error(Ne(188))}if(r.return!==i.return)r=n,i=s;else{for(var a=!1,o=n.child;o;){if(o===r){a=!0,r=n,i=s;break}if(o===i){a=!0,i=n,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,i=n;break}if(o===i){a=!0,i=s,r=n;break}o=o.sibling}if(!a)throw Error(Ne(189))}}if(r.alternate!==i)throw Error(Ne(190))}if(r.tag!==3)throw Error(Ne(188));return r.stateNode.current===r?e:t}function sN(e){return e=Lse(e),e!==null?aN(e):null}function aN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=aN(e);if(t!==null)return t;e=e.sibling}return null}var oN=Qn.unstable_scheduleCallback,gL=Qn.unstable_cancelCallback,Ose=Qn.unstable_shouldYield,Pse=Qn.unstable_requestPaint,Kr=Qn.unstable_now,Dse=Qn.unstable_getCurrentPriorityLevel,VS=Qn.unstable_ImmediatePriority,lN=Qn.unstable_UserBlockingPriority,pv=Qn.unstable_NormalPriority,Rse=Qn.unstable_LowPriority,uN=Qn.unstable_IdlePriority,f0=null,Ia=null;function Nse(e){if(Ia&&typeof Ia.onCommitFiberRoot=="function")try{Ia.onCommitFiberRoot(f0,e,void 0,(e.current.flags&128)===128)}catch{}}var Zs=Math.clz32?Math.clz32:zse,Ise=Math.log,Bse=Math.LN2;function zse(e){return e>>>=0,e===0?32:31-(Ise(e)/Bse|0)|0}var Km=64,Zm=4194304;function Rd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fv(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~n;o!==0?i=Rd(o):(s&=a,s!==0&&(i=Rd(s)))}else a=r&~n,a!==0?i=Rd(a):s!==0&&(i=Rd(s));if(i===0)return 0;if(t!==0&&t!==i&&(t&n)===0&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Zs(t),n=1<<r,i|=e[r],t&=~n;return i}function Fse(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Use(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Zs(s),o=1<<a,l=n[a];l===-1?((o&r)===0||(o&i)!==0)&&(n[a]=Fse(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function Gw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nx(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function rf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zs(t),e[t]=r}function kse(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Zs(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function jS(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Zs(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var hr=0;function hN(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var cN,WS,dN,pN,fN,Vw=!1,$m=[],al=null,ol=null,ll=null,_p=new Map,Sp=new Map,Xo=[],Hse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vL(e,t){switch(e){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":ol=null;break;case"mouseover":case"mouseout":ll=null;break;case"pointerover":case"pointerout":_p.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sp.delete(t.pointerId)}}function vd(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=sf(t),t!==null&&WS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Gse(e,t,r,i,n){switch(t){case"focusin":return al=vd(al,e,t,r,i,n),!0;case"dragenter":return ol=vd(ol,e,t,r,i,n),!0;case"mouseover":return ll=vd(ll,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return _p.set(s,vd(_p.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,Sp.set(s,vd(Sp.get(s)||null,e,t,r,i,n)),!0}return!1}function mN(e){var t=Ql(e.target);if(t!==null){var r=wu(t);if(r!==null){if(t=r.tag,t===13){if(t=nN(r),t!==null){e.blockedOn=t,fN(e.priority,function(){dN(r)});return}}else if(t===3&&r.stateNode.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ag(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=jw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Fw=i,r.target.dispatchEvent(i),Fw=null}else return t=sf(r),t!==null&&WS(t),e.blockedOn=r,!1;t.shift()}return!0}function yL(e,t,r){Ag(e)&&r.delete(t)}function Vse(){Vw=!1,al!==null&&Ag(al)&&(al=null),ol!==null&&Ag(ol)&&(ol=null),ll!==null&&Ag(ll)&&(ll=null),_p.forEach(yL),Sp.forEach(yL)}function yd(e,t){e.blockedOn===t&&(e.blockedOn=null,Vw||(Vw=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,Vse)))}function bp(e){function t(n){return yd(n,e)}if(0<$m.length){yd($m[0],e);for(var r=1;r<$m.length;r++){var i=$m[r];i.blockedOn===e&&(i.blockedOn=null)}}for(al!==null&&yd(al,e),ol!==null&&yd(ol,e),ll!==null&&yd(ll,e),_p.forEach(t),Sp.forEach(t),r=0;r<Xo.length;r++)i=Xo[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Xo.length&&(r=Xo[0],r.blockedOn===null);)mN(r),r.blockedOn===null&&Xo.shift()}var Jh=Mo.ReactCurrentBatchConfig,mv=!0;function jse(e,t,r,i){var n=hr,s=Jh.transition;Jh.transition=null;try{hr=1,JS(e,t,r,i)}finally{hr=n,Jh.transition=s}}function Wse(e,t,r,i){var n=hr,s=Jh.transition;Jh.transition=null;try{hr=4,JS(e,t,r,i)}finally{hr=n,Jh.transition=s}}function JS(e,t,r,i){if(mv){var n=jw(e,t,r,i);if(n===null)fx(e,t,i,gv,r),vL(e,i);else if(Gse(n,e,t,r,i))i.stopPropagation();else if(vL(e,i),t&4&&-1<Hse.indexOf(e)){for(;n!==null;){var s=sf(n);if(s!==null&&cN(s),s=jw(e,t,r,i),s===null&&fx(e,t,i,gv,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else fx(e,t,i,null,r)}}var gv=null;function jw(e,t,r,i){if(gv=null,e=GS(i),e=Ql(e),e!==null)if(t=wu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=nN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gv=e,null}function gN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dse()){case VS:return 1;case lN:return 4;case pv:case Rse:return 16;case uN:return 536870912;default:return 16}default:return 16}}var el=null,YS=null,Mg=null;function vN(){if(Mg)return Mg;var e,t=YS,r=t.length,i,n="value"in el?el.value:el.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(i=1;i<=a&&t[r-i]===n[s-i];i++);return Mg=n.slice(e,1<i?1-i:void 0)}function Eg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function eg(){return!0}function xL(){return!1}function $n(e){function t(r,i,n,s,a){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?eg:xL,this.isPropagationStopped=xL,this}return Br(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=eg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=eg)},persist:function(){},isPersistent:eg}),t}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qS=$n(Pc),nf=Br({},Pc,{view:0,detail:0}),Jse=$n(nf),sx,ax,xd,m0=Br({},nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:XS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xd&&(xd&&e.type==="mousemove"?(sx=e.screenX-xd.screenX,ax=e.screenY-xd.screenY):ax=sx=0,xd=e),sx)},movementY:function(e){return"movementY"in e?e.movementY:ax}}),wL=$n(m0),Yse=Br({},m0,{dataTransfer:0}),qse=$n(Yse),Xse=Br({},nf,{relatedTarget:0}),ox=$n(Xse),Qse=Br({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),Kse=$n(Qse),Zse=Br({},Pc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$se=$n(Zse),eae=Br({},Pc,{data:0}),_L=$n(eae),tae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rae={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iae={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nae(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iae[e])?!!t[e]:!1}function XS(){return nae}var sae=Br({},nf,{key:function(e){if(e.key){var t=tae[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Eg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rae[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:XS,charCode:function(e){return e.type==="keypress"?Eg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aae=$n(sae),oae=Br({},m0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SL=$n(oae),lae=Br({},nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:XS}),uae=$n(lae),hae=Br({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),cae=$n(hae),dae=Br({},m0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pae=$n(dae),fae=[9,13,27,32],QS=_o&&"CompositionEvent"in window,qd=null;_o&&"documentMode"in document&&(qd=document.documentMode);var mae=_o&&"TextEvent"in window&&!qd,yN=_o&&(!QS||qd&&8<qd&&11>=qd),bL=String.fromCharCode(32),AL=!1;function xN(e,t){switch(e){case"keyup":return fae.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ah=!1;function gae(e,t){switch(e){case"compositionend":return wN(t);case"keypress":return t.which!==32?null:(AL=!0,bL);case"textInput":return e=t.data,e===bL&&AL?null:e;default:return null}}function vae(e,t){if(Ah)return e==="compositionend"||!QS&&xN(e,t)?(e=vN(),Mg=YS=el=null,Ah=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yN&&t.locale!=="ko"?null:t.data;default:return null}}var yae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ML(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yae[e.type]:t==="textarea"}function _N(e,t,r,i){$R(i),t=vv(t,"onChange"),0<t.length&&(r=new qS("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Xd=null,Ap=null;function xae(e){DN(e,0)}function g0(e){var t=Th(e);if(JR(t))return e}function wae(e,t){if(e==="change")return t}var SN=!1;if(_o){var lx;if(_o){var ux="oninput"in document;if(!ux){var EL=document.createElement("div");EL.setAttribute("oninput","return;"),ux=typeof EL.oninput=="function"}lx=ux}else lx=!1;SN=lx&&(!document.documentMode||9<document.documentMode)}function TL(){Xd&&(Xd.detachEvent("onpropertychange",bN),Ap=Xd=null)}function bN(e){if(e.propertyName==="value"&&g0(Ap)){var t=[];_N(t,Ap,e,GS(e)),iN(xae,t)}}function _ae(e,t,r){e==="focusin"?(TL(),Xd=t,Ap=r,Xd.attachEvent("onpropertychange",bN)):e==="focusout"&&TL()}function Sae(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return g0(Ap)}function bae(e,t){if(e==="click")return g0(t)}function Aae(e,t){if(e==="input"||e==="change")return g0(t)}function Mae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ua=typeof Object.is=="function"?Object.is:Mae;function Mp(e,t){if(Ua(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!Ew.call(t,n)||!Ua(e[n],t[n]))return!1}return!0}function CL(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function LL(e,t){var r=CL(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=CL(r)}}function AN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?AN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function MN(){for(var e=window,t=hv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=hv(e.document)}return t}function KS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Eae(e){var t=MN(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&AN(r.ownerDocument.documentElement,r)){if(i!==null&&KS(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=LL(r,s);var a=LL(r,i);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Tae=_o&&"documentMode"in document&&11>=document.documentMode,Mh=null,Ww=null,Qd=null,Jw=!1;function OL(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jw||Mh==null||Mh!==hv(i)||(i=Mh,"selectionStart"in i&&KS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qd&&Mp(Qd,i)||(Qd=i,i=vv(Ww,"onSelect"),0<i.length&&(t=new qS("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Mh)))}function tg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Eh={animationend:tg("Animation","AnimationEnd"),animationiteration:tg("Animation","AnimationIteration"),animationstart:tg("Animation","AnimationStart"),transitionend:tg("Transition","TransitionEnd")},hx={},EN={};_o&&(EN=document.createElement("div").style,"AnimationEvent"in window||(delete Eh.animationend.animation,delete Eh.animationiteration.animation,delete Eh.animationstart.animation),"TransitionEvent"in window||delete Eh.transitionend.transition);function v0(e){if(hx[e])return hx[e];if(!Eh[e])return e;var t=Eh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in EN)return hx[e]=t[r];return e}var TN=v0("animationend"),CN=v0("animationiteration"),LN=v0("animationstart"),ON=v0("transitionend"),PN=new Map,PL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function El(e,t){PN.set(e,t),xu(t,[e])}for(var cx=0;cx<PL.length;cx++){var dx=PL[cx],Cae=dx.toLowerCase(),Lae=dx[0].toUpperCase()+dx.slice(1);El(Cae,"on"+Lae)}El(TN,"onAnimationEnd");El(CN,"onAnimationIteration");El(LN,"onAnimationStart");El("dblclick","onDoubleClick");El("focusin","onFocus");El("focusout","onBlur");El(ON,"onTransitionEnd");lc("onMouseEnter",["mouseout","mouseover"]);lc("onMouseLeave",["mouseout","mouseover"]);lc("onPointerEnter",["pointerout","pointerover"]);lc("onPointerLeave",["pointerout","pointerover"]);xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xu("onBeforeInput",["compositionend","keypress","textInput","paste"]);xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oae=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nd));function DL(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Cse(i,t,void 0,e),e.currentTarget=null}function DN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==s&&n.isPropagationStopped())break e;DL(n,o,h),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,h=o.currentTarget,o=o.listener,l!==s&&n.isPropagationStopped())break e;DL(n,o,h),s=l}}}if(dv)throw e=Hw,dv=!1,Hw=null,e}function wr(e,t){var r=t[Kw];r===void 0&&(r=t[Kw]=new Set);var i=e+"__bubble";r.has(i)||(RN(t,e,2,!1),r.add(i))}function px(e,t,r){var i=0;t&&(i|=4),RN(r,e,i,t)}var rg="_reactListening"+Math.random().toString(36).slice(2);function y0(e){if(!e[rg]){e[rg]=!0,HR.forEach(function(r){r!=="selectionchange"&&(Oae.has(r)||px(r,!1,e),px(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rg]||(t[rg]=!0,px("selectionchange",!1,t))}}function RN(e,t,r,i){switch(gN(t)){case 1:var n=jse;break;case 4:n=Wse;break;default:n=JS}r=n.bind(null,t,r,e),n=void 0,!kw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function fx(e,t,r,i,n){var s=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;a=a.return}for(;o!==null;){if(a=Ql(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}iN(function(){var h=s,d=GS(r),p=[];e:{var f=PN.get(e);if(f!==void 0){var m=qS,v=e;switch(e){case"keypress":if(Eg(r)===0)break e;case"keydown":case"keyup":m=aae;break;case"focusin":v="focus",m=ox;break;case"focusout":v="blur",m=ox;break;case"beforeblur":case"afterblur":m=ox;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=wL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qse;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=uae;break;case TN:case CN:case LN:m=Kse;break;case ON:m=cae;break;case"scroll":m=Jse;break;case"wheel":m=pae;break;case"copy":case"cut":case"paste":m=$se;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=SL}var w=(t&4)!==0,S=!w&&e==="scroll",y=w?f!==null?f+"Capture":null:f;w=[];for(var g=h,_;g!==null;){_=g;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=wp(g,y),b!=null&&w.push(Ep(g,b,_)))),S)break;g=g.return}0<w.length&&(f=new m(f,v,null,r,d),p.push({event:f,listeners:w}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==Fw&&(v=r.relatedTarget||r.fromElement)&&(Ql(v)||v[Tl]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=h,v=v?Ql(v):null,v!==null&&(S=wu(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=h),m!==v)){if(w=wL,b="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=SL,b="onPointerLeave",y="onPointerEnter",g="pointer"),S=m==null?f:Th(m),_=v==null?f:Th(v),f=new w(b,g+"leave",m,r,d),f.target=S,f.relatedTarget=_,b=null,Ql(d)===h&&(w=new w(y,g+"enter",v,r,d),w.target=_,w.relatedTarget=S,b=w),S=b,m&&v)t:{for(w=m,y=v,g=0,_=w;_;_=oh(_))g++;for(_=0,b=y;b;b=oh(b))_++;for(;0<g-_;)w=oh(w),g--;for(;0<_-g;)y=oh(y),_--;for(;g--;){if(w===y||y!==null&&w===y.alternate)break t;w=oh(w),y=oh(y)}w=null}else w=null;m!==null&&RL(p,f,m,w,!1),v!==null&&S!==null&&RL(p,S,v,w,!0)}}e:{if(f=h?Th(h):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var T=wae;else if(ML(f))if(SN)T=Aae;else{T=Sae;var A=_ae}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=bae);if(T&&(T=T(e,h))){_N(p,T,r,d);break e}A&&A(e,f,h),e==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&Rw(f,"number",f.value)}switch(A=h?Th(h):window,e){case"focusin":(ML(A)||A.contentEditable==="true")&&(Mh=A,Ww=h,Qd=null);break;case"focusout":Qd=Ww=Mh=null;break;case"mousedown":Jw=!0;break;case"contextmenu":case"mouseup":case"dragend":Jw=!1,OL(p,r,d);break;case"selectionchange":if(Tae)break;case"keydown":case"keyup":OL(p,r,d)}var M;if(QS)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Ah?xN(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(yN&&r.locale!=="ko"&&(Ah||L!=="onCompositionStart"?L==="onCompositionEnd"&&Ah&&(M=vN()):(el=d,YS="value"in el?el.value:el.textContent,Ah=!0)),A=vv(h,L),0<A.length&&(L=new _L(L,e,null,r,d),p.push({event:L,listeners:A}),M?L.data=M:(M=wN(r),M!==null&&(L.data=M)))),(M=mae?gae(e,r):vae(e,r))&&(h=vv(h,"onBeforeInput"),0<h.length&&(d=new _L("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:h}),d.data=M))}DN(p,t)})}function Ep(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vv(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=wp(e,r),s!=null&&i.unshift(Ep(e,s,n)),s=wp(e,t),s!=null&&i.push(Ep(e,s,n))),e=e.return}return i}function oh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function RL(e,t,r,i,n){for(var s=t._reactName,a=[];r!==null&&r!==i;){var o=r,l=o.alternate,h=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&h!==null&&(o=h,n?(l=wp(r,s),l!=null&&a.unshift(Ep(r,l,o))):n||(l=wp(r,s),l!=null&&a.push(Ep(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var Pae=/\r\n?/g,Dae=/\u0000|\uFFFD/g;function NL(e){return(typeof e=="string"?e:""+e).replace(Pae,`
`).replace(Dae,"")}function ig(e,t,r){if(t=NL(t),NL(e)!==t&&r)throw Error(Ne(425))}function yv(){}var Yw=null,qw=null;function Xw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qw=typeof setTimeout=="function"?setTimeout:void 0,Rae=typeof clearTimeout=="function"?clearTimeout:void 0,IL=typeof Promise=="function"?Promise:void 0,Nae=typeof queueMicrotask=="function"?queueMicrotask:typeof IL!="undefined"?function(e){return IL.resolve(null).then(e).catch(Iae)}:Qw;function Iae(e){setTimeout(function(){throw e})}function mx(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),bp(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);bp(t)}function ho(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function BL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Dc=Math.random().toString(36).slice(2),Ea="__reactFiber$"+Dc,Tp="__reactProps$"+Dc,Tl="__reactContainer$"+Dc,Kw="__reactEvents$"+Dc,Bae="__reactListeners$"+Dc,zae="__reactHandles$"+Dc;function Ql(e){var t=e[Ea];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Tl]||r[Ea]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=BL(e);e!==null;){if(r=e[Ea])return r;e=BL(e)}return t}e=r,r=e.parentNode}return null}function sf(e){return e=e[Ea]||e[Tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Th(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ne(33))}function x0(e){return e[Tp]||null}var Zw=[],Ch=-1;function Cl(e){return{current:e}}function Sr(e){0>Ch||(e.current=Zw[Ch],Zw[Ch]=null,Ch--)}function vr(e,t){Ch++,Zw[Ch]=e.current,e.current=t}var _l={},tn=Cl(_l),En=Cl(!1),hu=_l;function uc(e,t){var r=e.type.contextTypes;if(!r)return _l;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Tn(e){return e=e.childContextTypes,e!=null}function xv(){Sr(En),Sr(tn)}function zL(e,t,r){if(tn.current!==_l)throw Error(Ne(168));vr(tn,t),vr(En,r)}function NN(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(Ne(108,_se(e)||"Unknown",n));return Br({},r,i)}function wv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_l,hu=tn.current,vr(tn,e),vr(En,En.current),!0}function FL(e,t,r){var i=e.stateNode;if(!i)throw Error(Ne(169));r?(e=NN(e,t,hu),i.__reactInternalMemoizedMergedChildContext=e,Sr(En),Sr(tn),vr(tn,e)):Sr(En),vr(En,r)}var uo=null,w0=!1,gx=!1;function IN(e){uo===null?uo=[e]:uo.push(e)}function Fae(e){w0=!0,IN(e)}function Ll(){if(!gx&&uo!==null){gx=!0;var e=0,t=hr;try{var r=uo;for(hr=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}uo=null,w0=!1}catch(n){throw uo!==null&&(uo=uo.slice(e+1)),oN(VS,Ll),n}finally{hr=t,gx=!1}}return null}var Uae=Mo.ReactCurrentBatchConfig;function Hs(e,t){if(e&&e.defaultProps){t=Br({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var _v=Cl(null),Sv=null,Lh=null,ZS=null;function $S(){ZS=Lh=Sv=null}function eb(e){var t=_v.current;Sr(_v),e._currentValue=t}function $w(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Yh(e,t){Sv=e,ZS=Lh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Yn=!0),e.firstContext=null)}function Es(e){var t=e._currentValue;if(ZS!==e)if(e={context:e,memoizedValue:t,next:null},Lh===null){if(Sv===null)throw Error(Ne(308));Lh=e,Sv.dependencies={lanes:0,firstContext:e}}else Lh=Lh.next=e;return t}var Pa=null,qo=!1;function tb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ul(e,t){var r=e.updateQueue;r!==null&&(r=r.shared,$r!==null&&(e.mode&1)!==0&&(Vt&2)===0?(e=r.interleaved,e===null?(t.next=t,Pa===null?Pa=[r]:Pa.push(r)):(t.next=e.next,e.next=t),r.interleaved=t):(e=r.pending,e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t))}function Tg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,jS(e,r)}}function UL(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bv(e,t,r,i){var n=e.updateQueue;qo=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,h=l.next;l.next=null,a===null?s=h:a.next=h,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=h:o.next=h,d.lastBaseUpdate=l))}if(s!==null){var p=n.baseState;a=0,d=h=l=null,o=s;do{var f=o.lane,m=o.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,w=o;switch(f=t,m=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){p=v.call(m,p,f);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(m,p,f):v,f==null)break e;p=Br({},p,f);break e;case 2:qo=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(h=d=m,l=p):d=d.next=m,a|=f;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;f=o,o=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(1);if(d===null&&(l=p),n.baseState=l,n.firstBaseUpdate=h,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);fc|=a,e.lanes=a,e.memoizedState=p}}function kL(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Ne(191,n));n.call(i)}}}var zN=new kR.Component().refs;function e_(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Br({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _0={isMounted:function(e){return(e=e._reactInternals)?wu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=on(),n=cl(e),s=vo(i,n);s.payload=t,r!=null&&(s.callback=r),ul(e,s),t=bs(e,n,i),t!==null&&Tg(t,e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=on(),n=cl(e),s=vo(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),ul(e,s),t=bs(e,n,i),t!==null&&Tg(t,e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=on(),i=cl(e),n=vo(r,i);n.tag=2,t!=null&&(n.callback=t),ul(e,n),t=bs(e,i,r),t!==null&&Tg(t,e,i)}};function HL(e,t,r,i,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!Mp(r,i)||!Mp(n,s):!0}function FN(e,t,r){var i=!1,n=_l,s=t.contextType;return typeof s=="object"&&s!==null?s=Es(s):(n=Tn(t)?hu:tn.current,i=t.contextTypes,s=(i=i!=null)?uc(e,n):_l),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_0,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function GL(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&_0.enqueueReplaceState(t,t.state,null)}function t_(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=zN,tb(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=Es(s):(s=Tn(t)?hu:tn.current,n.context=uc(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(e_(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&_0.enqueueReplaceState(n,n.state,null),bv(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}var Oh=[],Ph=0,Av=null,Mv=0,xs=[],ws=0,cu=null,co=1,po="";function Wl(e,t){Oh[Ph++]=Mv,Oh[Ph++]=Av,Av=e,Mv=t}function UN(e,t,r){xs[ws++]=co,xs[ws++]=po,xs[ws++]=cu,cu=e;var i=co;e=po;var n=32-Zs(i)-1;i&=~(1<<n),r+=1;var s=32-Zs(t)+n;if(30<s){var a=n-n%5;s=(i&(1<<a)-1).toString(32),i>>=a,n-=a,co=1<<32-Zs(t)+n|r<<n|i,po=s+e}else co=1<<s|r<<n|i,po=e}function rb(e){e.return!==null&&(Wl(e,1),UN(e,1,0))}function ib(e){for(;e===Av;)Av=Oh[--Ph],Oh[Ph]=null,Mv=Oh[--Ph],Oh[Ph]=null;for(;e===cu;)cu=xs[--ws],xs[ws]=null,po=xs[--ws],xs[ws]=null,co=xs[--ws],xs[ws]=null}var Xn=null,Sn=null,Cr=!1,$s=null;function kN(e,t){var r=jn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function VL(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xn=e,Sn=ho(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xn=e,Sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cu!==null?{id:co,overflow:po}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=jn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xn=e,Sn=null,!0):!1;default:return!1}}function r_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function i_(e){if(Cr){var t=Sn;if(t){var r=t;if(!VL(e,t)){if(r_(e))throw Error(Ne(418));t=ho(r.nextSibling);var i=Xn;t&&VL(e,t)?kN(i,r):(e.flags=e.flags&-4097|2,Cr=!1,Xn=e)}}else{if(r_(e))throw Error(Ne(418));e.flags=e.flags&-4097|2,Cr=!1,Xn=e}}}function jL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xn=e}function wd(e){if(e!==Xn)return!1;if(!Cr)return jL(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xw(e.type,e.memoizedProps)),t&&(t=Sn)){if(r_(e)){for(e=Sn;e;)e=ho(e.nextSibling);throw Error(Ne(418))}for(;t;)kN(e,t),t=ho(t.nextSibling)}if(jL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Sn=ho(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Sn=null}}else Sn=Xn?ho(e.stateNode.nextSibling):null;return!0}function hc(){Sn=Xn=null,Cr=!1}function _d(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ne(309));var i=r.stateNode}if(!i)throw Error(Ne(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;o===zN&&(o=n.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ne(284));if(!r._owner)throw Error(Ne(290,e))}return e}function ng(e,t){throw e=Object.prototype.toString.call(t),Error(Ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function WL(e){var t=e._init;return t(e._payload)}function HN(e){function t(y,g){if(e){var _=y.deletions;_===null?(y.deletions=[g],y.flags|=16):_.push(g)}}function r(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function i(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function n(y,g){return y=Sl(y,g),y.index=0,y.sibling=null,y}function s(y,g,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<g?(y.flags|=2,g):_):(y.flags|=2,g)):(y.flags|=1048576,g)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,g,_,b){return g===null||g.tag!==6?(g=_x(_,y.mode,b),g.return=y,g):(g=n(g,_),g.return=y,g)}function l(y,g,_,b){var T=_.type;return T===bh?d(y,g,_.props.children,b,_.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yo&&WL(T)===g.type)?(b=n(g,_.props),b.ref=_d(y,g,_),b.return=y,b):(b=Rg(_.type,_.key,_.props,null,y.mode,b),b.ref=_d(y,g,_),b.return=y,b)}function h(y,g,_,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=Sx(_,y.mode,b),g.return=y,g):(g=n(g,_.children||[]),g.return=y,g)}function d(y,g,_,b,T){return g===null||g.tag!==7?(g=au(_,y.mode,b,T),g.return=y,g):(g=n(g,_),g.return=y,g)}function p(y,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=_x(""+g,y.mode,_),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case qm:return _=Rg(g.type,g.key,g.props,null,y.mode,_),_.ref=_d(y,null,g),_.return=y,_;case Sh:return g=Sx(g,y.mode,_),g.return=y,g;case Yo:var b=g._init;return p(y,b(g._payload),_)}if(Dd(g)||md(g))return g=au(g,y.mode,_,null),g.return=y,g;ng(y,g)}return null}function f(y,g,_,b){var T=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return T!==null?null:o(y,g,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qm:return _.key===T?l(y,g,_,b):null;case Sh:return _.key===T?h(y,g,_,b):null;case Yo:return T=_._init,f(y,g,T(_._payload),b)}if(Dd(_)||md(_))return T!==null?null:d(y,g,_,b,null);ng(y,_)}return null}function m(y,g,_,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,o(g,y,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qm:return y=y.get(b.key===null?_:b.key)||null,l(g,y,b,T);case Sh:return y=y.get(b.key===null?_:b.key)||null,h(g,y,b,T);case Yo:var A=b._init;return m(y,g,_,A(b._payload),T)}if(Dd(b)||md(b))return y=y.get(_)||null,d(g,y,b,T,null);ng(g,b)}return null}function v(y,g,_,b){for(var T=null,A=null,M=g,L=g=0,D=null;M!==null&&L<_.length;L++){M.index>L?(D=M,M=null):D=M.sibling;var C=f(y,M,_[L],b);if(C===null){M===null&&(M=D);break}e&&M&&C.alternate===null&&t(y,M),g=s(C,g,L),A===null?T=C:A.sibling=C,A=C,M=D}if(L===_.length)return r(y,M),Cr&&Wl(y,L),T;if(M===null){for(;L<_.length;L++)M=p(y,_[L],b),M!==null&&(g=s(M,g,L),A===null?T=M:A.sibling=M,A=M);return Cr&&Wl(y,L),T}for(M=i(y,M);L<_.length;L++)D=m(M,y,L,_[L],b),D!==null&&(e&&D.alternate!==null&&M.delete(D.key===null?L:D.key),g=s(D,g,L),A===null?T=D:A.sibling=D,A=D);return e&&M.forEach(function(N){return t(y,N)}),Cr&&Wl(y,L),T}function w(y,g,_,b){var T=md(_);if(typeof T!="function")throw Error(Ne(150));if(_=T.call(_),_==null)throw Error(Ne(151));for(var A=T=null,M=g,L=g=0,D=null,C=_.next();M!==null&&!C.done;L++,C=_.next()){M.index>L?(D=M,M=null):D=M.sibling;var N=f(y,M,C.value,b);if(N===null){M===null&&(M=D);break}e&&M&&N.alternate===null&&t(y,M),g=s(N,g,L),A===null?T=N:A.sibling=N,A=N,M=D}if(C.done)return r(y,M),Cr&&Wl(y,L),T;if(M===null){for(;!C.done;L++,C=_.next())C=p(y,C.value,b),C!==null&&(g=s(C,g,L),A===null?T=C:A.sibling=C,A=C);return Cr&&Wl(y,L),T}for(M=i(y,M);!C.done;L++,C=_.next())C=m(M,y,L,C.value,b),C!==null&&(e&&C.alternate!==null&&M.delete(C.key===null?L:C.key),g=s(C,g,L),A===null?T=C:A.sibling=C,A=C);return e&&M.forEach(function(U){return t(y,U)}),Cr&&Wl(y,L),T}function S(y,g,_,b){if(typeof _=="object"&&_!==null&&_.type===bh&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case qm:e:{for(var T=_.key,A=g;A!==null;){if(A.key===T){if(T=_.type,T===bh){if(A.tag===7){r(y,A.sibling),g=n(A,_.props.children),g.return=y,y=g;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yo&&WL(T)===A.type){r(y,A.sibling),g=n(A,_.props),g.ref=_d(y,A,_),g.return=y,y=g;break e}r(y,A);break}else t(y,A);A=A.sibling}_.type===bh?(g=au(_.props.children,y.mode,b,_.key),g.return=y,y=g):(b=Rg(_.type,_.key,_.props,null,y.mode,b),b.ref=_d(y,g,_),b.return=y,y=b)}return a(y);case Sh:e:{for(A=_.key;g!==null;){if(g.key===A)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){r(y,g.sibling),g=n(g,_.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else t(y,g);g=g.sibling}g=Sx(_,y.mode,b),g.return=y,y=g}return a(y);case Yo:return A=_._init,S(y,g,A(_._payload),b)}if(Dd(_))return v(y,g,_,b);if(md(_))return w(y,g,_,b);ng(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(r(y,g.sibling),g=n(g,_),g.return=y,y=g):(r(y,g),g=_x(_,y.mode,b),g.return=y,y=g),a(y)):r(y,g)}return S}var cc=HN(!0),GN=HN(!1),af={},Ba=Cl(af),Cp=Cl(af),Lp=Cl(af);function Kl(e){if(e===af)throw Error(Ne(174));return e}function nb(e,t){switch(vr(Lp,t),vr(Cp,e),vr(Ba,af),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Iw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Iw(t,e)}Sr(Ba),vr(Ba,t)}function dc(){Sr(Ba),Sr(Cp),Sr(Lp)}function VN(e){Kl(Lp.current);var t=Kl(Ba.current),r=Iw(t,e.type);t!==r&&(vr(Cp,e),vr(Ba,r))}function sb(e){Cp.current===e&&(Sr(Ba),Sr(Cp))}var Dr=Cl(0);function Ev(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cg=[];function ab(){for(var e=0;e<Cg.length;e++)Cg[e]._workInProgressVersionPrimary=null;Cg.length=0}var Lg=Mo.ReactCurrentDispatcher,_s=Mo.ReactCurrentBatchConfig,pc=0,Vr=null,Qi=null,wi=null,Tv=!1,Kd=!1,Op=0,kae=0;function Ji(){throw Error(Ne(321))}function ob(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ua(e[r],t[r]))return!1;return!0}function lb(e,t,r,i,n,s){if(pc=s,Vr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lg.current=e===null||e.memoizedState===null?jae:Wae,e=r(i,n),Kd){s=0;do{if(Kd=!1,Op=0,25<=s)throw Error(Ne(301));s+=1,wi=Qi=null,t.updateQueue=null,Lg.current=Jae,e=r(i,n)}while(Kd)}if(Lg.current=Cv,t=Qi!==null&&Qi.next!==null,pc=0,wi=Qi=Vr=null,Tv=!1,t)throw Error(Ne(300));return e}function ub(){var e=Op!==0;return Op=0,e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?Vr.memoizedState=wi=e:wi=wi.next=e,wi}function Ga(){if(Qi===null){var e=Vr.alternate;e=e!==null?e.memoizedState:null}else e=Qi.next;var t=wi===null?Vr.memoizedState:wi.next;if(t!==null)wi=t,Qi=e;else{if(e===null)throw Error(Ne(310));Qi=e,e={memoizedState:Qi.memoizedState,baseState:Qi.baseState,baseQueue:Qi.baseQueue,queue:Qi.queue,next:null},wi===null?Vr.memoizedState=wi=e:wi=wi.next=e}return wi}function nu(e,t){return typeof t=="function"?t(e):t}function sg(e){var t=Ga(),r=t.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=e;var i=Qi,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var o=a=null,l=null,h=s;do{var d=h.lane;if((pc&d)===d)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var p={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(o=l=p,a=i):l=l.next=p,Vr.lanes|=d,fc|=d}h=h.next}while(h!==null&&h!==s);l===null?a=i:l.next=o,Ua(i,t.memoizedState)||(Yn=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,Vr.lanes|=s,fc|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ag(e){var t=Ga(),r=t.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);Ua(s,t.memoizedState)||(Yn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function jN(){}function WN(e,t){var r=Vr,i=Ga(),n=t(),s=!Ua(i.memoizedState,n);if(s&&(i.memoizedState=n,Yn=!0),i=i.queue,Dp(qN.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||wi!==null&&wi.memoizedState.tag&1){if(r.flags|=2048,Pp(9,YN.bind(null,r,i,n,t),void 0,null),$r===null)throw Error(Ne(349));(pc&30)!==0||JN(r,t,n)}return n}function JN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Vr.updateQueue,t===null?(t={lastEffect:null,stores:null},Vr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function YN(e,t,r,i){t.value=r,t.getSnapshot=i,XN(t)&&bs(e,1,-1)}function qN(e,t,r){return r(function(){XN(t)&&bs(e,1,-1)})}function XN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ua(e,r)}catch{return!0}}function vx(e){var t=oo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nu,lastRenderedState:e},t.queue=e,e=e.dispatch=Vae.bind(null,Vr,e),[t.memoizedState,e]}function Pp(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Vr.updateQueue,t===null?(t={lastEffect:null,stores:null},Vr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function QN(){return Ga().memoizedState}function Og(e,t,r,i){var n=oo();Vr.flags|=e,n.memoizedState=Pp(1|t,r,void 0,i===void 0?null:i)}function S0(e,t,r,i){var n=Ga();i=i===void 0?null:i;var s=void 0;if(Qi!==null){var a=Qi.memoizedState;if(s=a.destroy,i!==null&&ob(i,a.deps)){n.memoizedState=Pp(t,r,s,i);return}}Vr.flags|=e,n.memoizedState=Pp(1|t,r,s,i)}function yx(e,t){return Og(8390656,8,e,t)}function Dp(e,t){return S0(2048,8,e,t)}function KN(e,t){return S0(4,2,e,t)}function ZN(e,t){return S0(4,4,e,t)}function $N(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eI(e,t,r){return r=r!=null?r.concat([e]):null,S0(4,4,$N.bind(null,t,e),r)}function hb(){}function tI(e,t){var r=Ga();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ob(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function rI(e,t){var r=Ga();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ob(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Hae(e,t){var r=hr;hr=r!==0&&4>r?r:4,e(!0);var i=_s.transition;_s.transition={};try{e(!1),t()}finally{hr=r,_s.transition=i}}function iI(){return Ga().memoizedState}function Gae(e,t,r){var i=cl(e);r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},nI(e)?sI(t,r):(aI(e,t,r),r=on(),e=bs(e,i,r),e!==null&&oI(e,t,i))}function Vae(e,t,r){var i=cl(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(nI(e))sI(t,n);else{aI(e,t,n);var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,r);if(n.hasEagerState=!0,n.eagerState=o,Ua(o,a))return}catch{}finally{}r=on(),e=bs(e,i,r),e!==null&&oI(e,t,i)}}function nI(e){var t=e.alternate;return e===Vr||t!==null&&t===Vr}function sI(e,t){Kd=Tv=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function aI(e,t,r){$r!==null&&(e.mode&1)!==0&&(Vt&2)===0?(e=t.interleaved,e===null?(r.next=r,Pa===null?Pa=[t]:Pa.push(t)):(r.next=e.next,e.next=r),t.interleaved=r):(e=t.pending,e===null?r.next=r:(r.next=e.next,e.next=r),t.pending=r)}function oI(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,jS(e,r)}}var Cv={readContext:Es,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useInsertionEffect:Ji,useLayoutEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useMutableSource:Ji,useSyncExternalStore:Ji,useId:Ji,unstable_isNewReconciler:!1},jae={readContext:Es,useCallback:function(e,t){return oo().memoizedState=[e,t===void 0?null:t],e},useContext:Es,useEffect:yx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Og(4194308,4,$N.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Og(4194308,4,e,t)},useInsertionEffect:function(e,t){return Og(4,2,e,t)},useMemo:function(e,t){var r=oo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=oo();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Gae.bind(null,Vr,e),[i.memoizedState,e]},useRef:function(e){var t=oo();return e={current:e},t.memoizedState=e},useState:vx,useDebugValue:hb,useDeferredValue:function(e){var t=vx(e),r=t[0],i=t[1];return yx(function(){var n=_s.transition;_s.transition={};try{i(e)}finally{_s.transition=n}},[e]),r},useTransition:function(){var e=vx(!1),t=e[0];return e=Hae.bind(null,e[1]),oo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Vr,n=oo();if(Cr){if(r===void 0)throw Error(Ne(407));r=r()}else{if(r=t(),$r===null)throw Error(Ne(349));(pc&30)!==0||JN(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,yx(qN.bind(null,i,s,e),[e]),i.flags|=2048,Pp(9,YN.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=oo(),t=$r.identifierPrefix;if(Cr){var r=po,i=co;r=(i&~(1<<32-Zs(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Op++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=kae++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wae={readContext:Es,useCallback:tI,useContext:Es,useEffect:Dp,useImperativeHandle:eI,useInsertionEffect:KN,useLayoutEffect:ZN,useMemo:rI,useReducer:sg,useRef:QN,useState:function(){return sg(nu)},useDebugValue:hb,useDeferredValue:function(e){var t=sg(nu),r=t[0],i=t[1];return Dp(function(){var n=_s.transition;_s.transition={};try{i(e)}finally{_s.transition=n}},[e]),r},useTransition:function(){var e=sg(nu)[0],t=Ga().memoizedState;return[e,t]},useMutableSource:jN,useSyncExternalStore:WN,useId:iI,unstable_isNewReconciler:!1},Jae={readContext:Es,useCallback:tI,useContext:Es,useEffect:Dp,useImperativeHandle:eI,useInsertionEffect:KN,useLayoutEffect:ZN,useMemo:rI,useReducer:ag,useRef:QN,useState:function(){return ag(nu)},useDebugValue:hb,useDeferredValue:function(e){var t=ag(nu),r=t[0],i=t[1];return Dp(function(){var n=_s.transition;_s.transition={};try{i(e)}finally{_s.transition=n}},[e]),r},useTransition:function(){var e=ag(nu)[0],t=Ga().memoizedState;return[e,t]},useMutableSource:jN,useSyncExternalStore:WN,useId:iI,unstable_isNewReconciler:!1};function cb(e,t){try{var r="",i=t;do r+=wse(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n}}function n_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Yae=typeof WeakMap=="function"?WeakMap:Map;function lI(e,t,r){r=vo(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Pv||(Pv=!0,f_=i),n_(e,t)},r}function uI(e,t,r){r=vo(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){n_(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){n_(e,t),typeof i!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function JL(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Yae;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=ooe.bind(null,e,t,r),t.then(e,e))}function YL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qL(e,t,r,i,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=vo(-1,1),t.tag=2,ul(r,t))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var hI,s_,cI,dI;hI=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};s_=function(){};cI=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Kl(Ba.current);var s=null;switch(r){case"input":n=Pw(e,n),i=Pw(e,i),s=[];break;case"select":n=Br({},n,{value:void 0}),i=Br({},i,{value:void 0}),s=[];break;case"textarea":n=Nw(e,n),i=Nw(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=yv)}Bw(r,i);var a;r=null;for(h in n)if(!i.hasOwnProperty(h)&&n.hasOwnProperty(h)&&n[h]!=null)if(h==="style"){var o=n[h];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(yp.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var l=i[h];if(o=n!=null?n[h]:void 0,i.hasOwnProperty(h)&&l!==o&&(l!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(h,r)),r=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(yp.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&wr("scroll",e),s||o===l||(s=[])):(s=s||[]).push(h,l))}r&&(s=s||[]).push("style",r);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};dI=function(e,t,r,i){r!==i&&(t.flags|=4)};function Sd(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Yi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function qae(e,t,r){var i=t.pendingProps;switch(ib(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(t),null;case 1:return Tn(t.type)&&xv(),Yi(t),null;case 3:return i=t.stateNode,dc(),Sr(En),Sr(tn),ab(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(wd(t)?t.flags|=4:i.isDehydrated||(t.flags|=1024)),s_(e,t),Yi(t),null;case 5:sb(t);var n=Kl(Lp.current);if(r=t.type,e!==null&&t.stateNode!=null)cI(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ne(166));return Yi(t),null}if(e=Kl(Ba.current),wd(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Ea]=t,i[Tp]=s,e=(t.mode&1)!==0,r){case"dialog":wr("cancel",i),wr("close",i);break;case"iframe":case"object":case"embed":wr("load",i);break;case"video":case"audio":for(n=0;n<Nd.length;n++)wr(Nd[n],i);break;case"source":wr("error",i);break;case"img":case"image":case"link":wr("error",i),wr("load",i);break;case"details":wr("toggle",i);break;case"input":hL(i,s),wr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},wr("invalid",i);break;case"textarea":dL(i,s),wr("invalid",i)}Bw(r,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(ig(i.textContent,o,e),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(ig(i.textContent,o,e),n=["children",""+o]):yp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&wr("scroll",i)}switch(r){case"input":Xm(i),cL(i,s,!0);break;case"textarea":Xm(i),pL(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=yv)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=XR(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(r,{is:i.is}):(e=a.createElement(r),r==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,r),e[Ea]=t,e[Tp]=i,hI(e,t,!1,!1),t.stateNode=e;e:{switch(a=zw(r,i),r){case"dialog":wr("cancel",e),wr("close",e),n=i;break;case"iframe":case"object":case"embed":wr("load",e),n=i;break;case"video":case"audio":for(n=0;n<Nd.length;n++)wr(Nd[n],e);n=i;break;case"source":wr("error",e),n=i;break;case"img":case"image":case"link":wr("error",e),wr("load",e),n=i;break;case"details":wr("toggle",e),n=i;break;case"input":hL(e,i),n=Pw(e,i),wr("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Br({},i,{value:void 0}),wr("invalid",e);break;case"textarea":dL(e,i),n=Nw(e,i),wr("invalid",e);break;default:n=i}Bw(r,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?ZR(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QR(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&xp(e,l):typeof l=="number"&&xp(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&wr("scroll",e):l!=null&&FS(e,s,l,a))}switch(r){case"input":Xm(e),cL(e,i,!1);break;case"textarea":Xm(e),pL(e);break;case"option":i.value!=null&&e.setAttribute("value",""+wl(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?Vh(e,!!i.multiple,s,!1):i.defaultValue!=null&&Vh(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=yv)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yi(t),null;case 6:if(e&&t.stateNode!=null)dI(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ne(166));if(r=Kl(Lp.current),Kl(Ba.current),wd(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ea]=t,(s=i.nodeValue!==r)&&(e=Xn,e!==null))switch(a=(e.mode&1)!==0,e.tag){case 3:ig(i.nodeValue,r,a);break;case 5:e.memoizedProps[void 0]!==!0&&ig(i.nodeValue,r,a)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ea]=t,t.stateNode=i}return Yi(t),null;case 13:if(Sr(Dr),i=t.memoizedState,Cr&&Sn!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(i=Sn;i;)i=ho(i.nextSibling);return hc(),t.flags|=98560,t}if(i!==null&&i.dehydrated!==null){if(i=wd(t),e===null){if(!i)throw Error(Ne(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ne(317));i[Ea]=t}else hc(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return Yi(t),null}return $s!==null&&(s=$s,Ki===null?Ki=s:Ki.push.apply(Ki,s),$s=null),(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,r=!1,e===null?wd(t):r=e.memoizedState!==null,i&&!r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Dr.current&1)!==0?fi===0&&(fi=3):vb())),t.updateQueue!==null&&(t.flags|=4),Yi(t),null);case 4:return dc(),s_(e,t),e===null&&y0(t.stateNode.containerInfo),Yi(t),null;case 10:return eb(t.type._context),Yi(t),null;case 17:return Tn(t.type)&&xv(),Yi(t),null;case 19:if(Sr(Dr),s=t.memoizedState,s===null)return Yi(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)Sd(s,!1);else{if(fi!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=Ev(e),a!==null){for(t.flags|=128,Sd(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return vr(Dr,Dr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Kr()>mc&&(t.flags|=128,i=!0,Sd(s,!1),t.lanes=4194304)}else{if(!i)if(e=Ev(a),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Sd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Cr)return Yi(t),null}else 2*Kr()-s.renderingStartTime>mc&&r!==1073741824&&(t.flags|=128,i=!0,Sd(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Kr(),t.sibling=null,r=Dr.current,vr(Dr,i?r&1|2:r&1),t):(Yi(t),null);case 22:case 23:return gb(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&i.mode!=="unstable-defer-without-hiding"&&t.tag!==23&&(t.flags|=8192),r&&(t.mode&1)!==0?(Hn&1073741824)!==0&&(Yi(t),t.tag!==23&&t.subtreeFlags&6&&i.mode!=="unstable-defer-without-hiding"&&(t.flags|=8192)):Yi(t),null;case 24:return null;case 25:return null}throw Error(Ne(156,t.tag))}var Xae=Mo.ReactCurrentOwner,Yn=!1;function vn(e,t,r,i){t.child=e===null?GN(t,null,r,i):cc(t,e.child,r,i)}function XL(e,t,r,i,n){r=r.render;var s=t.ref;return Yh(t,n),i=lb(e,t,r,i,s,n),r=ub(),e!==null&&!Yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,So(e,t,n)):(Cr&&r&&rb(t),t.flags|=1,vn(e,t,i,n),t.child)}function QL(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!yb(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,pI(e,t,s,i,n)):(e=Rg(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Mp,r(a,i)&&e.ref===t.ref)return So(e,t,n)}return t.flags|=1,e=Sl(s,i),e.ref=t.ref,e.return=t,t.child=e}function pI(e,t,r,i,n){if(e!==null&&Mp(e.memoizedProps,i)&&e.ref===t.ref)if(Yn=!1,(e.lanes&n)!==0)(e.flags&131072)!==0&&(Yn=!0);else return t.lanes=e.lanes,So(e,t,n);return o_(e,t,r,i,n)}function a_(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden"||i.mode==="unstable-defer-without-hiding")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null},vr(Dh,Hn),Hn|=r;else if((r&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null},i=s!==null?s.baseLanes:r,vr(Dh,Hn),Hn|=i;else return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,vr(Dh,Hn),Hn|=e,null;else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,vr(Dh,Hn),Hn|=i;return vn(e,t,n,r),t.child}function fI(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function o_(e,t,r,i,n){var s=Tn(r)?hu:tn.current;return s=uc(t,s),Yh(t,n),r=lb(e,t,r,i,s,n),i=ub(),e!==null&&!Yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,So(e,t,n)):(Cr&&i&&rb(t),t.flags|=1,vn(e,t,r,n),t.child)}function KL(e,t,r,i,n){if(Tn(r)){var s=!0;wv(t)}else s=!1;if(Yh(t,n),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),FN(t,r,i),t_(t,r,i,n),i=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=Es(h):(h=Tn(r)?hu:tn.current,h=uc(t,h));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==h)&&GL(t,a,i,h),qo=!1;var f=t.memoizedState;a.state=f,bv(t,i,a,n),l=t.memoizedState,o!==i||f!==l||En.current||qo?(typeof d=="function"&&(e_(t,r,d,i),l=t.memoizedState),(o=qo||HL(t,r,o,i,f,l,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=h,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,BN(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Hs(t.type,o),a.props=h,p=t.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Es(l):(l=Tn(r)?hu:tn.current,l=uc(t,l));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||f!==l)&&GL(t,a,i,l),qo=!1,f=t.memoizedState,a.state=f,bv(t,i,a,n);var v=t.memoizedState;o!==p||f!==v||En.current||qo?(typeof m=="function"&&(e_(t,r,m,i),v=t.memoizedState),(h=qo||HL(t,r,h,i,f,v,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,v,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),a.props=i,a.state=v,a.context=l,i=h):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return l_(e,t,r,i,s,n)}function l_(e,t,r,i,n,s){fI(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&FL(t,r,!1),So(e,t,s);i=t.stateNode,Xae.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=cc(t,e.child,null,s),t.child=cc(t,null,o,s)):vn(e,t,o,s),t.memoizedState=i.state,n&&FL(t,r,!0),t.child}function mI(e){var t=e.stateNode;t.pendingContext?zL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zL(e,t.context,!1),nb(e,t.containerInfo)}var og={dehydrated:null,treeContext:null,retryLane:0};function lg(e){return{baseLanes:e,cachePool:null}}function gI(e,t,r){var i=t.pendingProps,n=Dr.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),vr(Dr,n&1),e===null)return i_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(n=i.children,e=i.fallback,s?(i=t.mode,s=t.child,n={mode:"hidden",children:n},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=n):s=Nv(n,i,0,null),e=au(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=lg(r),t.memoizedState=og,e):u_(t,n));if(n=e.memoizedState,n!==null){if(o=n.dehydrated,o!==null){if(a)return t.flags&256?(t.flags&=-257,ug(e,t,r,Error(Ne(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=Nv({mode:"visible",children:i.children},n,0,null),s=au(s,n,r,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,(t.mode&1)!==0&&cc(t,e.child,null,r),t.child.memoizedState=lg(r),t.memoizedState=og,s);if((t.mode&1)===0)t=ug(e,t,r,null);else if(o.data==="$!")t=ug(e,t,r,Error(Ne(419)));else if(i=(r&e.childLanes)!==0,Yn||i){if(i=$r,i!==null){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}i=(s&(i.suspendedLanes|r))!==0?0:s,i!==0&&i!==n.retryLane&&(n.retryLane=i,bs(e,i,-1))}vb(),t=ug(e,t,r,Error(Ne(421)))}else o.data==="$?"?(t.flags|=128,t.child=e.child,t=loe.bind(null,e),o._reactRetry=t,t=null):(r=n.treeContext,Sn=ho(o.nextSibling),Xn=t,Cr=!0,$s=null,r!==null&&(xs[ws++]=co,xs[ws++]=po,xs[ws++]=cu,co=r.id,po=r.overflow,cu=t),t=u_(t,t.pendingProps.children),t.flags|=4096);return t}return s?(i=$L(e,t,i.children,i.fallback,r),s=t.child,n=e.child.memoizedState,s.memoizedState=n===null?lg(r):{baseLanes:n.baseLanes|r,cachePool:null},s.childLanes=e.childLanes&~r,t.memoizedState=og,i):(r=ZL(e,t,i.children,r),t.memoizedState=null,r)}return s?(i=$L(e,t,i.children,i.fallback,r),s=t.child,n=e.child.memoizedState,s.memoizedState=n===null?lg(r):{baseLanes:n.baseLanes|r,cachePool:null},s.childLanes=e.childLanes&~r,t.memoizedState=og,i):(r=ZL(e,t,i.children,r),t.memoizedState=null,r)}function u_(e,t){return t=Nv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ZL(e,t,r,i){var n=e.child;return e=n.sibling,r=Sl(n,{mode:"visible",children:r}),(t.mode&1)===0&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r}function $L(e,t,r,i,n){var s=t.mode;e=e.child;var a=e.sibling,o={mode:"hidden",children:r};return(s&1)===0&&t.child!==e?(r=t.child,r.childLanes=0,r.pendingProps=o,t.deletions=null):(r=Sl(e,o),r.subtreeFlags=e.subtreeFlags&14680064),a!==null?i=Sl(a,i):(i=au(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,i}function ug(e,t,r,i){return i!==null&&($s===null?$s=[i]:$s.push(i)),cc(t,e.child,null,r),e=u_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eO(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),$w(e.return,t,r)}function xx(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function vI(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(vn(e,t,i.children,r),i=Dr.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eO(e,r,t);else if(e.tag===19)eO(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(vr(Dr,i),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Ev(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),xx(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ev(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}xx(t,!0,r,null,s);break;case"together":xx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function So(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fc|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Ne(153));if(t.child!==null){for(e=t.child,r=Sl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Sl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Qae(e,t,r){switch(t.tag){case 3:mI(t),hc();break;case 5:VN(t);break;case 1:Tn(t.type)&&wv(t);break;case 4:nb(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;vr(_v,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(vr(Dr,Dr.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?gI(e,t,r):(vr(Dr,Dr.current&1),e=So(e,t,r),e!==null?e.sibling:null);vr(Dr,Dr.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return vI(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),vr(Dr,Dr.current),i)break;return null;case 22:case 23:return t.lanes=0,a_(e,t,r)}return So(e,t,r)}function Kae(e,t){switch(ib(t),t.tag){case 1:return Tn(t.type)&&xv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dc(),Sr(En),Sr(tn),ab(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return sb(t),null;case 13:if(Sr(Dr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ne(340));hc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sr(Dr),null;case 4:return dc(),null;case 10:return eb(t.type._context),null;case 22:case 23:return gb(),null;case 24:return null;default:return null}}var hg=!1,Zl=!1,Zae=typeof WeakSet=="function"?WeakSet:Set,He=null;function Lv(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){bn(e,t,i)}else r.current=null}function h_(e,t,r){try{r()}catch(i){bn(e,t,i)}}var tO=!1;function $ae(e,t){if(Yw=mv,e=MN(),KS(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,h=0,d=0,p=e,f=null;t:for(;;){for(var m;p!==r||n!==0&&p.nodeType!==3||(o=a+n),p!==s||i!==0&&p.nodeType!==3||(l=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(m=p.firstChild)!==null;)f=p,p=m;for(;;){if(p===e)break t;if(f===r&&++h===n&&(o=a),f===s&&++d===i&&(l=a),(m=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(qw={focusedElem:e,selectionRange:r},mv=!1,He=t;He!==null;)if(t=He,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,He=e;else for(;He!==null;){t=He;try{var v=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,S=v.memoizedState,y=t.stateNode,g=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:Hs(t.type,w),S);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=t.stateNode.containerInfo;if(_.nodeType===1)_.textContent="";else if(_.nodeType===9){var b=_.body;b!=null&&(b.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(T){bn(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,He=e;break}He=t.return}return v=tO,tO=!1,v}function Rp(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&h_(t,r,s)}n=n.next}while(n!==i)}}function b0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function c_(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rO(e,t,r){if(Ia&&typeof Ia.onCommitFiberUnmount=="function")try{Ia.onCommitFiberUnmount(f0,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var i=e=e.next;do{var n=i,s=n.destroy;n=n.tag,s!==void 0&&((n&2)!==0||(n&4)!==0)&&h_(t,r,s),i=i.next}while(i!==e)}break;case 1:if(Lv(t,r),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){bn(t,r,a)}break;case 5:Lv(t,r);break;case 4:xI(e,t,r)}}function yI(e){var t=e.alternate;t!==null&&(e.alternate=null,yI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ea],delete t[Tp],delete t[Kw],delete t[Bae],delete t[zae])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iO(e){return e.tag===5||e.tag===3||e.tag===4}function nO(e){e:{for(var t=e.return;t!==null;){if(iO(t))break e;t=t.return}throw Error(Ne(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var i=!1;break;case 3:t=t.containerInfo,i=!0;break;case 4:t=t.containerInfo,i=!0;break;default:throw Error(Ne(161))}r.flags&32&&(xp(t,""),r.flags&=-33);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||iO(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}i?d_(e,r,t):p_(e,r,t)}function d_(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yv));else if(i!==4&&(e=e.child,e!==null))for(d_(e,t,r),e=e.sibling;e!==null;)d_(e,t,r),e=e.sibling}function p_(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(p_(e,t,r),e=e.sibling;e!==null;)p_(e,t,r),e=e.sibling}function xI(e,t,r){for(var i=t,n=!1,s,a;;){if(!n){n=i.return;e:for(;;){if(n===null)throw Error(Ne(160));switch(s=n.stateNode,n.tag){case 5:a=!1;break e;case 3:s=s.containerInfo,a=!0;break e;case 4:s=s.containerInfo,a=!0;break e}n=n.return}n=!0}if(i.tag===5||i.tag===6){e:for(var o=e,l=i,h=r,d=l;;)if(rO(o,d,h),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a?(o=s,l=i.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):s.removeChild(i.stateNode)}else if(i.tag===18)a?(o=s,l=i.stateNode,o.nodeType===8?mx(o.parentNode,l):o.nodeType===1&&mx(o,l),bp(o)):mx(s,i.stateNode);else if(i.tag===4){if(i.child!==null){s=i.stateNode.containerInfo,a=!0,i.child.return=i,i=i.child;continue}}else if(rO(e,i,r),i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return,i.tag===4&&(n=!1)}i.sibling.return=i.return,i=i.sibling}}function wx(e,t){switch(t.tag){case 0:case 11:case 14:case 15:Rp(3,t,t.return),b0(3,t),Rp(5,t,t.return);return;case 1:return;case 5:var r=t.stateNode;if(r!=null){var i=t.memoizedProps,n=e!==null?e.memoizedProps:i;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(e==="input"&&i.type==="radio"&&i.name!=null&&YR(r,i),zw(e,n),t=zw(e,i),n=0;n<s.length;n+=2){var a=s[n],o=s[n+1];a==="style"?ZR(r,o):a==="dangerouslySetInnerHTML"?QR(r,o):a==="children"?xp(r,o):FS(r,a,o,t)}switch(e){case"input":Dw(r,i);break;case"textarea":qR(r,i);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!i.multiple,s=i.value,s!=null?Vh(r,!!i.multiple,s,!1):e!==!!i.multiple&&(i.defaultValue!=null?Vh(r,!!i.multiple,i.defaultValue,!0):Vh(r,!!i.multiple,i.multiple?[]:"",!1))}r[Tp]=i}}return;case 6:if(t.stateNode===null)throw Error(Ne(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.isDehydrated&&(r.isDehydrated=!1,bp(r.containerInfo));return;case 12:return;case 13:sO(t);return;case 19:sO(t);return;case 17:return}throw Error(Ne(163))}function sO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Zae),t.forEach(function(i){var n=uoe.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function eoe(e,t){for(He=t;He!==null;){t=He;var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{xI(e,n,t);var s=n.alternate;s!==null&&(s.return=null),n.return=null}catch(L){bn(n,t,L)}}if(r=t.child,(t.subtreeFlags&12854)!==0&&r!==null)r.return=t,He=r;else for(;He!==null;){t=He;try{var a=t.flags;if(a&32&&xp(t.stateNode,""),a&512){var o=t.alternate;if(o!==null){var l=o.ref;l!==null&&(typeof l=="function"?l(null):l.current=null)}}if(a&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var h=t.alternate;(h===null||h.memoizedState===null)&&(fb=Kr())}break;case 22:var d=t.memoizedState!==null,p=t.alternate,f=p!==null&&p.memoizedState!==null;r=t;e:{i=r,n=d;for(var m=null,v=i;;){if(v.tag===5){if(m===null){m=v;var w=v.stateNode;if(n){var S=w.style;typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"}else{var y=v.stateNode,g=v.memoizedProps.style,_=g!=null&&g.hasOwnProperty("display")?g.display:null;y.style.display=KR("display",_)}}}else if(v.tag===6)m===null&&(v.stateNode.nodeValue=n?"":v.memoizedProps);else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===i)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}if(d&&!f&&(r.mode&1)!==0){He=r;for(var b=r.child;b!==null;){for(r=He=b;He!==null;){i=He;var T=i.child;switch(i.tag){case 0:case 11:case 14:case 15:Rp(4,i,i.return);break;case 1:Lv(i,i.return);var A=i.stateNode;if(typeof A.componentWillUnmount=="function"){var M=i.return;try{A.props=i.memoizedProps,A.state=i.memoizedState,A.componentWillUnmount()}catch(L){bn(i,M,L)}}break;case 5:Lv(i,i.return);break;case 22:if(i.memoizedState!==null){oO(r);continue}}T!==null?(T.return=i,He=T):oO(r)}b=b.sibling}}}switch(a&4102){case 2:nO(t),t.flags&=-3;break;case 6:nO(t),t.flags&=-3,wx(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,wx(t.alternate,t);break;case 4:wx(t.alternate,t)}}catch(L){bn(t,t.return,L)}if(r=t.sibling,r!==null){r.return=t.return,He=r;break}He=t.return}}}function toe(e,t,r){He=e,wI(e)}function wI(e,t,r){for(var i=(e.mode&1)!==0;He!==null;){var n=He,s=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||hg;if(!a){var o=n.alternate,l=o!==null&&o.memoizedState!==null||Zl;o=hg;var h=Zl;if(hg=a,(Zl=l)&&!h)for(He=n;He!==null;)a=He,l=a.child,a.tag===22&&a.memoizedState!==null?lO(n):l!==null?(l.return=a,He=l):lO(n);for(;s!==null;)He=s,wI(s),s=s.sibling;He=n,hg=o,Zl=h}aO(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,He=s):aO(e)}}function aO(e){for(;He!==null;){var t=He;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Zl||b0(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Zl)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Hs(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&kL(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}kL(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&bp(p)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ne(163))}Zl||t.flags&512&&c_(t)}catch(f){bn(t,t.return,f)}}if(t===e){He=null;break}if(r=t.sibling,r!==null){r.return=t.return,He=r;break}He=t.return}}function oO(e){for(;He!==null;){var t=He;if(t===e){He=null;break}var r=t.sibling;if(r!==null){r.return=t.return,He=r;break}He=t.return}}function lO(e){for(;He!==null;){var t=He;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{b0(4,t)}catch(l){bn(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){bn(t,n,l)}}var s=t.return;try{c_(t)}catch(l){bn(t,s,l)}break;case 5:var a=t.return;try{c_(t)}catch(l){bn(t,a,l)}}}catch(l){bn(t,t.return,l)}if(t===e){He=null;break}var o=t.sibling;if(o!==null){o.return=t.return,He=o;break}He=t.return}}var roe=Math.ceil,Ov=Mo.ReactCurrentDispatcher,db=Mo.ReactCurrentOwner,Ss=Mo.ReactCurrentBatchConfig,Vt=0,$r=null,oi=null,Ii=0,Hn=0,Dh=Cl(0),fi=0,Np=null,fc=0,A0=0,pb=0,Zd=null,Ki=null,fb=0,mc=1/0,Pv=!1,f_=null,hl=null,cg=!1,tl=null,Dv=0,$d=0,m_=null,Pg=-1,Dg=0;function on(){return(Vt&6)!==0?Kr():Pg!==-1?Pg:Pg=Kr()}function cl(e){return(e.mode&1)===0?1:(Vt&2)!==0&&Ii!==0?Ii&-Ii:Uae.transition!==null?(Dg===0&&(e=Km,Km<<=1,(Km&4194240)===0&&(Km=64),Dg=e),Dg):(e=hr,e!==0||(e=window.event,e=e===void 0?16:gN(e.type)),e)}function bs(e,t,r){if(50<$d)throw $d=0,m_=null,Error(Ne(185));var i=M0(e,t);if(i===null)return null;if(rf(i,t,r),(Vt&2)===0||i!==$r){if(i.isDehydrated&&i.tag!==0){$r===i&&su(i,0),i.isDehydrated=!1;var n=Error(Ne(424)),s=i.onRecoverableError;s(n)}else i===$r&&((Vt&2)===0&&(A0|=t),fi===4&&Qo(i,Ii));Cn(i,r),t===1&&Vt===0&&(e.mode&1)===0&&(mc=Kr()+500,w0&&Ll())}return i}function M0(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Cn(e,t){var r=e.callbackNode;Use(e,t);var i=fv(e,e===$r?Ii:0);if(i===0)r!==null&&gL(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&gL(r),t===1)e.tag===0?Fae(uO.bind(null,e)):IN(uO.bind(null,e)),Nae(function(){Vt===0&&Ll()}),r=null;else{switch(hN(i)){case 1:r=VS;break;case 4:r=lN;break;case 16:r=pv;break;case 536870912:r=uN;break;default:r=pv}r=LI(r,_I.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _I(e,t){if(Pg=-1,Dg=0,(Vt&6)!==0)throw Error(Ne(327));var r=e.callbackNode;if(qh()&&e.callbackNode!==r)return null;var i=fv(e,e===$r?Ii:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Rv(e,i);else{t=i;var n=Vt;Vt|=2;var s=bI();($r!==e||Ii!==t)&&(mc=Kr()+500,su(e,t));do try{soe();break}catch(o){SI(e,o)}while(1);$S(),Ov.current=s,Vt=n,oi!==null?t=0:($r=null,Ii=0,t=fi)}if(t!==0){if(t===2&&(n=Gw(e),n!==0&&(i=n,t=g_(e,n))),t===1)throw r=Np,su(e,0),Qo(e,i),Cn(e,Kr()),r;if(t===6)Qo(e,i);else{if(n=e.current.alternate,(i&30)===0&&!ioe(n)&&(t=Rv(e,i),t===2&&(s=Gw(e),s!==0&&(i=s,t=g_(e,s))),t===1))throw r=Np,su(e,0),Qo(e,i),Cn(e,Kr()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(Ne(345));case 2:Jl(e,Ki);break;case 3:if(Qo(e,i),(i&130023424)===i&&(t=fb+500-Kr(),10<t)){if(fv(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){on(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Qw(Jl.bind(null,e,Ki),t);break}Jl(e,Ki);break;case 4:if(Qo(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var a=31-Zs(i);s=1<<a,a=t[a],a>n&&(n=a),i&=~s}if(i=n,i=Kr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*roe(i/1960))-i,10<i){e.timeoutHandle=Qw(Jl.bind(null,e,Ki),i);break}Jl(e,Ki);break;case 5:Jl(e,Ki);break;default:throw Error(Ne(329))}}}return Cn(e,Kr()),e.callbackNode===r?_I.bind(null,e):null}function g_(e,t){if(e.isDehydrated){e.isDehydrated=!1;var r=Error(Ne(423));AI(r)}return r=Zd,e=Rv(e,t),e!==2&&r!==null&&(Ki===null?Ki=r:Ki.push.apply(Ki,r)),e}function ioe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!Ua(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qo(e,t){for(t&=~pb,t&=~A0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zs(t),i=1<<r;e[r]=-1,t&=~i}}function uO(e){if((Vt&6)!==0)throw Error(Ne(327));qh();var t=fv(e,0);if((t&1)===0)return Cn(e,Kr()),null;var r=Rv(e,t);if(e.tag!==0&&r===2){var i=Gw(e);i!==0&&(t=i,r=g_(e,i))}if(r===1)throw r=Np,su(e,0),Qo(e,t),Cn(e,Kr()),r;if(r===6)throw Error(Ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jl(e,Ki),Cn(e,Kr()),null}function mb(e,t){var r=Vt;Vt|=1;try{return e(t)}finally{Vt=r,Vt===0&&(mc=Kr()+500,w0&&Ll())}}function Rc(e){tl!==null&&tl.tag===0&&(Vt&6)===0&&qh();var t=Vt;Vt|=1;var r=Ss.transition,i=hr;try{if(Ss.transition=null,hr=1,e)return e()}finally{hr=i,Ss.transition=r,Vt=t,(Vt&6)===0&&Ll()}}function gb(){Hn=Dh.current,Sr(Dh)}function su(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Rae(r)),oi!==null)for(r=oi.return;r!==null;){var i=r;switch(ib(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xv();break;case 3:dc(),Sr(En),Sr(tn),ab();break;case 5:sb(i);break;case 4:dc();break;case 13:Sr(Dr);break;case 19:Sr(Dr);break;case 10:eb(i.type._context);break;case 22:case 23:gb()}r=r.return}if($r=e,oi=Sl(e.current,null),Ii=Hn=t,fi=0,Np=null,pb=A0=fc=0,Ki=Zd=null,Pa!==null){for(e=0;e<Pa.length;e++)if(t=Pa[e],r=t.interleaved,r!==null){t.interleaved=null,i=r.next;var n=t.pending;if(n!==null){var s=n.next;n.next=i,r.next=s}t.pending=r}Pa=null}}function SI(e,t){do{var r=oi;try{if($S(),Lg.current=Cv,Tv){for(var i=Vr.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Tv=!1}if(pc=0,wi=Qi=Vr=null,Kd=!1,Op=0,db.current=null,r===null||r.return===null){fi=1,Np=t,oi=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=Ii,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,d=o,p=d.tag;if((d.mode&1)===0&&(p===0||p===11||p===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=YL(a);if(m!==null){m.flags&=-257,qL(m,a,o,s,t),m.mode&1&&JL(s,h,t),t=m,l=h;var v=t.updateQueue;if(v===null){var w=new Set;w.add(l),t.updateQueue=w}else v.add(l);break e}else{if((t&1)===0){JL(s,h,t),vb();break e}l=Error(Ne(426))}}else if(Cr&&o.mode&1){var S=YL(a);if(S!==null){(S.flags&65536)===0&&(S.flags|=256),qL(S,a,o,s,t),t=l,$s===null?$s=[t]:$s.push(t);break e}}AI(l),l=cb(l,o),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=lI(s,l,t);UL(s,y);break e;case 1:o=l;var g=s.type,_=s.stateNode;if((s.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(hl===null||!hl.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=uI(s,o,t);UL(s,b);break e}}s=s.return}while(s!==null)}EI(r)}catch(T){t=T,oi===r&&r!==null&&(oi=r=r.return);continue}break}while(1)}function bI(){var e=Ov.current;return Ov.current=Cv,e===null?Cv:e}function vb(){(fi===0||fi===3||fi===2)&&(fi=4),$r===null||(fc&268435455)===0&&(A0&268435455)===0||Qo($r,Ii)}function AI(e){fi!==4&&(fi=2),Zd===null?Zd=[e]:Zd.push(e)}function Rv(e,t){var r=Vt;Vt|=2;var i=bI();$r===e&&Ii===t||su(e,t);do try{noe();break}catch(n){SI(e,n)}while(1);if($S(),Vt=r,Ov.current=i,oi!==null)throw Error(Ne(261));return $r=null,Ii=0,fi}function noe(){for(;oi!==null;)MI(oi)}function soe(){for(;oi!==null&&!Ose();)MI(oi)}function MI(e){var t=CI(e.alternate,e,Hn);e.memoizedProps=e.pendingProps,t===null?EI(e):oi=t,db.current=null}function EI(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=qae(r,t,Hn),r!==null){oi=r;return}}else{if(r=Kae(r,t),r!==null){r.flags&=32767,oi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fi=6,oi=null;return}}if(t=t.sibling,t!==null){oi=t;return}oi=t=e}while(t!==null);fi===0&&(fi=5)}function Jl(e,t){var r=hr,i=Ss.transition;try{Ss.transition=null,hr=1,aoe(e,t,r)}finally{Ss.transition=i,hr=r}return null}function aoe(e,t,r){do qh();while(tl!==null);if((Vt&6)!==0)throw Error(Ne(327));var i=e.finishedWork,n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Ne(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(kse(e,s),e===$r&&(oi=$r=null,Ii=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||cg||(cg=!0,LI(pv,function(){return qh(),null})),s=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||s){s=Ss.transition,Ss.transition=null;var a=hr;hr=1;var o=Vt;Vt|=4,db.current=null,$ae(e,i),eoe(e,i),Eae(qw),mv=!!Yw,qw=Yw=null,e.current=i,toe(i),Pse(),Vt=o,hr=a,Ss.transition=s}else e.current=i;if(cg&&(cg=!1,tl=e,Dv=n),s=e.pendingLanes,s===0&&(hl=null),Nse(i.stateNode),Cn(e,Kr()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)r(t[i]);if(Pv)throw Pv=!1,e=f_,f_=null,e;return(Dv&1)!==0&&e.tag!==0&&qh(),s=e.pendingLanes,(s&1)!==0?e===m_?$d++:($d=0,m_=e):$d=0,Ll(),null}function qh(){if(tl!==null){var e=hN(Dv),t=Ss.transition,r=hr;try{if(Ss.transition=null,hr=16>e?16:e,tl===null)var i=!1;else{if(e=tl,tl=null,Dv=0,(Vt&6)!==0)throw Error(Ne(331));var n=Vt;for(Vt|=4,He=e.current;He!==null;){var s=He,a=s.child;if((He.flags&16)!==0){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var h=o[l];for(He=h;He!==null;){var d=He;switch(d.tag){case 0:case 11:case 15:Rp(8,d,s)}var p=d.child;if(p!==null)p.return=d,He=p;else for(;He!==null;){d=He;var f=d.sibling,m=d.return;if(yI(d),d===h){He=null;break}if(f!==null){f.return=m,He=f;break}He=m}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}He=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,He=a;else e:for(;He!==null;){if(s=He,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Rp(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,He=y;break e}He=s.return}}var g=e.current;for(He=g;He!==null;){a=He;var _=a.child;if((a.subtreeFlags&2064)!==0&&_!==null)_.return=a,He=_;else e:for(a=g;He!==null;){if(o=He,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:b0(9,o)}}catch(T){bn(o,o.return,T)}if(o===a){He=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,He=b;break e}He=o.return}}if(Vt=n,Ll(),Ia&&typeof Ia.onPostCommitFiberRoot=="function")try{Ia.onPostCommitFiberRoot(f0,e)}catch{}i=!0}return i}finally{hr=r,Ss.transition=t}}return!1}function hO(e,t,r){t=cb(r,t),t=lI(e,t,1),ul(e,t),t=on(),e=M0(e,1),e!==null&&(rf(e,1,t),Cn(e,t))}function bn(e,t,r){if(e.tag===3)hO(e,e,r);else for(;t!==null;){if(t.tag===3){hO(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(hl===null||!hl.has(i))){e=cb(r,e),e=uI(t,e,1),ul(t,e),e=on(),t=M0(t,1),t!==null&&(rf(t,1,e),Cn(t,e));break}}t=t.return}}function ooe(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=on(),e.pingedLanes|=e.suspendedLanes&r,$r===e&&(Ii&r)===r&&(fi===4||fi===3&&(Ii&130023424)===Ii&&500>Kr()-fb?su(e,0):pb|=r),Cn(e,t)}function TI(e,t){t===0&&((e.mode&1)===0?t=1:(t=Zm,Zm<<=1,(Zm&130023424)===0&&(Zm=4194304)));var r=on();e=M0(e,t),e!==null&&(rf(e,t,r),Cn(e,r))}function loe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),TI(e,r)}function uoe(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ne(314))}i!==null&&i.delete(t),TI(e,r)}var CI;CI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||En.current)Yn=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Yn=!1,Qae(e,t,r);Yn=(e.flags&131072)!==0}else Yn=!1,Cr&&(t.flags&1048576)!==0&&UN(t,Mv,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var n=uc(t,tn.current);Yh(t,r),n=lb(null,t,i,e,n,r);var s=ub();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tn(i)?(s=!0,wv(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,tb(t),n.updater=_0,t.stateNode=n,n._reactInternals=t,t_(t,i,e,r),t=l_(null,t,i,!0,s,r)):(t.tag=0,Cr&&s&&rb(t),vn(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=coe(i),e=Hs(i,e),n){case 0:t=o_(null,t,i,e,r);break e;case 1:t=KL(null,t,i,e,r);break e;case 11:t=XL(null,t,i,e,r);break e;case 14:t=QL(null,t,i,Hs(i.type,e),r);break e}throw Error(Ne(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Hs(i,n),o_(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Hs(i,n),KL(e,t,i,n,r);case 3:if(mI(t),i=t.updateQueue,e===null||i===null)throw Error(Ne(282));if(i=t.pendingProps,n=t.memoizedState.element,BN(e,t),bv(t,i,null,r),s=t.stateNode,i=t.memoizedState.element,i===n)hc(),t=So(e,t,r);else{if((n=s.isDehydrated)&&(Sn=ho(t.stateNode.containerInfo.firstChild),Xn=t,Cr=!0,$s=null,n=!0),n){if(e=s.mutableSourceEagerHydrationData,e!=null)for(n=0;n<e.length;n+=2)s=e[n],s._workInProgressVersionPrimary=e[n+1],Cg.push(s);for(r=GN(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else vn(e,t,i,r),hc();t=t.child}return t;case 5:VN(t),e===null&&i_(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null;var a=n.children;return Xw(i,n)?a=null:s!==null&&Xw(i,s)&&(t.flags|=32),fI(e,t),vn(e,t,a,r),t.child;case 6:return e===null&&i_(t),null;case 13:return gI(e,t,r);case 4:return nb(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=cc(t,null,i,r):vn(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Hs(i,n),XL(e,t,i,n,r);case 7:return vn(e,t,t.pendingProps,r),t.child;case 8:return vn(e,t,t.pendingProps.children,r),t.child;case 12:return vn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,vr(_v,i._currentValue),i._currentValue=a,s!==null)if(Ua(s.value,a)){if(s.children===n.children&&!En.current){t=So(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=vo(-1,r&-r),l.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?l.next=l:(l.next=d.next,d.next=l),h.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),$w(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ne(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),$w(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}vn(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Yh(t,r),n=Es(n),i=i(n),t.flags|=1,vn(e,t,i,r),t.child;case 14:return i=t.type,n=Hs(i,t.pendingProps),n=Hs(i.type,n),QL(e,t,i,n,r);case 15:return pI(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Hs(i,n),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Tn(i)?(e=!0,wv(t)):e=!1,Yh(t,r),FN(t,i,n),t_(t,i,n,r),l_(null,t,i,!0,e,r);case 19:return vI(e,t,r);case 22:return a_(e,t,r);case 23:return a_(e,t,r)}throw Error(Ne(156,t.tag))};function LI(e,t){return oN(e,t)}function hoe(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,r,i){return new hoe(e,t,r,i)}function yb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function coe(e){if(typeof e=="function")return yb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kS)return 11;if(e===HS)return 14}return 2}function Sl(e,t){var r=e.alternate;return r===null?(r=jn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Rg(e,t,r,i,n,s){var a=2;if(i=e,typeof e=="function")yb(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case bh:return au(r.children,n,s,t);case US:a=8,n|=8;break;case Tw:return e=jn(12,r,t,n|2),e.elementType=Tw,e.lanes=s,e;case Cw:return e=jn(13,r,t,n),e.elementType=Cw,e.lanes=s,e;case Lw:return e=jn(19,r,t,n),e.elementType=Lw,e.lanes=s,e;case jR:return Nv(r,n,s,t);case lL:return e=jn(23,r,t,n),e.elementType=lL,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case GR:a=10;break e;case VR:a=9;break e;case kS:a=11;break e;case HS:a=14;break e;case Yo:a=16,i=null;break e}throw Error(Ne(130,e==null?e:typeof e,""))}return t=jn(a,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function au(e,t,r,i){return e=jn(7,e,i,t),e.lanes=r,e}function Nv(e,t,r,i){return e=jn(22,e,i,t),e.elementType=jR,e.lanes=r,e}function _x(e,t,r){return e=jn(6,e,null,t),e.lanes=r,e}function Sx(e,t,r){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function doe(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.isDehydrated=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=nx(0),this.expirationTimes=nx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nx(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function xb(e,t,r,i,n,s,a,o){return e=new doe(e,t,r,a,o),t===1?(t=1,n===!0&&(t|=8)):t=0,n=jn(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:null,cache:null,transitions:null},tb(n),e}function poe(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function OI(e){if(!e)return _l;e=e._reactInternals;e:{if(wu(e)!==e||e.tag!==1)throw Error(Ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ne(171))}if(e.tag===1){var r=e.type;if(Tn(r))return NN(e,r,t)}return t}function Iv(e,t,r,i){var n=t.current,s=on(),a=cl(n);return r=OI(r),t.context===null?t.context=r:t.pendingContext=r,t=vo(s,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),ul(n,t),e=bs(n,a,s),e!==null&&Tg(e,n,a),a}function bx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wb(e,t){cO(e,t),(e=e.alternate)&&cO(e,t)}function foe(){return null}var PI=typeof reportError=="function"?reportError:function(e){console.error(e)};function _b(e){this._internalRoot=e}E0.prototype.render=_b.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ne(409));Iv(e,t,null,null)};E0.prototype.unmount=_b.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rc(function(){Iv(null,e,null,null)}),t[Tl]=null}};function E0(e){this._internalRoot=e}E0.prototype.unstable_scheduleHydration=function(e){if(e){var t=pN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xo.length&&t!==0&&t<Xo[r].priority;r++);Xo.splice(r,0,e),r===0&&mN(e)}};function Sb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function T0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function moe(){}function goe(e,t){if(!t)for(var r;r=e.lastChild;)e.removeChild(r);return t=xb(e,0,t,null,!1,!1,"",moe),e[Tl]=t.current,y0(e.nodeType===8?e.parentNode:e),t}function C0(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var h=bx(a);o.call(h)}}Iv(t,a,e,n)}else{if(a=s=r._reactRootContainer=goe(r,i),typeof n=="function"){var l=n;n=function(){var h=bx(a);l.call(h)}}Rc(function(){Iv(t,a,e,n)})}return bx(a)}cN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.isDehydrated){var r=Rd(t.pendingLanes);r!==0&&(jS(t,r|1),Cn(t,Kr()),(Vt&6)===0&&(mc=Kr()+500,Ll()))}break;case 13:var i=on();Rc(function(){return bs(e,1,i)}),wb(e,1)}};WS=function(e){if(e.tag===13){var t=on();bs(e,134217728,t),wb(e,134217728)}};dN=function(e){if(e.tag===13){var t=on(),r=cl(e);bs(e,r,t),wb(e,r)}};pN=function(){return hr};fN=function(e,t){var r=hr;try{return hr=e,t()}finally{hr=r}};Uw=function(e,t,r){switch(t){case"input":if(Dw(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=x0(i);if(!n)throw Error(Ne(90));JR(i),Dw(i,n)}}}break;case"textarea":qR(e,r);break;case"select":t=r.value,t!=null&&Vh(e,!!r.multiple,t,!1)}};tN=mb;rN=Rc;var voe={usingClientEntryPoint:!1,Events:[sf,Th,x0,$R,eN,mb]},bd={findFiberByHostInstance:Ql,bundleType:0,version:"18.0.0-rc.2-11c5bb6e1-20220308",rendererPackageName:"react-dom"},yoe={bundleType:bd.bundleType,version:bd.version,rendererPackageName:bd.rendererPackageName,rendererConfig:bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sN(e),e===null?null:e.stateNode},findFiberByHostInstance:bd.findFiberByHostInstance||foe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-rc.2-11c5bb6e1-20220308"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{f0=dg.inject(yoe),Ia=dg}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=voe;Zn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sb(t))throw Error(Ne(200));return poe(e,t,null,r)};Zn.createRoot=function(e,t){if(!Sb(e))throw Error(Ne(299));var r=!1,i="",n=PI;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=xb(e,1,!1,null,r,!1,i,n),e[Tl]=t.current,y0(e.nodeType===8?e.parentNode:e),new _b(t)};Zn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ne(188)):(e=Object.keys(e).join(","),Error(Ne(268,e)));return e=sN(t),e=e===null?null:e.stateNode,e};Zn.flushSync=function(e){return Rc(e)};Zn.hydrate=function(e,t,r){if(!T0(t))throw Error(Ne(200));return C0(null,e,t,!0,r)};Zn.hydrateRoot=function(e,t,r){if(!Sb(e))throw Error(Ne(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",a=PI;r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),r=xb(e,1,!0,r!=null?r:null,n,!1,s,a),r.context=OI(null),n=r.current,s=on(),a=cl(n);var o=vo(s,a);if(o.payload={element:t},ul(n,o),r.current.lanes=a,rf(r,a,s),Cn(r,s),e[Tl]=r.current,y0(e),i)for(e=0;e<i.length;e++)t=i[e],n=t._getVersion,n=n(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,n]:r.mutableSourceEagerHydrationData.push(t,n);return new E0(r)};Zn.render=function(e,t,r){if(!T0(t))throw Error(Ne(200));return C0(null,e,t,!1,r)};Zn.unmountComponentAtNode=function(e){if(!T0(e))throw Error(Ne(40));return e._reactRootContainer?(Rc(function(){C0(null,null,e,!1,function(){e._reactRootContainer=null,e[Tl]=null})}),!0):!1};Zn.unstable_batchedUpdates=mb;Zn.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!T0(r))throw Error(Ne(200));if(e==null||e._reactInternals===void 0)throw Error(Ne(38));return C0(e,t,r,!1,i)};Zn.version="18.0.0-rc.2-11c5bb6e1-20220308";function DI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DI)}catch(e){console.error(e)}}DI(),zR.exports=Zn;var xoe,woe=zR.exports;xoe=woe.createRoot;export{xO as R,_oe as S,xoe as c,Y5 as j,aE as l,sE as n,_i as r};
